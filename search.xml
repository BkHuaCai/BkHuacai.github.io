<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>springé«˜çº§50è®²</title>
      <link href="/2022/08/10/spring%E9%AB%98%E7%BA%A750%E8%AE%B2/"/>
      <url>/2022/08/10/spring%E9%AB%98%E7%BA%A750%E8%AE%B2/</url>
      
        <content type="html"><![CDATA[<h2 id="å®¹å™¨ä¸-bean"><a href="#å®¹å™¨ä¸-bean" class="headerlink" title="å®¹å™¨ä¸ bean"></a>å®¹å™¨ä¸ bean</h2><h3 id="1-å®¹å™¨æ¥å£"><a href="#1-å®¹å™¨æ¥å£" class="headerlink" title="1) å®¹å™¨æ¥å£"></a>1) å®¹å™¨æ¥å£</h3><ul><li><p>BeanFactory æ¥å£ï¼Œå…¸å‹åŠŸèƒ½æœ‰ï¼š</p><ul><li>getBean</li></ul></li><li><p>ApplicationContext æ¥å£ï¼Œæ˜¯ BeanFactory çš„å­æ¥å£ã€‚å®ƒæ‰©å±•äº† BeanFactory æ¥å£çš„åŠŸèƒ½ï¼Œå¦‚ï¼š</p><ul><li>å›½é™…åŒ–</li><li>é€šé…ç¬¦æ–¹å¼è·å–ä¸€ç»„ Resource èµ„æº</li><li>æ•´åˆ Environment ç¯å¢ƒï¼ˆèƒ½é€šè¿‡å®ƒè·å–å„ç§æ¥æºçš„é…ç½®ä¿¡æ¯ï¼‰</li><li>äº‹ä»¶å‘å¸ƒä¸ç›‘å¬ï¼Œå®ç°ç»„ä»¶ä¹‹é—´çš„è§£è€¦</li></ul></li></ul><p>å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬è¯¾ä¸Šè®²çš„ï¼Œéƒ½æ˜¯ BeanFactory æä¾›çš„åŸºæœ¬åŠŸèƒ½ï¼ŒApplicationContext ä¸­çš„æ‰©å±•åŠŸèƒ½éƒ½æ²¡æœ‰ç”¨åˆ°ã€‚</p><h4 id="æ¼”ç¤º1-BeanFactory-ä¸-ApplicationContext-çš„åŒºåˆ«"><a href="#æ¼”ç¤º1-BeanFactory-ä¸-ApplicationContext-çš„åŒºåˆ«" class="headerlink" title="æ¼”ç¤º1 - BeanFactory ä¸ ApplicationContext çš„åŒºåˆ«"></a>æ¼”ç¤º1 - BeanFactory ä¸ ApplicationContext çš„åŒºåˆ«</h4><h5 id="ä»£ç å‚è€ƒ"><a href="#ä»£ç å‚è€ƒ" class="headerlink" title="ä»£ç å‚è€ƒ"></a>ä»£ç å‚è€ƒ</h5><p><strong>com.itheima.a01</strong> åŒ…ï¼ˆæ‰€æœ‰ä»£ç å·²ä¸Šä¼ è‡³æœ¬äººGitHub&#x2F;BlogCodeä»“åº“ï¼‰</p><h4 id="æ”¶è·ğŸ’¡"><a href="#æ”¶è·ğŸ’¡" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><p>é€šè¿‡è¿™ä¸ªç¤ºä¾‹ç»“åˆ debug æŸ¥çœ‹ ApplicationContext å¯¹è±¡çš„å†…éƒ¨ç»“æ„ï¼Œå­¦åˆ°ï¼š</p><ol><li><p>åˆ°åº•ä»€ä¹ˆæ˜¯ BeanFactory</p><ul><li>å®ƒæ˜¯ ApplicationContext çš„çˆ¶æ¥å£</li><li>å®ƒæ‰æ˜¯ Spring çš„æ ¸å¿ƒå®¹å™¨, ä¸»è¦çš„ ApplicationContext å®ç°éƒ½ã€ç»„åˆã€‘äº†å®ƒçš„åŠŸèƒ½ï¼Œã€ç»„åˆã€‘æ˜¯æŒ‡ ApplicationContext çš„ä¸€ä¸ªé‡è¦æˆå‘˜å˜é‡å°±æ˜¯ BeanFactory</li></ul></li><li><p>BeanFactory èƒ½å¹²ç‚¹å•¥</p><ul><li>è¡¨é¢ä¸Šåªæœ‰ getBean</li><li>å®é™…ä¸Šæ§åˆ¶åè½¬ã€åŸºæœ¬çš„ä¾èµ–æ³¨å…¥ã€ç›´è‡³ Bean çš„ç”Ÿå‘½å‘¨æœŸçš„å„ç§åŠŸèƒ½ï¼Œéƒ½ç”±å®ƒçš„å®ç°ç±»æä¾›</li><li>ä¾‹å­ä¸­é€šè¿‡åå°„æŸ¥çœ‹äº†å®ƒçš„æˆå‘˜å˜é‡ singletonObjectsï¼Œå†…éƒ¨åŒ…å«äº†æ‰€æœ‰çš„å•ä¾‹ bean</li></ul></li><li><p>ApplicationContext æ¯” BeanFactory å¤šç‚¹å•¥</p><ul><li>ApplicationContext ç»„åˆå¹¶æ‰©å±•äº† BeanFactory çš„åŠŸèƒ½</li><li>å›½é™…åŒ–ã€é€šé…ç¬¦æ–¹å¼è·å–ä¸€ç»„ Resource èµ„æºã€æ•´åˆ Environment ç¯å¢ƒã€äº‹ä»¶å‘å¸ƒä¸ç›‘å¬</li><li>æ–°å­¦ä¸€ç§ä»£ç ä¹‹é—´è§£è€¦é€”å¾„ï¼Œäº‹ä»¶è§£è€¦</li></ul></li></ol><p>å»ºè®®ç»ƒä¹ ï¼šå®Œæˆç”¨æˆ·æ³¨å†Œä¸å‘é€çŸ­ä¿¡ä¹‹é—´çš„è§£è€¦ï¼Œç”¨äº‹ä»¶æ–¹å¼ã€å’Œ AOP æ–¹å¼åˆ†åˆ«å®ç°</p><blockquote><p><em><strong>æ³¨æ„</strong></em></p><ul><li>å¦‚æœ jdk &gt; 8, è¿è¡Œæ—¶è¯·æ·»åŠ  â€“add-opens java.base&#x2F;java.lang&#x3D;ALL-UNNAMEDï¼Œè¿™æ˜¯å› ä¸ºè¿™äº›ç‰ˆæœ¬çš„ jdk é»˜è®¤ä¸å…è®¸è·¨ module åå°„</li><li>äº‹ä»¶å‘å¸ƒè¿˜å¯ä»¥å¼‚æ­¥ï¼Œè¿™ä¸ªè§†é¢‘ä¸­æ²¡æœ‰å±•ç¤ºï¼Œè¯·è‡ªè¡ŒæŸ¥é˜… @EnableAsyncï¼Œ@Async çš„ç”¨æ³•</li></ul></blockquote><h4 id="æ¼”ç¤º2-å›½é™…åŒ–"><a href="#æ¼”ç¤º2-å›½é™…åŒ–" class="headerlink" title="æ¼”ç¤º2 - å›½é™…åŒ–"></a>æ¼”ç¤º2 - å›½é™…åŒ–</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestMessageSource</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">GenericApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">GenericApplicationContext</span>();</span><br><span class="line"></span><br><span class="line">        context.registerBean(<span class="string">&quot;messageSource&quot;</span>, MessageSource.class, () -&gt; &#123;</span><br><span class="line">            <span class="type">ResourceBundleMessageSource</span> <span class="variable">ms</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ResourceBundleMessageSource</span>();</span><br><span class="line">            ms.setDefaultEncoding(<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">            ms.setBasename(<span class="string">&quot;messages&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> ms;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        context.refresh();</span><br><span class="line"></span><br><span class="line">        System.out.println(context.getMessage(<span class="string">&quot;hi&quot;</span>, <span class="literal">null</span>, Locale.ENGLISH));</span><br><span class="line">        System.out.println(context.getMessage(<span class="string">&quot;hi&quot;</span>, <span class="literal">null</span>, Locale.CHINESE));</span><br><span class="line">        System.out.println(context.getMessage(<span class="string">&quot;hi&quot;</span>, <span class="literal">null</span>, Locale.JAPANESE));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å›½é™…åŒ–æ–‡ä»¶å‡åœ¨ src&#x2F;resources ç›®å½•ä¸‹</p><p>messages.propertiesï¼ˆç©ºï¼‰</p><p>messages_en.properties</p><figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">hi</span>=<span class="string">Hello</span></span><br></pre></td></tr></table></figure><p>messages_ja.properties</p><figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">hi</span>=<span class="string">ã“ã‚“ã«ã¡ã¯</span></span><br></pre></td></tr></table></figure><p>messages_zh.properties</p><figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">hi</span>=<span class="string">ä½ å¥½</span></span><br></pre></td></tr></table></figure><blockquote><p><em><strong>æ³¨æ„</strong></em></p><ul><li>ApplicationContext ä¸­ MessageSource bean çš„åå­—å›ºå®šä¸º messageSource</li><li>ä½¿ç”¨ SpringBoot æ—¶ï¼Œå›½é™…åŒ–æ–‡ä»¶åå›ºå®šä¸º messages</li><li>ç©ºçš„ messages.properties ä¹Ÿå¿…é¡»å­˜åœ¨</li></ul></blockquote><h3 id="2-å®¹å™¨å®ç°"><a href="#2-å®¹å™¨å®ç°" class="headerlink" title="2) å®¹å™¨å®ç°"></a>2) å®¹å™¨å®ç°</h3><p>Spring çš„å‘å±•å†å²è¾ƒä¸ºæ‚ ä¹…ï¼Œå› æ­¤å¾ˆå¤šèµ„æ–™è¿˜åœ¨è®²è§£å®ƒè¾ƒæ—§çš„å®ç°ï¼Œè¿™é‡Œå‡ºäºæ€€æ—§çš„åŸå› ï¼ŒæŠŠå®ƒä»¬éƒ½åˆ—å‡ºæ¥ï¼Œä¾›å¤§å®¶å‚è€ƒ</p><ul><li>DefaultListableBeanFactoryï¼Œæ˜¯ BeanFactory æœ€é‡è¦çš„å®ç°ï¼Œåƒ<strong>æ§åˆ¶åè½¬</strong>å’Œ<strong>ä¾èµ–æ³¨å…¥</strong>åŠŸèƒ½ï¼Œéƒ½æ˜¯å®ƒæ¥å®ç°</li><li>ClassPathXmlApplicationContextï¼Œä»ç±»è·¯å¾„æŸ¥æ‰¾ XML é…ç½®æ–‡ä»¶ï¼Œåˆ›å»ºå®¹å™¨ï¼ˆæ—§ï¼‰</li><li>FileSystemXmlApplicationContextï¼Œä»ç£ç›˜è·¯å¾„æŸ¥æ‰¾ XML é…ç½®æ–‡ä»¶ï¼Œåˆ›å»ºå®¹å™¨ï¼ˆæ—§ï¼‰</li><li>XmlWebApplicationContextï¼Œä¼ ç»Ÿ SSM æ•´åˆæ—¶ï¼ŒåŸºäº XML é…ç½®æ–‡ä»¶çš„å®¹å™¨ï¼ˆæ—§ï¼‰</li><li>AnnotationConfigWebApplicationContextï¼Œä¼ ç»Ÿ SSM æ•´åˆæ—¶ï¼ŒåŸºäº java é…ç½®ç±»çš„å®¹å™¨ï¼ˆæ—§ï¼‰</li><li>AnnotationConfigApplicationContextï¼ŒSpring boot ä¸­é web ç¯å¢ƒå®¹å™¨ï¼ˆæ–°ï¼‰</li><li>AnnotationConfigServletWebServerApplicationContextï¼ŒSpring boot ä¸­ servlet web ç¯å¢ƒå®¹å™¨ï¼ˆæ–°ï¼‰</li><li>AnnotationConfigReactiveWebServerApplicationContextï¼ŒSpring boot ä¸­ reactive web ç¯å¢ƒå®¹å™¨ï¼ˆæ–°ï¼‰</li></ul><p>å¦å¤–è¦æ³¨æ„çš„æ˜¯ï¼Œåé¢è¿™äº›å¸¦æœ‰ ApplicationContext çš„ç±»éƒ½æ˜¯ ApplicationContext æ¥å£çš„å®ç°ï¼Œä½†å®ƒä»¬æ˜¯<strong>ç»„åˆ</strong>äº† DefaultListableBeanFactory çš„åŠŸèƒ½ï¼Œå¹¶éç»§æ‰¿è€Œæ¥</p><h4 id="æ¼”ç¤º1-DefaultListableBeanFactory"><a href="#æ¼”ç¤º1-DefaultListableBeanFactory" class="headerlink" title="æ¼”ç¤º1 - DefaultListableBeanFactory"></a>æ¼”ç¤º1 - DefaultListableBeanFactory</h4><h5 id="ä»£ç å‚è€ƒ-1"><a href="#ä»£ç å‚è€ƒ-1" class="headerlink" title="ä»£ç å‚è€ƒ"></a>ä»£ç å‚è€ƒ</h5><p><strong>com.itheima.a02.TestBeanFactory</strong></p><h4 id="æ”¶è·ğŸ’¡-1"><a href="#æ”¶è·ğŸ’¡-1" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><ul><li>beanFactory å¯ä»¥é€šè¿‡ registerBeanDefinition æ³¨å†Œä¸€ä¸ª bean definition å¯¹è±¡<ul><li>æˆ‘ä»¬å¹³æ—¶ä½¿ç”¨çš„é…ç½®ç±»ã€xmlã€ç»„ä»¶æ‰«æç­‰æ–¹å¼éƒ½æ˜¯ç”Ÿæˆ bean definition å¯¹è±¡æ³¨å†Œåˆ° beanFactory å½“ä¸­</li><li>bean definition æè¿°äº†è¿™ä¸ª bean çš„åˆ›å»ºè“å›¾ï¼šscope æ˜¯ä»€ä¹ˆã€ç”¨æ„é€ è¿˜æ˜¯å·¥å‚åˆ›å»ºã€åˆå§‹åŒ–é”€æ¯æ–¹æ³•æ˜¯ä»€ä¹ˆï¼Œç­‰ç­‰</li></ul></li><li>beanFactory éœ€è¦æ‰‹åŠ¨è°ƒç”¨ beanFactory åå¤„ç†å™¨å¯¹å®ƒåšå¢å¼º<ul><li>ä¾‹å¦‚é€šè¿‡è§£æ @Beanã€@ComponentScan ç­‰æ³¨è§£ï¼Œæ¥è¡¥å……ä¸€äº› bean definition</li></ul></li><li>beanFactory éœ€è¦æ‰‹åŠ¨æ·»åŠ  bean åå¤„ç†å™¨ï¼Œä»¥ä¾¿å¯¹åç»­ bean çš„åˆ›å»ºè¿‡ç¨‹æä¾›å¢å¼º<ul><li>ä¾‹å¦‚ @Autowiredï¼Œ@Resource ç­‰æ³¨è§£çš„è§£æéƒ½æ˜¯ bean åå¤„ç†å™¨å®Œæˆçš„</li><li>bean åå¤„ç†çš„æ·»åŠ é¡ºåºä¼šå¯¹è§£æç»“æœæœ‰å½±å“ï¼Œè§è§†é¢‘ä¸­åŒæ—¶åŠ  @Autowiredï¼Œ@Resource çš„ä¾‹å­</li></ul></li><li>beanFactory éœ€è¦æ‰‹åŠ¨è°ƒç”¨æ–¹æ³•æ¥åˆå§‹åŒ–å•ä¾‹</li><li>beanFactory éœ€è¦é¢å¤–è®¾ç½®æ‰èƒ½è§£æ ${} ä¸ #{}</li></ul><h4 id="æ¼”ç¤º2-å¸¸è§-ApplicationContext-å®ç°"><a href="#æ¼”ç¤º2-å¸¸è§-ApplicationContext-å®ç°" class="headerlink" title="æ¼”ç¤º2 - å¸¸è§ ApplicationContext å®ç°"></a>æ¼”ç¤º2 - å¸¸è§ ApplicationContext å®ç°</h4><h5 id="ä»£ç å‚è€ƒ-2"><a href="#ä»£ç å‚è€ƒ-2" class="headerlink" title="ä»£ç å‚è€ƒ"></a>ä»£ç å‚è€ƒ</h5><p><strong>com.itheima.a02.A02</strong></p><h4 id="æ”¶è·ğŸ’¡-2"><a href="#æ”¶è·ğŸ’¡-2" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><ol><li>å¸¸è§çš„ ApplicationContext å®¹å™¨å®ç°</li><li>å†…åµŒå®¹å™¨ã€DispatcherServlet çš„åˆ›å»ºæ–¹æ³•ã€ä½œç”¨</li></ol><h3 id="3-Bean-çš„ç”Ÿå‘½å‘¨æœŸ"><a href="#3-Bean-çš„ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="3) Bean çš„ç”Ÿå‘½å‘¨æœŸ"></a>3) Bean çš„ç”Ÿå‘½å‘¨æœŸ</h3><p>ä¸€ä¸ªå— Spring ç®¡ç†çš„ beanï¼Œç”Ÿå‘½å‘¨æœŸä¸»è¦é˜¶æ®µæœ‰</p><ol><li>åˆ›å»ºï¼šæ ¹æ® bean çš„æ„é€ æ–¹æ³•æˆ–è€…å·¥å‚æ–¹æ³•æ¥åˆ›å»º bean å®ä¾‹å¯¹è±¡</li><li>ä¾èµ–æ³¨å…¥ï¼šæ ¹æ® @Autowiredï¼Œ@Value æˆ–å…¶å®ƒä¸€äº›æ‰‹æ®µï¼Œä¸º bean çš„æˆå‘˜å˜é‡å¡«å……å€¼ã€å»ºç«‹å…³ç³»</li><li>åˆå§‹åŒ–ï¼šå›è°ƒå„ç§ Aware æ¥å£ï¼Œè°ƒç”¨å¯¹è±¡çš„å„ç§åˆå§‹åŒ–æ–¹æ³•</li><li>é”€æ¯ï¼šåœ¨å®¹å™¨å…³é—­æ—¶ï¼Œä¼šé”€æ¯æ‰€æœ‰å•ä¾‹å¯¹è±¡ï¼ˆå³è°ƒç”¨å®ƒä»¬çš„é”€æ¯æ–¹æ³•ï¼‰<ul><li>prototype å¯¹è±¡ä¹Ÿèƒ½å¤Ÿé”€æ¯ï¼Œä¸è¿‡éœ€è¦å®¹å™¨è¿™è¾¹ä¸»åŠ¨è°ƒç”¨</li></ul></li></ol><p>ä¸€äº›èµ„æ–™ä¼šæåˆ°ï¼Œç”Ÿå‘½å‘¨æœŸä¸­è¿˜æœ‰ä¸€ç±» bean åå¤„ç†å™¨ï¼šBeanPostProcessorï¼Œä¼šåœ¨ bean çš„åˆå§‹åŒ–çš„å‰åï¼Œæä¾›ä¸€äº›æ‰©å±•é€»è¾‘ã€‚ä½†è¿™ç§è¯´æ³•æ˜¯ä¸å®Œæ•´çš„ï¼Œè§ä¸‹é¢çš„æ¼”ç¤º1</p><h4 id="æ¼”ç¤º1-bean-ç”Ÿå‘½å‘¨æœŸ"><a href="#æ¼”ç¤º1-bean-ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="æ¼”ç¤º1 - bean ç”Ÿå‘½å‘¨æœŸ"></a>æ¼”ç¤º1 - bean ç”Ÿå‘½å‘¨æœŸ</h4><h5 id="ä»£ç å‚è€ƒ-3"><a href="#ä»£ç å‚è€ƒ-3" class="headerlink" title="ä»£ç å‚è€ƒ"></a>ä»£ç å‚è€ƒ</h5><p><strong>com.itheima.a03</strong> åŒ…</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">graph LR</span><br><span class="line"></span><br><span class="line">åˆ›å»º --&gt; ä¾èµ–æ³¨å…¥</span><br><span class="line">ä¾èµ–æ³¨å…¥ --&gt; åˆå§‹åŒ–</span><br><span class="line">åˆå§‹åŒ– --&gt; å¯ç”¨</span><br><span class="line">å¯ç”¨ --&gt; é”€æ¯</span><br></pre></td></tr></table></figure><p>åˆ›å»ºå‰åçš„å¢å¼º</p><ul><li>postProcessBeforeInstantiation<ul><li>è¿™é‡Œè¿”å›çš„å¯¹è±¡è‹¥ä¸ä¸º null ä¼šæ›¿æ¢æ‰åŸæœ¬çš„ beanï¼Œå¹¶ä¸”ä»…ä¼šèµ° postProcessAfterInitialization æµç¨‹</li></ul></li><li>postProcessAfterInstantiation<ul><li>è¿™é‡Œå¦‚æœè¿”å› false ä¼šè·³è¿‡ä¾èµ–æ³¨å…¥é˜¶æ®µ</li></ul></li></ul><p>ä¾èµ–æ³¨å…¥å‰çš„å¢å¼º</p><ul><li>postProcessProperties<ul><li>å¦‚ @Autowiredã€@Valueã€@Resource</li></ul></li></ul><p>åˆå§‹åŒ–å‰åçš„å¢å¼º</p><ul><li>postProcessBeforeInitialization<ul><li>è¿™é‡Œè¿”å›çš„å¯¹è±¡ä¼šæ›¿æ¢æ‰åŸæœ¬çš„ bean</li><li>å¦‚ @PostConstructã€@ConfigurationProperties</li></ul></li><li>postProcessAfterInitialization <ul><li>è¿™é‡Œè¿”å›çš„å¯¹è±¡ä¼šæ›¿æ¢æ‰åŸæœ¬çš„ bean</li><li>å¦‚ä»£ç†å¢å¼º</li></ul></li></ul><p>é”€æ¯ä¹‹å‰çš„å¢å¼º</p><ul><li>postProcessBeforeDestruction<ul><li>å¦‚ @PreDestroy</li></ul></li></ul><h4 id="æ”¶è·ğŸ’¡-3"><a href="#æ”¶è·ğŸ’¡-3" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><ol><li>Spring bean ç”Ÿå‘½å‘¨æœŸå„ä¸ªé˜¶æ®µ</li><li>æ¨¡æ¿è®¾è®¡æ¨¡å¼, æŒ‡å¤§æµç¨‹å·²ç»å›ºå®šå¥½äº†, é€šè¿‡æ¥å£å›è°ƒï¼ˆbean åå¤„ç†å™¨ï¼‰åœ¨ä¸€äº›å…³é”®ç‚¹å‰åæä¾›æ‰©å±•</li></ol><h4 id="æ¼”ç¤º2-æ¨¡æ¿æ–¹æ³•è®¾è®¡æ¨¡å¼"><a href="#æ¼”ç¤º2-æ¨¡æ¿æ–¹æ³•è®¾è®¡æ¨¡å¼" class="headerlink" title="æ¼”ç¤º2 - æ¨¡æ¿æ–¹æ³•è®¾è®¡æ¨¡å¼"></a>æ¼”ç¤º2 - æ¨¡æ¿æ–¹æ³•è®¾è®¡æ¨¡å¼</h4><h5 id="å…³é”®ä»£ç "><a href="#å…³é”®ä»£ç " class="headerlink" title="å…³é”®ä»£ç "></a>å…³é”®ä»£ç </h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestMethodTemplate</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">MyBeanFactory</span> <span class="variable">beanFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyBeanFactory</span>();</span><br><span class="line">        beanFactory.addBeanPostProcessor(bean -&gt; System.out.println(<span class="string">&quot;è§£æ @Autowired&quot;</span>));</span><br><span class="line">        beanFactory.addBeanPostProcessor(bean -&gt; System.out.println(<span class="string">&quot;è§£æ @Resource&quot;</span>));</span><br><span class="line">        beanFactory.getBean();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ¨¡æ¿æ–¹æ³•  Template Method Pattern</span></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">MyBeanFactory</span> &#123;</span><br><span class="line">        <span class="keyword">public</span> Object <span class="title function_">getBean</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="type">Object</span> <span class="variable">bean</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Object</span>();</span><br><span class="line">            System.out.println(<span class="string">&quot;æ„é€  &quot;</span> + bean);</span><br><span class="line">            System.out.println(<span class="string">&quot;ä¾èµ–æ³¨å…¥ &quot;</span> + bean); <span class="comment">// @Autowired, @Resource</span></span><br><span class="line">            <span class="keyword">for</span> (BeanPostProcessor processor : processors) &#123;</span><br><span class="line">                processor.inject(bean);</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(<span class="string">&quot;åˆå§‹åŒ– &quot;</span> + bean);</span><br><span class="line">            <span class="keyword">return</span> bean;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">private</span> List&lt;BeanPostProcessor&gt; processors = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addBeanPostProcessor</span><span class="params">(BeanPostProcessor processor)</span> &#123;</span><br><span class="line">            processors.add(processor);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">interface</span> <span class="title class_">BeanPostProcessor</span> &#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">inject</span><span class="params">(Object bean)</span>; <span class="comment">// å¯¹ä¾èµ–æ³¨å…¥é˜¶æ®µçš„æ‰©å±•</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ¼”ç¤º3-bean-åå¤„ç†å™¨æ’åº"><a href="#æ¼”ç¤º3-bean-åå¤„ç†å™¨æ’åº" class="headerlink" title="æ¼”ç¤º3 - bean åå¤„ç†å™¨æ’åº"></a>æ¼”ç¤º3 - bean åå¤„ç†å™¨æ’åº</h4><h5 id="ä»£ç å‚è€ƒ-4"><a href="#ä»£ç å‚è€ƒ-4" class="headerlink" title="ä»£ç å‚è€ƒ"></a>ä»£ç å‚è€ƒ</h5><p><strong>com.itheima.a03.TestProcessOrder</strong></p><h4 id="æ”¶è·ğŸ’¡-4"><a href="#æ”¶è·ğŸ’¡-4" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><ol><li>å®ç°äº† PriorityOrdered æ¥å£çš„ä¼˜å…ˆçº§æœ€é«˜</li><li>å®ç°äº† Ordered æ¥å£ä¸åŠ äº† @Order æ³¨è§£çš„å¹³çº§, æŒ‰æ•°å­—å‡åº</li><li>å…¶å®ƒçš„æ’åœ¨æœ€å</li></ol><h3 id="4-Bean-åå¤„ç†å™¨"><a href="#4-Bean-åå¤„ç†å™¨" class="headerlink" title="4) Bean åå¤„ç†å™¨"></a>4) Bean åå¤„ç†å™¨</h3><h4 id="æ¼”ç¤º1-åå¤„ç†å™¨ä½œç”¨"><a href="#æ¼”ç¤º1-åå¤„ç†å™¨ä½œç”¨" class="headerlink" title="æ¼”ç¤º1 - åå¤„ç†å™¨ä½œç”¨"></a>æ¼”ç¤º1 - åå¤„ç†å™¨ä½œç”¨</h4><h5 id="ä»£ç å‚è€ƒ-5"><a href="#ä»£ç å‚è€ƒ-5" class="headerlink" title="ä»£ç å‚è€ƒ"></a>ä»£ç å‚è€ƒ</h5><p><strong>com.itheima.a04</strong> åŒ…</p><h4 id="æ”¶è·ğŸ’¡-5"><a href="#æ”¶è·ğŸ’¡-5" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><ol><li>@Autowired ç­‰æ³¨è§£çš„è§£æå±äº bean ç”Ÿå‘½å‘¨æœŸé˜¶æ®µï¼ˆä¾èµ–æ³¨å…¥, åˆå§‹åŒ–ï¼‰çš„æ‰©å±•åŠŸèƒ½ï¼Œè¿™äº›æ‰©å±•åŠŸèƒ½ç”± bean åå¤„ç†å™¨æ¥å®Œæˆ</li><li>æ¯ä¸ªåå¤„ç†å™¨å„è‡ªå¢å¼ºä»€ä¹ˆåŠŸèƒ½<ul><li>AutowiredAnnotationBeanPostProcessor è§£æ @Autowired ä¸ @Value</li><li>CommonAnnotationBeanPostProcessor è§£æ @Resourceã€@PostConstructã€@PreDestroy</li><li>ConfigurationPropertiesBindingPostProcessor è§£æ @ConfigurationProperties</li></ul></li><li>å¦å¤– ContextAnnotationAutowireCandidateResolver è´Ÿè´£è·å– @Value çš„å€¼ï¼Œè§£æ @Qualifierã€æ³›å‹ã€@Lazy ç­‰</li></ol><h4 id="æ¼”ç¤º2-Autowired-bean-åå¤„ç†å™¨è¿è¡Œåˆ†æ"><a href="#æ¼”ç¤º2-Autowired-bean-åå¤„ç†å™¨è¿è¡Œåˆ†æ" class="headerlink" title="æ¼”ç¤º2 - @Autowired bean åå¤„ç†å™¨è¿è¡Œåˆ†æ"></a>æ¼”ç¤º2 - @Autowired bean åå¤„ç†å™¨è¿è¡Œåˆ†æ</h4><h5 id="ä»£ç å‚è€ƒ-6"><a href="#ä»£ç å‚è€ƒ-6" class="headerlink" title="ä»£ç å‚è€ƒ"></a>ä»£ç å‚è€ƒ</h5><p><strong>com.itheima.a04.DigInAutowired</strong></p><h4 id="æ”¶è·ğŸ’¡-6"><a href="#æ”¶è·ğŸ’¡-6" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><ol><li>AutowiredAnnotationBeanPostProcessor.findAutowiringMetadata ç”¨æ¥è·å–æŸä¸ª bean ä¸ŠåŠ äº† @Value @Autowired çš„æˆå‘˜å˜é‡ï¼Œæ–¹æ³•å‚æ•°çš„ä¿¡æ¯ï¼Œè¡¨ç¤ºä¸º InjectionMetadata</li><li>InjectionMetadata å¯ä»¥å®Œæˆä¾èµ–æ³¨å…¥</li><li>InjectionMetadata å†…éƒ¨æ ¹æ®æˆå‘˜å˜é‡ï¼Œæ–¹æ³•å‚æ•°å°è£…ä¸º DependencyDescriptor ç±»å‹</li><li>æœ‰äº† DependencyDescriptorï¼Œå°±å¯ä»¥åˆ©ç”¨ beanFactory.doResolveDependency æ–¹æ³•è¿›è¡ŒåŸºäºç±»å‹çš„æŸ¥æ‰¾</li></ol><h3 id="5-BeanFactory-åå¤„ç†å™¨"><a href="#5-BeanFactory-åå¤„ç†å™¨" class="headerlink" title="5) BeanFactory åå¤„ç†å™¨"></a>5) BeanFactory åå¤„ç†å™¨</h3><h4 id="æ¼”ç¤º1-BeanFactory-åå¤„ç†å™¨çš„ä½œç”¨"><a href="#æ¼”ç¤º1-BeanFactory-åå¤„ç†å™¨çš„ä½œç”¨" class="headerlink" title="æ¼”ç¤º1 - BeanFactory åå¤„ç†å™¨çš„ä½œç”¨"></a>æ¼”ç¤º1 - BeanFactory åå¤„ç†å™¨çš„ä½œç”¨</h4><h5 id="ä»£ç å‚è€ƒ-7"><a href="#ä»£ç å‚è€ƒ-7" class="headerlink" title="ä»£ç å‚è€ƒ"></a>ä»£ç å‚è€ƒ</h5><p><strong>com.itheima.a05</strong> åŒ…</p><ul><li>ConfigurationClassPostProcessor å¯ä»¥è§£æ<ul><li>@ComponentScan</li><li>@Bean</li><li>@Import</li><li>@ImportResource</li></ul></li><li>MapperScannerConfigurer å¯ä»¥è§£æ<ul><li>Mapper æ¥å£</li></ul></li></ul><h4 id="æ”¶è·ğŸ’¡-7"><a href="#æ”¶è·ğŸ’¡-7" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><ol><li>@ComponentScan, @Bean, @Mapper ç­‰æ³¨è§£çš„è§£æå±äºæ ¸å¿ƒå®¹å™¨ï¼ˆå³ BeanFactoryï¼‰çš„æ‰©å±•åŠŸèƒ½</li><li>è¿™äº›æ‰©å±•åŠŸèƒ½ç”±ä¸åŒçš„ BeanFactory åå¤„ç†å™¨æ¥å®Œæˆï¼Œå…¶å®ä¸»è¦å°±æ˜¯è¡¥å……äº†ä¸€äº› bean å®šä¹‰</li></ol><h4 id="æ¼”ç¤º2-æ¨¡æ‹Ÿè§£æ-ComponentScan"><a href="#æ¼”ç¤º2-æ¨¡æ‹Ÿè§£æ-ComponentScan" class="headerlink" title="æ¼”ç¤º2 - æ¨¡æ‹Ÿè§£æ @ComponentScan"></a>æ¼”ç¤º2 - æ¨¡æ‹Ÿè§£æ @ComponentScan</h4><h5 id="ä»£ç å‚è€ƒ-8"><a href="#ä»£ç å‚è€ƒ-8" class="headerlink" title="ä»£ç å‚è€ƒ"></a>ä»£ç å‚è€ƒ</h5><p><strong>com.itheima.a05.ComponentScanPostProcessor</strong></p><h4 id="æ”¶è·ğŸ’¡-8"><a href="#æ”¶è·ğŸ’¡-8" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><ol><li>Spring æ“ä½œå…ƒæ•°æ®çš„å·¥å…·ç±» CachingMetadataReaderFactory</li><li>é€šè¿‡æ³¨è§£å…ƒæ•°æ®ï¼ˆAnnotationMetadataï¼‰è·å–ç›´æ¥æˆ–é—´æ¥æ ‡æ³¨çš„æ³¨è§£ä¿¡æ¯</li><li>é€šè¿‡ç±»å…ƒæ•°æ®ï¼ˆClassMetadataï¼‰è·å–ç±»åï¼ŒAnnotationBeanNameGenerator ç”Ÿæˆ bean å</li><li>è§£æå…ƒæ•°æ®æ˜¯åŸºäº ASM æŠ€æœ¯</li></ol><h4 id="æ¼”ç¤º3-æ¨¡æ‹Ÿè§£æ-Bean"><a href="#æ¼”ç¤º3-æ¨¡æ‹Ÿè§£æ-Bean" class="headerlink" title="æ¼”ç¤º3 - æ¨¡æ‹Ÿè§£æ @Bean"></a>æ¼”ç¤º3 - æ¨¡æ‹Ÿè§£æ @Bean</h4><h5 id="ä»£ç å‚è€ƒ-9"><a href="#ä»£ç å‚è€ƒ-9" class="headerlink" title="ä»£ç å‚è€ƒ"></a>ä»£ç å‚è€ƒ</h5><p><strong>com.itheima.a05.AtBeanPostProcessor</strong></p><h4 id="æ”¶è·ğŸ’¡-9"><a href="#æ”¶è·ğŸ’¡-9" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><ol><li>è¿›ä¸€æ­¥ç†Ÿæ‚‰æ³¨è§£å…ƒæ•°æ®ï¼ˆAnnotationMetadataï¼‰è·å–æ–¹æ³•ä¸Šæ³¨è§£ä¿¡æ¯</li></ol><h4 id="æ¼”ç¤º4-æ¨¡æ‹Ÿè§£æ-Mapper-æ¥å£"><a href="#æ¼”ç¤º4-æ¨¡æ‹Ÿè§£æ-Mapper-æ¥å£" class="headerlink" title="æ¼”ç¤º4 - æ¨¡æ‹Ÿè§£æ Mapper æ¥å£"></a>æ¼”ç¤º4 - æ¨¡æ‹Ÿè§£æ Mapper æ¥å£</h4><h5 id="ä»£ç å‚è€ƒ-10"><a href="#ä»£ç å‚è€ƒ-10" class="headerlink" title="ä»£ç å‚è€ƒ"></a>ä»£ç å‚è€ƒ</h5><p><strong>com.itheima.a05.MapperPostProcessor</strong></p><h4 id="æ”¶è·ğŸ’¡-10"><a href="#æ”¶è·ğŸ’¡-10" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><ol><li>Mapper æ¥å£è¢« Spring ç®¡ç†çš„æœ¬è´¨ï¼šå®é™…æ˜¯è¢«ä½œä¸º MapperFactoryBean æ³¨å†Œåˆ°å®¹å™¨ä¸­</li><li>Spring çš„è¯¡å¼‚åšæ³•ï¼Œæ ¹æ®æ¥å£ç”Ÿæˆçš„ BeanDefinition ä»…ä¸ºæ ¹æ®æ¥å£åç”Ÿæˆ bean å</li></ol><h3 id="6-Aware-æ¥å£"><a href="#6-Aware-æ¥å£" class="headerlink" title="6) Aware æ¥å£"></a>6) Aware æ¥å£</h3><h4 id="æ¼”ç¤º-Aware-æ¥å£åŠ-InitializingBean-æ¥å£"><a href="#æ¼”ç¤º-Aware-æ¥å£åŠ-InitializingBean-æ¥å£" class="headerlink" title="æ¼”ç¤º - Aware æ¥å£åŠ InitializingBean æ¥å£"></a>æ¼”ç¤º - Aware æ¥å£åŠ InitializingBean æ¥å£</h4><h5 id="ä»£ç å‚è€ƒ-11"><a href="#ä»£ç å‚è€ƒ-11" class="headerlink" title="ä»£ç å‚è€ƒ"></a>ä»£ç å‚è€ƒ</h5><p><strong>com.itheima.a06</strong> åŒ…</p><h4 id="æ”¶è·ğŸ’¡-11"><a href="#æ”¶è·ğŸ’¡-11" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><ol><li>Aware æ¥å£æä¾›äº†ä¸€ç§ã€å†…ç½®ã€‘ çš„æ³¨å…¥æ‰‹æ®µï¼Œä¾‹å¦‚<ul><li>BeanNameAware æ³¨å…¥ bean çš„åå­—</li><li>BeanFactoryAware æ³¨å…¥ BeanFactory å®¹å™¨</li><li>ApplicationContextAware æ³¨å…¥ ApplicationContext å®¹å™¨</li><li>EmbeddedValueResolverAware æ³¨å…¥ ${} è§£æå™¨</li></ul></li><li>InitializingBean æ¥å£æä¾›äº†ä¸€ç§ã€å†…ç½®ã€‘çš„åˆå§‹åŒ–æ‰‹æ®µ</li><li>å¯¹æ¯”<ul><li>å†…ç½®çš„æ³¨å…¥å’Œåˆå§‹åŒ–ä¸å—æ‰©å±•åŠŸèƒ½çš„å½±å“ï¼Œæ€»ä¼šè¢«æ‰§è¡Œ</li><li>è€Œæ‰©å±•åŠŸèƒ½å—æŸäº›æƒ…å†µå½±å“å¯èƒ½ä¼šå¤±æ•ˆ</li><li>å› æ­¤ Spring æ¡†æ¶å†…éƒ¨çš„ç±»å¸¸ç”¨å†…ç½®æ³¨å…¥å’Œåˆå§‹åŒ–</li></ul></li></ol><h4 id="é…ç½®ç±»-Autowired-å¤±æ•ˆåˆ†æ"><a href="#é…ç½®ç±»-Autowired-å¤±æ•ˆåˆ†æ" class="headerlink" title="é…ç½®ç±» @Autowired å¤±æ•ˆåˆ†æ"></a>é…ç½®ç±» @Autowired å¤±æ•ˆåˆ†æ</h4><p>Java é…ç½®ç±»ä¸åŒ…å« BeanFactoryPostProcessor çš„æƒ…å†µ</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sequenceDiagram </span><br><span class="line">participant ac as ApplicationContext</span><br><span class="line">participant bfpp as BeanFactoryPostProcessor</span><br><span class="line">participant bpp as BeanPostProcessor</span><br><span class="line">participant config as Javaé…ç½®ç±»</span><br><span class="line">ac -&gt;&gt; bfpp : 1. æ‰§è¡Œ BeanFactoryPostProcessor</span><br><span class="line">ac -&gt;&gt; bpp : 2. æ³¨å†Œ BeanPostProcessor</span><br><span class="line">ac -&gt;&gt; +config : 3. åˆ›å»ºå’Œåˆå§‹åŒ–</span><br><span class="line">bpp -&gt;&gt; config : 3.1 ä¾èµ–æ³¨å…¥æ‰©å±•(å¦‚ @Value å’Œ @Autowired)</span><br><span class="line">bpp -&gt;&gt; config : 3.2 åˆå§‹åŒ–æ‰©å±•(å¦‚ @PostConstruct)</span><br><span class="line">ac -&gt;&gt; config : 3.3 æ‰§è¡Œ Aware åŠ InitializingBean</span><br><span class="line">config --&gt;&gt; -ac : 3.4 åˆ›å»ºæˆåŠŸ</span><br></pre></td></tr></table></figure><p>Java é…ç½®ç±»åŒ…å« BeanFactoryPostProcessor çš„æƒ…å†µï¼Œå› æ­¤è¦åˆ›å»ºå…¶ä¸­çš„ BeanFactoryPostProcessor å¿…é¡»æå‰åˆ›å»º Java é…ç½®ç±»ï¼Œè€Œæ­¤æ—¶çš„ BeanPostProcessor è¿˜æœªå‡†å¤‡å¥½ï¼Œå¯¼è‡´ @Autowired ç­‰æ³¨è§£å¤±æ•ˆ</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sequenceDiagram </span><br><span class="line">participant ac as ApplicationContext</span><br><span class="line">participant bfpp as BeanFactoryPostProcessor</span><br><span class="line">participant bpp as BeanPostProcessor</span><br><span class="line">participant config as Javaé…ç½®ç±»</span><br><span class="line">ac -&gt;&gt; +config : 3. åˆ›å»ºå’Œåˆå§‹åŒ–</span><br><span class="line">ac -&gt;&gt; config : 3.1 æ‰§è¡Œ Aware åŠ InitializingBean</span><br><span class="line">config --&gt;&gt; -ac : 3.2 åˆ›å»ºæˆåŠŸ</span><br><span class="line"></span><br><span class="line">ac -&gt;&gt; bfpp : 1. æ‰§è¡Œ BeanFactoryPostProcessor</span><br><span class="line">ac -&gt;&gt; bpp : 2. æ³¨å†Œ BeanPostProcessor</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å¯¹åº”ä»£ç </p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyConfig1</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Logger</span> <span class="variable">log</span> <span class="operator">=</span> LoggerFactory.getLogger(MyConfig1.class);</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setApplicationContext</span><span class="params">(ApplicationContext applicationContext)</span> &#123;</span><br><span class="line">        log.debug(<span class="string">&quot;æ³¨å…¥ ApplicationContext&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostConstruct</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">()</span> &#123;</span><br><span class="line">        log.debug(<span class="string">&quot;åˆå§‹åŒ–&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span> <span class="comment">//  â¬…ï¸ æ³¨é‡Šæˆ–æ·»åŠ  beanFactory åå¤„ç†å™¨å¯¹åº”ä¸Šæ–¹ä¸¤ç§æƒ…å†µ</span></span><br><span class="line">    <span class="keyword">public</span> BeanFactoryPostProcessor <span class="title function_">processor1</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> beanFactory -&gt; &#123;</span><br><span class="line">            log.debug(<span class="string">&quot;æ‰§è¡Œ processor1&quot;</span>);</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p><em><strong>æ³¨æ„</strong></em></p><p>è§£å†³æ–¹æ³•ï¼š</p><ul><li>ç”¨å†…ç½®ä¾èµ–æ³¨å…¥å’Œåˆå§‹åŒ–å–ä»£æ‰©å±•ä¾èµ–æ³¨å…¥å’Œåˆå§‹åŒ–</li><li>ç”¨é™æ€å·¥å‚æ–¹æ³•ä»£æ›¿å®ä¾‹å·¥å‚æ–¹æ³•ï¼Œé¿å…å·¥å‚å¯¹è±¡æå‰è¢«åˆ›å»º</li></ul></blockquote><h3 id="7-åˆå§‹åŒ–ä¸é”€æ¯"><a href="#7-åˆå§‹åŒ–ä¸é”€æ¯" class="headerlink" title="7) åˆå§‹åŒ–ä¸é”€æ¯"></a>7) åˆå§‹åŒ–ä¸é”€æ¯</h3><h4 id="æ¼”ç¤º-åˆå§‹åŒ–é”€æ¯é¡ºåº"><a href="#æ¼”ç¤º-åˆå§‹åŒ–é”€æ¯é¡ºåº" class="headerlink" title="æ¼”ç¤º - åˆå§‹åŒ–é”€æ¯é¡ºåº"></a>æ¼”ç¤º - åˆå§‹åŒ–é”€æ¯é¡ºåº</h4><h5 id="ä»£ç å‚è€ƒ-12"><a href="#ä»£ç å‚è€ƒ-12" class="headerlink" title="ä»£ç å‚è€ƒ"></a>ä»£ç å‚è€ƒ</h5><p><strong>com.itheima.a07</strong> åŒ…</p><h4 id="æ”¶è·ğŸ’¡-12"><a href="#æ”¶è·ğŸ’¡-12" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><p>Spring æä¾›äº†å¤šç§åˆå§‹åŒ–æ‰‹æ®µï¼Œé™¤äº†è¯¾å ‚ä¸Šè®²çš„ @PostConstructï¼Œ@Bean(initMethod) ä¹‹å¤–ï¼Œè¿˜å¯ä»¥å®ç° InitializingBean æ¥å£æ¥è¿›è¡Œåˆå§‹åŒ–ï¼Œå¦‚æœåŒä¸€ä¸ª bean ç”¨äº†ä»¥ä¸Šæ‰‹æ®µå£°æ˜äº† 3 ä¸ªåˆå§‹åŒ–æ–¹æ³•ï¼Œé‚£ä¹ˆå®ƒä»¬çš„æ‰§è¡Œé¡ºåºæ˜¯</p><ol><li>@PostConstruct æ ‡æ³¨çš„åˆå§‹åŒ–æ–¹æ³•</li><li>InitializingBean æ¥å£çš„åˆå§‹åŒ–æ–¹æ³•</li><li>@Bean(initMethod) æŒ‡å®šçš„åˆå§‹åŒ–æ–¹æ³•</li></ol><p>ä¸åˆå§‹åŒ–ç±»ä¼¼ï¼ŒSpring ä¹Ÿæä¾›äº†å¤šç§é”€æ¯æ‰‹æ®µï¼Œæ‰§è¡Œé¡ºåºä¸º</p><ol><li>@PreDestroy æ ‡æ³¨çš„é”€æ¯æ–¹æ³•</li><li>DisposableBean æ¥å£çš„é”€æ¯æ–¹æ³•</li><li>@Bean(destroyMethod) æŒ‡å®šçš„é”€æ¯æ–¹æ³•</li></ol><h3 id="8-Scope"><a href="#8-Scope" class="headerlink" title="8) Scope"></a>8) Scope</h3><p>åœ¨å½“å‰ç‰ˆæœ¬çš„ Spring å’Œ Spring Boot ç¨‹åºä¸­ï¼Œæ”¯æŒäº”ç§ Scope</p><ul><li>singletonï¼Œå®¹å™¨å¯åŠ¨æ—¶åˆ›å»ºï¼ˆæœªè®¾ç½®å»¶è¿Ÿï¼‰ï¼Œå®¹å™¨å…³é—­æ—¶é”€æ¯</li><li>prototypeï¼Œæ¯æ¬¡ä½¿ç”¨æ—¶åˆ›å»ºï¼Œä¸ä¼šè‡ªåŠ¨é”€æ¯ï¼Œéœ€è¦è°ƒç”¨ DefaultListableBeanFactory.destroyBean(bean) é”€æ¯</li><li>requestï¼Œæ¯æ¬¡è¯·æ±‚ç”¨åˆ°æ­¤ bean æ—¶åˆ›å»ºï¼Œè¯·æ±‚ç»“æŸæ—¶é”€æ¯</li><li>sessionï¼Œæ¯ä¸ªä¼šè¯ç”¨åˆ°æ­¤ bean æ—¶åˆ›å»ºï¼Œä¼šè¯ç»“æŸæ—¶é”€æ¯</li><li>applicationï¼Œweb å®¹å™¨ç”¨åˆ°æ­¤ bean æ—¶åˆ›å»ºï¼Œå®¹å™¨åœæ­¢æ—¶é”€æ¯</li></ul><p>æœ‰äº›æ–‡ç« æåˆ°æœ‰ globalSession è¿™ä¸€ Scopeï¼Œä¹Ÿæ˜¯é™ˆæ—§çš„è¯´æ³•ï¼Œç›®å‰ Spring ä¸­å·²åºŸå¼ƒ</p><p>ä½†è¦æ³¨æ„ï¼Œå¦‚æœåœ¨ singleton æ³¨å…¥å…¶å®ƒ scope éƒ½ä¼šæœ‰é—®é¢˜ï¼Œè§£å†³æ–¹æ³•æœ‰</p><ul><li>@Lazy</li><li>@Scope(proxyMode &#x3D; ScopedProxyMode.TARGET_CLASS)</li><li>ObjectFactory</li><li>ApplicationContext.getBean</li></ul><h4 id="æ¼”ç¤º1-request-session-application-ä½œç”¨åŸŸ"><a href="#æ¼”ç¤º1-request-session-application-ä½œç”¨åŸŸ" class="headerlink" title="æ¼”ç¤º1 - request, session, application ä½œç”¨åŸŸ"></a>æ¼”ç¤º1 - request, session, application ä½œç”¨åŸŸ</h4><h5 id="ä»£ç å‚è€ƒ-13"><a href="#ä»£ç å‚è€ƒ-13" class="headerlink" title="ä»£ç å‚è€ƒ"></a>ä»£ç å‚è€ƒ</h5><p><strong>com.itheima.a08</strong> åŒ…</p><ul><li>æ‰“å¼€ä¸åŒçš„æµè§ˆå™¨, åˆ·æ–° <a href="http://localhost:8080/test">http://localhost:8080/test</a> å³å¯æŸ¥çœ‹æ•ˆæœ</li><li>å¦‚æœ jdk &gt; 8, è¿è¡Œæ—¶è¯·æ·»åŠ  â€“add-opens java.base&#x2F;java.lang&#x3D;ALL-UNNAMED</li></ul><h4 id="æ”¶è·ğŸ’¡-13"><a href="#æ”¶è·ğŸ’¡-13" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><ol><li>æœ‰å‡ ç§ scope</li><li>åœ¨ singleton ä¸­ä½¿ç”¨å…¶å®ƒå‡ ç§ scope çš„æ–¹æ³•</li><li>å…¶å®ƒ scope çš„é”€æ¯æ—¶æœº<ul><li>å¯ä»¥å°†é€šè¿‡ server.servlet.session.timeout&#x3D;30s è§‚å¯Ÿ session bean çš„é”€æ¯</li><li>ServletContextScope é”€æ¯æœºåˆ¶ç–‘ä¼¼å®ç°æœ‰è¯¯</li></ul></li></ol><h4 id="åˆ†æ-singleton-æ³¨å…¥å…¶å®ƒ-scope-å¤±æ•ˆ"><a href="#åˆ†æ-singleton-æ³¨å…¥å…¶å®ƒ-scope-å¤±æ•ˆ" class="headerlink" title="åˆ†æ - singleton æ³¨å…¥å…¶å®ƒ scope å¤±æ•ˆ"></a>åˆ†æ - singleton æ³¨å…¥å…¶å®ƒ scope å¤±æ•ˆ</h4><p>ä»¥å•ä¾‹æ³¨å…¥å¤šä¾‹ä¸ºä¾‹</p><p>æœ‰ä¸€ä¸ªå•ä¾‹å¯¹è±¡ E</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">E</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Logger</span> <span class="variable">log</span> <span class="operator">=</span> LoggerFactory.getLogger(E.class);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> F f;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">E</span><span class="params">()</span> &#123;</span><br><span class="line">        log.info(<span class="string">&quot;E()&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setF</span><span class="params">(F f)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.f = f;</span><br><span class="line">        log.info(<span class="string">&quot;setF(F f) &#123;&#125;&quot;</span>, f.getClass());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> F <span class="title function_">getF</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> f;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¦æ³¨å…¥çš„å¯¹è±¡ F æœŸæœ›æ˜¯å¤šä¾‹</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Scope(&quot;prototype&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">F</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Logger</span> <span class="variable">log</span> <span class="operator">=</span> LoggerFactory.getLogger(F.class);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">F</span><span class="params">()</span> &#123;</span><br><span class="line">        log.info(<span class="string">&quot;F()&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æµ‹è¯•</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">E</span> <span class="variable">e</span> <span class="operator">=</span> context.getBean(E.class);</span><br><span class="line"><span class="type">F</span> <span class="variable">f1</span> <span class="operator">=</span> e.getF();</span><br><span class="line"><span class="type">F</span> <span class="variable">f2</span> <span class="operator">=</span> e.getF();</span><br><span class="line">System.out.println(f1);</span><br><span class="line">System.out.println(f2);</span><br></pre></td></tr></table></figure><p>è¾“å‡º</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">com.itheima.demo.cycle.F@6622fc65</span><br><span class="line">com.itheima.demo.cycle.F@6622fc65</span><br></pre></td></tr></table></figure><p>å‘ç°å®ƒä»¬æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Œè€Œä¸æ˜¯æœŸæœ›çš„å¤šä¾‹å¯¹è±¡</p><p>å¯¹äºå•ä¾‹å¯¹è±¡æ¥è®²ï¼Œä¾èµ–æ³¨å…¥ä»…å‘ç”Ÿäº†ä¸€æ¬¡ï¼Œåç»­å†æ²¡æœ‰ç”¨åˆ°å¤šä¾‹çš„ Fï¼Œå› æ­¤ E ç”¨çš„å§‹ç»ˆæ˜¯ç¬¬ä¸€æ¬¡ä¾èµ–æ³¨å…¥çš„ F</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">graph LR</span><br><span class="line"></span><br><span class="line">e1(e åˆ›å»º)</span><br><span class="line">e2(e set æ³¨å…¥ f)</span><br><span class="line"></span><br><span class="line">f1(f åˆ›å»º)</span><br><span class="line"></span><br><span class="line">e1--&gt;f1--&gt;e2</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è§£å†³</p><ul><li>ä»ç„¶ä½¿ç”¨ @Lazy ç”Ÿæˆä»£ç†</li><li>ä»£ç†å¯¹è±¡è™½ç„¶è¿˜æ˜¯åŒä¸€ä¸ªï¼Œä½†å½“æ¯æ¬¡<strong>ä½¿ç”¨ä»£ç†å¯¹è±¡çš„ä»»æ„æ–¹æ³•</strong>æ—¶ï¼Œç”±ä»£ç†åˆ›å»ºæ–°çš„ f å¯¹è±¡</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">graph LR</span><br><span class="line"></span><br><span class="line">e1(e åˆ›å»º)</span><br><span class="line">e2(e set æ³¨å…¥ fä»£ç†)</span><br><span class="line"></span><br><span class="line">f1(f åˆ›å»º)</span><br><span class="line">f2(f åˆ›å»º)</span><br><span class="line">f3(f åˆ›å»º)</span><br><span class="line"></span><br><span class="line">e1--&gt;e2</span><br><span class="line">e2--ä½¿ç”¨fæ–¹æ³•--&gt;f1</span><br><span class="line">e2--ä½¿ç”¨fæ–¹æ³•--&gt;f2</span><br><span class="line">e2--ä½¿ç”¨fæ–¹æ³•--&gt;f3</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">E</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="meta">@Lazy</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setF</span><span class="params">(F f)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.f = f;</span><br><span class="line">        log.info(<span class="string">&quot;setF(F f) &#123;&#125;&quot;</span>, f.getClass());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p><em><strong>æ³¨æ„</strong></em></p><ul><li>@Lazy åŠ åœ¨ä¹Ÿå¯ä»¥åŠ åœ¨æˆå‘˜å˜é‡ä¸Šï¼Œä½†åŠ åœ¨ set æ–¹æ³•ä¸Šçš„ç›®çš„æ˜¯å¯ä»¥è§‚å¯Ÿè¾“å‡ºï¼ŒåŠ åœ¨æˆå‘˜å˜é‡ä¸Šå°±ä¸è¡Œäº†</li><li>@Autowired åŠ åœ¨ set æ–¹æ³•çš„ç›®çš„ç±»ä¼¼</li></ul></blockquote><p>è¾“å‡º</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">E: setF(F f) class com.itheima.demo.cycle.F$$EnhancerBySpringCGLIB$$8b54f2bc</span><br><span class="line">F: F()</span><br><span class="line">com.itheima.demo.cycle.F@3a6f2de3</span><br><span class="line">F: F()</span><br><span class="line">com.itheima.demo.cycle.F@56303b57</span><br></pre></td></tr></table></figure><p>ä»è¾“å‡ºæ—¥å¿—å¯ä»¥çœ‹åˆ°è°ƒç”¨ setF æ–¹æ³•æ—¶ï¼Œf å¯¹è±¡çš„ç±»å‹æ˜¯ä»£ç†ç±»å‹</p><h4 id="æ¼”ç¤º2-4ç§è§£å†³æ–¹æ³•"><a href="#æ¼”ç¤º2-4ç§è§£å†³æ–¹æ³•" class="headerlink" title="æ¼”ç¤º2 - 4ç§è§£å†³æ–¹æ³•"></a>æ¼”ç¤º2 - 4ç§è§£å†³æ–¹æ³•</h4><h5 id="ä»£ç å‚è€ƒ-14"><a href="#ä»£ç å‚è€ƒ-14" class="headerlink" title="ä»£ç å‚è€ƒ"></a>ä»£ç å‚è€ƒ</h5><p><strong>com.itheima.a08.sub</strong> åŒ…</p><ul><li>å¦‚æœ jdk &gt; 8, è¿è¡Œæ—¶è¯·æ·»åŠ  â€“add-opens java.base&#x2F;java.lang&#x3D;ALL-UNNAMED</li></ul><h4 id="æ”¶è·ğŸ’¡-14"><a href="#æ”¶è·ğŸ’¡-14" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><ol><li>å•ä¾‹æ³¨å…¥å…¶å®ƒ scope çš„å››ç§è§£å†³æ–¹æ³•<ul><li>@Lazy</li><li>@Scope(value &#x3D; â€œprototypeâ€, proxyMode &#x3D; ScopedProxyMode.TARGET_CLASS)</li><li>ObjectFactory</li><li>ApplicationContext</li></ul></li><li>è§£å†³æ–¹æ³•è™½ç„¶ä¸åŒï¼Œä½†ç†å¿µä¸Šæ®Šé€”åŒå½’: éƒ½æ˜¯æ¨è¿Ÿå…¶å®ƒ scope bean çš„è·å–</li></ol><h2 id="AOP"><a href="#AOP" class="headerlink" title="AOP"></a>AOP</h2><p>AOP åº•å±‚å®ç°æ–¹å¼ä¹‹ä¸€æ˜¯ä»£ç†ï¼Œç”±ä»£ç†ç»“åˆé€šçŸ¥å’Œç›®æ ‡ï¼Œæä¾›å¢å¼ºåŠŸèƒ½</p><p>é™¤æ­¤ä»¥å¤–ï¼Œaspectj æä¾›äº†ä¸¤ç§å¦å¤–çš„ AOP åº•å±‚å®ç°ï¼š</p><ul><li><p>ç¬¬ä¸€ç§æ˜¯é€šè¿‡ ajc ç¼–è¯‘å™¨åœ¨<strong>ç¼–è¯‘</strong> class ç±»æ–‡ä»¶æ—¶ï¼Œå°±æŠŠé€šçŸ¥çš„å¢å¼ºåŠŸèƒ½ï¼Œç»‡å…¥åˆ°ç›®æ ‡ç±»çš„å­—èŠ‚ç ä¸­</p></li><li><p>ç¬¬äºŒç§æ˜¯é€šè¿‡ agent åœ¨<strong>åŠ è½½</strong>ç›®æ ‡ç±»æ—¶ï¼Œä¿®æ”¹ç›®æ ‡ç±»çš„å­—èŠ‚ç ï¼Œç»‡å…¥å¢å¼ºåŠŸèƒ½</p></li><li><p>ä½œä¸ºå¯¹æ¯”ï¼Œä¹‹å‰å­¦ä¹ çš„ä»£ç†æ˜¯<strong>è¿è¡Œ</strong>æ—¶ç”Ÿæˆæ–°çš„å­—èŠ‚ç </p></li></ul><p>ç®€å•æ¯”è¾ƒçš„è¯ï¼š</p><ul><li>aspectj åœ¨ç¼–è¯‘å’ŒåŠ è½½æ—¶ï¼Œä¿®æ”¹ç›®æ ‡å­—èŠ‚ç ï¼Œæ€§èƒ½è¾ƒé«˜</li><li>aspectj å› ä¸ºä¸ç”¨ä»£ç†ï¼Œèƒ½çªç ´ä¸€äº›æŠ€æœ¯ä¸Šçš„é™åˆ¶ï¼Œä¾‹å¦‚å¯¹æ„é€ ã€å¯¹é™æ€æ–¹æ³•ã€å¯¹ final ä¹Ÿèƒ½å¢å¼º</li><li>ä½† aspectj ä¾µå…¥æ€§è¾ƒå¼ºï¼Œä¸”éœ€è¦å­¦ä¹ æ–°çš„ aspectj ç‰¹æœ‰è¯­æ³•ï¼Œå› æ­¤æ²¡æœ‰å¹¿æ³›æµè¡Œ</li></ul><h3 id="9-AOP-å®ç°ä¹‹-ajc-ç¼–è¯‘å™¨"><a href="#9-AOP-å®ç°ä¹‹-ajc-ç¼–è¯‘å™¨" class="headerlink" title="9) AOP å®ç°ä¹‹ ajc ç¼–è¯‘å™¨"></a>9) AOP å®ç°ä¹‹ ajc ç¼–è¯‘å™¨</h3><p>ä»£ç å‚è€ƒé¡¹ç›® <strong>demo6_advanced_aspectj_01</strong></p><h4 id="æ”¶è·ğŸ’¡-15"><a href="#æ”¶è·ğŸ’¡-15" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><ol><li>ç¼–è¯‘å™¨ä¹Ÿèƒ½ä¿®æ”¹ class å®ç°å¢å¼º</li><li>ç¼–è¯‘å™¨å¢å¼ºèƒ½çªç ´ä»£ç†ä»…èƒ½é€šè¿‡æ–¹æ³•é‡å†™å¢å¼ºçš„é™åˆ¶ï¼šå¯ä»¥å¯¹æ„é€ æ–¹æ³•ã€é™æ€æ–¹æ³•ç­‰å®ç°å¢å¼º</li></ol><blockquote><p><em><strong>æ³¨æ„</strong></em></p><ul><li>ç‰ˆæœ¬é€‰æ‹©äº† java 8, å› ä¸ºç›®å‰çš„ aspectj-maven-plugin 1.14.0 æœ€é«˜åªæ”¯æŒåˆ° java 16</li><li>ä¸€å®šè¦ç”¨ maven çš„ compile æ¥ç¼–è¯‘, idea ä¸ä¼šè°ƒç”¨ ajc ç¼–è¯‘å™¨</li></ul></blockquote><h3 id="10-AOP-å®ç°ä¹‹-agent-ç±»åŠ è½½"><a href="#10-AOP-å®ç°ä¹‹-agent-ç±»åŠ è½½" class="headerlink" title="10) AOP å®ç°ä¹‹ agent ç±»åŠ è½½"></a>10) AOP å®ç°ä¹‹ agent ç±»åŠ è½½</h3><p>ä»£ç å‚è€ƒé¡¹ç›® <strong>demo6_advanced_aspectj_02</strong></p><h4 id="æ”¶è·ğŸ’¡-16"><a href="#æ”¶è·ğŸ’¡-16" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><ol><li>ç±»åŠ è½½æ—¶å¯ä»¥é€šè¿‡ agent ä¿®æ”¹ class å®ç°å¢å¼º</li></ol><h3 id="11-AOP-å®ç°ä¹‹-proxy"><a href="#11-AOP-å®ç°ä¹‹-proxy" class="headerlink" title="11) AOP å®ç°ä¹‹ proxy"></a>11) AOP å®ç°ä¹‹ proxy</h3><h4 id="æ¼”ç¤º1-jdk-åŠ¨æ€ä»£ç†"><a href="#æ¼”ç¤º1-jdk-åŠ¨æ€ä»£ç†" class="headerlink" title="æ¼”ç¤º1 - jdk åŠ¨æ€ä»£ç†"></a>æ¼”ç¤º1 - jdk åŠ¨æ€ä»£ç†</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JdkProxyDemo</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">interface</span> <span class="title class_">Foo</span> &#123;</span><br><span class="line">        <span class="keyword">void</span> <span class="title function_">foo</span><span class="params">()</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Target</span> <span class="keyword">implements</span> <span class="title class_">Foo</span> &#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">foo</span><span class="params">()</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;target foo&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] param)</span> &#123;</span><br><span class="line">        <span class="comment">// ç›®æ ‡å¯¹è±¡</span></span><br><span class="line">        <span class="type">Target</span> <span class="variable">target</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Target</span>();</span><br><span class="line">        <span class="comment">// ä»£ç†å¯¹è±¡</span></span><br><span class="line">        <span class="type">Foo</span> <span class="variable">proxy</span> <span class="operator">=</span> (Foo) Proxy.newProxyInstance(</span><br><span class="line">                Target.class.getClassLoader(), <span class="keyword">new</span> <span class="title class_">Class</span>[]&#123;Foo.class&#125;,</span><br><span class="line">                (p, method, args) -&gt; &#123;</span><br><span class="line">                    System.out.println(<span class="string">&quot;proxy before...&quot;</span>);</span><br><span class="line">                    <span class="type">Object</span> <span class="variable">result</span> <span class="operator">=</span> method.invoke(target, args);</span><br><span class="line">                    System.out.println(<span class="string">&quot;proxy after...&quot;</span>);</span><br><span class="line">                    <span class="keyword">return</span> result;</span><br><span class="line">                &#125;);</span><br><span class="line">        <span class="comment">// è°ƒç”¨ä»£ç†</span></span><br><span class="line">        proxy.foo();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿è¡Œç»“æœ</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">proxy before...</span><br><span class="line">target foo</span><br><span class="line">proxy after...</span><br></pre></td></tr></table></figure><h4 id="æ”¶è·ğŸ’¡-17"><a href="#æ”¶è·ğŸ’¡-17" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><ul><li>jdk åŠ¨æ€ä»£ç†è¦æ±‚ç›®æ ‡<strong>å¿…é¡»</strong>å®ç°æ¥å£ï¼Œç”Ÿæˆçš„ä»£ç†ç±»å®ç°ç›¸åŒæ¥å£ï¼Œå› æ­¤ä»£ç†ä¸ç›®æ ‡ä¹‹é—´æ˜¯å¹³çº§å…„å¼Ÿå…³ç³»</li></ul><h4 id="æ¼”ç¤º2-cglib-ä»£ç†"><a href="#æ¼”ç¤º2-cglib-ä»£ç†" class="headerlink" title="æ¼”ç¤º2 - cglib ä»£ç†"></a>æ¼”ç¤º2 - cglib ä»£ç†</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CglibProxyDemo</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Target</span> &#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">foo</span><span class="params">()</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;target foo&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] param)</span> &#123;</span><br><span class="line">        <span class="comment">// ç›®æ ‡å¯¹è±¡</span></span><br><span class="line">        <span class="type">Target</span> <span class="variable">target</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Target</span>();</span><br><span class="line">        <span class="comment">// ä»£ç†å¯¹è±¡</span></span><br><span class="line">        <span class="type">Target</span> <span class="variable">proxy</span> <span class="operator">=</span> (Target) Enhancer.create(Target.class, </span><br><span class="line">                (MethodInterceptor) (p, method, args, methodProxy) -&gt; &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;proxy before...&quot;</span>);</span><br><span class="line">            <span class="type">Object</span> <span class="variable">result</span> <span class="operator">=</span> methodProxy.invoke(target, args);</span><br><span class="line">            <span class="comment">// å¦ä¸€ç§è°ƒç”¨æ–¹æ³•ï¼Œä¸éœ€è¦ç›®æ ‡å¯¹è±¡å®ä¾‹</span></span><br><span class="line"><span class="comment">//            Object result = methodProxy.invokeSuper(p, args);</span></span><br><span class="line">            System.out.println(<span class="string">&quot;proxy after...&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> result;</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="comment">// è°ƒç”¨ä»£ç†</span></span><br><span class="line">        proxy.foo();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿è¡Œç»“æœä¸ jdk åŠ¨æ€ä»£ç†ç›¸åŒ</p><h4 id="æ”¶è·ğŸ’¡-18"><a href="#æ”¶è·ğŸ’¡-18" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><ul><li>cglib ä¸è¦æ±‚ç›®æ ‡å®ç°æ¥å£ï¼Œå®ƒç”Ÿæˆçš„ä»£ç†ç±»æ˜¯ç›®æ ‡çš„å­ç±»ï¼Œå› æ­¤ä»£ç†ä¸ç›®æ ‡ä¹‹é—´æ˜¯å­çˆ¶å…³ç³»</li><li>é™åˆ¶â›”ï¼šæ ¹æ®ä¸Šè¿°åˆ†æ final ç±»æ— æ³•è¢« cglib å¢å¼º</li></ul><h3 id="12-jdk-åŠ¨æ€ä»£ç†è¿›é˜¶"><a href="#12-jdk-åŠ¨æ€ä»£ç†è¿›é˜¶" class="headerlink" title="12) jdk åŠ¨æ€ä»£ç†è¿›é˜¶"></a>12) jdk åŠ¨æ€ä»£ç†è¿›é˜¶</h3><h4 id="æ¼”ç¤º1-æ¨¡æ‹Ÿ-jdk-åŠ¨æ€ä»£ç†"><a href="#æ¼”ç¤º1-æ¨¡æ‹Ÿ-jdk-åŠ¨æ€ä»£ç†" class="headerlink" title="æ¼”ç¤º1 - æ¨¡æ‹Ÿ jdk åŠ¨æ€ä»£ç†"></a>æ¼”ç¤º1 - æ¨¡æ‹Ÿ jdk åŠ¨æ€ä»£ç†</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">A12</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">interface</span> <span class="title class_">Foo</span> &#123;</span><br><span class="line">        <span class="keyword">void</span> <span class="title function_">foo</span><span class="params">()</span>;</span><br><span class="line">        <span class="type">int</span> <span class="title function_">bar</span><span class="params">()</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Target</span> <span class="keyword">implements</span> <span class="title class_">Foo</span> &#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">foo</span><span class="params">()</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;target foo&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">bar</span><span class="params">()</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;target bar&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="number">100</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] param)</span> &#123;</span><br><span class="line">        <span class="comment">// â¬‡ï¸1. åˆ›å»ºä»£ç†ï¼Œè¿™æ—¶ä¼ å…¥ InvocationHandler</span></span><br><span class="line">        <span class="type">Foo</span> <span class="variable">proxy</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">$Proxy0</span>(<span class="keyword">new</span> <span class="title class_">InvocationHandler</span>() &#123;    </span><br><span class="line">            <span class="comment">// â¬‡ï¸5. è¿›å…¥ InvocationHandler</span></span><br><span class="line">            <span class="keyword">public</span> Object <span class="title function_">invoke</span><span class="params">(Object proxy, Method method, Object[] args)</span> <span class="keyword">throws</span> Throwable&#123;</span><br><span class="line">                <span class="comment">// â¬‡ï¸6. åŠŸèƒ½å¢å¼º</span></span><br><span class="line">                System.out.println(<span class="string">&quot;before...&quot;</span>);</span><br><span class="line">                <span class="comment">// â¬‡ï¸7. åå°„è°ƒç”¨ç›®æ ‡æ–¹æ³•</span></span><br><span class="line">                <span class="keyword">return</span> method.invoke(<span class="keyword">new</span> <span class="title class_">Target</span>(), args);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="comment">// â¬‡ï¸2. è°ƒç”¨ä»£ç†æ–¹æ³•</span></span><br><span class="line">        proxy.foo();</span><br><span class="line">        proxy.bar();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¨¡æ‹Ÿä»£ç†å®ç°</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.lang.reflect.InvocationHandler;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Method;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Proxy;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.UndeclaredThrowableException;</span><br><span class="line"></span><br><span class="line"><span class="comment">// â¬‡ï¸è¿™å°±æ˜¯ jdk ä»£ç†ç±»çš„æºç , ç§˜å¯†éƒ½åœ¨é‡Œé¢</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">$Proxy0</span> <span class="keyword">extends</span> <span class="title class_">Proxy</span> <span class="keyword">implements</span> <span class="title class_">A12</span>.Foo &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> $Proxy0(InvocationHandler h) &#123;</span><br><span class="line">        <span class="built_in">super</span>(h);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// â¬‡ï¸3. è¿›å…¥ä»£ç†æ–¹æ³•</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">foo</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// â¬‡ï¸4. å›è°ƒ InvocationHandler</span></span><br><span class="line">            h.invoke(<span class="built_in">this</span>, foo, <span class="keyword">new</span> <span class="title class_">Object</span>[<span class="number">0</span>]);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (RuntimeException | Error e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> e;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Throwable e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">UndeclaredThrowableException</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">bar</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">Object</span> <span class="variable">result</span> <span class="operator">=</span> h.invoke(<span class="built_in">this</span>, bar, <span class="keyword">new</span> <span class="title class_">Object</span>[<span class="number">0</span>]);</span><br><span class="line">            <span class="keyword">return</span> (<span class="type">int</span>) result;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (RuntimeException | Error e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> e;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Throwable e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">UndeclaredThrowableException</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> Method foo;</span><br><span class="line">    <span class="keyword">static</span> Method bar;</span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            foo = A12.Foo.class.getMethod(<span class="string">&quot;foo&quot;</span>);</span><br><span class="line">            bar = A12.Foo.class.getMethod(<span class="string">&quot;bar&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (NoSuchMethodException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">NoSuchMethodError</span>(e.getMessage());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ”¶è·ğŸ’¡-19"><a href="#æ”¶è·ğŸ’¡-19" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><p>ä»£ç†ä¸€ç‚¹éƒ½ä¸éš¾ï¼Œæ— éå°±æ˜¯åˆ©ç”¨äº†å¤šæ€ã€åå°„çš„çŸ¥è¯†</p><ol><li>æ–¹æ³•é‡å†™å¯ä»¥å¢å¼ºé€»è¾‘ï¼Œåªä¸è¿‡è¿™ã€å¢å¼ºé€»è¾‘ã€‘åƒå˜ä¸‡åŒ–ï¼Œä¸èƒ½å†™æ­»åœ¨ä»£ç†å†…éƒ¨</li><li>é€šè¿‡æ¥å£å›è°ƒå°†ã€å¢å¼ºé€»è¾‘ã€‘ç½®äºä»£ç†ç±»ä¹‹å¤–</li><li>é…åˆæ¥å£æ–¹æ³•åå°„ï¼ˆæ˜¯å¤šæ€è°ƒç”¨ï¼‰ï¼Œå°±å¯ä»¥å†è”åŠ¨è°ƒç”¨ç›®æ ‡æ–¹æ³•</li><li>ä¼šç”¨ arthas çš„ jad å·¥å…·åç¼–è¯‘ä»£ç†ç±»</li><li>é™åˆ¶â›”ï¼šä»£ç†å¢å¼ºæ˜¯å€ŸåŠ©å¤šæ€æ¥å®ç°ï¼Œå› æ­¤æˆå‘˜å˜é‡ã€é™æ€æ–¹æ³•ã€final æ–¹æ³•å‡ä¸èƒ½é€šè¿‡ä»£ç†å®ç°</li></ol><h4 id="æ¼”ç¤º2-æ–¹æ³•åå°„ä¼˜åŒ–"><a href="#æ¼”ç¤º2-æ–¹æ³•åå°„ä¼˜åŒ–" class="headerlink" title="æ¼”ç¤º2 - æ–¹æ³•åå°„ä¼˜åŒ–"></a>æ¼”ç¤º2 - æ–¹æ³•åå°„ä¼˜åŒ–</h4><h5 id="ä»£ç å‚è€ƒ-15"><a href="#ä»£ç å‚è€ƒ-15" class="headerlink" title="ä»£ç å‚è€ƒ"></a>ä»£ç å‚è€ƒ</h5><p><strong>com.itheima.a12.TestMethodInvoke</strong></p><h4 id="æ”¶è·ğŸ’¡-20"><a href="#æ”¶è·ğŸ’¡-20" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><ol><li>å‰ 16 æ¬¡åå°„æ€§èƒ½è¾ƒä½</li><li>ç¬¬ 17 æ¬¡è°ƒç”¨ä¼šç”Ÿæˆä»£ç†ç±»ï¼Œä¼˜åŒ–ä¸ºéåå°„è°ƒç”¨</li><li>ä¼šç”¨ arthas çš„ jad å·¥å…·åç¼–è¯‘ç¬¬ 17 æ¬¡è°ƒç”¨ç”Ÿæˆçš„ä»£ç†ç±»</li></ol><blockquote><p><em><strong>æ³¨æ„</strong></em></p><p>è¿è¡Œæ—¶è¯·æ·»åŠ  â€“add-opens java.base&#x2F;java.lang.reflect&#x3D;ALL-UNNAMED â€“add-opens java.base&#x2F;jdk.internal.reflect&#x3D;ALL-UNNAMED</p></blockquote><h3 id="13-cglib-ä»£ç†è¿›é˜¶"><a href="#13-cglib-ä»£ç†è¿›é˜¶" class="headerlink" title="13) cglib ä»£ç†è¿›é˜¶"></a>13) cglib ä»£ç†è¿›é˜¶</h3><h4 id="æ¼”ç¤º-æ¨¡æ‹Ÿ-cglib-ä»£ç†"><a href="#æ¼”ç¤º-æ¨¡æ‹Ÿ-cglib-ä»£ç†" class="headerlink" title="æ¼”ç¤º - æ¨¡æ‹Ÿ cglib ä»£ç†"></a>æ¼”ç¤º - æ¨¡æ‹Ÿ cglib ä»£ç†</h4><h5 id="ä»£ç å‚è€ƒ-16"><a href="#ä»£ç å‚è€ƒ-16" class="headerlink" title="ä»£ç å‚è€ƒ"></a>ä»£ç å‚è€ƒ</h5><p><strong>com.itheima.a13</strong> åŒ…</p><h4 id="æ”¶è·ğŸ’¡-21"><a href="#æ”¶è·ğŸ’¡-21" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><p>å’Œ jdk åŠ¨æ€ä»£ç†åŸç†æŸ¥ä¸å¤š</p><ol><li>å›è°ƒçš„æ¥å£æ¢äº†ä¸€ä¸‹ï¼ŒInvocationHandler æ”¹æˆäº† MethodInterceptor</li><li>è°ƒç”¨ç›®æ ‡æ—¶æœ‰æ‰€æ”¹è¿›ï¼Œè§ä¸‹é¢ä»£ç ç‰‡æ®µ<ol><li>method.invoke æ˜¯åå°„è°ƒç”¨ï¼Œå¿…é¡»è°ƒç”¨åˆ°è¶³å¤Ÿæ¬¡æ•°æ‰ä¼šè¿›è¡Œä¼˜åŒ–</li><li>methodProxy.invoke æ˜¯ä¸åå°„è°ƒç”¨ï¼Œå®ƒä¼šæ­£å¸¸ï¼ˆé—´æ¥ï¼‰è°ƒç”¨ç›®æ ‡å¯¹è±¡çš„æ–¹æ³•ï¼ˆSpring é‡‡ç”¨ï¼‰</li><li>methodProxy.invokeSuper ä¹Ÿæ˜¯ä¸åå°„è°ƒç”¨ï¼Œå®ƒä¼šæ­£å¸¸ï¼ˆé—´æ¥ï¼‰è°ƒç”¨ä»£ç†å¯¹è±¡çš„æ–¹æ³•ï¼Œå¯ä»¥çœç•¥ç›®æ ‡å¯¹è±¡</li></ol></li></ol><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">A14Application</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InvocationTargetException &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">Target</span> <span class="variable">target</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Target</span>();</span><br><span class="line">        <span class="type">Proxy</span> <span class="variable">proxy</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Proxy</span>();</span><br><span class="line">        </span><br><span class="line">        proxy.setCallbacks(<span class="keyword">new</span> <span class="title class_">Callback</span>[]&#123;(MethodInterceptor) (p, m, a, mp) -&gt; &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;proxy before...&quot;</span> + mp.getSignature());</span><br><span class="line">            <span class="comment">// â¬‡ï¸è°ƒç”¨ç›®æ ‡æ–¹æ³•(ä¸‰ç§)</span></span><br><span class="line"><span class="comment">//            Object result = m.invoke(target, a);  // â¬…ï¸åå°„è°ƒç”¨</span></span><br><span class="line"><span class="comment">//            Object result = mp.invoke(target, a); // â¬…ï¸éåå°„è°ƒç”¨, ç»“åˆç›®æ ‡ç”¨</span></span><br><span class="line">            <span class="type">Object</span> <span class="variable">result</span> <span class="operator">=</span> mp.invokeSuper(p, a);   <span class="comment">// â¬…ï¸éåå°„è°ƒç”¨, ç»“åˆä»£ç†ç”¨</span></span><br><span class="line">            System.out.println(<span class="string">&quot;proxy after...&quot;</span> + mp.getSignature());</span><br><span class="line">            <span class="keyword">return</span> result;</span><br><span class="line">        &#125;&#125;);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// â¬‡ï¸è°ƒç”¨ä»£ç†æ–¹æ³•</span></span><br><span class="line">        proxy.save();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p><em><strong>æ³¨æ„</strong></em></p><ul><li>è°ƒç”¨ Object çš„æ–¹æ³•, åä¸¤ç§åœ¨ jdk &gt;&#x3D; 9 æ—¶éƒ½æœ‰é—®é¢˜, éœ€è¦ â€“add-opens java.base&#x2F;java.lang&#x3D;ALL-UNNAMED</li></ul></blockquote><h3 id="14-cglib-é¿å…åå°„è°ƒç”¨"><a href="#14-cglib-é¿å…åå°„è°ƒç”¨" class="headerlink" title="14) cglib é¿å…åå°„è°ƒç”¨"></a>14) cglib é¿å…åå°„è°ƒç”¨</h3><h4 id="æ¼”ç¤º-cglib-å¦‚ä½•é¿å…åå°„"><a href="#æ¼”ç¤º-cglib-å¦‚ä½•é¿å…åå°„" class="headerlink" title="æ¼”ç¤º - cglib å¦‚ä½•é¿å…åå°„"></a>æ¼”ç¤º - cglib å¦‚ä½•é¿å…åå°„</h4><h5 id="ä»£ç å‚è€ƒ-17"><a href="#ä»£ç å‚è€ƒ-17" class="headerlink" title="ä»£ç å‚è€ƒ"></a>ä»£ç å‚è€ƒ</h5><p><strong>com.itheima.a13.ProxyFastClass</strong>ï¼Œ<strong>com.itheima.a13.TargetFastClass</strong></p><h4 id="æ”¶è·ğŸ’¡-22"><a href="#æ”¶è·ğŸ’¡-22" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><ol><li>å½“è°ƒç”¨ MethodProxy çš„ invoke æˆ– invokeSuper æ–¹æ³•æ—¶, ä¼šåŠ¨æ€ç”Ÿæˆä¸¤ä¸ªç±»<ul><li>ProxyFastClass é…åˆä»£ç†å¯¹è±¡ä¸€èµ·ä½¿ç”¨, é¿å…åå°„</li><li>TargetFastClass é…åˆç›®æ ‡å¯¹è±¡ä¸€èµ·ä½¿ç”¨, é¿å…åå°„ (Spring ç”¨çš„è¿™ç§)</li></ul></li><li>TargetFastClass è®°å½•äº† Target ä¸­æ–¹æ³•ä¸ç¼–å·çš„å¯¹åº”å…³ç³»<ul><li>save(long) ç¼–å· 2</li><li>save(int) ç¼–å· 1</li><li>save() ç¼–å· 0</li><li>é¦–å…ˆæ ¹æ®æ–¹æ³•åå’Œå‚æ•°ä¸ªæ•°ã€ç±»å‹, ç”¨ switch å’Œ if æ‰¾åˆ°è¿™äº›æ–¹æ³•ç¼–å·</li><li>ç„¶åå†æ ¹æ®ç¼–å·å»è°ƒç”¨ç›®æ ‡æ–¹æ³•, åˆç”¨äº†ä¸€å¤§å † switch å’Œ if, ä½†é¿å…äº†åå°„</li></ul></li><li>ProxyFastClass è®°å½•äº† Proxy ä¸­æ–¹æ³•ä¸ç¼–å·çš„å¯¹åº”å…³ç³»ï¼Œä¸è¿‡ Proxy é¢å¤–æä¾›äº†ä¸‹é¢å‡ ä¸ªæ–¹æ³•<ul><li>saveSuper(long) ç¼–å· 2ï¼Œä¸å¢å¼ºï¼Œä»…æ˜¯è°ƒç”¨ super.save(long)</li><li>saveSuper(int) ç¼–å· 1ï¼Œä¸å¢å¼º, ä»…æ˜¯è°ƒç”¨ super.save(int)</li><li>saveSuper() ç¼–å· 0ï¼Œä¸å¢å¼º, ä»…æ˜¯è°ƒç”¨ super.save()</li><li>æŸ¥æ‰¾æ–¹å¼ä¸ TargetFastClass ç±»ä¼¼</li></ul></li><li>ä¸ºä»€ä¹ˆæœ‰è¿™ä¹ˆéº»çƒ¦çš„ä¸€å¥—ä¸œè¥¿å‘¢ï¼Ÿ<ul><li>é¿å…åå°„, æé«˜æ€§èƒ½, ä»£ä»·æ˜¯ä¸€ä¸ªä»£ç†ç±»é…ä¸¤ä¸ª FastClass ç±», ä»£ç†ç±»ä¸­è¿˜å¾—å¢åŠ ä»…è°ƒç”¨ super çš„ä¸€å †æ–¹æ³•</li><li>ç”¨ç¼–å·å¤„ç†æ–¹æ³•å¯¹åº”å…³ç³»æ¯”è¾ƒçœå†…å­˜, å¦å¤–, æœ€åˆè·å¾—æ–¹æ³•é¡ºåºæ˜¯ä¸ç¡®å®šçš„, è¿™ä¸ªè¿‡ç¨‹æ²¡æ³•å›ºå®šæ­»</li></ul></li></ol><h3 id="15-jdk-å’Œ-cglib-åœ¨-Spring-ä¸­çš„ç»Ÿä¸€"><a href="#15-jdk-å’Œ-cglib-åœ¨-Spring-ä¸­çš„ç»Ÿä¸€" class="headerlink" title="15) jdk å’Œ cglib åœ¨ Spring ä¸­çš„ç»Ÿä¸€"></a>15) jdk å’Œ cglib åœ¨ Spring ä¸­çš„ç»Ÿä¸€</h3><p>Spring ä¸­å¯¹åˆ‡ç‚¹ã€é€šçŸ¥ã€åˆ‡é¢çš„æŠ½è±¡å¦‚ä¸‹</p><ul><li>åˆ‡ç‚¹ï¼šæ¥å£ Pointcutï¼Œå…¸å‹å®ç° AspectJExpressionPointcut</li><li>é€šçŸ¥ï¼šå…¸å‹æ¥å£ä¸º MethodInterceptor ä»£è¡¨ç¯ç»•é€šçŸ¥</li><li>åˆ‡é¢ï¼šAdvisorï¼ŒåŒ…å«ä¸€ä¸ª Advice é€šçŸ¥ï¼ŒPointcutAdvisor åŒ…å«ä¸€ä¸ª Advice é€šçŸ¥å’Œä¸€ä¸ª Pointcut</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">classDiagram</span><br><span class="line"></span><br><span class="line">class Advice</span><br><span class="line">class MethodInterceptor</span><br><span class="line">class Advisor</span><br><span class="line">class PointcutAdvisor</span><br><span class="line"></span><br><span class="line">Pointcut &lt;|-- AspectJExpressionPointcut</span><br><span class="line">Advice &lt;|-- MethodInterceptor</span><br><span class="line">Advisor &lt;|-- PointcutAdvisor</span><br><span class="line">PointcutAdvisor o-- &quot;ä¸€&quot; Pointcut</span><br><span class="line">PointcutAdvisor o-- &quot;ä¸€&quot; Advice</span><br><span class="line"></span><br><span class="line">&lt;&lt;interface&gt;&gt; Advice</span><br><span class="line">&lt;&lt;interface&gt;&gt; MethodInterceptor</span><br><span class="line">&lt;&lt;interface&gt;&gt; Pointcut</span><br><span class="line">&lt;&lt;interface&gt;&gt; Advisor</span><br><span class="line">&lt;&lt;interface&gt;&gt; PointcutAdvisor</span><br></pre></td></tr></table></figure><p>ä»£ç†ç›¸å…³ç±»å›¾</p><ul><li>AopProxyFactory æ ¹æ® proxyTargetClass ç­‰è®¾ç½®é€‰æ‹© AopProxy å®ç°</li><li>AopProxy é€šè¿‡ getProxy åˆ›å»ºä»£ç†å¯¹è±¡</li><li>å›¾ä¸­ Proxy éƒ½å®ç°äº† Advised æ¥å£ï¼Œèƒ½å¤Ÿè·å¾—å…³è”çš„åˆ‡é¢é›†åˆä¸ç›®æ ‡ï¼ˆå…¶å®æ˜¯ä» ProxyFactory å–å¾—ï¼‰</li><li>è°ƒç”¨ä»£ç†æ–¹æ³•æ—¶ï¼Œä¼šå€ŸåŠ© ProxyFactory å°†é€šçŸ¥ç»Ÿä¸€è½¬ä¸ºç¯ç»•é€šçŸ¥ï¼šMethodInterceptor</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">classDiagram</span><br><span class="line"></span><br><span class="line">Advised &lt;|-- ProxyFactory</span><br><span class="line">ProxyFactory o-- Target</span><br><span class="line">ProxyFactory o-- &quot;å¤š&quot; Advisor</span><br><span class="line"></span><br><span class="line">ProxyFactory --&gt; AopProxyFactory : ä½¿ç”¨</span><br><span class="line">AopProxyFactory --&gt; AopProxy</span><br><span class="line">Advised &lt;|-- åŸºäºCGLIBçš„Proxy</span><br><span class="line">åŸºäºCGLIBçš„Proxy &lt;-- ObjenesisCglibAopProxy : åˆ›å»º</span><br><span class="line">AopProxy &lt;|-- ObjenesisCglibAopProxy</span><br><span class="line">AopProxy &lt;|-- JdkDynamicAopProxy</span><br><span class="line">åŸºäºJDKçš„Proxy &lt;-- JdkDynamicAopProxy : åˆ›å»º</span><br><span class="line">Advised &lt;|-- åŸºäºJDKçš„Proxy</span><br><span class="line"></span><br><span class="line">class AopProxy &#123;</span><br><span class="line">   +getProxy() Object</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class ProxyFactory &#123;</span><br><span class="line">proxyTargetClass : boolean</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class ObjenesisCglibAopProxy &#123;</span><br><span class="line">advised : ProxyFactory</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class JdkDynamicAopProxy &#123;</span><br><span class="line">advised : ProxyFactory</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;&lt;interface&gt;&gt; Advised</span><br><span class="line">&lt;&lt;interface&gt;&gt; AopProxyFactory</span><br><span class="line">&lt;&lt;interface&gt;&gt; AopProxy</span><br></pre></td></tr></table></figure><h4 id="æ¼”ç¤º-åº•å±‚åˆ‡ç‚¹ã€é€šçŸ¥ã€åˆ‡é¢"><a href="#æ¼”ç¤º-åº•å±‚åˆ‡ç‚¹ã€é€šçŸ¥ã€åˆ‡é¢" class="headerlink" title="æ¼”ç¤º - åº•å±‚åˆ‡ç‚¹ã€é€šçŸ¥ã€åˆ‡é¢"></a>æ¼”ç¤º - åº•å±‚åˆ‡ç‚¹ã€é€šçŸ¥ã€åˆ‡é¢</h4><h5 id="ä»£ç å‚è€ƒ-18"><a href="#ä»£ç å‚è€ƒ-18" class="headerlink" title="ä»£ç å‚è€ƒ"></a>ä»£ç å‚è€ƒ</h5><p><strong>com.itheima.a15.A15</strong></p><h4 id="æ”¶è·ğŸ’¡-23"><a href="#æ”¶è·ğŸ’¡-23" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><ol><li>åº•å±‚çš„åˆ‡ç‚¹å®ç°</li><li>åº•å±‚çš„é€šçŸ¥å®ç°</li><li>åº•å±‚çš„åˆ‡é¢å®ç°</li><li>ProxyFactory ç”¨æ¥åˆ›å»ºä»£ç†<ul><li>å¦‚æœæŒ‡å®šäº†æ¥å£ï¼Œä¸” proxyTargetClass &#x3D; falseï¼Œä½¿ç”¨ JdkDynamicAopProxy</li><li>å¦‚æœæ²¡æœ‰æŒ‡å®šæ¥å£ï¼Œæˆ–è€… proxyTargetClass &#x3D; trueï¼Œä½¿ç”¨ ObjenesisCglibAopProxy<ul><li>ä¾‹å¤–ï¼šå¦‚æœç›®æ ‡æ˜¯æ¥å£ç±»å‹æˆ–å·²ç»æ˜¯ Jdk ä»£ç†ï¼Œä½¿ç”¨ JdkDynamicAopProxy</li></ul></li></ul></li></ol><blockquote><p><em><strong>æ³¨æ„</strong></em></p><ul><li>è¦åŒºåˆ†æœ¬ç« èŠ‚æåˆ°çš„ MethodInterceptorï¼Œå®ƒä¸ä¹‹å‰ cglib ä¸­ç”¨çš„çš„ MethodInterceptor æ˜¯ä¸åŒçš„æ¥å£</li></ul></blockquote><h3 id="16-åˆ‡ç‚¹åŒ¹é…"><a href="#16-åˆ‡ç‚¹åŒ¹é…" class="headerlink" title="16) åˆ‡ç‚¹åŒ¹é…"></a>16) åˆ‡ç‚¹åŒ¹é…</h3><h4 id="æ¼”ç¤º-åˆ‡ç‚¹åŒ¹é…"><a href="#æ¼”ç¤º-åˆ‡ç‚¹åŒ¹é…" class="headerlink" title="æ¼”ç¤º - åˆ‡ç‚¹åŒ¹é…"></a>æ¼”ç¤º - åˆ‡ç‚¹åŒ¹é…</h4><h5 id="ä»£ç å‚è€ƒ-19"><a href="#ä»£ç å‚è€ƒ-19" class="headerlink" title="ä»£ç å‚è€ƒ"></a>ä»£ç å‚è€ƒ</h5><p><strong>com.itheima.a16.A16</strong></p><h4 id="æ”¶è·ğŸ’¡-24"><a href="#æ”¶è·ğŸ’¡-24" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><ol><li>å¸¸è§ aspectj åˆ‡ç‚¹ç”¨æ³•</li><li>aspectj åˆ‡ç‚¹çš„å±€é™æ€§ï¼Œå®é™…çš„ @Transactional åˆ‡ç‚¹å®ç°</li></ol><h3 id="17-ä»-Aspect-åˆ°-Advisor"><a href="#17-ä»-Aspect-åˆ°-Advisor" class="headerlink" title="17) ä» @Aspect åˆ° Advisor"></a>17) ä» @Aspect åˆ° Advisor</h3><h4 id="æ¼”ç¤º1-ä»£ç†åˆ›å»ºå™¨"><a href="#æ¼”ç¤º1-ä»£ç†åˆ›å»ºå™¨" class="headerlink" title="æ¼”ç¤º1 - ä»£ç†åˆ›å»ºå™¨"></a>æ¼”ç¤º1 - ä»£ç†åˆ›å»ºå™¨</h4><h5 id="ä»£ç å‚è€ƒ-20"><a href="#ä»£ç å‚è€ƒ-20" class="headerlink" title="ä»£ç å‚è€ƒ"></a>ä»£ç å‚è€ƒ</h5><p><strong>org.springframework.aop.framework.autoproxy</strong> åŒ…</p><h4 id="æ”¶è·ğŸ’¡-25"><a href="#æ”¶è·ğŸ’¡-25" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><ol><li>AnnotationAwareAspectJAutoProxyCreator çš„ä½œç”¨<ul><li>å°†é«˜çº§ @Aspect åˆ‡é¢ç»Ÿä¸€ä¸ºä½çº§ Advisor åˆ‡é¢</li><li>åœ¨åˆé€‚çš„æ—¶æœºåˆ›å»ºä»£ç†</li></ul></li><li>findEligibleAdvisors æ‰¾åˆ°æœ‰ã€èµ„æ ¼ã€‘çš„ Advisors<ul><li>æœ‰ã€èµ„æ ¼ã€‘çš„ Advisor ä¸€éƒ¨åˆ†æ˜¯ä½çº§çš„, å¯ä»¥ç”±è‡ªå·±ç¼–å†™, å¦‚æœ¬ä¾‹ A17 ä¸­çš„ advisor3</li><li>æœ‰ã€èµ„æ ¼ã€‘çš„ Advisor å¦ä¸€éƒ¨åˆ†æ˜¯é«˜çº§çš„, ç”±è§£æ @Aspect åè·å¾—</li></ul></li><li>wrapIfNecessary<ul><li>å®ƒå†…éƒ¨è°ƒç”¨ findEligibleAdvisors, åªè¦è¿”å›é›†åˆä¸ç©º, åˆ™è¡¨ç¤ºéœ€è¦åˆ›å»ºä»£ç†</li><li>å®ƒçš„è°ƒç”¨æ—¶æœºé€šå¸¸åœ¨åŸå§‹å¯¹è±¡åˆå§‹åŒ–åæ‰§è¡Œ, ä½†ç¢°åˆ°å¾ªç¯ä¾èµ–ä¼šæå‰è‡³ä¾èµ–æ³¨å…¥ä¹‹å‰æ‰§è¡Œ</li></ul></li></ol><h4 id="æ¼”ç¤º2-ä»£ç†åˆ›å»ºæ—¶æœº"><a href="#æ¼”ç¤º2-ä»£ç†åˆ›å»ºæ—¶æœº" class="headerlink" title="æ¼”ç¤º2 - ä»£ç†åˆ›å»ºæ—¶æœº"></a>æ¼”ç¤º2 - ä»£ç†åˆ›å»ºæ—¶æœº</h4><h5 id="ä»£ç å‚è€ƒ-21"><a href="#ä»£ç å‚è€ƒ-21" class="headerlink" title="ä»£ç å‚è€ƒ"></a>ä»£ç å‚è€ƒ</h5><p><strong>org.springframework.aop.framework.autoproxy.A17_1</strong></p><h4 id="æ”¶è·ğŸ’¡-26"><a href="#æ”¶è·ğŸ’¡-26" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><ol><li>ä»£ç†çš„åˆ›å»ºæ—¶æœº<ul><li>åˆå§‹åŒ–ä¹‹å (æ— å¾ªç¯ä¾èµ–æ—¶)</li><li>å®ä¾‹åˆ›å»ºå, ä¾èµ–æ³¨å…¥å‰ (æœ‰å¾ªç¯ä¾èµ–æ—¶), å¹¶æš‚å­˜äºäºŒçº§ç¼“å­˜</li></ul></li><li>ä¾èµ–æ³¨å…¥ä¸åˆå§‹åŒ–ä¸åº”è¯¥è¢«å¢å¼º, ä»åº”è¢«æ–½åŠ äºåŸå§‹å¯¹è±¡</li></ol><h4 id="æ¼”ç¤º3-Before-å¯¹åº”çš„ä½çº§é€šçŸ¥"><a href="#æ¼”ç¤º3-Before-å¯¹åº”çš„ä½çº§é€šçŸ¥" class="headerlink" title="æ¼”ç¤º3 - @Before å¯¹åº”çš„ä½çº§é€šçŸ¥"></a>æ¼”ç¤º3 - @Before å¯¹åº”çš„ä½çº§é€šçŸ¥</h4><h5 id="ä»£ç å‚è€ƒ-22"><a href="#ä»£ç å‚è€ƒ-22" class="headerlink" title="ä»£ç å‚è€ƒ"></a>ä»£ç å‚è€ƒ</h5><p><strong>org.springframework.aop.framework.autoproxy.A17_2</strong></p><h4 id="æ”¶è·ğŸ’¡-27"><a href="#æ”¶è·ğŸ’¡-27" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><ol><li>@Before å‰ç½®é€šçŸ¥ä¼šè¢«è½¬æ¢ä¸ºåŸå§‹çš„ AspectJMethodBeforeAdvice å½¢å¼, è¯¥å¯¹è±¡åŒ…å«äº†å¦‚ä¸‹ä¿¡æ¯<ol><li>é€šçŸ¥ä»£ç ä»å“ªå„¿æ¥</li><li>åˆ‡ç‚¹æ˜¯ä»€ä¹ˆ(è¿™é‡Œä¸ºå•¥è¦åˆ‡ç‚¹, åé¢è§£é‡Š)</li><li>é€šçŸ¥å¯¹è±¡å¦‚ä½•åˆ›å»º, æœ¬ä¾‹å…±ç”¨åŒä¸€ä¸ª Aspect å¯¹è±¡</li></ol></li><li>ç±»ä¼¼çš„è¿˜æœ‰<ol><li>AspectJAroundAdvice (ç¯ç»•é€šçŸ¥)</li><li>AspectJAfterReturningAdvice</li><li>AspectJAfterThrowingAdvice (ç¯ç»•é€šçŸ¥)</li><li>AspectJAfterAdvice (ç¯ç»•é€šçŸ¥)</li></ol></li></ol><h3 id="18-é™æ€é€šçŸ¥è°ƒç”¨"><a href="#18-é™æ€é€šçŸ¥è°ƒç”¨" class="headerlink" title="18) é™æ€é€šçŸ¥è°ƒç”¨"></a>18) é™æ€é€šçŸ¥è°ƒç”¨</h3><p>ä»£ç†å¯¹è±¡è°ƒç”¨æµç¨‹å¦‚ä¸‹ï¼ˆä»¥ JDK åŠ¨æ€ä»£ç†å®ç°ä¸ºä¾‹ï¼‰</p><ul><li>ä» ProxyFactory è·å¾— Target å’Œç¯ç»•é€šçŸ¥é“¾ï¼Œæ ¹æ®ä»–ä¿©åˆ›å»º MethodInvocationï¼Œç®€ç§° mi</li><li>é¦–æ¬¡æ‰§è¡Œ mi.proceed() å‘ç°æœ‰ä¸‹ä¸€ä¸ªç¯ç»•é€šçŸ¥ï¼Œè°ƒç”¨å®ƒçš„ invoke(mi)</li><li>è¿›å…¥ç¯ç»•é€šçŸ¥1ï¼Œæ‰§è¡Œå‰å¢å¼ºï¼Œå†æ¬¡è°ƒç”¨ mi.proceed() å‘ç°æœ‰ä¸‹ä¸€ä¸ªç¯ç»•é€šçŸ¥ï¼Œè°ƒç”¨å®ƒçš„ invoke(mi)</li><li>è¿›å…¥ç¯ç»•é€šçŸ¥2ï¼Œæ‰§è¡Œå‰å¢å¼ºï¼Œè°ƒç”¨ mi.proceed() å‘ç°æ²¡æœ‰ç¯ç»•é€šçŸ¥ï¼Œè°ƒç”¨ mi.invokeJoinPoint() æ‰§è¡Œç›®æ ‡æ–¹æ³•</li><li>ç›®æ ‡æ–¹æ³•æ‰§è¡Œç»“æŸï¼Œå°†ç»“æœè¿”å›ç»™ç¯ç»•é€šçŸ¥2ï¼Œæ‰§è¡Œç¯ç»•é€šçŸ¥2 çš„åå¢å¼º</li><li>ç¯ç»•é€šçŸ¥2ç»§ç»­å°†ç»“æœè¿”å›ç»™ç¯ç»•é€šçŸ¥1ï¼Œæ‰§è¡Œç¯ç»•é€šçŸ¥1 çš„åå¢å¼º</li><li>ç¯ç»•é€šçŸ¥1è¿”å›æœ€ç»ˆçš„ç»“æœ</li></ul><p>å›¾ä¸­ä¸åŒé¢œè‰²å¯¹åº”ä¸€æ¬¡ç¯ç»•é€šçŸ¥æˆ–ç›®æ ‡çš„è°ƒç”¨èµ·å§‹è‡³ç»ˆç»“</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sequenceDiagram</span><br><span class="line">participant Proxy</span><br><span class="line">participant ih as InvocationHandler</span><br><span class="line">participant mi as MethodInvocation</span><br><span class="line">participant Factory as ProxyFactory</span><br><span class="line">participant mi1 as MethodInterceptor1</span><br><span class="line">participant mi2 as MethodInterceptor2</span><br><span class="line">participant Target</span><br><span class="line"></span><br><span class="line">Proxy -&gt;&gt; +ih : invoke()</span><br><span class="line">ih -&gt;&gt; +Factory : è·å¾— Target</span><br><span class="line">Factory --&gt;&gt; -ih : </span><br><span class="line">ih -&gt;&gt; +Factory : è·å¾— MethodInterceptor é“¾</span><br><span class="line">Factory --&gt;&gt; -ih : </span><br><span class="line">ih -&gt;&gt; +mi : åˆ›å»º mi</span><br><span class="line">mi --&gt;&gt; -ih : </span><br><span class="line">rect rgb(200, 223, 255)</span><br><span class="line">ih -&gt;&gt; +mi : mi.proceed()</span><br><span class="line">mi -&gt;&gt; +mi1 : invoke(mi)</span><br><span class="line">mi1 -&gt;&gt; mi1 : å‰å¢å¼º</span><br><span class="line">rect rgb(200, 190, 255)</span><br><span class="line">mi1 -&gt;&gt; mi : mi.proceed()</span><br><span class="line">mi -&gt;&gt; +mi2 : invoke(mi)</span><br><span class="line">mi2 -&gt;&gt; mi2 : å‰å¢å¼º</span><br><span class="line">rect rgb(150, 190, 155)</span><br><span class="line">mi2 -&gt;&gt; mi : mi.proceed()</span><br><span class="line">mi -&gt;&gt; +Target : mi.invokeJoinPoint()</span><br><span class="line">Target -&gt;&gt; Target : </span><br><span class="line">Target --&gt;&gt; -mi2 : ç»“æœ</span><br><span class="line">end</span><br><span class="line">mi2 -&gt;&gt; mi2 : åå¢å¼º</span><br><span class="line">mi2 --&gt;&gt; -mi1 : ç»“æœ</span><br><span class="line">end</span><br><span class="line">mi1 -&gt;&gt; mi1 : åå¢å¼º</span><br><span class="line">mi1 --&gt;&gt; -mi : ç»“æœ</span><br><span class="line">mi --&gt;&gt; -ih : </span><br><span class="line">end</span><br><span class="line">ih --&gt;&gt; -Proxy : </span><br></pre></td></tr></table></figure><h4 id="æ¼”ç¤º1-é€šçŸ¥è°ƒç”¨è¿‡ç¨‹"><a href="#æ¼”ç¤º1-é€šçŸ¥è°ƒç”¨è¿‡ç¨‹" class="headerlink" title="æ¼”ç¤º1 - é€šçŸ¥è°ƒç”¨è¿‡ç¨‹"></a>æ¼”ç¤º1 - é€šçŸ¥è°ƒç”¨è¿‡ç¨‹</h4><h5 id="ä»£ç å‚è€ƒ-23"><a href="#ä»£ç å‚è€ƒ-23" class="headerlink" title="ä»£ç å‚è€ƒ"></a>ä»£ç å‚è€ƒ</h5><p><strong>org.springframework.aop.framework.A18</strong></p><h4 id="æ”¶è·ğŸ’¡-28"><a href="#æ”¶è·ğŸ’¡-28" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><p>ä»£ç†æ–¹æ³•æ‰§è¡Œæ—¶ä¼šåšå¦‚ä¸‹å·¥ä½œ</p><ol><li>é€šè¿‡ proxyFactory çš„ getInterceptorsAndDynamicInterceptionAdvice() å°†å…¶ä»–é€šçŸ¥ç»Ÿä¸€è½¬æ¢ä¸º MethodInterceptor ç¯ç»•é€šçŸ¥<ul><li>MethodBeforeAdviceAdapter å°† @Before AspectJMethodBeforeAdvice é€‚é…ä¸º MethodBeforeAdviceInterceptor</li><li>AfterReturningAdviceAdapter å°† @AfterReturning AspectJAfterReturningAdvice é€‚é…ä¸º AfterReturningAdviceInterceptor</li><li>è¿™ä½“ç°çš„æ˜¯é€‚é…å™¨è®¾è®¡æ¨¡å¼</li></ul></li><li>æ‰€è°“é™æ€é€šçŸ¥ï¼Œä½“ç°åœ¨ä¸Šé¢æ–¹æ³•çš„ Interceptors éƒ¨åˆ†ï¼Œè¿™äº›é€šçŸ¥è°ƒç”¨æ—¶æ— éœ€å†æ¬¡æ£€æŸ¥åˆ‡ç‚¹ï¼Œç›´æ¥è°ƒç”¨å³å¯</li><li>ç»“åˆç›®æ ‡ä¸ç¯ç»•é€šçŸ¥é“¾ï¼Œåˆ›å»º MethodInvocation å¯¹è±¡ï¼Œé€šè¿‡å®ƒå®Œæˆæ•´ä¸ªè°ƒç”¨</li></ol><h4 id="æ¼”ç¤º2-æ¨¡æ‹Ÿ-MethodInvocation"><a href="#æ¼”ç¤º2-æ¨¡æ‹Ÿ-MethodInvocation" class="headerlink" title="æ¼”ç¤º2 - æ¨¡æ‹Ÿ MethodInvocation"></a>æ¼”ç¤º2 - æ¨¡æ‹Ÿ MethodInvocation</h4><h5 id="ä»£ç å‚è€ƒ-24"><a href="#ä»£ç å‚è€ƒ-24" class="headerlink" title="ä»£ç å‚è€ƒ"></a>ä»£ç å‚è€ƒ</h5><p><strong>org.springframework.aop.framework.A18_1</strong></p><h4 id="æ”¶è·ğŸ’¡-29"><a href="#æ”¶è·ğŸ’¡-29" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><ol><li>proceed() æ–¹æ³•è°ƒç”¨é“¾ä¸­ä¸‹ä¸€ä¸ªç¯ç»•é€šçŸ¥</li><li>æ¯ä¸ªç¯ç»•é€šçŸ¥å†…éƒ¨ç»§ç»­è°ƒç”¨ proceed()</li><li>è°ƒç”¨åˆ°æ²¡æœ‰æ›´å¤šé€šçŸ¥äº†, å°±è°ƒç”¨ç›®æ ‡æ–¹æ³•</li></ol><p>MethodInvocation çš„ç¼–ç¨‹æŠ€å·§åœ¨å®ç°æ‹¦æˆªå™¨ã€è¿‡æ»¤å™¨æ—¶èƒ½ç”¨ä¸Š</p><h3 id="19-åŠ¨æ€é€šçŸ¥è°ƒç”¨"><a href="#19-åŠ¨æ€é€šçŸ¥è°ƒç”¨" class="headerlink" title="19) åŠ¨æ€é€šçŸ¥è°ƒç”¨"></a>19) åŠ¨æ€é€šçŸ¥è°ƒç”¨</h3><h4 id="æ¼”ç¤º-å¸¦å‚æ•°ç»‘å®šçš„é€šçŸ¥æ–¹æ³•è°ƒç”¨"><a href="#æ¼”ç¤º-å¸¦å‚æ•°ç»‘å®šçš„é€šçŸ¥æ–¹æ³•è°ƒç”¨" class="headerlink" title="æ¼”ç¤º - å¸¦å‚æ•°ç»‘å®šçš„é€šçŸ¥æ–¹æ³•è°ƒç”¨"></a>æ¼”ç¤º - å¸¦å‚æ•°ç»‘å®šçš„é€šçŸ¥æ–¹æ³•è°ƒç”¨</h4><h5 id="ä»£ç å‚è€ƒ-25"><a href="#ä»£ç å‚è€ƒ-25" class="headerlink" title="ä»£ç å‚è€ƒ"></a>ä»£ç å‚è€ƒ</h5><p><strong>org.springframework.aop.framework.autoproxy.A19</strong></p><h4 id="æ”¶è·ğŸ’¡-30"><a href="#æ”¶è·ğŸ’¡-30" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><ol><li>é€šè¿‡ proxyFactory çš„ getInterceptorsAndDynamicInterceptionAdvice() å°†å…¶ä»–é€šçŸ¥ç»Ÿä¸€è½¬æ¢ä¸º MethodInterceptor ç¯ç»•é€šçŸ¥</li><li>æ‰€è°“åŠ¨æ€é€šçŸ¥ï¼Œä½“ç°åœ¨ä¸Šé¢æ–¹æ³•çš„ DynamicInterceptionAdvice éƒ¨åˆ†ï¼Œè¿™äº›é€šçŸ¥è°ƒç”¨æ—¶å› ä¸ºè¦ä¸ºé€šçŸ¥æ–¹æ³•ç»‘å®šå‚æ•°ï¼Œè¿˜éœ€å†æ¬¡åˆ©ç”¨åˆ‡ç‚¹è¡¨è¾¾å¼</li><li>åŠ¨æ€é€šçŸ¥è°ƒç”¨å¤æ‚ç¨‹åº¦é«˜ï¼Œæ€§èƒ½è¾ƒä½</li></ol><h2 id="WEB"><a href="#WEB" class="headerlink" title="WEB"></a>WEB</h2><h3 id="20-RequestMappingHandlerMapping-ä¸-RequestMappingHandlerAdapter"><a href="#20-RequestMappingHandlerMapping-ä¸-RequestMappingHandlerAdapter" class="headerlink" title="20) RequestMappingHandlerMapping ä¸ RequestMappingHandlerAdapter"></a>20) RequestMappingHandlerMapping ä¸ RequestMappingHandlerAdapter</h3><p>RequestMappingHandlerMapping ä¸ RequestMappingHandlerAdapter ä¿©æ˜¯ä¸€å¯¹ï¼Œåˆ†åˆ«ç”¨æ¥</p><ul><li>å¤„ç† @RequestMapping æ˜ å°„</li><li>è°ƒç”¨æ§åˆ¶å™¨æ–¹æ³•ã€å¹¶å¤„ç†æ–¹æ³•å‚æ•°ä¸æ–¹æ³•è¿”å›å€¼</li></ul><h4 id="æ¼”ç¤º1-DispatcherServlet-åˆå§‹åŒ–"><a href="#æ¼”ç¤º1-DispatcherServlet-åˆå§‹åŒ–" class="headerlink" title="æ¼”ç¤º1 - DispatcherServlet åˆå§‹åŒ–"></a>æ¼”ç¤º1 - DispatcherServlet åˆå§‹åŒ–</h4><h5 id="ä»£ç å‚è€ƒ-26"><a href="#ä»£ç å‚è€ƒ-26" class="headerlink" title="ä»£ç å‚è€ƒ"></a>ä»£ç å‚è€ƒ</h5><p><strong>com.itheima.a20</strong> åŒ…</p><h4 id="æ”¶è·ğŸ’¡-31"><a href="#æ”¶è·ğŸ’¡-31" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><ol><li>DispatcherServlet æ˜¯åœ¨ç¬¬ä¸€æ¬¡è¢«è®¿é—®æ—¶æ‰§è¡Œåˆå§‹åŒ–, ä¹Ÿå¯ä»¥é€šè¿‡é…ç½®ä¿®æ”¹ä¸º Tomcat å¯åŠ¨åå°±åˆå§‹åŒ–</li><li>åœ¨åˆå§‹åŒ–æ—¶ä¼šä» Spring å®¹å™¨ä¸­æ‰¾ä¸€äº› Web éœ€è¦çš„ç»„ä»¶, å¦‚ HandlerMappingã€HandlerAdapter ç­‰ï¼Œå¹¶é€ä¸€è°ƒç”¨å®ƒä»¬çš„åˆå§‹åŒ–</li><li>RequestMappingHandlerMapping åˆå§‹åŒ–æ—¶ï¼Œä¼šæ”¶é›†æ‰€æœ‰ @RequestMapping æ˜ å°„ä¿¡æ¯ï¼Œå°è£…ä¸º Mapï¼Œå…¶ä¸­<ul><li>key æ˜¯ RequestMappingInfo ç±»å‹ï¼ŒåŒ…æ‹¬è¯·æ±‚è·¯å¾„ã€è¯·æ±‚æ–¹æ³•ç­‰ä¿¡æ¯</li><li>value æ˜¯ HandlerMethod ç±»å‹ï¼ŒåŒ…æ‹¬æ§åˆ¶å™¨æ–¹æ³•å¯¹è±¡ã€æ§åˆ¶å™¨å¯¹è±¡</li><li>æœ‰äº†è¿™ä¸ª Mapï¼Œå°±å¯ä»¥åœ¨è¯·æ±‚åˆ°è¾¾æ—¶ï¼Œå¿«é€Ÿå®Œæˆæ˜ å°„ï¼Œæ‰¾åˆ° HandlerMethod å¹¶ä¸åŒ¹é…çš„æ‹¦æˆªå™¨ä¸€èµ·è¿”å›ç»™ DispatcherServlet</li></ul></li><li>RequestMappingHandlerAdapter åˆå§‹åŒ–æ—¶ï¼Œä¼šå‡†å¤‡ HandlerMethod è°ƒç”¨æ—¶éœ€è¦çš„å„ä¸ªç»„ä»¶ï¼Œå¦‚ï¼š<ul><li>HandlerMethodArgumentResolver è§£ææ§åˆ¶å™¨æ–¹æ³•å‚æ•°</li><li>HandlerMethodReturnValueHandler å¤„ç†æ§åˆ¶å™¨æ–¹æ³•è¿”å›å€¼</li></ul></li></ol><h4 id="æ¼”ç¤º2-è‡ªå®šä¹‰å‚æ•°ä¸è¿”å›å€¼å¤„ç†å™¨"><a href="#æ¼”ç¤º2-è‡ªå®šä¹‰å‚æ•°ä¸è¿”å›å€¼å¤„ç†å™¨" class="headerlink" title="æ¼”ç¤º2 - è‡ªå®šä¹‰å‚æ•°ä¸è¿”å›å€¼å¤„ç†å™¨"></a>æ¼”ç¤º2 - è‡ªå®šä¹‰å‚æ•°ä¸è¿”å›å€¼å¤„ç†å™¨</h4><h5 id="ä»£ç å‚è€ƒ-27"><a href="#ä»£ç å‚è€ƒ-27" class="headerlink" title="ä»£ç å‚è€ƒ"></a>ä»£ç å‚è€ƒ</h5><p><strong>com.itheima.a20.TokenArgumentResolver</strong> ï¼Œ<strong>com.itheima.a20.YmlReturnValueHandler</strong></p><h4 id="æ”¶è·ğŸ’¡-32"><a href="#æ”¶è·ğŸ’¡-32" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><ol><li>ä½“ä¼šå‚æ•°è§£æå™¨çš„ä½œç”¨</li><li>ä½“ä¼šè¿”å›å€¼å¤„ç†å™¨çš„ä½œç”¨</li></ol><h3 id="21-å‚æ•°è§£æå™¨"><a href="#21-å‚æ•°è§£æå™¨" class="headerlink" title="21) å‚æ•°è§£æå™¨"></a>21) å‚æ•°è§£æå™¨</h3><h4 id="æ¼”ç¤º-å¸¸è§å‚æ•°è§£æå™¨"><a href="#æ¼”ç¤º-å¸¸è§å‚æ•°è§£æå™¨" class="headerlink" title="æ¼”ç¤º - å¸¸è§å‚æ•°è§£æå™¨"></a>æ¼”ç¤º - å¸¸è§å‚æ•°è§£æå™¨</h4><h5 id="ä»£ç å‚è€ƒ-28"><a href="#ä»£ç å‚è€ƒ-28" class="headerlink" title="ä»£ç å‚è€ƒ"></a>ä»£ç å‚è€ƒ</h5><p><strong>com.itheima.a21</strong> åŒ…</p><h4 id="æ”¶è·ğŸ’¡-33"><a href="#æ”¶è·ğŸ’¡-33" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><ol><li>åˆæ­¥äº†è§£ RequestMappingHandlerAdapter çš„è°ƒç”¨è¿‡ç¨‹<ol><li>æ§åˆ¶å™¨æ–¹æ³•è¢«å°è£…ä¸º HandlerMethod</li><li>å‡†å¤‡å¯¹è±¡ç»‘å®šä¸ç±»å‹è½¬æ¢</li><li>å‡†å¤‡ ModelAndViewContainer ç”¨æ¥å­˜å‚¨ä¸­é—´ Model ç»“æœ</li><li>è§£ææ¯ä¸ªå‚æ•°å€¼</li></ol></li><li>è§£æå‚æ•°ä¾èµ–çš„å°±æ˜¯å„ç§å‚æ•°è§£æå™¨ï¼Œå®ƒä»¬éƒ½æœ‰ä¸¤ä¸ªé‡è¦æ–¹æ³•<ul><li>supportsParameter åˆ¤æ–­æ˜¯å¦æ”¯æŒæ–¹æ³•å‚æ•°</li><li>resolveArgument è§£ææ–¹æ³•å‚æ•°</li></ul></li><li>å¸¸è§å‚æ•°çš„è§£æ<ul><li>@RequestParam</li><li>çœç•¥ @RequestParam</li><li>@RequestParam(defaultValue)</li><li>MultipartFile</li><li>@PathVariable</li><li>@RequestHeader</li><li>@CookieValue</li><li>@Value</li><li>HttpServletRequest ç­‰</li><li>@ModelAttribute</li><li>çœç•¥ @ModelAttribute</li><li>@RequestBody</li></ul></li><li>ç»„åˆæ¨¡å¼åœ¨ Spring ä¸­çš„ä½“ç°</li><li>@RequestParam, @CookieValue ç­‰æ³¨è§£ä¸­çš„å‚æ•°åã€é»˜è®¤å€¼, éƒ½å¯ä»¥å†™æˆæ´»çš„, å³ä» ${ } #{ }ä¸­è·å–</li></ol><h3 id="22-å‚æ•°åè§£æ"><a href="#22-å‚æ•°åè§£æ" class="headerlink" title="22) å‚æ•°åè§£æ"></a>22) å‚æ•°åè§£æ</h3><h4 id="æ¼”ç¤º-ä¸¤ç§æ–¹æ³•è·å–å‚æ•°å"><a href="#æ¼”ç¤º-ä¸¤ç§æ–¹æ³•è·å–å‚æ•°å" class="headerlink" title="æ¼”ç¤º - ä¸¤ç§æ–¹æ³•è·å–å‚æ•°å"></a>æ¼”ç¤º - ä¸¤ç§æ–¹æ³•è·å–å‚æ•°å</h4><h5 id="ä»£ç å‚è€ƒ-29"><a href="#ä»£ç å‚è€ƒ-29" class="headerlink" title="ä»£ç å‚è€ƒ"></a>ä»£ç å‚è€ƒ</h5><p><strong>com.itheima.a22.A22</strong></p><h4 id="æ”¶è·ğŸ’¡-34"><a href="#æ”¶è·ğŸ’¡-34" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><ol><li>å¦‚æœç¼–è¯‘æ—¶æ·»åŠ äº† -parameters å¯ä»¥ç”Ÿæˆå‚æ•°è¡¨, åå°„æ—¶å°±å¯ä»¥æ‹¿åˆ°å‚æ•°å</li><li>å¦‚æœç¼–è¯‘æ—¶æ·»åŠ äº† -g å¯ä»¥ç”Ÿæˆè°ƒè¯•ä¿¡æ¯, ä½†åˆ†ä¸ºä¸¤ç§æƒ…å†µ<ul><li>æ™®é€šç±», ä¼šåŒ…å«å±€éƒ¨å˜é‡è¡¨, ç”¨ asm å¯ä»¥æ‹¿åˆ°å‚æ•°å</li><li>æ¥å£, ä¸ä¼šåŒ…å«å±€éƒ¨å˜é‡è¡¨, æ— æ³•è·å¾—å‚æ•°å<ul><li>è¿™ä¹Ÿæ˜¯ MyBatis åœ¨å®ç° Mapper æ¥å£æ—¶ä¸ºä½•è¦æä¾› @Param æ³¨è§£æ¥è¾…åŠ©è·å¾—å‚æ•°å</li></ul></li></ul></li></ol><h3 id="23-å¯¹è±¡ç»‘å®šä¸ç±»å‹è½¬æ¢"><a href="#23-å¯¹è±¡ç»‘å®šä¸ç±»å‹è½¬æ¢" class="headerlink" title="23) å¯¹è±¡ç»‘å®šä¸ç±»å‹è½¬æ¢"></a>23) å¯¹è±¡ç»‘å®šä¸ç±»å‹è½¬æ¢</h3><h4 id="åº•å±‚ç¬¬ä¸€å¥—è½¬æ¢æ¥å£ä¸å®ç°"><a href="#åº•å±‚ç¬¬ä¸€å¥—è½¬æ¢æ¥å£ä¸å®ç°" class="headerlink" title="åº•å±‚ç¬¬ä¸€å¥—è½¬æ¢æ¥å£ä¸å®ç°"></a>åº•å±‚ç¬¬ä¸€å¥—è½¬æ¢æ¥å£ä¸å®ç°</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">classDiagram</span><br><span class="line"></span><br><span class="line">Formatter --|&gt; Printer</span><br><span class="line">Formatter --|&gt; Parser</span><br><span class="line"></span><br><span class="line">class Converters &#123;</span><br><span class="line">   Set~GenericConverter~</span><br><span class="line">&#125;</span><br><span class="line">class Converter</span><br><span class="line"></span><br><span class="line">class ConversionService</span><br><span class="line">class FormattingConversionService</span><br><span class="line"></span><br><span class="line">ConversionService &lt;|-- FormattingConversionService</span><br><span class="line">FormattingConversionService o-- Converters</span><br><span class="line"></span><br><span class="line">Printer --&gt; Adapter1</span><br><span class="line">Adapter1 --&gt; Converters</span><br><span class="line">Parser --&gt; Adapter2</span><br><span class="line">Adapter2 --&gt; Converters</span><br><span class="line">Converter --&gt; Adapter3</span><br><span class="line">Adapter3 --&gt; Converters</span><br><span class="line"></span><br><span class="line">&lt;&lt;interface&gt;&gt; Formatter</span><br><span class="line">&lt;&lt;interface&gt;&gt; Printer</span><br><span class="line">&lt;&lt;interface&gt;&gt; Parser</span><br><span class="line">&lt;&lt;interface&gt;&gt; Converter</span><br><span class="line">&lt;&lt;interface&gt;&gt; ConversionService</span><br></pre></td></tr></table></figure><ul><li>Printer æŠŠå…¶å®ƒç±»å‹è½¬ä¸º String</li><li>Parser æŠŠ String è½¬ä¸ºå…¶å®ƒç±»å‹</li><li>Formatter ç»¼åˆ Printer ä¸ Parser åŠŸèƒ½</li><li>Converter æŠŠç±»å‹ S è½¬ä¸ºç±»å‹ T</li><li>Printerã€Parserã€Converter ç»è¿‡é€‚é…è½¬æ¢æˆ GenericConverter æ”¾å…¥ Converters é›†åˆ</li><li>FormattingConversionService åˆ©ç”¨å…¶å®ƒä»¬å®ç°è½¬æ¢</li></ul><h4 id="åº•å±‚ç¬¬äºŒå¥—è½¬æ¢æ¥å£"><a href="#åº•å±‚ç¬¬äºŒå¥—è½¬æ¢æ¥å£" class="headerlink" title="åº•å±‚ç¬¬äºŒå¥—è½¬æ¢æ¥å£"></a>åº•å±‚ç¬¬äºŒå¥—è½¬æ¢æ¥å£</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">classDiagram</span><br><span class="line"></span><br><span class="line">PropertyEditorRegistry o-- &quot;å¤š&quot; PropertyEditor</span><br><span class="line"></span><br><span class="line">&lt;&lt;interface&gt;&gt; PropertyEditorRegistry</span><br><span class="line">&lt;&lt;interface&gt;&gt; PropertyEditor</span><br></pre></td></tr></table></figure><ul><li>PropertyEditor æŠŠ String ä¸å…¶å®ƒç±»å‹ç›¸äº’è½¬æ¢</li><li>PropertyEditorRegistry å¯ä»¥æ³¨å†Œå¤šä¸ª PropertyEditor å¯¹è±¡</li><li>ä¸ç¬¬ä¸€å¥—æ¥å£ç›´æ¥å¯ä»¥é€šè¿‡ FormatterPropertyEditorAdapter æ¥è¿›è¡Œé€‚é…</li></ul><h4 id="é«˜å±‚æ¥å£ä¸å®ç°"><a href="#é«˜å±‚æ¥å£ä¸å®ç°" class="headerlink" title="é«˜å±‚æ¥å£ä¸å®ç°"></a>é«˜å±‚æ¥å£ä¸å®ç°</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">classDiagram</span><br><span class="line">TypeConverter &lt;|-- SimpleTypeConverter</span><br><span class="line">TypeConverter &lt;|-- BeanWrapperImpl</span><br><span class="line">TypeConverter &lt;|-- DirectFieldAccessor</span><br><span class="line">TypeConverter &lt;|-- ServletRequestDataBinder</span><br><span class="line"></span><br><span class="line">SimpleTypeConverter --&gt; TypeConverterDelegate</span><br><span class="line">BeanWrapperImpl --&gt; TypeConverterDelegate</span><br><span class="line">DirectFieldAccessor --&gt; TypeConverterDelegate</span><br><span class="line">ServletRequestDataBinder --&gt; TypeConverterDelegate</span><br><span class="line"></span><br><span class="line">TypeConverterDelegate --&gt; ConversionService</span><br><span class="line">TypeConverterDelegate --&gt; PropertyEditorRegistry</span><br><span class="line"></span><br><span class="line">&lt;&lt;interface&gt;&gt; TypeConverter</span><br><span class="line">&lt;&lt;interface&gt;&gt; ConversionService</span><br><span class="line">&lt;&lt;interface&gt;&gt; PropertyEditorRegistry</span><br></pre></td></tr></table></figure><ul><li>å®ƒä»¬éƒ½å®ç°äº† TypeConverter è¿™ä¸ªé«˜å±‚è½¬æ¢æ¥å£ï¼Œåœ¨è½¬æ¢æ—¶ï¼Œä¼šç”¨åˆ° TypeConverter Delegate å§”æ´¾ConversionService ä¸ PropertyEditorRegistry çœŸæ­£æ‰§è¡Œè½¬æ¢ï¼ˆFacade é—¨é¢æ¨¡å¼ï¼‰<ul><li>é¦–å…ˆçœ‹æ˜¯å¦æœ‰è‡ªå®šä¹‰è½¬æ¢å™¨, @InitBinder æ·»åŠ çš„å³å±äºè¿™ç§ (ç”¨äº†é€‚é…å™¨æ¨¡å¼æŠŠ Formatter è½¬ä¸ºéœ€è¦çš„ PropertyEditor)</li><li>å†çœ‹æœ‰æ²¡æœ‰ ConversionService è½¬æ¢</li><li>å†åˆ©ç”¨é»˜è®¤çš„ PropertyEditor è½¬æ¢</li><li>æœ€åæœ‰ä¸€äº›ç‰¹æ®Šå¤„ç†</li></ul></li><li>SimpleTypeConverter ä»…åšç±»å‹è½¬æ¢</li><li>BeanWrapperImpl ä¸º bean çš„å±æ€§èµ‹å€¼ï¼Œå½“éœ€è¦æ—¶åšç±»å‹è½¬æ¢ï¼Œèµ° Property</li><li>DirectFieldAccessor ä¸º bean çš„å±æ€§èµ‹å€¼ï¼Œå½“éœ€è¦æ—¶åšç±»å‹è½¬æ¢ï¼Œèµ° Field</li><li>ServletRequestDataBinder ä¸º bean çš„å±æ€§æ‰§è¡Œç»‘å®šï¼Œå½“éœ€è¦æ—¶åšç±»å‹è½¬æ¢ï¼Œæ ¹æ® directFieldAccess é€‰æ‹©èµ° Property è¿˜æ˜¯ Fieldï¼Œå…·å¤‡æ ¡éªŒä¸è·å–æ ¡éªŒç»“æœåŠŸèƒ½</li></ul><h4 id="æ¼”ç¤º1-ç±»å‹è½¬æ¢ä¸æ•°æ®ç»‘å®š"><a href="#æ¼”ç¤º1-ç±»å‹è½¬æ¢ä¸æ•°æ®ç»‘å®š" class="headerlink" title="æ¼”ç¤º1 - ç±»å‹è½¬æ¢ä¸æ•°æ®ç»‘å®š"></a>æ¼”ç¤º1 - ç±»å‹è½¬æ¢ä¸æ•°æ®ç»‘å®š</h4><h5 id="ä»£ç å‚è€ƒ-30"><a href="#ä»£ç å‚è€ƒ-30" class="headerlink" title="ä»£ç å‚è€ƒ"></a>ä»£ç å‚è€ƒ</h5><p><strong>com.itheima.a23</strong> åŒ…</p><h4 id="æ”¶è·ğŸ’¡-35"><a href="#æ”¶è·ğŸ’¡-35" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><p>åŸºæœ¬çš„ç±»å‹è½¬æ¢ä¸æ•°æ®ç»‘å®šç”¨æ³•</p><ul><li>SimpleTypeConverter</li><li>BeanWrapperImpl</li><li>DirectFieldAccessor</li><li>ServletRequestDataBinder</li></ul><h4 id="æ¼”ç¤º2-æ•°æ®ç»‘å®šå·¥å‚"><a href="#æ¼”ç¤º2-æ•°æ®ç»‘å®šå·¥å‚" class="headerlink" title="æ¼”ç¤º2 - æ•°æ®ç»‘å®šå·¥å‚"></a>æ¼”ç¤º2 - æ•°æ®ç»‘å®šå·¥å‚</h4><h5 id="ä»£ç å‚è€ƒ-31"><a href="#ä»£ç å‚è€ƒ-31" class="headerlink" title="ä»£ç å‚è€ƒ"></a>ä»£ç å‚è€ƒ</h5><p><strong>com.itheima.a23.TestServletDataBinderFactory</strong></p><h4 id="æ”¶è·ğŸ’¡-36"><a href="#æ”¶è·ğŸ’¡-36" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><p>ServletRequestDataBinderFactory çš„ç”¨æ³•å’Œæ‰©å±•ç‚¹</p><ol><li>å¯ä»¥è§£ææ§åˆ¶å™¨çš„ @InitBinder æ ‡æ³¨æ–¹æ³•ä½œä¸ºæ‰©å±•ç‚¹ï¼Œæ·»åŠ è‡ªå®šä¹‰è½¬æ¢å™¨<ul><li>æ§åˆ¶å™¨ç§æœ‰èŒƒå›´</li></ul></li><li>å¯ä»¥é€šè¿‡ ConfigurableWebBindingInitializer é…ç½® ConversionService ä½œä¸ºæ‰©å±•ç‚¹ï¼Œæ·»åŠ è‡ªå®šä¹‰è½¬æ¢å™¨<ul><li>å…¬å…±èŒƒå›´</li></ul></li><li>åŒæ—¶åŠ äº† @InitBinder å’Œ ConversionService çš„è½¬æ¢ä¼˜å…ˆçº§<ol><li>ä¼˜å…ˆé‡‡ç”¨ @InitBinder çš„è½¬æ¢å™¨</li><li>å…¶æ¬¡ä½¿ç”¨ ConversionService çš„è½¬æ¢å™¨</li><li>ä½¿ç”¨é»˜è®¤è½¬æ¢å™¨</li><li>ç‰¹æ®Šå¤„ç†ï¼ˆä¾‹å¦‚æœ‰å‚æ„é€ ï¼‰</li></ol></li></ol><h4 id="æ¼”ç¤º3-è·å–æ³›å‹å‚æ•°"><a href="#æ¼”ç¤º3-è·å–æ³›å‹å‚æ•°" class="headerlink" title="æ¼”ç¤º3 - è·å–æ³›å‹å‚æ•°"></a>æ¼”ç¤º3 - è·å–æ³›å‹å‚æ•°</h4><h5 id="ä»£ç å‚è€ƒ-32"><a href="#ä»£ç å‚è€ƒ-32" class="headerlink" title="ä»£ç å‚è€ƒ"></a>ä»£ç å‚è€ƒ</h5><p><strong>com.itheima.a23.sub</strong> åŒ…</p><h4 id="æ”¶è·ğŸ’¡-37"><a href="#æ”¶è·ğŸ’¡-37" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><ol><li>java api è·å–æ³›å‹å‚æ•°</li><li>spring api è·å–æ³›å‹å‚æ•°</li></ol><h3 id="24-ControllerAdvice-ä¹‹-InitBinder"><a href="#24-ControllerAdvice-ä¹‹-InitBinder" class="headerlink" title="24) @ControllerAdvice ä¹‹ @InitBinder"></a>24) @ControllerAdvice ä¹‹ @InitBinder</h3><h4 id="æ¼”ç¤º-å‡†å¤‡-InitBinder"><a href="#æ¼”ç¤º-å‡†å¤‡-InitBinder" class="headerlink" title="æ¼”ç¤º - å‡†å¤‡ @InitBinder"></a>æ¼”ç¤º - å‡†å¤‡ @InitBinder</h4><p><strong>å‡†å¤‡ @InitBinder</strong> åœ¨æ•´ä¸ª HandlerAdapter è°ƒç”¨è¿‡ç¨‹ä¸­æ‰€å¤„çš„ä½ç½®</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sequenceDiagram</span><br><span class="line">participant adapter as HandlerAdapter</span><br><span class="line">participant bf as WebDataBinderFactory</span><br><span class="line">participant mf as ModelFactory</span><br><span class="line">participant ihm as ServletInvocableHandlerMethod</span><br><span class="line">participant ar as ArgumentResolvers </span><br><span class="line">participant rh as ReturnValueHandlers</span><br><span class="line">participant container as ModelAndViewContainer</span><br><span class="line">rect rgb(200, 150, 255)</span><br><span class="line">adapter -&gt;&gt; +bf: å‡†å¤‡ @InitBinder</span><br><span class="line">bf --&gt;&gt; -adapter: </span><br><span class="line">end</span><br><span class="line">adapter -&gt;&gt; +mf: å‡†å¤‡ @ModelAttribute</span><br><span class="line">mf -&gt;&gt; +container: æ·»åŠ Modelæ•°æ®</span><br><span class="line">container --&gt;&gt; -mf: </span><br><span class="line">mf --&gt;&gt; -adapter: </span><br><span class="line"></span><br><span class="line">adapter -&gt;&gt; +ihm: invokeAndHandle</span><br><span class="line">ihm -&gt;&gt; +ar: è·å– args</span><br><span class="line">ar -&gt;&gt; ar: æœ‰çš„è§£æå™¨æ¶‰åŠ RequestBodyAdvice</span><br><span class="line">ar -&gt;&gt; container: æœ‰çš„è§£æå™¨æ¶‰åŠæ•°æ®ç»‘å®šç”ŸæˆModelæ•°æ®</span><br><span class="line">ar --&gt;&gt; -ihm: args</span><br><span class="line">ihm -&gt;&gt; ihm: method.invoke(bean,args) å¾—åˆ° returnValue</span><br><span class="line">ihm -&gt;&gt; +rh: å¤„ç† returnValue</span><br><span class="line">rh -&gt;&gt; rh: æœ‰çš„å¤„ç†å™¨æ¶‰åŠ ResponseBodyAdvice</span><br><span class="line">rh -&gt;&gt; +container: æ·»åŠ Modelæ•°æ®,å¤„ç†è§†å›¾å,æ˜¯å¦æ¸²æŸ“ç­‰</span><br><span class="line">container --&gt;&gt; -rh: </span><br><span class="line">rh --&gt;&gt; -ihm: </span><br><span class="line">ihm --&gt;&gt; -adapter: </span><br><span class="line">adapter -&gt;&gt; +container: è·å– ModelAndView</span><br><span class="line">container --&gt;&gt; -adapter: </span><br></pre></td></tr></table></figure><ul><li>RequestMappingHandlerAdapter åœ¨å›¾ä¸­ç¼©å†™ä¸º HandlerAdapter</li><li>HandlerMethodArgumentResolverComposite åœ¨å›¾ä¸­ç¼©å†™ä¸º ArgumentResolvers</li><li>HandlerMethodReturnValueHandlerComposite åœ¨å›¾ä¸­ç¼©å†™ä¸º ReturnValueHandlers</li></ul><h4 id="æ”¶è·ğŸ’¡-38"><a href="#æ”¶è·ğŸ’¡-38" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><ol><li>RequestMappingHandlerAdapter åˆå§‹åŒ–æ—¶ä¼šè§£æ @ControllerAdvice ä¸­çš„ @InitBinder æ–¹æ³•</li><li>RequestMappingHandlerAdapter ä¼šä»¥ç±»ä¸ºå•ä½ï¼Œåœ¨è¯¥ç±»é¦–æ¬¡ä½¿ç”¨æ—¶ï¼Œè§£ææ­¤ç±»çš„ @InitBinder æ–¹æ³•</li><li>ä»¥ä¸Šä¸¤ç§ @InitBinder çš„è§£æç»“æœéƒ½ä¼šç¼“å­˜æ¥é¿å…é‡å¤è§£æ</li><li>æ§åˆ¶å™¨æ–¹æ³•è°ƒç”¨æ—¶ï¼Œä¼šç»¼åˆåˆ©ç”¨æœ¬ç±»çš„ @InitBinder æ–¹æ³•å’Œ @ControllerAdvice ä¸­çš„ @InitBinder æ–¹æ³•åˆ›å»ºç»‘å®šå·¥å‚</li></ol><h3 id="25-æ§åˆ¶å™¨æ–¹æ³•æ‰§è¡Œæµç¨‹"><a href="#25-æ§åˆ¶å™¨æ–¹æ³•æ‰§è¡Œæµç¨‹" class="headerlink" title="25) æ§åˆ¶å™¨æ–¹æ³•æ‰§è¡Œæµç¨‹"></a>25) æ§åˆ¶å™¨æ–¹æ³•æ‰§è¡Œæµç¨‹</h3><h4 id="å›¾1"><a href="#å›¾1" class="headerlink" title="å›¾1"></a>å›¾1</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">classDiagram</span><br><span class="line">class ServletInvocableHandlerMethod &#123;</span><br><span class="line">+invokeAndHandle(ServletWebRequest,ModelAndViewContainer)</span><br><span class="line">&#125;</span><br><span class="line">HandlerMethod &lt;|-- ServletInvocableHandlerMethod</span><br><span class="line">HandlerMethod o-- bean</span><br><span class="line">HandlerMethod o-- method</span><br><span class="line">ServletInvocableHandlerMethod o-- WebDataBinderFactory</span><br><span class="line">ServletInvocableHandlerMethod o-- ParameterNameDiscoverer</span><br><span class="line">ServletInvocableHandlerMethod o-- HandlerMethodArgumentResolverComposite</span><br><span class="line">ServletInvocableHandlerMethod o-- HandlerMethodReturnValueHandlerComposite</span><br></pre></td></tr></table></figure><p>HandlerMethod éœ€è¦</p><ul><li>bean å³æ˜¯å“ªä¸ª Controller</li><li>method å³æ˜¯ Controller ä¸­çš„å“ªä¸ªæ–¹æ³•</li></ul><p>ServletInvocableHandlerMethod éœ€è¦</p><ul><li>WebDataBinderFactory è´Ÿè´£å¯¹è±¡ç»‘å®šã€ç±»å‹è½¬æ¢</li><li>ParameterNameDiscoverer è´Ÿè´£å‚æ•°åè§£æ</li><li>HandlerMethodArgumentResolverComposite è´Ÿè´£è§£æå‚æ•°</li><li>HandlerMethodReturnValueHandlerComposite è´Ÿè´£å¤„ç†è¿”å›å€¼</li></ul><h4 id="å›¾2"><a href="#å›¾2" class="headerlink" title="å›¾2"></a>å›¾2</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sequenceDiagram</span><br><span class="line">participant adapter as RequestMappingHandlerAdapter</span><br><span class="line">participant bf as WebDataBinderFactory</span><br><span class="line">participant mf as ModelFactory</span><br><span class="line">participant container as ModelAndViewContainer</span><br><span class="line">adapter -&gt;&gt; +bf: å‡†å¤‡ @InitBinder</span><br><span class="line">bf --&gt;&gt; -adapter: </span><br><span class="line">adapter -&gt;&gt; +mf: å‡†å¤‡ @ModelAttribute</span><br><span class="line">mf -&gt;&gt; +container: æ·»åŠ Modelæ•°æ®</span><br><span class="line">container --&gt;&gt; -mf: </span><br><span class="line">mf --&gt;&gt; -adapter: </span><br></pre></td></tr></table></figure><h4 id="å›¾3"><a href="#å›¾3" class="headerlink" title="å›¾3"></a>å›¾3</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sequenceDiagram</span><br><span class="line">participant adapter as RequestMappingHandlerAdapter</span><br><span class="line">participant ihm as ServletInvocableHandlerMethod</span><br><span class="line">participant ar as ArgumentResolvers</span><br><span class="line">participant rh as ReturnValueHandlers</span><br><span class="line">participant container as ModelAndViewContainer</span><br><span class="line"></span><br><span class="line">adapter -&gt;&gt; +ihm: invokeAndHandle</span><br><span class="line">ihm -&gt;&gt; +ar: è·å– args</span><br><span class="line">ar -&gt;&gt; ar: æœ‰çš„è§£æå™¨æ¶‰åŠ RequestBodyAdvice</span><br><span class="line">ar -&gt;&gt; container: æœ‰çš„è§£æå™¨æ¶‰åŠæ•°æ®ç»‘å®šç”Ÿæˆæ¨¡å‹æ•°æ®</span><br><span class="line">container --&gt;&gt; ar: </span><br><span class="line">ar --&gt;&gt; -ihm: args</span><br><span class="line">ihm -&gt;&gt; ihm: method.invoke(bean,args) å¾—åˆ° returnValue</span><br><span class="line">ihm -&gt;&gt; +rh: å¤„ç† returnValue</span><br><span class="line">rh -&gt;&gt; rh: æœ‰çš„å¤„ç†å™¨æ¶‰åŠ ResponseBodyAdvice</span><br><span class="line">rh -&gt;&gt; +container: æ·»åŠ Modelæ•°æ®,å¤„ç†è§†å›¾å,æ˜¯å¦æ¸²æŸ“ç­‰</span><br><span class="line">container --&gt;&gt; -rh: </span><br><span class="line">rh --&gt;&gt; -ihm: </span><br><span class="line">ihm --&gt;&gt; -adapter: </span><br><span class="line">adapter -&gt;&gt; +container: è·å– ModelAndView</span><br><span class="line">container --&gt;&gt; -adapter: </span><br></pre></td></tr></table></figure><h3 id="26-ControllerAdvice-ä¹‹-ModelAttribute"><a href="#26-ControllerAdvice-ä¹‹-ModelAttribute" class="headerlink" title="26) @ControllerAdvice ä¹‹ @ModelAttribute"></a>26) @ControllerAdvice ä¹‹ @ModelAttribute</h3><h4 id="æ¼”ç¤º-å‡†å¤‡-ModelAttribute"><a href="#æ¼”ç¤º-å‡†å¤‡-ModelAttribute" class="headerlink" title="æ¼”ç¤º - å‡†å¤‡ @ModelAttribute"></a>æ¼”ç¤º - å‡†å¤‡ @ModelAttribute</h4><h5 id="ä»£ç å‚è€ƒ-33"><a href="#ä»£ç å‚è€ƒ-33" class="headerlink" title="ä»£ç å‚è€ƒ"></a>ä»£ç å‚è€ƒ</h5><p><strong>com.itheima.a26</strong> åŒ…</p><p><strong>å‡†å¤‡ @ModelAttribute</strong> åœ¨æ•´ä¸ª HandlerAdapter è°ƒç”¨è¿‡ç¨‹ä¸­æ‰€å¤„çš„ä½ç½®</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sequenceDiagram</span><br><span class="line">participant adapter as HandlerAdapter</span><br><span class="line">participant bf as WebDataBinderFactory</span><br><span class="line">participant mf as ModelFactory</span><br><span class="line">participant ihm as ServletInvocableHandlerMethod</span><br><span class="line">participant ar as ArgumentResolvers </span><br><span class="line">participant rh as ReturnValueHandlers</span><br><span class="line">participant container as ModelAndViewContainer</span><br><span class="line"></span><br><span class="line">adapter -&gt;&gt; +bf: å‡†å¤‡ @InitBinder</span><br><span class="line">bf --&gt;&gt; -adapter: </span><br><span class="line">rect rgb(200, 150, 255)</span><br><span class="line">adapter -&gt;&gt; +mf: å‡†å¤‡ @ModelAttribute</span><br><span class="line">mf -&gt;&gt; +container: æ·»åŠ Modelæ•°æ®</span><br><span class="line">container --&gt;&gt; -mf: </span><br><span class="line">mf --&gt;&gt; -adapter: </span><br><span class="line">end</span><br><span class="line">adapter -&gt;&gt; +ihm: invokeAndHandle</span><br><span class="line">ihm -&gt;&gt; +ar: è·å– args</span><br><span class="line">ar -&gt;&gt; ar: æœ‰çš„è§£æå™¨æ¶‰åŠ RequestBodyAdvice</span><br><span class="line">ar -&gt;&gt; container: æœ‰çš„è§£æå™¨æ¶‰åŠæ•°æ®ç»‘å®šç”ŸæˆModelæ•°æ®</span><br><span class="line">ar --&gt;&gt; -ihm: args</span><br><span class="line">ihm -&gt;&gt; ihm: method.invoke(bean,args) å¾—åˆ° returnValue</span><br><span class="line">ihm -&gt;&gt; +rh: å¤„ç† returnValue</span><br><span class="line">rh -&gt;&gt; rh: æœ‰çš„å¤„ç†å™¨æ¶‰åŠ ResponseBodyAdvice</span><br><span class="line">rh -&gt;&gt; +container: æ·»åŠ Modelæ•°æ®,å¤„ç†è§†å›¾å,æ˜¯å¦æ¸²æŸ“ç­‰</span><br><span class="line">container --&gt;&gt; -rh: </span><br><span class="line">rh --&gt;&gt; -ihm: </span><br><span class="line">ihm --&gt;&gt; -adapter: </span><br><span class="line">adapter -&gt;&gt; +container: è·å– ModelAndView</span><br><span class="line">container --&gt;&gt; -adapter: </span><br></pre></td></tr></table></figure><h4 id="æ”¶è·ğŸ’¡-39"><a href="#æ”¶è·ğŸ’¡-39" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><ol><li>RequestMappingHandlerAdapter åˆå§‹åŒ–æ—¶ä¼šè§£æ @ControllerAdvice ä¸­çš„ @ModelAttribute æ–¹æ³•</li><li>RequestMappingHandlerAdapter ä¼šä»¥ç±»ä¸ºå•ä½ï¼Œåœ¨è¯¥ç±»é¦–æ¬¡ä½¿ç”¨æ—¶ï¼Œè§£ææ­¤ç±»çš„ @ModelAttribute æ–¹æ³•</li><li>ä»¥ä¸Šä¸¤ç§ @ModelAttribute çš„è§£æç»“æœéƒ½ä¼šç¼“å­˜æ¥é¿å…é‡å¤è§£æ</li><li>æ§åˆ¶å™¨æ–¹æ³•è°ƒç”¨æ—¶ï¼Œä¼šç»¼åˆåˆ©ç”¨æœ¬ç±»çš„ @ModelAttribute æ–¹æ³•å’Œ @ControllerAdvice ä¸­çš„ @ModelAttribute æ–¹æ³•åˆ›å»ºæ¨¡å‹å·¥å‚</li></ol><h3 id="27-è¿”å›å€¼å¤„ç†å™¨"><a href="#27-è¿”å›å€¼å¤„ç†å™¨" class="headerlink" title="27) è¿”å›å€¼å¤„ç†å™¨"></a>27) è¿”å›å€¼å¤„ç†å™¨</h3><h4 id="æ¼”ç¤º-å¸¸è§è¿”å›å€¼å¤„ç†å™¨"><a href="#æ¼”ç¤º-å¸¸è§è¿”å›å€¼å¤„ç†å™¨" class="headerlink" title="æ¼”ç¤º - å¸¸è§è¿”å›å€¼å¤„ç†å™¨"></a>æ¼”ç¤º - å¸¸è§è¿”å›å€¼å¤„ç†å™¨</h4><h5 id="ä»£ç å‚è€ƒ-34"><a href="#ä»£ç å‚è€ƒ-34" class="headerlink" title="ä»£ç å‚è€ƒ"></a>ä»£ç å‚è€ƒ</h5><p><strong>com.itheima.a27</strong> åŒ…</p><h4 id="æ”¶è·ğŸ’¡-40"><a href="#æ”¶è·ğŸ’¡-40" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><ol><li>å¸¸è§çš„è¿”å›å€¼å¤„ç†å™¨<ul><li>ModelAndViewï¼Œåˆ†åˆ«è·å–å…¶æ¨¡å‹å’Œè§†å›¾åï¼Œæ”¾å…¥ ModelAndViewContainer</li><li>è¿”å›å€¼ç±»å‹ä¸º String æ—¶ï¼ŒæŠŠå®ƒå½“åšè§†å›¾åï¼Œæ”¾å…¥ ModelAndViewContainer</li><li>è¿”å›å€¼æ·»åŠ äº† @ModelAttribute æ³¨è§£æ—¶ï¼Œå°†è¿”å›å€¼ä½œä¸ºæ¨¡å‹ï¼Œæ”¾å…¥ ModelAndViewContainer<ul><li>æ­¤æ—¶éœ€æ‰¾åˆ°é»˜è®¤è§†å›¾å</li></ul></li><li>è¿”å›å€¼çœç•¥ @ModelAttribute æ³¨è§£ä¸”è¿”å›éç®€å•ç±»å‹æ—¶ï¼Œå°†è¿”å›å€¼ä½œä¸ºæ¨¡å‹ï¼Œæ”¾å…¥ ModelAndViewContainer<ul><li>æ­¤æ—¶éœ€æ‰¾åˆ°é»˜è®¤è§†å›¾å</li></ul></li><li>è¿”å›å€¼ç±»å‹ä¸º ResponseEntity æ—¶<ul><li>æ­¤æ—¶èµ° MessageConverterï¼Œå¹¶è®¾ç½® ModelAndViewContainer.requestHandled ä¸º true</li></ul></li><li>è¿”å›å€¼ç±»å‹ä¸º HttpHeaders æ—¶<ul><li>ä¼šè®¾ç½® ModelAndViewContainer.requestHandled ä¸º true</li></ul></li><li>è¿”å›å€¼æ·»åŠ äº† @ResponseBody æ³¨è§£æ—¶<ul><li>æ­¤æ—¶èµ° MessageConverterï¼Œå¹¶è®¾ç½® ModelAndViewContainer.requestHandled ä¸º true</li></ul></li></ul></li><li>ç»„åˆæ¨¡å¼åœ¨ Spring ä¸­çš„ä½“ç° + 1</li></ol><h3 id="28-MessageConverter"><a href="#28-MessageConverter" class="headerlink" title="28) MessageConverter"></a>28) MessageConverter</h3><h4 id="æ¼”ç¤º-MessageConverter-çš„ä½œç”¨"><a href="#æ¼”ç¤º-MessageConverter-çš„ä½œç”¨" class="headerlink" title="æ¼”ç¤º - MessageConverter çš„ä½œç”¨"></a>æ¼”ç¤º - MessageConverter çš„ä½œç”¨</h4><h5 id="ä»£ç å‚è€ƒ-35"><a href="#ä»£ç å‚è€ƒ-35" class="headerlink" title="ä»£ç å‚è€ƒ"></a>ä»£ç å‚è€ƒ</h5><p><strong>com.itheima.a28.A28</strong></p><h4 id="æ”¶è·ğŸ’¡-41"><a href="#æ”¶è·ğŸ’¡-41" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><ol><li>MessageConverter çš„ä½œç”¨<ul><li>@ResponseBody æ˜¯è¿”å›å€¼å¤„ç†å™¨è§£æçš„</li><li>ä½†å…·ä½“è½¬æ¢å·¥ä½œæ˜¯ MessageConverter åšçš„</li></ul></li><li>å¦‚ä½•é€‰æ‹© MediaType<ul><li>é¦–å…ˆçœ‹ @RequestMapping ä¸Šæœ‰æ²¡æœ‰æŒ‡å®š</li><li>å…¶æ¬¡çœ‹ request çš„ Accept å¤´æœ‰æ²¡æœ‰æŒ‡å®š</li><li>æœ€åæŒ‰ MessageConverter çš„é¡ºåº, è°èƒ½è°å…ˆè½¬æ¢</li></ul></li></ol><h3 id="29-ControllerAdvice-ä¹‹-ResponseBodyAdvice"><a href="#29-ControllerAdvice-ä¹‹-ResponseBodyAdvice" class="headerlink" title="29) @ControllerAdvice ä¹‹ ResponseBodyAdvice"></a>29) @ControllerAdvice ä¹‹ ResponseBodyAdvice</h3><h4 id="æ¼”ç¤º-ResponseBodyAdvice-å¢å¼º"><a href="#æ¼”ç¤º-ResponseBodyAdvice-å¢å¼º" class="headerlink" title="æ¼”ç¤º - ResponseBodyAdvice å¢å¼º"></a>æ¼”ç¤º - ResponseBodyAdvice å¢å¼º</h4><h5 id="ä»£ç å‚è€ƒ-36"><a href="#ä»£ç å‚è€ƒ-36" class="headerlink" title="ä»£ç å‚è€ƒ"></a>ä»£ç å‚è€ƒ</h5><p><strong>com.itheima.a29</strong> åŒ…</p><p><strong>ResponseBodyAdvice å¢å¼º</strong> åœ¨æ•´ä¸ª HandlerAdapter è°ƒç”¨è¿‡ç¨‹ä¸­æ‰€å¤„çš„ä½ç½®</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sequenceDiagram</span><br><span class="line">participant adapter as HandlerAdapter</span><br><span class="line">participant bf as WebDataBinderFactory</span><br><span class="line">participant mf as ModelFactory</span><br><span class="line">participant ihm as ServletInvocableHandlerMethod</span><br><span class="line">participant ar as ArgumentResolvers </span><br><span class="line">participant rh as ReturnValueHandlers</span><br><span class="line">participant container as ModelAndViewContainer</span><br><span class="line"></span><br><span class="line">adapter -&gt;&gt; +bf: å‡†å¤‡ @InitBinder</span><br><span class="line">bf --&gt;&gt; -adapter: </span><br><span class="line">adapter -&gt;&gt; +mf: å‡†å¤‡ @ModelAttribute</span><br><span class="line">mf -&gt;&gt; +container: æ·»åŠ Modelæ•°æ®</span><br><span class="line">container --&gt;&gt; -mf: </span><br><span class="line">mf --&gt;&gt; -adapter: </span><br><span class="line">adapter -&gt;&gt; +ihm: invokeAndHandle</span><br><span class="line">ihm -&gt;&gt; +ar: è·å– args</span><br><span class="line">ar -&gt;&gt; ar: æœ‰çš„è§£æå™¨æ¶‰åŠ RequestBodyAdvice</span><br><span class="line">ar -&gt;&gt; container: æœ‰çš„è§£æå™¨æ¶‰åŠæ•°æ®ç»‘å®šç”ŸæˆModelæ•°æ®</span><br><span class="line">ar --&gt;&gt; -ihm: args</span><br><span class="line">ihm -&gt;&gt; ihm: method.invoke(bean,args) å¾—åˆ° returnValue</span><br><span class="line">ihm -&gt;&gt; +rh: å¤„ç† returnValue</span><br><span class="line">rect rgb(200, 150, 255)</span><br><span class="line">rh -&gt;&gt; rh: æœ‰çš„å¤„ç†å™¨æ¶‰åŠ ResponseBodyAdvice</span><br><span class="line">end</span><br><span class="line">rh -&gt;&gt; +container: æ·»åŠ Modelæ•°æ®,å¤„ç†è§†å›¾å,æ˜¯å¦æ¸²æŸ“ç­‰</span><br><span class="line">container --&gt;&gt; -rh: </span><br><span class="line">rh --&gt;&gt; -ihm: </span><br><span class="line">ihm --&gt;&gt; -adapter: </span><br><span class="line">adapter -&gt;&gt; +container: è·å– ModelAndView</span><br><span class="line">container --&gt;&gt; -adapter: </span><br></pre></td></tr></table></figure><h4 id="æ”¶è·ğŸ’¡-42"><a href="#æ”¶è·ğŸ’¡-42" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><ol><li>ResponseBodyAdvice è¿”å›å“åº”ä½“å‰åŒ…è£…</li></ol><h3 id="30-å¼‚å¸¸è§£æå™¨"><a href="#30-å¼‚å¸¸è§£æå™¨" class="headerlink" title="30) å¼‚å¸¸è§£æå™¨"></a>30) å¼‚å¸¸è§£æå™¨</h3><h4 id="æ¼”ç¤º-ExceptionHandlerExceptionResolver"><a href="#æ¼”ç¤º-ExceptionHandlerExceptionResolver" class="headerlink" title="æ¼”ç¤º - ExceptionHandlerExceptionResolver"></a>æ¼”ç¤º - ExceptionHandlerExceptionResolver</h4><h5 id="ä»£ç å‚è€ƒ-37"><a href="#ä»£ç å‚è€ƒ-37" class="headerlink" title="ä»£ç å‚è€ƒ"></a>ä»£ç å‚è€ƒ</h5><p><strong>com.itheima.a30.A30</strong></p><h4 id="æ”¶è·ğŸ’¡-43"><a href="#æ”¶è·ğŸ’¡-43" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><ol><li>å®ƒèƒ½å¤Ÿé‡ç”¨å‚æ•°è§£æå™¨ã€è¿”å›å€¼å¤„ç†å™¨ï¼Œå®ç°ç»„ä»¶é‡ç”¨</li><li>å®ƒèƒ½å¤Ÿæ”¯æŒåµŒå¥—å¼‚å¸¸</li></ol><h3 id="31-ControllerAdvice-ä¹‹-ExceptionHandler"><a href="#31-ControllerAdvice-ä¹‹-ExceptionHandler" class="headerlink" title="31) @ControllerAdvice ä¹‹ @ExceptionHandler"></a>31) @ControllerAdvice ä¹‹ @ExceptionHandler</h3><h4 id="æ¼”ç¤º-å‡†å¤‡-ExceptionHandler"><a href="#æ¼”ç¤º-å‡†å¤‡-ExceptionHandler" class="headerlink" title="æ¼”ç¤º - å‡†å¤‡ @ExceptionHandler"></a>æ¼”ç¤º - å‡†å¤‡ @ExceptionHandler</h4><h5 id="ä»£ç å‚è€ƒ-38"><a href="#ä»£ç å‚è€ƒ-38" class="headerlink" title="ä»£ç å‚è€ƒ"></a>ä»£ç å‚è€ƒ</h5><p><strong>com.itheima.a31</strong> åŒ…</p><h4 id="æ”¶è·ğŸ’¡-44"><a href="#æ”¶è·ğŸ’¡-44" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><ol><li>ExceptionHandlerExceptionResolver åˆå§‹åŒ–æ—¶ä¼šè§£æ @ControllerAdvice ä¸­çš„ @ExceptionHandler æ–¹æ³•</li><li>ExceptionHandlerExceptionResolver ä¼šä»¥ç±»ä¸ºå•ä½ï¼Œåœ¨è¯¥ç±»é¦–æ¬¡å¤„ç†å¼‚å¸¸æ—¶ï¼Œè§£ææ­¤ç±»çš„ @ExceptionHandler æ–¹æ³•</li><li>ä»¥ä¸Šä¸¤ç§ @ExceptionHandler çš„è§£æç»“æœéƒ½ä¼šç¼“å­˜æ¥é¿å…é‡å¤è§£æ</li></ol><h3 id="32-Tomcat-å¼‚å¸¸å¤„ç†"><a href="#32-Tomcat-å¼‚å¸¸å¤„ç†" class="headerlink" title="32) Tomcat å¼‚å¸¸å¤„ç†"></a>32) Tomcat å¼‚å¸¸å¤„ç†</h3><ul><li><p>æˆ‘ä»¬çŸ¥é“ @ExceptionHandler åªèƒ½å¤„ç†å‘ç”Ÿåœ¨ mvc æµç¨‹ä¸­çš„å¼‚å¸¸ï¼Œä¾‹å¦‚æ§åˆ¶å™¨å†…ã€æ‹¦æˆªå™¨å†…ï¼Œé‚£ä¹ˆå¦‚æœæ˜¯ Filter å‡ºç°äº†å¼‚å¸¸ï¼Œå¦‚ä½•è¿›è¡Œå¤„ç†å‘¢ï¼Ÿ</p></li><li><p>åœ¨ Spring Boot ä¸­ï¼Œæ˜¯è¿™ä¹ˆå®ç°çš„ï¼š</p><ol><li>å› ä¸ºå†…åµŒäº† Tomcat å®¹å™¨ï¼Œå› æ­¤å¯ä»¥é…ç½® Tomcat çš„é”™è¯¯é¡µé¢ï¼ŒFilter ä¸ é”™è¯¯é¡µé¢ä¹‹é—´æ˜¯é€šè¿‡è¯·æ±‚è½¬å‘è·³è½¬çš„ï¼Œå¯ä»¥åœ¨è¿™é‡Œåšæ‰‹è„š</li><li>å…ˆé€šè¿‡ ErrorPageRegistrarBeanPostProcessor è¿™ä¸ªåå¤„ç†å™¨é…ç½®é”™è¯¯é¡µé¢åœ°å€ï¼Œé»˜è®¤ä¸º <code>/error</code> ä¹Ÿå¯ä»¥é€šè¿‡ <code>$&#123;server.error.path&#125;</code> è¿›è¡Œé…ç½®</li><li>å½“ Filter å‘ç”Ÿå¼‚å¸¸æ—¶ï¼Œä¸ä¼šèµ° Spring æµç¨‹ï¼Œä½†ä¼šèµ° Tomcat çš„é”™è¯¯å¤„ç†ï¼Œäºæ˜¯å°±å¸Œæœ›è½¬å‘è‡³ <code>/error</code> è¿™ä¸ªåœ°å€<ul><li>å½“ç„¶ï¼Œå¦‚æœæ²¡æœ‰ @ExceptionHandlerï¼Œé‚£ä¹ˆæœ€ç»ˆä¹Ÿä¼šèµ°åˆ° Tomcat çš„é”™è¯¯å¤„ç†</li></ul></li><li>Spring Boot åˆæä¾›äº†ä¸€ä¸ª BasicErrorControllerï¼Œå®ƒå°±æ˜¯ä¸€ä¸ªæ ‡å‡† @Controllerï¼Œ@RequestMapping é…ç½®ä¸º <code>/error</code>ï¼Œæ‰€ä»¥å¤„ç†å¼‚å¸¸çš„èŒè´£å°±åˆå›åˆ°äº† Spring</li><li>å¼‚å¸¸ä¿¡æ¯ç”±äºä¼šè¢« Tomcat æ”¾å…¥ request ä½œç”¨åŸŸï¼Œå› æ­¤ BasicErrorController é‡Œä¹Ÿèƒ½è·å–åˆ°</li><li>å…·ä½“å¼‚å¸¸ä¿¡æ¯ä¼šç”± DefaultErrorAttributes å°è£…å¥½</li><li>BasicErrorController é€šè¿‡ Accept å¤´åˆ¤æ–­éœ€è¦ç”Ÿæˆå“ªç§ MediaType çš„å“åº”<ul><li>å¦‚æœè¦çš„ä¸æ˜¯ text&#x2F;htmlï¼Œèµ° MessageConverter æµç¨‹</li><li>å¦‚æœéœ€è¦ text&#x2F;htmlï¼Œèµ° mvc æµç¨‹ï¼Œæ­¤æ—¶åˆåˆ†ä¸¤ç§æƒ…å†µ<ul><li>é…ç½®äº† ErrorViewResolverï¼Œæ ¹æ®çŠ¶æ€ç å»æ‰¾ View</li><li>æ²¡é…ç½®æˆ–æ²¡æ‰¾åˆ°ï¼Œç”¨ BeanNameViewResolver æ ¹æ®ä¸€ä¸ªå›ºå®šä¸º error çš„åå­—æ‰¾åˆ° Viewï¼Œå³æ‰€è°“çš„ WhitelabelErrorView</li></ul></li></ul></li></ol></li></ul><blockquote><p><em><strong>è¯„ä»·</strong></em></p><ul><li>ä¸€ä¸ªé”™è¯¯å¤„ç†æå¾—è¿™ä¹ˆå¤æ‚ï¼Œå°±é—®æ¶å¿ƒä¸ï¼Ÿ</li></ul></blockquote><h4 id="æ¼”ç¤º1-é”™è¯¯é¡µå¤„ç†"><a href="#æ¼”ç¤º1-é”™è¯¯é¡µå¤„ç†" class="headerlink" title="æ¼”ç¤º1 - é”™è¯¯é¡µå¤„ç†"></a>æ¼”ç¤º1 - é”™è¯¯é¡µå¤„ç†</h4><h5 id="å…³é”®ä»£ç -1"><a href="#å…³é”®ä»£ç -1" class="headerlink" title="å…³é”®ä»£ç "></a>å…³é”®ä»£ç </h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Bean</span> <span class="comment">// â¬…ï¸ä¿®æ”¹äº† Tomcat æœåŠ¡å™¨é»˜è®¤é”™è¯¯åœ°å€, å‡ºé”™æ—¶ä½¿ç”¨è¯·æ±‚è½¬å‘æ–¹å¼è·³è½¬</span></span><br><span class="line"><span class="keyword">public</span> ErrorPageRegistrar <span class="title function_">errorPageRegistrar</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> webServerFactory -&gt; webServerFactory.addErrorPages(<span class="keyword">new</span> <span class="title class_">ErrorPage</span>(<span class="string">&quot;/error&quot;</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Bean</span> <span class="comment">// â¬…ï¸TomcatServletWebServerFactory åˆå§‹åŒ–å‰ç”¨å®ƒå¢å¼º, æ³¨å†Œæ‰€æœ‰ ErrorPageRegistrar</span></span><br><span class="line"><span class="keyword">public</span> ErrorPageRegistrarBeanPostProcessor <span class="title function_">errorPageRegistrarBeanPostProcessor</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ErrorPageRegistrarBeanPostProcessor</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ”¶è·ğŸ’¡-45"><a href="#æ”¶è·ğŸ’¡-45" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><ol><li>Tomcat çš„é”™è¯¯é¡µå¤„ç†æ‰‹æ®µ</li></ol><h4 id="æ¼”ç¤º2-BasicErrorController"><a href="#æ¼”ç¤º2-BasicErrorController" class="headerlink" title="æ¼”ç¤º2 - BasicErrorController"></a>æ¼”ç¤º2 - BasicErrorController</h4><h5 id="å…³é”®ä»£ç -2"><a href="#å…³é”®ä»£ç -2" class="headerlink" title="å…³é”®ä»£ç "></a>å…³é”®ä»£ç </h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Bean</span> <span class="comment">// â¬…ï¸ErrorProperties å°è£…ç¯å¢ƒé”®å€¼, ErrorAttributes æ§åˆ¶æœ‰å“ªäº›é”™è¯¯ä¿¡æ¯</span></span><br><span class="line"><span class="keyword">public</span> BasicErrorController <span class="title function_">basicErrorController</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">ErrorProperties</span> <span class="variable">errorProperties</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ErrorProperties</span>();</span><br><span class="line">    errorProperties.setIncludeException(<span class="literal">true</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">BasicErrorController</span>(<span class="keyword">new</span> <span class="title class_">DefaultErrorAttributes</span>(), errorProperties);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Bean</span> <span class="comment">// â¬…ï¸åç§°ä¸º error çš„è§†å›¾, ä½œä¸º BasicErrorController çš„ text/html å“åº”ç»“æœ</span></span><br><span class="line"><span class="keyword">public</span> View <span class="title function_">error</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">View</span>() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">render</span><span class="params">(</span></span><br><span class="line"><span class="params">            Map&lt;String, ?&gt; model, </span></span><br><span class="line"><span class="params">            HttpServletRequest request, </span></span><br><span class="line"><span class="params">            HttpServletResponse response</span></span><br><span class="line"><span class="params">        )</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">            System.out.println(model);</span><br><span class="line">            response.setContentType(<span class="string">&quot;text/html;charset=utf-8&quot;</span>);</span><br><span class="line">            response.getWriter().print(<span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">                    &lt;h3&gt;æœåŠ¡å™¨å†…éƒ¨é”™è¯¯&lt;/h3&gt;</span></span><br><span class="line"><span class="string">                    &quot;&quot;&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Bean</span> <span class="comment">// â¬…ï¸æ”¶é›†å®¹å™¨ä¸­æ‰€æœ‰ View å¯¹è±¡, bean çš„åå­—ä½œä¸ºè§†å›¾å</span></span><br><span class="line"><span class="keyword">public</span> ViewResolver <span class="title function_">viewResolver</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">BeanNameViewResolver</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ”¶è·ğŸ’¡-46"><a href="#æ”¶è·ğŸ’¡-46" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><ol><li>Spring Boot ä¸­ BasicErrorController å¦‚ä½•å·¥ä½œ</li></ol><h3 id="33-BeanNameUrlHandlerMapping-ä¸-SimpleControllerHandlerAdapter"><a href="#33-BeanNameUrlHandlerMapping-ä¸-SimpleControllerHandlerAdapter" class="headerlink" title="33) BeanNameUrlHandlerMapping ä¸ SimpleControllerHandlerAdapter"></a>33) BeanNameUrlHandlerMapping ä¸ SimpleControllerHandlerAdapter</h3><h4 id="æ¼”ç¤º-æœ¬ç»„æ˜ å°„å™¨å’Œé€‚é…å™¨"><a href="#æ¼”ç¤º-æœ¬ç»„æ˜ å°„å™¨å’Œé€‚é…å™¨" class="headerlink" title="æ¼”ç¤º - æœ¬ç»„æ˜ å°„å™¨å’Œé€‚é…å™¨"></a>æ¼”ç¤º - æœ¬ç»„æ˜ å°„å™¨å’Œé€‚é…å™¨</h4><h5 id="å…³é”®ä»£ç -3"><a href="#å…³é”®ä»£ç -3" class="headerlink" title="å…³é”®ä»£ç "></a>å…³é”®ä»£ç </h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> BeanNameUrlHandlerMapping <span class="title function_">beanNameUrlHandlerMapping</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">BeanNameUrlHandlerMapping</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> SimpleControllerHandlerAdapter <span class="title function_">simpleControllerHandlerAdapter</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">SimpleControllerHandlerAdapter</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Bean(&quot;/c3&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Controller <span class="title function_">controller3</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (request, response) -&gt; &#123;</span><br><span class="line">        response.getWriter().print(<span class="string">&quot;this is c3&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ”¶è·ğŸ’¡-47"><a href="#æ”¶è·ğŸ’¡-47" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><ol><li>BeanNameUrlHandlerMappingï¼Œä»¥ &#x2F; å¼€å¤´çš„ bean çš„åå­—ä¼šè¢«å½“ä½œæ˜ å°„è·¯å¾„</li><li>è¿™äº› bean æœ¬èº«å½“ä½œ handlerï¼Œè¦æ±‚å®ç° Controller æ¥å£</li><li>SimpleControllerHandlerAdapterï¼Œè°ƒç”¨ handler</li><li>æ¨¡æ‹Ÿå®ç°è¿™ç»„æ˜ å°„å™¨å’Œé€‚é…å™¨</li></ol><h3 id="34-RouterFunctionMapping-ä¸-HandlerFunctionAdapter"><a href="#34-RouterFunctionMapping-ä¸-HandlerFunctionAdapter" class="headerlink" title="34) RouterFunctionMapping ä¸ HandlerFunctionAdapter"></a>34) RouterFunctionMapping ä¸ HandlerFunctionAdapter</h3><h4 id="æ¼”ç¤º-æœ¬ç»„æ˜ å°„å™¨å’Œé€‚é…å™¨-1"><a href="#æ¼”ç¤º-æœ¬ç»„æ˜ å°„å™¨å’Œé€‚é…å™¨-1" class="headerlink" title="æ¼”ç¤º - æœ¬ç»„æ˜ å°„å™¨å’Œé€‚é…å™¨"></a>æ¼”ç¤º - æœ¬ç»„æ˜ å°„å™¨å’Œé€‚é…å™¨</h4><h5 id="å…³é”®ä»£ç -4"><a href="#å…³é”®ä»£ç -4" class="headerlink" title="å…³é”®ä»£ç "></a>å…³é”®ä»£ç </h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> RouterFunctionMapping <span class="title function_">routerFunctionMapping</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">RouterFunctionMapping</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> HandlerFunctionAdapter <span class="title function_">handlerFunctionAdapter</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">HandlerFunctionAdapter</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> RouterFunction&lt;ServerResponse&gt; <span class="title function_">r1</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">//           â¬‡ï¸æ˜ å°„æ¡ä»¶   â¬‡ï¸handler</span></span><br><span class="line">    <span class="keyword">return</span> route(GET(<span class="string">&quot;/r1&quot;</span>), request -&gt; ok().body(<span class="string">&quot;this is r1&quot;</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ”¶è·ğŸ’¡-48"><a href="#æ”¶è·ğŸ’¡-48" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><ol><li>RouterFunctionMapping, é€šè¿‡ RequestPredicate æ¡ä»¶æ˜ å°„</li><li>handler è¦å®ç° HandlerFunction æ¥å£</li><li>HandlerFunctionAdapter, è°ƒç”¨ handler</li></ol><h3 id="35-SimpleUrlHandlerMapping-ä¸-HttpRequestHandlerAdapter"><a href="#35-SimpleUrlHandlerMapping-ä¸-HttpRequestHandlerAdapter" class="headerlink" title="35) SimpleUrlHandlerMapping ä¸ HttpRequestHandlerAdapter"></a>35) SimpleUrlHandlerMapping ä¸ HttpRequestHandlerAdapter</h3><h4 id="æ¼”ç¤º1-æœ¬ç»„æ˜ å°„å™¨å’Œé€‚é…å™¨"><a href="#æ¼”ç¤º1-æœ¬ç»„æ˜ å°„å™¨å’Œé€‚é…å™¨" class="headerlink" title="æ¼”ç¤º1 - æœ¬ç»„æ˜ å°„å™¨å’Œé€‚é…å™¨"></a>æ¼”ç¤º1 - æœ¬ç»„æ˜ å°„å™¨å’Œé€‚é…å™¨</h4><h5 id="ä»£ç å‚è€ƒ-39"><a href="#ä»£ç å‚è€ƒ-39" class="headerlink" title="ä»£ç å‚è€ƒ"></a>ä»£ç å‚è€ƒ</h5><p><strong>org.springframework.boot.autoconfigure.web.servlet.A35</strong></p><h5 id="å…³é”®ä»£ç -5"><a href="#å…³é”®ä»£ç -5" class="headerlink" title="å…³é”®ä»£ç "></a>å…³é”®ä»£ç </h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> SimpleUrlHandlerMapping <span class="title function_">simpleUrlHandlerMapping</span><span class="params">(ApplicationContext context)</span> &#123;</span><br><span class="line">    <span class="type">SimpleUrlHandlerMapping</span> <span class="variable">handlerMapping</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleUrlHandlerMapping</span>();</span><br><span class="line">    Map&lt;String, ResourceHttpRequestHandler&gt; map </span><br><span class="line">        = context.getBeansOfType(ResourceHttpRequestHandler.class);</span><br><span class="line">    handlerMapping.setUrlMap(map);</span><br><span class="line">    <span class="keyword">return</span> handlerMapping;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> HttpRequestHandlerAdapter <span class="title function_">httpRequestHandlerAdapter</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">HttpRequestHandlerAdapter</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Bean(&quot;/**&quot;)</span></span><br><span class="line"><span class="keyword">public</span> ResourceHttpRequestHandler <span class="title function_">handler1</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">ResourceHttpRequestHandler</span> <span class="variable">handler</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ResourceHttpRequestHandler</span>();</span><br><span class="line">    handler.setLocations(List.of(<span class="keyword">new</span> <span class="title class_">ClassPathResource</span>(<span class="string">&quot;static/&quot;</span>)));</span><br><span class="line">    <span class="keyword">return</span> handler;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Bean(&quot;/img/**&quot;)</span></span><br><span class="line"><span class="keyword">public</span> ResourceHttpRequestHandler <span class="title function_">handler2</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">ResourceHttpRequestHandler</span> <span class="variable">handler</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ResourceHttpRequestHandler</span>();</span><br><span class="line">    handler.setLocations(List.of(<span class="keyword">new</span> <span class="title class_">ClassPathResource</span>(<span class="string">&quot;images/&quot;</span>)));</span><br><span class="line">    <span class="keyword">return</span> handler;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ”¶è·ğŸ’¡-49"><a href="#æ”¶è·ğŸ’¡-49" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><ol><li>SimpleUrlHandlerMapping ä¸ä¼šåœ¨åˆå§‹åŒ–æ—¶æ”¶é›†æ˜ å°„ä¿¡æ¯ï¼Œéœ€è¦æ‰‹åŠ¨æ”¶é›†</li><li>SimpleUrlHandlerMapping æ˜ å°„è·¯å¾„</li><li>ResourceHttpRequestHandler ä½œä¸ºé™æ€èµ„æº handler</li><li>HttpRequestHandlerAdapter, è°ƒç”¨æ­¤ handler</li></ol><h4 id="æ¼”ç¤º2-é™æ€èµ„æºè§£æä¼˜åŒ–"><a href="#æ¼”ç¤º2-é™æ€èµ„æºè§£æä¼˜åŒ–" class="headerlink" title="æ¼”ç¤º2 - é™æ€èµ„æºè§£æä¼˜åŒ–"></a>æ¼”ç¤º2 - é™æ€èµ„æºè§£æä¼˜åŒ–</h4><h5 id="å…³é”®ä»£ç -6"><a href="#å…³é”®ä»£ç -6" class="headerlink" title="å…³é”®ä»£ç "></a>å…³é”®ä»£ç </h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Bean(&quot;/**&quot;)</span></span><br><span class="line"><span class="keyword">public</span> ResourceHttpRequestHandler <span class="title function_">handler1</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">ResourceHttpRequestHandler</span> <span class="variable">handler</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ResourceHttpRequestHandler</span>();</span><br><span class="line">    handler.setLocations(List.of(<span class="keyword">new</span> <span class="title class_">ClassPathResource</span>(<span class="string">&quot;static/&quot;</span>)));</span><br><span class="line">    handler.setResourceResolvers(List.of(</span><br><span class="line">        <span class="comment">// â¬‡ï¸ç¼“å­˜ä¼˜åŒ–</span></span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">CachingResourceResolver</span>(<span class="keyword">new</span> <span class="title class_">ConcurrentMapCache</span>(<span class="string">&quot;cache1&quot;</span>)),</span><br><span class="line">        <span class="comment">// â¬‡ï¸å‹ç¼©ä¼˜åŒ–</span></span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">EncodedResourceResolver</span>(),</span><br><span class="line">        <span class="comment">// â¬‡ï¸åŸå§‹èµ„æºè§£æ</span></span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">PathResourceResolver</span>()</span><br><span class="line">    ));</span><br><span class="line">    <span class="keyword">return</span> handler;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ”¶è·ğŸ’¡-50"><a href="#æ”¶è·ğŸ’¡-50" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><ol><li>è´£ä»»é“¾æ¨¡å¼ä½“ç°</li><li>å‹ç¼©æ–‡ä»¶éœ€è¦æ‰‹åŠ¨ç”Ÿæˆ</li></ol><h4 id="æ¼”ç¤º3-æ¬¢è¿é¡µ"><a href="#æ¼”ç¤º3-æ¬¢è¿é¡µ" class="headerlink" title="æ¼”ç¤º3 - æ¬¢è¿é¡µ"></a>æ¼”ç¤º3 - æ¬¢è¿é¡µ</h4><h5 id="å…³é”®ä»£ç -7"><a href="#å…³é”®ä»£ç -7" class="headerlink" title="å…³é”®ä»£ç "></a>å…³é”®ä»£ç </h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> WelcomePageHandlerMapping <span class="title function_">welcomePageHandlerMapping</span><span class="params">(ApplicationContext context)</span> &#123;</span><br><span class="line">    <span class="type">Resource</span> <span class="variable">resource</span> <span class="operator">=</span> context.getResource(<span class="string">&quot;classpath:static/index.html&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">WelcomePageHandlerMapping</span>(<span class="literal">null</span>, context, resource, <span class="string">&quot;/**&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> SimpleControllerHandlerAdapter <span class="title function_">simpleControllerHandlerAdapter</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">SimpleControllerHandlerAdapter</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ”¶è·ğŸ’¡-51"><a href="#æ”¶è·ğŸ’¡-51" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><ol><li>æ¬¢è¿é¡µæ”¯æŒé™æ€æ¬¢è¿é¡µä¸åŠ¨æ€æ¬¢è¿é¡µ</li><li>WelcomePageHandlerMapping æ˜ å°„æ¬¢è¿é¡µï¼ˆå³åªæ˜ å°„ â€˜&#x2F;â€˜ï¼‰<ul><li>å®ƒå†…ç½®çš„ handler ParameterizableViewController ä½œç”¨æ˜¯ä¸æ‰§è¡Œé€»è¾‘ï¼Œä»…æ ¹æ®è§†å›¾åæ‰¾è§†å›¾</li><li>è§†å›¾åå›ºå®šä¸º forward:index.html</li></ul></li><li>SimpleControllerHandlerAdapter, è°ƒç”¨ handler<ul><li>è½¬å‘è‡³ &#x2F;index.html</li><li>å¤„ç† &#x2F;index.html åˆä¼šèµ°ä¸Šé¢çš„é™æ€èµ„æºå¤„ç†æµç¨‹</li></ul></li></ol><h4 id="æ˜ å°„å™¨ä¸é€‚é…å™¨å°ç»“"><a href="#æ˜ å°„å™¨ä¸é€‚é…å™¨å°ç»“" class="headerlink" title="æ˜ å°„å™¨ä¸é€‚é…å™¨å°ç»“"></a>æ˜ å°„å™¨ä¸é€‚é…å™¨å°ç»“</h4><ol><li>HandlerMapping è´Ÿè´£å»ºç«‹è¯·æ±‚ä¸æ§åˆ¶å™¨ä¹‹é—´çš„æ˜ å°„å…³ç³»<ul><li>RequestMappingHandlerMapping (ä¸ @RequestMapping åŒ¹é…)</li><li>WelcomePageHandlerMapping    (&#x2F;)</li><li>BeanNameUrlHandlerMapping    (ä¸ bean çš„åå­—åŒ¹é… ä»¥ &#x2F; å¼€å¤´)</li><li>RouterFunctionMapping        (å‡½æ•°å¼ RequestPredicate, HandlerFunction)</li><li>SimpleUrlHandlerMapping      (é™æ€èµ„æº é€šé…ç¬¦ &#x2F;** &#x2F;img&#x2F;**)</li><li>ä¹‹é—´ä¹Ÿä¼šæœ‰é¡ºåºé—®é¢˜, boot ä¸­é»˜è®¤é¡ºåºå¦‚ä¸Š</li></ul></li><li>HandlerAdapter è´Ÿè´£å®ç°å¯¹å„ç§å„æ ·çš„ handler çš„é€‚é…è°ƒç”¨<ul><li>RequestMappingHandlerAdapter å¤„ç†ï¼š@RequestMapping æ–¹æ³•<ul><li>å‚æ•°è§£æå™¨ã€è¿”å›å€¼å¤„ç†å™¨ä½“ç°äº†ç»„åˆæ¨¡å¼</li></ul></li><li>SimpleControllerHandlerAdapter å¤„ç†ï¼šController æ¥å£</li><li>HandlerFunctionAdapter å¤„ç†ï¼šHandlerFunction å‡½æ•°å¼æ¥å£</li><li>HttpRequestHandlerAdapter å¤„ç†ï¼šHttpRequestHandler æ¥å£ (é™æ€èµ„æºå¤„ç†)</li><li>è¿™ä¹Ÿæ˜¯å…¸å‹é€‚é…å™¨æ¨¡å¼ä½“ç°</li></ul></li></ol><h3 id="36-mvc-å¤„ç†æµç¨‹"><a href="#36-mvc-å¤„ç†æµç¨‹" class="headerlink" title="36) mvc å¤„ç†æµç¨‹"></a>36) mvc å¤„ç†æµç¨‹</h3><p>å½“æµè§ˆå™¨å‘é€ä¸€ä¸ªè¯·æ±‚ <code>http://localhost:8080/hello</code> åï¼Œè¯·æ±‚åˆ°è¾¾æœåŠ¡å™¨ï¼Œå…¶å¤„ç†æµç¨‹æ˜¯ï¼š</p><ol><li><p>æœåŠ¡å™¨æä¾›äº† DispatcherServletï¼Œå®ƒä½¿ç”¨çš„æ˜¯æ ‡å‡† Servlet æŠ€æœ¯</p><ul><li>è·¯å¾„ï¼šé»˜è®¤æ˜ å°„è·¯å¾„ä¸º <code>/</code>ï¼Œå³ä¼šåŒ¹é…åˆ°æ‰€æœ‰è¯·æ±‚ URLï¼Œå¯ä½œä¸ºè¯·æ±‚çš„ç»Ÿä¸€å…¥å£ï¼Œä¹Ÿè¢«ç§°ä¹‹ä¸º<strong>å‰æ§åˆ¶å™¨</strong><ul><li>jsp ä¸ä¼šåŒ¹é…åˆ° DispatcherServlet</li><li>å…¶å®ƒæœ‰è·¯å¾„çš„ Servlet åŒ¹é…ä¼˜å…ˆçº§ä¹Ÿé«˜äº DispatcherServlet</li></ul></li><li>åˆ›å»ºï¼šåœ¨ Boot ä¸­ï¼Œç”± DispatcherServletAutoConfiguration è¿™ä¸ªè‡ªåŠ¨é…ç½®ç±»æä¾› DispatcherServlet çš„ bean</li><li>åˆå§‹åŒ–ï¼šDispatcherServlet åˆå§‹åŒ–æ—¶ä¼šä¼˜å…ˆåˆ°å®¹å™¨é‡Œå¯»æ‰¾å„ç§ç»„ä»¶ï¼Œä½œä¸ºå®ƒçš„æˆå‘˜å˜é‡<ul><li>HandlerMappingï¼Œåˆå§‹åŒ–æ—¶è®°å½•æ˜ å°„å…³ç³»</li><li>HandlerAdapterï¼Œåˆå§‹åŒ–æ—¶å‡†å¤‡å‚æ•°è§£æå™¨ã€è¿”å›å€¼å¤„ç†å™¨ã€æ¶ˆæ¯è½¬æ¢å™¨</li><li>HandlerExceptionResolverï¼Œåˆå§‹åŒ–æ—¶å‡†å¤‡å‚æ•°è§£æå™¨ã€è¿”å›å€¼å¤„ç†å™¨ã€æ¶ˆæ¯è½¬æ¢å™¨</li><li>ViewResolver</li></ul></li></ul></li><li><p>DispatcherServlet ä¼šåˆ©ç”¨ RequestMappingHandlerMapping æŸ¥æ‰¾æ§åˆ¶å™¨æ–¹æ³•</p><ul><li><p>ä¾‹å¦‚æ ¹æ® &#x2F;hello è·¯å¾„æ‰¾åˆ° @RequestMapping(â€œ&#x2F;helloâ€) å¯¹åº”çš„æ§åˆ¶å™¨æ–¹æ³•</p></li><li><p>æ§åˆ¶å™¨æ–¹æ³•ä¼šè¢«å°è£…ä¸º HandlerMethod å¯¹è±¡ï¼Œå¹¶ç»“åˆåŒ¹é…åˆ°çš„æ‹¦æˆªå™¨ä¸€èµ·è¿”å›ç»™ DispatcherServlet </p></li><li><p>HandlerMethod å’Œæ‹¦æˆªå™¨åˆåœ¨ä¸€èµ·ç§°ä¸º HandlerExecutionChainï¼ˆè°ƒç”¨é“¾ï¼‰å¯¹è±¡</p></li></ul></li><li><p>DispatcherServlet æ¥ä¸‹æ¥ä¼šï¼š</p><ol><li>è°ƒç”¨æ‹¦æˆªå™¨çš„ preHandle æ–¹æ³•</li><li>RequestMappingHandlerAdapter è°ƒç”¨ handle æ–¹æ³•ï¼Œå‡†å¤‡æ•°æ®ç»‘å®šå·¥å‚ã€æ¨¡å‹å·¥å‚ã€ModelAndViewContainerã€å°† HandlerMethod å®Œå–„ä¸º ServletInvocableHandlerMethod<ul><li>@ControllerAdvice å…¨å±€å¢å¼ºç‚¹1ï¸âƒ£ï¼šè¡¥å……æ¨¡å‹æ•°æ®</li><li>@ControllerAdvice å…¨å±€å¢å¼ºç‚¹2ï¸âƒ£ï¼šè¡¥å……è‡ªå®šä¹‰ç±»å‹è½¬æ¢å™¨</li><li>ä½¿ç”¨ HandlerMethodArgumentResolver å‡†å¤‡å‚æ•°<ul><li>@ControllerAdvice å…¨å±€å¢å¼ºç‚¹3ï¸âƒ£ï¼šRequestBody å¢å¼º</li></ul></li><li>è°ƒç”¨ ServletInvocableHandlerMethod </li><li>ä½¿ç”¨ HandlerMethodReturnValueHandler å¤„ç†è¿”å›å€¼<ul><li>@ControllerAdvice å…¨å±€å¢å¼ºç‚¹4ï¸âƒ£ï¼šResponseBody å¢å¼º</li></ul></li><li>æ ¹æ® ModelAndViewContainer è·å– ModelAndView<ul><li>å¦‚æœè¿”å›çš„ ModelAndView ä¸º nullï¼Œä¸èµ°ç¬¬ 4 æ­¥è§†å›¾è§£æåŠæ¸²æŸ“æµç¨‹<ul><li>ä¾‹å¦‚ï¼Œæœ‰çš„è¿”å›å€¼å¤„ç†å™¨è°ƒç”¨äº† HttpMessageConverter æ¥å°†ç»“æœè½¬æ¢ä¸º JSONï¼Œè¿™æ—¶ ModelAndView å°±ä¸º null</li></ul></li><li>å¦‚æœè¿”å›çš„ ModelAndView ä¸ä¸º nullï¼Œä¼šåœ¨ç¬¬ 4 æ­¥èµ°è§†å›¾è§£æåŠæ¸²æŸ“æµç¨‹</li></ul></li></ul></li><li>è°ƒç”¨æ‹¦æˆªå™¨çš„ postHandle æ–¹æ³•</li><li>å¤„ç†å¼‚å¸¸æˆ–è§†å›¾æ¸²æŸ“<ul><li>å¦‚æœ 1~3 å‡ºç°å¼‚å¸¸ï¼Œèµ° ExceptionHandlerExceptionResolver å¤„ç†å¼‚å¸¸æµç¨‹<ul><li>@ControllerAdvice å…¨å±€å¢å¼ºç‚¹5ï¸âƒ£ï¼š@ExceptionHandler å¼‚å¸¸å¤„ç†</li></ul></li><li>æ­£å¸¸ï¼Œèµ°è§†å›¾è§£æåŠæ¸²æŸ“æµç¨‹</li></ul></li><li>è°ƒç”¨æ‹¦æˆªå™¨çš„ afterCompletion æ–¹æ³•</li></ol></li></ol><h2 id="Boot"><a href="#Boot" class="headerlink" title="Boot"></a>Boot</h2><h3 id="37-Boot-éª¨æ¶é¡¹ç›®"><a href="#37-Boot-éª¨æ¶é¡¹ç›®" class="headerlink" title="37) Boot éª¨æ¶é¡¹ç›®"></a>37) Boot éª¨æ¶é¡¹ç›®</h3><p>å¦‚æœæ˜¯ linux ç¯å¢ƒï¼Œç”¨ä»¥ä¸‹å‘½ä»¤å³å¯è·å– spring boot çš„éª¨æ¶ pom.xml</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">curl -G https://start.spring.io/pom.xml -d dependencies=web,mysql,mybatis -o pom.xml</span><br></pre></td></tr></table></figure><p>ä¹Ÿå¯ä»¥ä½¿ç”¨ Postman ç­‰å·¥å…·å®ç°</p><p>è‹¥æƒ³è·å–æ›´å¤šç”¨æ³•ï¼Œè¯·å‚è€ƒ</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">curl https://start.spring.io</span><br></pre></td></tr></table></figure><h3 id="38-Boot-Waré¡¹ç›®"><a href="#38-Boot-Waré¡¹ç›®" class="headerlink" title="38) Boot Waré¡¹ç›®"></a>38) Boot Waré¡¹ç›®</h3><p>æ­¥éª¤1ï¼šåˆ›å»ºæ¨¡å—ï¼ŒåŒºåˆ«åœ¨äºæ‰“åŒ…æ–¹å¼é€‰æ‹© war</p><img src="/2022/08/10/spring%E9%AB%98%E7%BA%A750%E8%AE%B2/image-20211021160145072.png" alt="image-20211021160145072" style="zoom: 50%;"><p>æ¥ä¸‹æ¥å‹¾é€‰ Spring Web æ”¯æŒ</p><img src="/2022/08/10/spring%E9%AB%98%E7%BA%A750%E8%AE%B2/image-20211021162416525.png" alt="image-20211021162416525" style="zoom:50%;"><p>æ­¥éª¤2ï¼šç¼–å†™æ§åˆ¶å™¨</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/hello&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">abc</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;è¿›å…¥äº†æ§åˆ¶å™¨&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;hello&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ­¥éª¤3ï¼šç¼–å†™ jsp è§†å›¾ï¼Œæ–°å»º webapp ç›®å½•å’Œä¸€ä¸ª hello.jsp æ–‡ä»¶ï¼Œæ³¨æ„æ–‡ä»¶åä¸æ§åˆ¶å™¨æ–¹æ³•è¿”å›çš„è§†å›¾é€»è¾‘åä¸€è‡´</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">src</span><br><span class="line">|- main</span><br><span class="line">|- java</span><br><span class="line">|- resources</span><br><span class="line">|- webapp</span><br><span class="line">|- hello.jsp</span><br></pre></td></tr></table></figure><p>æ­¥éª¤4ï¼šé…ç½®è§†å›¾è·¯å¾„ï¼Œæ‰“å¼€ application.properties æ–‡ä»¶</p><figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">spring.mvc.view.prefix</span>=<span class="string">/</span></span><br><span class="line"><span class="attr">spring.mvc.view.suffix</span>=<span class="string">.jsp</span></span><br></pre></td></tr></table></figure><blockquote><p>å°†æ¥ prefix + æ§åˆ¶å™¨æ–¹æ³•è¿”å›å€¼ + suffix å³ä¸ºè§†å›¾å®Œæ•´è·¯å¾„</p></blockquote><h4 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h4><p>å¦‚æœç”¨ mvn æ’ä»¶ <code>mvn spring-boot:run</code> æˆ– main æ–¹æ³•æµ‹è¯•</p><ul><li>å¿…é¡»æ·»åŠ å¦‚ä¸‹ä¾èµ–ï¼Œå› ä¸ºæ­¤æ—¶ç”¨çš„è¿˜æ˜¯å†…åµŒ tomcatï¼Œè€Œå†…åµŒ tomcat é»˜è®¤ä¸å¸¦ jasperï¼ˆç”¨æ¥è§£æ jspï¼‰</li></ul><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.tomcat.embed<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>tomcat-embed-jasper<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ä¹Ÿå¯ä»¥ä½¿ç”¨ Idea é…ç½® tomcat æ¥æµ‹è¯•ï¼Œæ­¤æ—¶ç”¨çš„æ˜¯å¤–ç½® tomcat</p><ul><li>éª¨æ¶ç”Ÿæˆçš„ä»£ç ä¸­ï¼Œå¤šäº†ä¸€ä¸ª ServletInitializerï¼Œå®ƒçš„ä½œç”¨å°±æ˜¯é…ç½®å¤–ç½® Tomcat ä½¿ç”¨çš„ï¼Œåœ¨å¤–ç½® Tomcat å¯åŠ¨åï¼Œå»è°ƒç”¨å®ƒåˆ›å»ºå’Œè¿è¡Œ SpringApplication</li></ul><h4 id="å¯ç¤º"><a href="#å¯ç¤º" class="headerlink" title="å¯ç¤º"></a>å¯ç¤º</h4><p>å¯¹äº jar é¡¹ç›®ï¼Œè‹¥è¦æ”¯æŒ jspï¼Œä¹Ÿå¯ä»¥åœ¨åŠ å…¥ jasper ä¾èµ–çš„å‰æä¸‹ï¼ŒæŠŠ jsp æ–‡ä»¶ç½®å…¥ <code>META-INF/resources</code> </p><h3 id="39-Boot-å¯åŠ¨è¿‡ç¨‹"><a href="#39-Boot-å¯åŠ¨è¿‡ç¨‹" class="headerlink" title="39) Boot å¯åŠ¨è¿‡ç¨‹"></a>39) Boot å¯åŠ¨è¿‡ç¨‹</h3><p>é˜¶æ®µä¸€ï¼šSpringApplication æ„é€ </p><ol><li>è®°å½• BeanDefinition æº</li><li>æ¨æ–­åº”ç”¨ç±»å‹</li><li>è®°å½• ApplicationContext åˆå§‹åŒ–å™¨</li><li>è®°å½•ç›‘å¬å™¨</li><li>æ¨æ–­ä¸»å¯åŠ¨ç±»</li></ol><p>é˜¶æ®µäºŒï¼šæ‰§è¡Œ run æ–¹æ³•</p><ol><li><p>å¾—åˆ° SpringApplicationRunListenersï¼Œåå­—å–å¾—ä¸å¥½ï¼Œå®é™…æ˜¯äº‹ä»¶å‘å¸ƒå™¨</p><ul><li>å‘å¸ƒ application starting äº‹ä»¶1ï¸âƒ£</li></ul></li><li><p>å°è£…å¯åŠ¨ args</p></li><li><p>å‡†å¤‡ Environment æ·»åŠ å‘½ä»¤è¡Œå‚æ•°ï¼ˆ*ï¼‰</p></li><li><p>ConfigurationPropertySources å¤„ç†ï¼ˆ*ï¼‰</p><ul><li>å‘å¸ƒ application environment å·²å‡†å¤‡äº‹ä»¶2ï¸âƒ£</li></ul></li><li><p>é€šè¿‡ EnvironmentPostProcessorApplicationListener è¿›è¡Œ env åå¤„ç†ï¼ˆ*ï¼‰</p><ul><li>application.propertiesï¼Œç”± StandardConfigDataLocationResolver è§£æ</li><li>spring.application.json</li></ul></li><li><p>ç»‘å®š spring.main åˆ° SpringApplication å¯¹è±¡ï¼ˆ*ï¼‰</p></li><li><p>æ‰“å° bannerï¼ˆ*ï¼‰</p></li><li><p>åˆ›å»ºå®¹å™¨</p></li><li><p>å‡†å¤‡å®¹å™¨</p><ul><li>å‘å¸ƒ application context å·²åˆå§‹åŒ–äº‹ä»¶3ï¸âƒ£</li></ul></li><li><p>åŠ è½½ bean å®šä¹‰</p><ul><li>å‘å¸ƒ application prepared äº‹ä»¶4ï¸âƒ£</li></ul></li><li><p>refresh å®¹å™¨</p><ul><li>å‘å¸ƒ application started äº‹ä»¶5ï¸âƒ£</li></ul></li><li><p>æ‰§è¡Œ runner</p><ul><li><p>å‘å¸ƒ application ready äº‹ä»¶6ï¸âƒ£</p></li><li><p>è¿™å…¶ä¸­æœ‰å¼‚å¸¸ï¼Œå‘å¸ƒ application failed äº‹ä»¶7ï¸âƒ£</p></li></ul></li></ol><blockquote><p>å¸¦ * çš„æœ‰ç‹¬ç«‹çš„ç¤ºä¾‹</p></blockquote><h4 id="æ¼”ç¤º-å¯åŠ¨è¿‡ç¨‹"><a href="#æ¼”ç¤º-å¯åŠ¨è¿‡ç¨‹" class="headerlink" title="æ¼”ç¤º - å¯åŠ¨è¿‡ç¨‹"></a>æ¼”ç¤º - å¯åŠ¨è¿‡ç¨‹</h4><p><strong>com.itheima.a39.A39_1</strong> å¯¹åº” SpringApplication æ„é€ </p><p><strong>com.itheima.a39.A39_2</strong> å¯¹åº”ç¬¬1æ­¥ï¼Œå¹¶æ¼”ç¤º 7 ä¸ªäº‹ä»¶</p><p><strong>com.itheima.a39.A39_3</strong> å¯¹åº”ç¬¬2ã€8åˆ°12æ­¥</p><p><strong>org.springframework.boot.Step3</strong></p><p><strong>org.springframework.boot.Step4</strong></p><p><strong>org.springframework.boot.Step5</strong></p><p><strong>org.springframework.boot.Step6</strong></p><p><strong>org.springframework.boot.Step7</strong></p><h4 id="æ”¶è·ğŸ’¡-52"><a href="#æ”¶è·ğŸ’¡-52" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><ol><li>SpringApplication æ„é€ æ–¹æ³•ä¸­æ‰€åšçš„æ“ä½œ<ul><li>å¯ä»¥æœ‰å¤šç§æºç”¨æ¥åŠ è½½ bean å®šä¹‰</li><li>åº”ç”¨ç±»å‹æ¨æ–­</li><li>æ·»åŠ å®¹å™¨åˆå§‹åŒ–å™¨</li><li>æ·»åŠ ç›‘å¬å™¨</li><li>æ¼”ç¤ºä¸»ç±»æ¨æ–­</li></ul></li><li>å¦‚ä½•è¯»å– spring.factories ä¸­çš„é…ç½®</li><li>ä»é…ç½®ä¸­è·å–é‡è¦çš„äº‹ä»¶å‘å¸ƒå™¨ï¼šSpringApplicationRunListeners</li><li>å®¹å™¨çš„åˆ›å»ºã€åˆå§‹åŒ–å™¨å¢å¼ºã€åŠ è½½ bean å®šä¹‰ç­‰</li><li>CommandLineRunnerã€ApplicationRunner çš„ä½œç”¨</li><li>ç¯å¢ƒå¯¹è±¡<ol><li>å‘½ä»¤è¡Œ PropertySource</li><li>ConfigurationPropertySources è§„èŒƒç¯å¢ƒé”®åç§°</li><li>EnvironmentPostProcessor åå¤„ç†å¢å¼º<ul><li>ç”± EventPublishingRunListener é€šè¿‡ç›‘å¬äº‹ä»¶2ï¸âƒ£æ¥è°ƒç”¨</li></ul></li><li>ç»‘å®š spring.main å‰ç¼€çš„ key value è‡³ SpringApplication</li></ol></li><li>Banner</li></ol><h3 id="40-Tomcat-å†…åµŒå®¹å™¨"><a href="#40-Tomcat-å†…åµŒå®¹å™¨" class="headerlink" title="40) Tomcat å†…åµŒå®¹å™¨"></a>40) Tomcat å†…åµŒå®¹å™¨</h3><p>Tomcat åŸºæœ¬ç»“æ„</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Server</span><br><span class="line">â””â”€â”€â”€Service</span><br><span class="line">    â”œâ”€â”€â”€Connector (åè®®, ç«¯å£)</span><br><span class="line">    â””â”€â”€â”€Engine</span><br><span class="line">        â””â”€â”€â”€Host(è™šæ‹Ÿä¸»æœº localhost)</span><br><span class="line">            â”œâ”€â”€â”€Context1 (åº”ç”¨1, å¯ä»¥è®¾ç½®è™šæ‹Ÿè·¯å¾„, / å³ url èµ·å§‹è·¯å¾„; é¡¹ç›®ç£ç›˜è·¯å¾„, å³ docBase )</span><br><span class="line">            â”‚   â”‚   index.html</span><br><span class="line">            â”‚   â””â”€â”€â”€WEB-INF</span><br><span class="line">            â”‚       â”‚   web.xml (servlet, filter, listener) 3.0</span><br><span class="line">            â”‚       â”œâ”€â”€â”€classes (servlet, controller, service ...)</span><br><span class="line">            â”‚       â”œâ”€â”€â”€jsp</span><br><span class="line">            â”‚       â””â”€â”€â”€lib (ç¬¬ä¸‰æ–¹ jar åŒ…)</span><br><span class="line">            â””â”€â”€â”€Context2 (åº”ç”¨2)</span><br><span class="line">                â”‚   index.html</span><br><span class="line">                â””â”€â”€â”€WEB-INF</span><br><span class="line">                        web.xml</span><br></pre></td></tr></table></figure><h4 id="æ¼”ç¤º1-Tomcat-å†…åµŒå®¹å™¨"><a href="#æ¼”ç¤º1-Tomcat-å†…åµŒå®¹å™¨" class="headerlink" title="æ¼”ç¤º1 - Tomcat å†…åµŒå®¹å™¨"></a>æ¼”ç¤º1 - Tomcat å†…åµŒå®¹å™¨</h4><h5 id="å…³é”®ä»£ç -8"><a href="#å…³é”®ä»£ç -8" class="headerlink" title="å…³é”®ä»£ç "></a>å…³é”®ä»£ç </h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> LifecycleException, IOException &#123;</span><br><span class="line">    <span class="comment">// 1.åˆ›å»º Tomcat å¯¹è±¡</span></span><br><span class="line">    <span class="type">Tomcat</span> <span class="variable">tomcat</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Tomcat</span>();</span><br><span class="line">    tomcat.setBaseDir(<span class="string">&quot;tomcat&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2.åˆ›å»ºé¡¹ç›®æ–‡ä»¶å¤¹, å³ docBase æ–‡ä»¶å¤¹</span></span><br><span class="line">    <span class="type">File</span> <span class="variable">docBase</span> <span class="operator">=</span> Files.createTempDirectory(<span class="string">&quot;boot.&quot;</span>).toFile();</span><br><span class="line">    docBase.deleteOnExit();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 3.åˆ›å»º Tomcat é¡¹ç›®, åœ¨ Tomcat ä¸­ç§°ä¸º Context</span></span><br><span class="line">    <span class="type">Context</span> <span class="variable">context</span> <span class="operator">=</span> tomcat.addContext(<span class="string">&quot;&quot;</span>, docBase.getAbsolutePath());</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 4.ç¼–ç¨‹æ·»åŠ  Servlet</span></span><br><span class="line">    context.addServletContainerInitializer(<span class="keyword">new</span> <span class="title class_">ServletContainerInitializer</span>() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onStartup</span><span class="params">(Set&lt;Class&lt;?&gt;&gt; c, ServletContext ctx)</span> <span class="keyword">throws</span> ServletException &#123;</span><br><span class="line">            <span class="type">HelloServlet</span> <span class="variable">helloServlet</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HelloServlet</span>();</span><br><span class="line">            ctx.addServlet(<span class="string">&quot;aaa&quot;</span>, helloServlet).addMapping(<span class="string">&quot;/hello&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;, Collections.emptySet());</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 5.å¯åŠ¨ Tomcat</span></span><br><span class="line">    tomcat.start();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 6.åˆ›å»ºè¿æ¥å™¨, è®¾ç½®ç›‘å¬ç«¯å£</span></span><br><span class="line">    <span class="type">Connector</span> <span class="variable">connector</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Connector</span>(<span class="keyword">new</span> <span class="title class_">Http11Nio2Protocol</span>());</span><br><span class="line">    connector.setPort(<span class="number">8080</span>);</span><br><span class="line">    tomcat.setConnector(connector);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ¼”ç¤º2-é›†æˆ-Spring-å®¹å™¨"><a href="#æ¼”ç¤º2-é›†æˆ-Spring-å®¹å™¨" class="headerlink" title="æ¼”ç¤º2 - é›†æˆ Spring å®¹å™¨"></a>æ¼”ç¤º2 - é›†æˆ Spring å®¹å™¨</h4><h5 id="å…³é”®ä»£ç -9"><a href="#å…³é”®ä»£ç -9" class="headerlink" title="å…³é”®ä»£ç "></a>å…³é”®ä»£ç </h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">WebApplicationContext</span> <span class="variable">springContext</span> <span class="operator">=</span> getApplicationContext();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 4.ç¼–ç¨‹æ·»åŠ  Servlet</span></span><br><span class="line">context.addServletContainerInitializer(<span class="keyword">new</span> <span class="title class_">ServletContainerInitializer</span>() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onStartup</span><span class="params">(Set&lt;Class&lt;?&gt;&gt; c, ServletContext ctx)</span> <span class="keyword">throws</span> ServletException &#123;</span><br><span class="line">        <span class="comment">// â¬‡ï¸é€šè¿‡ ServletRegistrationBean æ·»åŠ  DispatcherServlet ç­‰</span></span><br><span class="line">        <span class="keyword">for</span> (ServletRegistrationBean registrationBean : </span><br><span class="line">             springContext.getBeansOfType(ServletRegistrationBean.class).values()) &#123;</span><br><span class="line">            registrationBean.onStartup(ctx);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;, Collections.emptySet());</span><br></pre></td></tr></table></figure><h3 id="41-Boot-è‡ªåŠ¨é…ç½®"><a href="#41-Boot-è‡ªåŠ¨é…ç½®" class="headerlink" title="41) Boot è‡ªåŠ¨é…ç½®"></a>41) Boot è‡ªåŠ¨é…ç½®</h3><h4 id="AopAutoConfiguration"><a href="#AopAutoConfiguration" class="headerlink" title="AopAutoConfiguration"></a>AopAutoConfiguration</h4><p>Spring Boot æ˜¯åˆ©ç”¨äº†è‡ªåŠ¨é…ç½®ç±»æ¥ç®€åŒ–äº† aop ç›¸å…³é…ç½®</p><ul><li>AOP è‡ªåŠ¨é…ç½®ç±»ä¸º <code>org.springframework.boot.autoconfigure.aop.AopAutoConfiguration</code></li><li>å¯ä»¥é€šè¿‡ <code>spring.aop.auto=false</code> ç¦ç”¨ aop è‡ªåŠ¨é…ç½®</li><li>AOP è‡ªåŠ¨é…ç½®çš„æœ¬è´¨æ˜¯é€šè¿‡ <code>@EnableAspectJAutoProxy</code> æ¥å¼€å¯äº†è‡ªåŠ¨ä»£ç†ï¼Œå¦‚æœåœ¨å¼•å¯¼ç±»ä¸Šè‡ªå·±æ·»åŠ äº† <code>@EnableAspectJAutoProxy</code> é‚£ä¹ˆä»¥è‡ªå·±æ·»åŠ çš„ä¸ºå‡†</li><li><code>@EnableAspectJAutoProxy</code> çš„æœ¬è´¨æ˜¯å‘å®¹å™¨ä¸­æ·»åŠ äº† <code>AnnotationAwareAspectJAutoProxyCreator</code> è¿™ä¸ª bean åå¤„ç†å™¨ï¼Œå®ƒèƒ½å¤Ÿæ‰¾åˆ°å®¹å™¨ä¸­æ‰€æœ‰åˆ‡é¢ï¼Œå¹¶ä¸ºåŒ¹é…åˆ‡ç‚¹çš„ç›®æ ‡ç±»åˆ›å»ºä»£ç†ï¼Œåˆ›å»ºä»£ç†çš„å·¥ä½œä¸€èˆ¬æ˜¯åœ¨ bean çš„åˆå§‹åŒ–é˜¶æ®µå®Œæˆçš„</li></ul><h4 id="DataSourceAutoConfiguration"><a href="#DataSourceAutoConfiguration" class="headerlink" title="DataSourceAutoConfiguration"></a>DataSourceAutoConfiguration</h4><ul><li>å¯¹åº”çš„è‡ªåŠ¨é…ç½®ç±»ä¸ºï¼šorg.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration</li><li>å®ƒå†…éƒ¨é‡‡ç”¨äº†æ¡ä»¶è£…é…ï¼Œé€šè¿‡æ£€æŸ¥å®¹å™¨çš„ beanï¼Œä»¥åŠç±»è·¯å¾„ä¸‹çš„ classï¼Œæ¥å†³å®šè¯¥ @Bean æ˜¯å¦ç”Ÿæ•ˆ</li></ul><p>ç®€å•è¯´æ˜ä¸€ä¸‹ï¼ŒSpring Boot æ”¯æŒä¸¤å¤§ç±»æ•°æ®æºï¼š</p><ul><li>EmbeddedDatabase - å†…åµŒæ•°æ®åº“è¿æ¥æ± </li><li>PooledDataSource - éå†…åµŒæ•°æ®åº“è¿æ¥æ± </li></ul><p>PooledDataSource åˆæ”¯æŒå¦‚ä¸‹æ•°æ®æº</p><ul><li>hikari æä¾›çš„ HikariDataSource</li><li>tomcat-jdbc æä¾›çš„ DataSource</li><li>dbcp2 æä¾›çš„ BasicDataSource</li><li>oracle æä¾›çš„ PoolDataSourceImpl</li></ul><p>å¦‚æœçŸ¥é“æ•°æ®æºçš„å®ç°ç±»ç±»å‹ï¼Œå³æŒ‡å®šäº† <code>spring.datasource.type</code>ï¼Œç†è®ºä¸Šå¯ä»¥æ”¯æŒæ‰€æœ‰æ•°æ®æºï¼Œä½†è¿™æ ·åšçš„ä¸€ä¸ªæœ€å¤§é—®é¢˜æ˜¯æ— æ³•è®¢åˆ¶æ¯ç§æ•°æ®æºçš„è¯¦ç»†é…ç½®ï¼ˆå¦‚æœ€å¤§ã€æœ€å°è¿æ¥æ•°ç­‰ï¼‰</p><h4 id="MybatisAutoConfiguration"><a href="#MybatisAutoConfiguration" class="headerlink" title="MybatisAutoConfiguration"></a>MybatisAutoConfiguration</h4><ul><li>MyBatis è‡ªåŠ¨é…ç½®ç±»ä¸º <code>org.mybatis.spring.boot.autoconfigure.MybatisAutoConfiguration</code></li><li>å®ƒä¸»è¦é…ç½®äº†ä¸¤ä¸ª bean<ul><li>SqlSessionFactory - MyBatis æ ¸å¿ƒå¯¹è±¡ï¼Œç”¨æ¥åˆ›å»º SqlSession</li><li>SqlSessionTemplate - SqlSession çš„å®ç°ï¼Œæ­¤å®ç°ä¼šä¸å½“å‰çº¿ç¨‹ç»‘å®š</li><li>ç”¨ ImportBeanDefinitionRegistrar çš„æ–¹å¼æ‰«ææ‰€æœ‰æ ‡æ³¨äº† @Mapper æ³¨è§£çš„æ¥å£</li><li>ç”¨ AutoConfigurationPackages æ¥ç¡®å®šæ‰«æçš„åŒ…</li></ul></li><li>è¿˜æœ‰ä¸€ä¸ªç›¸å…³çš„ beanï¼šMybatisPropertiesï¼Œå®ƒä¼šè¯»å–é…ç½®æ–‡ä»¶ä¸­å¸¦ <code>mybatis.</code> å‰ç¼€çš„é…ç½®é¡¹è¿›è¡Œå®šåˆ¶é…ç½®</li></ul><p>@MapperScan æ³¨è§£çš„ä½œç”¨ä¸ MybatisAutoConfiguration ç±»ä¼¼ï¼Œä¼šæ³¨å†Œ MapperScannerConfigurer æœ‰å¦‚ä¸‹åŒºåˆ«</p><ul><li>@MapperScan æ‰«æå…·ä½“åŒ…ï¼ˆå½“ç„¶ä¹Ÿå¯ä»¥é…ç½®å…³æ³¨å“ªä¸ªæ³¨è§£ï¼‰</li><li>@MapperScan å¦‚æœä¸æŒ‡å®šæ‰«æå…·ä½“åŒ…ï¼Œåˆ™ä¼šæŠŠå¼•å¯¼ç±»èŒƒå›´å†…ï¼Œæ‰€æœ‰æ¥å£å½“åš Mapper æ¥å£</li><li>MybatisAutoConfiguration å…³æ³¨çš„æ˜¯æ‰€æœ‰æ ‡æ³¨ @Mapper æ³¨è§£çš„æ¥å£ï¼Œä¼šå¿½ç•¥æ‰é @Mapper æ ‡æ³¨çš„æ¥å£</li></ul><p>è¿™é‡Œæœ‰åŒå­¦æœ‰ç–‘é—®ï¼Œä¹‹å‰ä»‹ç»çš„éƒ½æ˜¯å°†å…·ä½“ç±»äº¤ç»™ Spring ç®¡ç†ï¼Œæ€ä¹ˆåˆ°äº† MyBatis è¿™å„¿ï¼Œæ¥å£å°±å¯ä»¥è¢«ç®¡ç†å‘¢ï¼Ÿ</p><ul><li>å…¶å®å¹¶éå°†æ¥å£äº¤ç»™ Spring ç®¡ç†ï¼Œè€Œæ˜¯æ¯ä¸ªæ¥å£ä¼šå¯¹åº”ä¸€ä¸ª MapperFactoryBeanï¼Œæ˜¯åè€…è¢« Spring æ‰€ç®¡ç†ï¼Œæ¥å£åªæ˜¯ä½œä¸º MapperFactoryBean çš„ä¸€ä¸ªå±æ€§æ¥é…ç½®</li></ul><h4 id="TransactionAutoConfiguration"><a href="#TransactionAutoConfiguration" class="headerlink" title="TransactionAutoConfiguration"></a>TransactionAutoConfiguration</h4><ul><li><p>äº‹åŠ¡è‡ªåŠ¨é…ç½®ç±»æœ‰ä¸¤ä¸ªï¼š</p><ul><li><code>org.springframework.boot.autoconfigure.jdbc.DataSourceTransactionManagerAutoConfiguration</code></li><li><code>org.springframework.boot.autoconfigure.transaction.TransactionAutoConfiguration</code></li></ul></li><li><p>å‰è€…é…ç½®äº† DataSourceTransactionManager ç”¨æ¥æ‰§è¡Œäº‹åŠ¡çš„æäº¤ã€å›æ»šæ“ä½œ</p></li><li><p>åè€…åŠŸèƒ½ä¸Šå¯¹æ ‡ @EnableTransactionManagementï¼ŒåŒ…å«ä»¥ä¸‹ä¸‰ä¸ª bean</p><ul><li>BeanFactoryTransactionAttributeSourceAdvisor äº‹åŠ¡åˆ‡é¢ç±»ï¼ŒåŒ…å«é€šçŸ¥å’Œåˆ‡ç‚¹</li><li>TransactionInterceptor äº‹åŠ¡é€šçŸ¥ç±»ï¼Œç”±å®ƒåœ¨ç›®æ ‡æ–¹æ³•è°ƒç”¨å‰ååŠ å…¥äº‹åŠ¡æ“ä½œ</li><li>AnnotationTransactionAttributeSource ä¼šè§£æ @Transactional åŠäº‹åŠ¡å±æ€§ï¼Œä¹ŸåŒ…å«äº†åˆ‡ç‚¹åŠŸèƒ½</li></ul></li><li><p>å¦‚æœè‡ªå·±é…ç½®äº† DataSourceTransactionManager æˆ–æ˜¯åœ¨å¼•å¯¼ç±»åŠ äº† @EnableTransactionManagementï¼Œåˆ™ä»¥è‡ªå·±é…ç½®çš„ä¸ºå‡†</p></li></ul><h4 id="ServletWebServerFactoryAutoConfiguration"><a href="#ServletWebServerFactoryAutoConfiguration" class="headerlink" title="ServletWebServerFactoryAutoConfiguration"></a>ServletWebServerFactoryAutoConfiguration</h4><ul><li>æä¾› ServletWebServerFactory</li></ul><h4 id="DispatcherServletAutoConfiguration"><a href="#DispatcherServletAutoConfiguration" class="headerlink" title="DispatcherServletAutoConfiguration"></a>DispatcherServletAutoConfiguration</h4><ul><li>æä¾› DispatcherServlet</li><li>æä¾› DispatcherServletRegistrationBean</li></ul><h4 id="WebMvcAutoConfiguration"><a href="#WebMvcAutoConfiguration" class="headerlink" title="WebMvcAutoConfiguration"></a>WebMvcAutoConfiguration</h4><ul><li>é…ç½® DispatcherServlet çš„å„é¡¹ç»„ä»¶ï¼Œæä¾›çš„ bean è§è¿‡çš„æœ‰<ul><li>å¤šé¡¹ HandlerMapping</li><li>å¤šé¡¹ HandlerAdapter</li><li>HandlerExceptionResolver</li></ul></li></ul><h4 id="ErrorMvcAutoConfiguration"><a href="#ErrorMvcAutoConfiguration" class="headerlink" title="ErrorMvcAutoConfiguration"></a>ErrorMvcAutoConfiguration</h4><ul><li>æä¾›çš„ bean æœ‰ BasicErrorController</li></ul><h4 id="MultipartAutoConfiguration"><a href="#MultipartAutoConfiguration" class="headerlink" title="MultipartAutoConfiguration"></a>MultipartAutoConfiguration</h4><ul><li>å®ƒæä¾›äº† org.springframework.web.multipart.support.StandardServletMultipartResolver</li><li>è¯¥ bean ç”¨æ¥è§£æ multipart&#x2F;form-data æ ¼å¼çš„æ•°æ®</li></ul><h4 id="HttpEncodingAutoConfiguration"><a href="#HttpEncodingAutoConfiguration" class="headerlink" title="HttpEncodingAutoConfiguration"></a>HttpEncodingAutoConfiguration</h4><ul><li>POST è¯·æ±‚å‚æ•°å¦‚æœæœ‰ä¸­æ–‡ï¼Œæ— éœ€ç‰¹æ®Šè®¾ç½®ï¼Œè¿™æ˜¯å› ä¸º Spring Boot å·²ç»é…ç½®äº† org.springframework.boot.web.servlet.filter.OrderedCharacterEncodingFilter</li><li>å¯¹åº”é…ç½® server.servlet.encoding.charset&#x3D;UTF-8ï¼Œé»˜è®¤å°±æ˜¯ UTF-8</li><li>å½“ç„¶ï¼Œå®ƒåªå½±å“é json æ ¼å¼çš„æ•°æ®</li></ul><h4 id="æ¼”ç¤º-è‡ªåŠ¨é…ç½®ç±»åŸç†"><a href="#æ¼”ç¤º-è‡ªåŠ¨é…ç½®ç±»åŸç†" class="headerlink" title="æ¼”ç¤º - è‡ªåŠ¨é…ç½®ç±»åŸç†"></a>æ¼”ç¤º - è‡ªåŠ¨é…ç½®ç±»åŸç†</h4><h5 id="å…³é”®ä»£ç -10"><a href="#å…³é”®ä»£ç -10" class="headerlink" title="å…³é”®ä»£ç "></a>å…³é”®ä»£ç </h5><p>å‡è®¾å·²æœ‰ç¬¬ä¸‰æ–¹çš„ä¸¤ä¸ªè‡ªåŠ¨é…ç½®ç±»</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span> <span class="comment">// â¬…ï¸ç¬¬ä¸‰æ–¹çš„é…ç½®ç±»</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">AutoConfiguration1</span> &#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Bean1 <span class="title function_">bean1</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Bean1</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span> <span class="comment">// â¬…ï¸ç¬¬ä¸‰æ–¹çš„é…ç½®ç±»</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">AutoConfiguration2</span> &#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Bean2 <span class="title function_">bean2</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Bean2</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æä¾›ä¸€ä¸ªé…ç½®æ–‡ä»¶ META-INF&#x2F;spring.factoriesï¼Œkey ä¸ºå¯¼å…¥å™¨ç±»åï¼Œå€¼ä¸ºå¤šä¸ªè‡ªåŠ¨é…ç½®ç±»åï¼Œç”¨é€—å·åˆ†éš”</p><figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">MyImportSelector</span>=<span class="string">\</span></span><br><span class="line"><span class="string">AutoConfiguration1,\</span></span><br><span class="line"><span class="string">AutoConfiguration2</span></span><br></pre></td></tr></table></figure><blockquote><p><em><strong>æ³¨æ„</strong></em></p><ul><li>ä¸Šè¿°é…ç½®æ–‡ä»¶ä¸­ MyImportSelector ä¸ AutoConfiguration1ï¼ŒAutoConfiguration2 ä¸ºç®€æ´å‡çœç•¥äº†åŒ…åï¼Œè‡ªå·±æµ‹è¯•æ—¶è¯·å°†åŒ…åæ ¹æ®æƒ…å†µè¡¥å…¨</li></ul></blockquote><p>å¼•å…¥è‡ªåŠ¨é…ç½®</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span> <span class="comment">// â¬…ï¸æœ¬é¡¹ç›®çš„é…ç½®ç±»</span></span><br><span class="line"><span class="meta">@Import(MyImportSelector.class)</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Config</span> &#123; &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">MyImportSelector</span> <span class="keyword">implements</span> <span class="title class_">DeferredImportSelector</span> &#123;</span><br><span class="line">    <span class="comment">// â¬‡ï¸è¯¥æ–¹æ³•ä» META-INF/spring.factories è¯»å–è‡ªåŠ¨é…ç½®ç±»åï¼Œè¿”å›çš„ String[] å³ä¸ºè¦å¯¼å…¥çš„é…ç½®ç±»</span></span><br><span class="line">    <span class="keyword">public</span> String[] selectImports(AnnotationMetadata importingClassMetadata) &#123;</span><br><span class="line">        <span class="keyword">return</span> SpringFactoriesLoader</span><br><span class="line">            .loadFactoryNames(MyImportSelector.class, <span class="literal">null</span>).toArray(<span class="keyword">new</span> <span class="title class_">String</span>[<span class="number">0</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ”¶è·ğŸ’¡-53"><a href="#æ”¶è·ğŸ’¡-53" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><ol><li>è‡ªåŠ¨é…ç½®ç±»æœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ªé…ç½®ç±»è€Œå·²ï¼Œåªæ˜¯ç”¨ META-INF&#x2F;spring.factories ç®¡ç†ï¼Œä¸åº”ç”¨é…ç½®ç±»è§£è€¦</li><li>@Enable æ‰“å¤´çš„æ³¨è§£æœ¬è´¨æ˜¯åˆ©ç”¨äº† @Import</li><li>@Import é…åˆ DeferredImportSelector å³å¯å®ç°å¯¼å…¥ï¼ŒselectImports æ–¹æ³•çš„è¿”å›å€¼å³ä¸ºè¦å¯¼å…¥çš„é…ç½®ç±»å</li><li>DeferredImportSelector çš„å¯¼å…¥ä¼šåœ¨æœ€åæ‰§è¡Œï¼Œä¸ºçš„æ˜¯è®©å…¶å®ƒé…ç½®ä¼˜å…ˆè§£æ</li></ol><h3 id="42-æ¡ä»¶è£…é…åº•å±‚"><a href="#42-æ¡ä»¶è£…é…åº•å±‚" class="headerlink" title="42) æ¡ä»¶è£…é…åº•å±‚"></a>42) æ¡ä»¶è£…é…åº•å±‚</h3><p>æ¡ä»¶è£…é…çš„åº•å±‚æ˜¯æœ¬è´¨ä¸Šæ˜¯ @Conditional ä¸ Conditionï¼Œè¿™ä¸¤ä¸ªæ³¨è§£ã€‚å¼•å…¥è‡ªåŠ¨é…ç½®ç±»æ—¶ï¼ŒæœŸæœ›æ»¡è¶³ä¸€å®šæ¡ä»¶æ‰èƒ½è¢« Spring ç®¡ç†ï¼Œä¸æ»¡è¶³åˆ™ä¸ç®¡ç†ï¼Œæ€ä¹ˆåšå‘¢ï¼Ÿ</p><p>æ¯”å¦‚æ¡ä»¶æ˜¯ã€ç±»è·¯å¾„ä¸‹å¿…é¡»æœ‰ dataSourceã€‘è¿™ä¸ª bean ï¼Œæ€ä¹ˆåšå‘¢ï¼Ÿ</p><p>é¦–å…ˆç¼–å†™æ¡ä»¶åˆ¤æ–­ç±»ï¼Œå®ƒå®ç° Condition æ¥å£ï¼Œç¼–å†™æ¡ä»¶åˆ¤æ–­é€»è¾‘</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">MyCondition1</span> <span class="keyword">implements</span> <span class="title class_">Condition</span> &#123; </span><br><span class="line">    <span class="comment">// â¬‡ï¸å¦‚æœå­˜åœ¨ Druid ä¾èµ–ï¼Œæ¡ä»¶æˆç«‹</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">matches</span><span class="params">(ConditionContext context, AnnotatedTypeMetadata metadata)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> ClassUtils.isPresent(<span class="string">&quot;com.alibaba.druid.pool.DruidDataSource&quot;</span>, <span class="literal">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…¶æ¬¡ï¼Œåœ¨è¦å¯¼å…¥çš„è‡ªåŠ¨é…ç½®ç±»ä¸Šæ·»åŠ  <code>@Conditional(MyCondition1.class)</code>ï¼Œå°†æ¥æ­¤ç±»è¢«å¯¼å…¥æ—¶å°±ä¼šåšæ¡ä»¶æ£€æŸ¥</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span> <span class="comment">// ç¬¬ä¸‰æ–¹çš„é…ç½®ç±»</span></span><br><span class="line"><span class="meta">@Conditional(MyCondition1.class)</span> <span class="comment">// â¬…ï¸åŠ å…¥æ¡ä»¶</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">AutoConfiguration1</span> &#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Bean1 <span class="title function_">bean1</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Bean1</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åˆ†åˆ«æµ‹è¯•åŠ å…¥å’Œå»é™¤ druid ä¾èµ–ï¼Œè§‚å¯Ÿ bean1 æ˜¯å¦å­˜åœ¨äºå®¹å™¨</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.17<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="æ”¶è·ğŸ’¡-54"><a href="#æ”¶è·ğŸ’¡-54" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><ol><li>å­¦ä¹ ä¸€ç§ç‰¹æ®Šçš„ if - else</li></ol><h2 id="å…¶å®ƒ"><a href="#å…¶å®ƒ" class="headerlink" title="å…¶å®ƒ"></a>å…¶å®ƒ</h2><h3 id="43-FactoryBean"><a href="#43-FactoryBean" class="headerlink" title="43) FactoryBean"></a>43) FactoryBean</h3><h4 id="æ¼”ç¤º-FactoryBean"><a href="#æ¼”ç¤º-FactoryBean" class="headerlink" title="æ¼”ç¤º - FactoryBean"></a>æ¼”ç¤º - FactoryBean</h4><h5 id="ä»£ç å‚è€ƒ-40"><a href="#ä»£ç å‚è€ƒ-40" class="headerlink" title="ä»£ç å‚è€ƒ"></a>ä»£ç å‚è€ƒ</h5><p><strong>com.itheima.a43</strong> åŒ…</p><h4 id="æ”¶è·ğŸ’¡-55"><a href="#æ”¶è·ğŸ’¡-55" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><ol><li>å®ƒçš„ä½œç”¨æ˜¯ç”¨åˆ¶é€ åˆ›å»ºè¿‡ç¨‹è¾ƒä¸ºå¤æ‚çš„äº§å“, å¦‚ SqlSessionFactory, ä½† @Bean å·²å…·å¤‡ç­‰ä»·åŠŸèƒ½</li><li>ä½¿ç”¨ä¸Šè¾ƒä¸ºå¤æ€ª, ä¸€ä¸ç•™ç¥å°±ä¼šç”¨é”™<ol><li>è¢« FactoryBean åˆ›å»ºçš„äº§å“<ul><li>ä¼šè®¤ä¸ºåˆ›å»ºã€ä¾èµ–æ³¨å…¥ã€Aware æ¥å£å›è°ƒã€å‰åˆå§‹åŒ–è¿™äº›éƒ½æ˜¯ FactoryBean çš„èŒè´£, è¿™äº›æµç¨‹éƒ½ä¸ä¼šèµ°</li><li>å”¯æœ‰ååˆå§‹åŒ–çš„æµç¨‹ä¼šèµ°, ä¹Ÿå°±æ˜¯äº§å“å¯ä»¥è¢«ä»£ç†å¢å¼º</li><li>å•ä¾‹çš„äº§å“ä¸ä¼šå­˜å‚¨äº BeanFactory çš„ singletonObjects æˆå‘˜ä¸­, è€Œæ˜¯å¦ä¸€ä¸ª factoryBeanObjectCache æˆå‘˜ä¸­</li></ul></li><li>æŒ‰åå­—å»è·å–æ—¶, æ‹¿åˆ°çš„æ˜¯äº§å“å¯¹è±¡, åå­—å‰é¢åŠ  &amp; è·å–çš„æ˜¯å·¥å‚å¯¹è±¡</li></ol></li></ol><h3 id="44-Indexed-åŸç†"><a href="#44-Indexed-åŸç†" class="headerlink" title="44) @Indexed åŸç†"></a>44) @Indexed åŸç†</h3><p>çœŸå®é¡¹ç›®ä¸­ï¼Œåªéœ€è¦åŠ å…¥ä»¥ä¸‹ä¾èµ–å³å¯</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context-indexer<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="æ¼”ç¤º-Indexed"><a href="#æ¼”ç¤º-Indexed" class="headerlink" title="æ¼”ç¤º - @Indexed"></a>æ¼”ç¤º - @Indexed</h4><h5 id="ä»£ç å‚è€ƒ-41"><a href="#ä»£ç å‚è€ƒ-41" class="headerlink" title="ä»£ç å‚è€ƒ"></a>ä»£ç å‚è€ƒ</h5><p><strong>com.itheima.a44</strong> åŒ…</p><h4 id="æ”¶è·ğŸ’¡-56"><a href="#æ”¶è·ğŸ’¡-56" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><ol><li>åœ¨ç¼–è¯‘æ—¶å°±æ ¹æ® @Indexed ç”Ÿæˆ META-INF&#x2F;spring.components æ–‡ä»¶</li><li>æ‰«ææ—¶<ul><li>å¦‚æœå‘ç° META-INF&#x2F;spring.components å­˜åœ¨, ä»¥å®ƒä¸ºå‡†åŠ è½½ bean definition</li><li>å¦åˆ™, ä¼šéå†åŒ…ä¸‹æ‰€æœ‰ class èµ„æº (åŒ…æ‹¬ jar å†…çš„)</li></ul></li><li>è§£å†³çš„é—®é¢˜ï¼Œåœ¨ç¼–è¯‘æœŸå°±æ‰¾åˆ° @Component ç»„ä»¶ï¼ŒèŠ‚çœè¿è¡ŒæœŸé—´æ‰«æ @Component çš„æ—¶é—´</li></ol><h3 id="45-ä»£ç†è¿›ä¸€æ­¥ç†è§£"><a href="#45-ä»£ç†è¿›ä¸€æ­¥ç†è§£" class="headerlink" title="45) ä»£ç†è¿›ä¸€æ­¥ç†è§£"></a>45) ä»£ç†è¿›ä¸€æ­¥ç†è§£</h3><h4 id="æ¼”ç¤º-ä»£ç†"><a href="#æ¼”ç¤º-ä»£ç†" class="headerlink" title="æ¼”ç¤º - ä»£ç†"></a>æ¼”ç¤º - ä»£ç†</h4><h5 id="ä»£ç å‚è€ƒ-42"><a href="#ä»£ç å‚è€ƒ-42" class="headerlink" title="ä»£ç å‚è€ƒ"></a>ä»£ç å‚è€ƒ</h5><p><strong>com.itheima.a45</strong> åŒ…</p><h4 id="æ”¶è·ğŸ’¡-57"><a href="#æ”¶è·ğŸ’¡-57" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><ol><li><p>spring ä»£ç†çš„è®¾è®¡ç‰¹ç‚¹</p><ul><li><p>ä¾èµ–æ³¨å…¥å’Œåˆå§‹åŒ–å½±å“çš„æ˜¯åŸå§‹å¯¹è±¡</p><ul><li>å› æ­¤ cglib ä¸èƒ½ç”¨ MethodProxy.invokeSuper()</li></ul></li><li><p>ä»£ç†ä¸ç›®æ ‡æ˜¯ä¸¤ä¸ªå¯¹è±¡ï¼ŒäºŒè€…æˆå‘˜å˜é‡å¹¶ä¸å…±ç”¨æ•°æ®</p></li></ul></li><li><p>static æ–¹æ³•ã€final æ–¹æ³•ã€private æ–¹æ³•å‡æ— æ³•å¢å¼º</p><ul><li>è¿›ä¸€æ­¥ç†è§£ä»£ç†å¢å¼ºåŸºäºæ–¹æ³•é‡å†™</li></ul></li></ol><h3 id="46-Value-è£…é…åº•å±‚"><a href="#46-Value-è£…é…åº•å±‚" class="headerlink" title="46) @Value è£…é…åº•å±‚"></a>46) @Value è£…é…åº•å±‚</h3><h4 id="æŒ‰ç±»å‹è£…é…çš„æ­¥éª¤"><a href="#æŒ‰ç±»å‹è£…é…çš„æ­¥éª¤" class="headerlink" title="æŒ‰ç±»å‹è£…é…çš„æ­¥éª¤"></a>æŒ‰ç±»å‹è£…é…çš„æ­¥éª¤</h4><ol><li>æŸ¥çœ‹éœ€è¦çš„ç±»å‹æ˜¯å¦ä¸º Optionalï¼Œæ˜¯ï¼Œåˆ™è¿›è¡Œå°è£…ï¼ˆéå»¶è¿Ÿï¼‰ï¼Œå¦åˆ™å‘ä¸‹èµ°</li><li>æŸ¥çœ‹éœ€è¦çš„ç±»å‹æ˜¯å¦ä¸º ObjectFactory æˆ– ObjectProviderï¼Œæ˜¯ï¼Œåˆ™è¿›è¡Œå°è£…ï¼ˆå»¶è¿Ÿï¼‰ï¼Œå¦åˆ™å‘ä¸‹èµ°</li><li>æŸ¥çœ‹éœ€è¦çš„ç±»å‹ï¼ˆæˆå‘˜æˆ–å‚æ•°ï¼‰ä¸Šæ˜¯å¦ç”¨ @Lazy ä¿®é¥°ï¼Œæ˜¯ï¼Œåˆ™è¿”å›ä»£ç†ï¼Œå¦åˆ™å‘ä¸‹èµ°</li><li>è§£æ @Value çš„å€¼<ol><li>å¦‚æœéœ€è¦çš„å€¼æ˜¯å­—ç¬¦ä¸²ï¼Œå…ˆè§£æ ${ }ï¼Œå†è§£æ #{ }</li><li>ä¸æ˜¯å­—ç¬¦ä¸²ï¼Œéœ€è¦ç”¨ TypeConverter è½¬æ¢</li></ol></li><li>çœ‹éœ€è¦çš„ç±»å‹æ˜¯å¦ä¸º Streamã€Arrayã€Collectionã€Mapï¼Œæ˜¯ï¼Œåˆ™æŒ‰é›†åˆå¤„ç†ï¼Œå¦åˆ™å‘ä¸‹èµ°</li><li>åœ¨ BeanFactory çš„ resolvableDependencies ä¸­æ‰¾æœ‰æ²¡æœ‰ç±»å‹åˆé€‚çš„å¯¹è±¡æ³¨å…¥ï¼Œæ²¡æœ‰å‘ä¸‹èµ°</li><li>åœ¨ BeanFactory åŠçˆ¶å·¥å‚ä¸­æ‰¾ç±»å‹åŒ¹é…çš„ bean è¿›è¡Œç­›é€‰ï¼Œç­›é€‰æ—¶ä¼šè€ƒè™‘ @Qualifier åŠæ³›å‹</li><li>ç»“æœä¸ªæ•°ä¸º 0 æŠ›å‡º NoSuchBeanDefinitionException å¼‚å¸¸ </li><li>å¦‚æœç»“æœ &gt; 1ï¼Œå†æ ¹æ® @Primary è¿›è¡Œç­›é€‰</li><li>å¦‚æœç»“æœä» &gt; 1ï¼Œå†æ ¹æ®æˆå‘˜åæˆ–å˜é‡åè¿›è¡Œç­›é€‰</li><li>ç»“æœä» &gt; 1ï¼ŒæŠ›å‡º NoUniqueBeanDefinitionException å¼‚å¸¸</li></ol><h4 id="æ¼”ç¤º-Value-è£…é…è¿‡ç¨‹"><a href="#æ¼”ç¤º-Value-è£…é…è¿‡ç¨‹" class="headerlink" title="æ¼”ç¤º - @Value è£…é…è¿‡ç¨‹"></a>æ¼”ç¤º - @Value è£…é…è¿‡ç¨‹</h4><h5 id="ä»£ç å‚è€ƒ-43"><a href="#ä»£ç å‚è€ƒ-43" class="headerlink" title="ä»£ç å‚è€ƒ"></a>ä»£ç å‚è€ƒ</h5><p><strong>com.itheima.a46</strong> åŒ…</p><h4 id="æ”¶è·ğŸ’¡-58"><a href="#æ”¶è·ğŸ’¡-58" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><ol><li>ContextAnnotationAutowireCandidateResolver ä½œç”¨ä¹‹ä¸€ï¼Œè·å– @Value çš„å€¼</li><li>äº†è§£ ${ } å¯¹åº”çš„è§£æå™¨</li><li>äº†è§£ #{ } å¯¹åº”çš„è§£æå™¨</li><li>TypeConvert çš„ä¸€é¡¹ä½“ç°</li></ol><h3 id="47-Autowired-è£…é…åº•å±‚"><a href="#47-Autowired-è£…é…åº•å±‚" class="headerlink" title="47) @Autowired è£…é…åº•å±‚"></a>47) @Autowired è£…é…åº•å±‚</h3><h4 id="æ¼”ç¤º-Autowired-è£…é…è¿‡ç¨‹"><a href="#æ¼”ç¤º-Autowired-è£…é…è¿‡ç¨‹" class="headerlink" title="æ¼”ç¤º - @Autowired è£…é…è¿‡ç¨‹"></a>æ¼”ç¤º - @Autowired è£…é…è¿‡ç¨‹</h4><h5 id="ä»£ç å‚è€ƒ-44"><a href="#ä»£ç å‚è€ƒ-44" class="headerlink" title="ä»£ç å‚è€ƒ"></a>ä»£ç å‚è€ƒ</h5><p><strong>com.itheima.a47</strong> åŒ…</p><h4 id="æ”¶è·ğŸ’¡-59"><a href="#æ”¶è·ğŸ’¡-59" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><ol><li>@Autowired æœ¬è´¨ä¸Šæ˜¯æ ¹æ®æˆå‘˜å˜é‡æˆ–æ–¹æ³•å‚æ•°çš„ç±»å‹è¿›è¡Œè£…é…</li><li>å¦‚æœå¾…è£…é…ç±»å‹æ˜¯ Optionalï¼Œéœ€è¦æ ¹æ® Optional æ³›å‹æ‰¾åˆ° beanï¼Œå†å°è£…ä¸º Optional å¯¹è±¡è£…é…</li><li>å¦‚æœå¾…è£…é…çš„ç±»å‹æ˜¯ ObjectFactoryï¼Œéœ€è¦æ ¹æ® ObjectFactory æ³›å‹åˆ›å»º ObjectFactory å¯¹è±¡è£…é…<ul><li>æ­¤æ–¹æ³•å¯ä»¥å»¶è¿Ÿ bean çš„è·å–</li></ul></li><li>å¦‚æœå¾…è£…é…çš„æˆå‘˜å˜é‡æˆ–æ–¹æ³•å‚æ•°ä¸Šç”¨ @Lazy æ ‡æ³¨ï¼Œä¼šåˆ›å»ºä»£ç†å¯¹è±¡è£…é…<ul><li>æ­¤æ–¹æ³•å¯ä»¥å»¶è¿ŸçœŸå® bean çš„è·å–</li><li>è¢«è£…é…çš„ä»£ç†ä¸ä½œä¸º bean</li></ul></li><li>å¦‚æœå¾…è£…é…ç±»å‹æ˜¯æ•°ç»„ï¼Œéœ€è¦è·å–æ•°ç»„å…ƒç´ ç±»å‹ï¼Œæ ¹æ®æ­¤ç±»å‹æ‰¾åˆ°å¤šä¸ª bean è¿›è¡Œè£…é…</li><li>å¦‚æœå¾…è£…é…ç±»å‹æ˜¯ Collection æˆ–å…¶å­æ¥å£ï¼Œéœ€è¦è·å– Collection æ³›å‹ï¼Œæ ¹æ®æ­¤ç±»å‹æ‰¾åˆ°å¤šä¸ª bean</li><li>å¦‚æœå¾…è£…é…ç±»å‹æ˜¯ ApplicationContext ç­‰ç‰¹æ®Šç±»å‹<ul><li>ä¼šåœ¨ BeanFactory çš„ resolvableDependencies æˆå‘˜æŒ‰ç±»å‹æŸ¥æ‰¾è£…é…</li><li>resolvableDependencies æ˜¯ map é›†åˆï¼Œkey æ˜¯ç‰¹æ®Šç±»å‹ï¼Œvalue æ˜¯å…¶å¯¹åº”å¯¹è±¡</li><li>ä¸èƒ½ç›´æ¥æ ¹æ® key è¿›è¡ŒæŸ¥æ‰¾ï¼Œè€Œæ˜¯ç”¨ isAssignableFrom é€ä¸€å°è¯•å³è¾¹ç±»å‹æ˜¯å¦å¯ä»¥è¢«èµ‹å€¼ç»™å·¦è¾¹çš„ key ç±»å‹</li></ul></li><li>å¦‚æœå¾…è£…é…ç±»å‹æœ‰æ³›å‹å‚æ•°<ul><li>éœ€è¦åˆ©ç”¨ ContextAnnotationAutowireCandidateResolver æŒ‰æ³›å‹å‚æ•°ç±»å‹ç­›é€‰</li></ul></li><li>å¦‚æœå¾…è£…é…ç±»å‹æœ‰ @Qualifier<ul><li>éœ€è¦åˆ©ç”¨ ContextAnnotationAutowireCandidateResolver æŒ‰æ³¨è§£æä¾›çš„ bean åç§°ç­›é€‰</li></ul></li><li>æœ‰ @Primary æ ‡æ³¨çš„ @Component æˆ– @Bean çš„å¤„ç†</li><li>ä¸æˆå‘˜å˜é‡åæˆ–æ–¹æ³•å‚æ•°ååŒå bean çš„å¤„ç†</li></ol><h3 id="48-äº‹ä»¶ç›‘å¬å™¨"><a href="#48-äº‹ä»¶ç›‘å¬å™¨" class="headerlink" title="48) äº‹ä»¶ç›‘å¬å™¨"></a>48) äº‹ä»¶ç›‘å¬å™¨</h3><h4 id="æ¼”ç¤º-äº‹ä»¶ç›‘å¬å™¨"><a href="#æ¼”ç¤º-äº‹ä»¶ç›‘å¬å™¨" class="headerlink" title="æ¼”ç¤º - äº‹ä»¶ç›‘å¬å™¨"></a>æ¼”ç¤º - äº‹ä»¶ç›‘å¬å™¨</h4><h5 id="ä»£ç å‚è€ƒ-45"><a href="#ä»£ç å‚è€ƒ-45" class="headerlink" title="ä»£ç å‚è€ƒ"></a>ä»£ç å‚è€ƒ</h5><p><strong>com.itheima.a48</strong> åŒ…</p><h4 id="æ”¶è·ğŸ’¡-60"><a href="#æ”¶è·ğŸ’¡-60" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><p>äº‹ä»¶ç›‘å¬å™¨çš„ä¸¤ç§æ–¹å¼</p><ol><li>å®ç° ApplicationListener æ¥å£<ul><li>æ ¹æ®æ¥å£æ³›å‹ç¡®å®šäº‹ä»¶ç±»å‹</li></ul></li><li>@EventListener æ ‡æ³¨ç›‘å¬æ–¹æ³•<ul><li>æ ¹æ®ç›‘å¬å™¨æ–¹æ³•å‚æ•°ç¡®å®šäº‹ä»¶ç±»å‹</li><li>è§£ææ—¶æœºï¼šåœ¨ SmartInitializingSingletonï¼ˆæ‰€æœ‰å•ä¾‹åˆå§‹åŒ–å®Œæˆåï¼‰ï¼Œè§£ææ¯ä¸ªå•ä¾‹ bean</li></ul></li></ol><h3 id="49-äº‹ä»¶å‘å¸ƒå™¨"><a href="#49-äº‹ä»¶å‘å¸ƒå™¨" class="headerlink" title="49) äº‹ä»¶å‘å¸ƒå™¨"></a>49) äº‹ä»¶å‘å¸ƒå™¨</h3><h4 id="æ¼”ç¤º-äº‹ä»¶å‘å¸ƒå™¨"><a href="#æ¼”ç¤º-äº‹ä»¶å‘å¸ƒå™¨" class="headerlink" title="æ¼”ç¤º - äº‹ä»¶å‘å¸ƒå™¨"></a>æ¼”ç¤º - äº‹ä»¶å‘å¸ƒå™¨</h4><h5 id="ä»£ç å‚è€ƒ-46"><a href="#ä»£ç å‚è€ƒ-46" class="headerlink" title="ä»£ç å‚è€ƒ"></a>ä»£ç å‚è€ƒ</h5><p><strong>com.itheima.a49</strong> åŒ…</p><h4 id="æ”¶è·ğŸ’¡-61"><a href="#æ”¶è·ğŸ’¡-61" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><p>äº‹ä»¶å‘å¸ƒå™¨æ¨¡æ‹Ÿå®ç°</p><ol><li>addApplicationListenerBean è´Ÿè´£æ”¶é›†å®¹å™¨ä¸­çš„ç›‘å¬å™¨<ul><li>ç›‘å¬å™¨ä¼šç»Ÿä¸€è½¬æ¢ä¸º GenericApplicationListener å¯¹è±¡ï¼Œä»¥æ”¯æŒåˆ¤æ–­äº‹ä»¶ç±»å‹</li></ul></li><li>multicastEvent éå†ç›‘å¬å™¨é›†åˆï¼Œå‘å¸ƒäº‹ä»¶<ul><li>å‘å¸ƒå‰å…ˆé€šè¿‡ GenericApplicationListener.supportsEventType åˆ¤æ–­æ”¯æŒè¯¥äº‹ä»¶ç±»å‹æ‰å‘äº‹ä»¶</li><li>å¯ä»¥åˆ©ç”¨çº¿ç¨‹æ± è¿›è¡Œå¼‚æ­¥å‘äº‹ä»¶ä¼˜åŒ–</li></ul></li><li>å¦‚æœå‘é€çš„äº‹ä»¶å¯¹è±¡ä¸æ˜¯ ApplicationEvent ç±»å‹ï¼ŒSpring ä¼šæŠŠå®ƒåŒ…è£…ä¸º PayloadApplicationEvent å¹¶ç”¨æ³›å‹æŠ€æœ¯è§£æäº‹ä»¶å¯¹è±¡çš„åŸå§‹ç±»å‹<ul><li>è§†é¢‘ä¸­æœªè®²è§£</li></ul></li></ol>]]></content>
      
      
      
        <tags>
            
            <tag> Javaå¼€å‘æ¡†æ¶ </tag>
            
            <tag> Spring </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringBoot</title>
      <link href="/2022/08/08/SpringBoot/"/>
      <url>/2022/08/08/SpringBoot/</url>
      
        <content type="html"><![CDATA[<p><strong>ä»Šæ—¥ç›®æ ‡ï¼š</strong></p><blockquote><ul><li>æŒæ¡åŸºäºSpringBootæ¡†æ¶çš„ç¨‹åºå¼€å‘æ­¥éª¤</li><li>ç†Ÿç»ƒä½¿ç”¨SpringBooté…ç½®ä¿¡æ¯ä¿®æ”¹æœåŠ¡å™¨é…ç½®</li><li>åŸºäºSpringBootçš„å®ŒæˆSSMæ•´åˆé¡¹ç›®å¼€å‘</li></ul></blockquote><h2 id="1ï¼ŒSpringBootç®€ä»‹"><a href="#1ï¼ŒSpringBootç®€ä»‹" class="headerlink" title="1ï¼ŒSpringBootç®€ä»‹"></a>1ï¼ŒSpringBootç®€ä»‹</h2><p><code>SpringBoot</code> æ˜¯ç”± <code>Pivotal</code> å›¢é˜Ÿæä¾›çš„å…¨æ–°æ¡†æ¶ï¼Œå…¶è®¾è®¡ç›®çš„æ˜¯ç”¨æ¥ç®€åŒ– <code>Spring</code> åº”ç”¨çš„<code>åˆå§‹æ­å»º</code>ä»¥åŠ<code>å¼€å‘è¿‡ç¨‹</code>ã€‚</p><p>ä½¿ç”¨äº† <code>Spring</code> æ¡†æ¶åå·²ç»ç®€åŒ–äº†æˆ‘ä»¬çš„å¼€å‘ã€‚è€Œ <code>SpringBoot</code> åˆæ˜¯å¯¹ <code>Spring</code> å¼€å‘è¿›è¡Œç®€åŒ–çš„ï¼Œå¯æƒ³è€ŒçŸ¥ <code>SpringBoot</code> ä½¿ç”¨çš„ç®€å•åŠå¹¿æ³›æ€§ã€‚æ—¢ç„¶ <code>SpringBoot</code> æ˜¯ç”¨æ¥ç®€åŒ– <code>Spring</code> å¼€å‘çš„ï¼Œé‚£æˆ‘ä»¬å°±å…ˆå›é¡¾ä¸€ä¸‹ï¼Œä»¥ <code>SpringMVC</code> å¼€å‘ä¸ºä¾‹ï¼š</p><ol><li><strong>åˆ›å»ºå·¥ç¨‹ï¼Œå¹¶åœ¨ <code>pom.xml</code> é…ç½®æ–‡ä»¶ä¸­é…ç½®æ‰€ä¾èµ–çš„åæ ‡</strong></li></ol><img src="/2022/08/08/SpringBoot/image-20210911132335452.png" alt="image-20210911132335452" style="zoom:50%;"><ol start="2"><li><p><strong>ç¼–å†™ <code>web3.0</code> çš„é…ç½®ç±»</strong></p><p>ä½œä¸º <code>web</code> ç¨‹åºï¼Œ<code>web3.0</code> çš„é…ç½®ç±»ä¸èƒ½ç¼ºå°‘ï¼Œè€Œè¿™ä¸ªé…ç½®ç±»è¿˜æ˜¯æ¯”è¾ƒéº»çƒ¦çš„ï¼Œä»£ç å¦‚ä¸‹</p></li></ol><img src="/2022/08/08/SpringBoot/image-20210911133112602.png" alt="image-20210911133112602" style="zoom:50%;"><ol start="3"><li><strong>ç¼–å†™ <code>SpringMVC</code> çš„é…ç½®ç±»</strong></li></ol><img src="/2022/08/08/SpringBoot/image-20210911133219847.png" alt="image-20210911133219847" style="zoom:50%;"><p>â€‹åšåˆ°è¿™åªæ˜¯å°†å·¥ç¨‹çš„æ¶å­æ­èµ·æ¥ã€‚è¦æƒ³è¢«å¤–ç•Œè®¿é—®ï¼Œæœ€èµ·ç è¿˜éœ€è¦æä¾›ä¸€ä¸ª <code>Controller</code> ç±»ï¼Œåœ¨è¯¥ç±»ä¸­æä¾›ä¸€ä¸ªæ–¹æ³•ã€‚</p><ol start="4"><li><strong>ç¼–å†™ <code>Controller</code> ç±»</strong></li></ol><img src="/2022/08/08/SpringBoot/image-20210911133532151.png" alt="image-20210911133532151" style="zoom:50%;"><p>ä»ä¸Šé¢çš„ <code>SpringMVC</code> ç¨‹åºå¼€å‘å¯ä»¥çœ‹åˆ°ï¼Œå‰ä¸‰æ­¥éƒ½æ˜¯åœ¨æ­å»ºç¯å¢ƒï¼Œè€Œä¸”è¿™ä¸‰æ­¥åŸºæœ¬éƒ½æ˜¯å›ºå®šçš„ã€‚<code>SpringBoot</code> å°±æ˜¯å¯¹è¿™ä¸‰æ­¥è¿›è¡Œç®€åŒ–äº†ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªå…¥é—¨æ¡ˆä¾‹æ¥ä½“ç° <code>SpingBoot</code> ç®€åŒ– <code>Spring</code> å¼€å‘ã€‚</p><h3 id="1-1-SpringBootå¿«é€Ÿå…¥é—¨"><a href="#1-1-SpringBootå¿«é€Ÿå…¥é—¨" class="headerlink" title="1.1  SpringBootå¿«é€Ÿå…¥é—¨"></a>1.1  SpringBootå¿«é€Ÿå…¥é—¨</h3><h4 id="1-1-1-å¼€å‘æ­¥éª¤"><a href="#1-1-1-å¼€å‘æ­¥éª¤" class="headerlink" title="1.1.1  å¼€å‘æ­¥éª¤"></a>1.1.1  å¼€å‘æ­¥éª¤</h4><p><code>SpringBoot</code> å¼€å‘èµ·æ¥ç‰¹åˆ«ç®€å•ï¼Œåˆ†ä¸ºå¦‚ä¸‹å‡ æ­¥ï¼š</p><ul><li>åˆ›å»ºæ–°æ¨¡å—ï¼Œé€‰æ‹©Springåˆå§‹åŒ–ï¼Œå¹¶é…ç½®æ¨¡å—ç›¸å…³åŸºç¡€ä¿¡æ¯</li><li>é€‰æ‹©å½“å‰æ¨¡å—éœ€è¦ä½¿ç”¨çš„æŠ€æœ¯é›†</li><li>å¼€å‘æ§åˆ¶å™¨ç±»</li><li>è¿è¡Œè‡ªåŠ¨ç”Ÿæˆçš„Applicationç±»</li></ul><p>çŸ¥é“äº† <code>SpringBoot</code> çš„å¼€å‘æ­¥éª¤åï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬è¿›è¡Œå…·ä½“çš„æ“ä½œ</p><h5 id="1-1-1-1-åˆ›å»ºæ–°æ¨¡å—"><a href="#1-1-1-1-åˆ›å»ºæ–°æ¨¡å—" class="headerlink" title="1.1.1.1  åˆ›å»ºæ–°æ¨¡å—"></a>1.1.1.1  åˆ›å»ºæ–°æ¨¡å—</h5><ul><li>ç‚¹å‡» <code>+</code> é€‰æ‹© <code>New Module</code> åˆ›å»ºæ–°æ¨¡å—</li></ul><img src="/2022/08/08/SpringBoot/image-20210911155135008.png" alt="image-20210911155135008" style="zoom:60%;"><ul><li><p>é€‰æ‹© <code>Spring Initializr</code> ï¼Œç”¨æ¥åˆ›å»º <code>SpringBoot</code> å·¥ç¨‹</p><p>ä»¥å‰æˆ‘ä»¬é€‰æ‹©çš„æ˜¯ <code>Maven</code> ï¼Œä»Šå¤©é€‰æ‹© <code>Spring Initializr</code> æ¥å¿«é€Ÿæ„å»º <code>SpringBoot</code> å·¥ç¨‹ã€‚è€Œåœ¨ <code>Module SDK</code> è¿™ä¸€é¡¹é€‰æ‹©æˆ‘ä»¬å®‰è£…çš„ <code>JDK</code> ç‰ˆæœ¬ã€‚</p></li></ul><img src="/2022/08/08/SpringBoot/image-20210911155249493.png" alt="image-20210911155249493" style="zoom:60%;"><ul><li><p>å¯¹ <code>SpringBoot</code> å·¥ç¨‹è¿›è¡Œç›¸å…³çš„è®¾ç½®</p><p>æˆ‘ä»¬ä½¿ç”¨è¿™ç§æ–¹å¼æ„å»ºçš„ <code>SpringBoot</code> å·¥ç¨‹å…¶å®ä¹Ÿæ˜¯ <code>Maven</code> å·¥ç¨‹ï¼Œè€Œè¯¥æ–¹å¼åªæ˜¯ä¸€ç§å¿«é€Ÿæ„å»ºçš„æ–¹å¼è€Œå·²ã€‚</p><img src="/2022/08/08/SpringBoot/image-20210911155916899.png" alt="image-20210911155916899" style="zoom:67%;"><blockquote><p>&#x3D;&#x3D;æ³¨æ„ï¼šæ‰“åŒ…æ–¹å¼è¿™é‡Œéœ€è¦è®¾ç½®ä¸º <code>Jar</code>&#x3D;&#x3D;</p></blockquote></li><li><p>é€‰ä¸­ <code>Web</code>ï¼Œç„¶åå‹¾é€‰ <code>Spring Web</code></p><p>ç”±äºæˆ‘ä»¬éœ€è¦å¼€å‘ä¸€ä¸ª <code>web</code> ç¨‹åºï¼Œä½¿ç”¨åˆ°äº† <code>SpringMVC</code> æŠ€æœ¯ï¼Œæ‰€ä»¥æŒ‰ç…§ä¸‹å›¾çº¢æ¡†è¿›è¡Œå‹¾é€‰</p></li></ul><img src="/2022/08/08/SpringBoot/image-20210911160040328.png" alt="image-20210911160040328" style="zoom:60%;"><ul><li>ä¸‹å›¾ç•Œé¢ä¸éœ€è¦ä»»ä½•ä¿®æ”¹ï¼Œç›´æ¥ç‚¹å‡» <code>Finish</code> å®Œæˆ <code>SpringBoot</code> å·¥ç¨‹çš„æ„å»º</li></ul><img src="/2022/08/08/SpringBoot/image-20210911160353534.png" alt="image-20210911160353534" style="zoom:70%;"><p>ç»è¿‡ä»¥ä¸Šæ­¥éª¤åå°±åˆ›å»ºäº†å¦‚ä¸‹ç»“æ„çš„æ¨¡å—ï¼Œå®ƒä¼šå¸®æˆ‘ä»¬è‡ªåŠ¨ç”Ÿæˆä¸€ä¸ª <code>Application</code> ç±»ï¼Œè€Œè¯¥ç±»ä¸€ä¼šå†å¯åŠ¨æœåŠ¡å™¨æ—¶ä¼šç”¨åˆ°</p><img src="/2022/08/08/SpringBoot/image-20210911160541833.png" alt="image-20210911160541833" style="zoom:80%;"><blockquote><p><strong>æ³¨æ„ï¼š</strong></p><ol><li><p>åœ¨åˆ›å»ºå¥½çš„å·¥ç¨‹ä¸­ä¸éœ€è¦åˆ›å»ºé…ç½®ç±»</p></li><li><p>åˆ›å»ºå¥½çš„é¡¹ç›®ä¼šè‡ªåŠ¨ç”Ÿæˆå…¶ä»–çš„ä¸€äº›æ–‡ä»¶ï¼Œè€Œè¿™äº›æ–‡ä»¶ç›®å‰å¯¹æˆ‘ä»¬æ¥è¯´æ²¡æœ‰ä»»ä½•ä½œç”¨ï¼Œæ‰€ä»¥å¯ä»¥å°†è¿™äº›æ–‡ä»¶åˆ é™¤ã€‚</p><p>å¯ä»¥åˆ é™¤çš„ç›®å½•å’Œæ–‡ä»¶å¦‚ä¸‹ï¼š</p><ul><li><code>.mvn</code></li><li><code>.gitignore</code></li><li><code>HELP.md</code></li><li><code>mvnw</code></li><li><code>mvnw.cmd</code></li></ul></li></ol></blockquote><h5 id="1-1-1-2-åˆ›å»º-Controller"><a href="#1-1-1-2-åˆ›å»º-Controller" class="headerlink" title="1.1.1.2  åˆ›å»º Controller"></a>1.1.1.2  åˆ›å»º <code>Controller</code></h5><p>åœ¨  <code>com.itheima.controller</code> åŒ…ä¸‹åˆ›å»º <code>BookController</code> ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/books&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getById</span><span class="params">(<span class="meta">@PathVariable</span> Integer id)</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;id ==&gt; &quot;</span>+id);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;hello , spring boot!&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="1-1-1-3-å¯åŠ¨æœåŠ¡å™¨"><a href="#1-1-1-3-å¯åŠ¨æœåŠ¡å™¨" class="headerlink" title="1.1.1.3  å¯åŠ¨æœåŠ¡å™¨"></a>1.1.1.3  å¯åŠ¨æœåŠ¡å™¨</h5><p>è¿è¡Œ <code>SpringBoot</code> å·¥ç¨‹ä¸éœ€è¦ä½¿ç”¨æœ¬åœ°çš„ <code>Tomcat</code> å’Œ æ’ä»¶ï¼Œåªè¿è¡Œé¡¹ç›® <code>com.itheima</code> åŒ…ä¸‹çš„ <code>Application</code> ç±»ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨æ§åˆ¶å°çœ‹å‡ºå¦‚ä¸‹ä¿¡æ¯</p><p><img src="/2022/08/08/SpringBoot/image-20210911165642280.png" alt="image-20210911165642280"></p><h5 id="1-1-1-4-è¿›è¡Œæµ‹è¯•"><a href="#1-1-1-4-è¿›è¡Œæµ‹è¯•" class="headerlink" title="1.1.1.4  è¿›è¡Œæµ‹è¯•"></a>1.1.1.4  è¿›è¡Œæµ‹è¯•</h5><p>ä½¿ç”¨ <code>Postman</code> å·¥å…·æ¥æµ‹è¯•æˆ‘ä»¬çš„ç¨‹åº</p><p><img src="/2022/08/08/SpringBoot/image-20210911160850121.png" alt="image-20210911160850121"></p><p>é€šè¿‡ä¸Šé¢çš„å…¥é—¨æ¡ˆä¾‹æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä½¿ç”¨ <code>SpringBoot</code> è¿›è¡Œå¼€å‘ï¼Œä½¿æ•´ä¸ªå¼€å‘å˜å¾—å¾ˆç®€å•ï¼Œé‚£å®ƒæ˜¯å¦‚ä½•åšåˆ°çš„å‘¢ï¼Ÿ</p><p>è¦ç ”ç©¶è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦çœ‹çœ‹ <code>Application</code> ç±»å’Œ <code>pom.xml</code> éƒ½ä¹¦å†™äº†ä»€ä¹ˆã€‚å…ˆçœ‹çœ‹ <code>Applicaion</code> ç±»ï¼Œè¯¥ç±»å†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Application</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(Application.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªç±»ä¸­çš„ä¸œè¥¿å¾ˆç®€å•ï¼Œå°±åœ¨ç±»ä¸Šæ·»åŠ äº†ä¸€ä¸ª <code>@SpringBootApplication</code> æ³¨è§£ï¼Œè€Œåœ¨ä¸»æ–¹æ³•ä¸­å°±ä¸€è¡Œä»£ç ã€‚æˆ‘ä»¬åœ¨å¯åŠ¨æœåŠ¡å™¨æ—¶å°±æ˜¯æ‰§è¡Œçš„è¯¥ç±»ä¸­çš„ä¸»æ–¹æ³•ã€‚</p><p>å†çœ‹çœ‹ <code>pom.xml</code> é…ç½®æ–‡ä»¶ä¸­çš„å†…å®¹</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!--æŒ‡å®šäº†ä¸€ä¸ªçˆ¶å·¥ç¨‹ï¼Œçˆ¶å·¥ç¨‹ä¸­çš„ä¸œè¥¿åœ¨è¯¥å·¥ç¨‹ä¸­å¯ä»¥ç»§æ‰¿è¿‡æ¥ä½¿ç”¨--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.5.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.itheima<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springboot_01_quickstart<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--JDK çš„ç‰ˆæœ¬--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">java.version</span>&gt;</span>8<span class="tag">&lt;/<span class="name">java.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--è¯¥ä¾èµ–å°±æ˜¯æˆ‘ä»¬åœ¨åˆ›å»º SpringBoot å·¥ç¨‹å‹¾é€‰çš„é‚£ä¸ª Spring Web äº§ç”Ÿçš„--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--è¿™ä¸ªæ˜¯å•å…ƒæµ‹è¯•çš„ä¾èµ–ï¼Œæˆ‘ä»¬ç°åœ¨æ²¡æœ‰è¿›è¡Œå•å…ƒæµ‹è¯•ï¼Œæ‰€ä»¥è¿™ä¸ªä¾èµ–ç°åœ¨å¯ä»¥æ²¡æœ‰--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--è¿™ä¸ªæ’ä»¶æ˜¯åœ¨æ‰“åŒ…æ—¶éœ€è¦çš„ï¼Œè€Œè¿™é‡Œæš‚æ—¶è¿˜æ²¡æœ‰ç”¨åˆ°--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬ä»£ç ä¹‹æ‰€ä»¥èƒ½ç®€åŒ–ï¼Œå°±æ˜¯å› ä¸ºæŒ‡å®šçš„çˆ¶å·¥ç¨‹å’Œ <code>Spring Web</code> ä¾èµ–å®ç°çš„ã€‚å…·ä½“çš„æˆ‘ä»¬åé¢åœ¨èŠã€‚</p><h4 id="1-1-2-å¯¹æ¯”"><a href="#1-1-2-å¯¹æ¯”" class="headerlink" title="1.1.2  å¯¹æ¯”"></a>1.1.2  å¯¹æ¯”</h4><p>åšå®Œ <code>SpringBoot</code> çš„å…¥é—¨æ¡ˆä¾‹åï¼Œæ¥ä¸‹æ¥å¯¹æ¯”ä¸€ä¸‹ <code>Spring</code> ç¨‹åºå’Œ <code>SpringBoot</code> ç¨‹åºã€‚å¦‚ä¸‹å›¾</p><img src="/2022/08/08/SpringBoot/image-20210911172200292.png" alt="image-20210911172200292" style="zoom:60%;"><ul><li><p><strong>åæ ‡</strong></p><p><code>Spring</code> ç¨‹åºä¸­çš„åæ ‡éœ€è¦è‡ªå·±ç¼–å†™ï¼Œè€Œä¸”åæ ‡éå¸¸å¤š</p><p><code>SpringBoot</code> ç¨‹åºä¸­çš„åæ ‡æ˜¯æˆ‘ä»¬åœ¨åˆ›å»ºå·¥ç¨‹æ—¶è¿›è¡Œå‹¾é€‰è‡ªåŠ¨ç”Ÿæˆçš„</p></li><li><p><strong>web3.0é…ç½®ç±»</strong></p><p><code>Spring</code> ç¨‹åºéœ€è¦è‡ªå·±ç¼–å†™è¿™ä¸ªé…ç½®ç±»ã€‚è¿™ä¸ªé…ç½®ç±»å¤§å®¶ä¹‹å‰ç¼–å†™è¿‡ï¼Œè‚¯å®šæ„Ÿè§‰å¾ˆå¤æ‚</p><p><code>SpringBoot</code> ç¨‹åºä¸éœ€è¦æˆ‘ä»¬è‡ªå·±ä¹¦å†™</p></li><li><p><strong>é…ç½®ç±»</strong></p><p><code>Spring/SpringMVC</code> ç¨‹åºçš„é…ç½®ç±»éœ€è¦è‡ªå·±ä¹¦å†™ã€‚è€Œ <code>SpringBoot</code>  ç¨‹åºåˆ™ä¸éœ€è¦ä¹¦å†™ã€‚</p></li></ul><blockquote><p><strong>æ³¨æ„ï¼š</strong>åŸºäºIdeaçš„ <code>Spring Initializr</code> å¿«é€Ÿæ„å»º <code>SpringBoot</code> å·¥ç¨‹æ—¶éœ€è¦è”ç½‘ã€‚</p></blockquote><h4 id="1-1-3-å®˜ç½‘æ„å»ºå·¥ç¨‹"><a href="#1-1-3-å®˜ç½‘æ„å»ºå·¥ç¨‹" class="headerlink" title="1.1.3  å®˜ç½‘æ„å»ºå·¥ç¨‹"></a>1.1.3  å®˜ç½‘æ„å»ºå·¥ç¨‹</h4><p>åœ¨å…¥é—¨æ¡ˆä¾‹ä¸­ä¹‹æ‰€ä»¥èƒ½å¿«é€Ÿæ„å»º <code>SpringBoot</code> å·¥ç¨‹ï¼Œæ˜¯å› ä¸º <code>Idea</code> ä½¿ç”¨äº†å®˜ç½‘æä¾›äº†å¿«é€Ÿæ„å»º <code>SpringBoot</code> å·¥ç¨‹çš„ç»„ä»¶å®ç°çš„ã€‚é‚£å¦‚ä½•åœ¨å®˜ç½‘è¿›è¡Œå·¥ç¨‹æ„å»ºå‘¢ï¼Ÿé€šè¿‡å¦‚ä¸‹æ­¥éª¤æ„å»º</p><h5 id="1-1-3-1-è¿›å…¥SpringBootå®˜ç½‘"><a href="#1-1-3-1-è¿›å…¥SpringBootå®˜ç½‘" class="headerlink" title="1.1.3.1  è¿›å…¥SpringBootå®˜ç½‘"></a>1.1.3.1  è¿›å…¥SpringBootå®˜ç½‘</h5><p>å®˜ç½‘åœ°å€å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">https://spring.io/projects/spring-boot</span><br></pre></td></tr></table></figure><p>è¿›å…¥åˆ° <code>SpringBoot</code> å®˜ç½‘åæ‹–åˆ°æœ€ä¸‹æ–¹å°±å¯ä»¥çœ‹åˆ°å¦‚ä¸‹å†…å®¹</p><img src="/2022/08/08/SpringBoot/image-20210911173712014.png" alt="image-20210911173712014" style="zoom:60%;"><p>ç„¶åç‚¹å‡» <code>Spring Initializr</code> è¶…é“¾æ¥å°±ä¼šè·³è½¬åˆ°å¦‚ä¸‹é¡µé¢</p><p><img src="/2022/08/08/SpringBoot/image-20210911174110687.png" alt="image-20210911174110687"></p><p>è¿™ä¸ªé¡µé¢å†…å®¹æ˜¯ä¸æ˜¯æ„Ÿè§‰å¾ˆçœ¼ç†Ÿçš„ï¼Œè¿™å’Œæˆ‘ä»¬ä½¿ç”¨ <code>Idea</code> å¿«é€Ÿæ„å»º <code>SpringBoot</code> å·¥ç¨‹çš„ç•Œé¢åŸºæœ¬ç›¸åŒã€‚åœ¨ä¸Šé¢é¡µé¢è¾“å…¥å¯¹åº”çš„ä¿¡æ¯</p><h5 id="1-1-3-2-é€‰æ‹©ä¾èµ–"><a href="#1-1-3-2-é€‰æ‹©ä¾èµ–" class="headerlink" title="1.1.3.2  é€‰æ‹©ä¾èµ–"></a>1.1.3.2  é€‰æ‹©ä¾èµ–</h5><p>é€‰æ‹© <code>Spring Web</code> å¯ä»¥ç‚¹å‡»ä¸Šå›¾å³ä¸Šè§’çš„ <code>ADD DEPENDENCIES... CTRL + B</code> æŒ‰é’®ï¼Œå°±ä¼šå‡ºç°å¦‚ä¸‹ç•Œé¢</p><p><img src="/2022/08/08/SpringBoot/image-20210911174650679.png" alt="image-20210911174650679"></p><h5 id="1-1-3-3-ç”Ÿæˆå·¥ç¨‹"><a href="#1-1-3-3-ç”Ÿæˆå·¥ç¨‹" class="headerlink" title="1.1.3.3  ç”Ÿæˆå·¥ç¨‹"></a>1.1.3.3  ç”Ÿæˆå·¥ç¨‹</h5><p>ä»¥ä¸Šæ­¥éª¤å®Œæˆåå°±å¯ä»¥ç”Ÿæˆ <code>SpringBoot</code> å·¥ç¨‹äº†ã€‚åœ¨é¡µé¢çš„æœ€ä¸‹æ–¹ç‚¹å‡» <code>GENERATE CTRL + å›è½¦</code> æŒ‰é’®ç”Ÿæˆå·¥ç¨‹å¹¶ä¸‹è½½åˆ°æœ¬åœ°ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º</p><p><img src="/2022/08/08/SpringBoot/image-20210911175222857.png" alt="image-20210911175222857"></p><p>æ‰“å¼€ä¸‹è½½å¥½çš„å‹ç¼©åŒ…å¯ä»¥çœ‹åˆ°å·¥ç¨‹ç»“æ„å’Œä½¿ç”¨ <code>Idea</code> ç”Ÿæˆçš„ä¸€æ¨¡ä¸€æ ·ï¼Œå¦‚ä¸‹å›¾</p><img src="/2022/08/08/SpringBoot/image-20210911175502834.png" alt="image-20210911175502834" style="zoom:80%;"><p>è€Œæ‰“å¼€ <code>pom.xml</code> æ–‡ä»¶ï¼Œé‡Œé¢ä¹ŸåŒ…å«äº†çˆ¶å·¥ç¨‹å’Œ <code>Spring Web</code> çš„ä¾èµ–ã€‚</p><p>é€šè¿‡ä¸Šé¢å®˜ç½‘çš„æ“ä½œï¼Œæˆ‘ä»¬çŸ¥é“ <code>Idea</code> ä¸­å¿«é€Ÿæ„å»º <code>SpringBoot</code> å·¥ç¨‹å…¶å®å°±æ˜¯ä½¿ç”¨çš„å®˜ç½‘çš„å¿«é€Ÿæ„å»ºç»„ä»¶ï¼Œé‚£ä»¥åå³ä½¿æ²¡æœ‰ <code>Idea</code> ä¹Ÿå¯ä»¥ä½¿ç”¨å®˜ç½‘çš„æ–¹å¼æ„å»º <code>SpringBoot</code> å·¥ç¨‹ã€‚</p><h4 id="1-1-4-SpringBootå·¥ç¨‹å¿«é€Ÿå¯åŠ¨"><a href="#1-1-4-SpringBootå·¥ç¨‹å¿«é€Ÿå¯åŠ¨" class="headerlink" title="1.1.4  SpringBootå·¥ç¨‹å¿«é€Ÿå¯åŠ¨"></a>1.1.4  SpringBootå·¥ç¨‹å¿«é€Ÿå¯åŠ¨</h4><h5 id="1-1-4-1-é—®é¢˜å¯¼å…¥"><a href="#1-1-4-1-é—®é¢˜å¯¼å…¥" class="headerlink" title="1.1.4.1  é—®é¢˜å¯¼å…¥"></a>1.1.4.1  é—®é¢˜å¯¼å…¥</h5><img src="/2022/08/08/SpringBoot/image-20210911180828611.png" alt="image-20210911180828611" style="zoom:50%;"><p>ä»¥åæˆ‘ä»¬å’Œå‰ç«¯å¼€å‘äººå‘˜ååŒå¼€å‘ï¼Œè€Œå‰ç«¯å¼€å‘äººå‘˜éœ€è¦æµ‹è¯•å‰ç«¯ç¨‹åºå°±éœ€è¦åç«¯å¼€å¯æœåŠ¡å™¨ï¼Œè¿™å°±å—åˆ¶äºåç«¯å¼€å‘äººå‘˜ã€‚ä¸ºäº†æ‘†è„±è¿™ä¸ªå—åˆ¶ï¼Œå‰ç«¯å¼€å‘äººå‘˜å°è¯•ç€åœ¨è‡ªå·±ç”µè„‘ä¸Šå®‰è£… <code>Tomcat</code> å’Œ <code>Idea</code> ï¼Œåœ¨è‡ªå·±ç”µè„‘ä¸Šå¯åŠ¨åç«¯ç¨‹åºï¼Œè¿™æ˜¾ç„¶ä¸ç°å®ã€‚</p><p>æˆ‘ä»¬åç«¯å¯ä»¥å°† <code>SpringBoot</code> å·¥ç¨‹æ‰“æˆ <code>jar</code> åŒ…ï¼Œè¯¥ <code>jar</code> åŒ…è¿è¡Œä¸ä¾èµ–äº <code>Tomcat</code> å’Œ <code>Idea</code> è¿™äº›å·¥å…·ä¹Ÿå¯ä»¥æ­£å¸¸è¿è¡Œï¼Œåªæ˜¯è¿™ä¸ª <code>jar</code> åŒ…åœ¨è¿è¡Œè¿‡ç¨‹ä¸­è¿æ¥å’Œæˆ‘ä»¬è‡ªå·±ç¨‹åºç›¸åŒçš„ <code>Mysql</code> æ•°æ®åº“å³å¯ã€‚è¿™æ ·å°±å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¦‚ä¸‹å›¾</p><img src="/2022/08/08/SpringBoot/image-20210911181714437.png" alt="image-20210911181714437" style="zoom:50%;"><p>é‚£ç°åœ¨é—®é¢˜æ˜¯å¦‚ä½•æ‰“åŒ…å‘¢ï¼Ÿ</p><h5 id="1-1-4-2-æ‰“åŒ…"><a href="#1-1-4-2-æ‰“åŒ…" class="headerlink" title="1.1.4.2  æ‰“åŒ…"></a>1.1.4.2  æ‰“åŒ…</h5><p>ç”±äºæˆ‘ä»¬åœ¨æ„å»º <code>SpringBoot</code> å·¥ç¨‹æ—¶å·²ç»åœ¨ <code>pom.xml</code> ä¸­é…ç½®äº†å¦‚ä¸‹æ’ä»¶</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ‰€ä»¥æˆ‘ä»¬åªéœ€è¦ä½¿ç”¨ <code>Maven</code> çš„ <code>package</code> æŒ‡ä»¤æ‰“åŒ…å°±ä¼šåœ¨ <code>target</code> ç›®å½•ä¸‹ç”Ÿæˆå¯¹åº”çš„ <code>Jar</code> åŒ…ã€‚</p><blockquote><p><strong>æ³¨æ„ï¼š</strong>è¯¥æ’ä»¶å¿…é¡»é…ç½®ï¼Œä¸ç„¶æ‰“å¥½çš„ <code>jar</code> åŒ…ä¹Ÿæ˜¯æœ‰é—®é¢˜çš„ã€‚</p></blockquote><h5 id="1-1-4-3-å¯åŠ¨"><a href="#1-1-4-3-å¯åŠ¨" class="headerlink" title="1.1.4.3  å¯åŠ¨"></a>1.1.4.3  å¯åŠ¨</h5><p>è¿›å…¥ <code>jar</code> åŒ…æ‰€åœ¨ä½ç½®ï¼Œåœ¨ <code>å‘½ä»¤æç¤ºç¬¦</code> ä¸­è¾“å…¥å¦‚ä¸‹å‘½ä»¤</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">jar -jar springboot_01_quickstart-0.0.1-SNAPSHOT.jar</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œä¸Šè¿°å‘½ä»¤å°±å¯ä»¥çœ‹åˆ° <code>SpringBoot</code> è¿è¡Œçš„æ—¥å¿—ä¿¡æ¯</p><img src="/2022/08/08/SpringBoot/image-20210911182956629.png" alt="image-20210911182956629" style="zoom:60%;"><h3 id="1-2-SpringBootæ¦‚è¿°"><a href="#1-2-SpringBootæ¦‚è¿°" class="headerlink" title="1.2  SpringBootæ¦‚è¿°"></a>1.2  SpringBootæ¦‚è¿°</h3><p><code>SpringBoot</code> æ˜¯ç”±Pivotalå›¢é˜Ÿæä¾›çš„å…¨æ–°æ¡†æ¶ï¼Œå…¶è®¾è®¡ç›®çš„æ˜¯ç”¨æ¥&#x3D;&#x3D;ç®€åŒ–&#x3D;&#x3D;Springåº”ç”¨çš„&#x3D;&#x3D;åˆå§‹æ­å»º&#x3D;&#x3D;ä»¥åŠ&#x3D;&#x3D;å¼€å‘è¿‡ç¨‹&#x3D;&#x3D;ã€‚</p><p>å¤§å®¶å·²ç»æ„Ÿå—äº† <code>SpringBoot</code> ç¨‹åºï¼Œå›è¿‡å¤´çœ‹çœ‹ <code>SpringBoot</code> ä¸»è¦ä½œç”¨æ˜¯ä»€ä¹ˆï¼Œå°±æ˜¯ç®€åŒ– <code>Spring</code> çš„æ­å»ºè¿‡ç¨‹å’Œå¼€å‘è¿‡ç¨‹ã€‚</p><p>åŸå§‹ <code>Spring</code> ç¯å¢ƒæ­å»ºå’Œå¼€å‘å­˜åœ¨ä»¥ä¸‹é—®é¢˜ï¼š</p><ul><li>é…ç½®ç¹ç</li><li>ä¾èµ–è®¾ç½®ç¹ç</li></ul><p><code>SpringBoot</code> ç¨‹åºä¼˜ç‚¹æ°å·§å°±æ˜¯é’ˆå¯¹ <code>Spring</code> çš„ç¼ºç‚¹</p><ul><li>è‡ªåŠ¨é…ç½®ã€‚è¿™ä¸ªæ˜¯ç”¨æ¥è§£å†³ <code>Spring</code> ç¨‹åºé…ç½®ç¹ççš„é—®é¢˜</li><li>èµ·æ­¥ä¾èµ–ã€‚è¿™ä¸ªæ˜¯ç”¨æ¥è§£å†³ <code>Spring</code> ç¨‹åºä¾èµ–è®¾ç½®ç¹ççš„é—®é¢˜</li><li>è¾…åŠ©åŠŸèƒ½ï¼ˆå†…ç½®æœåŠ¡å™¨,â€¦ï¼‰ã€‚æˆ‘ä»¬åœ¨å¯åŠ¨ <code>SpringBoot</code> ç¨‹åºæ—¶æ—¢æ²¡æœ‰ä½¿ç”¨æœ¬åœ°çš„ <code>tomcat</code> ä¹Ÿæ²¡æœ‰ä½¿ç”¨ <code>tomcat</code> æ’ä»¶ï¼Œè€Œæ˜¯ä½¿ç”¨ <code>SpringBoot</code> å†…ç½®çš„æœåŠ¡å™¨ã€‚</li></ul><p>æ¥ä¸‹æ¥æˆ‘ä»¬æ¥è¯´ä¸€ä¸‹ <code>SpringBoot</code> çš„èµ·æ­¥ä¾èµ–</p><h4 id="1-2-1-èµ·æ­¥ä¾èµ–"><a href="#1-2-1-èµ·æ­¥ä¾èµ–" class="headerlink" title="1.2.1  èµ·æ­¥ä¾èµ–"></a>1.2.1  èµ·æ­¥ä¾èµ–</h4><p>æˆ‘ä»¬ä½¿ç”¨ <code>Spring Initializr</code>  æ–¹å¼åˆ›å»ºçš„ <code>Maven</code> å·¥ç¨‹çš„çš„ <code>pom.xml</code> é…ç½®æ–‡ä»¶ä¸­è‡ªåŠ¨ç”Ÿæˆäº†å¾ˆå¤šåŒ…å« <code>starter</code> çš„ä¾èµ–ï¼Œå¦‚ä¸‹å›¾</p><img src="/2022/08/08/SpringBoot/image-20210918220338109.png" alt="image-20210918220338109" style="zoom:70%;"><p>è¿™äº›ä¾èµ–å°±æ˜¯<strong>å¯åŠ¨ä¾èµ–</strong>ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬æ¢ç©¶ä¸€ä¸‹ä»–æ˜¯å¦‚ä½•å®ç°çš„ã€‚</p><h5 id="1-2-1-1-æ¢ç´¢çˆ¶å·¥ç¨‹"><a href="#1-2-1-1-æ¢ç´¢çˆ¶å·¥ç¨‹" class="headerlink" title="1.2.1.1  æ¢ç´¢çˆ¶å·¥ç¨‹"></a>1.2.1.1  æ¢ç´¢çˆ¶å·¥ç¨‹</h5><p>ä»ä¸Šé¢çš„æ–‡ä»¶ä¸­å¯ä»¥çœ‹åˆ°æŒ‡å®šäº†ä¸€ä¸ªçˆ¶å·¥ç¨‹ï¼Œæˆ‘ä»¬è¿›å…¥åˆ°çˆ¶å·¥ç¨‹ï¼Œå‘ç°çˆ¶å·¥ç¨‹ä¸­åˆæŒ‡å®šäº†ä¸€ä¸ªçˆ¶å·¥ç¨‹ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º</p><img src="/2022/08/08/SpringBoot/image-20210918220855024.png" alt="image-20210918220855024" style="zoom:80%;"><p>å†è¿›å…¥åˆ°è¯¥çˆ¶å·¥ç¨‹ä¸­ï¼Œåœ¨è¯¥å·¥ç¨‹ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°é…ç½®å†…å®¹ç»“æ„å¦‚ä¸‹å›¾æ‰€ç¤º</p><img src="/2022/08/08/SpringBoot/image-20210918221042947.png" alt="image-20210918221042947" style="zoom:80%;"><p>ä¸Šå›¾ä¸­çš„ <code>properties</code> æ ‡ç­¾ä¸­å®šä¹‰äº†å„ä¸ªæŠ€æœ¯è½¯ä»¶ä¾èµ–çš„ç‰ˆæœ¬ï¼Œé¿å…äº†æˆ‘ä»¬åœ¨ä½¿ç”¨ä¸åŒè½¯ä»¶æŠ€æœ¯æ—¶è€ƒè™‘ç‰ˆæœ¬çš„å…¼å®¹é—®é¢˜ã€‚åœ¨ <code>properties</code> ä¸­æˆ‘ä»¬æ‰¾ <code>servlet</code>  å’Œ <code>mysql</code> çš„ç‰ˆæœ¬å¦‚ä¸‹å›¾</p><img src="/2022/08/08/SpringBoot/image-20210918221511249.png" alt="image-20210918221511249" style="zoom:80%;"><p><code>dependencyManagement</code> æ ‡ç­¾æ˜¯è¿›è¡Œä¾èµ–ç‰ˆæœ¬é”å®šï¼Œä½†æ˜¯å¹¶æ²¡æœ‰å¯¼å…¥å¯¹åº”çš„ä¾èµ–ï¼›å¦‚æœæˆ‘ä»¬å·¥ç¨‹éœ€è¦é‚£ä¸ªä¾èµ–åªéœ€è¦å¼•å…¥ä¾èµ–çš„ <code>groupid</code> å’Œ <code>artifactId</code> ä¸éœ€è¦å®šä¹‰ <code>version</code>ã€‚</p><p>è€Œ <code>build</code> æ ‡ç­¾ä¸­ä¹Ÿå¯¹æ’ä»¶çš„ç‰ˆæœ¬è¿›è¡Œäº†é”å®šï¼Œå¦‚ä¸‹å›¾</p><img src="/2022/08/08/SpringBoot/image-20210918221942453.png" alt="image-20210918221942453" style="zoom:80%;"><p>çœ‹å®Œäº†çˆ¶å·¥ç¨‹ä¸­ <code>pom.xml</code> çš„é…ç½®åä¸éš¾ç†è§£æˆ‘ä»¬å·¥ç¨‹çš„çš„ä¾èµ–ä¸ºä»€ä¹ˆéƒ½æ²¡æœ‰é…ç½® <code>version</code>ã€‚</p><h5 id="1-2-1-2-æ¢ç´¢ä¾èµ–"><a href="#1-2-1-2-æ¢ç´¢ä¾èµ–" class="headerlink" title="1.2.1.2  æ¢ç´¢ä¾èµ–"></a>1.2.1.2  æ¢ç´¢ä¾èµ–</h5><p>åœ¨æˆ‘ä»¬åˆ›å»ºçš„å·¥ç¨‹ä¸­çš„ <code>pom.xml</code> ä¸­é…ç½®äº†å¦‚ä¸‹ä¾èµ–</p><img src="/2022/08/08/SpringBoot/image-20210918222321402.png" alt="image-20210918222321402" style="zoom:80%;"><p>è¿›å…¥åˆ°è¯¥ä¾èµ–ï¼ŒæŸ¥çœ‹ <code>pom.xml</code> çš„ä¾èµ–ä¼šå‘ç°å®ƒå¼•å…¥äº†å¦‚ä¸‹çš„ä¾èµ–</p><img src="/2022/08/08/SpringBoot/image-20210918222607469.png" alt="image-20210918222607469" style="zoom:80%;"><p>é‡Œé¢çš„å¼•å…¥äº† <code>spring-web</code> å’Œ <code>spring-webmvc</code> çš„ä¾èµ–ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬çš„å·¥ç¨‹ä¸­æ²¡æœ‰ä¾èµ–è¿™ä¸¤ä¸ªåŒ…è¿˜èƒ½æ­£å¸¸ä½¿ç”¨ <code>springMVC</code> ä¸­çš„æ³¨è§£çš„åŸå› ã€‚</p><p>è€Œä¾èµ– <code>spring-boot-starter-tomcat</code> ï¼Œä»åå­—åŸºæœ¬èƒ½ç¡®è®¤å†…éƒ¨ä¾èµ–äº† <code>tomcat</code>ï¼Œæ‰€ä»¥æˆ‘ä»¬çš„å·¥ç¨‹æ‰èƒ½æ­£å¸¸å¯åŠ¨ã€‚</p><p><code>ç»“è®ºï¼šä»¥åéœ€è¦ä½¿ç”¨æŠ€æœ¯ï¼Œåªéœ€è¦å¼•å…¥è¯¥æŠ€æœ¯å¯¹åº”çš„èµ·æ­¥ä¾èµ–å³å¯</code></p><h5 id="1-2-1-3-å°ç»“"><a href="#1-2-1-3-å°ç»“" class="headerlink" title="1.2.1.3  å°ç»“"></a>1.2.1.3  å°ç»“</h5><p><strong>starter</strong></p><ul><li><code>SpringBoot</code> ä¸­å¸¸è§é¡¹ç›®åç§°ï¼Œå®šä¹‰äº†å½“å‰é¡¹ç›®ä½¿ç”¨çš„æ‰€æœ‰é¡¹ç›®åæ ‡ï¼Œä»¥è¾¾åˆ°å‡å°‘ä¾èµ–é…ç½®çš„ç›®çš„</li></ul><p><strong>parent</strong></p><ul><li><p>æ‰€æœ‰ <code>SpringBoot</code> é¡¹ç›®è¦ç»§æ‰¿çš„é¡¹ç›®ï¼Œå®šä¹‰äº†è‹¥å¹²ä¸ªåæ ‡ç‰ˆæœ¬å·ï¼ˆä¾èµ–ç®¡ç†ï¼Œè€Œéä¾èµ–ï¼‰ï¼Œä»¥è¾¾åˆ°å‡å°‘ä¾èµ–å†²çªçš„ç›®çš„</p></li><li><p><code>spring-boot-starter-parent</code>ï¼ˆ2.5.0ï¼‰ä¸ <code>spring-boot-starter-parent</code>ï¼ˆ2.4.6ï¼‰å…±è®¡57å¤„åæ ‡ç‰ˆæœ¬ä¸åŒ</p></li></ul><p><strong>å®é™…å¼€å‘</strong></p><ul><li><p>ä½¿ç”¨ä»»æ„åæ ‡æ—¶ï¼Œä»…ä¹¦å†™GAVä¸­çš„Gå’ŒAï¼ŒVç”±SpringBootæä¾›</p><blockquote><p>Gï¼šgroupid</p><p>Aï¼šartifactId</p><p>Vï¼šversion</p></blockquote></li><li><p>å¦‚å‘ç”Ÿåæ ‡é”™è¯¯ï¼Œå†æŒ‡å®šversionï¼ˆè¦å°å¿ƒç‰ˆæœ¬å†²çªï¼‰</p></li></ul><h4 id="1-2-2-ç¨‹åºå¯åŠ¨"><a href="#1-2-2-ç¨‹åºå¯åŠ¨" class="headerlink" title="1.2.2  ç¨‹åºå¯åŠ¨"></a>1.2.2  ç¨‹åºå¯åŠ¨</h4><p>åˆ›å»ºçš„æ¯ä¸€ä¸ª <code>SpringBoot</code> ç¨‹åºæ—¶éƒ½åŒ…å«ä¸€ä¸ªç±»ä¼¼äºä¸‹é¢çš„ç±»ï¼Œæˆ‘ä»¬å°†è¿™ä¸ªç±»ç§°ä½œå¼•å¯¼ç±»</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Springboot01QuickstartApplication</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(Springboot01QuickstartApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„ï¼š</strong></p><ul><li><p><code>SpringBoot</code> åœ¨åˆ›å»ºé¡¹ç›®æ—¶ï¼Œé‡‡ç”¨jarçš„æ‰“åŒ…æ–¹å¼</p></li><li><p><code>SpringBoot</code> çš„å¼•å¯¼ç±»æ˜¯é¡¹ç›®çš„å…¥å£ï¼Œè¿è¡Œ <code>main</code> æ–¹æ³•å°±å¯ä»¥å¯åŠ¨é¡¹ç›®</p><p>å› ä¸ºæˆ‘ä»¬åœ¨ <code>pom.xml</code> ä¸­é…ç½®äº† <code>spring-boot-starter-web</code> ä¾èµ–ï¼Œè€Œè¯¥ä¾èµ–é€šè¿‡å‰é¢çš„å­¦ä¹ çŸ¥é“å®ƒä¾èµ– <code>tomcat</code> ï¼Œæ‰€ä»¥è¿è¡Œ <code>main</code> æ–¹æ³•å°±å¯ä»¥ä½¿ç”¨ <code>tomcat</code> å¯åŠ¨å’±ä»¬çš„å·¥ç¨‹ã€‚</p></li></ul><h4 id="1-2-3-åˆ‡æ¢webæœåŠ¡å™¨"><a href="#1-2-3-åˆ‡æ¢webæœåŠ¡å™¨" class="headerlink" title="1.2.3  åˆ‡æ¢webæœåŠ¡å™¨"></a>1.2.3  åˆ‡æ¢webæœåŠ¡å™¨</h4><p>ç°åœ¨æˆ‘ä»¬å¯åŠ¨å·¥ç¨‹ä½¿ç”¨çš„æ˜¯ <code>tomcat</code> æœåŠ¡å™¨ï¼Œé‚£èƒ½ä¸èƒ½ä¸ä½¿ç”¨ <code>tomcat</code> è€Œä½¿ç”¨ <code>jetty</code> æœåŠ¡å™¨ï¼Œ<code>jetty</code> åœ¨æˆ‘ä»¬ <code>maven</code> é«˜çº§æ—¶è®² <code>maven</code> ç§æœä½¿ç”¨çš„æœåŠ¡å™¨ã€‚è€Œè¦åˆ‡æ¢ <code>web</code> æœåŠ¡å™¨å°±éœ€è¦å°†é»˜è®¤çš„ <code>tomcat</code> æœåŠ¡å™¨ç»™æ’é™¤æ‰ï¼Œæ€ä¹ˆæ’é™¤å‘¢ï¼Ÿä½¿ç”¨ <code>exclusion</code> æ ‡ç­¾</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-tomcat<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ç°åœ¨æˆ‘ä»¬è¿è¡Œå¼•å¯¼ç±»å¯ä»¥å—ï¼Ÿè¿è¡Œä¸€ä¸‹è¯•è¯•ï¼Œæ‰“å°çš„æ—¥å¿—ä¿¡æ¯å¦‚ä¸‹</p><p><img src="/2022/08/08/SpringBoot/image-20210918232512707.png" alt="image-20210918232512707"></p><p>ç¨‹åºç›´æ¥åœæ­¢äº†ï¼Œä¸ºä»€ä¹ˆå‘¢ï¼Ÿé‚£æ˜¯å› ä¸ºæ’é™¤äº† <code>tomcat</code> æœåŠ¡å™¨ï¼Œç¨‹åºä¸­å°±æ²¡æœ‰æœåŠ¡å™¨äº†ã€‚æ‰€ä»¥æ­¤æ—¶ä¸å…‰è¦æ’é™¤ <code>tomcat</code> æœåŠ¡å™¨ï¼Œè¿˜è¦å¼•å…¥ <code>jetty</code> æœåŠ¡å™¨ã€‚åœ¨ <code>pom.xml</code> ä¸­å› ä¸º <code>jetty</code> çš„èµ·æ­¥ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-jetty<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥å†æ¬¡è¿è¡Œå¼•å¯¼ç±»ï¼Œåœ¨æ—¥å¿—ä¿¡æ¯ä¸­å°±å¯ä»¥çœ‹åˆ°ä½¿ç”¨çš„æ˜¯ <code>jetty</code> æœåŠ¡å™¨</p><p><img src="/2022/08/08/SpringBoot/image-20210918232904623.png" alt="image-20210918232904623"></p><p><strong>å°ç»“ï¼š</strong></p><p>é€šè¿‡åˆ‡æ¢æœåŠ¡å™¨ï¼Œæˆ‘ä»¬ä¸éš¾å‘ç°åœ¨ä½¿ç”¨ <code>SpringBoot</code> æ¢æŠ€æœ¯æ—¶åªéœ€è¦å¯¼å…¥è¯¥æŠ€æœ¯çš„èµ·æ­¥ä¾èµ–å³å¯ã€‚</p><h2 id="2ï¼Œé…ç½®æ–‡ä»¶"><a href="#2ï¼Œé…ç½®æ–‡ä»¶" class="headerlink" title="2ï¼Œé…ç½®æ–‡ä»¶"></a>2ï¼Œé…ç½®æ–‡ä»¶</h2><h3 id="2-1-é…ç½®æ–‡ä»¶æ ¼å¼"><a href="#2-1-é…ç½®æ–‡ä»¶æ ¼å¼" class="headerlink" title="2.1  é…ç½®æ–‡ä»¶æ ¼å¼"></a>2.1  é…ç½®æ–‡ä»¶æ ¼å¼</h3><p>æˆ‘ä»¬ç°åœ¨å¯åŠ¨æœåŠ¡å™¨é»˜è®¤çš„ç«¯å£å·æ˜¯ <code>8080</code>ï¼Œè®¿é—®è·¯å¾„å¯ä»¥ä¹¦å†™ä¸º</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">http://localhost:8080/books/1</span><br></pre></td></tr></table></figure><p>åœ¨çº¿ä¸Šç¯å¢ƒæˆ‘ä»¬è¿˜æ˜¯å¸Œæœ›å°†ç«¯å£å·æ”¹ä¸º <code>80</code>ï¼Œè¿™æ ·åœ¨è®¿é—®çš„æ—¶å€™å°±å¯ä»¥ä¸å†™ç«¯å£å·äº†ï¼Œå¦‚ä¸‹</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">http://localhost/books/1</span><br></pre></td></tr></table></figure><p>è€Œ <code>SpringBoot</code> ç¨‹åºå¦‚ä½•ä¿®æ”¹å‘¢ï¼Ÿ<code>SpringBoot</code> æä¾›äº†å¤šç§å±æ€§é…ç½®æ–¹å¼</p><ul><li><p><code>application.properties</code></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">server.port=80</span><br></pre></td></tr></table></figure></li><li><p><code>application.yml</code></p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line"><span class="attr">port:</span> <span class="number">81</span></span><br></pre></td></tr></table></figure></li><li><p><code>application.yaml</code></p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line"><span class="attr">port:</span> <span class="number">82</span></span><br></pre></td></tr></table></figure></li></ul><blockquote><p>æ³¨æ„ï¼š<code>SpringBoot</code> ç¨‹åºçš„é…ç½®æ–‡ä»¶åå¿…é¡»æ˜¯ <code>application</code> ï¼Œåªæ˜¯åç¼€åä¸åŒè€Œå·²ã€‚</p></blockquote><h4 id="2-1-1-ç¯å¢ƒå‡†å¤‡"><a href="#2-1-1-ç¯å¢ƒå‡†å¤‡" class="headerlink" title="2.1.1  ç¯å¢ƒå‡†å¤‡"></a>2.1.1  ç¯å¢ƒå‡†å¤‡</h4><p>åˆ›å»ºä¸€ä¸ªæ–°å·¥ç¨‹ <code>springboot_02_base_config</code> ç”¨æ¥æ¼”ç¤ºä¸åŒçš„é…ç½®æ–‡ä»¶ï¼Œå·¥ç¨‹ç¯å¢ƒå’Œå…¥é—¨æ¡ˆä¾‹ä¸€æ¨¡ä¸€æ ·ï¼Œç»“æ„å¦‚ä¸‹ï¼š</p><img src="/2022/08/08/SpringBoot/image-20210917151314753.png" alt="image-20210917151314753" style="zoom:80%;"><p>åœ¨è¯¥å·¥ç¨‹ä¸­çš„ <code>com.itheima.controller</code> åŒ…ä¸‹åˆ›å»ºä¸€ä¸ªåä¸º <code>BookController</code> çš„æ§åˆ¶å™¨ã€‚å†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/books&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getById</span><span class="params">(<span class="meta">@PathVariable</span> Integer id)</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;id ==&gt; &quot;</span>+id);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;hello , spring boot!&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="2-1-2-ä¸åŒé…ç½®æ–‡ä»¶æ¼”ç¤º"><a href="#2-1-2-ä¸åŒé…ç½®æ–‡ä»¶æ¼”ç¤º" class="headerlink" title="2.1.2  ä¸åŒé…ç½®æ–‡ä»¶æ¼”ç¤º"></a>2.1.2  ä¸åŒé…ç½®æ–‡ä»¶æ¼”ç¤º</h4><ul><li><strong>application.propertiesé…ç½®æ–‡ä»¶</strong></li></ul><p>ç°åœ¨éœ€è¦è¿›è¡Œé…ç½®ï¼Œé…åˆæ–‡ä»¶å¿…é¡»æ”¾åœ¨ <code>resources</code> ç›®å½•ä¸‹ï¼Œè€Œè¯¥ç›®å½•ä¸‹æœ‰ä¸€ä¸ªåä¸º <code>application.properties</code> çš„é…ç½®æ–‡ä»¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨è¯¥é…ç½®æ–‡ä»¶ä¸­ä¿®æ”¹ç«¯å£å·ï¼Œåœ¨è¯¥é…ç½®æ–‡ä»¶ä¸­ä¹¦å†™ <code>port</code> ï¼Œ<code>Idea</code> å°±ä¼šæç¤ºï¼Œå¦‚ä¸‹</p><img src="/2022/08/08/SpringBoot/image-20210917161422535.png" alt="image-20210917161422535" style="zoom:80%;"><p><code>application.properties</code> é…ç½®æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">server.port</span>=<span class="string">80</span></span><br></pre></td></tr></table></figure><p>å¯åŠ¨æœåŠ¡ï¼Œä¼šåœ¨æ§åˆ¶å°æ‰“å°å‡ºæ—¥å¿—ä¿¡æ¯ï¼Œä»æ—¥å¿—ä¿¡æ¯ä¸­å¯ä»¥çœ‹åˆ°ç»‘å®šçš„ç«¯å£å·å·²ç»ä¿®æ”¹äº†</p><img src="/2022/08/08/SpringBoot/image-20210917161720855.png" alt="image-20210917161720855" style="zoom:80%;"><ul><li><strong>application.ymlé…ç½®æ–‡ä»¶</strong></li></ul><p>åˆ é™¤ <code>application.properties</code> é…ç½®æ–‡ä»¶ä¸­çš„å†…å®¹ã€‚åœ¨ <code>resources</code> ä¸‹åˆ›å»ºä¸€ä¸ªåä¸º <code>application.yml</code> çš„é…ç½®æ–‡ä»¶ï¼Œåœ¨è¯¥æ–‡ä»¶ä¸­ä¹¦å†™ç«¯å£å·çš„é…ç½®é¡¹ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line"><span class="attr">port:</span> <span class="number">81</span></span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼š åœ¨<code>:</code>åï¼Œæ•°æ®å‰ä¸€å®šè¦åŠ ç©ºæ ¼ã€‚</p></blockquote><p>è€Œåœ¨ <code>yml</code> é…ç½®æ–‡ä»¶ä¸­ä¹Ÿæ˜¯æœ‰æç¤ºåŠŸèƒ½çš„ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨è¯¥æ–‡ä»¶ä¸­ä¹¦å†™ <code>port</code> ï¼Œç„¶å <code>idea</code> å°±ä¼šæç¤ºå¹¶ä¹¦å†™æˆä¸Šé¢çš„æ ¼å¼</p><img src="/2022/08/08/SpringBoot/image-20210917162512646.png" alt="image-20210917162512646" style="zoom:80%;"><p>å¯åŠ¨æœåŠ¡ï¼Œå¯ä»¥åœ¨æ§åˆ¶å°çœ‹åˆ°ç»‘å®šçš„ç«¯å£å·æ˜¯ <code>81</code></p><p><img src="/2022/08/08/SpringBoot/image-20210917162700711.png" alt="image-20210917162700711"></p><ul><li><strong>application.yamlé…ç½®æ–‡ä»¶</strong></li></ul><p>åˆ é™¤ <code>application.yml</code> é…ç½®æ–‡ä»¶å’Œ <code>application.properties</code> é…ç½®æ–‡ä»¶å†…å®¹ï¼Œç„¶ååœ¨ <code>resources</code> ä¸‹åˆ›å»ºåä¸º <code>application.yaml</code> çš„é…ç½®æ–‡ä»¶ï¼Œé…ç½®å†…å®¹å’Œåç¼€åä¸º <code>yml</code> çš„é…ç½®æ–‡ä»¶ä¸­çš„å†…å®¹ç›¸åŒï¼Œåªæ˜¯ä½¿ç”¨äº†ä¸åŒçš„åç¼€åè€Œå·²</p><p><code>application.yaml</code> é…ç½®æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line"><span class="attr">port:</span> <span class="number">83</span></span><br></pre></td></tr></table></figure><p>å¯åŠ¨æœåŠ¡ï¼Œåœ¨æ§åˆ¶å°å¯ä»¥çœ‹åˆ°ç»‘å®šçš„ç«¯å£å·</p><p><img src="/2022/08/08/SpringBoot/image-20210917163335913.png" alt="image-20210917163335913"></p><p>æ³¨æ„ï¼šåœ¨é…åˆæ–‡ä»¶ä¸­å¦‚æœæ²¡æœ‰æç¤ºï¼Œå¯ä»¥ä½¿ç”¨ä¸€ä¸‹æ–¹å¼è§£å†³</p><ul><li>ç‚¹å‡» <code>File</code> é€‰ä¸­ <code>Project Structure</code></li></ul><img src="/2022/08/08/SpringBoot/image-20210917163557071.png" alt="image-20210917163557071" style="zoom:80%;"><ul><li>å¼¹å‡ºå¦‚ä¸‹çª—å£ï¼ŒæŒ‰å›¾ä¸­æ ‡è®°çº¢æ¡†è¿›è¡Œé€‰æ‹©</li></ul><img src="/2022/08/08/SpringBoot/image-20210917163736458.png" alt="image-20210917163736458" style="zoom:70%;"><ul><li>é€šè¿‡ä¸Šè¿°æ“ä½œï¼Œä¼šå¼¹å‡ºå¦‚ä¸‹çª—å£</li></ul><img src="/2022/08/08/SpringBoot/image-20210917163818051.png" alt="image-20210917163818051" style="zoom:80%;"><ul><li>ç‚¹å‡»ä¸Šå›¾çš„ <code>+</code> å·ï¼Œå¼¹å‡ºé€‰æ‹©è¯¥æ¨¡å—çš„é…ç½®æ–‡ä»¶</li></ul><img src="/2022/08/08/SpringBoot/image-20210917163828518.png" alt="image-20210917163828518" style="zoom:80%;"><ul><li>é€šè¿‡ä¸Šè¿°å‡ æ­¥åï¼Œå°±å¯ä»¥çœ‹åˆ°å¦‚ä¸‹ç•Œé¢ã€‚<code>properties</code> ç±»å‹çš„é…åˆæ–‡ä»¶æœ‰ä¸€ä¸ªï¼Œ<code>ymal</code> ç±»å‹çš„é…ç½®æ–‡ä»¶æœ‰ä¸¤ä¸ª</li></ul><img src="/2022/08/08/SpringBoot/image-20210917163846243.png" alt="image-20210917163846243" style="zoom:80%;"><h4 id="2-1-3-ä¸‰ç§é…åˆæ–‡ä»¶çš„ä¼˜å…ˆçº§"><a href="#2-1-3-ä¸‰ç§é…åˆæ–‡ä»¶çš„ä¼˜å…ˆçº§" class="headerlink" title="2.1.3  ä¸‰ç§é…åˆæ–‡ä»¶çš„ä¼˜å…ˆçº§"></a>2.1.3  ä¸‰ç§é…åˆæ–‡ä»¶çš„ä¼˜å…ˆçº§</h4><p>åœ¨ä¸‰ç§é…åˆæ–‡ä»¶ä¸­åˆ†åˆ«é…ç½®ä¸åŒçš„ç«¯å£å·ï¼Œå¯åŠ¨æœåŠ¡æŸ¥çœ‹ç»‘å®šçš„ç«¯å£å·ã€‚ç”¨è¿™ç§æ–¹å¼å°±å¯ä»¥çœ‹åˆ°å“ªä¸ªé…ç½®æ–‡ä»¶çš„ä¼˜å…ˆçº§æ›´é«˜ä¸€äº›</p><p><code>application.properties</code> æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">server.port</span>=<span class="string">80</span></span><br></pre></td></tr></table></figure><p><code>application.yml</code> æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line"><span class="attr">port:</span> <span class="number">81</span></span><br></pre></td></tr></table></figure><p><code>application.yaml</code> æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line"><span class="attr">port:</span> <span class="number">82</span></span><br></pre></td></tr></table></figure><p>å¯åŠ¨æœåŠ¡ï¼Œåœ¨æ§åˆ¶å°å¯ä»¥çœ‹åˆ°ä½¿ç”¨çš„ç«¯å£å·æ˜¯ <code>80</code>ã€‚è¯´æ˜ <code>application.properties</code> çš„ä¼˜å…ˆçº§æœ€é«˜</p><p>æ³¨é‡Šæ‰ <code>application.properties</code> é…ç½®æ–‡ä»¶å†…å®¹ã€‚å†æ¬¡å¯åŠ¨æœåŠ¡ï¼Œåœ¨æ§åˆ¶å°å¯ä»¥çœ‹åˆ°ä½¿ç”¨çš„ç«¯å£å·æ˜¯ <code>81</code>ï¼Œè¯´æ˜ <code>application.yml</code> é…ç½®æ–‡ä»¶ä¸ºç¬¬äºŒä¼˜å…ˆçº§ã€‚</p><p>ä»ä¸Šè¿°çš„éªŒè¯ç»“æœå¯ä»¥ç¡®å®šä¸‰ç§é…ç½®æ–‡ä»¶çš„ä¼˜å…ˆçº§æ˜¯ï¼š</p><p><code>application.properties</code>  &gt;  <code>application.yml</code>   &gt;  <code>application.yaml</code></p><blockquote><p><strong>æ³¨æ„ï¼š</strong></p><ul><li><p><code>SpringBoot</code> æ ¸å¿ƒé…ç½®æ–‡ä»¶åä¸º <code>application</code></p></li><li><p><code>SpringBoot</code> å†…ç½®å±æ€§è¿‡å¤šï¼Œä¸”æ‰€æœ‰å±æ€§é›†ä¸­åœ¨ä¸€èµ·ä¿®æ”¹ï¼Œåœ¨ä½¿ç”¨æ—¶ï¼Œé€šè¿‡æç¤ºé”®+å…³é”®å­—ä¿®æ”¹å±æ€§</p><p>ä¾‹å¦‚è¦è®¾ç½®æ—¥å¿—çš„çº§åˆ«æ—¶ï¼Œå¯ä»¥åœ¨é…ç½®æ–‡ä»¶ä¸­ä¹¦å†™ <code>logging</code>ï¼Œå°±ä¼šæç¤ºå‡ºæ¥ã€‚é…ç½®å†…å®¹å¦‚ä¸‹</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">logging:</span></span><br><span class="line">  <span class="attr">level:</span></span><br><span class="line">    <span class="attr">root:</span> <span class="string">info</span></span><br></pre></td></tr></table></figure></li></ul></blockquote><h3 id="2-2-yamlæ ¼å¼"><a href="#2-2-yamlæ ¼å¼" class="headerlink" title="2.2  yamlæ ¼å¼"></a>2.2  yamlæ ¼å¼</h3><p>ä¸Šé¢è®²äº†ä¸‰ç§ä¸åŒç±»å‹çš„é…ç½®æ–‡ä»¶ï¼Œè€Œ <code>properties</code> ç±»å‹çš„é…åˆæ–‡ä»¶ä¹‹å‰æˆ‘ä»¬å­¦ä¹ è¿‡ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬é‡ç‚¹å­¦ä¹  <code>yaml</code> ç±»å‹çš„é…ç½®æ–‡ä»¶ã€‚</p><p><strong>YAMLï¼ˆYAML Ainâ€™t Markup Languageï¼‰ï¼Œä¸€ç§æ•°æ®åºåˆ—åŒ–æ ¼å¼ã€‚</strong>è¿™ç§æ ¼å¼çš„é…ç½®æ–‡ä»¶åœ¨è¿‘äº›å¹´å·²ç»å æœ‰ä¸»å¯¼åœ°ä½ï¼Œé‚£ä¹ˆè¿™ç§é…ç½®æ–‡ä»¶å’Œå‰æœŸä½¿ç”¨çš„é…ç½®æ–‡ä»¶æ˜¯æœ‰ä¸€äº›ä¼˜åŠ¿çš„ï¼Œæˆ‘ä»¬å…ˆçœ‹ä¹‹å‰ä½¿ç”¨çš„é…ç½®æ–‡ä»¶ã€‚</p><p>æœ€å¼€å§‹æˆ‘ä»¬ä½¿ç”¨çš„æ˜¯ <code>xml</code> ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">enterprise</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>itcast<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">age</span>&gt;</span>16<span class="tag">&lt;/<span class="name">age</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tel</span>&gt;</span>4006184000<span class="tag">&lt;/<span class="name">tel</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">enterprise</span>&gt;</span></span><br></pre></td></tr></table></figure><p>è€Œ <code>properties</code> ç±»å‹çš„é…ç½®æ–‡ä»¶å¦‚ä¸‹</p><figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">enterprise.name</span>=<span class="string">itcast</span></span><br><span class="line"><span class="attr">enterprise.age</span>=<span class="string">16</span></span><br><span class="line"><span class="attr">enterprise.tel</span>=<span class="string">4006184000</span></span><br></pre></td></tr></table></figure><p><code>yaml</code> ç±»å‹çš„é…ç½®æ–‡ä»¶å†…å®¹å¦‚ä¸‹</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">enterprise:</span></span><br><span class="line"><span class="attr">name:</span> <span class="string">itcast</span></span><br><span class="line"><span class="attr">age:</span> <span class="number">16</span></span><br><span class="line"><span class="attr">tel:</span> <span class="number">4006184000</span></span><br></pre></td></tr></table></figure><p><strong>ä¼˜ç‚¹ï¼š</strong></p><ul><li><p>å®¹æ˜“é˜…è¯»</p><p><code>yaml</code> ç±»å‹çš„é…ç½®æ–‡ä»¶æ¯” <code>xml</code> ç±»å‹çš„é…ç½®æ–‡ä»¶æ›´å®¹æ˜“é˜…è¯»ï¼Œç»“æ„æ›´åŠ æ¸…æ™°</p></li><li><p>å®¹æ˜“ä¸è„šæœ¬è¯­è¨€äº¤äº’</p></li><li><p>ä»¥æ•°æ®ä¸ºæ ¸å¿ƒï¼Œé‡æ•°æ®è½»æ ¼å¼</p><p><code>yaml</code> æ›´æ³¨é‡æ•°æ®ï¼Œè€Œ <code>xml</code> æ›´æ³¨é‡æ ¼å¼</p></li></ul><p><strong>YAML æ–‡ä»¶æ‰©å±•åï¼š</strong></p><ul><li><code>.yml</code> (ä¸»æµ)</li><li><code>.yaml</code></li></ul><p>ä¸Šé¢ä¸¤ç§åç¼€åéƒ½å¯ä»¥ï¼Œä»¥åä½¿ç”¨æ›´å¤šçš„è¿˜æ˜¯ <code>yml</code> çš„ã€‚</p><h4 id="2-2-1-è¯­æ³•è§„åˆ™"><a href="#2-2-1-è¯­æ³•è§„åˆ™" class="headerlink" title="2.2.1  è¯­æ³•è§„åˆ™"></a>2.2.1  è¯­æ³•è§„åˆ™</h4><ul><li><p>å¤§å°å†™æ•æ„Ÿ</p></li><li><p>å±æ€§å±‚çº§å…³ç³»ä½¿ç”¨å¤šè¡Œæè¿°ï¼Œæ¯è¡Œç»“å°¾ä½¿ç”¨å†’å·ç»“æŸ</p></li><li><p>ä½¿ç”¨ç¼©è¿›è¡¨ç¤ºå±‚çº§å…³ç³»ï¼ŒåŒå±‚çº§å·¦ä¾§å¯¹é½ï¼Œåªå…è®¸ä½¿ç”¨ç©ºæ ¼ï¼ˆä¸å…è®¸ä½¿ç”¨Tabé”®ï¼‰</p><p>ç©ºæ ¼çš„ä¸ªæ•°å¹¶ä¸é‡è¦ï¼Œåªè¦ä¿è¯åŒå±‚çº§çš„å·¦ä¾§å¯¹é½å³å¯ã€‚</p></li><li><p>å±æ€§å€¼å‰é¢æ·»åŠ ç©ºæ ¼ï¼ˆå±æ€§åä¸å±æ€§å€¼ä¹‹é—´ä½¿ç”¨å†’å·+ç©ºæ ¼ä½œä¸ºåˆ†éš”ï¼‰</p></li><li><p># è¡¨ç¤ºæ³¨é‡Š</p></li></ul><p>æ ¸å¿ƒè§„åˆ™ï¼šæ•°æ®å‰é¢è¦åŠ ç©ºæ ¼ä¸å†’å·éš”å¼€</p><p>æ•°ç»„æ•°æ®åœ¨æ•°æ®ä¹¦å†™ä½ç½®çš„ä¸‹æ–¹ä½¿ç”¨å‡å·ä½œä¸ºæ•°æ®å¼€å§‹ç¬¦å·ï¼Œæ¯è¡Œä¹¦å†™ä¸€ä¸ªæ•°æ®ï¼Œå‡å·ä¸æ•°æ®é—´ç©ºæ ¼åˆ†éš”ï¼Œä¾‹å¦‚</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">enterprise:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">itcast</span></span><br><span class="line">  <span class="attr">age:</span> <span class="number">16</span></span><br><span class="line">  <span class="attr">tel:</span> <span class="number">4006184000</span></span><br><span class="line">  <span class="attr">subject:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">Java</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">å‰ç«¯</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">å¤§æ•°æ®</span></span><br></pre></td></tr></table></figure><h3 id="2-3-yamlé…ç½®æ–‡ä»¶æ•°æ®è¯»å–"><a href="#2-3-yamlé…ç½®æ–‡ä»¶æ•°æ®è¯»å–" class="headerlink" title="2.3  yamlé…ç½®æ–‡ä»¶æ•°æ®è¯»å–"></a>2.3  yamlé…ç½®æ–‡ä»¶æ•°æ®è¯»å–</h3><h4 id="2-3-1-ç¯å¢ƒå‡†å¤‡"><a href="#2-3-1-ç¯å¢ƒå‡†å¤‡" class="headerlink" title="2.3.1  ç¯å¢ƒå‡†å¤‡"></a>2.3.1  ç¯å¢ƒå‡†å¤‡</h4><p>æ–°åˆ›å»ºä¸€ä¸ªåä¸º <code>springboot_03_read_data</code> çš„ <code>SpringBoot</code> å·¥ç¨‹ï¼Œç›®å½•ç»“æ„å¦‚ä¸‹</p><img src="/2022/08/08/SpringBoot/image-20210917172736484.png" alt="image-20210917172736484" style="zoom:80%;"><p>åœ¨ <code>com.itheima.controller</code> åŒ…å†™åˆ›å»ºåä¸º <code>BookController</code> çš„æ§åˆ¶å™¨ï¼Œå†…å®¹å¦‚ä¸‹</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/books&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getById</span><span class="params">(<span class="meta">@PathVariable</span> Integer id)</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;id ==&gt; &quot;</span>+id);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;hello , spring boot!&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ <code>com.itheima.domain</code> åŒ…ä¸‹åˆ›å»ºä¸€ä¸ªåä¸º <code>Enterprise</code> çš„å®ä½“ç±»ç­‰ä¼šç”¨æ¥å°è£…æ•°æ®ï¼Œå†…å®¹å¦‚ä¸‹</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Enterprise</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line">    <span class="keyword">private</span> String tel;</span><br><span class="line">    <span class="keyword">private</span> String[] subject;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//setter and getter</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">//toString</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ <code>resources</code> ä¸‹åˆ›å»ºä¸€ä¸ªåä¸º <code>application.yml</code> çš„é…ç½®æ–‡ä»¶ï¼Œé‡Œé¢é…ç½®äº†ä¸åŒçš„æ•°æ®ï¼Œå†…å®¹å¦‚ä¸‹</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">lesson:</span> <span class="string">SpringBoot</span></span><br><span class="line"></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">80</span></span><br><span class="line"></span><br><span class="line"><span class="attr">enterprise:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">itcast</span></span><br><span class="line">  <span class="attr">age:</span> <span class="number">16</span></span><br><span class="line">  <span class="attr">tel:</span> <span class="number">4006184000</span></span><br><span class="line">  <span class="attr">subject:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">Java</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">å‰ç«¯</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">å¤§æ•°æ®</span></span><br></pre></td></tr></table></figure><h4 id="2-3-2-è¯»å–é…ç½®æ•°æ®"><a href="#2-3-2-è¯»å–é…ç½®æ•°æ®" class="headerlink" title="2.3.2  è¯»å–é…ç½®æ•°æ®"></a>2.3.2  è¯»å–é…ç½®æ•°æ®</h4><h5 id="2-3-2-1-ä½¿ç”¨-Valueæ³¨è§£"><a href="#2-3-2-1-ä½¿ç”¨-Valueæ³¨è§£" class="headerlink" title="2.3.2.1  ä½¿ç”¨ @Valueæ³¨è§£"></a>2.3.2.1  ä½¿ç”¨ @Valueæ³¨è§£</h5><p>ä½¿ç”¨ <code>@Value(&quot;è¡¨è¾¾å¼&quot;)</code> æ³¨è§£å¯ä»¥ä»é…åˆæ–‡ä»¶ä¸­è¯»å–æ•°æ®ï¼Œæ³¨è§£ä¸­ç”¨äºè¯»å–å±æ€§åå¼•ç”¨æ–¹å¼æ˜¯ï¼š<code>$&#123;ä¸€çº§å±æ€§å.äºŒçº§å±æ€§åâ€¦â€¦&#125;</code></p><p>æˆ‘ä»¬å¯ä»¥åœ¨ <code>BookController</code> ä¸­ä½¿ç”¨ <code>@Value</code>  æ³¨è§£è¯»å–é…åˆæ–‡ä»¶æ•°æ®ï¼Œå¦‚ä¸‹</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/books&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookController</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;lesson&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String lesson;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;server.port&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Integer port;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;enterprise.subject[0]&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String subject_00;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getById</span><span class="params">(<span class="meta">@PathVariable</span> Integer id)</span>&#123;</span><br><span class="line">        System.out.println(lesson);</span><br><span class="line">        System.out.println(port);</span><br><span class="line">        System.out.println(subject_00);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;hello , spring boot!&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="2-3-2-2-Environmentå¯¹è±¡"><a href="#2-3-2-2-Environmentå¯¹è±¡" class="headerlink" title="2.3.2.2  Environmentå¯¹è±¡"></a>2.3.2.2  Environmentå¯¹è±¡</h5><p>ä¸Šé¢æ–¹å¼è¯»å–åˆ°çš„æ•°æ®ç‰¹åˆ«é›¶æ•£ï¼Œ<code>SpringBoot</code> è¿˜å¯ä»¥ä½¿ç”¨ <code>@Autowired</code> æ³¨è§£æ³¨å…¥ <code>Environment</code> å¯¹è±¡çš„æ–¹å¼è¯»å–æ•°æ®ã€‚è¿™ç§æ–¹å¼ <code>SpringBoot</code> ä¼šå°†é…ç½®æ–‡ä»¶ä¸­æ‰€æœ‰çš„æ•°æ®å°è£…åˆ° <code>Environment</code> å¯¹è±¡ä¸­ï¼Œå¦‚æœéœ€è¦ä½¿ç”¨å“ªä¸ªæ•°æ®åªéœ€è¦é€šè¿‡è°ƒç”¨ <code>Environment</code> å¯¹è±¡çš„ <code>getProperty(String name)</code> æ–¹æ³•è·å–ã€‚å…·ä½“ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/books&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookController</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> Environment env;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@GetMapping(&quot;/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getById</span><span class="params">(<span class="meta">@PathVariable</span> Integer id)</span>&#123;</span><br><span class="line">        System.out.println(env.getProperty(<span class="string">&quot;lesson&quot;</span>));</span><br><span class="line">        System.out.println(env.getProperty(<span class="string">&quot;enterprise.name&quot;</span>));</span><br><span class="line">        System.out.println(env.getProperty(<span class="string">&quot;enterprise.subject[0]&quot;</span>));</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;hello , spring boot!&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼šè¿™ç§æ–¹å¼ï¼Œæ¡†æ¶å†…å®¹å¤§é‡æ•°æ®ï¼Œè€Œåœ¨å¼€å‘ä¸­æˆ‘ä»¬å¾ˆå°‘ä½¿ç”¨ã€‚</p></blockquote><h5 id="2-3-2-3-è‡ªå®šä¹‰å¯¹è±¡"><a href="#2-3-2-3-è‡ªå®šä¹‰å¯¹è±¡" class="headerlink" title="2.3.2.3  è‡ªå®šä¹‰å¯¹è±¡"></a>2.3.2.3  è‡ªå®šä¹‰å¯¹è±¡</h5><p><code>SpringBoot</code> è¿˜æä¾›äº†å°†é…ç½®æ–‡ä»¶ä¸­çš„æ•°æ®å°è£…åˆ°æˆ‘ä»¬è‡ªå®šä¹‰çš„å®ä½“ç±»å¯¹è±¡ä¸­çš„æ–¹å¼ã€‚å…·ä½“æ“ä½œå¦‚ä¸‹ï¼š</p><ul><li><p>å°†å®ä½“ç±» <code>bean</code> çš„åˆ›å»ºäº¤ç»™ <code>Spring</code> ç®¡ç†ã€‚</p><p>åœ¨ç±»ä¸Šæ·»åŠ  <code>@Component</code> æ³¨è§£</p></li><li><p>ä½¿ç”¨ <code>@ConfigurationProperties</code> æ³¨è§£è¡¨ç¤ºåŠ è½½é…ç½®æ–‡ä»¶</p><p>åœ¨è¯¥æ³¨è§£ä¸­ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>prefix</code> å±æ€§æŒ‡å®šåªåŠ è½½æŒ‡å®šå‰ç¼€çš„æ•°æ®</p></li><li><p>åœ¨ <code>BookController</code> ä¸­è¿›è¡Œæ³¨å…¥</p></li></ul><p><strong>å…·ä½“ä»£ç å¦‚ä¸‹ï¼š</strong></p><p><code>Enterprise</code> å®ä½“ç±»å†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@ConfigurationProperties(prefix = &quot;enterprise&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Enterprise</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line">    <span class="keyword">private</span> String tel;</span><br><span class="line">    <span class="keyword">private</span> String[] subject;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getAge</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(<span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getTel</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> tel;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setTel</span><span class="params">(String tel)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.tel = tel;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String[] getSubject() &#123;</span><br><span class="line">        <span class="keyword">return</span> subject;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setSubject</span><span class="params">(String[] subject)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.subject = subject;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Enterprise&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, age=&quot;</span> + age +</span><br><span class="line">                <span class="string">&quot;, tel=&#x27;&quot;</span> + tel + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, subject=&quot;</span> + Arrays.toString(subject) +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>BookController</code> å†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/books&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookController</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> Enterprise enterprise;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getById</span><span class="params">(<span class="meta">@PathVariable</span> Integer id)</span>&#123;</span><br><span class="line">        System.out.println(enterprise.getName());</span><br><span class="line">        System.out.println(enterprise.getAge());</span><br><span class="line">        System.out.println(enterprise.getSubject());</span><br><span class="line">        System.out.println(enterprise.getTel());</span><br><span class="line">        System.out.println(enterprise.getSubject()[<span class="number">0</span>]);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;hello , spring boot!&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„ï¼š</strong></p><p>ä½¿ç”¨ç¬¬ä¸‰ç§æ–¹å¼ï¼Œåœ¨å®ä½“ç±»ä¸Šæœ‰å¦‚ä¸‹è­¦å‘Šæç¤º</p><img src="/2022/08/08/SpringBoot/image-20210917180919390.png" alt="image-20210917180919390" style="zoom:70%;"><p>è¿™ä¸ªè­¦å‘Šæç¤ºè§£å†³æ˜¯åœ¨ <code>pom.xml</code> ä¸­æ·»åŠ å¦‚ä¸‹ä¾èµ–å³å¯</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-configuration-processor<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="2-4-å¤šç¯å¢ƒé…ç½®"><a href="#2-4-å¤šç¯å¢ƒé…ç½®" class="headerlink" title="2.4  å¤šç¯å¢ƒé…ç½®"></a>2.4  å¤šç¯å¢ƒé…ç½®</h3><p>ä»¥ååœ¨å·¥ä½œä¸­ï¼Œå¯¹äºå¼€å‘ç¯å¢ƒã€æµ‹è¯•ç¯å¢ƒã€ç”Ÿäº§ç¯å¢ƒçš„é…ç½®è‚¯å®šéƒ½ä¸ç›¸åŒï¼Œæ¯”å¦‚æˆ‘ä»¬å¼€å‘é˜¶æ®µä¼šåœ¨è‡ªå·±çš„ç”µè„‘ä¸Šå®‰è£… <code>mysql</code> ï¼Œè¿æ¥è‡ªå·±ç”µè„‘ä¸Šçš„ <code>mysql</code> å³å¯ï¼Œä½†æ˜¯é¡¹ç›®å¼€å‘å®Œæ¯•åè¦ä¸Šçº¿å°±éœ€è¦è¯¥é…ç½®ï¼Œå°†ç¯å¢ƒçš„é…ç½®æ”¹ä¸ºçº¿ä¸Šç¯å¢ƒçš„ã€‚</p><img src="/2022/08/08/SpringBoot/image-20210917185253557.png" alt="image-20210917185253557" style="zoom:60%;"><p>æ¥å›çš„ä¿®æ”¹é…ç½®ä¼šå¾ˆéº»çƒ¦ï¼Œè€Œ <code>SpringBoot</code> ç»™å¼€å‘è€…æä¾›äº†å¤šç¯å¢ƒçš„å¿«æ·é…ç½®ï¼Œéœ€è¦åˆ‡æ¢ç¯å¢ƒæ—¶åªéœ€è¦æ”¹ä¸€ä¸ªé…ç½®å³å¯ã€‚ä¸åŒç±»å‹çš„é…ç½®æ–‡ä»¶å¤šç¯å¢ƒå¼€å‘çš„é…ç½®éƒ½ä¸ç›¸åŒï¼Œæ¥ä¸‹æ¥å¯¹ä¸åŒç±»å‹çš„é…ç½®æ–‡ä»¶è¿›è¡Œè¯´æ˜</p><h4 id="2-4-1-yamlæ–‡ä»¶"><a href="#2-4-1-yamlæ–‡ä»¶" class="headerlink" title="2.4.1  yamlæ–‡ä»¶"></a>2.4.1  yamlæ–‡ä»¶</h4><p>åœ¨ <code>application.yml</code> ä¸­ä½¿ç”¨ <code>---</code> æ¥åˆ†å‰²ä¸åŒçš„é…ç½®ï¼Œå†…å®¹å¦‚ä¸‹</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment">#å¼€å‘</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">profiles:</span> <span class="string">dev</span> <span class="comment">#ç»™å¼€å‘ç¯å¢ƒèµ·çš„åå­—</span></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">80</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="comment">#ç”Ÿäº§</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">profiles:</span> <span class="string">pro</span> <span class="comment">#ç»™ç”Ÿäº§ç¯å¢ƒèµ·çš„åå­—</span></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">81</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="comment">#æµ‹è¯•</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">profiles:</span> <span class="string">test</span> <span class="comment">#ç»™æµ‹è¯•ç¯å¢ƒèµ·çš„åå­—</span></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">82</span></span><br><span class="line"><span class="meta">---</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢é…ç½®ä¸­ <code>spring.profiles</code> æ˜¯ç”¨æ¥ç»™ä¸åŒçš„é…ç½®èµ·åå­—çš„ã€‚è€Œå¦‚ä½•å‘ŠçŸ¥ <code>SpringBoot</code> ä½¿ç”¨å“ªæ®µé…ç½®å‘¢ï¼Ÿå¯ä»¥ä½¿ç”¨å¦‚ä¸‹é…ç½®æ¥å¯ç”¨éƒ½ä¸€æ®µé…ç½®</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment">#è®¾ç½®å¯ç”¨çš„ç¯å¢ƒ</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">profiles:</span></span><br><span class="line">    <span class="attr">active:</span> <span class="string">dev</span>  <span class="comment">#è¡¨ç¤ºä½¿ç”¨çš„æ˜¯å¼€å‘ç¯å¢ƒçš„é…ç½®</span></span><br></pre></td></tr></table></figure><p>ç»¼ä¸Šæ‰€è¿°ï¼Œ<code>application.yml</code> é…ç½®æ–‡ä»¶å†…å®¹å¦‚ä¸‹</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment">#è®¾ç½®å¯ç”¨çš„ç¯å¢ƒ</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">profiles:</span></span><br><span class="line">    <span class="attr">active:</span> <span class="string">dev</span></span><br><span class="line"></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="comment">#å¼€å‘</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">profiles:</span> <span class="string">dev</span></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">80</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="comment">#ç”Ÿäº§</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">profiles:</span> <span class="string">pro</span></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">81</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="comment">#æµ‹è¯•</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">profiles:</span> <span class="string">test</span></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">82</span></span><br><span class="line"><span class="meta">---</span></span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„ï¼š</strong></p><p>åœ¨ä¸Šé¢é…ç½®ä¸­ç»™ä¸åŒé…ç½®èµ·åå­—çš„ <code>spring.profiles</code> é…ç½®é¡¹å·²ç»è¿‡æ—¶ã€‚æœ€æ–°ç”¨æ¥èµ·åå­—çš„é…ç½®é¡¹æ˜¯ </p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment">#å¼€å‘</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">config:</span></span><br><span class="line">    <span class="attr">activate:</span></span><br><span class="line">      <span class="attr">on-profile:</span> <span class="string">dev</span></span><br></pre></td></tr></table></figure><h4 id="2-4-2-propertiesæ–‡ä»¶"><a href="#2-4-2-propertiesæ–‡ä»¶" class="headerlink" title="2.4.2  propertiesæ–‡ä»¶"></a>2.4.2  propertiesæ–‡ä»¶</h4><p><code>properties</code> ç±»å‹çš„é…ç½®æ–‡ä»¶é…ç½®å¤šç¯å¢ƒéœ€è¦å®šä¹‰ä¸åŒçš„é…ç½®æ–‡ä»¶</p><ul><li><p><code>application-dev.properties</code> æ˜¯å¼€å‘ç¯å¢ƒçš„é…ç½®æ–‡ä»¶ã€‚æˆ‘ä»¬åœ¨è¯¥æ–‡ä»¶ä¸­é…ç½®ç«¯å£å·ä¸º <code>80</code></p><figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">server.port</span>=<span class="string">80</span></span><br></pre></td></tr></table></figure></li><li><p><code>application-test.properties</code> æ˜¯æµ‹è¯•ç¯å¢ƒçš„é…ç½®æ–‡ä»¶ã€‚æˆ‘ä»¬åœ¨è¯¥æ–‡ä»¶ä¸­é…ç½®ç«¯å£å·ä¸º <code>81</code></p><figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">server.port</span>=<span class="string">81</span></span><br></pre></td></tr></table></figure></li><li><p><code>application-pro.properties</code> æ˜¯ç”Ÿäº§ç¯å¢ƒçš„é…ç½®æ–‡ä»¶ã€‚æˆ‘ä»¬åœ¨è¯¥æ–‡ä»¶ä¸­é…ç½®ç«¯å£å·ä¸º <code>82</code></p><figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">server.port</span>=<span class="string">82</span></span><br></pre></td></tr></table></figure></li></ul><p><code>SpringBoot</code> åªä¼šé»˜è®¤åŠ è½½åä¸º <code>application.properties</code> çš„é…ç½®æ–‡ä»¶ï¼Œæ‰€ä»¥éœ€è¦åœ¨ <code>application.properties</code> é…ç½®æ–‡ä»¶ä¸­è®¾ç½®å¯ç”¨å“ªä¸ªé…ç½®æ–‡ä»¶ï¼Œé…ç½®å¦‚ä¸‹:</p><figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">spring.profiles.active</span>=<span class="string">pro</span></span><br></pre></td></tr></table></figure><h4 id="2-4-3-å‘½ä»¤è¡Œå¯åŠ¨å‚æ•°è®¾ç½®"><a href="#2-4-3-å‘½ä»¤è¡Œå¯åŠ¨å‚æ•°è®¾ç½®" class="headerlink" title="2.4.3  å‘½ä»¤è¡Œå¯åŠ¨å‚æ•°è®¾ç½®"></a>2.4.3  å‘½ä»¤è¡Œå¯åŠ¨å‚æ•°è®¾ç½®</h4><p>ä½¿ç”¨ <code>SpringBoot</code> å¼€å‘çš„ç¨‹åºä»¥åéƒ½æ˜¯æ‰“æˆ <code>jar</code> åŒ…ï¼Œé€šè¿‡ <code>java -jar xxx.jar</code> çš„æ–¹å¼å¯åŠ¨æœåŠ¡çš„ã€‚é‚£ä¹ˆå°±å­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚ä½•åˆ‡æ¢ç¯å¢ƒå‘¢ï¼Ÿå› ä¸ºé…ç½®æ–‡ä»¶æ‰“åˆ°çš„jaråŒ…ä¸­äº†ã€‚(æ‰§è¡Œpackageä¹‹å‰å…ˆæ‰§è¡Œcleanï¼Œé¢„é˜²è¸©å‘ã€‚ideaç¼–ç æ”¹æˆUTF-8)</p><p>æˆ‘ä»¬çŸ¥é“ <code>jar</code> åŒ…å…¶å®å°±æ˜¯ä¸€ä¸ªå‹ç¼©åŒ…ï¼Œå¯ä»¥è§£å‹ç¼©ï¼Œç„¶åä¿®æ”¹é…ç½®ï¼Œæœ€åå†æ‰“æˆjaråŒ…å°±å¯ä»¥äº†ã€‚è¿™ç§æ–¹å¼æ˜¾ç„¶æœ‰ç‚¹éº»çƒ¦ï¼Œè€Œ <code>SpringBoot</code> æä¾›äº†åœ¨è¿è¡Œ <code>jar</code> æ—¶è®¾ç½®å¼€å¯æŒ‡å®šçš„ç¯å¢ƒçš„æ–¹å¼ï¼Œå¦‚ä¸‹</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">java â€“jar xxx.jar â€“-spring.profiles.active=test</span><br></pre></td></tr></table></figure><p>é‚£ä¹ˆè¿™ç§æ–¹å¼èƒ½ä¸èƒ½ä¸´æ—¶ä¿®æ”¹ç«¯å£å·å‘¢ï¼Ÿä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œå¯ä»¥é€šè¿‡å¦‚ä¸‹æ–¹å¼</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">java â€“jar xxx.jar â€“-server.port=88</span><br></pre></td></tr></table></figure><p>å½“ç„¶ä¹Ÿå¯ä»¥åŒæ—¶è®¾ç½®å¤šä¸ªé…ç½®ï¼Œæ¯”å¦‚å³æŒ‡å®šå¯ç”¨å“ªä¸ªç¯å¢ƒé…ç½®ï¼Œåˆä¸´æ—¶æŒ‡å®šç«¯å£ï¼Œå¦‚ä¸‹</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">java â€“jar springboot.jar â€“-server.port=88 â€“-spring.profiles.active=test</span><br></pre></td></tr></table></figure><p>å¤§å®¶è¿›è¡Œæµ‹è¯•åå°±ä¼šå‘ç°å‘½ä»¤è¡Œè®¾ç½®çš„ç«¯å£å·ä¼˜å…ˆçº§é«˜ï¼ˆä¹Ÿå°±æ˜¯ä½¿ç”¨çš„æ˜¯å‘½ä»¤è¡Œè®¾ç½®çš„ç«¯å£å·ï¼‰ï¼Œé…ç½®çš„ä¼˜å…ˆçº§å…¶å® <code>SpringBoot</code> <a href="https://docs.spring.io/spring-boot/docs/current/reference/html/spring-boot-features.html#boot-features-external-config">å®˜ç½‘</a>å·²ç»è¿›è¡Œäº†è¯´æ˜ï¼Œå‚è§ :</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">https://docs.spring.io/spring-boot/docs/current/reference/html/spring-boot-features.html#boot-features-external-config</span><br></pre></td></tr></table></figure><p>è¿›å…¥ä¸Šé¢ç½‘ç«™åä¼šçœ‹åˆ°å¦‚ä¸‹é¡µé¢</p><p><img src="/2022/08/08/SpringBoot/image-20210917193910191.png" alt="image-20210917193910191"></p><p>å¦‚æœä½¿ç”¨äº†å¤šç§æ–¹å¼é…åˆåŒä¸€ä¸ªé…ç½®é¡¹ï¼Œä¼˜å…ˆçº§é«˜çš„ç”Ÿæ•ˆã€‚</p><h3 id="2-5-é…ç½®æ–‡ä»¶åˆ†ç±»"><a href="#2-5-é…ç½®æ–‡ä»¶åˆ†ç±»" class="headerlink" title="2.5  é…ç½®æ–‡ä»¶åˆ†ç±»"></a>2.5  é…ç½®æ–‡ä»¶åˆ†ç±»</h3><img src="/2022/08/08/SpringBoot/image-20210917194941597.png" alt="image-20210917194941597" style="zoom:70%;"><p>æœ‰è¿™æ ·çš„åœºæ™¯ï¼Œæˆ‘ä»¬å¼€å‘å®Œæ¯•åéœ€è¦æµ‹è¯•äººå‘˜è¿›è¡Œæµ‹è¯•ï¼Œç”±äºæµ‹è¯•ç¯å¢ƒå’Œå¼€å‘ç¯å¢ƒçš„å¾ˆå¤šé…ç½®éƒ½ä¸ç›¸åŒï¼Œæ‰€ä»¥æµ‹è¯•äººå‘˜åœ¨è¿è¡Œæˆ‘ä»¬çš„å·¥ç¨‹æ—¶éœ€è¦ä¸´æ—¶ä¿®æ”¹å¾ˆå¤šé…ç½®ï¼Œå¦‚ä¸‹</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">java â€“jar springboot.jar â€“-spring.profiles.active=test --server.port=85 --server.servlet.context-path=/heima --server.tomcat.connection-timeout=-1 â€¦â€¦ â€¦â€¦ â€¦â€¦ â€¦â€¦ â€¦â€¦</span><br></pre></td></tr></table></figure><p>é’ˆå¯¹è¿™ç§æƒ…å†µï¼Œ<code>SpringBoot</code> å®šä¹‰äº†é…ç½®æ–‡ä»¶ä¸åŒçš„æ”¾ç½®çš„ä½ç½®ï¼›è€Œæ”¾åœ¨ä¸åŒä½ç½®çš„ä¼˜å…ˆçº§æ—¶ä¸åŒçš„ã€‚</p><p><code>SpringBoot</code> ä¸­4çº§é…ç½®æ–‡ä»¶æ”¾ç½®ä½ç½®ï¼š</p><ul><li>1çº§ï¼šclasspathï¼šapplication.yml  </li><li>2çº§ï¼šclasspathï¼šconfig&#x2F;application.yml</li><li>3çº§ï¼šfile ï¼šapplication.yml</li><li>4çº§ï¼šfile ï¼šconfig&#x2F;application.yml</li></ul><blockquote><p>è¯´æ˜ï¼šçº§åˆ«è¶Šé«˜ä¼˜å…ˆçº§è¶Šé«˜</p></blockquote><h4 id="2-5-1-ä»£ç æ¼”ç¤º"><a href="#2-5-1-ä»£ç æ¼”ç¤º" class="headerlink" title="2.5.1  ä»£ç æ¼”ç¤º"></a>2.5.1  ä»£ç æ¼”ç¤º</h4><p>åœ¨è¿™é‡Œæˆ‘ä»¬åªæ¼”ç¤ºä¸åŒçº§åˆ«é…ç½®æ–‡ä»¶æ”¾ç½®ä½ç½®çš„ä¼˜å…ˆçº§ã€‚</p><h5 id="2-5-1-1-ç¯å¢ƒå‡†å¤‡"><a href="#2-5-1-1-ç¯å¢ƒå‡†å¤‡" class="headerlink" title="2.5.1.1  ç¯å¢ƒå‡†å¤‡"></a>2.5.1.1  ç¯å¢ƒå‡†å¤‡</h5><p>åˆ›å»ºä¸€ä¸ªåä¸º <code>springboot_06_config_file</code> çš„ <code>SpringBoot</code> å·¥ç¨‹ï¼Œç›®å½•ç»“æ„å¦‚ä¸‹</p><img src="/2022/08/08/SpringBoot/image-20210917200241282.png" alt="image-20210917200241282" style="zoom:80%;"><p>åœ¨ <code>resources</code> ä¸‹åˆ›å»ºä¸€ä¸ªåä¸º <code>config</code> çš„ç›®å½•ï¼Œåœ¨è¯¥ç›®å½•ä¸­åˆ›å»º <code>application.yml</code> é…ç½®æ–‡ä»¶ï¼Œè€Œåœ¨è¯¥é…ç½®æ–‡ä»¶ä¸­å°†ç«¯å£å·è®¾ç½®ä¸º <code>81</code>ï¼Œå†…å®¹å¦‚ä¸‹</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">81</span></span><br></pre></td></tr></table></figure><p>è€Œåœ¨ <code>resources</code> ä¸‹åˆ›å»ºçš„ <code>application.yml</code> é…ç½®æ–‡ä»¶ä¸­å¹¶å°†ç«¯å£å·è®¾ç½®ä¸º <code>80</code>ï¼Œå†…å®¹å¦‚ä¸‹</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">80</span></span><br></pre></td></tr></table></figure><h5 id="2-5-1-2-éªŒè¯1çº§å’Œ2çº§çš„ä¼˜å…ˆçº§"><a href="#2-5-1-2-éªŒè¯1çº§å’Œ2çº§çš„ä¼˜å…ˆçº§" class="headerlink" title="2.5.1.2  éªŒè¯1çº§å’Œ2çº§çš„ä¼˜å…ˆçº§"></a>2.5.1.2  éªŒè¯1çº§å’Œ2çº§çš„ä¼˜å…ˆçº§</h5><p>è¿è¡Œå¯åŠ¨å¼•å¯¼ç±»ï¼Œå¯ä»¥åœ¨æ§åˆ¶å°çœ‹åˆ°å¦‚ä¸‹æ—¥å¿—ä¿¡æ¯</p><p><img src="/2022/08/08/SpringBoot/image-20210917200805389.png" alt="image-20210917200805389"></p><p>é€šè¿‡è¿™ä¸ªç»“æœå¯ä»¥å¾—å‡ºç±»è·¯å¾„ä¸‹çš„ <code>config</code> ä¸‹çš„é…ç½®æ–‡ä»¶ä¼˜å…ˆäºç±»è·¯å¾„ä¸‹çš„é…ç½®æ–‡ä»¶ã€‚</p><h5 id="2-5-1-3-éªŒè¯2çº§å’Œ4çº§çš„ä¼˜å…ˆçº§"><a href="#2-5-1-3-éªŒè¯2çº§å’Œ4çº§çš„ä¼˜å…ˆçº§" class="headerlink" title="2.5.1.3  éªŒè¯2çº§å’Œ4çº§çš„ä¼˜å…ˆçº§"></a>2.5.1.3  éªŒè¯2çº§å’Œ4çº§çš„ä¼˜å…ˆçº§</h5><p>è¦éªŒè¯4çº§ï¼ŒæŒ‰ç…§ä»¥ä¸‹æ­¥éª¤å®Œæˆ</p><ul><li><p>å°†å·¥ç¨‹æ‰“æˆ <code>jar</code> åŒ…</p><p>ç‚¹å‡»å·¥ç¨‹çš„ <code>package</code> æ¥æ‰“ <code>jar</code> åŒ…</p><img src="/2022/08/08/SpringBoot/image-20210917201243721.png" alt="image-20210917201243721" style="zoom:80%;"></li><li><p>åœ¨ç¡¬ç›˜ä¸Šæ‰¾åˆ° <code>jar</code> åŒ…æ‰€åœ¨ä½ç½®</p><img src="/2022/08/08/SpringBoot/image-20210917201523669.png" alt="image-20210917201523669" style="zoom:70%;"></li><li><p>åœ¨ <code>jar</code> åŒ…æ‰€åœ¨ä½ç½®åˆ›å»º <code>config</code> æ–‡ä»¶å¤¹ï¼Œåœ¨è¯¥æ–‡ä»¶å¤¹ä¸‹åˆ›å»º <code>application.yml</code> é…ç½®æ–‡ä»¶ï¼Œè€Œåœ¨è¯¥é…åˆæ–‡ä»¶ä¸­å°†ç«¯å£å·è®¾ç½®ä¸º <code>82</code> </p></li><li><p>åœ¨å‘½ä»¤è¡Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è¿è¡Œç¨‹åº</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">java -jar springboot_06_config_file-0.0.1-SNAPSHOT.jar</span><br></pre></td></tr></table></figure><p>è¿è¡Œåæ—¥å¿—ä¿¡æ¯å¦‚ä¸‹</p><p><img src="/2022/08/08/SpringBoot/image-20210917201922831.png" alt="image-20210917201922831"></p><p>é€šè¿‡è¿™ä¸ªç»“æœå¯ä»¥å¾—å‡ºfileï¼š <code>config</code> ä¸‹çš„é…ç½®æ–‡ä»¶ä¼˜å…ˆäºç±»è·¯å¾„ä¸‹çš„é…ç½®æ–‡ä»¶ã€‚</p></li></ul><blockquote><p>æ³¨æ„ï¼š</p><p>SpringBoot 2.5.0ç‰ˆæœ¬å­˜åœ¨ä¸€ä¸ªbugï¼Œæˆ‘ä»¬åœ¨ä½¿ç”¨è¿™ä¸ªç‰ˆæœ¬æ—¶ï¼Œéœ€è¦åœ¨ <code>jar</code> æ‰€åœ¨ä½ç½®çš„ <code>config</code> ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªä»»æ„åç§°çš„æ–‡ä»¶å¤¹ï¼ˆè¯¥bugä¹Ÿå‡ºç°åœ¨2.4.6ä¸­ï¼‰</p></blockquote><h2 id="3ï¼ŒSpringBootæ•´åˆjunit"><a href="#3ï¼ŒSpringBootæ•´åˆjunit" class="headerlink" title="3ï¼ŒSpringBootæ•´åˆjunit"></a>3ï¼ŒSpringBootæ•´åˆjunit</h2><p>å›é¡¾ <code>Spring</code> æ•´åˆ <code>junit</code></p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RunWith(SpringJUnit4ClassRunner.class)</span></span><br><span class="line"><span class="meta">@ContextConfiguration(classes = SpringConfig.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserServiceTest</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> BookService bookService;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSave</span><span class="params">()</span>&#123;</span><br><span class="line">        bookService.save();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ <code>@RunWith</code> æ³¨è§£æŒ‡å®šè¿è¡Œå™¨ï¼Œä½¿ç”¨ <code>@ContextConfiguration</code> æ³¨è§£æ¥æŒ‡å®šé…ç½®ç±»æˆ–è€…é…ç½®æ–‡ä»¶ã€‚è€Œ <code>SpringBoot</code> æ•´åˆ <code>junit</code> ç‰¹åˆ«ç®€å•ï¼Œåˆ†ä¸ºä»¥ä¸‹ä¸‰æ­¥å®Œæˆ</p><ul><li>åœ¨æµ‹è¯•ç±»ä¸Šæ·»åŠ  <code>SpringBootTest</code> æ³¨è§£</li><li>ä½¿ç”¨ <code>@Autowired</code> æ³¨å…¥è¦æµ‹è¯•çš„èµ„æº</li><li>å®šä¹‰æµ‹è¯•æ–¹æ³•è¿›è¡Œæµ‹è¯•</li></ul><h3 id="3-1-ç¯å¢ƒå‡†å¤‡"><a href="#3-1-ç¯å¢ƒå‡†å¤‡" class="headerlink" title="3.1  ç¯å¢ƒå‡†å¤‡"></a>3.1  ç¯å¢ƒå‡†å¤‡</h3><p>åˆ›å»ºä¸€ä¸ªåä¸º <code>springboot_07_test</code> çš„ <code>SpringBoot</code> å·¥ç¨‹ï¼Œå·¥ç¨‹ç›®å½•ç»“æ„å¦‚ä¸‹</p><img src="/2022/08/08/SpringBoot/image-20210917213556673.png" alt="image-20210917213556673" style="zoom:80%;"><p>åœ¨ <code>com.itheima.service</code> ä¸‹åˆ›å»º <code>BookService</code> æ¥å£ï¼Œå†…å®¹å¦‚ä¸‹</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">BookService</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ <code>com.itheima.service.impl</code> åŒ…å†™åˆ›å»ºä¸€ä¸ª <code>BookServiceImpl</code> ç±»ï¼Œä½¿å…¶å®ç° <code>BookService</code> æ¥å£ï¼Œå†…å®¹å¦‚ä¸‹</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">BookService</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;book service is running ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-2-ç¼–å†™æµ‹è¯•ç±»"><a href="#3-2-ç¼–å†™æµ‹è¯•ç±»" class="headerlink" title="3.2  ç¼–å†™æµ‹è¯•ç±»"></a>3.2  ç¼–å†™æµ‹è¯•ç±»</h3><p>åœ¨ <code>test/java</code> ä¸‹åˆ›å»º <code>com.itheima</code> åŒ…ï¼Œåœ¨è¯¥åŒ…ä¸‹åˆ›å»ºæµ‹è¯•ç±»ï¼Œå°† <code>BookService</code> æ³¨å…¥åˆ°è¯¥æµ‹è¯•ç±»ä¸­</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Springboot07TestApplicationTests</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> BookService bookService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span> &#123;</span><br><span class="line">        bookService.save();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p><strong>æ³¨æ„ï¼š</strong>è¿™é‡Œçš„å¼•å¯¼ç±»æ‰€åœ¨åŒ…å¿…é¡»æ˜¯æµ‹è¯•ç±»æ‰€åœ¨åŒ…åŠå…¶å­åŒ…ã€‚</p><p>ä¾‹å¦‚ï¼š</p><ul><li>å¼•å¯¼ç±»æ‰€åœ¨åŒ…æ˜¯ <code>com.itheima</code></li><li>æµ‹è¯•ç±»æ‰€åœ¨åŒ…æ˜¯ <code>com.itheima</code></li></ul><p>å¦‚æœä¸æ»¡è¶³è¿™ä¸ªè¦æ±‚çš„è¯ï¼Œå°±éœ€è¦åœ¨ä½¿ç”¨ <code>@SpringBootTest</code> æ³¨è§£æ—¶ï¼Œä½¿ç”¨ <code>classes</code> å±æ€§æŒ‡å®šå¼•å¯¼ç±»çš„å­—èŠ‚ç å¯¹è±¡ã€‚å¦‚ <code>@SpringBootTest(classes = Springboot07TestApplication.class)</code></p></blockquote><h2 id="4ï¼ŒSpringBootæ•´åˆmybatis"><a href="#4ï¼ŒSpringBootæ•´åˆmybatis" class="headerlink" title="4ï¼ŒSpringBootæ•´åˆmybatis"></a>4ï¼ŒSpringBootæ•´åˆmybatis</h2><h3 id="4-1-å›é¡¾Springæ•´åˆMybatis"><a href="#4-1-å›é¡¾Springæ•´åˆMybatis" class="headerlink" title="4.1  å›é¡¾Springæ•´åˆMybatis"></a>4.1  å›é¡¾Springæ•´åˆMybatis</h3><p><code>Spring</code> æ•´åˆ <code>Mybatis</code> éœ€è¦å®šä¹‰å¾ˆå¤šé…ç½®ç±»</p><ul><li><p><code>SpringConfig</code> é…ç½®ç±»</p><ul><li><p>å¯¼å…¥ <code>JdbcConfig</code> é…ç½®ç±»</p></li><li><p>å¯¼å…¥ <code>MybatisConfig</code> é…ç½®ç±»</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ComponentScan(&quot;com.itheima&quot;)</span></span><br><span class="line"><span class="meta">@PropertySource(&quot;classpath:jdbc.properties&quot;)</span></span><br><span class="line"><span class="meta">@Import(&#123;JdbcConfig.class,MyBatisConfig.class&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringConfig</span> &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ul></li><li><p><code>JdbcConfig</code> é…ç½®ç±»</p></li><li><p>å®šä¹‰æ•°æ®æºï¼ˆåŠ è½½propertiesé…ç½®é¡¹ï¼šdriverã€urlã€usernameã€passwordï¼‰</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JdbcConfig</span> &#123;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;jdbc.driver&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String driver;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;jdbc.url&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String url;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;jdbc.username&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String userName;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;jdbc.password&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> DataSource <span class="title function_">getDataSource</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">DruidDataSource</span> <span class="variable">ds</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DruidDataSource</span>();</span><br><span class="line">        ds.setDriverClassName(driver);</span><br><span class="line">        ds.setUrl(url);</span><br><span class="line">        ds.setUsername(userName);</span><br><span class="line">        ds.setPassword(password);</span><br><span class="line">        <span class="keyword">return</span> ds;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><code>MybatisConfig</code> é…ç½®ç±»</p><ul><li><p>å®šä¹‰ <code>SqlSessionFactoryBean</code></p></li><li><p>å®šä¹‰æ˜ å°„é…ç½®</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> MapperScannerConfigurer <span class="title function_">getMapperScannerConfigurer</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">MapperScannerConfigurer</span> <span class="variable">msc</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MapperScannerConfigurer</span>();</span><br><span class="line">    msc.setBasePackage(<span class="string">&quot;com.itheima.dao&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> msc;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> SqlSessionFactoryBean <span class="title function_">getSqlSessionFactoryBean</span><span class="params">(DataSource dataSource)</span>&#123;</span><br><span class="line">    <span class="type">SqlSessionFactoryBean</span> <span class="variable">ssfb</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBean</span>();</span><br><span class="line">    ssfb.setTypeAliasesPackage(<span class="string">&quot;com.itheima.domain&quot;</span>);</span><br><span class="line">    ssfb.setDataSource(dataSource);</span><br><span class="line">    <span class="keyword">return</span> ssfb;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ul></li></ul><h3 id="4-2-SpringBootæ•´åˆmybatis"><a href="#4-2-SpringBootæ•´åˆmybatis" class="headerlink" title="4.2  SpringBootæ•´åˆmybatis"></a>4.2  SpringBootæ•´åˆmybatis</h3><h4 id="4-2-1-åˆ›å»ºæ¨¡å—"><a href="#4-2-1-åˆ›å»ºæ¨¡å—" class="headerlink" title="4.2.1  åˆ›å»ºæ¨¡å—"></a>4.2.1  åˆ›å»ºæ¨¡å—</h4><ul><li>åˆ›å»ºæ–°æ¨¡å—ï¼Œé€‰æ‹© <code>Spring Initializr</code>ï¼Œå¹¶é…ç½®æ¨¡å—ç›¸å…³åŸºç¡€ä¿¡æ¯</li></ul><img src="/2022/08/08/SpringBoot/image-20210917215913779.png" alt="image-20210917215913779" style="zoom:80%;"><ul><li><p>é€‰æ‹©å½“å‰æ¨¡å—éœ€è¦ä½¿ç”¨çš„æŠ€æœ¯é›†ï¼ˆMyBatisã€MySQLï¼‰</p><img src="/2022/08/08/SpringBoot/image-20210917215958091.png" alt="image-20210917215958091" style="zoom:80%;"></li></ul><h4 id="4-2-2-å®šä¹‰å®ä½“ç±»"><a href="#4-2-2-å®šä¹‰å®ä½“ç±»" class="headerlink" title="4.2.2  å®šä¹‰å®ä½“ç±»"></a>4.2.2  å®šä¹‰å®ä½“ç±»</h4><p>åœ¨ <code>com.itheima.domain</code> åŒ…ä¸‹å®šä¹‰å®ä½“ç±» <code>Book</code>ï¼Œå†…å®¹å¦‚ä¸‹</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Book</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String type;</span><br><span class="line">    <span class="keyword">private</span> String description;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//setter and  getter</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">//toString</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="4-2-3-å®šä¹‰daoæ¥å£"><a href="#4-2-3-å®šä¹‰daoæ¥å£" class="headerlink" title="4.2.3  å®šä¹‰daoæ¥å£"></a>4.2.3  å®šä¹‰daoæ¥å£</h4><p>åœ¨ <code>com.itheima.dao</code> åŒ…ä¸‹å®šä¹‰ <code>BookDao</code> æ¥å£ï¼Œå†…å®¹å¦‚ä¸‹</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">BookDao</span> &#123;</span><br><span class="line">    <span class="meta">@Select(&quot;select * from tbl_book where id = #&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Book <span class="title function_">getById</span><span class="params">(Integer id)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="4-2-4-å®šä¹‰æµ‹è¯•ç±»"><a href="#4-2-4-å®šä¹‰æµ‹è¯•ç±»" class="headerlink" title="4.2.4  å®šä¹‰æµ‹è¯•ç±»"></a>4.2.4  å®šä¹‰æµ‹è¯•ç±»</h4><p>åœ¨ <code>test/java</code> ä¸‹å®šä¹‰åŒ… <code>com.itheima</code> ï¼Œåœ¨è¯¥åŒ…ä¸‹æµ‹è¯•ç±»ï¼Œå†…å®¹å¦‚ä¸‹</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Springboot08MybatisApplicationTests</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> BookDao bookDao;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testGetById</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="type">Book</span> <span class="variable">book</span> <span class="operator">=</span> bookDao.getById(<span class="number">1</span>);</span><br><span class="line">System.out.println(book);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="4-2-5-ç¼–å†™é…ç½®"><a href="#4-2-5-ç¼–å†™é…ç½®" class="headerlink" title="4.2.5  ç¼–å†™é…ç½®"></a>4.2.5  ç¼–å†™é…ç½®</h4><p>æˆ‘ä»¬ä»£ç ä¸­å¹¶æ²¡æœ‰æŒ‡å®šè¿æ¥å“ªå„¿ä¸ªæ•°æ®åº“ï¼Œç”¨æˆ·åæ˜¯ä»€ä¹ˆï¼Œå¯†ç æ˜¯ä»€ä¹ˆã€‚æ‰€ä»¥è¿™éƒ¨åˆ†éœ€è¦åœ¨ <code>SpringBoot</code> çš„é…ç½®æ–‡ä»¶ä¸­è¿›è¡Œé…åˆã€‚</p><p>åœ¨ <code>application.yml</code> é…ç½®æ–‡ä»¶ä¸­é…ç½®å¦‚ä¸‹å†…å®¹</p><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.jdbc.Driver</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/ssm_db</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">root</span> <span class="comment">#å¯†ç æ˜¯çº¯æ•°å­—éœ€è¦åŠ ä¸ŠåŒå¼•å·</span></span><br></pre></td></tr></table></figure><h4 id="4-2-6-æµ‹è¯•"><a href="#4-2-6-æµ‹è¯•" class="headerlink" title="4.2.6  æµ‹è¯•"></a>4.2.6  æµ‹è¯•</h4><p>è¿è¡Œæµ‹è¯•æ–¹æ³•ï¼Œæˆ‘ä»¬ä¼šçœ‹åˆ°å¦‚ä¸‹é”™è¯¯ä¿¡æ¯</p><img src="/2022/08/08/SpringBoot/image-20210917221427930.png" alt="image-20210917221427930" style="zoom:70%;"><p>é”™è¯¯ä¿¡æ¯æ˜¾ç¤ºåœ¨ <code>Spring</code> å®¹å™¨ä¸­æ²¡æœ‰ <code>BookDao</code> ç±»å‹çš„ <code>bean</code>ã€‚ä¸ºä»€ä¹ˆä¼šå‡ºç°è¿™ç§æƒ…å†µå‘¢ï¼Ÿ</p><p>åŸå› æ˜¯ <code>Mybatis</code> ä¼šæ‰«ææ¥å£å¹¶åˆ›å»ºæ¥å£çš„ä»£ç å¯¹è±¡äº¤ç»™ <code>Spring</code> ç®¡ç†ï¼Œä½†æ˜¯ç°åœ¨å¹¶æ²¡æœ‰å‘Šè¯‰ <code>Mybatis</code> å“ªä¸ªæ˜¯ <code>dao</code> æ¥å£ã€‚è€Œæˆ‘ä»¬è¦è§£å†³è¿™ä¸ªé—®é¢˜éœ€è¦åœ¨<code>BookDao</code> æ¥å£ä¸Šä½¿ç”¨ <code>@Mapper</code> ï¼Œ<code>BookDao</code> æ¥å£æ”¹è¿›ä¸º</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">BookDao</span> &#123;</span><br><span class="line">    <span class="meta">@Select(&quot;select * from tbl_book where id = #&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Book <span class="title function_">getById</span><span class="params">(Integer id)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p><strong>æ³¨æ„ï¼š</strong></p><p><code>SpringBoot</code> ç‰ˆæœ¬ä½äº2.4.3(ä¸å«)ï¼ŒMysqlé©±åŠ¨ç‰ˆæœ¬å¤§äº8.0æ—¶ï¼Œéœ€è¦åœ¨urlè¿æ¥ä¸²ä¸­é…ç½®æ—¶åŒº <code>jdbc:mysql://localhost:3306/ssm_db?serverTimezone=UTC</code>ï¼Œæˆ–åœ¨MySQLæ•°æ®åº“ç«¯é…ç½®æ—¶åŒºè§£å†³æ­¤é—®é¢˜</p></blockquote><h4 id="4-2-7-ä½¿ç”¨Druidæ•°æ®æº"><a href="#4-2-7-ä½¿ç”¨Druidæ•°æ®æº" class="headerlink" title="4.2.7  ä½¿ç”¨Druidæ•°æ®æº"></a>4.2.7  ä½¿ç”¨Druidæ•°æ®æº</h4><p>ç°åœ¨æˆ‘ä»¬å¹¶æ²¡æœ‰æŒ‡å®šæ•°æ®æºï¼Œ<code>SpringBoot</code> æœ‰é»˜è®¤çš„æ•°æ®æºï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æŒ‡å®šä½¿ç”¨ <code>Druid</code> æ•°æ®æºï¼ŒæŒ‰ç…§ä»¥ä¸‹æ­¥éª¤å®ç°</p><ul><li><p>å¯¼å…¥ <code>Druid</code> ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.16<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>åœ¨ <code>application.yml</code> é…ç½®æ–‡ä»¶é…ç½®</p><p>å¯ä»¥é€šè¿‡ <code>spring.datasource.type</code> æ¥é…ç½®ä½¿ç”¨ä»€ä¹ˆæ•°æ®æºã€‚é…ç½®æ–‡ä»¶å†…å®¹å¯ä»¥æ”¹è¿›ä¸º</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span>  <span class="comment">#æ³¨æ„.cj</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/ssm_db?serverTimezone=UTC</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">com.alibaba.druid.pool.DruidDataSource</span></span><br></pre></td></tr></table></figure></li></ul><h2 id="5ï¼Œæ¡ˆä¾‹"><a href="#5ï¼Œæ¡ˆä¾‹" class="headerlink" title="5ï¼Œæ¡ˆä¾‹"></a>5ï¼Œæ¡ˆä¾‹</h2><p><code>SpringBoot</code> åˆ°è¿™å°±å·²ç»å­¦ä¹ å®Œæ¯•ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°†å­¦ä¹  <code>SSM</code> æ—¶åšçš„ä¸‰å¤§æ¡†æ¶æ•´åˆçš„æ¡ˆä¾‹ç”¨ <code>SpringBoot</code> æ¥å®ç°ä¸€ä¸‹ã€‚æˆ‘ä»¬å®Œæˆè¿™ä¸ªæ¡ˆä¾‹åŸºæœ¬æ˜¯å°†ä¹‹å‰åšçš„æ‹·è´è¿‡æ¥ï¼Œä¿®æ”¹æˆ <code>SpringBoot</code> çš„å³å¯ï¼Œä¸»è¦ä»ä»¥ä¸‹å‡ éƒ¨åˆ†å®Œæˆ</p><ol><li><p>pom.xml</p><p>é…ç½®èµ·æ­¥ä¾èµ–ï¼Œå¿…è¦çš„èµ„æºåæ ‡(druid)</p></li><li><p>application.yml</p><p>è®¾ç½®æ•°æ®æºã€ç«¯å£ç­‰</p></li><li><p>é…ç½®ç±»</p><p>å…¨éƒ¨åˆ é™¤</p></li><li><p>dao</p><p>è®¾ç½®@Mapper</p></li><li><p>æµ‹è¯•ç±»</p></li><li><p>é¡µé¢</p><p>æ”¾ç½®åœ¨resourcesç›®å½•ä¸‹çš„staticç›®å½•ä¸­</p></li></ol><h3 id="5-1-åˆ›å»ºå·¥ç¨‹"><a href="#5-1-åˆ›å»ºå·¥ç¨‹" class="headerlink" title="5.1  åˆ›å»ºå·¥ç¨‹"></a>5.1  åˆ›å»ºå·¥ç¨‹</h3><p>åˆ›å»º <code>SpringBoot</code> å·¥ç¨‹ï¼Œåœ¨åˆ›å»ºå·¥ç¨‹æ—¶éœ€è¦å‹¾é€‰ <code>web</code>ã€<code>mysql</code>ã€<code>mybatis</code>ï¼Œå·¥ç¨‹ç›®å½•ç»“æ„å¦‚ä¸‹</p><img src="/2022/08/08/SpringBoot/image-20210917225019868.png" alt="image-20210917225019868" style="zoom:80%;"><p>ç”±äºæˆ‘ä»¬å·¥ç¨‹ä¸­ä½¿ç”¨åˆ°äº† <code>Druid</code> ï¼Œæ‰€ä»¥éœ€è¦å¯¼å…¥ <code>Druid</code> çš„åæ ‡</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.16<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="5-2-ä»£ç æ‹·è´"><a href="#5-2-ä»£ç æ‹·è´" class="headerlink" title="5.2  ä»£ç æ‹·è´"></a>5.2  ä»£ç æ‹·è´</h3><p>å°† <code>springmvc_11_page</code> å·¥ç¨‹ä¸­çš„ <code>java</code> ä»£ç åŠæµ‹è¯•ä»£ç è¿åŒåŒ…æ‹·è´åˆ° <code>springboot_09_ssm</code> å·¥ç¨‹ï¼ŒæŒ‰ç…§ä¸‹å›¾è¿›è¡Œæ‹·è´</p><img src="/2022/08/08/SpringBoot/image-20210917225715519.png" alt="image-20210917225715519" style="zoom:70%;"><p>éœ€è¦ä¿®æ”¹çš„å†…å®¹å¦‚ä¸‹ï¼š</p><ul><li><p><code>Springmvc_11_page</code> ä¸­ <code>config</code> åŒ…ä¸‹çš„æ˜¯é…ç½®ç±»ï¼Œè€Œ <code>SpringBoot</code> å·¥ç¨‹ä¸éœ€è¦è¿™äº›é…ç½®ç±»ï¼Œæ‰€ä»¥è¿™äº›å¯ä»¥ç›´æ¥åˆ é™¤</p></li><li><p><code>dao</code> åŒ…ä¸‹çš„æ¥å£ä¸Šåœ¨æ‹·è´åˆ° <code>springboot_09-ssm</code> å·¥ç¨‹ä¸­éœ€è¦åœ¨æ¥å£ä¸­æ·»åŠ  <code>@Mapper</code> æ³¨è§£</p></li><li><p><code>BookServiceTest</code> æµ‹è¯•éœ€è¦æ”¹æˆ <code>SpringBoot</code> æ•´åˆ <code>junit</code> çš„</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookServiceTest</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> BookService bookService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testGetById</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">Book</span> <span class="variable">book</span> <span class="operator">=</span> bookService.getById(<span class="number">2</span>);</span><br><span class="line">        System.out.println(book);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testGetAll</span><span class="params">()</span>&#123;</span><br><span class="line">        List&lt;Book&gt; all = bookService.getAll();</span><br><span class="line">        System.out.println(all);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h3 id="5-3-é…ç½®æ–‡ä»¶"><a href="#5-3-é…ç½®æ–‡ä»¶" class="headerlink" title="5.3  é…ç½®æ–‡ä»¶"></a>5.3  é…ç½®æ–‡ä»¶</h3><p>åœ¨ <code>application.yml</code> é…ç½®æ–‡ä»¶ä¸­éœ€è¦é…ç½®å¦‚ä¸‹å†…å®¹</p><ul><li>æœåŠ¡çš„ç«¯å£å·</li><li>è¿æ¥æ•°æ®åº“çš„ä¿¡æ¯</li><li>æ•°æ®æº</li></ul><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">80</span></span><br><span class="line"></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">com.alibaba.druid.pool.DruidDataSource</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/ssm_db</span> <span class="comment">#?servierTimezone=UTC</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">root</span></span><br></pre></td></tr></table></figure><h3 id="5-4-é™æ€èµ„æº"><a href="#5-4-é™æ€èµ„æº" class="headerlink" title="5.4  é™æ€èµ„æº"></a>5.4  é™æ€èµ„æº</h3><p>åœ¨ <code>SpringBoot</code> ç¨‹åºä¸­æ˜¯æ²¡æœ‰ <code>webapp</code> ç›®å½•çš„ï¼Œé‚£ä¹ˆåœ¨ <code>SpringBoot</code> ç¨‹åºä¸­é™æ€èµ„æºéœ€è¦æ”¾åœ¨ä»€ä¹ˆä½ç½®å‘¢ï¼Ÿ</p><p>é™æ€èµ„æºéœ€è¦æ”¾åœ¨ <code>resources</code> ä¸‹çš„ <code>static</code> ä¸‹ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º</p><img src="/2022/08/08/SpringBoot/image-20210917230702072.png" alt="image-20210917230702072" style="zoom:80%;">]]></content>
      
      
      
        <tags>
            
            <tag> Javaå¼€å‘æ¡†æ¶ </tag>
            
            <tag> SpringBoot </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Mavené«˜çº§</title>
      <link href="/2022/08/07/Maven%E9%AB%98%E7%BA%A7/"/>
      <url>/2022/08/07/Maven%E9%AB%98%E7%BA%A7/</url>
      
        <content type="html"><![CDATA[<h2 id="1ï¼Œåˆ†æ¨¡å—å¼€å‘"><a href="#1ï¼Œåˆ†æ¨¡å—å¼€å‘" class="headerlink" title="1ï¼Œåˆ†æ¨¡å—å¼€å‘"></a>1ï¼Œåˆ†æ¨¡å—å¼€å‘</h2><h3 id="1-1-åˆ†æ¨¡å—å¼€å‘è®¾è®¡"><a href="#1-1-åˆ†æ¨¡å—å¼€å‘è®¾è®¡" class="headerlink" title="1.1 åˆ†æ¨¡å—å¼€å‘è®¾è®¡"></a>1.1 åˆ†æ¨¡å—å¼€å‘è®¾è®¡</h3><p>(1)æŒ‰ç…§åŠŸèƒ½æ‹†åˆ†</p><p>æˆ‘ä»¬ç°åœ¨çš„é¡¹ç›®éƒ½æ˜¯åœ¨ä¸€ä¸ªæ¨¡å—ä¸­ï¼Œæ¯”å¦‚å‰é¢çš„SSMæ•´åˆå¼€å‘ã€‚è™½ç„¶è¿™æ ·åšåŠŸèƒ½ä¹Ÿéƒ½å®ç°äº†ï¼Œä½†æ˜¯ä¹Ÿå­˜åœ¨äº†ä¸€äº›é—®é¢˜ï¼Œæˆ‘ä»¬æ‹¿é“¶è¡Œçš„é¡¹ç›®ä¸ºä¾‹æ¥èŠèŠè¿™ä¸ªäº‹ã€‚</p><ul><li>ç½‘ç»œæ²¡æœ‰é‚£ä¹ˆå‘è¾¾çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦åˆ°é“¶è¡ŒæŸœå°æˆ–è€…å–æ¬¾æœºè¿›è¡Œä¸šåŠ¡æ“ä½œ</li><li>éšç€äº’è”ç½‘çš„å‘å±•,æˆ‘ä»¬æœ‰äº†ç”µè„‘ä»¥åï¼Œå°±å¯ä»¥åœ¨ç½‘é¡µä¸Šç™»å½•é“¶è¡Œç½‘ç«™ä½¿ç”¨Uç›¾è¿›è¡Œä¸šåŠ¡æ“ä½œ</li><li>å†æ¥å°±æ˜¯éšç€æ™ºèƒ½æ‰‹æœºçš„æ™®åŠï¼Œæˆ‘ä»¬åªéœ€è¦ç”¨æ‰‹æœºç™»å½•APPå°±å¯ä»¥è¿›è¡Œä¸šåŠ¡æ“ä½œ</li></ul><p>ä¸Šé¢ä¸‰ä¸ªåœºæ™¯å‡ºç°çš„æ—¶é—´æ˜¯ä¸ç›¸åŒçš„ï¼Œå¦‚æœéè¦æŠŠä¸‰ä¸ªåœºæ™¯çš„æ¨¡å—ä»£ç æ”¾å…¥åˆ°ä¸€ä¸ªé¡¹ç›®ï¼Œé‚£ä¹ˆå½“å…¶ä¸­æŸä¸€ä¸ªæ¨¡å—ä»£ç å‡ºç°é—®é¢˜ï¼Œå°±ä¼šå¯¼è‡´æ•´ä¸ªé¡¹ç›®æ— æ³•æ­£å¸¸å¯åŠ¨ï¼Œä»è€Œå¯¼è‡´é“¶è¡Œçš„å¤šä¸ªä¸šåŠ¡éƒ½æ— æ³•æ­£å¸¸ç­ç†ã€‚æ‰€ä»¥æˆ‘ä»¬ä¼š<strong>æŒ‰ç…§åŠŸèƒ½</strong>å°†é¡¹ç›®è¿›è¡Œæ‹†åˆ†ã€‚</p><p>(2)æŒ‰ç…§æ¨¡å—æ‹†åˆ†</p><p>æ¯”å¦‚ç”µå•†çš„é¡¹ç›®ä¸­ï¼Œæœ‰è®¢å•å’Œå•†å“ä¸¤ä¸ªæ¨¡å—ï¼Œè®¢å•ä¸­éœ€è¦åŒ…å«å•†å“çš„è¯¦ç»†ä¿¡æ¯ï¼Œæ‰€ä»¥éœ€è¦å•†å“çš„æ¨¡å‹ç±»ï¼Œå•†å“æ¨¡å—ä¹Ÿä¼šç”¨åˆ°å•†å“çš„æ¨¡å‹ç±»ï¼Œè¿™ä¸ªæ—¶å€™å¦‚æœä¸¤ä¸ªæ¨¡å—ä¸­éƒ½å†™æ¨¡å‹ç±»ï¼Œå°±ä¼šå‡ºç°é‡å¤ä»£ç ï¼ŒåæœŸçš„ç»´æŠ¤æˆæœ¬å°±æ¯”è¾ƒé«˜ã€‚æˆ‘ä»¬å°±æƒ³èƒ½ä¸èƒ½å°†å®ƒä»¬å…¬å…±çš„éƒ¨åˆ†æŠ½å–æˆä¸€ä¸ªç‹¬ç«‹çš„æ¨¡å—ï¼Œå…¶ä»–æ¨¡å—è¦æƒ³ä½¿ç”¨å¯ä»¥åƒæ·»åŠ ç¬¬ä¸‰æ–¹jaråŒ…ä¾èµ–ä¸€æ ·æ¥ä½¿ç”¨æˆ‘ä»¬è‡ªå·±æŠ½å–çš„æ¨¡å—ï¼Œè¿™æ ·å°±è§£å†³äº†ä»£ç é‡å¤çš„é—®é¢˜,è¿™ç§æ‹†åˆ†æ–¹å¼å°±è¯´æˆ‘ä»¬æ‰€è¯´çš„&#x3D;&#x3D;æŒ‰ç…§æ¨¡å—&#x3D;&#x3D;æ‹†åˆ†ã€‚</p><p><img src="/2022/08/07/Maven%E9%AB%98%E7%BA%A7/1630768703430.png" alt="1630768703430"></p><p>ç»è¿‡ä¸¤ä¸ªæ¡ˆä¾‹çš„åˆ†æï¼Œæˆ‘ä»¬å°±çŸ¥é“:</p><ul><li>å°†åŸå§‹æ¨¡å—æŒ‰ç…§åŠŸèƒ½æ‹†åˆ†æˆè‹¥å¹²ä¸ªå­æ¨¡å—ï¼Œæ–¹ä¾¿æ¨¡å—é—´çš„ç›¸äº’è°ƒç”¨ï¼Œæ¥å£å…±äº«ã€‚</li></ul><p>åˆšåˆšæˆ‘ä»¬è¯´äº†å¯ä»¥å°†domainå±‚è¿›è¡Œæ‹†åˆ†ï¼Œé™¤äº†domainå±‚ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å°†å…¶ä»–çš„å±‚ä¹Ÿæ‹†æˆä¸€ä¸ªä¸ªå¯¹ç«‹çš„æ¨¡å—ï¼Œå¦‚:</p><p><img src="/2022/08/07/Maven%E9%AB%98%E7%BA%A7/1630768869208.png" alt="1630768869208"></p><p>è¿™æ ·çš„è¯ï¼Œé¡¹ç›®ä¸­çš„æ¯ä¸€å±‚éƒ½å¯ä»¥å•ç‹¬ç»´æŠ¤ï¼Œä¹Ÿå¯ä»¥å¾ˆæ–¹ä¾¿çš„è¢«åˆ«äººä½¿ç”¨ã€‚å…³äºåˆ†æ¨¡å—å¼€å‘çš„æ„ä¹‰ï¼Œæˆ‘ä»¬å°±è¯´å®Œäº†ï¼Œè¯´äº†è¿™ä¹ˆå¤šå¥½å¤„ï¼Œé‚£ä¹ˆè¯¥å¦‚ä½•å®ç°å‘¢?</p><h3 id="1-2-åˆ†æ¨¡å—å¼€å‘å®ç°"><a href="#1-2-åˆ†æ¨¡å—å¼€å‘å®ç°" class="headerlink" title="1.2 åˆ†æ¨¡å—å¼€å‘å®ç°"></a>1.2 åˆ†æ¨¡å—å¼€å‘å®ç°</h3><p>å‰é¢æˆ‘ä»¬å·²ç»å®Œæˆäº†SSMæ•´åˆï¼Œæ¥ä¸‹æ¥ï¼Œå’±ä»¬å°±åŸºäºSSMæ•´åˆçš„é¡¹ç›®æ¥å®ç°å¯¹é¡¹ç›®çš„æ‹†åˆ†ã€‚</p><h4 id="1-2-1-ç¯å¢ƒå‡†å¤‡"><a href="#1-2-1-ç¯å¢ƒå‡†å¤‡" class="headerlink" title="1.2.1 ç¯å¢ƒå‡†å¤‡"></a>1.2.1 ç¯å¢ƒå‡†å¤‡</h4><p>å°†<code>èµ„æ–™\maven_02_ssm</code>éƒ¨ç½²åˆ°IDEAä¸­ï¼Œå°†ç¯å¢ƒå¿«é€Ÿå‡†å¤‡å¥½ï¼Œéƒ¨ç½²æˆåŠŸåï¼Œé¡¹ç›®çš„æ ¼å¼å¦‚ä¸‹:</p><p><img src="/2022/08/07/Maven%E9%AB%98%E7%BA%A7/1630769969416.png" alt="1630769969416"></p><h4 id="1-2-2-æŠ½å–domainå±‚"><a href="#1-2-2-æŠ½å–domainå±‚" class="headerlink" title="1.2.2 æŠ½å–domainå±‚"></a>1.2.2 æŠ½å–domainå±‚</h4><h5 id="æ­¥éª¤1-åˆ›å»ºæ–°æ¨¡å—"><a href="#æ­¥éª¤1-åˆ›å»ºæ–°æ¨¡å—" class="headerlink" title="æ­¥éª¤1:åˆ›å»ºæ–°æ¨¡å—"></a>æ­¥éª¤1:åˆ›å»ºæ–°æ¨¡å—</h5><p>åˆ›å»ºä¸€ä¸ªåç§°ä¸º<code>maven_03_pojo</code>çš„jaré¡¹ç›®,ä¸ºä»€ä¹ˆé¡¹ç›®åæ˜¯ä»02åˆ°03è¿™æ ·åˆ›å»ºï¼ŒåŸå› åé¢æˆ‘ä»¬ä¼šæåˆ°ï¼Œè¿™å—çš„åç§°å¯ä»¥ä»»æ„ã€‚</p><p><img src="/2022/08/07/Maven%E9%AB%98%E7%BA%A7/1630771178137.png" alt="1630771178137"></p><h5 id="æ­¥éª¤2-é¡¹ç›®ä¸­åˆ›å»ºdomainåŒ…"><a href="#æ­¥éª¤2-é¡¹ç›®ä¸­åˆ›å»ºdomainåŒ…" class="headerlink" title="æ­¥éª¤2:é¡¹ç›®ä¸­åˆ›å»ºdomainåŒ…"></a>æ­¥éª¤2:é¡¹ç›®ä¸­åˆ›å»ºdomainåŒ…</h5><p>åœ¨<code>maven_03_pojo</code>é¡¹ç›®ä¸­åˆ›å»º<code>com.itheima.domain</code>åŒ…ï¼Œå¹¶å°†<code>maven_02_ssm</code>ä¸­Bookç±»æ‹·è´åˆ°è¯¥åŒ…ä¸­</p><p><img src="/2022/08/07/Maven%E9%AB%98%E7%BA%A7/1630771371487.png" alt="1630771371487"></p><h5 id="æ­¥éª¤3-åˆ é™¤åŸé¡¹ç›®ä¸­çš„domainåŒ…"><a href="#æ­¥éª¤3-åˆ é™¤åŸé¡¹ç›®ä¸­çš„domainåŒ…" class="headerlink" title="æ­¥éª¤3:åˆ é™¤åŸé¡¹ç›®ä¸­çš„domainåŒ…"></a>æ­¥éª¤3:åˆ é™¤åŸé¡¹ç›®ä¸­çš„domainåŒ…</h5><p>åˆ é™¤åï¼Œ<code>maven_02_ssm</code>é¡¹ç›®ä¸­ç”¨åˆ°<code>Book</code>çš„ç±»ä¸­éƒ½ä¼šæœ‰çº¢è‰²æç¤ºï¼Œå¦‚ä¸‹:</p><p><img src="/2022/08/07/Maven%E9%AB%98%E7%BA%A7/1630771505703.png" alt="1630771505703"></p><p>**è¯´æ˜:**å‡ºé”™çš„åŸå› æ˜¯<code>maven_02_ssm</code>ä¸­å·²ç»å°†Bookç±»åˆ é™¤ï¼Œæ‰€ä»¥è¯¥é¡¹ç›®æ‰¾ä¸åˆ°Bookç±»ï¼Œæ‰€ä»¥æŠ¥é”™</p><p>è¦æƒ³è§£å†³ä¸Šè¿°é—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦åœ¨<code>maven_02_ssm</code>ä¸­æ·»åŠ <code>maven_03_pojo</code>çš„ä¾èµ–ã€‚</p><h5 id="æ­¥éª¤4-å»ºç«‹ä¾èµ–å…³ç³»"><a href="#æ­¥éª¤4-å»ºç«‹ä¾èµ–å…³ç³»" class="headerlink" title="æ­¥éª¤4:å»ºç«‹ä¾èµ–å…³ç³»"></a>æ­¥éª¤4:å»ºç«‹ä¾èµ–å…³ç³»</h5><p>åœ¨<code>maven_02_ssm</code>é¡¹ç›®çš„pom.xmlæ·»åŠ <code>maven_03_pojo</code>çš„ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.itheima<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven_03_pojo<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å› ä¸ºæ·»åŠ äº†ä¾èµ–ï¼Œæ‰€ä»¥åœ¨<code>maven_02_ssm</code>ä¸­å°±å·²ç»èƒ½æ‰¾åˆ°Bookç±»ï¼Œæ‰€ä»¥åˆšæ‰çš„æŠ¥çº¢æç¤ºå°±ä¼šæ¶ˆå¤±ã€‚</p><h5 id="æ­¥éª¤5-ç¼–è¯‘maven-02-ssmé¡¹ç›®"><a href="#æ­¥éª¤5-ç¼–è¯‘maven-02-ssmé¡¹ç›®" class="headerlink" title="æ­¥éª¤5:ç¼–è¯‘maven_02_ssmé¡¹ç›®"></a>æ­¥éª¤5:ç¼–è¯‘<code>maven_02_ssm</code>é¡¹ç›®</h5><p>ç¼–è¯‘<code>maven_02_ssm</code>ä½ ä¼šåœ¨æ§åˆ¶å°çœ‹åˆ°å¦‚ä¸‹é”™è¯¯</p><p><img src="/2022/08/07/Maven%E9%AB%98%E7%BA%A7/1630771987325.png" alt="1630771987325"></p><p>é”™è¯¯ä¿¡æ¯ä¸ºï¼šä¸èƒ½è§£å†³<code>maven_02_ssm</code>é¡¹ç›®çš„ä¾èµ–é—®é¢˜ï¼Œæ‰¾ä¸åˆ°<code>maven_03_pojo</code>è¿™ä¸ªjaråŒ…ã€‚</p><p>ä¸ºä»€ä¹ˆæ‰¾ä¸åˆ°å‘¢?</p><p>åŸå› æ˜¯Mavenä¼šä»æœ¬åœ°ä»“åº“æ‰¾å¯¹åº”çš„jaråŒ…ï¼Œä½†æ˜¯æœ¬åœ°ä»“åº“åˆä¸å­˜åœ¨è¯¥jaråŒ…æ‰€ä»¥ä¼šæŠ¥é”™ã€‚</p><p>åœ¨IDEAä¸­æ˜¯æœ‰<code>maven_03_pojo</code>è¿™ä¸ªé¡¹ç›®ï¼Œæ‰€ä»¥æˆ‘ä»¬åªéœ€è¦å°†<code>maven_03_pojo</code>é¡¹ç›®å®‰è£…åˆ°æœ¬åœ°ä»“åº“å³å¯ã€‚</p><h5 id="æ­¥éª¤6-å°†é¡¹ç›®å®‰è£…æœ¬åœ°ä»“åº“"><a href="#æ­¥éª¤6-å°†é¡¹ç›®å®‰è£…æœ¬åœ°ä»“åº“" class="headerlink" title="æ­¥éª¤6:å°†é¡¹ç›®å®‰è£…æœ¬åœ°ä»“åº“"></a>æ­¥éª¤6:å°†é¡¹ç›®å®‰è£…æœ¬åœ°ä»“åº“</h5><p>å°†éœ€è¦è¢«ä¾èµ–çš„é¡¹ç›®<code>maven_03_pojo</code>ï¼Œä½¿ç”¨mavençš„installå‘½ä»¤ï¼ŒæŠŠå…¶å®‰è£…åˆ°Mavençš„æœ¬åœ°ä»“åº“ä¸­ã€‚</p><p><img src="/2022/08/07/Maven%E9%AB%98%E7%BA%A7/1630773180969.png" alt="1630773180969"></p><p>å®‰è£…æˆåŠŸåï¼Œåœ¨å¯¹åº”çš„è·¯å¾„ä¸‹å°±çœ‹åˆ°å®‰è£…å¥½çš„jaråŒ…</p><p><img src="/2022/08/07/Maven%E9%AB%98%E7%BA%A7/1630773262441.png" alt="1630773262441"></p><p>**è¯´æ˜:**å…·ä½“å®‰è£…åœ¨å“ªé‡Œï¼Œå’Œä½ ä»¬è‡ªå·±ç”µè„‘ä¸ŠMavençš„æœ¬åœ°ä»“åº“é…ç½®çš„ä½ç½®æœ‰å…³ã€‚</p><p>å½“å†æ¬¡æ‰§è¡Œ<code>maven_02_ssm</code>çš„compileçš„å‘½ä»¤åï¼Œå°±å·²ç»èƒ½å¤ŸæˆåŠŸç¼–è¯‘ã€‚</p><h4 id="1-2-3-æŠ½å–Daoå±‚"><a href="#1-2-3-æŠ½å–Daoå±‚" class="headerlink" title="1.2.3 æŠ½å–Daoå±‚"></a>1.2.3 æŠ½å–Daoå±‚</h4><h5 id="æ­¥éª¤1-åˆ›å»ºæ–°æ¨¡å—-1"><a href="#æ­¥éª¤1-åˆ›å»ºæ–°æ¨¡å—-1" class="headerlink" title="æ­¥éª¤1:åˆ›å»ºæ–°æ¨¡å—"></a>æ­¥éª¤1:åˆ›å»ºæ–°æ¨¡å—</h5><p>åˆ›å»ºä¸€ä¸ªåç§°ä¸º<code>maven_04_dao</code>çš„jaré¡¹ç›®</p><p><img src="/2022/08/07/Maven%E9%AB%98%E7%BA%A7/1630773580067.png" alt="1630773580067"></p><h5 id="æ­¥éª¤2-é¡¹ç›®ä¸­åˆ›å»ºdaoåŒ…"><a href="#æ­¥éª¤2-é¡¹ç›®ä¸­åˆ›å»ºdaoåŒ…" class="headerlink" title="æ­¥éª¤2:é¡¹ç›®ä¸­åˆ›å»ºdaoåŒ…"></a>æ­¥éª¤2:é¡¹ç›®ä¸­åˆ›å»ºdaoåŒ…</h5><p>åœ¨<code>maven_04_dao</code>é¡¹ç›®ä¸­åˆ›å»º<code>com.itheima.dao</code>åŒ…ï¼Œå¹¶å°†<code>maven_02_ssm</code>ä¸­BookDaoç±»æ‹·è´åˆ°è¯¥åŒ…ä¸­</p><p><img src="/2022/08/07/Maven%E9%AB%98%E7%BA%A7/1630773695062.png" alt="1630773695062"></p><p>åœ¨<code>maven_04_dao</code>ä¸­ä¼šæœ‰å¦‚ä¸‹å‡ ä¸ªé—®é¢˜éœ€è¦è§£å†³ä¸‹:</p><p><img src="/2022/08/07/Maven%E9%AB%98%E7%BA%A7/1630773958756.png" alt="1630773958756"></p><ul><li><p>é¡¹ç›®<code>maven_04_dao</code>çš„BookDaoæ¥å£ä¸­Bookç±»æ‰¾ä¸åˆ°æŠ¥é”™</p><ul><li><p>è§£å†³æ–¹æ¡ˆåœ¨<code>maven_04_dao</code>é¡¹ç›®çš„pom.xmlä¸­æ·»åŠ <code>maven_03_pojo</code>é¡¹ç›®</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.itheima<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven_03_pojo<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul></li><li><p>é¡¹ç›®<code>maven_04_dao</code>çš„BookDaoæ¥å£ä¸­ï¼ŒMybatisçš„å¢åˆ æ”¹æŸ¥æ³¨è§£æŠ¥é”™</p><ul><li><p>è§£å†³æ–¹æ¡ˆåœ¨<code>maven_04_dao</code>é¡¹ç›®çš„pom.xmlä¸­æ·»åŠ <code>mybatis</code>çš„ç›¸å…³ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.47<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul></li></ul><h5 id="æ­¥éª¤3-åˆ é™¤åŸé¡¹ç›®ä¸­çš„daoåŒ…"><a href="#æ­¥éª¤3-åˆ é™¤åŸé¡¹ç›®ä¸­çš„daoåŒ…" class="headerlink" title="æ­¥éª¤3:åˆ é™¤åŸé¡¹ç›®ä¸­çš„daoåŒ…"></a>æ­¥éª¤3:åˆ é™¤åŸé¡¹ç›®ä¸­çš„daoåŒ…</h5><p>åˆ é™¤DaoåŒ…ä»¥åï¼Œå› ä¸º<code>maven_02_ssm</code>ä¸­çš„BookServiceImplç±»ä¸­æœ‰ä½¿ç”¨åˆ°Daoçš„å†…å®¹ï¼Œæ‰€ä»¥éœ€è¦åœ¨<code>maven_02_ssm</code>çš„pom.xmlæ·»åŠ <code>maven_04_dao</code>çš„ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.itheima<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven_04_dao<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ­¤æ—¶åœ¨<code>maven_02_ssm</code>é¡¹ç›®ä¸­å°±å·²ç»æ·»åŠ äº†<code>maven_03_pojo</code>å’Œ<code>maven_04_dao</code>åŒ…</p><p><img src="/2022/08/07/Maven%E9%AB%98%E7%BA%A7/1630774696344.png" alt="1630774696344"></p><p>å†æ¬¡å¯¹<code>maven_02_ssm</code>é¡¹ç›®è¿›è¡Œç¼–è¯‘ï¼Œåˆä¼šæŠ¥é”™ï¼Œå¦‚ä¸‹:</p><p><img src="/2022/08/07/Maven%E9%AB%98%E7%BA%A7/1630774780211.png" alt="1630774780211"></p><p>å’Œåˆšæ‰çš„é”™è¯¯åŸå› æ˜¯ä¸€æ ·çš„ï¼Œmavenåœ¨ä»“åº“ä¸­æ²¡æœ‰æ‰¾åˆ°<code>maven_04_dao</code>,æ‰€ä»¥æ­¤æ—¶æˆ‘ä»¬åªéœ€è¦å°†<code>maven_04_dao</code>å®‰è£…åˆ°Mavençš„æœ¬åœ°ä»“åº“å³å¯ã€‚</p><h5 id="æ­¥éª¤4-å°†é¡¹ç›®å®‰è£…åˆ°æœ¬åœ°ä»“åº“"><a href="#æ­¥éª¤4-å°†é¡¹ç›®å®‰è£…åˆ°æœ¬åœ°ä»“åº“" class="headerlink" title="æ­¥éª¤4:å°†é¡¹ç›®å®‰è£…åˆ°æœ¬åœ°ä»“åº“"></a>æ­¥éª¤4:å°†é¡¹ç›®å®‰è£…åˆ°æœ¬åœ°ä»“åº“</h5><p>å°†éœ€è¦è¢«ä¾èµ–çš„é¡¹ç›®<code>maven_04_dao</code>ï¼Œä½¿ç”¨mavençš„installå‘½ä»¤ï¼ŒæŠŠå…¶å®‰è£…åˆ°Mavençš„æœ¬åœ°ä»“åº“ä¸­ã€‚</p><p><img src="/2022/08/07/Maven%E9%AB%98%E7%BA%A7/1630774917743.png" alt="1630774917743"></p><p>å®‰è£…æˆåŠŸåï¼Œåœ¨å¯¹åº”çš„è·¯å¾„ä¸‹å°±çœ‹åˆ°äº†å®‰è£…å¥½å¯¹åº”çš„jaråŒ…</p><p><img src="/2022/08/07/Maven%E9%AB%98%E7%BA%A7/1630774946856.png" alt="1630774946856"></p><p>å½“å†æ¬¡æ‰§è¡Œ<code>maven_02_ssm</code>çš„compileçš„æŒ‡ä»¤åï¼Œå°±å·²ç»èƒ½å¤ŸæˆåŠŸç¼–è¯‘ã€‚</p><h4 id="1-2-4-è¿è¡Œæµ‹è¯•å¹¶æ€»ç»“"><a href="#1-2-4-è¿è¡Œæµ‹è¯•å¹¶æ€»ç»“" class="headerlink" title="1.2.4 è¿è¡Œæµ‹è¯•å¹¶æ€»ç»“"></a>1.2.4 è¿è¡Œæµ‹è¯•å¹¶æ€»ç»“</h4><p>å°†æŠ½å–åçš„é¡¹ç›®è¿›è¡Œè¿è¡Œï¼Œæµ‹è¯•ä¹‹å‰çš„å¢åˆ æ”¹æŸ¥åŠŸèƒ½ä¾ç„¶èƒ½å¤Ÿä½¿ç”¨ã€‚</p><p>æ‰€ä»¥å¯¹äºé¡¹ç›®çš„æ‹†åˆ†ï¼Œå¤§è‡´ä¼šæœ‰å¦‚ä¸‹å‡ ä¸ªæ­¥éª¤:</p><p>(1) åˆ›å»ºMavenæ¨¡å—</p><p>(2) ä¹¦å†™æ¨¡å—ä»£ç </p><p>åˆ†æ¨¡å—å¼€å‘éœ€è¦å…ˆé’ˆå¯¹æ¨¡å—åŠŸèƒ½è¿›è¡Œè®¾è®¡ï¼Œå†è¿›è¡Œç¼–ç ã€‚ä¸ä¼šå…ˆå°†å·¥ç¨‹å¼€å‘å®Œæ¯•ï¼Œç„¶åè¿›è¡Œæ‹†åˆ†ã€‚æ‹†åˆ†æ–¹å¼å¯ä»¥æŒ‰ç…§åŠŸèƒ½æ‹†ä¹Ÿå¯ä»¥æŒ‰ç…§æ¨¡å—æ‹†ã€‚</p><p>(3)é€šè¿‡mavenæŒ‡ä»¤å®‰è£…æ¨¡å—åˆ°æœ¬åœ°ä»“åº“(install æŒ‡ä»¤)</p><p>å›¢é˜Ÿå†…éƒ¨å¼€å‘éœ€è¦å‘å¸ƒæ¨¡å—åŠŸèƒ½åˆ°å›¢é˜Ÿå†…éƒ¨å¯å…±äº«çš„ä»“åº“ä¸­(ç§æœ)ï¼Œç§æœæˆ‘ä»¬åé¢ä¼šè®²è§£ã€‚</p><h2 id="2ï¼Œä¾èµ–ç®¡ç†"><a href="#2ï¼Œä¾èµ–ç®¡ç†" class="headerlink" title="2ï¼Œä¾èµ–ç®¡ç†"></a>2ï¼Œä¾èµ–ç®¡ç†</h2><p>æˆ‘ä»¬ç°åœ¨å·²ç»èƒ½æŠŠé¡¹ç›®æ‹†åˆ†æˆä¸€ä¸ªä¸ªç‹¬ç«‹çš„æ¨¡å—ï¼Œå½“åœ¨å…¶ä»–é¡¹ç›®ä¸­æƒ³è¦ä½¿ç”¨ç‹¬ç«‹å‡ºæ¥çš„è¿™äº›æ¨¡å—ï¼Œåªéœ€è¦åœ¨å…¶pom.xmlä½¿ç”¨<dependency>æ ‡ç­¾æ¥è¿›è¡ŒjaråŒ…çš„å¼•å…¥å³å¯ã€‚</dependency></p><p><dependency>å…¶å®å°±æ˜¯ä¾èµ–ï¼Œå…³äºä¾èµ–ç®¡ç†é‡Œé¢éƒ½æ¶‰åŠå“ªäº›å†…å®¹ï¼Œæˆ‘ä»¬å°±ä¸€ä¸ªä¸ªæ¥å­¦ä¹ ä¸‹:</dependency></p><ul><li>ä¾èµ–ä¼ é€’</li><li>å¯é€‰ä¾èµ–</li><li>æ’é™¤ä¾èµ–</li></ul><p>æˆ‘ä»¬å…ˆæ¥è¯´è¯´ä»€ä¹ˆæ˜¯ä¾èµ–:</p><p>ä¾èµ–æŒ‡å½“å‰é¡¹ç›®è¿è¡Œæ‰€éœ€çš„jarï¼Œä¸€ä¸ªé¡¹ç›®å¯ä»¥è®¾ç½®å¤šä¸ªä¾èµ–ã€‚</p><p>æ ¼å¼ä¸º:</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--è®¾ç½®å½“å‰é¡¹ç›®æ‰€ä¾èµ–çš„æ‰€æœ‰jar--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--è®¾ç½®å…·ä½“çš„ä¾èµ–--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--ä¾èµ–æ‰€å±ç¾¤ç»„id--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--ä¾èµ–æ‰€å±é¡¹ç›®id--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--ä¾èµ–ç‰ˆæœ¬å·--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.10.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="2-1-ä¾èµ–ä¼ é€’ä¸å†²çªé—®é¢˜"><a href="#2-1-ä¾èµ–ä¼ é€’ä¸å†²çªé—®é¢˜" class="headerlink" title="2.1 ä¾èµ–ä¼ é€’ä¸å†²çªé—®é¢˜"></a>2.1 ä¾èµ–ä¼ é€’ä¸å†²çªé—®é¢˜</h3><p>å›åˆ°æˆ‘ä»¬åˆšæ‰çš„é¡¹ç›®æ¡ˆä¾‹ä¸­ï¼Œæ‰“å¼€Mavençš„é¢æ¿ï¼Œä½ ä¼šå‘ç°:</p><p><img src="/2022/08/07/Maven%E9%AB%98%E7%BA%A7/1630818930387.png"></p><p>åœ¨é¡¹ç›®æ‰€ä¾èµ–çš„è¿™äº›jaråŒ…ä¸­ï¼Œæœ‰ä¸€ä¸ªæ¯”è¾ƒå¤§çš„åŒºåˆ«å°±æ˜¯<strong>æœ‰çš„ä¾èµ–å‰é¢æœ‰ç®­å¤´<code>&gt;</code>,æœ‰çš„ä¾èµ–å‰é¢æ²¡æœ‰ã€‚</strong></p><p>é‚£ä¹ˆè¿™ä¸ªç®­å¤´æ‰€ä»£è¡¨çš„å«ä¹‰æ˜¯ä»€ä¹ˆ?</p><p>æ‰“å¼€å‰é¢çš„ç®­å¤´ï¼Œä½ ä¼šå‘ç°è¿™ä¸ªjaråŒ…ä¸‹é¢è¿˜åŒ…å«æœ‰å…¶ä»–çš„jaråŒ…</p><p><img src="/2022/08/07/Maven%E9%AB%98%E7%BA%A7/1630819455928.png" alt="1630819455928"></p><p>ä½ ä¼šå‘ç°æœ‰ä¸¤ä¸ª<code>maven_03_pojo</code>çš„ä¾èµ–è¢«åŠ è½½åˆ°Dependenciesä¸­ï¼Œé‚£ä¹ˆ<code>maven_04_dao</code>ä¸­çš„<code>maven_03_pojo</code>èƒ½ä¸èƒ½ä½¿ç”¨å‘¢?</p><p>è¦æƒ³éªŒè¯éå¸¸ç®€å•ï¼Œåªéœ€è¦æŠŠ<code>maven_02_ssm</code>é¡¹ç›®ä¸­pom.xmlå…³äº<code>maven_03_pojo</code>çš„ä¾èµ–æ³¨é‡Šæˆ–åˆ é™¤æ‰</p><p><img src="/2022/08/07/Maven%E9%AB%98%E7%BA%A7/1630819768305.png" alt="1630819768305"></p><p>åœ¨Dependenciesä¸­ç§»é™¤è‡ªå·±æ‰€æ·»åŠ <code>maven_03_pojo</code>ä¾èµ–åï¼Œæ‰“å¼€BookServiceImplçš„ç±»ï¼Œä½ ä¼šå‘ç°Bookç±»ä¾ç„¶å­˜åœ¨ï¼Œå¯ä»¥è¢«æ­£å¸¸ä½¿ç”¨</p><p><img src="/2022/08/07/Maven%E9%AB%98%E7%BA%A7/1630819826163.png" alt="1630819826163"></p><p>è¿™ä¸ªç‰¹æ€§å…¶å®å°±æ˜¯æˆ‘ä»¬è¦è®²è§£çš„&#x3D;&#x3D;ä¾èµ–ä¼ é€’&#x3D;&#x3D;ã€‚</p><p>ä¾èµ–æ˜¯å…·æœ‰ä¼ é€’æ€§çš„:</p><p><img src="/2022/08/07/Maven%E9%AB%98%E7%BA%A7/1630853726532.png" alt="1630853726532"></p><p>**è¯´æ˜:**Aä»£è¡¨è‡ªå·±çš„é¡¹ç›®ï¼›B,C,D,E,F,Gä»£è¡¨çš„æ˜¯é¡¹ç›®æ‰€ä¾èµ–çš„jaråŒ…ï¼›D1å’ŒD2 E1å’ŒE2ä»£è¡¨æ˜¯ç›¸åŒjaråŒ…çš„ä¸åŒç‰ˆæœ¬</p><p>(1) Aä¾èµ–äº†Bå’ŒC,Bå’ŒCæœ‰åˆ†åˆ«ä¾èµ–äº†å…¶ä»–jaråŒ…ï¼Œæ‰€ä»¥åœ¨Aé¡¹ç›®ä¸­å°±å¯ä»¥ä½¿ç”¨ä¸Šé¢æ‰€æœ‰jaråŒ…ï¼Œè¿™å°±æ˜¯æ‰€è¯´çš„ä¾èµ–ä¼ é€’</p><p>(2) ä¾èµ–ä¼ é€’æœ‰ç›´æ¥ä¾èµ–å’Œé—´æ¥ä¾èµ–</p><ul><li>ç›¸å¯¹äºAæ¥è¯´ï¼ŒAç›´æ¥ä¾èµ–Bå’ŒC,é—´æ¥ä¾èµ–äº†D1,E1,Gï¼ŒF,D2å’ŒE2</li><li>ç›¸å¯¹äºBæ¥è¯´ï¼ŒBç›´æ¥ä¾èµ–äº†D1å’ŒE1,é—´æ¥ä¾èµ–äº†G</li><li>ç›´æ¥ä¾èµ–å’Œé—´æ¥ä¾èµ–æ˜¯ä¸€ä¸ªç›¸å¯¹çš„æ¦‚å¿µ</li></ul><p>(3)å› ä¸ºæœ‰ä¾èµ–ä¼ é€’çš„å­˜åœ¨ï¼Œå°±ä¼šå¯¼è‡´jaråŒ…åœ¨ä¾èµ–çš„è¿‡ç¨‹ä¸­å‡ºç°å†²çªé—®é¢˜ï¼Œå…·ä½“ä»€ä¹ˆæ˜¯å†²çª?Mavenæ˜¯å¦‚ä½•è§£å†³å†²çªçš„?</p><p>è¿™é‡Œæ‰€è¯´çš„&#x3D;&#x3D;ä¾èµ–å†²çª&#x3D;&#x3D;æ˜¯æŒ‡é¡¹ç›®ä¾èµ–çš„æŸä¸€ä¸ªjaråŒ…ï¼Œæœ‰å¤šä¸ªä¸åŒçš„ç‰ˆæœ¬ï¼Œå› è€Œé€ æˆç±»åŒ…ç‰ˆæœ¬å†²çªã€‚</p><p>æƒ…å†µä¸€: åœ¨<code>maven_02_ssm</code>çš„pom.xmlä¸­æ·»åŠ ä¸¤ä¸ªä¸åŒç‰ˆæœ¬çš„Junitä¾èµ–:</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.11<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="/2022/08/07/Maven%E9%AB%98%E7%BA%A7/1630820964663.png" alt="1630820964663"></p><p>é€šè¿‡å¯¹æ¯”ï¼Œä¼šå‘ç°ä¸€ä¸ªç»“è®º</p><ul><li>ç‰¹æ®Šä¼˜å…ˆï¼šå½“åŒçº§é…ç½®äº†ç›¸åŒèµ„æºçš„ä¸åŒç‰ˆæœ¬ï¼Œåé…ç½®çš„è¦†ç›–å…ˆé…ç½®çš„ã€‚</li></ul><p>æƒ…å†µäºŒ: è·¯å¾„ä¼˜å…ˆï¼šå½“ä¾èµ–ä¸­å‡ºç°ç›¸åŒçš„èµ„æºæ—¶ï¼Œå±‚çº§è¶Šæ·±ï¼Œä¼˜å…ˆçº§è¶Šä½ï¼Œå±‚çº§è¶Šæµ…ï¼Œä¼˜å…ˆçº§è¶Šé«˜</p><ul><li>Aé€šè¿‡Bé—´æ¥ä¾èµ–åˆ°E1</li><li>Aé€šè¿‡Cé—´æ¥ä¾èµ–åˆ°E2</li><li>Aå°±ä¼šé—´æ¥ä¾èµ–åˆ°E1å’ŒE2,Mavenä¼šæŒ‰ç…§å±‚çº§æ¥é€‰æ‹©ï¼ŒE1æ˜¯2åº¦ï¼ŒE2æ˜¯3åº¦ï¼Œæ‰€ä»¥æœ€ç»ˆä¼šé€‰æ‹©E1</li></ul><p>æƒ…å†µä¸‰: å£°æ˜ä¼˜å…ˆï¼šå½“èµ„æºåœ¨ç›¸åŒå±‚çº§è¢«ä¾èµ–æ—¶ï¼Œé…ç½®é¡ºåºé å‰çš„è¦†ç›–é…ç½®é¡ºåºé åçš„</p><ul><li>Aé€šè¿‡Bé—´æ¥ä¾èµ–åˆ°D1</li><li>Aé€šè¿‡Cé—´æ¥ä¾èµ–åˆ°D2</li><li>D1å’ŒD2éƒ½æ˜¯ä¸¤åº¦ï¼Œè¿™ä¸ªæ—¶å€™å°±ä¸èƒ½æŒ‰ç…§å±‚çº§æ¥é€‰æ‹©ï¼Œéœ€è¦æŒ‰ç…§å£°æ˜æ¥ï¼Œè°å…ˆå£°æ˜ç”¨è°ï¼Œä¹Ÿå°±æ˜¯è¯´Båœ¨Cä¹‹å‰å£°æ˜ï¼Œè¿™ä¸ªæ—¶å€™ä½¿ç”¨çš„æ˜¯D1ï¼Œåä¹‹åˆ™ä¸ºD2</li></ul><p>ä½†æ˜¯å¯¹åº”ä¸Šé¢è¿™äº›ç»“æœï¼Œå¤§å®¶ä¸éœ€è¦åˆ»æ„å»è®°å®ƒã€‚å› ä¸ºä¸ç®¡Mavenæ€ä¹ˆé€‰ï¼Œæœ€ç»ˆçš„ç»“æœéƒ½ä¼šåœ¨Mavençš„<code>Dependencies</code>é¢æ¿ä¸­å±•ç¤ºå‡ºæ¥ï¼Œå±•ç¤ºçš„æ˜¯å“ªä¸ªç‰ˆæœ¬ï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒé€‰æ‹©çš„å°±æ˜¯å“ªä¸ªç‰ˆæœ¬ï¼Œå¦‚:</p><p><img src="/2022/08/07/Maven%E9%AB%98%E7%BA%A7/1630853443920.png" alt="1630853443920"></p><p>å¦‚æœæƒ³æ›´å…¨é¢çš„æŸ¥çœ‹Mavenä¸­å„ä¸ªåæ ‡çš„ä¾èµ–å…³ç³»ï¼Œå¯ä»¥ç‚¹å‡»Mavené¢æ¿ä¸­çš„<code>show Dependencies</code></p><p><img src="/2022/08/07/Maven%E9%AB%98%E7%BA%A7/1630853519736.png" alt="1630853519736"></p><p>åœ¨è¿™ä¸ªè§†å›¾ä¸­å°±èƒ½å¾ˆæ˜æ˜¾çš„å±•ç¤ºå‡ºjaråŒ…ä¹‹é—´çš„ç›¸äº’ä¾èµ–å…³ç³»ã€‚</p><h3 id="2-2-å¯é€‰ä¾èµ–å’Œæ’é™¤ä¾èµ–"><a href="#2-2-å¯é€‰ä¾èµ–å’Œæ’é™¤ä¾èµ–" class="headerlink" title="2.2 å¯é€‰ä¾èµ–å’Œæ’é™¤ä¾èµ–"></a>2.2 å¯é€‰ä¾èµ–å’Œæ’é™¤ä¾èµ–</h3><p>ä¾èµ–ä¼ é€’ä»‹ç»å®Œä»¥åï¼Œæˆ‘ä»¬æ¥æ€è€ƒä¸€ä¸ªé—®é¢˜ï¼Œ</p><p><img src="/2022/08/07/Maven%E9%AB%98%E7%BA%A7/1630854436435.png" alt="1630854436435"></p><ul><li>maven_02_ssm ä¾èµ–äº† maven_04_dao</li><li>maven_04_dao ä¾èµ–äº† maven_03_pojo</li><li>å› ä¸ºç°åœ¨æœ‰ä¾èµ–ä¼ é€’ï¼Œæ‰€ä»¥maven_02_ssmèƒ½å¤Ÿä½¿ç”¨åˆ°maven_03_pojoçš„å†…å®¹</li><li>å¦‚æœè¯´ç°åœ¨ä¸æƒ³è®©maven_02_ssmä¾èµ–åˆ°maven_03_pojoï¼Œæœ‰å“ªäº›è§£å†³æ–¹æ¡ˆ?</li></ul><p>**è¯´æ˜:**åœ¨çœŸå®ä½¿ç”¨çš„è¿‡ç¨‹ä¸­ï¼Œmaven_02_ssmä¸­æ˜¯éœ€è¦ç”¨åˆ°maven_03_pojoçš„ï¼Œæˆ‘ä»¬è¿™é‡Œåªæ˜¯ç”¨è¿™ä¸ªä¾‹å­æè¿°æˆ‘ä»¬çš„éœ€æ±‚ã€‚å› ä¸ºæœ‰æ—¶å€™ï¼Œmaven_04_daoå‡ºäºæŸäº›å› ç´ çš„è€ƒè™‘ï¼Œå°±æ˜¯ä¸æƒ³è®©åˆ«äººä½¿ç”¨è‡ªå·±æ‰€ä¾èµ–çš„maven_03_pojoã€‚</p><h4 id="æ–¹æ¡ˆä¸€ï¼šå¯é€‰ä¾èµ–"><a href="#æ–¹æ¡ˆä¸€ï¼šå¯é€‰ä¾èµ–" class="headerlink" title="æ–¹æ¡ˆä¸€ï¼šå¯é€‰ä¾èµ–"></a>æ–¹æ¡ˆä¸€ï¼šå¯é€‰ä¾èµ–</h4><ul><li>å¯é€‰ä¾èµ–æŒ‡å¯¹å¤–éšè—å½“å‰æ‰€ä¾èµ–çš„èµ„æºâ€”ä¸é€æ˜</li></ul><p>åœ¨<code>maven_04_dao</code>çš„pom.xml,åœ¨å¼•å…¥<code>maven_03_pojo</code>çš„æ—¶å€™ï¼Œæ·»åŠ <code>optional</code></p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.itheima<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven_03_pojo<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--å¯é€‰ä¾èµ–æ˜¯éšè—å½“å‰å·¥ç¨‹æ‰€ä¾èµ–çš„èµ„æºï¼Œéšè—åå¯¹åº”èµ„æºå°†ä¸å…·æœ‰ä¾èµ–ä¼ é€’--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ­¤æ—¶BookServiceImplå°±å·²ç»æŠ¥é”™äº†,è¯´æ˜ç”±äºmaven_04_daoå°†maven_03_pojoè®¾ç½®æˆå¯é€‰ä¾èµ–ï¼Œå¯¼è‡´maven_02_ssmæ— æ³•å¼•ç”¨åˆ°maven_03_pojoä¸­çš„å†…å®¹ï¼Œå¯¼è‡´Bookç±»æ‰¾ä¸åˆ°ã€‚</p><p><img src="/2022/08/07/Maven%E9%AB%98%E7%BA%A7/1630854923484.png" alt="1630854923484"></p><h4 id="æ–¹æ¡ˆäºŒï¼šæ’é™¤ä¾èµ–"><a href="#æ–¹æ¡ˆäºŒï¼šæ’é™¤ä¾èµ–" class="headerlink" title="æ–¹æ¡ˆäºŒï¼šæ’é™¤ä¾èµ–"></a>æ–¹æ¡ˆäºŒï¼šæ’é™¤ä¾èµ–</h4><ul><li>æ’é™¤ä¾èµ–æŒ‡ä¸»åŠ¨æ–­å¼€ä¾èµ–çš„èµ„æºï¼Œè¢«æ’é™¤çš„èµ„æºæ— éœ€æŒ‡å®šç‰ˆæœ¬â€”ä¸éœ€è¦</li></ul><p>å‰é¢æˆ‘ä»¬å·²ç»é€šè¿‡å¯é€‰ä¾èµ–å®ç°äº†é˜»æ–­maven_03_pojoçš„ä¾èµ–ä¼ é€’ï¼Œå¯¹äºæ’é™¤ä¾èµ–ï¼Œåˆ™æŒ‡çš„æ˜¯å·²ç»æœ‰ä¾èµ–çš„äº‹å®ï¼Œä¹Ÿå°±æ˜¯è¯´maven_02_ssmé¡¹ç›®ä¸­å·²ç»é€šè¿‡ä¾èµ–ä¼ é€’ç”¨åˆ°äº†maven_03_pojoï¼Œæ­¤æ—¶æˆ‘ä»¬éœ€è¦åšçš„æ˜¯å°†å…¶è¿›è¡Œæ’é™¤ï¼Œæ‰€ä»¥æ¥ä¸‹æ¥éœ€è¦ä¿®æ”¹maven_02_ssmçš„pom.xml</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.itheima<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven_04_dao<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--æ’é™¤ä¾èµ–æ˜¯éšè—å½“å‰èµ„æºå¯¹åº”çš„ä¾èµ–å…³ç³»--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.itheima<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven_03_pojo<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>è¿™æ ·æ“ä½œåï¼ŒBookServiceImplä¸­çš„Bookç±»ä¸€æ ·ä¹Ÿä¼šæŠ¥é”™ã€‚</p><p>å½“ç„¶<code>exclusions</code>æ ‡ç­¾å¸¦<code>s</code>è¯´æ˜æˆ‘ä»¬æ˜¯å¯ä»¥ä¾æ¬¡æ’é™¤å¤šä¸ªä¾èµ–åˆ°çš„jaråŒ…ï¼Œæ¯”å¦‚maven_04_daoä¸­æœ‰ä¾èµ–junitå’Œmybatis,æˆ‘ä»¬ä¹Ÿå¯ä»¥ä¸€å¹¶å°†å…¶æ’é™¤ã€‚</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.itheima<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven_04_dao<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--æ’é™¤ä¾èµ–æ˜¯éšè—å½“å‰èµ„æºå¯¹åº”çš„ä¾èµ–å…³ç³»--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.itheima<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven_03_pojo<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ä»‹ç»æˆ‘è¿™ä¸¤ç§æ–¹å¼åï¼Œç®€å•æ¥æ¢³ç†ä¸‹ï¼Œå°±æ˜¯</p><ul><li><code>Aä¾èµ–B,Bä¾èµ–C</code>,<code>C</code>é€šè¿‡ä¾èµ–ä¼ é€’ä¼šè¢«<code>A</code>ä½¿ç”¨åˆ°ï¼Œç°åœ¨è¦æƒ³åŠæ³•è®©<code>A</code>ä¸å»ä¾èµ–<code>C</code></li><li>å¯é€‰ä¾èµ–æ˜¯åœ¨Bä¸Šè®¾ç½®<code>&lt;optional&gt;</code>,<code>A</code>ä¸çŸ¥é“æœ‰<code>C</code>çš„å­˜åœ¨ï¼Œ</li><li>æ’é™¤ä¾èµ–æ˜¯åœ¨Aä¸Šè®¾ç½®<code>&lt;exclusions&gt;</code>,<code>A</code>çŸ¥é“æœ‰<code>C</code>çš„å­˜åœ¨ï¼Œä¸»åŠ¨å°†å…¶æ’é™¤æ‰ã€‚</li></ul><h2 id="3ï¼Œèšåˆå’Œç»§æ‰¿"><a href="#3ï¼Œèšåˆå’Œç»§æ‰¿" class="headerlink" title="3ï¼Œèšåˆå’Œç»§æ‰¿"></a>3ï¼Œèšåˆå’Œç»§æ‰¿</h2><p>æˆ‘ä»¬çš„é¡¹ç›®å·²ç»ä»ä»¥å‰çš„å•æ¨¡å—ï¼Œå˜æˆäº†ç°åœ¨çš„å¤šæ¨¡å—å¼€å‘ã€‚é¡¹ç›®ä¸€æ—¦å˜æˆäº†å¤šæ¨¡å—å¼€å‘ä»¥åï¼Œå°±ä¼šå¼•å‘ä¸€äº›é—®é¢˜ï¼Œåœ¨è¿™ä¸€èŠ‚ä¸­æˆ‘ä»¬ä¸»è¦ä¼šå­¦ä¹ ä¸¤ä¸ªå†…å®¹<code>èšåˆ</code>å’Œ<code>ç»§æ‰¿</code>ï¼Œç”¨è¿™ä¸¤ä¸ªçŸ¥è¯†æ¥è§£å†³ä¸‹åˆ†æ¨¡å—åçš„ä¸€äº›é—®é¢˜ã€‚</p><h3 id="3-1-èšåˆ"><a href="#3-1-èšåˆ" class="headerlink" title="3.1 èšåˆ"></a>3.1 èšåˆ</h3><p><img src="/2022/08/07/Maven%E9%AB%98%E7%BA%A7/1630858596147.png" alt="1630858596147"></p><ul><li>åˆ†æ¨¡å—å¼€å‘åï¼Œéœ€è¦å°†è¿™å››ä¸ªé¡¹ç›®éƒ½å®‰è£…åˆ°æœ¬åœ°ä»“åº“ï¼Œç›®å‰æˆ‘ä»¬åªèƒ½é€šè¿‡é¡¹ç›®Mavené¢æ¿çš„<code>install</code>æ¥å®‰è£…ï¼Œå¹¶ä¸”éœ€è¦å®‰è£…å››ä¸ªï¼Œå¦‚æœæˆ‘ä»¬çš„é¡¹ç›®è¶³å¤Ÿå¤šï¼Œé‚£ä¹ˆä¸€ä¸ªä¸ªå®‰è£…èµ·æ¥è¿˜æ˜¯æ¯”è¾ƒéº»çƒ¦çš„</li><li>å¦‚æœå››ä¸ªé¡¹ç›®éƒ½å·²ç»å®‰è£…æˆåŠŸï¼Œå½“ssm_pojoå‘ç”Ÿå˜åŒ–åï¼Œæˆ‘ä»¬å°±å¾—å°†ssm_pojoé‡æ–°å®‰è£…åˆ°mavenä»“åº“ï¼Œä½†æ˜¯ä¸ºäº†ç¡®ä¿æˆ‘ä»¬å¯¹ssm_pojoçš„ä¿®æ”¹ä¸ä¼šå½±å“åˆ°å…¶ä»–é¡¹ç›®æ¨¡å—ï¼Œæˆ‘ä»¬éœ€è¦å¯¹æ‰€æœ‰çš„æ¨¡å—è¿›è¡Œé‡æ–°ç¼–è¯‘ï¼Œé‚£åˆéœ€è¦å°†æ‰€æœ‰çš„æ¨¡å—å†æ¥ä¸€é</li></ul><p>é¡¹ç›®å°‘çš„è¯è¿˜å¥½ï¼Œä½†æ˜¯å¦‚æœé¡¹ç›®å¤šçš„è¯ï¼Œä¸€ä¸ªä¸ªæ“ä½œé¡¹ç›®å°±å®¹æ˜“å‡ºç°æ¼æ‰æˆ–é‡å¤æ“ä½œçš„é—®é¢˜ï¼Œæ‰€ä»¥æˆ‘ä»¬å°±æƒ³èƒ½ä¸èƒ½æŠ½å–ä¸€ä¸ªé¡¹ç›®ï¼ŒæŠŠæ‰€æœ‰çš„é¡¹ç›®ç®¡ç†èµ·æ¥ï¼Œä»¥åæˆ‘ä»¬è¦æƒ³æ“ä½œè¿™äº›é¡¹ç›®ï¼Œåªéœ€è¦æ“ä½œè¿™ä¸€ä¸ªé¡¹ç›®ï¼Œå…¶ä»–æ‰€æœ‰çš„é¡¹ç›®éƒ½èµ°ä¸€æ ·çš„æµç¨‹ï¼Œè¿™ä¸ªä¸å°±å¾ˆçœäº‹çœåŠ›ã€‚</p><p>è¿™å°±ç”¨åˆ°äº†æˆ‘ä»¬æ¥ä¸‹æ¥è¦è®²è§£çš„<strong>èšåˆ</strong>ï¼Œ</p><ul><li>æ‰€è°“èšåˆ:å°†å¤šä¸ªæ¨¡å—ç»„ç»‡æˆä¸€ä¸ªæ•´ä½“ï¼ŒåŒæ—¶è¿›è¡Œé¡¹ç›®æ„å»ºçš„è¿‡ç¨‹ç§°ä¸ºèšåˆ</li><li>èšåˆå·¥ç¨‹ï¼šé€šå¸¸æ˜¯ä¸€ä¸ªä¸å…·æœ‰ä¸šåŠ¡åŠŸèƒ½çš„â€ç©ºâ€å·¥ç¨‹ï¼ˆæœ‰ä¸”ä»…æœ‰ä¸€ä¸ªpomæ–‡ä»¶ï¼‰</li><li>ä½œç”¨ï¼šä½¿ç”¨èšåˆå·¥ç¨‹å¯ä»¥å°†å¤šä¸ªå·¥ç¨‹ç¼–ç»„ï¼Œé€šè¿‡å¯¹èšåˆå·¥ç¨‹è¿›è¡Œæ„å»ºï¼Œå®ç°å¯¹æ‰€åŒ…å«çš„æ¨¡å—è¿›è¡ŒåŒæ­¥æ„å»º<ul><li>å½“å·¥ç¨‹ä¸­æŸä¸ªæ¨¡å—å‘ç”Ÿæ›´æ–°ï¼ˆå˜æ›´ï¼‰æ—¶ï¼Œå¿…é¡»ä¿éšœå·¥ç¨‹ä¸­ä¸å·²æ›´æ–°æ¨¡å—å…³è”çš„æ¨¡å—åŒæ­¥æ›´æ–°ï¼Œæ­¤æ—¶å¯ä»¥ä½¿ç”¨èšåˆå·¥ç¨‹æ¥è§£å†³æ‰¹é‡æ¨¡å—åŒæ­¥æ„å»ºçš„é—®é¢˜ã€‚</li></ul></li></ul><p>å…³äºèšåˆå…·ä½“çš„å®ç°æ­¥éª¤ä¸º:</p><h4 id="æ­¥éª¤1ï¼šåˆ›å»ºä¸€ä¸ªç©ºçš„mavené¡¹ç›®"><a href="#æ­¥éª¤1ï¼šåˆ›å»ºä¸€ä¸ªç©ºçš„mavené¡¹ç›®" class="headerlink" title="æ­¥éª¤1ï¼šåˆ›å»ºä¸€ä¸ªç©ºçš„mavené¡¹ç›®"></a>æ­¥éª¤1ï¼šåˆ›å»ºä¸€ä¸ªç©ºçš„mavené¡¹ç›®</h4><p><img src="/2022/08/07/Maven%E9%AB%98%E7%BA%A7/1630859532119.png" alt="1630859532119"></p><h4 id="æ­¥éª¤2ï¼šå°†é¡¹ç›®çš„æ‰“åŒ…æ–¹å¼æ”¹ä¸ºpom"><a href="#æ­¥éª¤2ï¼šå°†é¡¹ç›®çš„æ‰“åŒ…æ–¹å¼æ”¹ä¸ºpom" class="headerlink" title="æ­¥éª¤2ï¼šå°†é¡¹ç›®çš„æ‰“åŒ…æ–¹å¼æ”¹ä¸ºpom"></a>æ­¥éª¤2ï¼šå°†é¡¹ç›®çš„æ‰“åŒ…æ–¹å¼æ”¹ä¸ºpom</h4><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.itheima<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven_01_parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>è¯´æ˜ï¼š</strong>é¡¹ç›®çš„æ‰“åŒ…æ–¹å¼ï¼Œæˆ‘ä»¬æ¥è§¦åˆ°çš„æœ‰ä¸‰ç§ï¼Œåˆ†åˆ«æ˜¯</p><ul><li>jar:é»˜è®¤æƒ…å†µï¼Œè¯´æ˜è¯¥é¡¹ç›®ä¸ºjavaé¡¹ç›®</li><li>war:è¯´æ˜è¯¥é¡¹ç›®ä¸ºwebé¡¹ç›®</li><li>pom:è¯´æ˜è¯¥é¡¹ç›®ä¸ºèšåˆæˆ–ç»§æ‰¿(åé¢ä¼šè®²)é¡¹ç›®</li></ul><h4 id="æ­¥éª¤3ï¼špom-xmlæ·»åŠ æ‰€è¦ç®¡ç†çš„é¡¹ç›®"><a href="#æ­¥éª¤3ï¼špom-xmlæ·»åŠ æ‰€è¦ç®¡ç†çš„é¡¹ç›®" class="headerlink" title="æ­¥éª¤3ï¼špom.xmlæ·»åŠ æ‰€è¦ç®¡ç†çš„é¡¹ç›®"></a>æ­¥éª¤3ï¼špom.xmlæ·»åŠ æ‰€è¦ç®¡ç†çš„é¡¹ç›®</h4><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.itheima<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven_01_parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!--è®¾ç½®ç®¡ç†çš„æ¨¡å—åç§°--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modules</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">module</span>&gt;</span>../maven_02_ssm<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">module</span>&gt;</span>../maven_03_pojo<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">module</span>&gt;</span>../maven_04_dao<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">modules</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="æ­¥éª¤4ï¼šä½¿ç”¨èšåˆç»Ÿä¸€ç®¡ç†é¡¹ç›®"><a href="#æ­¥éª¤4ï¼šä½¿ç”¨èšåˆç»Ÿä¸€ç®¡ç†é¡¹ç›®" class="headerlink" title="æ­¥éª¤4ï¼šä½¿ç”¨èšåˆç»Ÿä¸€ç®¡ç†é¡¹ç›®"></a>æ­¥éª¤4ï¼šä½¿ç”¨èšåˆç»Ÿä¸€ç®¡ç†é¡¹ç›®</h4><p><img src="/2022/08/07/Maven%E9%AB%98%E7%BA%A7/1630859797123.png" alt="1630859797123"></p><p>æµ‹è¯•å‘ç°ï¼Œå½“<code>maven_01_parent</code>çš„<code>compile</code>è¢«ç‚¹å‡»åï¼Œæ‰€æœ‰è¢«å…¶ç®¡ç†çš„é¡¹ç›®éƒ½ä¼šè¢«æ‰§è¡Œç¼–è¯‘æ“ä½œã€‚è¿™å°±æ˜¯èšåˆå·¥ç¨‹çš„ä½œç”¨ã€‚</p><p><strong>è¯´æ˜ï¼š</strong>èšåˆå·¥ç¨‹ç®¡ç†çš„é¡¹ç›®åœ¨è¿›è¡Œè¿è¡Œçš„æ—¶å€™ï¼Œä¼šæŒ‰ç…§é¡¹ç›®ä¸é¡¹ç›®ä¹‹é—´çš„ä¾èµ–å…³ç³»æ¥è‡ªåŠ¨å†³å®šæ‰§è¡Œçš„é¡ºåºå’Œé…ç½®çš„é¡ºåºæ— å…³ã€‚</p><p>èšåˆçš„çŸ¥è¯†æˆ‘ä»¬å°±è®²è§£å®Œäº†ï¼Œæœ€åæ€»ç»“ä¸€å¥è¯å°±æ˜¯ï¼Œ<strong>èšåˆå·¥ç¨‹ä¸»è¦æ˜¯ç”¨æ¥ç®¡ç†é¡¹ç›®</strong>ã€‚</p><h3 id="3-2-ç»§æ‰¿"><a href="#3-2-ç»§æ‰¿" class="headerlink" title="3.2 ç»§æ‰¿"></a>3.2 ç»§æ‰¿</h3><p>æˆ‘ä»¬å·²ç»å®Œæˆäº†ä½¿ç”¨èšåˆå·¥ç¨‹å»ç®¡ç†é¡¹ç›®ï¼Œèšåˆå·¥ç¨‹è¿›è¡ŒæŸä¸€ä¸ªæ„å»ºæ“ä½œï¼Œå…¶ä»–è¢«å…¶ç®¡ç†çš„é¡¹ç›®ä¹Ÿä¼šæ‰§è¡Œç›¸åŒçš„æ„å»ºæ“ä½œã€‚é‚£ä¹ˆæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å†æ¥åˆ†æä¸‹ï¼Œå¤šæ¨¡å—å¼€å‘å­˜åœ¨çš„å¦å¤–ä¸€ä¸ªé—®é¢˜ï¼Œ<code>é‡å¤é…ç½®</code>çš„é—®é¢˜ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹å¼ å›¾:</p><p><img src="/2022/08/07/Maven%E9%AB%98%E7%BA%A7/1630860344968.png" alt="1630860344968"></p><ul><li><code>spring-webmvc</code>ã€<code>spring-jdbc</code>åœ¨ä¸‰ä¸ªé¡¹ç›®æ¨¡å—ä¸­éƒ½æœ‰å‡ºç°ï¼Œè¿™æ ·å°±å‡ºç°äº†é‡å¤çš„å†…å®¹</li><li><code>spring-test</code>åªåœ¨ssm_crmå’Œssm_goodsä¸­å‡ºç°ï¼Œè€Œåœ¨ssm_orderä¸­æ²¡æœ‰ï¼Œè¿™é‡Œæ˜¯éƒ¨åˆ†é‡å¤çš„å†…å®¹</li><li>æˆ‘ä»¬ä½¿ç”¨çš„springç‰ˆæœ¬ç›®å‰æ˜¯<code>5.2.10.RELEASE</code>,å‡å¦‚åæœŸè¦æƒ³å‡çº§springç‰ˆæœ¬ï¼Œæ‰€æœ‰è·ŸSpringç›¸å…³jaråŒ…éƒ½å¾—è¢«ä¿®æ”¹ï¼Œæ¶‰åŠåˆ°çš„é¡¹ç›®è¶Šå¤šï¼Œç»´æŠ¤æˆæœ¬è¶Šé«˜</li></ul><p>é¢å¯¹ä¸Šé¢çš„è¿™äº›é—®é¢˜ï¼Œæˆ‘ä»¬å°±å¾—ç”¨åˆ°æ¥ä¸‹æ¥è¦å­¦ä¹ çš„<strong>ç»§æ‰¿</strong></p><ul><li>æ‰€è°“ç»§æ‰¿:æè¿°çš„æ˜¯ä¸¤ä¸ªå·¥ç¨‹é—´çš„å…³ç³»ï¼Œä¸javaä¸­çš„ç»§æ‰¿ç›¸ä¼¼ï¼Œå­å·¥ç¨‹å¯ä»¥ç»§æ‰¿çˆ¶å·¥ç¨‹ä¸­çš„é…ç½®ä¿¡æ¯ï¼Œå¸¸è§äºä¾èµ–å…³ç³»çš„ç»§æ‰¿ã€‚</li><li>ä½œç”¨ï¼š<ul><li>ç®€åŒ–é…ç½®</li><li>å‡å°‘ç‰ˆæœ¬å†²çª</li></ul></li></ul><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åˆ°ç¨‹åºä¸­å»çœ‹çœ‹ç»§æ‰¿è¯¥å¦‚ä½•å®ç°?</p><h4 id="æ­¥éª¤1ï¼šåˆ›å»ºä¸€ä¸ªç©ºçš„Mavené¡¹ç›®å¹¶å°†å…¶æ‰“åŒ…æ–¹å¼è®¾ç½®ä¸ºpom"><a href="#æ­¥éª¤1ï¼šåˆ›å»ºä¸€ä¸ªç©ºçš„Mavené¡¹ç›®å¹¶å°†å…¶æ‰“åŒ…æ–¹å¼è®¾ç½®ä¸ºpom" class="headerlink" title="æ­¥éª¤1ï¼šåˆ›å»ºä¸€ä¸ªç©ºçš„Mavené¡¹ç›®å¹¶å°†å…¶æ‰“åŒ…æ–¹å¼è®¾ç½®ä¸ºpom"></a>æ­¥éª¤1ï¼šåˆ›å»ºä¸€ä¸ªç©ºçš„Mavené¡¹ç›®å¹¶å°†å…¶æ‰“åŒ…æ–¹å¼è®¾ç½®ä¸ºpom</h4><p>å› ä¸ºè¿™ä¸€æ­¥å’Œå‰é¢mavenåˆ›å»ºèšåˆå·¥ç¨‹çš„æ–¹å¼æ˜¯ä¸€æ‘¸ä¸€æ ·ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å•ç‹¬åˆ›å»ºä¸€ä¸ªæ–°çš„å·¥ç¨‹ï¼Œä¹Ÿå¯ä»¥ç›´æ¥å’Œèšåˆå…¬ç”¨ä¸€ä¸ªå·¥ç¨‹ã€‚å®é™…å¼€å‘ä¸­ï¼Œèšåˆå’Œç»§æ‰¿ä¸€èˆ¬ä¹Ÿéƒ½æ”¾åœ¨åŒä¸€ä¸ªé¡¹ç›®ä¸­ï¼Œä½†æ˜¯è¿™ä¸¤ä¸ªçš„åŠŸèƒ½æ˜¯ä¸ä¸€æ ·çš„ã€‚</p><h4 id="æ­¥éª¤2ï¼šåœ¨å­é¡¹ç›®ä¸­è®¾ç½®å…¶çˆ¶å·¥ç¨‹"><a href="#æ­¥éª¤2ï¼šåœ¨å­é¡¹ç›®ä¸­è®¾ç½®å…¶çˆ¶å·¥ç¨‹" class="headerlink" title="æ­¥éª¤2ï¼šåœ¨å­é¡¹ç›®ä¸­è®¾ç½®å…¶çˆ¶å·¥ç¨‹"></a>æ­¥éª¤2ï¼šåœ¨å­é¡¹ç›®ä¸­è®¾ç½®å…¶çˆ¶å·¥ç¨‹</h4><p>åˆ†åˆ«åœ¨<code>maven_02_ssm</code>,<code>maven_03_pojo</code>,<code>maven_04_dao</code>çš„pom.xmlä¸­æ·»åŠ å…¶çˆ¶é¡¹ç›®ä¸º<code>maven_01_parent</code></p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--é…ç½®å½“å‰å·¥ç¨‹ç»§æ‰¿è‡ªparentå·¥ç¨‹--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.itheima<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven_01_parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--è®¾ç½®çˆ¶é¡¹ç›®pom.xmlä½ç½®è·¯å¾„--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">relativePath</span>&gt;</span>../maven_01_parent/pom.xml<span class="tag">&lt;/<span class="name">relativePath</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="æ­¥éª¤3ï¼šä¼˜åŒ–å­é¡¹ç›®å…±æœ‰ä¾èµ–å¯¼å…¥é—®é¢˜"><a href="#æ­¥éª¤3ï¼šä¼˜åŒ–å­é¡¹ç›®å…±æœ‰ä¾èµ–å¯¼å…¥é—®é¢˜" class="headerlink" title="æ­¥éª¤3ï¼šä¼˜åŒ–å­é¡¹ç›®å…±æœ‰ä¾èµ–å¯¼å…¥é—®é¢˜"></a>æ­¥éª¤3ï¼šä¼˜åŒ–å­é¡¹ç›®å…±æœ‰ä¾èµ–å¯¼å…¥é—®é¢˜</h4><ol><li>å°†å­é¡¹ç›®å…±åŒä½¿ç”¨çš„jaråŒ…éƒ½æŠ½å–å‡ºæ¥ï¼Œç»´æŠ¤åœ¨çˆ¶é¡¹ç›®çš„pom.xmlä¸­</li></ol><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.itheima<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven_01_parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!--è®¾ç½®ç®¡ç†çš„æ¨¡å—åç§°--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modules</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">module</span>&gt;</span>../maven_02_ssm<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">module</span>&gt;</span>../maven_03_pojo<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">module</span>&gt;</span>../maven_04_dao<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">modules</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.10.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.10.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.10.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.10.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.47<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.16<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-databind<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.9.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><ol start="2"><li>åˆ é™¤å­é¡¹ç›®ä¸­å·²ç»è¢«æŠ½å–åˆ°çˆ¶é¡¹ç›®çš„pom.xmlä¸­çš„jaråŒ…ï¼Œå¦‚åœ¨<code>maven_02_ssm</code>çš„pom.xmlä¸­å°†å·²ç»å‡ºç°åœ¨çˆ¶é¡¹ç›®çš„jaråŒ…åˆ é™¤æ‰</li></ol><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.itheima<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven_02_ssm<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>war<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!--é…ç½®å½“å‰å·¥ç¨‹ç»§æ‰¿è‡ªparentå·¥ç¨‹--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.itheima<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven_01_parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">relativePath</span>&gt;</span>../maven_01_parent/pom.xml<span class="tag">&lt;/<span class="name">relativePath</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.11<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.itheima<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven_04_dao<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!--æ’é™¤ä¾èµ–æ˜¯éšè—å½“å‰èµ„æºå¯¹åº”çš„ä¾èµ–å…³ç³»--&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.tomcat.maven<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>tomcat7-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">port</span>&gt;</span>80<span class="tag">&lt;/<span class="name">port</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">path</span>&gt;</span>/<span class="tag">&lt;/<span class="name">path</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>åˆ é™¤å®Œåï¼Œä½ ä¼šå‘ç°çˆ¶é¡¹ç›®ä¸­æœ‰ä¾èµ–å¯¹åº”çš„jaråŒ…ï¼Œå­é¡¹ç›®è™½ç„¶å·²ç»å°†é‡å¤çš„ä¾èµ–åˆ é™¤æ‰äº†ï¼Œä½†æ˜¯åˆ·æ–°çš„æ—¶å€™ï¼Œå­é¡¹ç›®ä¸­æ‰€éœ€è¦çš„jaråŒ…ä¾ç„¶å­˜åœ¨ã€‚</p><p>å½“é¡¹ç›®çš„<code>&lt;parent&gt;</code>æ ‡ç­¾è¢«ç§»é™¤æ‰ï¼Œä¼šå‘ç°å¤šå‡ºæ¥çš„jaråŒ…ä¾èµ–ä¹Ÿä¼šéšä¹‹æ¶ˆå¤±ã€‚</p><ol start="3"><li>å°†<code>maven_04_dao</code>é¡¹ç›®çš„pom.xmlä¸­çš„æ‰€æœ‰ä¾èµ–åˆ é™¤ï¼Œç„¶åæ·»åŠ ä¸Š<code>maven_01_parent</code>çš„çˆ¶é¡¹ç›®åæ ‡</li></ol><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.itheima<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven_04_dao<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--é…ç½®å½“å‰å·¥ç¨‹ç»§æ‰¿è‡ªparentå·¥ç¨‹--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.itheima<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven_01_parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">relativePath</span>&gt;</span>../maven_01_parent/pom.xml<span class="tag">&lt;/<span class="name">relativePath</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><p>åˆ·æ–°å¹¶æŸ¥çœ‹Mavençš„é¢æ¿ï¼Œä¼šå‘ç°maven_04_daoåŒæ ·å¼•å…¥äº†çˆ¶é¡¹ç›®ä¸­çš„æ‰€æœ‰ä¾èµ–ã€‚</p><p><img src="/2022/08/07/Maven%E9%AB%98%E7%BA%A7/1630862406709.png" alt="1630862406709"></p><p>è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥è§£å†³åˆšæ‰æåˆ°çš„ç¬¬ä¸€ä¸ªé—®é¢˜ï¼Œå°†å­é¡¹ç›®ä¸­çš„å…¬å…±jaråŒ…æŠ½å–åˆ°çˆ¶å·¥ç¨‹ä¸­è¿›è¡Œç»Ÿä¸€æ·»åŠ ä¾èµ–ï¼Œè¿™æ ·åšçš„å¯ä»¥ç®€åŒ–é…ç½®ï¼Œå¹¶ä¸”å½“çˆ¶å·¥ç¨‹ä¸­æ‰€ä¾èµ–çš„jaråŒ…ç‰ˆæœ¬å‘ç”Ÿå˜åŒ–ï¼Œæ‰€æœ‰å­é¡¹ç›®ä¸­å¯¹åº”çš„jaråŒ…ç‰ˆæœ¬ä¹Ÿä¼šè·Ÿç€æ›´æ–°ã€‚</p><p><img src="/2022/08/07/Maven%E9%AB%98%E7%BA%A7/1630943390187.png" alt="1630943390187"></p><h4 id="æ­¥éª¤4ï¼šä¼˜åŒ–å­é¡¹ç›®ä¾èµ–ç‰ˆæœ¬é—®é¢˜"><a href="#æ­¥éª¤4ï¼šä¼˜åŒ–å­é¡¹ç›®ä¾èµ–ç‰ˆæœ¬é—®é¢˜" class="headerlink" title="æ­¥éª¤4ï¼šä¼˜åŒ–å­é¡¹ç›®ä¾èµ–ç‰ˆæœ¬é—®é¢˜"></a>æ­¥éª¤4ï¼šä¼˜åŒ–å­é¡¹ç›®ä¾èµ–ç‰ˆæœ¬é—®é¢˜</h4><p>å¦‚æœæŠŠæ‰€æœ‰ç”¨åˆ°çš„jaråŒ…éƒ½ç®¡ç†åœ¨çˆ¶é¡¹ç›®çš„pom.xmlï¼Œçœ‹ä¸Šå»æ›´ç®€å•äº›ï¼Œä½†æ˜¯è¿™æ ·å°±ä¼šå¯¼è‡´æœ‰å¾ˆå¤šé¡¹ç›®å¼•å…¥äº†è¿‡å¤šè‡ªå·±ä¸éœ€è¦çš„jaråŒ…ã€‚å¦‚ä¸Šé¢çœ‹åˆ°çš„è¿™å¼ å›¾:</p><p><img src="/2022/08/07/Maven%E9%AB%98%E7%BA%A7/1630860344968.png"></p><p>å¦‚æœæŠŠæ‰€æœ‰çš„ä¾èµ–éƒ½æ”¾åœ¨äº†çˆ¶å·¥ç¨‹ä¸­è¿›è¡Œç»Ÿä¸€ç»´æŠ¤ï¼Œå°±ä¼šå¯¼è‡´ssm_orderé¡¹ç›®ä¸­å¤šå¼•å…¥äº†<code>spring-test</code>çš„jaråŒ…ï¼Œå¦‚æœè¿™æ ·çš„jaråŒ…è¿‡å¤šçš„è¯ï¼Œå¯¹äºssm_orderæ¥è¯´ä¹Ÿæ˜¯ä¸€ç§â€è´Ÿæ‹…â€ã€‚</p><p>é‚£é’ˆå¯¹äºè¿™ç§éƒ¨åˆ†é¡¹ç›®æœ‰çš„jaråŒ…ï¼Œæˆ‘ä»¬è¯¥å¦‚ä½•ç®¡ç†ä¼˜åŒ–å‘¢?</p><ol><li>åœ¨çˆ¶å·¥ç¨‹mavne_01_parentçš„pom.xmlæ¥å®šä¹‰ä¾èµ–ç®¡ç†</li></ol><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--å®šä¹‰ä¾èµ–ç®¡ç†--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencyManagement</span>&gt;</span></span><br></pre></td></tr></table></figure><ol start="2"><li>å°†maven_02_ssmçš„pom.xmlä¸­çš„junitä¾èµ–åˆ é™¤æ‰ï¼Œåˆ·æ–°Maven</li></ol><p><img src="/2022/08/07/Maven%E9%AB%98%E7%BA%A7/1630944335419.png" alt="1630944335419"></p><p>åˆ·æ–°å®Œä¼šå‘ç°ï¼Œåœ¨maven_02_ssmé¡¹ç›®ä¸­çš„junitä¾èµ–å¹¶æ²¡æœ‰å‡ºç°ï¼Œæ‰€ä»¥æˆ‘ä»¬å¾—åˆ°ä¸€ä¸ªç»“è®ºï¼š<code>&lt;dependencyManagement&gt;</code>æ ‡ç­¾ä¸çœŸæ­£å¼•å…¥jaråŒ…ï¼Œè€Œæ˜¯é…ç½®å¯ä¾›å­é¡¹ç›®é€‰æ‹©çš„jaråŒ…ä¾èµ–</p><p>å­é¡¹ç›®è¦æƒ³ä½¿ç”¨å®ƒæ‰€æä¾›çš„è¿™äº›jaråŒ…ï¼Œéœ€è¦è‡ªå·±æ·»åŠ ä¾èµ–ï¼Œå¹¶ä¸”ä¸éœ€è¦æŒ‡å®š<code>&lt;version&gt;</code></p><ol start="3"><li>åœ¨maven_02_ssmçš„pom.xmlæ·»åŠ junitçš„ä¾èµ–</li></ol><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„ï¼šè¿™é‡Œå°±ä¸éœ€è¦æ·»åŠ ç‰ˆæœ¬äº†ï¼Œè¿™æ ·åšçš„å¥½å¤„å°±æ˜¯å½“çˆ¶å·¥ç¨‹dependencyManagementæ ‡ç­¾ä¸­çš„ç‰ˆæœ¬å‘ç”Ÿå˜åŒ–åï¼Œå­é¡¹ç›®ä¸­çš„ä¾èµ–ç‰ˆæœ¬ä¹Ÿä¼šè·Ÿç€å‘ç”Ÿå˜åŒ–</strong></p><ol start="4"><li>åœ¨maven_04_daoçš„pom.xmlæ·»åŠ junitçš„ä¾èµ–</li></ol><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>è¿™ä¸ªæ—¶å€™ï¼Œmaven_02_ssmå’Œmaven_04_daoè¿™ä¸¤ä¸ªé¡¹ç›®ä¸­çš„junitç‰ˆæœ¬å°±ä¼šè·Ÿéšç€çˆ¶é¡¹ç›®ä¸­çš„æ ‡ç­¾dependencyManagementä¸­junitçš„ç‰ˆæœ¬å‘ç”Ÿå˜åŒ–è€Œå˜åŒ–ã€‚ä¸éœ€è¦junitçš„é¡¹ç›®å°±ä¸éœ€è¦æ·»åŠ å¯¹åº”çš„ä¾èµ–å³å¯ã€‚</p><p>è‡³æ­¤ç»§æ‰¿å°±å·²ç»å­¦ä¹ å®Œäº†ï¼Œæ€»ç»“æ¥è¯´ï¼Œç»§æ‰¿å¯ä»¥å¸®åŠ©åšä¸¤ä»¶äº‹</p><ul><li>å°†æ‰€æœ‰é¡¹ç›®å…¬å…±çš„jaråŒ…ä¾èµ–æå–åˆ°çˆ¶å·¥ç¨‹çš„pom.xmlä¸­ï¼Œå­é¡¹ç›®å°±å¯ä»¥ä¸ç”¨é‡å¤ç¼–å†™ï¼Œç®€åŒ–å¼€å‘</li><li>å°†æ‰€æœ‰é¡¹ç›®çš„jaråŒ…é…ç½®åˆ°çˆ¶å·¥ç¨‹çš„dependencyManagementæ ‡ç­¾ä¸‹ï¼Œå®ç°ç‰ˆæœ¬ç®¡ç†ï¼Œæ–¹ä¾¿ç»´æŠ¤<ul><li>dependencyManagementæ ‡ç­¾ä¸çœŸæ­£å¼•å…¥jaråŒ…ï¼Œåªæ˜¯ç®¡ç†jaråŒ…çš„ç‰ˆæœ¬</li><li>å­é¡¹ç›®åœ¨å¼•å…¥çš„æ—¶å€™ï¼Œåªéœ€è¦æŒ‡å®šgroupIdå’ŒartifactIdï¼Œä¸éœ€è¦åŠ version</li><li>å½“dependencyManagementæ ‡ç­¾ä¸­jaråŒ…ç‰ˆæœ¬å‘ç”Ÿå˜åŒ–ï¼Œæ‰€æœ‰å­é¡¹ç›®ä¸­æœ‰ç”¨åˆ°è¯¥jaråŒ…çš„åœ°æ–¹å¯¹åº”çš„ç‰ˆæœ¬ä¼šè‡ªåŠ¨éšä¹‹æ›´æ–°</li></ul></li></ul><p>æœ€åæ€»ç»“ä¸€å¥è¯å°±æ˜¯ï¼Œ<strong>çˆ¶å·¥ç¨‹ä¸»è¦æ˜¯ç”¨æ¥å¿«é€Ÿé…ç½®ä¾èµ–jaråŒ…å’Œç®¡ç†é¡¹ç›®ä¸­æ‰€ä½¿ç”¨çš„èµ„æº</strong>ã€‚</p><p><strong>å°ç»“</strong></p><p>ç»§æ‰¿çš„å®ç°æ­¥éª¤:</p><ul><li><p>åˆ›å»ºMavenæ¨¡å—ï¼Œè®¾ç½®æ‰“åŒ…ç±»å‹ä¸ºpom</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">packaging</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>åœ¨çˆ¶å·¥ç¨‹çš„pomæ–‡ä»¶ä¸­é…ç½®ä¾èµ–å…³ç³»(å­å·¥ç¨‹å°†æ²¿ç”¨çˆ¶å·¥ç¨‹ä¸­çš„ä¾èµ–å…³ç³»),ä¸€èˆ¬åªæŠ½å–å­é¡¹ç›®ä¸­å…¬æœ‰çš„jaråŒ…</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.10.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    ...</span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>åœ¨çˆ¶å·¥ç¨‹ä¸­é…ç½®å­å·¥ç¨‹ä¸­å¯é€‰çš„ä¾èµ–å…³ç³»</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.16<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    ...</span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencyManagement</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>åœ¨å­å·¥ç¨‹ä¸­é…ç½®å½“å‰å·¥ç¨‹æ‰€ç»§æ‰¿çš„çˆ¶å·¥ç¨‹</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--å®šä¹‰è¯¥å·¥ç¨‹çš„çˆ¶å·¥ç¨‹--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.itheima<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven_01_parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--å¡«å†™çˆ¶å·¥ç¨‹çš„pomæ–‡ä»¶,å¯ä»¥ä¸å†™--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">relativePath</span>&gt;</span>../maven_01_parent/pom.xml<span class="tag">&lt;/<span class="name">relativePath</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>åœ¨å­å·¥ç¨‹ä¸­é…ç½®ä½¿ç”¨çˆ¶å·¥ç¨‹ä¸­å¯é€‰ä¾èµ–çš„åæ ‡</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ³¨æ„äº‹é¡¹:</p><p>1.å­å·¥ç¨‹ä¸­ä½¿ç”¨çˆ¶å·¥ç¨‹ä¸­çš„å¯é€‰ä¾èµ–æ—¶ï¼Œä»…éœ€è¦æä¾›ç¾¤ç»„idå’Œé¡¹ç›®idï¼Œæ— éœ€æä¾›ç‰ˆæœ¬ï¼Œç‰ˆæœ¬ç”±çˆ¶å·¥ç¨‹ç»Ÿä¸€æä¾›ï¼Œé¿å…ç‰ˆæœ¬å†²çª</p><p>2.å­å·¥ç¨‹ä¸­è¿˜å¯ä»¥å®šä¹‰çˆ¶å·¥ç¨‹ä¸­æ²¡æœ‰å®šä¹‰çš„ä¾èµ–å…³ç³»,åªä¸è¿‡ä¸èƒ½è¢«çˆ¶å·¥ç¨‹è¿›è¡Œç‰ˆæœ¬ç»Ÿä¸€ç®¡ç†ã€‚</p></li></ul><h3 id="3-3-èšåˆä¸ç»§æ‰¿çš„åŒºåˆ«"><a href="#3-3-èšåˆä¸ç»§æ‰¿çš„åŒºåˆ«" class="headerlink" title="3.3 èšåˆä¸ç»§æ‰¿çš„åŒºåˆ«"></a>3.3 èšåˆä¸ç»§æ‰¿çš„åŒºåˆ«</h3><h4 id="3-3-1-èšåˆä¸ç»§æ‰¿çš„åŒºåˆ«"><a href="#3-3-1-èšåˆä¸ç»§æ‰¿çš„åŒºåˆ«" class="headerlink" title="3.3.1 èšåˆä¸ç»§æ‰¿çš„åŒºåˆ«"></a>3.3.1 èšåˆä¸ç»§æ‰¿çš„åŒºåˆ«</h4><p>ä¸¤ç§ä¹‹é—´çš„ä½œç”¨:</p><ul><li>èšåˆç”¨äºå¿«é€Ÿæ„å»ºé¡¹ç›®ï¼Œå¯¹é¡¹ç›®è¿›è¡Œç®¡ç†</li><li>ç»§æ‰¿ç”¨äºå¿«é€Ÿé…ç½®å’Œç®¡ç†å­é¡¹ç›®ä¸­æ‰€ä½¿ç”¨jaråŒ…çš„ç‰ˆæœ¬</li></ul><p>èšåˆå’Œç»§æ‰¿çš„ç›¸åŒç‚¹:</p><ul><li>èšåˆä¸ç»§æ‰¿çš„pom.xmlæ–‡ä»¶æ‰“åŒ…æ–¹å¼å‡ä¸ºpomï¼Œå¯ä»¥å°†ä¸¤ç§å…³ç³»åˆ¶ä½œåˆ°åŒä¸€ä¸ªpomæ–‡ä»¶ä¸­</li><li>èšåˆä¸ç»§æ‰¿å‡å±äºè®¾è®¡å‹æ¨¡å—ï¼Œå¹¶æ— å®é™…çš„æ¨¡å—å†…å®¹</li></ul><p>èšåˆå’Œç»§æ‰¿çš„ä¸åŒç‚¹:</p><ul><li>èšåˆæ˜¯åœ¨å½“å‰æ¨¡å—ä¸­é…ç½®å…³ç³»ï¼Œèšåˆå¯ä»¥æ„ŸçŸ¥åˆ°å‚ä¸èšåˆçš„æ¨¡å—æœ‰å“ªäº›</li><li>ç»§æ‰¿æ˜¯åœ¨å­æ¨¡å—ä¸­é…ç½®å…³ç³»ï¼Œçˆ¶æ¨¡å—æ— æ³•æ„ŸçŸ¥å“ªäº›å­æ¨¡å—ç»§æ‰¿äº†è‡ªå·±</li></ul><p>ç›¸ä¿¡åˆ°è¿™é‡Œï¼Œå¤§å®¶å·²ç»èƒ½åŒºåˆ†å¼€ä»€ä¹ˆæ˜¯èšåˆå’Œç»§æ‰¿ï¼Œä½†æ˜¯æœ‰ä¸€ä¸ªç¨å¾®éº»çƒ¦çš„åœ°æ–¹å°±æ˜¯èšåˆå’Œç»§æ‰¿çš„å·¥ç¨‹æ„å»ºï¼Œéœ€è¦åœ¨èšåˆé¡¹ç›®ä¸­æ‰‹åŠ¨æ·»åŠ <code>modules</code>æ ‡ç­¾ï¼Œéœ€è¦åœ¨æ‰€æœ‰çš„å­é¡¹ç›®ä¸­æ·»åŠ <code>parent</code>æ ‡ç­¾ï¼Œä¸‡ä¸€å†™é”™äº†å’‹åŠ?</p><h4 id="3-3-2-IDEAæ„å»ºèšåˆä¸ç»§æ‰¿å·¥ç¨‹"><a href="#3-3-2-IDEAæ„å»ºèšåˆä¸ç»§æ‰¿å·¥ç¨‹" class="headerlink" title="3.3.2 IDEAæ„å»ºèšåˆä¸ç»§æ‰¿å·¥ç¨‹"></a>3.3.2 IDEAæ„å»ºèšåˆä¸ç»§æ‰¿å·¥ç¨‹</h4><p>å…¶å®å¯¹äºèšåˆå’Œç»§æ‰¿å·¥ç¨‹çš„åˆ›å»ºï¼ŒIDEAå·²ç»èƒ½å¸®åŠ©æˆ‘ä»¬å¿«é€Ÿæ„å»ºï¼Œå…·ä½“çš„å®ç°æ­¥éª¤ä¸º:</p><h5 id="æ­¥éª¤1-åˆ›å»ºä¸€ä¸ªMavené¡¹ç›®"><a href="#æ­¥éª¤1-åˆ›å»ºä¸€ä¸ªMavené¡¹ç›®" class="headerlink" title="æ­¥éª¤1:åˆ›å»ºä¸€ä¸ªMavené¡¹ç›®"></a>æ­¥éª¤1:åˆ›å»ºä¸€ä¸ªMavené¡¹ç›®</h5><p>åˆ›å»ºä¸€ä¸ªç©ºçš„Mavené¡¹ç›®ï¼Œå¯ä»¥å°†é¡¹ç›®ä¸­çš„<code>src</code>ç›®å½•åˆ é™¤æ‰ï¼Œè¿™ä¸ªé¡¹ç›®ä½œä¸ºèšåˆå·¥ç¨‹å’Œçˆ¶å·¥ç¨‹ã€‚</p><p><img src="/2022/08/07/Maven%E9%AB%98%E7%BA%A7/1630946592924.png" alt="1630946592924"></p><h5 id="æ­¥éª¤2-åˆ›å»ºå­é¡¹ç›®"><a href="#æ­¥éª¤2-åˆ›å»ºå­é¡¹ç›®" class="headerlink" title="æ­¥éª¤2:åˆ›å»ºå­é¡¹ç›®"></a>æ­¥éª¤2:åˆ›å»ºå­é¡¹ç›®</h5><p>è¯¥é¡¹ç›®å¯ä»¥è¢«èšåˆå·¥ç¨‹ç®¡ç†ï¼ŒåŒæ—¶ä¼šç»§æ‰¿çˆ¶å·¥ç¨‹ã€‚</p><p><img src="/2022/08/07/Maven%E9%AB%98%E7%BA%A7/1630947082716.png" alt="1630947082716"></p><p>åˆ›å»ºæˆåŠŸåï¼Œmaven_parentå³æ˜¯èšåˆå·¥ç¨‹åˆæ˜¯çˆ¶å·¥ç¨‹ï¼Œmaven_webä¸­ä¹Ÿæœ‰parentæ ‡ç­¾ï¼Œç»§æ‰¿çš„å°±æ˜¯maven_parent,å¯¹äºéš¾ä»¥é…ç½®çš„å†…å®¹éƒ½è‡ªåŠ¨ç”Ÿæˆã€‚</p><p>æŒ‰ç…§ä¸Šé¢è¿™ç§æ–¹å¼ï¼Œå¤§å®¶å°±å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€è¦æ¥æ„å»ºåˆ†æ¨¡å—é¡¹ç›®ã€‚</p><h2 id="4ï¼Œå±æ€§"><a href="#4ï¼Œå±æ€§" class="headerlink" title="4ï¼Œå±æ€§"></a>4ï¼Œå±æ€§</h2><p>åœ¨è¿™ä¸€ç« èŠ‚å†…å®¹ä¸­ï¼Œæˆ‘ä»¬å°†å­¦ä¹ ä¸¤ä¸ªå†…å®¹ï¼Œåˆ†åˆ«æ˜¯</p><ul><li>å±æ€§</li><li>ç‰ˆæœ¬ç®¡ç†</li></ul><p>å±æ€§ä¸­ä¼šç»§ç»­è§£å†³åˆ†æ¨¡å—å¼€å‘é¡¹ç›®å­˜åœ¨çš„é—®é¢˜ï¼Œç‰ˆæœ¬ç®¡ç†ä¸»è¦æ˜¯è®¤è¯†ä¸‹å½“å‰ä¸»æµçš„ç‰ˆæœ¬å®šä¹‰æ–¹å¼ã€‚</p><h3 id="4-1-å±æ€§"><a href="#4-1-å±æ€§" class="headerlink" title="4.1 å±æ€§"></a>4.1 å±æ€§</h3><h4 id="4-1-1-é—®é¢˜åˆ†æ"><a href="#4-1-1-é—®é¢˜åˆ†æ" class="headerlink" title="4.1.1 é—®é¢˜åˆ†æ"></a>4.1.1 é—®é¢˜åˆ†æ</h4><p>è®²è§£å†…å®¹ä¹‹å‰ï¼Œæˆ‘ä»¬è¿˜æ˜¯å…ˆæ¥åˆ†æé—®é¢˜:</p><p>å‰é¢æˆ‘ä»¬å·²ç»åœ¨çˆ¶å·¥ç¨‹ä¸­çš„dependencyManagementæ ‡ç­¾ä¸­å¯¹é¡¹ç›®ä¸­æ‰€ä½¿ç”¨çš„jaråŒ…ç‰ˆæœ¬è¿›è¡Œäº†ç»Ÿä¸€çš„ç®¡ç†ï¼Œä½†æ˜¯å¦‚æœåœ¨æ ‡ç­¾ä¸­æœ‰å¦‚ä¸‹çš„å†…å®¹:</p><p><img src="/2022/08/07/Maven%E9%AB%98%E7%BA%A7/1630947403475.png" alt="1630947403475"></p><p>ä½ ä¼šå‘ç°ï¼Œå¦‚æœæˆ‘ä»¬ç°åœ¨æƒ³æ›´æ–°Springçš„ç‰ˆæœ¬ï¼Œä½ ä¼šå‘ç°æˆ‘ä»¬ä¾ç„¶éœ€è¦æ›´æ–°å¤šä¸ªjaråŒ…çš„ç‰ˆæœ¬ï¼Œè¿™æ ·çš„è¯è¿˜æ˜¯æœ‰å¯èƒ½å‡ºç°æ¼æ”¹å¯¼è‡´ç¨‹åºå‡ºé—®é¢˜ï¼Œè€Œä¸”æ”¹èµ·æ¥ä¹Ÿæ˜¯æ¯”è¾ƒéº»çƒ¦ã€‚</p><p>é—®é¢˜æ¸…æ¥šåï¼Œæˆ‘ä»¬éœ€è¦è§£å†³çš„è¯ï¼Œå°±å¯ä»¥å‚è€ƒå’±ä»¬javaåŸºç¡€æ‰€å­¦ä¹ çš„å˜é‡ï¼Œå£°æ˜ä¸€ä¸ªå˜é‡ï¼Œåœ¨å…¶ä»–åœ°æ–¹ä½¿ç”¨è¯¥å˜é‡ï¼Œå½“å˜é‡çš„å€¼å‘ç”Ÿå˜åŒ–åï¼Œæ‰€æœ‰ä½¿ç”¨å˜é‡çš„åœ°æ–¹ï¼Œå°±ä¼šè·Ÿç€ä¿®æ”¹ï¼Œå³:</p><p><img src="/2022/08/07/Maven%E9%AB%98%E7%BA%A7/1630947749661.png" alt="1630947749661"></p><h4 id="4-1-2-è§£å†³æ­¥éª¤"><a href="#4-1-2-è§£å†³æ­¥éª¤" class="headerlink" title="4.1.2 è§£å†³æ­¥éª¤"></a>4.1.2 è§£å†³æ­¥éª¤</h4><h5 id="æ­¥éª¤1-çˆ¶å·¥ç¨‹ä¸­å®šä¹‰å±æ€§"><a href="#æ­¥éª¤1-çˆ¶å·¥ç¨‹ä¸­å®šä¹‰å±æ€§" class="headerlink" title="æ­¥éª¤1:çˆ¶å·¥ç¨‹ä¸­å®šä¹‰å±æ€§"></a>æ­¥éª¤1:çˆ¶å·¥ç¨‹ä¸­å®šä¹‰å±æ€§</h5><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">spring.version</span>&gt;</span>5.2.10.RELEASE<span class="tag">&lt;/<span class="name">spring.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">junit.version</span>&gt;</span>4.12<span class="tag">&lt;/<span class="name">junit.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mybatis-spring.version</span>&gt;</span>1.3.0<span class="tag">&lt;/<span class="name">mybatis-spring.version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="æ­¥éª¤2-ä¿®æ”¹ä¾èµ–çš„version"><a href="#æ­¥éª¤2-ä¿®æ”¹ä¾èµ–çš„version" class="headerlink" title="æ­¥éª¤2:ä¿®æ”¹ä¾èµ–çš„version"></a>æ­¥éª¤2:ä¿®æ”¹ä¾èµ–çš„version</h5><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ­¤æ—¶ï¼Œæˆ‘ä»¬åªéœ€è¦æ›´æ–°çˆ¶å·¥ç¨‹ä¸­propertiesæ ‡ç­¾ä¸­æ‰€ç»´æŠ¤çš„jaråŒ…ç‰ˆæœ¬ï¼Œæ‰€æœ‰å­é¡¹ç›®ä¸­çš„ç‰ˆæœ¬ä¹Ÿå°±è·Ÿç€æ›´æ–°ã€‚å½“ç„¶é™¤äº†å°†springç›¸å…³ç‰ˆæœ¬è¿›è¡Œç»´æŠ¤ï¼Œæˆ‘ä»¬å¯ä»¥å°†å…¶ä»–çš„jaråŒ…ç‰ˆæœ¬ä¹Ÿè¿›è¡ŒæŠ½å–ï¼Œè¿™æ ·å°±å¯ä»¥å¯¹é¡¹ç›®ä¸­æ‰€æœ‰jaråŒ…çš„ç‰ˆæœ¬è¿›è¡Œç»Ÿä¸€ç»´æŠ¤ï¼Œå¦‚:</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--å®šä¹‰å±æ€§--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">spring.version</span>&gt;</span>5.2.10.RELEASE<span class="tag">&lt;/<span class="name">spring.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">junit.version</span>&gt;</span>4.12<span class="tag">&lt;/<span class="name">junit.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mybatis-spring.version</span>&gt;</span>1.3.0<span class="tag">&lt;/<span class="name">mybatis-spring.version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="4-2-é…ç½®æ–‡ä»¶åŠ è½½å±æ€§"><a href="#4-2-é…ç½®æ–‡ä»¶åŠ è½½å±æ€§" class="headerlink" title="4.2 é…ç½®æ–‡ä»¶åŠ è½½å±æ€§"></a>4.2 é…ç½®æ–‡ä»¶åŠ è½½å±æ€§</h3><p>Mavenä¸­çš„å±æ€§æˆ‘ä»¬å·²ç»ä»‹ç»è¿‡äº†ï¼Œç°åœ¨ä¹Ÿå·²ç»èƒ½å¤Ÿé€šè¿‡Mavenæ¥é›†ä¸­ç®¡ç†Mavenä¸­ä¾èµ–jaråŒ…çš„ç‰ˆæœ¬ã€‚ä½†æ˜¯åˆæœ‰æ–°çš„éœ€æ±‚ï¼Œå°±æ˜¯æƒ³è®©Mavenå¯¹äºå±æ€§çš„ç®¡ç†èŒƒå›´èƒ½æ›´å¤§äº›ï¼Œæ¯”å¦‚æˆ‘ä»¬ä¹‹å‰é¡¹ç›®ä¸­çš„<code>jdbc.properties</code>ï¼Œè¿™ä¸ªé…ç½®æ–‡ä»¶ä¸­çš„å±æ€§ï¼Œèƒ½ä¸èƒ½ä¹Ÿæ¥è®©Mavenè¿›è¡Œç®¡ç†å‘¢?</p><p>ç­”æ¡ˆæ˜¯è‚¯å®šçš„ï¼Œå…·ä½“çš„å®ç°æ­¥éª¤ä¸º:</p><h5 id="æ­¥éª¤1ï¼šçˆ¶å·¥ç¨‹å®šä¹‰å±æ€§"><a href="#æ­¥éª¤1ï¼šçˆ¶å·¥ç¨‹å®šä¹‰å±æ€§" class="headerlink" title="æ­¥éª¤1ï¼šçˆ¶å·¥ç¨‹å®šä¹‰å±æ€§"></a>æ­¥éª¤1ï¼šçˆ¶å·¥ç¨‹å®šä¹‰å±æ€§</h5><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">jdbc.url</span>&gt;</span>jdbc:mysql://127.1.1.1:3306/ssm_db<span class="tag">&lt;/<span class="name">jdbc.url</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="æ­¥éª¤2ï¼šjdbc-propertiesæ–‡ä»¶ä¸­å¼•ç”¨å±æ€§"><a href="#æ­¥éª¤2ï¼šjdbc-propertiesæ–‡ä»¶ä¸­å¼•ç”¨å±æ€§" class="headerlink" title="æ­¥éª¤2ï¼šjdbc.propertiesæ–‡ä»¶ä¸­å¼•ç”¨å±æ€§"></a>æ­¥éª¤2ï¼šjdbc.propertiesæ–‡ä»¶ä¸­å¼•ç”¨å±æ€§</h5><p>åœ¨jdbc.propertiesï¼Œå°†jdbc.urlçš„å€¼ç›´æ¥è·å–Mavené…ç½®çš„å±æ€§</p><figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">jdbc.driver</span>=<span class="string">com.mysql.jdbc.Driver</span></span><br><span class="line"><span class="attr">jdbc.url</span>=<span class="string">$&#123;jdbc.url&#125;</span></span><br><span class="line"><span class="attr">jdbc.username</span>=<span class="string">root</span></span><br><span class="line"><span class="attr">jdbc.password</span>=<span class="string">root</span></span><br></pre></td></tr></table></figure><h5 id="æ­¥éª¤3ï¼šè®¾ç½®mavenè¿‡æ»¤æ–‡ä»¶èŒƒå›´"><a href="#æ­¥éª¤3ï¼šè®¾ç½®mavenè¿‡æ»¤æ–‡ä»¶èŒƒå›´" class="headerlink" title="æ­¥éª¤3ï¼šè®¾ç½®mavenè¿‡æ»¤æ–‡ä»¶èŒƒå›´"></a>æ­¥éª¤3ï¼šè®¾ç½®mavenè¿‡æ»¤æ–‡ä»¶èŒƒå›´</h5><p>Mavenåœ¨é»˜è®¤æƒ…å†µä¸‹æ˜¯ä»å½“å‰é¡¹ç›®çš„<code>src\main\resources</code>ä¸‹è¯»å–æ–‡ä»¶è¿›è¡Œæ‰“åŒ…ã€‚ç°åœ¨æˆ‘ä»¬éœ€è¦æ‰“åŒ…çš„èµ„æºæ–‡ä»¶æ˜¯åœ¨maven_02_ssmä¸‹,éœ€è¦æˆ‘ä»¬é€šè¿‡é…ç½®æ¥æŒ‡å®šä¸‹å…·ä½“çš„èµ„æºç›®å½•ã€‚</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--è®¾ç½®èµ„æºç›®å½•--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">directory</span>&gt;</span>../maven_02_ssm/src/main/resources<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--è®¾ç½®èƒ½å¤Ÿè§£æ$&#123;&#125;ï¼Œé»˜è®¤æ˜¯false --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">filtering</span>&gt;</span>true<span class="tag">&lt;/<span class="name">filtering</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>è¯´æ˜ï¼š</strong>directoryè·¯å¾„å‰è¦æ·»åŠ <code>../</code>çš„åŸå› æ˜¯maven_02_ssmç›¸å¯¹äºçˆ¶å·¥ç¨‹çš„pom.xmlè·¯å¾„æ˜¯åœ¨å…¶ä¸Šä¸€å±‚çš„ç›®å½•ä¸­ï¼Œæ‰€ä»¥éœ€è¦æ·»åŠ ã€‚</p><p>ä¿®æ”¹å®Œåï¼Œæ³¨æ„maven_02_ssmé¡¹ç›®çš„resourcesç›®å½•å°±å¤šäº†äº›ä¸œè¥¿ï¼Œå¦‚ä¸‹:</p><p><img src="/2022/08/07/Maven%E9%AB%98%E7%BA%A7/1630977419627.png" alt="1630977419627"></p><h5 id="æ­¥éª¤4ï¼šæµ‹è¯•æ˜¯å¦ç”Ÿæ•ˆ"><a href="#æ­¥éª¤4ï¼šæµ‹è¯•æ˜¯å¦ç”Ÿæ•ˆ" class="headerlink" title="æ­¥éª¤4ï¼šæµ‹è¯•æ˜¯å¦ç”Ÿæ•ˆ"></a>æ­¥éª¤4ï¼šæµ‹è¯•æ˜¯å¦ç”Ÿæ•ˆ</h5><p>æµ‹è¯•çš„æ—¶å€™ï¼Œåªéœ€è¦å°†maven_02_ssmé¡¹ç›®è¿›è¡Œæ‰“åŒ…ï¼Œç„¶åè§‚å¯Ÿæ‰“åŒ…ç»“æœä¸­æœ€ç»ˆç”Ÿæˆçš„å†…å®¹æ˜¯å¦ä¸ºMavenä¸­é…ç½®çš„å†…å®¹ã€‚</p><p><img src="/2022/08/07/Maven%E9%AB%98%E7%BA%A7/1630977885030.png" alt="1630977885030"></p><p>ä¸Šé¢çš„å±æ€§ç®¡ç†å°±å·²ç»å®Œæˆï¼Œä½†æ˜¯æœ‰ä¸€ä¸ªé—®é¢˜æ²¡æœ‰è§£å†³ï¼Œå› ä¸ºä¸åªæ˜¯maven_02_ssmé¡¹ç›®éœ€è¦æœ‰å±æ€§è¢«çˆ¶å·¥ç¨‹ç®¡ç†ï¼Œå¦‚æœæœ‰å¤šä¸ªé¡¹ç›®éœ€è¦é…ç½®ï¼Œè¯¥å¦‚ä½•å®ç°å‘¢?</p><p>æ–¹å¼ä¸€ï¼š</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--è®¾ç½®èµ„æºç›®å½•ï¼Œå¹¶è®¾ç½®èƒ½å¤Ÿè§£æ$&#123;&#125;--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">directory</span>&gt;</span>../maven_02_ssm/src/main/resources<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">filtering</span>&gt;</span>true<span class="tag">&lt;/<span class="name">filtering</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">directory</span>&gt;</span>../maven_03_pojo/src/main/resources<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">filtering</span>&gt;</span>true<span class="tag">&lt;/<span class="name">filtering</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line">        ...</span><br><span class="line">    <span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å¯ä»¥é…ï¼Œä½†æ˜¯å¦‚æœé¡¹ç›®å¤Ÿå¤šçš„è¯ï¼Œè¿™ä¸ªé…ç½®ä¹Ÿæ˜¯æ¯”è¾ƒç¹ç</p><p>æ–¹å¼äºŒï¼š</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">$&#123;project.basedir&#125;: å½“å‰é¡¹ç›®æ‰€åœ¨ç›®å½•,å­é¡¹ç›®ç»§æ‰¿äº†çˆ¶é¡¹ç›®ï¼Œ</span></span><br><span class="line"><span class="comment">ç›¸å½“äºæ‰€æœ‰çš„å­é¡¹ç›®éƒ½æ·»åŠ äº†èµ„æºç›®å½•çš„è¿‡æ»¤</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">directory</span>&gt;</span>$&#123;project.basedir&#125;/src/main/resources<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">filtering</span>&gt;</span>true<span class="tag">&lt;/<span class="name">filtering</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>è¯´æ˜ï¼š</strong>æ‰“åŒ…çš„è¿‡ç¨‹ä¸­å¦‚æœæŠ¥å¦‚ä¸‹é”™è¯¯:</p><p><img src="/2022/08/07/Maven%E9%AB%98%E7%BA%A7/1630948929828.png" alt="1630948929828"></p><p>åŸå› å°±æ˜¯Mavenå‘ç°ä½ çš„é¡¹ç›®ä¸ºwebé¡¹ç›®ï¼Œå°±ä¼šå»æ‰¾webé¡¹ç›®çš„å…¥å£web.xml[é…ç½®æ–‡ä»¶é…ç½®çš„æ–¹å¼]ï¼Œå‘ç°æ²¡æœ‰æ‰¾åˆ°ï¼Œå°±ä¼šæŠ¥é”™ã€‚</p><p>è§£å†³æ–¹æ¡ˆ1ï¼šåœ¨maven_02_ssmé¡¹ç›®çš„<code>src\main\webapp\WEB-INF\</code>æ·»åŠ ä¸€ä¸ªweb.xmlæ–‡ä»¶</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">version</span>=<span class="string">&quot;3.1&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure><p>è§£å†³æ–¹æ¡ˆ2ï¼šé…ç½®mavenæ‰“åŒ…waræ—¶ï¼Œå¿½ç•¥web.xmlæ£€æŸ¥ï¼ˆæ­£è§„æ–¹æ³•ï¼‰</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-war-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.2.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">failOnMissingWebXml</span>&gt;</span>false<span class="tag">&lt;/<span class="name">failOnMissingWebXml</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢æˆ‘ä»¬æ‰€ä½¿ç”¨çš„éƒ½æ˜¯Mavençš„è‡ªå®šä¹‰å±æ€§ï¼Œé™¤äº†${project.basedir},å®ƒå±äºMavençš„å†…ç½®ç³»ç»Ÿå±æ€§ã€‚</p><p>åœ¨Mavenä¸­çš„å±æ€§åˆ†ä¸º:</p><ul><li>è‡ªå®šä¹‰å±æ€§ï¼ˆå¸¸ç”¨ï¼‰</li><li>å†…ç½®å±æ€§</li><li>Settingå±æ€§</li><li>Javaç³»ç»Ÿå±æ€§</li><li>ç¯å¢ƒå˜é‡å±æ€§</li></ul><p><img src="/2022/08/07/Maven%E9%AB%98%E7%BA%A7/1630981519370.png" alt="1630981519370"></p><p>å…·ä½“å¦‚ä½•æŸ¥çœ‹è¿™äº›å±æ€§:</p><p>åœ¨cmdå‘½ä»¤è¡Œä¸­è¾“å…¥<code>mvn help:system</code></p><p><img src="/2022/08/07/Maven%E9%AB%98%E7%BA%A7/1630981585748.png" alt="1630981585748"></p><p>å…·ä½“ä½¿ç”¨ï¼Œå°±æ˜¯ä½¿ç”¨ <code>$&#123;key&#125;</code>æ¥è·å–ï¼Œkeyä¸ºç­‰å·å·¦è¾¹çš„ï¼Œå€¼ä¸ºç­‰å·å³è¾¹çš„ï¼Œæ¯”å¦‚è·å–çº¢çº¿çš„å€¼ï¼Œå¯¹åº”çš„å†™æ³•ä¸º <code>$&#123;java.runtime.name&#125;</code>ã€‚</p><h3 id="4-3-ç‰ˆæœ¬ç®¡ç†"><a href="#4-3-ç‰ˆæœ¬ç®¡ç†" class="headerlink" title="4.3 ç‰ˆæœ¬ç®¡ç†"></a>4.3 ç‰ˆæœ¬ç®¡ç†</h3><p>å…³äºè¿™ä¸ªç‰ˆæœ¬ç®¡ç†è§£å†³çš„é—®é¢˜æ˜¯ï¼Œåœ¨Mavenåˆ›å»ºé¡¹ç›®å’Œå¼•ç”¨åˆ«äººé¡¹ç›®çš„æ—¶å€™ï¼Œæˆ‘ä»¬éƒ½çœ‹åˆ°è¿‡å¦‚ä¸‹å†…å®¹:</p><p><img src="/2022/08/07/Maven%E9%AB%98%E7%BA%A7/1630982018031.png" alt="1630982018031"></p><p>è¿™é‡Œé¢æœ‰ä¸¤ä¸ªå•è¯ï¼ŒSNAPSHOTå’ŒRELEASEï¼Œå®ƒä»¬æ‰€ä»£è¡¨çš„å«ä¹‰æ˜¯ä»€ä¹ˆå‘¢?</p><p>æˆ‘ä»¬æ‰“å¼€Mavenä»“åº“åœ°å€<code>https://mvnrepository.com/</code></p><p><img src="/2022/08/07/Maven%E9%AB%98%E7%BA%A7/1630983148662.png" alt="1630983148662"></p><p>åœ¨æˆ‘ä»¬jaråŒ…çš„ç‰ˆæœ¬å®šä¹‰ä¸­ï¼Œæœ‰ä¸¤ä¸ªå·¥ç¨‹ç‰ˆæœ¬ç”¨çš„æ¯”è¾ƒå¤š:</p><ul><li>SNAPSHOTï¼ˆå¿«ç…§ç‰ˆæœ¬ï¼‰<ul><li>é¡¹ç›®å¼€å‘è¿‡ç¨‹ä¸­ä¸´æ—¶è¾“å‡ºçš„ç‰ˆæœ¬ï¼Œç§°ä¸ºå¿«ç…§ç‰ˆæœ¬</li><li>å¿«ç…§ç‰ˆæœ¬ä¼šéšç€å¼€å‘çš„è¿›å±•ä¸æ–­æ›´æ–°</li></ul></li><li>RELEASEï¼ˆå‘å¸ƒç‰ˆæœ¬ï¼‰<ul><li>é¡¹ç›®å¼€å‘åˆ°ä¸€å®šé˜¶æ®µé‡Œç¨‹ç¢‘åï¼Œå‘å›¢é˜Ÿå¤–éƒ¨å‘å¸ƒè¾ƒä¸ºç¨³å®šçš„ç‰ˆæœ¬ï¼Œè¿™ç§ç‰ˆæœ¬æ‰€å¯¹åº”çš„æ„ä»¶æ–‡ä»¶æ˜¯ç¨³å®šçš„</li><li>å³ä¾¿è¿›è¡ŒåŠŸèƒ½çš„åç»­å¼€å‘ï¼Œä¹Ÿä¸ä¼šæ”¹å˜å½“å‰å‘å¸ƒç‰ˆæœ¬å†…å®¹ï¼Œè¿™ç§ç‰ˆæœ¬ç§°ä¸ºå‘å¸ƒç‰ˆæœ¬</li></ul></li></ul><p>é™¤äº†ä¸Šé¢çš„å·¥ç¨‹ç‰ˆæœ¬ï¼Œæˆ‘ä»¬è¿˜ç»å¸¸èƒ½çœ‹åˆ°ä¸€äº›å‘å¸ƒç‰ˆæœ¬:</p><ul><li>alphaç‰ˆ:å†…æµ‹ç‰ˆï¼Œbugå¤šä¸ç¨³å®šå†…éƒ¨ç‰ˆæœ¬ä¸æ–­æ·»åŠ æ–°åŠŸèƒ½</li><li>betaç‰ˆ:å…¬æµ‹ç‰ˆï¼Œä¸ç¨³å®š(æ¯”alphaç¨³å®šäº›)ï¼Œbugç›¸å¯¹è¾ƒå¤šä¸æ–­æ·»åŠ æ–°åŠŸèƒ½</li><li>çº¯æ•°å­—ç‰ˆ</li></ul><p>å¯¹äºè¿™äº›ç‰ˆæœ¬ï¼Œå¤§å®¶åªéœ€è¦ç®€å•è®¤è¯†ä¸‹å³å¯ã€‚</p><h2 id="5ï¼Œå¤šç¯å¢ƒé…ç½®ä¸åº”ç”¨"><a href="#5ï¼Œå¤šç¯å¢ƒé…ç½®ä¸åº”ç”¨" class="headerlink" title="5ï¼Œå¤šç¯å¢ƒé…ç½®ä¸åº”ç”¨"></a>5ï¼Œå¤šç¯å¢ƒé…ç½®ä¸åº”ç”¨</h2><p><code>å¤šç¯å¢ƒå¼€å‘</code>å’Œ<code>è·³è¿‡æµ‹è¯•</code></p><h3 id="5-1-å¤šç¯å¢ƒå¼€å‘"><a href="#5-1-å¤šç¯å¢ƒå¼€å‘" class="headerlink" title="5.1 å¤šç¯å¢ƒå¼€å‘"></a>5.1 å¤šç¯å¢ƒå¼€å‘</h3><p><img src="/2022/08/07/Maven%E9%AB%98%E7%BA%A7/1630983617755.png" alt="1630983617755"></p><ul><li>æˆ‘ä»¬å¹³å¸¸éƒ½æ˜¯åœ¨è‡ªå·±çš„å¼€å‘ç¯å¢ƒè¿›è¡Œå¼€å‘ï¼Œ</li><li>å½“å¼€å‘å®Œæˆåï¼Œéœ€è¦æŠŠå¼€å‘çš„åŠŸèƒ½éƒ¨ç½²åˆ°æµ‹è¯•ç¯å¢ƒä¾›æµ‹è¯•äººå‘˜è¿›è¡Œæµ‹è¯•ä½¿ç”¨ï¼Œ</li><li>ç­‰æµ‹è¯•äººå‘˜æµ‹è¯•é€šè¿‡åï¼Œæˆ‘ä»¬ä¼šå°†é¡¹ç›®éƒ¨ç½²åˆ°ç”Ÿæˆç¯å¢ƒä¸Šçº¿ä½¿ç”¨ã€‚</li><li>è¿™ä¸ªæ—¶å€™å°±æœ‰ä¸€ä¸ªé—®é¢˜æ˜¯ï¼Œä¸åŒç¯å¢ƒçš„é…ç½®æ˜¯ä¸ç›¸åŒçš„ï¼Œå¦‚ä¸å¯èƒ½è®©ä¸‰ä¸ªç¯å¢ƒéƒ½ç”¨ä¸€ä¸ªæ•°æ®åº“ï¼Œæ‰€ä»¥å°±ä¼šæœ‰ä¸‰ä¸ªæ•°æ®åº“çš„urlé…ç½®ï¼Œ</li><li>æˆ‘ä»¬åœ¨é¡¹ç›®ä¸­å¦‚ä½•é…ç½®?</li><li>è¦æƒ³å®ç°ä¸åŒç¯å¢ƒä¹‹é—´çš„é…ç½®åˆ‡æ¢åˆè¯¥å¦‚ä½•æ¥å®ç°å‘¢?</li></ul><p>mavenæä¾›é…ç½®å¤šç§ç¯å¢ƒçš„è®¾å®šï¼Œå¸®åŠ©å¼€å‘è€…åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­å¿«é€Ÿåˆ‡æ¢ç¯å¢ƒã€‚å…·ä½“å®ç°æ­¥éª¤:</p><h4 id="æ­¥éª¤1ï¼šçˆ¶å·¥ç¨‹é…ç½®å¤šä¸ªç¯å¢ƒ-å¹¶æŒ‡å®šé»˜è®¤æ¿€æ´»ç¯å¢ƒ"><a href="#æ­¥éª¤1ï¼šçˆ¶å·¥ç¨‹é…ç½®å¤šä¸ªç¯å¢ƒ-å¹¶æŒ‡å®šé»˜è®¤æ¿€æ´»ç¯å¢ƒ" class="headerlink" title="æ­¥éª¤1ï¼šçˆ¶å·¥ç¨‹é…ç½®å¤šä¸ªç¯å¢ƒ,å¹¶æŒ‡å®šé»˜è®¤æ¿€æ´»ç¯å¢ƒ"></a>æ­¥éª¤1ï¼šçˆ¶å·¥ç¨‹é…ç½®å¤šä¸ªç¯å¢ƒ,å¹¶æŒ‡å®šé»˜è®¤æ¿€æ´»ç¯å¢ƒ</h4><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">profiles</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--å¼€å‘ç¯å¢ƒ--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">profile</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span>&gt;</span>env_dep<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">jdbc.url</span>&gt;</span>jdbc:mysql://127.1.1.1:3306/ssm_db<span class="tag">&lt;/<span class="name">jdbc.url</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--è®¾å®šæ˜¯å¦ä¸ºé»˜è®¤å¯åŠ¨ç¯å¢ƒ--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">activation</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">activeByDefault</span>&gt;</span>true<span class="tag">&lt;/<span class="name">activeByDefault</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">activation</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">profile</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--ç”Ÿäº§ç¯å¢ƒ--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">profile</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span>&gt;</span>env_pro<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">jdbc.url</span>&gt;</span>jdbc:mysql://127.2.2.2:3306/ssm_db<span class="tag">&lt;/<span class="name">jdbc.url</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">profile</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--æµ‹è¯•ç¯å¢ƒ--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">profile</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span>&gt;</span>env_test<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">jdbc.url</span>&gt;</span>jdbc:mysql://127.3.3.3:3306/ssm_db<span class="tag">&lt;/<span class="name">jdbc.url</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">profile</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">profiles</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="æ­¥éª¤2ï¼šæ‰§è¡Œå®‰è£…æŸ¥çœ‹env-depç¯å¢ƒæ˜¯å¦ç”Ÿæ•ˆ"><a href="#æ­¥éª¤2ï¼šæ‰§è¡Œå®‰è£…æŸ¥çœ‹env-depç¯å¢ƒæ˜¯å¦ç”Ÿæ•ˆ" class="headerlink" title="æ­¥éª¤2ï¼šæ‰§è¡Œå®‰è£…æŸ¥çœ‹env_depç¯å¢ƒæ˜¯å¦ç”Ÿæ•ˆ"></a>æ­¥éª¤2ï¼šæ‰§è¡Œå®‰è£…æŸ¥çœ‹env_depç¯å¢ƒæ˜¯å¦ç”Ÿæ•ˆ</h4><p><img src="/2022/08/07/Maven%E9%AB%98%E7%BA%A7/1630983967960.png" alt="1630983967960"></p><p>æŸ¥çœ‹åˆ°çš„ç»“æœä¸ºï¼š</p><p><img src="/2022/08/07/Maven%E9%AB%98%E7%BA%A7/1630977885030.png"></p><h4 id="æ­¥éª¤3ï¼šåˆ‡æ¢é»˜è®¤ç¯å¢ƒä¸ºç”Ÿäº§ç¯å¢ƒ"><a href="#æ­¥éª¤3ï¼šåˆ‡æ¢é»˜è®¤ç¯å¢ƒä¸ºç”Ÿäº§ç¯å¢ƒ" class="headerlink" title="æ­¥éª¤3ï¼šåˆ‡æ¢é»˜è®¤ç¯å¢ƒä¸ºç”Ÿäº§ç¯å¢ƒ"></a>æ­¥éª¤3ï¼šåˆ‡æ¢é»˜è®¤ç¯å¢ƒä¸ºç”Ÿäº§ç¯å¢ƒ</h4><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">profiles</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--å¼€å‘ç¯å¢ƒ--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">profile</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span>&gt;</span>env_dep<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">jdbc.url</span>&gt;</span>jdbc:mysql://127.1.1.1:3306/ssm_db<span class="tag">&lt;/<span class="name">jdbc.url</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">profile</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--ç”Ÿäº§ç¯å¢ƒ--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">profile</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span>&gt;</span>env_pro<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">jdbc.url</span>&gt;</span>jdbc:mysql://127.2.2.2:3306/ssm_db<span class="tag">&lt;/<span class="name">jdbc.url</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--è®¾å®šæ˜¯å¦ä¸ºé»˜è®¤å¯åŠ¨ç¯å¢ƒ--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">activation</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">activeByDefault</span>&gt;</span>true<span class="tag">&lt;/<span class="name">activeByDefault</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">activation</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">profile</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--æµ‹è¯•ç¯å¢ƒ--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">profile</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span>&gt;</span>env_test<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">jdbc.url</span>&gt;</span>jdbc:mysql://127.3.3.3:3306/ssm_db<span class="tag">&lt;/<span class="name">jdbc.url</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">profile</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">profiles</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="æ­¥éª¤4ï¼šæ‰§è¡Œå®‰è£…å¹¶æŸ¥çœ‹env-proç¯å¢ƒæ˜¯å¦ç”Ÿæ•ˆ"><a href="#æ­¥éª¤4ï¼šæ‰§è¡Œå®‰è£…å¹¶æŸ¥çœ‹env-proç¯å¢ƒæ˜¯å¦ç”Ÿæ•ˆ" class="headerlink" title="æ­¥éª¤4ï¼šæ‰§è¡Œå®‰è£…å¹¶æŸ¥çœ‹env_proç¯å¢ƒæ˜¯å¦ç”Ÿæ•ˆ"></a>æ­¥éª¤4ï¼šæ‰§è¡Œå®‰è£…å¹¶æŸ¥çœ‹env_proç¯å¢ƒæ˜¯å¦ç”Ÿæ•ˆ</h4><p>æŸ¥çœ‹åˆ°çš„ç»“æœä¸º<code>jdbc:mysql://127.2.2.2:3306/ssm_db</code></p><p><img src="/2022/08/07/Maven%E9%AB%98%E7%BA%A7/1630977885031.png"></p><p>è™½ç„¶å·²ç»èƒ½å¤Ÿå®ç°ä¸åŒç¯å¢ƒçš„åˆ‡æ¢ï¼Œä½†æ˜¯æ¯æ¬¡åˆ‡æ¢éƒ½æ˜¯éœ€è¦æ‰‹åŠ¨ä¿®æ”¹ï¼Œå¦‚ä½•æ¥å®ç°åœ¨ä¸æ”¹å˜ä»£ç çš„å‰æä¸‹å®Œæˆç¯å¢ƒçš„åˆ‡æ¢å‘¢?</p><h4 id="æ­¥éª¤5ï¼šå‘½ä»¤è¡Œå®ç°ç¯å¢ƒåˆ‡æ¢"><a href="#æ­¥éª¤5ï¼šå‘½ä»¤è¡Œå®ç°ç¯å¢ƒåˆ‡æ¢" class="headerlink" title="æ­¥éª¤5ï¼šå‘½ä»¤è¡Œå®ç°ç¯å¢ƒåˆ‡æ¢"></a>æ­¥éª¤5ï¼šå‘½ä»¤è¡Œå®ç°ç¯å¢ƒåˆ‡æ¢</h4><p><img src="/2022/08/07/Maven%E9%AB%98%E7%BA%A7/1630984476202.png" alt="1630984476202"></p><h4 id="æ­¥éª¤6ï¼šæ‰§è¡Œå®‰è£…å¹¶æŸ¥çœ‹env-testç¯å¢ƒæ˜¯å¦ç”Ÿæ•ˆ"><a href="#æ­¥éª¤6ï¼šæ‰§è¡Œå®‰è£…å¹¶æŸ¥çœ‹env-testç¯å¢ƒæ˜¯å¦ç”Ÿæ•ˆ" class="headerlink" title="æ­¥éª¤6ï¼šæ‰§è¡Œå®‰è£…å¹¶æŸ¥çœ‹env_testç¯å¢ƒæ˜¯å¦ç”Ÿæ•ˆ"></a>æ­¥éª¤6ï¼šæ‰§è¡Œå®‰è£…å¹¶æŸ¥çœ‹env_testç¯å¢ƒæ˜¯å¦ç”Ÿæ•ˆ</h4><p>æŸ¥çœ‹åˆ°çš„ç»“æœä¸º<code>jdbc:mysql://127.3.3.3:3306/ssm_db</code></p><p><img src="/2022/08/07/Maven%E9%AB%98%E7%BA%A7/1630977885032.png"></p><p>æ‰€ä»¥æ€»ç»“æ¥è¯´ï¼Œå¯¹äºå¤šç¯å¢ƒåˆ‡æ¢åªéœ€è¦ä¸¤æ­¥å³å¯:</p><ul><li><p>çˆ¶å·¥ç¨‹ä¸­å®šä¹‰å¤šç¯å¢ƒ</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">profiles</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">profile</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span>&gt;</span>ç¯å¢ƒåç§°<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">key</span>&gt;</span>value<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">activation</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">activeByDefault</span>&gt;</span>true<span class="tag">&lt;/<span class="name">activeByDefault</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">activation</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">profile</span>&gt;</span></span><br><span class="line">    ...</span><br><span class="line"><span class="tag">&lt;/<span class="name">profiles</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>ä½¿ç”¨å¤šç¯å¢ƒ(æ„å»ºè¿‡ç¨‹)</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mvn æŒ‡ä»¤ -P ç¯å¢ƒå®šä¹‰ID[ç¯å¢ƒå®šä¹‰ä¸­è·å–]</span><br><span class="line">ä¾‹ï¼šmvn install -P pro_env</span><br></pre></td></tr></table></figure></li></ul><h3 id="5-2-è·³è¿‡æµ‹è¯•"><a href="#5-2-è·³è¿‡æµ‹è¯•" class="headerlink" title="5.2 è·³è¿‡æµ‹è¯•"></a>5.2 è·³è¿‡æµ‹è¯•</h3><p>å‰é¢åœ¨æ‰§è¡Œ<code>install</code>æŒ‡ä»¤çš„æ—¶å€™ï¼ŒMavenéƒ½ä¼šæŒ‰ç…§é¡ºåºä»ä¸Šå¾€ä¸‹ä¾æ¬¡æ‰§è¡Œï¼Œæ¯æ¬¡éƒ½ä¼šæ‰§è¡Œ<code>test</code>,</p><p>å¯¹äº<code>test</code>æ¥è¯´æœ‰å®ƒå­˜åœ¨çš„æ„ä¹‰ï¼Œ</p><ul><li>å¯ä»¥ç¡®ä¿æ¯æ¬¡æ‰“åŒ…æˆ–è€…å®‰è£…çš„æ—¶å€™ï¼Œç¨‹åºçš„æ­£ç¡®æ€§ï¼Œå‡å¦‚æµ‹è¯•å·²ç»é€šè¿‡åœ¨æˆ‘ä»¬æ²¡æœ‰ä¿®æ”¹ç¨‹åºçš„å‰æä¸‹å†æ¬¡æ‰§è¡Œæ‰“åŒ…æˆ–å®‰è£…å‘½ä»¤ï¼Œç”±äºé¡ºåºæ‰§è¡Œï¼Œæµ‹è¯•ä¼šè¢«å†æ¬¡æ‰§è¡Œï¼Œå°±æœ‰ç‚¹è€—è´¹æ—¶é—´äº†ã€‚</li><li>åŠŸèƒ½å¼€å‘è¿‡ç¨‹ä¸­æœ‰éƒ¨åˆ†æ¨¡å—è¿˜æ²¡æœ‰å¼€å‘å®Œæ¯•ï¼Œæµ‹è¯•æ— æ³•é€šè¿‡ï¼Œä½†æ˜¯æƒ³è¦æŠŠå…¶ä¸­æŸä¸€éƒ¨åˆ†è¿›è¡Œå¿«é€Ÿæ‰“åŒ…ï¼Œæ­¤æ—¶ç”±äºæµ‹è¯•ç¯å¢ƒå¤±è´¥å°±ä¼šå¯¼è‡´æ‰“åŒ…å¤±è´¥ã€‚</li></ul><p>é‡åˆ°ä¸Šé¢è¿™äº›æƒ…å†µçš„æ—¶å€™ï¼Œæˆ‘ä»¬å°±æƒ³è·³è¿‡æµ‹è¯•æ‰§è¡Œä¸‹é¢çš„æ„å»ºå‘½ä»¤ï¼Œå…·ä½“å®ç°æ–¹å¼æœ‰å¾ˆå¤šï¼š</p><h4 id="æ–¹å¼ä¸€ï¼šIDEAå·¥å…·å®ç°è·³è¿‡æµ‹è¯•"><a href="#æ–¹å¼ä¸€ï¼šIDEAå·¥å…·å®ç°è·³è¿‡æµ‹è¯•" class="headerlink" title="æ–¹å¼ä¸€ï¼šIDEAå·¥å…·å®ç°è·³è¿‡æµ‹è¯•"></a>æ–¹å¼ä¸€ï¼šIDEAå·¥å…·å®ç°è·³è¿‡æµ‹è¯•</h4><p><img src="/2022/08/07/Maven%E9%AB%98%E7%BA%A7/1630985300814.png" alt="1630985300814"></p><p>å›¾ä¸­çš„æŒ‰é’®ä¸º<code>Toggle &#39;Skip Tests&#39; Mode</code>,</p><p>Toggleç¿»è¯‘ä¸ºåˆ‡æ¢çš„æ„æ€ï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨æµ‹è¯•ä¸ä¸æµ‹è¯•ä¹‹é—´è¿›è¡Œåˆ‡æ¢ã€‚</p><p>ç‚¹å‡»ä¸€ä¸‹ï¼Œå‡ºç°æµ‹è¯•ç”»æ¨ªçº¿çš„å›¾ç‰‡ï¼Œå¦‚ä¸‹:</p><p><img src="/2022/08/07/Maven%E9%AB%98%E7%BA%A7/1630985411766.png" alt="1630985411766"></p><p>è¯´æ˜æµ‹è¯•å·²ç»è¢«å…³é—­ï¼Œå†æ¬¡ç‚¹å‡»å°±ä¼šæ¢å¤ã€‚</p><p>è¿™ç§æ–¹å¼æœ€ç®€å•ï¼Œä½†æ˜¯æœ‰ç‚¹â€æš´åŠ›â€ï¼Œä¼šæŠŠæ‰€æœ‰çš„æµ‹è¯•éƒ½è·³è¿‡ï¼Œå¦‚æœæˆ‘ä»¬æƒ³æ›´ç²¾ç»†çš„æ§åˆ¶å“ªäº›è·³è¿‡å“ªäº›ä¸è·³è¿‡ï¼Œå°±éœ€è¦ä½¿ç”¨é…ç½®æ’ä»¶çš„æ–¹å¼ã€‚</p><h4 id="æ–¹å¼äºŒï¼šé…ç½®æ’ä»¶å®ç°è·³è¿‡æµ‹è¯•"><a href="#æ–¹å¼äºŒï¼šé…ç½®æ’ä»¶å®ç°è·³è¿‡æµ‹è¯•" class="headerlink" title="æ–¹å¼äºŒï¼šé…ç½®æ’ä»¶å®ç°è·³è¿‡æµ‹è¯•"></a>æ–¹å¼äºŒï¼šé…ç½®æ’ä»¶å®ç°è·³è¿‡æµ‹è¯•</h4><p>åœ¨çˆ¶å·¥ç¨‹ä¸­çš„pom.xmlä¸­æ·»åŠ æµ‹è¯•æ’ä»¶é…ç½®</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-surefire-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.12.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">skipTests</span>&gt;</span>false<span class="tag">&lt;/<span class="name">skipTests</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--æ’é™¤æ‰ä¸å‚ä¸æµ‹è¯•çš„å†…å®¹--&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">excludes</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">exclude</span>&gt;</span>**/BookServiceTest.java<span class="tag">&lt;/<span class="name">exclude</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">excludes</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure><p>skipTestsï¼šå¦‚æœä¸ºtrueï¼Œåˆ™è·³è¿‡æ‰€æœ‰æµ‹è¯•ï¼Œå¦‚æœä¸ºfalseï¼Œåˆ™ä¸è·³è¿‡æµ‹è¯•</p><p>excludesï¼šå“ªäº›æµ‹è¯•ç±»ä¸å‚ä¸æµ‹è¯•ï¼Œå³æ’é™¤ï¼Œé’ˆå¯¹skipTestsä¸ºfalseæ¥è®¾ç½®çš„</p><p>includesï¼šå“ªäº›æµ‹è¯•ç±»è¦å‚ä¸æµ‹è¯•ï¼Œå³åŒ…å«ï¼Œé’ˆå¯¹skipTestsä¸ºtrueæ¥è®¾ç½®çš„</p><h4 id="æ–¹å¼ä¸‰ï¼šå‘½ä»¤è¡Œè·³è¿‡æµ‹è¯•"><a href="#æ–¹å¼ä¸‰ï¼šå‘½ä»¤è¡Œè·³è¿‡æµ‹è¯•" class="headerlink" title="æ–¹å¼ä¸‰ï¼šå‘½ä»¤è¡Œè·³è¿‡æµ‹è¯•"></a>æ–¹å¼ä¸‰ï¼šå‘½ä»¤è¡Œè·³è¿‡æµ‹è¯•</h4><p><img src="/2022/08/07/Maven%E9%AB%98%E7%BA%A7/1630986926124.png" alt="1630986926124"></p><p>ä½¿ç”¨Mavençš„å‘½ä»¤è¡Œï¼Œ<code>mvn æŒ‡ä»¤ -D skipTests</code>ï¼Œä¾‹ï¼šmvn install -D skipTestsï¼›</p><p>æ³¨æ„äº‹é¡¹ï¼š</p><ul><li>æ‰§è¡Œçš„é¡¹ç›®æ„å»ºæŒ‡ä»¤å¿…é¡»åŒ…å«æµ‹è¯•ç”Ÿå‘½å‘¨æœŸï¼Œå¦åˆ™æ— æ•ˆæœã€‚ä¾‹å¦‚æ‰§è¡Œcompileç”Ÿå‘½å‘¨æœŸï¼Œä¸ç»è¿‡testç”Ÿå‘½å‘¨æœŸã€‚</li><li>è¯¥å‘½ä»¤å¯ä»¥ä¸å€ŸåŠ©IDEAï¼Œç›´æ¥ä½¿ç”¨cmdå‘½ä»¤è¡Œè¿›è¡Œè·³è¿‡æµ‹è¯•ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯cmdè¦åœ¨pom.xmlæ‰€åœ¨ç›®å½•ä¸‹è¿›è¡Œæ‰§è¡Œã€‚</li></ul><h2 id="6ï¼Œç§æœ"><a href="#6ï¼Œç§æœ" class="headerlink" title="6ï¼Œç§æœ"></a>6ï¼Œç§æœ</h2><h3 id="6-1-ç§æœç®€ä»‹"><a href="#6-1-ç§æœç®€ä»‹" class="headerlink" title="6.1 ç§æœç®€ä»‹"></a>6.1 ç§æœç®€ä»‹</h3><p>å›¢é˜Ÿå¼€å‘ç°çŠ¶åˆ†æ</p><p><img src="/2022/08/07/Maven%E9%AB%98%E7%BA%A7/1630987192620.png" alt="1630987192620"></p><p>(1)å¼ ä¸‰è´Ÿè´£ssm_crmçš„å¼€å‘ï¼Œè‡ªå·±å†™äº†ä¸€ä¸ªssm_pojoæ¨¡å—ï¼Œè¦æƒ³ä½¿ç”¨ç›´æ¥å°†ssm_pojoå®‰è£…åˆ°æœ¬åœ°ä»“åº“å³å¯</p><p>(2)æå››è´Ÿè´£ssm_orderçš„å¼€å‘ï¼Œéœ€è¦ç”¨åˆ°å¼ ä¸‰æ‰€å†™çš„ssm_pojoæ¨¡å—ï¼Œè¿™ä¸ªæ—¶å€™å¦‚ä½•å°†å¼ ä¸‰å†™çš„ssm_pojoæ¨¡å—äº¤ç»™æå››å‘¢?</p><p>(3)å¦‚æœç›´æ¥æ‹·è´ï¼Œé‚£ä¹ˆå›¢é˜Ÿä¹‹é—´çš„jaråŒ…ç®¡ç†ä¼šéå¸¸æ··ä¹±è€Œä¸”å®¹å™¨å‡ºé”™ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±æƒ³èƒ½ä¸èƒ½å°†å†™å¥½çš„é¡¹ç›®ä¸Šä¼ åˆ°ä¸­å¤®ä»“åº“ï¼Œè°æƒ³ç”¨å°±ç›´æ¥è”ç½‘ä¸‹è½½å³å¯</p><p>(4)Mavençš„ä¸­å¤®ä»“åº“ä¸å…è®¸ç§äººä¸Šä¼ è‡ªå·±çš„jaråŒ…,é‚£ä¹ˆæˆ‘ä»¬å°±å¾—æ¢ç§æ€è·¯ï¼Œè‡ªå·±æ­å»ºä¸€ä¸ªç±»ä¼¼äºä¸­å¤®ä»“åº“çš„ä¸œè¥¿ï¼ŒæŠŠè‡ªå·±çš„å†…å®¹ä¸Šä¼ ä¸Šå»ï¼Œå…¶ä»–äººå°±å¯ä»¥ä»ä¸Šé¢ä¸‹è½½jaråŒ…ä½¿ç”¨</p><p>(5)è¿™ä¸ªç±»ä¼¼äºä¸­å¤®ä»“åº“çš„ä¸œè¥¿å°±æ˜¯æˆ‘ä»¬æ¥ä¸‹æ¥è¦å­¦ä¹ çš„&#x3D;&#x3D;ç§æœ&#x3D;&#x3D;</p><p>æ‰€ä»¥åˆ°è¿™å°±æœ‰ä¸¤ä¸ªæ¦‚å¿µï¼Œä¸€ä¸ªæ˜¯ç§æœï¼Œä¸€ä¸ªæ˜¯ä¸­å¤®ä»“åº“</p><p>ç§æœ:å…¬å¸å†…éƒ¨æ­å»ºçš„ç”¨äºå­˜å‚¨Mavenèµ„æºçš„æœåŠ¡å™¨</p><p>è¿œç¨‹ä»“åº“:Mavenå¼€å‘å›¢é˜Ÿç»´æŠ¤çš„ç”¨äºå­˜å‚¨Mavenèµ„æºçš„æœåŠ¡å™¨</p><p>æ‰€ä»¥è¯´:</p><ul><li>ç§æœæ˜¯ä¸€å°ç‹¬ç«‹çš„æœåŠ¡å™¨ï¼Œç”¨äºè§£å†³å›¢é˜Ÿå†…éƒ¨çš„èµ„æºå…±äº«ä¸èµ„æºåŒæ­¥é—®é¢˜</li></ul><p>æ­å»ºMavenç§æœçš„æ–¹å¼æœ‰å¾ˆå¤šï¼Œæˆ‘ä»¬æ¥ä»‹ç»å…¶ä¸­ä¸€ç§ä½¿ç”¨é‡æ¯”è¾ƒå¤§çš„å®ç°æ–¹å¼:</p><ul><li>Nexus<ul><li>Sonatypeå…¬å¸çš„ä¸€æ¬¾mavenç§æœäº§å“</li><li>ä¸‹è½½åœ°å€ï¼š<a href="https://help.sonatype.com/repomanager3/download">https://help.sonatype.com/repomanager3/download</a></li></ul></li></ul><h3 id="6-2-ç§æœå®‰è£…"><a href="#6-2-ç§æœå®‰è£…" class="headerlink" title="6.2 ç§æœå®‰è£…"></a>6.2 ç§æœå®‰è£…</h3><h4 id="æ­¥éª¤1ï¼šä¸‹è½½è§£å‹"><a href="#æ­¥éª¤1ï¼šä¸‹è½½è§£å‹" class="headerlink" title="æ­¥éª¤1ï¼šä¸‹è½½è§£å‹"></a>æ­¥éª¤1ï¼šä¸‹è½½è§£å‹</h4><p>å°†<code>èµ„æ–™\latest-win64.zip</code>è§£å‹åˆ°ä¸€ä¸ªç©ºç›®å½•ä¸‹ã€‚</p><p><img src="/2022/08/07/Maven%E9%AB%98%E7%BA%A7/1630988572349.png" alt="1630988572349"></p><h4 id="æ­¥éª¤2ï¼šå¯åŠ¨Nexus"><a href="#æ­¥éª¤2ï¼šå¯åŠ¨Nexus" class="headerlink" title="æ­¥éª¤2ï¼šå¯åŠ¨Nexus"></a>æ­¥éª¤2ï¼šå¯åŠ¨Nexus</h4><p><img src="/2022/08/07/Maven%E9%AB%98%E7%BA%A7/1630988673245.png" alt="1630988673245"></p><p>ä½¿ç”¨cmdè¿›å…¥åˆ°è§£å‹ç›®å½•ä¸‹çš„<code>nexus-3.30.1-01\bin</code>,æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤:</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">nexus.exe /run nexus</span><br></pre></td></tr></table></figure><p>çœ‹åˆ°å¦‚ä¸‹å†…å®¹ï¼Œè¯´æ˜å¯åŠ¨æˆåŠŸã€‚</p><p><img src="/2022/08/07/Maven%E9%AB%98%E7%BA%A7/1630988939301.png" alt="1630988939301"></p><h4 id="æ­¥éª¤3ï¼šæµè§ˆå™¨è®¿é—®"><a href="#æ­¥éª¤3ï¼šæµè§ˆå™¨è®¿é—®" class="headerlink" title="æ­¥éª¤3ï¼šæµè§ˆå™¨è®¿é—®"></a>æ­¥éª¤3ï¼šæµè§ˆå™¨è®¿é—®</h4><p>è®¿é—®åœ°å€ä¸º:</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">http://localhost:8081</span><br></pre></td></tr></table></figure><p><img src="/2022/08/07/Maven%E9%AB%98%E7%BA%A7/1630988857125.png" alt="1630988857125"></p><h4 id="æ­¥éª¤4ï¼šé¦–æ¬¡ç™»å½•é‡ç½®å¯†ç "><a href="#æ­¥éª¤4ï¼šé¦–æ¬¡ç™»å½•é‡ç½®å¯†ç " class="headerlink" title="æ­¥éª¤4ï¼šé¦–æ¬¡ç™»å½•é‡ç½®å¯†ç "></a>æ­¥éª¤4ï¼šé¦–æ¬¡ç™»å½•é‡ç½®å¯†ç </h4><p><img src="/2022/08/07/Maven%E9%AB%98%E7%BA%A7/1630988983159.png" alt="1630988983159"></p><p>è¾“å…¥ç”¨æˆ·åå’Œå¯†ç è¿›è¡Œç™»å½•ï¼Œç™»å½•æˆåŠŸåï¼Œå‡ºç°å¦‚ä¸‹é¡µé¢</p><p><img src="/2022/08/07/Maven%E9%AB%98%E7%BA%A7/1630989052183.png" alt="1630989052183"></p><p>ç‚¹å‡»ä¸‹ä¸€æ­¥ï¼Œéœ€è¦é‡æ–°è¾“å…¥æ–°å¯†ç ï¼Œä¸ºäº†å’Œåé¢çš„ä¿æŒä¸€è‡´ï¼Œå¯†ç ä¿®æ”¹ä¸º<code>admin</code></p><p><img src="/2022/08/07/Maven%E9%AB%98%E7%BA%A7/1630989094756.png" alt="1630989094756"></p><p>è®¾ç½®æ˜¯å¦è¿è¡ŒåŒ¿åè®¿é—®</p><p><img src="/2022/08/07/Maven%E9%AB%98%E7%BA%A7/1630989122737.png" alt="1630989122737"></p><p>ç‚¹å‡»å®Œæˆ</p><p><img src="/2022/08/07/Maven%E9%AB%98%E7%BA%A7/1630989136097.png" alt="1630989136097"></p><p>è‡³æ­¤ç§æœå°±å·²ç»å®‰è£…æˆåŠŸã€‚å¦‚æœè¦æƒ³ä¿®æ”¹ä¸€äº›åŸºç¡€é…ç½®ä¿¡æ¯ï¼Œå¯ä»¥ä½¿ç”¨:</p><ul><li>ä¿®æ”¹åŸºç¡€é…ç½®ä¿¡æ¯<ul><li>å®‰è£…è·¯å¾„ä¸‹etcç›®å½•ä¸­nexus-default.propertiesæ–‡ä»¶ä¿å­˜æœ‰nexusåŸºç¡€é…ç½®ä¿¡æ¯ï¼Œä¾‹å¦‚é»˜è®¤è®¿é—®ç«¯å£ã€‚</li></ul></li><li>ä¿®æ”¹æœåŠ¡å™¨è¿è¡Œé…ç½®ä¿¡æ¯<ul><li>å®‰è£…è·¯å¾„ä¸‹binç›®å½•ä¸­nexus.vmoptionsæ–‡ä»¶ä¿å­˜æœ‰nexusæœåŠ¡å™¨å¯åŠ¨å¯¹åº”çš„é…ç½®ä¿¡æ¯ï¼Œä¾‹å¦‚é»˜è®¤å ç”¨å†…å­˜ç©ºé—´ã€‚</li></ul></li></ul><h3 id="6-3-ç§æœä»“åº“åˆ†ç±»"><a href="#6-3-ç§æœä»“åº“åˆ†ç±»" class="headerlink" title="6.3 ç§æœä»“åº“åˆ†ç±»"></a>6.3 ç§æœä»“åº“åˆ†ç±»</h3><p>ç§æœèµ„æºæ“ä½œæµç¨‹åˆ†æ:</p><p><img src="/2022/08/07/Maven%E9%AB%98%E7%BA%A7/1630989320979.png" alt="1630989320979"></p><p>(1)åœ¨æ²¡æœ‰ç§æœçš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬è‡ªå·±åˆ›å»ºçš„æœåŠ¡éƒ½æ˜¯å®‰è£…åœ¨Mavençš„æœ¬åœ°ä»“åº“ä¸­</p><p>(2)ç§æœä¸­ä¹Ÿæœ‰ä»“åº“ï¼Œæˆ‘ä»¬è¦æŠŠè‡ªå·±çš„èµ„æºä¸Šä¼ åˆ°ç§æœï¼Œæœ€ç»ˆä¹Ÿæ˜¯æ”¾åœ¨ç§æœçš„ä»“åº“ä¸­</p><p>(3)å…¶ä»–äººè¦æƒ³ä½¿ç”¨ä½ æ‰€ä¸Šä¼ çš„èµ„æºï¼Œå°±éœ€è¦ä»ç§æœçš„ä»“åº“ä¸­è·å–</p><p>(4)å½“æˆ‘ä»¬è¦ä½¿ç”¨çš„èµ„æºä¸æ˜¯è‡ªå·±å†™çš„ï¼Œæ˜¯è¿œç¨‹ä¸­å¤®ä»“åº“æœ‰çš„ç¬¬ä¸‰æ–¹jaråŒ…ï¼Œè¿™ä¸ªæ—¶å€™å°±éœ€è¦ä»è¿œç¨‹ä¸­å¤®ä»“åº“ä¸‹è½½ï¼Œæ¯ä¸ªå¼€å‘è€…éƒ½å»è¿œç¨‹ä¸­å¤®ä»“åº“ä¸‹é€Ÿåº¦æ¯”è¾ƒæ…¢(ä¸­å¤®ä»“åº“æœåŠ¡å™¨åœ¨å›½å¤–)</p><p>(5)ç§æœå°±å†å‡†å¤‡ä¸€ä¸ªä»“åº“ï¼Œç”¨æ¥ä¸“é—¨å­˜å‚¨ä»è¿œç¨‹ä¸­å¤®ä»“åº“ä¸‹è½½çš„ç¬¬ä¸‰æ–¹jaråŒ…ï¼Œç¬¬ä¸€æ¬¡è®¿é—®æ²¡æœ‰å°±ä¼šå»è¿œç¨‹ä¸­å¤®ä»“åº“ä¸‹è½½ï¼Œä¸‹æ¬¡å†è®¿é—®å°±ç›´æ¥èµ°ç§æœä¸‹è½½</p><p>(6)å‰é¢åœ¨ä»‹ç»ç‰ˆæœ¬ç®¡ç†çš„æ—¶å€™æåˆ°è¿‡æœ‰<code>SNAPSHOT</code>å’Œ<code>RELEASE</code>ï¼Œå¦‚æœæŠŠè¿™ä¸¤ç±»çš„éƒ½æ”¾åˆ°åŒä¸€ä¸ªä»“åº“ï¼Œæ¯”è¾ƒæ··ä¹±ï¼Œæ‰€ä»¥ç§æœå°±æŠŠè¿™ä¸¤ä¸ªç§jaråŒ…æ”¾å…¥ä¸åŒçš„ä»“åº“</p><p>(7)ä¸Šé¢æˆ‘ä»¬å·²ç»ä»‹ç»äº†æœ‰ä¸‰ç§ä»“åº“ï¼Œä¸€ç§æ˜¯å­˜æ”¾<code>SNAPSHOT</code>çš„ï¼Œä¸€ç§æ˜¯å­˜æ”¾<code>RELEASE</code>è¿˜æœ‰ä¸€ç§æ˜¯å­˜æ”¾ä»è¿œç¨‹ä»“åº“ä¸‹è½½çš„ç¬¬ä¸‰æ–¹jaråŒ…ï¼Œé‚£ä¹ˆæˆ‘ä»¬åœ¨è·å–èµ„æºçš„æ—¶å€™è¦ä»å“ªä¸ªä»“åº“ç§è·å–å‘¢?</p><p>(8)ä¸ºäº†æ–¹ä¾¿è·å–ï¼Œæˆ‘ä»¬å°†æ‰€æœ‰çš„ä»“åº“ç¼–æˆä¸€ä¸ªç»„ï¼Œæˆ‘ä»¬åªéœ€è¦è®¿é—®ä»“åº“ç»„å»è·å–èµ„æºã€‚</p><p>æ‰€æœ‰ç§æœä»“åº“æ€»å…±åˆ†ä¸ºä¸‰å¤§ç±»:</p><p>å®¿ä¸»ä»“åº“hosted </p><ul><li>ä¿å­˜æ— æ³•ä»ä¸­å¤®ä»“åº“è·å–çš„èµ„æº<ul><li>è‡ªä¸»ç ”å‘</li><li>ç¬¬ä¸‰æ–¹éå¼€æºé¡¹ç›®,æ¯”å¦‚Oracle,å› ä¸ºæ˜¯ä»˜è´¹äº§å“ï¼Œæ‰€ä»¥ä¸­å¤®ä»“åº“æ²¡æœ‰</li></ul></li></ul><p>ä»£ç†ä»“åº“proxy </p><ul><li>ä»£ç†è¿œç¨‹ä»“åº“ï¼Œé€šè¿‡nexusè®¿é—®å…¶ä»–å…¬å…±ä»“åº“ï¼Œä¾‹å¦‚ä¸­å¤®ä»“åº“</li></ul><p>ä»“åº“ç»„group </p><ul><li>å°†è‹¥å¹²ä¸ªä»“åº“ç»„æˆä¸€ä¸ªç¾¤ç»„ï¼Œç®€åŒ–é…ç½®</li><li>ä»“åº“ç»„ä¸èƒ½ä¿å­˜èµ„æºï¼Œå±äºè®¾è®¡å‹ä»“åº“</li></ul><p><img src="/2022/08/07/Maven%E9%AB%98%E7%BA%A7/1630990244010.png" alt="1630990244010"></p><h3 id="6-4-æœ¬åœ°ä»“åº“è®¿é—®ç§æœé…ç½®"><a href="#6-4-æœ¬åœ°ä»“åº“è®¿é—®ç§æœé…ç½®" class="headerlink" title="6.4 æœ¬åœ°ä»“åº“è®¿é—®ç§æœé…ç½®"></a>6.4 æœ¬åœ°ä»“åº“è®¿é—®ç§æœé…ç½®</h3><ul><li>æˆ‘ä»¬é€šè¿‡IDEAå°†å¼€å‘çš„æ¨¡å—ä¸Šä¼ åˆ°ç§æœï¼Œä¸­é—´æ˜¯è¦ç»è¿‡æœ¬åœ°Mavençš„</li><li>æœ¬åœ°Mavenéœ€è¦çŸ¥é“ç§æœçš„è®¿é—®åœ°å€ä»¥åŠç§æœè®¿é—®çš„ç”¨æˆ·åå’Œå¯†ç </li><li>ç§æœä¸­çš„ä»“åº“å¾ˆå¤šï¼ŒMavenæœ€ç»ˆè¦æŠŠèµ„æºä¸Šä¼ åˆ°å“ªä¸ªä»“åº“?</li><li>Mavenä¸‹è½½çš„æ—¶å€™ï¼Œåˆéœ€è¦æºå¸¦ç”¨æˆ·åå’Œå¯†ç åˆ°ç§æœä¸Šæ‰¾å¯¹åº”çš„ä»“åº“ç»„è¿›è¡Œä¸‹è½½ï¼Œç„¶åå†ç»™IDEA</li></ul><p><img src="/2022/08/07/Maven%E9%AB%98%E7%BA%A7/1630990538229.png" alt="1630990538229"></p><p>ä¸Šé¢æ‰€è¯´çš„è¿™äº›å†…å®¹ï¼Œæˆ‘ä»¬éœ€è¦åœ¨æœ¬åœ°Mavençš„é…ç½®æ–‡ä»¶<code>settings.xml</code>ä¸­è¿›è¡Œé…ç½®ã€‚</p><h4 id="æ­¥éª¤1ï¼šç§æœä¸Šé…ç½®ä»“åº“"><a href="#æ­¥éª¤1ï¼šç§æœä¸Šé…ç½®ä»“åº“" class="headerlink" title="æ­¥éª¤1ï¼šç§æœä¸Šé…ç½®ä»“åº“"></a>æ­¥éª¤1ï¼šç§æœä¸Šé…ç½®ä»“åº“</h4><p><img src="/2022/08/07/Maven%E9%AB%98%E7%BA%A7/1630991211000.png" alt="1630991211000"></p><p><strong>è¯´æ˜:</strong></p><p>ç¬¬5ï¼Œ6æ­¥éª¤æ˜¯åˆ›å»ºitheima-snapshotä»“åº“</p><p>ç¬¬7ï¼Œ8æ­¥éª¤æ˜¯åˆ›å»ºitheima-releaseä»“åº“</p><h4 id="æ­¥éª¤2ï¼šé…ç½®æœ¬åœ°Mavenå¯¹ç§æœçš„è®¿é—®æƒé™"><a href="#æ­¥éª¤2ï¼šé…ç½®æœ¬åœ°Mavenå¯¹ç§æœçš„è®¿é—®æƒé™" class="headerlink" title="æ­¥éª¤2ï¼šé…ç½®æœ¬åœ°Mavenå¯¹ç§æœçš„è®¿é—®æƒé™"></a>æ­¥éª¤2ï¼šé…ç½®æœ¬åœ°Mavenå¯¹ç§æœçš„è®¿é—®æƒé™</h4><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servers</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">server</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span>&gt;</span>itheima-snapshot<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">username</span>&gt;</span>admin<span class="tag">&lt;/<span class="name">username</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">password</span>&gt;</span>admin<span class="tag">&lt;/<span class="name">password</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">server</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">server</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span>&gt;</span>itheima-release<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">username</span>&gt;</span>admin<span class="tag">&lt;/<span class="name">username</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">password</span>&gt;</span>admin<span class="tag">&lt;/<span class="name">password</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">server</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servers</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="æ­¥éª¤3ï¼šé…ç½®ç§æœçš„è®¿é—®è·¯å¾„"><a href="#æ­¥éª¤3ï¼šé…ç½®ç§æœçš„è®¿é—®è·¯å¾„" class="headerlink" title="æ­¥éª¤3ï¼šé…ç½®ç§æœçš„è®¿é—®è·¯å¾„"></a>æ­¥éª¤3ï¼šé…ç½®ç§æœçš„è®¿é—®è·¯å¾„</h4><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mirrors</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mirror</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--é…ç½®ä»“åº“ç»„çš„ID--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span>&gt;</span>maven-public<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--*ä»£è¡¨æ‰€æœ‰å†…å®¹éƒ½ä»ç§æœè·å–--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mirrorOf</span>&gt;</span>*<span class="tag">&lt;/<span class="name">mirrorOf</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--ç§æœä»“åº“ç»„maven-publicçš„è®¿é—®è·¯å¾„--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://localhost:8081/repository/maven-public/<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mirror</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mirrors</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ä¸ºäº†é¿å…é˜¿é‡Œäº‘Mavenç§æœåœ°å€çš„å½±å“ï¼Œå»ºè®®å…ˆå°†ä¹‹å‰é…ç½®çš„é˜¿é‡Œäº‘Mavenç§æœé•œåƒåœ°å€æ³¨é‡Šæ‰ï¼Œç­‰ç»ƒä¹ å®Œåï¼Œå†å°†å…¶æ¢å¤ã€‚</p><p>ï¼ˆå¯ä»¥åœ¨maven-centralä»“åº“ä¸­ä¿®æ”¹remote storageä¸º<a href="http://maven.aliyun.com/nexus/content/groups/public/">é˜¿é‡Œäº‘Mavenç§æœé•œåƒåœ°å€</a>ï¼‰</p><p><img src="/2022/08/07/Maven%E9%AB%98%E7%BA%A7/1630991535107.png" alt="1630991535107"></p><p>è‡³æ­¤æœ¬åœ°ä»“åº“å°±èƒ½ä¸ç§æœè¿›è¡Œäº¤äº’äº†ã€‚</p><h3 id="6-5-ç§æœèµ„æºä¸Šä¼ ä¸ä¸‹è½½"><a href="#6-5-ç§æœèµ„æºä¸Šä¼ ä¸ä¸‹è½½" class="headerlink" title="6.5 ç§æœèµ„æºä¸Šä¼ ä¸ä¸‹è½½"></a>6.5 ç§æœèµ„æºä¸Šä¼ ä¸ä¸‹è½½</h3><p>æœ¬åœ°ä»“åº“ä¸ç§æœå·²ç»å»ºç«‹äº†è¿æ¥ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±éœ€è¦å¾€ç§æœä¸Šä¸Šä¼ èµ„æºå’Œä¸‹è½½èµ„æºï¼Œå…·ä½“çš„å®ç°æ­¥éª¤ä¸º:</p><h4 id="æ­¥éª¤1ï¼šé…ç½®å·¥ç¨‹ä¸Šä¼ ç§æœçš„å…·ä½“ä½ç½®"><a href="#æ­¥éª¤1ï¼šé…ç½®å·¥ç¨‹ä¸Šä¼ ç§æœçš„å…·ä½“ä½ç½®" class="headerlink" title="æ­¥éª¤1ï¼šé…ç½®å·¥ç¨‹ä¸Šä¼ ç§æœçš„å…·ä½“ä½ç½®"></a>æ­¥éª¤1ï¼šé…ç½®å·¥ç¨‹ä¸Šä¼ ç§æœçš„å…·ä½“ä½ç½®</h4><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"> <span class="comment">&lt;!--é…ç½®å½“å‰å·¥ç¨‹ä¿å­˜åœ¨ç§æœä¸­çš„å…·ä½“ä½ç½®--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">distributionManagement</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">repository</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--å’Œmaven/settings.xmlä¸­serverä¸­çš„idä¸€è‡´ï¼Œè¡¨ç¤ºä½¿ç”¨è¯¥idå¯¹åº”çš„ç”¨æˆ·åå’Œå¯†ç --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span>&gt;</span>itheima-release<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">         <span class="comment">&lt;!--releaseç‰ˆæœ¬ä¸Šä¼ ä»“åº“çš„å…·ä½“åœ°å€--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://localhost:8081/repository/itheima-release/<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">repository</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">snapshotRepository</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--å’Œmaven/settings.xmlä¸­serverä¸­çš„idä¸€è‡´ï¼Œè¡¨ç¤ºä½¿ç”¨è¯¥idå¯¹åº”çš„ç”¨æˆ·åå’Œå¯†ç --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span>&gt;</span>itheima-snapshot<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--snapshotç‰ˆæœ¬ä¸Šä¼ ä»“åº“çš„å…·ä½“åœ°å€--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://localhost:8081/repository/itheima-snapshot/<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">snapshotRepository</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">distributionManagement</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="æ­¥éª¤2ï¼šå‘å¸ƒèµ„æºåˆ°ç§æœ"><a href="#æ­¥éª¤2ï¼šå‘å¸ƒèµ„æºåˆ°ç§æœ" class="headerlink" title="æ­¥éª¤2ï¼šå‘å¸ƒèµ„æºåˆ°ç§æœ"></a>æ­¥éª¤2ï¼šå‘å¸ƒèµ„æºåˆ°ç§æœ</h4><p><img src="/2022/08/07/Maven%E9%AB%98%E7%BA%A7/1630992305191.png" alt="1630992305191"></p><p>æˆ–è€…æ‰§è¡ŒMavenå‘½ä»¤</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mvn deploy</span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„:</strong></p><p>è¦å‘å¸ƒçš„é¡¹ç›®éƒ½éœ€è¦é…ç½®<code>distributionManagement</code>æ ‡ç­¾ï¼Œè¦ä¹ˆåœ¨è‡ªå·±çš„pom.xmlä¸­é…ç½®ï¼Œè¦ä¹ˆåœ¨å…¶çˆ¶é¡¹ç›®ä¸­é…ç½®ï¼Œç„¶åå­é¡¹ç›®ä¸­ç»§æ‰¿çˆ¶é¡¹ç›®å³å¯ã€‚</p><p>å‘å¸ƒæˆåŠŸï¼Œåœ¨ç§æœä¸­å°±èƒ½çœ‹åˆ°:</p><p><img src="/2022/08/07/Maven%E9%AB%98%E7%BA%A7/1630992513299.png" alt="1630992513299"></p><p>ç°åœ¨å‘å¸ƒæ˜¯åœ¨itheima-snapshotä»“åº“ä¸­ï¼Œå¦‚æœæƒ³å‘å¸ƒåˆ°itheima-releaseä»“åº“ä¸­å°±éœ€è¦å°†é¡¹ç›®pom.xmlä¸­çš„versionä¿®æ”¹æˆRELEASEå³å¯ã€‚</p><p>å¦‚æœæƒ³åˆ é™¤å·²ç»ä¸Šä¼ çš„èµ„æºï¼Œå¯ä»¥åœ¨ç•Œé¢ä¸Šè¿›è¡Œåˆ é™¤æ“ä½œ:</p><p><img src="/2022/08/07/Maven%E9%AB%98%E7%BA%A7/1630992952378.png" alt="1630992952378"></p><p>å¦‚æœç§æœä¸­æ²¡æœ‰å¯¹åº”çš„jarï¼Œä¼šå»ä¸­å¤®ä»“åº“ä¸‹è½½ï¼Œé€Ÿåº¦å¾ˆæ…¢ã€‚å¯ä»¥é…ç½®è®©ç§æœå»é˜¿é‡Œäº‘ä¸­ä¸‹è½½ä¾èµ–ã€‚</p><p><img src="/2022/08/07/Maven%E9%AB%98%E7%BA%A7/1630993028454.png" alt="1630993028454"></p><p>è‡³æ­¤ç§æœçš„æ­å»ºå°±å·²ç»å®Œæˆï¼Œç›¸å¯¹æ¥è¯´æœ‰ç‚¹éº»çƒ¦ï¼Œä½†æ˜¯æ­¥éª¤éƒ½æ¯”è¾ƒå›ºå®šï¼ŒåæœŸå¤§å®¶å¦‚æœéœ€è¦çš„è¯ï¼Œå°±å¯ä»¥å‚è€ƒä¸Šé¢çš„æ­¥éª¤ä¸€æ­¥æ­¥å®Œæˆæ­å»ºå³å¯ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> maven </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringMVC--day02</title>
      <link href="/2022/08/03/SpringMVC_day02/"/>
      <url>/2022/08/03/SpringMVC_day02/</url>
      
        <content type="html"><![CDATA[<p><strong>ä»Šæ—¥å†…å®¹</strong></p><blockquote><ul><li>å®ŒæˆSSMçš„æ•´åˆå¼€å‘</li><li>èƒ½å¤Ÿç†è§£å¹¶å®ç°ç»Ÿä¸€ç»“æœå°è£…ä¸ç»Ÿä¸€å¼‚å¸¸å¤„ç†</li><li>èƒ½å¤Ÿå®Œæˆå‰åå°åŠŸèƒ½æ•´åˆå¼€å‘</li><li>æŒæ¡æ‹¦æˆªå™¨çš„ç¼–å†™</li></ul></blockquote><h2 id="1ï¼ŒSSMæ•´åˆ"><a href="#1ï¼ŒSSMæ•´åˆ" class="headerlink" title="1ï¼ŒSSMæ•´åˆ"></a>1ï¼ŒSSMæ•´åˆ</h2><p>å‰é¢æˆ‘ä»¬å·²ç»æŠŠ<code>Mybatis</code>ã€<code>Spring</code>å’Œ<code>SpringMVC</code>ä¸‰ä¸ªæ¡†æ¶è¿›è¡Œäº†å­¦ä¹ ï¼Œä»Šå¤©ä¸»è¦çš„å†…å®¹å°±æ˜¯æŠŠè¿™ä¸‰ä¸ªæ¡†æ¶æ•´åˆåœ¨ä¸€èµ·å®Œæˆæˆ‘ä»¬çš„ä¸šåŠ¡åŠŸèƒ½å¼€å‘ï¼Œå…·ä½“å¦‚ä½•æ¥æ•´åˆï¼Œæˆ‘ä»¬ä¸€æ­¥æ­¥æ¥å­¦ä¹ ã€‚</p><h3 id="1-1-æµç¨‹åˆ†æ"><a href="#1-1-æµç¨‹åˆ†æ" class="headerlink" title="1.1 æµç¨‹åˆ†æ"></a>1.1 æµç¨‹åˆ†æ</h3><p>(1) åˆ›å»ºå·¥ç¨‹</p><ul><li>åˆ›å»ºä¸€ä¸ªMavençš„webå·¥ç¨‹</li><li>pom.xmlæ·»åŠ SSMéœ€è¦çš„ä¾èµ–jaråŒ…</li><li>ç¼–å†™Webé¡¹ç›®çš„å…¥å£é…ç½®ç±»ï¼Œå®ç°<code>AbstractAnnotationConfigDispatcherServletInitializer</code>é‡å†™ä»¥ä¸‹æ–¹æ³•<ul><li>getRootConfigClasses()ï¼šè¿”å›Springçš„é…ç½®ç±»-&gt;éœ€è¦<strong>SpringConfig</strong>é…ç½®ç±»</li><li>getServletConfigClasses()ï¼šè¿”å›SpringMVCçš„é…ç½®ç±»-&gt;éœ€è¦<strong>SpringMvcConfig</strong>é…ç½®ç±»</li><li>getServletMappings(): è®¾ç½®SpringMVCè¯·æ±‚æ‹¦æˆªè·¯å¾„è§„åˆ™</li><li>getServletFilters()ï¼šè®¾ç½®è¿‡æ»¤å™¨ï¼Œè§£å†³POSTè¯·æ±‚ä¸­æ–‡ä¹±ç é—®é¢˜</li></ul></li></ul><p>(2)SSMæ•´åˆ[<strong>é‡ç‚¹æ˜¯å„ä¸ªé…ç½®çš„ç¼–å†™</strong>]</p><ul><li>SpringConfig<ul><li>æ ‡è¯†è¯¥ç±»ä¸ºé…ç½®ç±» @Configuration</li><li>æ‰«æServiceæ‰€åœ¨çš„åŒ… @ComponentScan</li><li>åœ¨Serviceå±‚è¦ç®¡ç†äº‹åŠ¡ @EnableTransactionManagement</li><li>è¯»å–å¤–éƒ¨çš„propertiesé…ç½®æ–‡ä»¶ @PropertySource</li><li>æ•´åˆMybatiséœ€è¦å¼•å…¥Mybatisç›¸å…³é…ç½®ç±» @Import<ul><li>ç¬¬ä¸‰æ–¹æ•°æ®æºé…ç½®ç±» JdbcConfig<ul><li>æ„å»ºDataSourceæ•°æ®æºï¼ŒDruidDataSouroce,éœ€è¦æ³¨å…¥æ•°æ®åº“è¿æ¥å››è¦ç´ ï¼Œ @Bean @Value</li><li>æ„å»ºå¹³å°äº‹åŠ¡ç®¡ç†å™¨ï¼ŒDataSourceTransactionManager,@Bean</li></ul></li><li>Mybatisé…ç½®ç±» MybatisConfig<ul><li>æ„å»ºSqlSessionFactoryBeanå¹¶è®¾ç½®åˆ«åæ‰«æä¸æ•°æ®æºï¼Œ@Bean</li><li>æ„å»ºMapperScannerConfigurerå¹¶è®¾ç½®DAOå±‚çš„åŒ…æ‰«æ</li></ul></li></ul></li></ul></li><li>SpringMvcConfig<ul><li>æ ‡è¯†è¯¥ç±»ä¸ºé…ç½®ç±» @Configuration</li><li>æ‰«æControlleræ‰€åœ¨çš„åŒ… @ComponentScan</li><li>å¼€å¯SpringMVCæ³¨è§£æ”¯æŒ @EnableWebMvc</li></ul></li></ul><p>(3)åŠŸèƒ½æ¨¡å—[ä¸å…·ä½“çš„ä¸šåŠ¡æ¨¡å—æœ‰å…³]</p><ul><li>åˆ›å»ºæ•°æ®åº“è¡¨</li><li>æ ¹æ®æ•°æ®åº“è¡¨åˆ›å»ºå¯¹åº”çš„æ¨¡å‹ç±»</li><li>é€šè¿‡Daoå±‚å®Œæˆæ•°æ®åº“è¡¨çš„å¢åˆ æ”¹æŸ¥(æ¥å£+è‡ªåŠ¨ä»£ç†)</li><li>ç¼–å†™Serviceå±‚[Serviceæ¥å£+å®ç°ç±»]<ul><li>@Service</li><li>@Transactional</li><li>æ•´åˆJunitå¯¹ä¸šåŠ¡å±‚è¿›è¡Œå•å…ƒæµ‹è¯•<ul><li>@RunWith</li><li>@ContextConfiguration</li><li>@Test</li></ul></li></ul></li><li>ç¼–å†™Controllerå±‚<ul><li>æ¥æ”¶è¯·æ±‚ @RequestMapping @GetMapping @PostMapping @PutMapping @DeleteMapping</li><li>æ¥æ”¶æ•°æ® ç®€å•ã€POJOã€åµŒå¥—POJOã€é›†åˆã€æ•°ç»„ã€JSONæ•°æ®ç±»å‹<ul><li>@RequestParam</li><li>@PathVariable</li><li>@RequestBody</li></ul></li><li>è½¬å‘ä¸šåŠ¡å±‚ <ul><li>@Autowired</li></ul></li><li>å“åº”ç»“æœ<ul><li>@ResponseBody</li></ul></li></ul></li></ul><h3 id="1-2-æ•´åˆé…ç½®"><a href="#1-2-æ•´åˆé…ç½®" class="headerlink" title="1.2 æ•´åˆé…ç½®"></a>1.2 æ•´åˆé…ç½®</h3><p>æŒæ¡ä¸Šè¿°çš„çŸ¥è¯†ç‚¹åï¼Œæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±å¯ä»¥æŒ‰ç…§ä¸Šè¿°çš„æ­¥éª¤ä¸€æ­¥æ­¥çš„æ¥å®ŒæˆSSMçš„æ•´åˆã€‚</p><h4 id="æ­¥éª¤1ï¼šåˆ›å»ºMavençš„webé¡¹ç›®"><a href="#æ­¥éª¤1ï¼šåˆ›å»ºMavençš„webé¡¹ç›®" class="headerlink" title="æ­¥éª¤1ï¼šåˆ›å»ºMavençš„webé¡¹ç›®"></a>æ­¥éª¤1ï¼šåˆ›å»ºMavençš„webé¡¹ç›®</h4><p>å¯ä»¥ä½¿ç”¨Mavençš„éª¨æ¶åˆ›å»º</p><p><img src="/2022/08/03/SpringMVC_day02/1630561266760.png" alt="1630561266760"></p><h4 id="æ­¥éª¤2-æ·»åŠ ä¾èµ–"><a href="#æ­¥éª¤2-æ·»åŠ ä¾èµ–" class="headerlink" title="æ­¥éª¤2:æ·»åŠ ä¾èµ–"></a>æ­¥éª¤2:æ·»åŠ ä¾èµ–</h4><p>pom.xmlæ·»åŠ SSMæ‰€éœ€è¦çš„ä¾èµ–jaråŒ…</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.itheima<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springmvc_08_ssm<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>war<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.10.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.10.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.10.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.47<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.16<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-databind<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.9.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.tomcat.maven<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>tomcat7-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">port</span>&gt;</span>80<span class="tag">&lt;/<span class="name">port</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">path</span>&gt;</span>/<span class="tag">&lt;/<span class="name">path</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="æ­¥éª¤3-åˆ›å»ºé¡¹ç›®åŒ…ç»“æ„"><a href="#æ­¥éª¤3-åˆ›å»ºé¡¹ç›®åŒ…ç»“æ„" class="headerlink" title="æ­¥éª¤3:åˆ›å»ºé¡¹ç›®åŒ…ç»“æ„"></a>æ­¥éª¤3:åˆ›å»ºé¡¹ç›®åŒ…ç»“æ„</h4><p><img src="/2022/08/03/SpringMVC_day02/1630561591931.png" alt="1630561591931"></p><ul><li>configç›®å½•å­˜æ”¾çš„æ˜¯ç›¸å…³çš„é…ç½®ç±»</li><li>controllerç¼–å†™çš„æ˜¯Controllerç±»</li><li>daoå­˜æ”¾çš„æ˜¯Daoæ¥å£ï¼Œå› ä¸ºä½¿ç”¨çš„æ˜¯Mapperæ¥å£ä»£ç†æ–¹å¼ï¼Œæ‰€ä»¥æ²¡æœ‰å®ç°ç±»åŒ…</li><li>serviceå­˜çš„æ˜¯Serviceæ¥å£ï¼Œimplå­˜æ”¾çš„æ˜¯Serviceå®ç°ç±»</li><li>resources:å­˜å…¥çš„æ˜¯é…ç½®æ–‡ä»¶ï¼Œå¦‚Jdbc.properties</li><li>webapp:ç›®å½•å¯ä»¥å­˜æ”¾é™æ€èµ„æº</li><li>test&#x2F;java:å­˜æ”¾çš„æ˜¯æµ‹è¯•ç±»</li></ul><h4 id="æ­¥éª¤4-åˆ›å»ºSpringConfigé…ç½®ç±»"><a href="#æ­¥éª¤4-åˆ›å»ºSpringConfigé…ç½®ç±»" class="headerlink" title="æ­¥éª¤4:åˆ›å»ºSpringConfigé…ç½®ç±»"></a>æ­¥éª¤4:åˆ›å»ºSpringConfigé…ç½®ç±»</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ComponentScan(&#123;&quot;com.itheima.service&quot;&#125;)</span></span><br><span class="line"><span class="meta">@PropertySource(&quot;classpath:jdbc.properties&quot;)</span></span><br><span class="line"><span class="meta">@Import(&#123;JdbcConfig.class,MyBatisConfig.class&#125;)</span></span><br><span class="line"><span class="meta">@EnableTransactionManagement</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringConfig</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ­¥éª¤5-åˆ›å»ºJdbcConfigé…ç½®ç±»"><a href="#æ­¥éª¤5-åˆ›å»ºJdbcConfigé…ç½®ç±»" class="headerlink" title="æ­¥éª¤5:åˆ›å»ºJdbcConfigé…ç½®ç±»"></a>æ­¥éª¤5:åˆ›å»ºJdbcConfigé…ç½®ç±»</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JdbcConfig</span> &#123;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;jdbc.driver&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String driver;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;jdbc.url&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String url;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;jdbc.username&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;jdbc.password&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> DataSource <span class="title function_">dataSource</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">DruidDataSource</span> <span class="variable">dataSource</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DruidDataSource</span>();</span><br><span class="line">        dataSource.setDriverClassName(driver);</span><br><span class="line">        dataSource.setUrl(url);</span><br><span class="line">        dataSource.setUsername(username);</span><br><span class="line">        dataSource.setPassword(password);</span><br><span class="line">        <span class="keyword">return</span> dataSource;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> PlatformTransactionManager <span class="title function_">transactionManager</span><span class="params">(DataSource dataSource)</span>&#123;</span><br><span class="line">        <span class="type">DataSourceTransactionManager</span> <span class="variable">ds</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DataSourceTransactionManager</span>();</span><br><span class="line">        ds.setDataSource(dataSource);</span><br><span class="line">        <span class="keyword">return</span> ds;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ­¥éª¤6-åˆ›å»ºMybatisConfigé…ç½®ç±»"><a href="#æ­¥éª¤6-åˆ›å»ºMybatisConfigé…ç½®ç±»" class="headerlink" title="æ­¥éª¤6:åˆ›å»ºMybatisConfigé…ç½®ç±»"></a>æ­¥éª¤6:åˆ›å»ºMybatisConfigé…ç½®ç±»</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyBatisConfig</span> &#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> SqlSessionFactoryBean <span class="title function_">sqlSessionFactory</span><span class="params">(DataSource dataSource)</span>&#123;</span><br><span class="line">        <span class="type">SqlSessionFactoryBean</span> <span class="variable">factoryBean</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBean</span>();</span><br><span class="line">        factoryBean.setDataSource(dataSource);</span><br><span class="line">        factoryBean.setTypeAliasesPackage(<span class="string">&quot;com.itheima.domain&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> factoryBean;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> MapperScannerConfigurer <span class="title function_">mapperScannerConfigurer</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">MapperScannerConfigurer</span> <span class="variable">msc</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MapperScannerConfigurer</span>();</span><br><span class="line">        msc.setBasePackage(<span class="string">&quot;com.itheima.dao&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> msc;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ­¥éª¤7-åˆ›å»ºjdbc-properties"><a href="#æ­¥éª¤7-åˆ›å»ºjdbc-properties" class="headerlink" title="æ­¥éª¤7:åˆ›å»ºjdbc.properties"></a>æ­¥éª¤7:åˆ›å»ºjdbc.properties</h4><p>åœ¨resourcesä¸‹æä¾›jdbc.properties,è®¾ç½®æ•°æ®åº“è¿æ¥å››è¦ç´ </p><figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">jdbc.driver</span>=<span class="string">com.mysql.jdbc.Driver</span></span><br><span class="line"><span class="attr">jdbc.url</span>=<span class="string">jdbc:mysql://localhost:3306/ssm_db</span></span><br><span class="line"><span class="attr">jdbc.username</span>=<span class="string">root</span></span><br><span class="line"><span class="attr">jdbc.password</span>=<span class="string">root</span></span><br></pre></td></tr></table></figure><h4 id="æ­¥éª¤8-åˆ›å»ºSpringMVCé…ç½®ç±»"><a href="#æ­¥éª¤8-åˆ›å»ºSpringMVCé…ç½®ç±»" class="headerlink" title="æ­¥éª¤8:åˆ›å»ºSpringMVCé…ç½®ç±»"></a>æ­¥éª¤8:åˆ›å»ºSpringMVCé…ç½®ç±»</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ComponentScan(&quot;com.itheima.controller&quot;)</span></span><br><span class="line"><span class="meta">@EnableWebMvc</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringMvcConfig</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ­¥éª¤9-åˆ›å»ºWebé¡¹ç›®å…¥å£é…ç½®ç±»"><a href="#æ­¥éª¤9-åˆ›å»ºWebé¡¹ç›®å…¥å£é…ç½®ç±»" class="headerlink" title="æ­¥éª¤9:åˆ›å»ºWebé¡¹ç›®å…¥å£é…ç½®ç±»"></a>æ­¥éª¤9:åˆ›å»ºWebé¡¹ç›®å…¥å£é…ç½®ç±»</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ServletConfig</span> <span class="keyword">extends</span> <span class="title class_">AbstractAnnotationConfigDispatcherServletInitializer</span> &#123;</span><br><span class="line">    <span class="comment">//åŠ è½½Springé…ç½®ç±»</span></span><br><span class="line">    <span class="keyword">protected</span> Class&lt;?&gt;[] getRootConfigClasses() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Class</span>[]&#123;SpringConfig.class&#125;;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//åŠ è½½SpringMVCé…ç½®ç±»</span></span><br><span class="line">    <span class="keyword">protected</span> Class&lt;?&gt;[] getServletConfigClasses() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Class</span>[]&#123;SpringMvcConfig.class&#125;;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//è®¾ç½®SpringMVCè¯·æ±‚åœ°å€æ‹¦æˆªè§„åˆ™</span></span><br><span class="line">    <span class="keyword">protected</span> String[] getServletMappings() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">String</span>[]&#123;<span class="string">&quot;/&quot;</span>&#125;;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//è®¾ç½®postè¯·æ±‚ä¸­æ–‡ä¹±ç è¿‡æ»¤å™¨</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> Filter[] getServletFilters() &#123;</span><br><span class="line">        <span class="type">CharacterEncodingFilter</span> <span class="variable">filter</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CharacterEncodingFilter</span>();</span><br><span class="line">        filter.setEncoding(<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Filter</span>[]&#123;filter&#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è‡³æ­¤SSMæ•´åˆçš„ç¯å¢ƒå°±å·²ç»æ­å»ºå¥½äº†ã€‚åœ¨è¿™ä¸ªç¯å¢ƒä¸Šï¼Œæˆ‘ä»¬å¦‚ä½•è¿›è¡ŒåŠŸèƒ½æ¨¡å—çš„å¼€å‘å‘¢?</p><h3 id="1-3-åŠŸèƒ½æ¨¡å—å¼€å‘"><a href="#1-3-åŠŸèƒ½æ¨¡å—å¼€å‘" class="headerlink" title="1.3 åŠŸèƒ½æ¨¡å—å¼€å‘"></a>1.3 åŠŸèƒ½æ¨¡å—å¼€å‘</h3><blockquote><p>éœ€æ±‚:å¯¹è¡¨tbl_bookè¿›è¡Œæ–°å¢ã€ä¿®æ”¹ã€åˆ é™¤ã€æ ¹æ®IDæŸ¥è¯¢å’ŒæŸ¥è¯¢æ‰€æœ‰</p></blockquote><h4 id="æ­¥éª¤1-åˆ›å»ºæ•°æ®åº“åŠè¡¨"><a href="#æ­¥éª¤1-åˆ›å»ºæ•°æ®åº“åŠè¡¨" class="headerlink" title="æ­¥éª¤1:åˆ›å»ºæ•°æ®åº“åŠè¡¨"></a>æ­¥éª¤1:åˆ›å»ºæ•°æ®åº“åŠè¡¨</h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> database ssm_db <span class="type">character</span> <span class="keyword">set</span> utf8;</span><br><span class="line">use ssm_db;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> tbl_book(</span><br><span class="line">  id <span class="type">int</span> <span class="keyword">primary</span> key auto_increment,</span><br><span class="line">  type <span class="type">varchar</span>(<span class="number">20</span>),</span><br><span class="line">  name <span class="type">varchar</span>(<span class="number">50</span>),</span><br><span class="line">  description <span class="type">varchar</span>(<span class="number">255</span>)</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span>  <span class="keyword">into</span> `tbl_book`(`id`,`type`,`name`,`description`) <span class="keyword">values</span> (<span class="number">1</span>,<span class="string">&#x27;è®¡ç®—æœºç†è®º&#x27;</span>,<span class="string">&#x27;Springå®æˆ˜ ç¬¬äº”ç‰ˆ&#x27;</span>,<span class="string">&#x27;Springå…¥é—¨ç»å…¸æ•™ç¨‹ï¼Œæ·±å…¥ç†è§£SpringåŸç†æŠ€æœ¯å†…å¹•&#x27;</span>),(<span class="number">2</span>,<span class="string">&#x27;è®¡ç®—æœºç†è®º&#x27;</span>,<span class="string">&#x27;Spring 5æ ¸å¿ƒåŸç†ä¸30ä¸ªç±»æ‰‹å†™å®è·µ&#x27;</span>,<span class="string">&#x27;åå¹´æ²‰æ·€ä¹‹ä½œï¼Œæ‰‹å†™Springç²¾åæ€æƒ³&#x27;</span>),(<span class="number">3</span>,<span class="string">&#x27;è®¡ç®—æœºç†è®º&#x27;</span>,<span class="string">&#x27;Spring 5è®¾è®¡æ¨¡å¼&#x27;</span>,<span class="string">&#x27;æ·±å…¥Springæºç åˆ¨æSpringæºç ä¸­è•´å«çš„10å¤§è®¾è®¡æ¨¡å¼&#x27;</span>),(<span class="number">4</span>,<span class="string">&#x27;è®¡ç®—æœºç†è®º&#x27;</span>,<span class="string">&#x27;Spring MVC+Mybatiså¼€å‘ä»å…¥é—¨åˆ°é¡¹ç›®å®æˆ˜&#x27;</span>,<span class="string">&#x27;å…¨æ–¹ä½è§£æé¢å‘Webåº”ç”¨çš„è½»é‡çº§æ¡†æ¶ï¼Œå¸¦ä½ æˆä¸ºSpring MVCå¼€å‘é«˜æ‰‹&#x27;</span>),(<span class="number">5</span>,<span class="string">&#x27;è®¡ç®—æœºç†è®º&#x27;</span>,<span class="string">&#x27;è½»é‡çº§Java Webä¼ä¸šåº”ç”¨å®æˆ˜&#x27;</span>,<span class="string">&#x27;æºç çº§åˆ¨æSpringæ¡†æ¶ï¼Œé€‚åˆå·²æŒæ¡JavaåŸºç¡€çš„è¯»è€…&#x27;</span>),(<span class="number">6</span>,<span class="string">&#x27;è®¡ç®—æœºç†è®º&#x27;</span>,<span class="string">&#x27;Javaæ ¸å¿ƒæŠ€æœ¯ å·â…  åŸºç¡€çŸ¥è¯†(åŸä¹¦ç¬¬11ç‰ˆ)&#x27;</span>,<span class="string">&#x27;Core Javaç¬¬11ç‰ˆï¼ŒJoltå¤§å¥–è·å¥–ä½œå“ï¼Œé’ˆå¯¹Java SE9ã€10ã€11å…¨é¢æ›´æ–°&#x27;</span>),(<span class="number">7</span>,<span class="string">&#x27;è®¡ç®—æœºç†è®º&#x27;</span>,<span class="string">&#x27;æ·±å…¥ç†è§£Javaè™šæ‹Ÿæœº&#x27;</span>,<span class="string">&#x27;5ä¸ªçº¬åº¦å…¨é¢åˆ¨æJVM,å¤§å‚é¢è¯•çŸ¥è¯†ç‚¹å…¨è¦†ç›–&#x27;</span>),(<span class="number">8</span>,<span class="string">&#x27;è®¡ç®—æœºç†è®º&#x27;</span>,<span class="string">&#x27;Javaç¼–ç¨‹æ€æƒ³(ç¬¬4ç‰ˆ)&#x27;</span>,<span class="string">&#x27;Javaå­¦ä¹ å¿…è¯»ç»å…¸ï¼Œæ®¿å ‚çº§è‘—ä½œï¼èµ¢å¾—äº†å…¨çƒç¨‹åºå‘˜çš„å¹¿æ³›èµèª‰&#x27;</span>),(<span class="number">9</span>,<span class="string">&#x27;è®¡ç®—æœºç†è®º&#x27;</span>,<span class="string">&#x27;é›¶åŸºç¡€å­¦Java(å…¨å½©ç‰ˆ)&#x27;</span>,<span class="string">&#x27;é›¶åŸºç¡€è‡ªå­¦ç¼–ç¨‹çš„å…¥é—¨å›¾ä¹¦ï¼Œç”±æµ…å…¥æ·±ï¼Œè¯¦è§£Javaè¯­è¨€çš„ç¼–ç¨‹æ€æƒ³å’Œæ ¸å¿ƒæŠ€æœ¯&#x27;</span>),(<span class="number">10</span>,<span class="string">&#x27;å¸‚åœºè¥é”€&#x27;</span>,<span class="string">&#x27;ç›´æ’­å°±è¿™ä¹ˆåš:ä¸»æ’­é«˜æ•ˆæ²Ÿé€šå®æˆ˜æŒ‡å—&#x27;</span>,<span class="string">&#x27;æå­æŸ’ã€æä½³å¥‡ã€è–‡å¨…æˆé•¿ä¸ºç½‘çº¢çš„ç§˜å¯†éƒ½åœ¨ä¹¦ä¸­&#x27;</span>),(<span class="number">11</span>,<span class="string">&#x27;å¸‚åœºè¥é”€&#x27;</span>,<span class="string">&#x27;ç›´æ’­é”€è®²å®æˆ˜ä¸€æœ¬é€š&#x27;</span>,<span class="string">&#x27;å’Œç§‹å¶ä¸€èµ·å­¦ç³»åˆ—ç½‘ç»œè¥é”€ä¹¦ç±&#x27;</span>),(<span class="number">12</span>,<span class="string">&#x27;å¸‚åœºè¥é”€&#x27;</span>,<span class="string">&#x27;ç›´æ’­å¸¦è´§:æ·˜å®ã€å¤©çŒ«ç›´æ’­ä»æ–°æ‰‹åˆ°é«˜æ‰‹&#x27;</span>,<span class="string">&#x27;ä¸€æœ¬æ•™ä½ å¦‚ä½•ç©è½¬ç›´æ’­çš„ä¹¦ï¼Œ10å ‚è¯¾è½»æ¾å®ç°å¸¦è´§æœˆå…¥3W+&#x27;</span>);</span><br></pre></td></tr></table></figure><h4 id="æ­¥éª¤2-ç¼–å†™æ¨¡å‹ç±»"><a href="#æ­¥éª¤2-ç¼–å†™æ¨¡å‹ç±»" class="headerlink" title="æ­¥éª¤2:ç¼–å†™æ¨¡å‹ç±»"></a>æ­¥éª¤2:ç¼–å†™æ¨¡å‹ç±»</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Book</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String type;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String description;</span><br><span class="line">    <span class="comment">//getter...setter...toStringçœç•¥</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ­¥éª¤3-ç¼–å†™Daoæ¥å£"><a href="#æ­¥éª¤3-ç¼–å†™Daoæ¥å£" class="headerlink" title="æ­¥éª¤3:ç¼–å†™Daoæ¥å£"></a>æ­¥éª¤3:ç¼–å†™Daoæ¥å£</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">BookDao</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//    @Insert(&quot;insert into tbl_book values(null,#&#123;type&#125;,#&#123;name&#125;,#&#123;description&#125;)&quot;)</span></span><br><span class="line">    <span class="meta">@Insert(&quot;insert into tbl_book (type,name,description) values(#&#123;type&#125;,#&#123;name&#125;,#&#123;description&#125;)&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">(Book book)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Update(&quot;update tbl_book set type = #&#123;type&#125;, name = #&#123;name&#125;, description = #&#123;description&#125; where id = #&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">(Book book)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Delete(&quot;delete from tbl_book where id = #&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">delete</span><span class="params">(Integer id)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Select(&quot;select * from tbl_book where id = #&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Book <span class="title function_">getById</span><span class="params">(Integer id)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Select(&quot;select * from tbl_book&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;Book&gt; <span class="title function_">getAll</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ­¥éª¤4-ç¼–å†™Serviceæ¥å£å’Œå®ç°ç±»"><a href="#æ­¥éª¤4-ç¼–å†™Serviceæ¥å£å’Œå®ç°ç±»" class="headerlink" title="æ­¥éª¤4:ç¼–å†™Serviceæ¥å£å’Œå®ç°ç±»"></a>æ­¥éª¤4:ç¼–å†™Serviceæ¥å£å’Œå®ç°ç±»</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Transactional</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">BookService</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä¿å­˜</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> book</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">save</span><span class="params">(Book book)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä¿®æ”¹</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> book</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">update</span><span class="params">(Book book)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æŒ‰idåˆ é™¤</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> id</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">delete</span><span class="params">(Integer id)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æŒ‰idæŸ¥è¯¢</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> id</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> Book <span class="title function_">getById</span><span class="params">(Integer id)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æŸ¥è¯¢å…¨éƒ¨</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;Book&gt; <span class="title function_">getAll</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">BookService</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> BookDao bookDao;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">save</span><span class="params">(Book book)</span> &#123;</span><br><span class="line">        bookDao.save(book);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">update</span><span class="params">(Book book)</span> &#123;</span><br><span class="line">        bookDao.update(book);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">delete</span><span class="params">(Integer id)</span> &#123;</span><br><span class="line">        bookDao.delete(id);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Book <span class="title function_">getById</span><span class="params">(Integer id)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> bookDao.getById(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> List&lt;Book&gt; <span class="title function_">getAll</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> bookDao.getAll();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>è¯´æ˜:</strong></p><ul><li><p>bookDaoåœ¨Serviceä¸­æ³¨å…¥çš„ä¼šæç¤ºä¸€ä¸ªçº¢çº¿æç¤ºï¼Œä¸ºä»€ä¹ˆå‘¢?</p><ul><li>BookDaoæ˜¯ä¸€ä¸ªæ¥å£ï¼Œæ²¡æœ‰å®ç°ç±»ï¼Œæ¥å£æ˜¯ä¸èƒ½åˆ›å»ºå¯¹è±¡çš„ï¼Œæ‰€ä»¥æœ€ç»ˆæ³¨å…¥çš„åº”è¯¥æ˜¯ä»£ç†å¯¹è±¡</li><li>ä»£ç†å¯¹è±¡æ˜¯ç”±Springçš„IOCå®¹å™¨æ¥åˆ›å»ºç®¡ç†çš„</li><li>IOCå®¹å™¨åˆæ˜¯åœ¨WebæœåŠ¡å™¨å¯åŠ¨çš„æ—¶å€™æ‰ä¼šåˆ›å»º</li><li>IDEAåœ¨æ£€æµ‹ä¾èµ–å…³ç³»çš„æ—¶å€™ï¼Œæ²¡æœ‰æ‰¾åˆ°é€‚åˆçš„ç±»æ³¨å…¥ï¼Œæ‰€ä»¥ä¼šæç¤ºé”™è¯¯æç¤º</li><li>ä½†æ˜¯ç¨‹åºè¿è¡Œçš„æ—¶å€™ï¼Œä»£ç†å¯¹è±¡å°±ä¼šè¢«åˆ›å»ºï¼Œæ¡†æ¶ä¼šä½¿ç”¨DIè¿›è¡Œæ³¨å…¥ï¼Œæ‰€ä»¥ç¨‹åºè¿è¡Œæ— å½±å“ã€‚</li></ul></li><li><p>å¦‚ä½•è§£å†³ä¸Šè¿°é—®é¢˜?</p><ul><li><p>å¯ä»¥ä¸ç”¨ç†ä¼šï¼Œå› ä¸ºè¿è¡Œæ˜¯æ­£å¸¸çš„</p></li><li><p>è®¾ç½®é”™è¯¯æç¤ºçº§åˆ«</p><p><img src="/2022/08/03/SpringMVC_day02/1630600227357.png"></p></li></ul></li></ul><h4 id="æ­¥éª¤5-ç¼–å†™Contorllerç±»"><a href="#æ­¥éª¤5-ç¼–å†™Contorllerç±»" class="headerlink" title="æ­¥éª¤5:ç¼–å†™Contorllerç±»"></a>æ­¥éª¤5:ç¼–å†™Contorllerç±»</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/books&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> BookService bookService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostMapping</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">save</span><span class="params">(<span class="meta">@RequestBody</span> Book book)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> bookService.save(book);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PutMapping</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">update</span><span class="params">(<span class="meta">@RequestBody</span> Book book)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> bookService.update(book);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@DeleteMapping(&quot;/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">delete</span><span class="params">(<span class="meta">@PathVariable</span> Integer id)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> bookService.delete(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Book <span class="title function_">getById</span><span class="params">(<span class="meta">@PathVariable</span> Integer id)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> bookService.getById(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;Book&gt; <span class="title function_">getAll</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> bookService.getAll();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯¹äºå›¾ä¹¦æ¨¡å—çš„å¢åˆ æ”¹æŸ¥å°±å·²ç»å®Œæˆäº†ç¼–å†™ï¼Œæˆ‘ä»¬å¯ä»¥ä»åå¾€å‰å†™ä¹Ÿå¯ä»¥ä»å‰å¾€åå†™ï¼Œæœ€ç»ˆåªéœ€è¦èƒ½æŠŠåŠŸèƒ½å®ç°å³å¯ã€‚</p><p>æ¥ä¸‹æ¥æˆ‘ä»¬å°±å…ˆæŠŠä¸šåŠ¡å±‚çš„ä»£ç ä½¿ç”¨<code>Springæ•´åˆJunit</code>çš„çŸ¥è¯†ç‚¹è¿›è¡Œå•å…ƒæµ‹è¯•:</p><h3 id="1-4-å•å…ƒæµ‹è¯•"><a href="#1-4-å•å…ƒæµ‹è¯•" class="headerlink" title="1.4 å•å…ƒæµ‹è¯•"></a>1.4 å•å…ƒæµ‹è¯•</h3><h4 id="æ­¥éª¤1-æ–°å»ºæµ‹è¯•ç±»"><a href="#æ­¥éª¤1-æ–°å»ºæµ‹è¯•ç±»" class="headerlink" title="æ­¥éª¤1:æ–°å»ºæµ‹è¯•ç±»"></a>æ­¥éª¤1:æ–°å»ºæµ‹è¯•ç±»</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RunWith(SpringJUnit4ClassRunner.class)</span></span><br><span class="line"><span class="meta">@ContextConfiguration(classes = SpringConfig.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookServiceTest</span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ­¥éª¤2-æ³¨å…¥Serviceç±»"><a href="#æ­¥éª¤2-æ³¨å…¥Serviceç±»" class="headerlink" title="æ­¥éª¤2:æ³¨å…¥Serviceç±»"></a>æ­¥éª¤2:æ³¨å…¥Serviceç±»</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RunWith(SpringJUnit4ClassRunner.class)</span></span><br><span class="line"><span class="meta">@ContextConfiguration(classes = SpringConfig.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookServiceTest</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> BookService bookService;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ­¥éª¤3-ç¼–å†™æµ‹è¯•æ–¹æ³•"><a href="#æ­¥éª¤3-ç¼–å†™æµ‹è¯•æ–¹æ³•" class="headerlink" title="æ­¥éª¤3:ç¼–å†™æµ‹è¯•æ–¹æ³•"></a>æ­¥éª¤3:ç¼–å†™æµ‹è¯•æ–¹æ³•</h4><p>æˆ‘ä»¬å…ˆæ¥å¯¹æŸ¥è¯¢è¿›è¡Œå•å…ƒæµ‹è¯•ã€‚</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RunWith(SpringJUnit4ClassRunner.class)</span></span><br><span class="line"><span class="meta">@ContextConfiguration(classes = SpringConfig.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookServiceTest</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> BookService bookService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testGetById</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">Book</span> <span class="variable">book</span> <span class="operator">=</span> bookService.getById(<span class="number">1</span>);</span><br><span class="line">        System.out.println(book);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testGetAll</span><span class="params">()</span>&#123;</span><br><span class="line">        List&lt;Book&gt; all = bookService.getAll();</span><br><span class="line">        System.out.println(all);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ ¹æ®IDæŸ¥è¯¢ï¼Œæµ‹è¯•çš„ç»“æœä¸º:</p><p><img src="/2022/08/03/SpringMVC_day02/1630600844191.png" alt="1630600844191"></p><p>æŸ¥è¯¢æ‰€æœ‰ï¼Œæµ‹è¯•çš„ç»“æœä¸º:</p><p><img src="/2022/08/03/SpringMVC_day02/1630600927486.png" alt="1630600927486"></p><h3 id="1-5-PostManæµ‹è¯•"><a href="#1-5-PostManæµ‹è¯•" class="headerlink" title="1.5 PostManæµ‹è¯•"></a>1.5 PostManæµ‹è¯•</h3><h4 id="æ–°å¢"><a href="#æ–°å¢" class="headerlink" title="æ–°å¢"></a>æ–°å¢</h4><p><code>http://localhost/books</code></p><figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line"><span class="attr">&quot;type&quot;</span><span class="punctuation">:</span><span class="string">&quot;ç±»åˆ«æµ‹è¯•æ•°æ®&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span><span class="string">&quot;ä¹¦åæµ‹è¯•æ•°æ®&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span><span class="string">&quot;æè¿°æµ‹è¯•æ•°æ®&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p><img src="/2022/08/03/SpringMVC_day02/1630652582425.png" alt="1630652582425"></p><h4 id="ä¿®æ”¹"><a href="#ä¿®æ”¹" class="headerlink" title="ä¿®æ”¹"></a>ä¿®æ”¹</h4><p><code>http://localhost/books</code></p><figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span><span class="number">13</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;type&quot;</span><span class="punctuation">:</span><span class="string">&quot;ç±»åˆ«æµ‹è¯•æ•°æ®&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span><span class="string">&quot;ä¹¦åæµ‹è¯•æ•°æ®&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span><span class="string">&quot;æè¿°æµ‹è¯•æ•°æ®&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p><img src="/2022/08/03/SpringMVC_day02/1630652758221.png" alt="1630652758221"></p><h4 id="åˆ é™¤"><a href="#åˆ é™¤" class="headerlink" title="åˆ é™¤"></a>åˆ é™¤</h4><p><code>http://localhost/books/14</code></p><p><img src="/2022/08/03/SpringMVC_day02/1630652796605.png" alt="1630652796605"></p><h4 id="æŸ¥è¯¢å•ä¸ª"><a href="#æŸ¥è¯¢å•ä¸ª" class="headerlink" title="æŸ¥è¯¢å•ä¸ª"></a>æŸ¥è¯¢å•ä¸ª</h4><p><code>http://localhost/books/1</code></p><p><img src="/2022/08/03/SpringMVC_day02/1630652837682.png" alt="1630652837682"></p><h4 id="æŸ¥è¯¢æ‰€æœ‰"><a href="#æŸ¥è¯¢æ‰€æœ‰" class="headerlink" title="æŸ¥è¯¢æ‰€æœ‰"></a>æŸ¥è¯¢æ‰€æœ‰</h4><p><code>http://localhost/books</code></p><p><img src="/2022/08/03/SpringMVC_day02/1630652867493.png" alt="1630652867493"></p><h2 id="2ï¼Œç»Ÿä¸€ç»“æœå°è£…"><a href="#2ï¼Œç»Ÿä¸€ç»“æœå°è£…" class="headerlink" title="2ï¼Œç»Ÿä¸€ç»“æœå°è£…"></a>2ï¼Œç»Ÿä¸€ç»“æœå°è£…</h2><h3 id="2-1-è¡¨ç°å±‚ä¸å‰ç«¯æ•°æ®ä¼ è¾“åè®®å®šä¹‰"><a href="#2-1-è¡¨ç°å±‚ä¸å‰ç«¯æ•°æ®ä¼ è¾“åè®®å®šä¹‰" class="headerlink" title="2.1 è¡¨ç°å±‚ä¸å‰ç«¯æ•°æ®ä¼ è¾“åè®®å®šä¹‰"></a>2.1 è¡¨ç°å±‚ä¸å‰ç«¯æ•°æ®ä¼ è¾“åè®®å®šä¹‰</h3><p>SSMæ•´åˆä»¥åŠåŠŸèƒ½æ¨¡å—å¼€å‘å®Œæˆåï¼Œæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åœ¨ä¸Šè¿°æ¡ˆä¾‹çš„åŸºç¡€ä¸Šåˆ†æä¸‹æœ‰å“ªäº›é—®é¢˜éœ€è¦æˆ‘ä»¬å»è§£å†³ä¸‹ã€‚é¦–å…ˆç¬¬ä¸€ä¸ªé—®é¢˜æ˜¯:</p><ul><li><p>åœ¨Controllerå±‚å¢åˆ æ”¹è¿”å›ç»™å‰ç«¯çš„æ˜¯booleanç±»å‹æ•°æ®</p><p><img src="/2022/08/03/SpringMVC_day02/1630653359533.png" alt="1630653359533"></p></li><li><p>åœ¨Controllerå±‚æŸ¥è¯¢å•ä¸ªè¿”å›ç»™å‰ç«¯çš„æ˜¯å¯¹è±¡</p><p><img src="/2022/08/03/SpringMVC_day02/1630653385377.png" alt="1630653385377"></p></li><li><p>åœ¨Controllerå±‚æŸ¥è¯¢æ‰€æœ‰è¿”å›ç»™å‰ç«¯çš„æ˜¯é›†åˆå¯¹è±¡</p><p><img src="/2022/08/03/SpringMVC_day02/1630653468887.png" alt="1630653468887"></p></li></ul><p>ç›®å‰æˆ‘ä»¬å°±å·²ç»æœ‰ä¸‰ç§æ•°æ®ç±»å‹è¿”å›ç»™å‰ç«¯ï¼Œå¦‚æœéšç€ä¸šåŠ¡çš„å¢é•¿ï¼Œæˆ‘ä»¬éœ€è¦è¿”å›çš„æ•°æ®ç±»å‹ä¼šè¶Šæ¥è¶Šå¤šã€‚å¯¹äºå‰ç«¯å¼€å‘äººå‘˜åœ¨è§£ææ•°æ®çš„æ—¶å€™å°±æ¯”è¾ƒå‡Œä¹±äº†ï¼Œæ‰€ä»¥å¯¹äºå‰ç«¯æ¥è¯´ï¼Œå¦‚æœåå°èƒ½å¤Ÿè¿”å›ä¸€ä¸ªç»Ÿä¸€çš„æ•°æ®ç»“æœï¼Œå‰ç«¯åœ¨è§£æçš„æ—¶å€™å°±å¯ä»¥æŒ‰ç…§ä¸€ç§æ–¹å¼è¿›è¡Œè§£æã€‚å¼€å‘å°±ä¼šå˜å¾—æ›´åŠ ç®€å•ã€‚</p><p>æ‰€ä»¥æˆ‘ä»¬å°±æƒ³èƒ½ä¸èƒ½å°†è¿”å›ç»“æœçš„æ•°æ®è¿›è¡Œç»Ÿä¸€ï¼Œå…·ä½“å¦‚ä½•æ¥åšï¼Œå¤§ä½“çš„æ€è·¯ä¸º:</p><ul><li>ä¸ºäº†å°è£…è¿”å›çš„ç»“æœæ•°æ®ï¼šåˆ›å»ºç»“æœæ¨¡å‹ç±»ï¼Œå°è£…æ•°æ®åˆ°dataå±æ€§ä¸­</li><li>ä¸ºäº†å°è£…è¿”å›çš„æ•°æ®æ˜¯ä½•ç§æ“ä½œåŠæ˜¯å¦æ“ä½œæˆåŠŸï¼šå°è£…æ“ä½œç»“æœåˆ°codeå±æ€§ä¸­</li><li>æ“ä½œå¤±è´¥åä¸ºäº†å°è£…è¿”å›çš„é”™è¯¯ä¿¡æ¯ï¼šå°è£…ç‰¹æ®Šæ¶ˆæ¯åˆ°message(msg)å±æ€§ä¸­</li></ul><p><img src="/2022/08/03/SpringMVC_day02/1630654293972.png" alt="1630654293972"></p><p>æ ¹æ®åˆ†æï¼Œæˆ‘ä»¬å¯ä»¥è®¾ç½®ç»Ÿä¸€æ•°æ®è¿”å›ç»“æœç±»</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Result</span>&#123;</span><br><span class="line"><span class="keyword">private</span> Object data;</span><br><span class="line"><span class="keyword">private</span> Integer code;</span><br><span class="line"><span class="keyword">private</span> String msg;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>**æ³¨æ„:**Resultç±»ååŠç±»ä¸­çš„å­—æ®µå¹¶ä¸æ˜¯å›ºå®šçš„ï¼Œå¯ä»¥æ ¹æ®éœ€è¦è‡ªè¡Œå¢å‡æä¾›è‹¥å¹²ä¸ªæ„é€ æ–¹æ³•ï¼Œæ–¹ä¾¿æ“ä½œã€‚</p><h3 id="2-2-è¡¨ç°å±‚ä¸å‰ç«¯æ•°æ®ä¼ è¾“åè®®å®ç°"><a href="#2-2-è¡¨ç°å±‚ä¸å‰ç«¯æ•°æ®ä¼ è¾“åè®®å®ç°" class="headerlink" title="2.2 è¡¨ç°å±‚ä¸å‰ç«¯æ•°æ®ä¼ è¾“åè®®å®ç°"></a>2.2 è¡¨ç°å±‚ä¸å‰ç«¯æ•°æ®ä¼ è¾“åè®®å®ç°</h3><p>å‰é¢æˆ‘ä»¬å·²ç»åˆ†æäº†å¦‚ä½•å°è£…è¿”å›ç»“æœæ•°æ®ï¼Œå…·ä½“åœ¨é¡¹ç›®ä¸­è¯¥å¦‚ä½•å®ç°ï¼Œæˆ‘ä»¬é€šè¿‡ä¸ªä¾‹å­æ¥æ“ä½œä¸€æŠŠ</p><h4 id="2-2-1-ç¯å¢ƒå‡†å¤‡"><a href="#2-2-1-ç¯å¢ƒå‡†å¤‡" class="headerlink" title="2.2.1 ç¯å¢ƒå‡†å¤‡"></a>2.2.1 ç¯å¢ƒå‡†å¤‡</h4><ul><li>åˆ›å»ºä¸€ä¸ªWebçš„Mavené¡¹ç›®</li><li>pom.xmlæ·»åŠ SSMæ•´åˆæ‰€éœ€jaråŒ…</li><li>åˆ›å»ºå¯¹åº”çš„é…ç½®ç±»</li><li>ç¼–å†™Controllerã€Serviceæ¥å£ã€Serviceå®ç°ç±»ã€Daoæ¥å£å’Œæ¨¡å‹ç±»</li><li>resourcesä¸‹æä¾›jdbc.propertiesé…ç½®æ–‡ä»¶</li></ul><p>å› ä¸ºè¿™ä¸ªé¡¹ç›®ç¯å¢ƒçš„å†…å®¹å’ŒSSMæ•´åˆçš„å†…å®¹æ˜¯ä¸€è‡´çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å°±ä¸åœ¨æŠŠä»£ç ç²˜å‡ºæ¥äº†ï¼Œå¤§å®¶åœ¨ç»ƒä¹ çš„æ—¶å€™å¯ä»¥åœ¨å‰é¢æ•´åˆçš„ä¾‹å­æ¡ˆä¾‹ç¯å¢ƒä¸‹ï¼Œè¿›è¡Œæœ¬èŠ‚å†…å®¹çš„å¼€å‘ã€‚</p><p>æœ€ç»ˆåˆ›å»ºå¥½çš„é¡¹ç›®ç»“æ„å¦‚ä¸‹:</p><p><img src="/2022/08/03/SpringMVC_day02/1630654870632.png" alt="1630654870632"></p><h4 id="2-2-2-ç»“æœå°è£…"><a href="#2-2-2-ç»“æœå°è£…" class="headerlink" title="2.2.2 ç»“æœå°è£…"></a>2.2.2 ç»“æœå°è£…</h4><p>å¯¹äºç»“æœå°è£…ï¼Œæˆ‘ä»¬åº”è¯¥æ˜¯åœ¨è¡¨ç°å±‚è¿›è¡Œå¤„ç†ï¼Œæ‰€ä»¥æˆ‘ä»¬æŠŠç»“æœç±»æ”¾åœ¨controlleråŒ…ä¸‹ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥æ”¾åœ¨domainåŒ…ï¼Œè¿™ä¸ªéƒ½æ˜¯å¯ä»¥çš„ï¼Œå…·ä½“å¦‚ä½•å®ç°ç»“æœå°è£…ï¼Œå…·ä½“çš„æ­¥éª¤ä¸ºï¼š</p><h5 id="æ­¥éª¤1ï¼šåˆ›å»ºResultç±»"><a href="#æ­¥éª¤1ï¼šåˆ›å»ºResultç±»" class="headerlink" title="æ­¥éª¤1ï¼šåˆ›å»ºResultç±»"></a>æ­¥éª¤1ï¼šåˆ›å»ºResultç±»</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Result</span> &#123;</span><br><span class="line">    <span class="comment">//æè¿°ç»Ÿä¸€æ ¼å¼ä¸­çš„æ•°æ®</span></span><br><span class="line">    <span class="keyword">private</span> Object data;</span><br><span class="line">    <span class="comment">//æè¿°ç»Ÿä¸€æ ¼å¼ä¸­çš„ç¼–ç ï¼Œç”¨äºåŒºåˆ†æ“ä½œï¼Œå¯ä»¥ç®€åŒ–é…ç½®0æˆ–1è¡¨ç¤ºæˆåŠŸå¤±è´¥</span></span><br><span class="line">    <span class="keyword">private</span> Integer code;</span><br><span class="line">    <span class="comment">//æè¿°ç»Ÿä¸€æ ¼å¼ä¸­çš„æ¶ˆæ¯ï¼Œå¯é€‰å±æ€§</span></span><br><span class="line">    <span class="keyword">private</span> String msg;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Result</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">//æ„é€ æ–¹æ³•æ˜¯æ–¹ä¾¿å¯¹è±¡çš„åˆ›å»º</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Result</span><span class="params">(Integer code,Object data)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.data = data;</span><br><span class="line">        <span class="built_in">this</span>.code = code;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">//æ„é€ æ–¹æ³•æ˜¯æ–¹ä¾¿å¯¹è±¡çš„åˆ›å»º</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Result</span><span class="params">(Integer code, Object data, String msg)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.data = data;</span><br><span class="line">        <span class="built_in">this</span>.code = code;</span><br><span class="line">        <span class="built_in">this</span>.msg = msg;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">//setter...getter...çœç•¥</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="æ­¥éª¤2ï¼šå®šä¹‰è¿”å›ç Codeç±»"><a href="#æ­¥éª¤2ï¼šå®šä¹‰è¿”å›ç Codeç±»" class="headerlink" title="æ­¥éª¤2ï¼šå®šä¹‰è¿”å›ç Codeç±»"></a>æ­¥éª¤2ï¼šå®šä¹‰è¿”å›ç Codeç±»</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//çŠ¶æ€ç </span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Code</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Integer</span> <span class="variable">SAVE_OK</span> <span class="operator">=</span> <span class="number">20011</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Integer</span> <span class="variable">DELETE_OK</span> <span class="operator">=</span> <span class="number">20021</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Integer</span> <span class="variable">UPDATE_OK</span> <span class="operator">=</span> <span class="number">20031</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Integer</span> <span class="variable">GET_OK</span> <span class="operator">=</span> <span class="number">20041</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Integer</span> <span class="variable">SAVE_ERR</span> <span class="operator">=</span> <span class="number">20010</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Integer</span> <span class="variable">DELETE_ERR</span> <span class="operator">=</span> <span class="number">20020</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Integer</span> <span class="variable">UPDATE_ERR</span> <span class="operator">=</span> <span class="number">20030</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Integer</span> <span class="variable">GET_ERR</span> <span class="operator">=</span> <span class="number">20040</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„ï¼š</strong>codeç±»ä¸­çš„å¸¸é‡è®¾è®¡ä¹Ÿä¸æ˜¯å›ºå®šçš„ï¼Œå¯ä»¥æ ¹æ®éœ€è¦è‡ªè¡Œå¢å‡ï¼Œä¾‹å¦‚å°†æŸ¥è¯¢å†è¿›è¡Œç»†åˆ†ä¸ºGET_OK,GET_ALL_OK,GET_PAGE_OKç­‰ã€‚</p><h5 id="æ­¥éª¤3ï¼šä¿®æ”¹Controllerç±»çš„è¿”å›å€¼"><a href="#æ­¥éª¤3ï¼šä¿®æ”¹Controllerç±»çš„è¿”å›å€¼" class="headerlink" title="æ­¥éª¤3ï¼šä¿®æ”¹Controllerç±»çš„è¿”å›å€¼"></a>æ­¥éª¤3ï¼šä¿®æ”¹Controllerç±»çš„è¿”å›å€¼</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//ç»Ÿä¸€æ¯ä¸€ä¸ªæ§åˆ¶å™¨æ–¹æ³•è¿”å›å€¼</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/books&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> BookService bookService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostMapping</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">save</span><span class="params">(<span class="meta">@RequestBody</span> Book book)</span> &#123;</span><br><span class="line">        <span class="type">boolean</span> <span class="variable">flag</span> <span class="operator">=</span> bookService.save(book);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Result</span>(flag ? Code.SAVE_OK:Code.SAVE_ERR,flag);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PutMapping</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">update</span><span class="params">(<span class="meta">@RequestBody</span> Book book)</span> &#123;</span><br><span class="line">        <span class="type">boolean</span> <span class="variable">flag</span> <span class="operator">=</span> bookService.update(book);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Result</span>(flag ? Code.UPDATE_OK:Code.UPDATE_ERR,flag);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@DeleteMapping(&quot;/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">delete</span><span class="params">(<span class="meta">@PathVariable</span> Integer id)</span> &#123;</span><br><span class="line">        <span class="type">boolean</span> <span class="variable">flag</span> <span class="operator">=</span> bookService.delete(id);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Result</span>(flag ? Code.DELETE_OK:Code.DELETE_ERR,flag);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">getById</span><span class="params">(<span class="meta">@PathVariable</span> Integer id)</span> &#123;</span><br><span class="line">        <span class="type">Book</span> <span class="variable">book</span> <span class="operator">=</span> bookService.getById(id);</span><br><span class="line">        <span class="type">Integer</span> <span class="variable">code</span> <span class="operator">=</span> book != <span class="literal">null</span> ? Code.GET_OK : Code.GET_ERR;</span><br><span class="line">        <span class="type">String</span> <span class="variable">msg</span> <span class="operator">=</span> book != <span class="literal">null</span> ? <span class="string">&quot;&quot;</span> : <span class="string">&quot;æ•°æ®æŸ¥è¯¢å¤±è´¥ï¼Œè¯·é‡è¯•ï¼&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Result</span>(code,book,msg);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">getAll</span><span class="params">()</span> &#123;</span><br><span class="line">        List&lt;Book&gt; bookList = bookService.getAll();</span><br><span class="line">        <span class="type">Integer</span> <span class="variable">code</span> <span class="operator">=</span> bookList != <span class="literal">null</span> ? Code.GET_OK : Code.GET_ERR;</span><br><span class="line">        <span class="type">String</span> <span class="variable">msg</span> <span class="operator">=</span> bookList != <span class="literal">null</span> ? <span class="string">&quot;&quot;</span> : <span class="string">&quot;æ•°æ®æŸ¥è¯¢å¤±è´¥ï¼Œè¯·é‡è¯•ï¼&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Result</span>(code,bookList,msg);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="æ­¥éª¤4ï¼šå¯åŠ¨æœåŠ¡æµ‹è¯•"><a href="#æ­¥éª¤4ï¼šå¯åŠ¨æœåŠ¡æµ‹è¯•" class="headerlink" title="æ­¥éª¤4ï¼šå¯åŠ¨æœåŠ¡æµ‹è¯•"></a>æ­¥éª¤4ï¼šå¯åŠ¨æœåŠ¡æµ‹è¯•</h5><p><img src="/2022/08/03/SpringMVC_day02/1630656326477.png" alt="1630656326477"></p><p>è‡³æ­¤ï¼Œæˆ‘ä»¬çš„è¿”å›ç»“æœå°±å·²ç»èƒ½ä»¥ä¸€ç§ç»Ÿä¸€çš„æ ¼å¼è¿”å›ç»™å‰ç«¯ã€‚å‰ç«¯æ ¹æ®è¿”å›çš„ç»“æœï¼Œå…ˆä»ä¸­è·å–<code>code</code>,æ ¹æ®codeåˆ¤æ–­ï¼Œå¦‚æœæˆåŠŸåˆ™å–<code>data</code>å±æ€§çš„å€¼ï¼Œå¦‚æœå¤±è´¥ï¼Œåˆ™å–<code>msg</code>ä¸­çš„å€¼åšæç¤ºã€‚</p><h2 id="3ï¼Œç»Ÿä¸€å¼‚å¸¸å¤„ç†"><a href="#3ï¼Œç»Ÿä¸€å¼‚å¸¸å¤„ç†" class="headerlink" title="3ï¼Œç»Ÿä¸€å¼‚å¸¸å¤„ç†"></a>3ï¼Œç»Ÿä¸€å¼‚å¸¸å¤„ç†</h2><h3 id="3-1-é—®é¢˜æè¿°"><a href="#3-1-é—®é¢˜æè¿°" class="headerlink" title="3.1 é—®é¢˜æè¿°"></a>3.1 é—®é¢˜æè¿°</h3><p>åœ¨è®²è§£è¿™ä¸€éƒ¨åˆ†çŸ¥è¯†ç‚¹ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥æ¼”ç¤ºä¸ªæ•ˆæœï¼Œä¿®æ”¹BookControllerç±»çš„<code>getById</code>æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/&#123;id&#125;&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Result <span class="title function_">getById</span><span class="params">(<span class="meta">@PathVariable</span> Integer id)</span> &#123;</span><br><span class="line">    <span class="comment">//æ‰‹åŠ¨æ·»åŠ ä¸€ä¸ªé”™è¯¯ä¿¡æ¯</span></span><br><span class="line">    <span class="keyword">if</span>(id==<span class="number">1</span>)&#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>/<span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">Book</span> <span class="variable">book</span> <span class="operator">=</span> bookService.getById(id);</span><br><span class="line">    <span class="type">Integer</span> <span class="variable">code</span> <span class="operator">=</span> book != <span class="literal">null</span> ? Code.GET_OK : Code.GET_ERR;</span><br><span class="line">    <span class="type">String</span> <span class="variable">msg</span> <span class="operator">=</span> book != <span class="literal">null</span> ? <span class="string">&quot;&quot;</span> : <span class="string">&quot;æ•°æ®æŸ¥è¯¢å¤±è´¥ï¼Œè¯·é‡è¯•ï¼&quot;</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Result</span>(code,book,msg);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é‡æ–°å¯åŠ¨è¿è¡Œé¡¹ç›®ï¼Œä½¿ç”¨PostManå‘é€è¯·æ±‚ï¼Œå½“ä¼ å…¥çš„idä¸º1ï¼Œåˆ™ä¼šå‡ºç°å¦‚ä¸‹æ•ˆæœï¼š</p><p><img src="/2022/08/03/SpringMVC_day02/1630656982337.png" alt="1630656982337"></p><p>å‰ç«¯æ¥æ”¶åˆ°è¿™ä¸ªä¿¡æ¯åå’Œä¹‹å‰æˆ‘ä»¬çº¦å®šçš„æ ¼å¼ä¸ä¸€è‡´ï¼Œè¿™ä¸ªé—®é¢˜è¯¥å¦‚ä½•è§£å†³?</p><p>åœ¨è§£å†³é—®é¢˜ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹å¼‚å¸¸çš„ç§ç±»åŠå‡ºç°å¼‚å¸¸çš„åŸå› :</p><ul><li><strong>æ¡†æ¶å†…éƒ¨æŠ›å‡ºçš„å¼‚å¸¸ï¼š</strong>å› ä½¿ç”¨ä¸åˆè§„å¯¼è‡´</li><li><strong>æ•°æ®å±‚æŠ›å‡ºçš„å¼‚å¸¸ï¼š</strong>å› å¤–éƒ¨æœåŠ¡å™¨æ•…éšœå¯¼è‡´ï¼ˆä¾‹å¦‚ï¼šæœåŠ¡å™¨è®¿é—®è¶…æ—¶ï¼‰</li><li><strong>ä¸šåŠ¡å±‚æŠ›å‡ºçš„å¼‚å¸¸ï¼š</strong>å› ä¸šåŠ¡é€»è¾‘ä¹¦å†™é”™è¯¯å¯¼è‡´ï¼ˆä¾‹å¦‚ï¼šéå†ä¸šåŠ¡ä¹¦å†™æ“ä½œï¼Œå¯¼è‡´ç´¢å¼•å¼‚å¸¸ç­‰ï¼‰</li><li><strong>è¡¨ç°å±‚æŠ›å‡ºçš„å¼‚å¸¸ï¼š</strong>å› æ•°æ®æ”¶é›†ã€æ ¡éªŒç­‰è§„åˆ™å¯¼è‡´ï¼ˆä¾‹å¦‚ï¼šä¸åŒ¹é…çš„æ•°æ®ç±»å‹é—´å¯¼è‡´å¼‚å¸¸ï¼‰</li><li><strong>å·¥å…·ç±»æŠ›å‡ºçš„å¼‚å¸¸ï¼š</strong>å› å·¥å…·ç±»ä¹¦å†™ä¸ä¸¥è°¨ä¸å¤Ÿå¥å£®å¯¼è‡´ï¼ˆä¾‹å¦‚ï¼šå¿…è¦é‡Šæ”¾çš„è¿æ¥é•¿æœŸæœªé‡Šæ”¾ç­‰ï¼‰</li></ul><p>çœ‹å®Œä¸Šé¢è¿™äº›å‡ºç°å¼‚å¸¸çš„ä½ç½®ï¼Œä½ ä¼šå‘ç°ï¼Œåœ¨æˆ‘ä»¬å¼€å‘çš„ä»»ä½•ä¸€ä¸ªä½ç½®éƒ½æœ‰å¯èƒ½å‡ºç°å¼‚å¸¸ï¼Œè€Œä¸”è¿™äº›å¼‚å¸¸æ˜¯ä¸èƒ½é¿å…çš„ã€‚æ‰€ä»¥æˆ‘ä»¬å°±å¾—å°†å¼‚å¸¸è¿›è¡Œå¤„ç†ã€‚</p><p><strong>æ€è€ƒ</strong></p><ol><li><p>å„ä¸ªå±‚çº§å‡å‡ºç°å¼‚å¸¸ï¼Œå¼‚å¸¸å¤„ç†ä»£ç ä¹¦å†™åœ¨å“ªä¸€å±‚?</p><p><em>æ‰€æœ‰çš„å¼‚å¸¸å‡æŠ›å‡ºåˆ°è¡¨ç°å±‚è¿›è¡Œå¤„ç†</em></p></li><li><p>å¼‚å¸¸çš„ç§ç±»å¾ˆå¤šï¼Œè¡¨ç°å±‚å¦‚ä½•å°†æ‰€æœ‰çš„å¼‚å¸¸éƒ½å¤„ç†åˆ°å‘¢?</p><p><em>å¼‚å¸¸åˆ†ç±»</em></p></li><li><p>è¡¨ç°å±‚å¤„ç†å¼‚å¸¸ï¼Œæ¯ä¸ªæ–¹æ³•ä¸­å•ç‹¬ä¹¦å†™ï¼Œä»£ç ä¹¦å†™é‡å·¨å¤§ä¸”æ„ä¹‰ä¸å¼ºï¼Œå¦‚ä½•è§£å†³?</p><p><em>AOP</em></p></li></ol><p>å¯¹äºä¸Šé¢è¿™äº›é—®é¢˜åŠè§£å†³æ–¹æ¡ˆï¼ŒSpringMVCå·²ç»ä¸ºæˆ‘ä»¬æä¾›äº†ä¸€å¥—è§£å†³æ–¹æ¡ˆ:</p><ul><li><p>å¼‚å¸¸å¤„ç†å™¨:</p><ul><li><p>é›†ä¸­çš„ã€ç»Ÿä¸€çš„å¤„ç†é¡¹ç›®ä¸­å‡ºç°çš„å¼‚å¸¸ã€‚</p><p><img src="/2022/08/03/SpringMVC_day02/1630657791653.png" alt="1630657791653"></p></li></ul></li></ul><h3 id="3-2-å¼‚å¸¸å¤„ç†å™¨çš„ä½¿ç”¨"><a href="#3-2-å¼‚å¸¸å¤„ç†å™¨çš„ä½¿ç”¨" class="headerlink" title="3.2 å¼‚å¸¸å¤„ç†å™¨çš„ä½¿ç”¨"></a>3.2 å¼‚å¸¸å¤„ç†å™¨çš„ä½¿ç”¨</h3><h4 id="3-2-1-ç¯å¢ƒå‡†å¤‡"><a href="#3-2-1-ç¯å¢ƒå‡†å¤‡" class="headerlink" title="3.2.1 ç¯å¢ƒå‡†å¤‡"></a>3.2.1 ç¯å¢ƒå‡†å¤‡</h4><ul><li>åˆ›å»ºä¸€ä¸ªWebçš„Mavené¡¹ç›®</li><li>pom.xmlæ·»åŠ SSMæ•´åˆæ‰€éœ€jaråŒ…</li><li>åˆ›å»ºå¯¹åº”çš„é…ç½®ç±»</li><li>ç¼–å†™Controllerã€Serviceæ¥å£ã€Serviceå®ç°ç±»ã€Daoæ¥å£å’Œæ¨¡å‹ç±»</li><li>resourcesä¸‹æä¾›jdbc.propertiesé…ç½®æ–‡ä»¶</li></ul><p>å†…å®¹å‚è€ƒå‰é¢çš„é¡¹ç›®æˆ–è€…ç›´æ¥ä½¿ç”¨å‰é¢çš„é¡¹ç›®è¿›è¡Œæœ¬èŠ‚å†…å®¹çš„å­¦ä¹ ã€‚</p><p>æœ€ç»ˆåˆ›å»ºå¥½çš„é¡¹ç›®ç»“æ„å¦‚ä¸‹:</p><p><img src="/2022/08/03/SpringMVC_day02/1630657972564.png" alt="1630657972564"></p><h4 id="3-2-2-ä½¿ç”¨æ­¥éª¤"><a href="#3-2-2-ä½¿ç”¨æ­¥éª¤" class="headerlink" title="3.2.2 ä½¿ç”¨æ­¥éª¤"></a>3.2.2 ä½¿ç”¨æ­¥éª¤</h4><h5 id="æ­¥éª¤1ï¼šåˆ›å»ºå¼‚å¸¸å¤„ç†å™¨ç±»"><a href="#æ­¥éª¤1ï¼šåˆ›å»ºå¼‚å¸¸å¤„ç†å™¨ç±»" class="headerlink" title="æ­¥éª¤1ï¼šåˆ›å»ºå¼‚å¸¸å¤„ç†å™¨ç±»"></a>æ­¥éª¤1ï¼šåˆ›å»ºå¼‚å¸¸å¤„ç†å™¨ç±»</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//@RestControllerAdviceç”¨äºæ ‡è¯†å½“å‰ç±»ä¸ºRESTé£æ ¼å¯¹åº”çš„å¼‚å¸¸å¤„ç†å™¨</span></span><br><span class="line"><span class="meta">@RestControllerAdvice</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ProjectExceptionAdvice</span> &#123;</span><br><span class="line">    <span class="comment">//é™¤äº†è‡ªå®šä¹‰çš„å¼‚å¸¸å¤„ç†å™¨ï¼Œä¿ç•™å¯¹Exceptionç±»å‹çš„å¼‚å¸¸å¤„ç†ï¼Œç”¨äºå¤„ç†éé¢„æœŸçš„å¼‚å¸¸</span></span><br><span class="line">    <span class="meta">@ExceptionHandler(Exception.class)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doException</span><span class="params">(Exception ex)</span>&#123;</span><br><span class="line">      System.out.println(<span class="string">&quot;å˜¿å˜¿,å¼‚å¸¸ä½ å“ªé‡Œè·‘ï¼&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ç¡®ä¿SpringMvcConfigèƒ½å¤Ÿæ‰«æåˆ°å¼‚å¸¸å¤„ç†å™¨ç±»</p><h5 id="æ­¥éª¤2ï¼šè®©ç¨‹åºæŠ›å‡ºå¼‚å¸¸"><a href="#æ­¥éª¤2ï¼šè®©ç¨‹åºæŠ›å‡ºå¼‚å¸¸" class="headerlink" title="æ­¥éª¤2ï¼šè®©ç¨‹åºæŠ›å‡ºå¼‚å¸¸"></a>æ­¥éª¤2ï¼šè®©ç¨‹åºæŠ›å‡ºå¼‚å¸¸</h5><p>ä¿®æ”¹<code>BookController</code>çš„getByIdæ–¹æ³•ï¼Œæ·»åŠ <code>int i = 1/0</code>.</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/&#123;id&#125;&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Result <span class="title function_">getById</span><span class="params">(<span class="meta">@PathVariable</span> Integer id)</span> &#123;</span><br><span class="line">  <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>/<span class="number">0</span>;</span><br><span class="line">    <span class="type">Book</span> <span class="variable">book</span> <span class="operator">=</span> bookService.getById(id);</span><br><span class="line">    <span class="type">Integer</span> <span class="variable">code</span> <span class="operator">=</span> book != <span class="literal">null</span> ? Code.GET_OK : Code.GET_ERR;</span><br><span class="line">    <span class="type">String</span> <span class="variable">msg</span> <span class="operator">=</span> book != <span class="literal">null</span> ? <span class="string">&quot;&quot;</span> : <span class="string">&quot;æ•°æ®æŸ¥è¯¢å¤±è´¥ï¼Œè¯·é‡è¯•ï¼&quot;</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Result</span>(code,book,msg);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="æ­¥éª¤3ï¼šè¿è¡Œç¨‹åºï¼Œæµ‹è¯•"><a href="#æ­¥éª¤3ï¼šè¿è¡Œç¨‹åºï¼Œæµ‹è¯•" class="headerlink" title="æ­¥éª¤3ï¼šè¿è¡Œç¨‹åºï¼Œæµ‹è¯•"></a>æ­¥éª¤3ï¼šè¿è¡Œç¨‹åºï¼Œæµ‹è¯•</h5><p><img src="/2022/08/03/SpringMVC_day02/1630658350945.png" alt="1630658350945"></p><p>è¯´æ˜å¼‚å¸¸å·²ç»è¢«æ‹¦æˆªå¹¶æ‰§è¡Œäº†<code>doException</code>æ–¹æ³•ã€‚</p><h5 id="å¼‚å¸¸å¤„ç†å™¨ç±»è¿”å›ç»“æœç»™å‰ç«¯"><a href="#å¼‚å¸¸å¤„ç†å™¨ç±»è¿”å›ç»“æœç»™å‰ç«¯" class="headerlink" title="å¼‚å¸¸å¤„ç†å™¨ç±»è¿”å›ç»“æœç»™å‰ç«¯"></a>å¼‚å¸¸å¤„ç†å™¨ç±»è¿”å›ç»“æœç»™å‰ç«¯</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//@RestControllerAdviceç”¨äºæ ‡è¯†å½“å‰ç±»ä¸ºRESTé£æ ¼å¯¹åº”çš„å¼‚å¸¸å¤„ç†å™¨</span></span><br><span class="line"><span class="meta">@RestControllerAdvice</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ProjectExceptionAdvice</span> &#123;</span><br><span class="line">    <span class="comment">//é™¤äº†è‡ªå®šä¹‰çš„å¼‚å¸¸å¤„ç†å™¨ï¼Œä¿ç•™å¯¹Exceptionç±»å‹çš„å¼‚å¸¸å¤„ç†ï¼Œç”¨äºå¤„ç†éé¢„æœŸçš„å¼‚å¸¸</span></span><br><span class="line">    <span class="meta">@ExceptionHandler(Exception.class)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">doException</span><span class="params">(Exception ex)</span>&#123;</span><br><span class="line">      System.out.println(<span class="string">&quot;å˜¿å˜¿,å¼‚å¸¸ä½ å“ªé‡Œè·‘ï¼&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Result</span>(<span class="number">666</span>,<span class="literal">null</span>,<span class="string">&quot;å˜¿å˜¿,å¼‚å¸¸ä½ å“ªé‡Œè·‘ï¼&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å¯åŠ¨è¿è¡Œç¨‹åºï¼Œæµ‹è¯•</p><p><img src="/2022/08/03/SpringMVC_day02/1630658606549.png" alt="1630658606549"></p><p>è‡³æ­¤ï¼Œå°±ç®—åå°æ‰§è¡Œçš„è¿‡ç¨‹ä¸­æŠ›å‡ºå¼‚å¸¸ï¼Œæœ€ç»ˆä¹Ÿèƒ½æŒ‰ç…§æˆ‘ä»¬å’Œå‰ç«¯çº¦å®šå¥½çš„æ ¼å¼è¿”å›ç»™å‰ç«¯ã€‚</p><h4 id="çŸ¥è¯†ç‚¹1ï¼š-RestControllerAdvice"><a href="#çŸ¥è¯†ç‚¹1ï¼š-RestControllerAdvice" class="headerlink" title="çŸ¥è¯†ç‚¹1ï¼š@RestControllerAdvice"></a>çŸ¥è¯†ç‚¹1ï¼š@RestControllerAdvice</h4><table><thead><tr><th>åç§°</th><th>@RestControllerAdvice</th></tr></thead><tbody><tr><td>ç±»å‹</td><td>ç±»æ³¨è§£</td></tr><tr><td>ä½ç½®</td><td>Resté£æ ¼å¼€å‘çš„æ§åˆ¶å™¨å¢å¼ºç±»å®šä¹‰ä¸Šæ–¹</td></tr><tr><td>ä½œç”¨</td><td>ä¸ºResté£æ ¼å¼€å‘çš„æ§åˆ¶å™¨ç±»åšå¢å¼º</td></tr></tbody></table><p><strong>è¯´æ˜ï¼š</strong>æ­¤æ³¨è§£è‡ªå¸¦<code>@ResponseBody</code>æ³¨è§£ä¸<code>@Component</code>æ³¨è§£ï¼Œå…·å¤‡å¯¹åº”çš„åŠŸèƒ½</p><p><img src="/2022/08/03/SpringMVC_day02/1630659060451.png" alt="1630659060451"></p><h4 id="çŸ¥è¯†ç‚¹2ï¼š-ExceptionHandler"><a href="#çŸ¥è¯†ç‚¹2ï¼š-ExceptionHandler" class="headerlink" title="çŸ¥è¯†ç‚¹2ï¼š@ExceptionHandler"></a>çŸ¥è¯†ç‚¹2ï¼š@ExceptionHandler</h4><table><thead><tr><th>åç§°</th><th>@ExceptionHandler</th></tr></thead><tbody><tr><td>ç±»å‹</td><td>æ–¹æ³•æ³¨è§£</td></tr><tr><td>ä½ç½®</td><td>ä¸“ç”¨äºå¼‚å¸¸å¤„ç†çš„æ§åˆ¶å™¨æ–¹æ³•ä¸Šæ–¹</td></tr><tr><td>ä½œç”¨</td><td>è®¾ç½®æŒ‡å®šå¼‚å¸¸çš„å¤„ç†æ–¹æ¡ˆï¼ŒåŠŸèƒ½ç­‰åŒäºæ§åˆ¶å™¨æ–¹æ³•ï¼Œ<br>å‡ºç°å¼‚å¸¸åç»ˆæ­¢åŸå§‹æ§åˆ¶å™¨æ‰§è¡Œ,å¹¶è½¬å…¥å½“å‰æ–¹æ³•æ‰§è¡Œ</td></tr></tbody></table><p><strong>è¯´æ˜ï¼š</strong>æ­¤ç±»æ–¹æ³•å¯ä»¥æ ¹æ®å¤„ç†çš„å¼‚å¸¸ä¸åŒï¼Œåˆ¶ä½œå¤šä¸ªæ–¹æ³•åˆ†åˆ«å¤„ç†å¯¹åº”çš„å¼‚å¸¸</p><h3 id="3-3-é¡¹ç›®å¼‚å¸¸å¤„ç†æ–¹æ¡ˆ"><a href="#3-3-é¡¹ç›®å¼‚å¸¸å¤„ç†æ–¹æ¡ˆ" class="headerlink" title="3.3 é¡¹ç›®å¼‚å¸¸å¤„ç†æ–¹æ¡ˆ"></a>3.3 é¡¹ç›®å¼‚å¸¸å¤„ç†æ–¹æ¡ˆ</h3><h4 id="3-3-1-å¼‚å¸¸åˆ†ç±»"><a href="#3-3-1-å¼‚å¸¸åˆ†ç±»" class="headerlink" title="3.3.1 å¼‚å¸¸åˆ†ç±»"></a>3.3.1 å¼‚å¸¸åˆ†ç±»</h4><p>å¼‚å¸¸å¤„ç†å™¨æˆ‘ä»¬å·²ç»èƒ½å¤Ÿä½¿ç”¨äº†ï¼Œé‚£ä¹ˆåœ¨å’±ä»¬çš„é¡¹ç›®ä¸­è¯¥å¦‚ä½•æ¥å¤„ç†å¼‚å¸¸å‘¢?</p><p>å› ä¸ºå¼‚å¸¸çš„ç§ç±»æœ‰å¾ˆå¤šï¼Œå¦‚æœæ¯ä¸€ä¸ªå¼‚å¸¸éƒ½å¯¹åº”ä¸€ä¸ª@ExceptionHandlerï¼Œé‚£å¾—å†™å¤šå°‘ä¸ªæ–¹æ³•æ¥å¤„ç†å„è‡ªçš„å¼‚å¸¸ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨å¤„ç†å¼‚å¸¸ä¹‹å‰ï¼Œéœ€è¦å¯¹å¼‚å¸¸è¿›è¡Œä¸€ä¸ªåˆ†ç±»:</p><ul><li><p>ä¸šåŠ¡å¼‚å¸¸ï¼ˆBusinessExceptionï¼‰</p><ul><li><p>è§„èŒƒçš„ç”¨æˆ·è¡Œä¸ºäº§ç”Ÿçš„å¼‚å¸¸</p><ul><li><p>ç”¨æˆ·åœ¨é¡µé¢è¾“å…¥å†…å®¹çš„æ—¶å€™æœªæŒ‰ç…§æŒ‡å®šæ ¼å¼è¿›è¡Œæ•°æ®å¡«å†™ï¼Œå¦‚åœ¨å¹´é¾„æ¡†è¾“å…¥çš„æ˜¯å­—ç¬¦ä¸²</p><p><img src="/2022/08/03/SpringMVC_day02/1630659599983.png" alt="1630659599983"></p></li></ul></li><li><p>ä¸è§„èŒƒçš„ç”¨æˆ·è¡Œä¸ºæ“ä½œäº§ç”Ÿçš„å¼‚å¸¸</p><ul><li><p>å¦‚ç”¨æˆ·æ•…æ„ä¼ é€’é”™è¯¯æ•°æ®</p><p><img src="/2022/08/03/SpringMVC_day02/1630659622958.png" alt="1630659622958"></p></li></ul></li></ul></li><li><p>ç³»ç»Ÿå¼‚å¸¸ï¼ˆSystemExceptionï¼‰</p><ul><li>é¡¹ç›®è¿è¡Œè¿‡ç¨‹ä¸­å¯é¢„è®¡ä½†æ— æ³•é¿å…çš„å¼‚å¸¸<ul><li>æ¯”å¦‚æ•°æ®åº“æˆ–æœåŠ¡å™¨å®•æœº</li></ul></li></ul></li><li><p>å…¶ä»–å¼‚å¸¸ï¼ˆExceptionï¼‰</p><ul><li><p>ç¼–ç¨‹äººå‘˜æœªé¢„æœŸåˆ°çš„å¼‚å¸¸ï¼Œå¦‚:ç”¨åˆ°çš„æ–‡ä»¶ä¸å­˜åœ¨</p><p><img src="/2022/08/03/SpringMVC_day02/1630659690341.png" alt="1630659690341"></p></li></ul></li></ul><p>å°†å¼‚å¸¸åˆ†ç±»ä»¥åï¼Œé’ˆå¯¹ä¸åŒç±»å‹çš„å¼‚å¸¸ï¼Œè¦æä¾›å…·ä½“çš„è§£å†³æ–¹æ¡ˆ:</p><h4 id="3-3-2-å¼‚å¸¸è§£å†³æ–¹æ¡ˆ"><a href="#3-3-2-å¼‚å¸¸è§£å†³æ–¹æ¡ˆ" class="headerlink" title="3.3.2 å¼‚å¸¸è§£å†³æ–¹æ¡ˆ"></a>3.3.2 å¼‚å¸¸è§£å†³æ–¹æ¡ˆ</h4><ul><li>ä¸šåŠ¡å¼‚å¸¸ï¼ˆBusinessExceptionï¼‰<ul><li>å‘é€å¯¹åº”æ¶ˆæ¯ä¼ é€’ç»™ç”¨æˆ·ï¼Œæé†’è§„èŒƒæ“ä½œ<ul><li>å¤§å®¶å¸¸è§çš„å°±æ˜¯æç¤ºç”¨æˆ·åå·²å­˜åœ¨æˆ–å¯†ç æ ¼å¼ä¸æ­£ç¡®ç­‰</li></ul></li></ul></li><li>ç³»ç»Ÿå¼‚å¸¸ï¼ˆSystemExceptionï¼‰<ul><li>å‘é€å›ºå®šæ¶ˆæ¯ä¼ é€’ç»™ç”¨æˆ·ï¼Œå®‰æŠšç”¨æˆ·<ul><li>ç³»ç»Ÿç¹å¿™ï¼Œè¯·ç¨åå†è¯•</li><li>ç³»ç»Ÿæ­£åœ¨ç»´æŠ¤å‡çº§ï¼Œè¯·ç¨åå†è¯•</li><li>ç³»ç»Ÿå‡ºé—®é¢˜ï¼Œè¯·è”ç³»ç³»ç»Ÿç®¡ç†å‘˜ç­‰</li></ul></li><li>å‘é€ç‰¹å®šæ¶ˆæ¯ç»™è¿ç»´äººå‘˜ï¼Œæé†’ç»´æŠ¤<ul><li>å¯ä»¥å‘é€çŸ­ä¿¡ã€é‚®ç®±æˆ–è€…æ˜¯å…¬å¸å†…éƒ¨é€šä¿¡è½¯ä»¶</li></ul></li><li>è®°å½•æ—¥å¿—<ul><li>å‘æ¶ˆæ¯å’Œè®°å½•æ—¥å¿—å¯¹ç”¨æˆ·æ¥è¯´æ˜¯ä¸å¯è§çš„ï¼Œå±äºåå°ç¨‹åº</li></ul></li></ul></li><li>å…¶ä»–å¼‚å¸¸ï¼ˆExceptionï¼‰<ul><li>å‘é€å›ºå®šæ¶ˆæ¯ä¼ é€’ç»™ç”¨æˆ·ï¼Œå®‰æŠšç”¨æˆ·</li><li>å‘é€ç‰¹å®šæ¶ˆæ¯ç»™ç¼–ç¨‹äººå‘˜ï¼Œæé†’ç»´æŠ¤ï¼ˆçº³å…¥é¢„æœŸèŒƒå›´å†…ï¼‰<ul><li>ä¸€èˆ¬æ˜¯ç¨‹åºæ²¡æœ‰è€ƒè™‘å…¨ï¼Œæ¯”å¦‚æœªåšéç©ºæ ¡éªŒç­‰</li></ul></li><li>è®°å½•æ—¥å¿—</li></ul></li></ul><h4 id="3-3-3-å¼‚å¸¸è§£å†³æ–¹æ¡ˆçš„å…·ä½“å®ç°"><a href="#3-3-3-å¼‚å¸¸è§£å†³æ–¹æ¡ˆçš„å…·ä½“å®ç°" class="headerlink" title="3.3.3 å¼‚å¸¸è§£å†³æ–¹æ¡ˆçš„å…·ä½“å®ç°"></a>3.3.3 å¼‚å¸¸è§£å†³æ–¹æ¡ˆçš„å…·ä½“å®ç°</h4><blockquote><p>æ€è·¯:</p><p>1.å…ˆé€šè¿‡è‡ªå®šä¹‰å¼‚å¸¸ï¼Œå®ŒæˆBusinessExceptionå’ŒSystemExceptionçš„å®šä¹‰</p><p>2.å°†å…¶ä»–å¼‚å¸¸åŒ…è£…æˆè‡ªå®šä¹‰å¼‚å¸¸ç±»å‹</p><p>3.åœ¨å¼‚å¸¸å¤„ç†å™¨ç±»ä¸­å¯¹ä¸åŒçš„å¼‚å¸¸è¿›è¡Œå¤„ç†</p></blockquote><h5 id="æ­¥éª¤1-è‡ªå®šä¹‰å¼‚å¸¸ç±»"><a href="#æ­¥éª¤1-è‡ªå®šä¹‰å¼‚å¸¸ç±»" class="headerlink" title="æ­¥éª¤1:è‡ªå®šä¹‰å¼‚å¸¸ç±»"></a>æ­¥éª¤1:è‡ªå®šä¹‰å¼‚å¸¸ç±»</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//è‡ªå®šä¹‰å¼‚å¸¸å¤„ç†å™¨ï¼Œç”¨äºå°è£…å¼‚å¸¸ä¿¡æ¯ï¼Œå¯¹å¼‚å¸¸è¿›è¡Œåˆ†ç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SystemException</span> <span class="keyword">extends</span> <span class="title class_">RuntimeException</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Integer code;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Integer <span class="title function_">getCode</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> code;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCode</span><span class="params">(Integer code)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.code = code;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">SystemException</span><span class="params">(Integer code, String message)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(message);</span><br><span class="line">        <span class="built_in">this</span>.code = code;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">SystemException</span><span class="params">(Integer code, String message, Throwable cause)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(message, cause);</span><br><span class="line">        <span class="built_in">this</span>.code = code;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è‡ªå®šä¹‰å¼‚å¸¸å¤„ç†å™¨ï¼Œç”¨äºå°è£…å¼‚å¸¸ä¿¡æ¯ï¼Œå¯¹å¼‚å¸¸è¿›è¡Œåˆ†ç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BusinessException</span> <span class="keyword">extends</span> <span class="title class_">RuntimeException</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Integer code;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Integer <span class="title function_">getCode</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> code;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCode</span><span class="params">(Integer code)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.code = code;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">BusinessException</span><span class="params">(Integer code, String message)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(message);</span><br><span class="line">        <span class="built_in">this</span>.code = code;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">BusinessException</span><span class="params">(Integer code, String message, Throwable cause)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(message, cause);</span><br><span class="line">        <span class="built_in">this</span>.code = code;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>è¯´æ˜:</strong></p><ul><li>è®©è‡ªå®šä¹‰å¼‚å¸¸ç±»ç»§æ‰¿<code>RuntimeException</code>çš„å¥½å¤„æ˜¯ï¼ŒåæœŸåœ¨æŠ›å‡ºè¿™ä¸¤ä¸ªå¼‚å¸¸çš„æ—¶å€™ï¼Œå°±ä¸ç”¨åœ¨tryâ€¦catchâ€¦æˆ–throwsäº†</li><li>è‡ªå®šä¹‰å¼‚å¸¸ç±»ä¸­æ·»åŠ <code>code</code>å±æ€§çš„åŸå› æ˜¯ä¸ºäº†æ›´å¥½çš„åŒºåˆ†å¼‚å¸¸æ˜¯æ¥è‡ªå“ªä¸ªä¸šåŠ¡çš„</li></ul><h5 id="æ­¥éª¤2-å°†å…¶ä»–å¼‚å¸¸åŒ…æˆè‡ªå®šä¹‰å¼‚å¸¸"><a href="#æ­¥éª¤2-å°†å…¶ä»–å¼‚å¸¸åŒ…æˆè‡ªå®šä¹‰å¼‚å¸¸" class="headerlink" title="æ­¥éª¤2:å°†å…¶ä»–å¼‚å¸¸åŒ…æˆè‡ªå®šä¹‰å¼‚å¸¸"></a>æ­¥éª¤2:å°†å…¶ä»–å¼‚å¸¸åŒ…æˆè‡ªå®šä¹‰å¼‚å¸¸</h5><p>å‡å¦‚åœ¨BookServiceImplçš„getByIdæ–¹æ³•æŠ›å¼‚å¸¸äº†ï¼Œè¯¥å¦‚ä½•æ¥åŒ…è£…å‘¢?</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> Book <span class="title function_">getById</span><span class="params">(Integer id)</span> &#123;</span><br><span class="line">    <span class="comment">//æ¨¡æ‹Ÿä¸šåŠ¡å¼‚å¸¸ï¼ŒåŒ…è£…æˆè‡ªå®šä¹‰å¼‚å¸¸</span></span><br><span class="line">    <span class="keyword">if</span>(id == <span class="number">1</span>)&#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">BusinessException</span>(Code.BUSINESS_ERR,<span class="string">&quot;è¯·ä¸è¦ä½¿ç”¨ä½ çš„æŠ€æœ¯æŒ‘æˆ˜æˆ‘çš„è€æ€§!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//æ¨¡æ‹Ÿç³»ç»Ÿå¼‚å¸¸ï¼Œå°†å¯èƒ½å‡ºç°çš„å¼‚å¸¸è¿›è¡ŒåŒ…è£…ï¼Œè½¬æ¢æˆè‡ªå®šä¹‰å¼‚å¸¸</span></span><br><span class="line">    <span class="keyword">try</span>&#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>/<span class="number">0</span>;</span><br><span class="line">    &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">SystemException</span>(Code.SYSTEM_TIMEOUT_ERR,<span class="string">&quot;æœåŠ¡å™¨è®¿é—®è¶…æ—¶ï¼Œè¯·é‡è¯•!&quot;</span>,e);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> bookDao.getById(id);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…·ä½“çš„åŒ…è£…æ–¹å¼æœ‰ï¼š</p><ul><li>æ–¹å¼ä¸€ï¼š<code>try&#123;&#125;catch()&#123;&#125;</code>åœ¨catchä¸­é‡æ–°throwæˆ‘ä»¬è‡ªå®šä¹‰å¼‚å¸¸å³å¯ã€‚</li><li>æ–¹å¼äºŒï¼šç›´æ¥throwè‡ªå®šä¹‰å¼‚å¸¸å³å¯</li></ul><p>ä¸Šé¢ä¸ºäº†ä½¿<code>code</code>çœ‹ç€æ›´ä¸“ä¸šäº›ï¼Œæˆ‘ä»¬åœ¨Codeç±»ä¸­å†æ–°å¢éœ€è¦çš„å±æ€§</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//çŠ¶æ€ç </span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Code</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Integer</span> <span class="variable">SAVE_OK</span> <span class="operator">=</span> <span class="number">20011</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Integer</span> <span class="variable">DELETE_OK</span> <span class="operator">=</span> <span class="number">20021</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Integer</span> <span class="variable">UPDATE_OK</span> <span class="operator">=</span> <span class="number">20031</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Integer</span> <span class="variable">GET_OK</span> <span class="operator">=</span> <span class="number">20041</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Integer</span> <span class="variable">SAVE_ERR</span> <span class="operator">=</span> <span class="number">20010</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Integer</span> <span class="variable">DELETE_ERR</span> <span class="operator">=</span> <span class="number">20020</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Integer</span> <span class="variable">UPDATE_ERR</span> <span class="operator">=</span> <span class="number">20030</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Integer</span> <span class="variable">GET_ERR</span> <span class="operator">=</span> <span class="number">20040</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Integer</span> <span class="variable">SYSTEM_ERR</span> <span class="operator">=</span> <span class="number">50001</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Integer</span> <span class="variable">SYSTEM_TIMEOUT_ERR</span> <span class="operator">=</span> <span class="number">50002</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Integer</span> <span class="variable">SYSTEM_UNKNOW_ERR</span> <span class="operator">=</span> <span class="number">59999</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Integer</span> <span class="variable">BUSINESS_ERR</span> <span class="operator">=</span> <span class="number">60002</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="æ­¥éª¤3ï¼šå¤„ç†å™¨ç±»ä¸­å¤„ç†è‡ªå®šä¹‰å¼‚å¸¸"><a href="#æ­¥éª¤3ï¼šå¤„ç†å™¨ç±»ä¸­å¤„ç†è‡ªå®šä¹‰å¼‚å¸¸" class="headerlink" title="æ­¥éª¤3ï¼šå¤„ç†å™¨ç±»ä¸­å¤„ç†è‡ªå®šä¹‰å¼‚å¸¸"></a>æ­¥éª¤3ï¼šå¤„ç†å™¨ç±»ä¸­å¤„ç†è‡ªå®šä¹‰å¼‚å¸¸</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//@RestControllerAdviceç”¨äºæ ‡è¯†å½“å‰ç±»ä¸ºRESTé£æ ¼å¯¹åº”çš„å¼‚å¸¸å¤„ç†å™¨</span></span><br><span class="line"><span class="meta">@RestControllerAdvice</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ProjectExceptionAdvice</span> &#123;</span><br><span class="line">    <span class="comment">//@ExceptionHandlerç”¨äºè®¾ç½®å½“å‰å¤„ç†å™¨ç±»å¯¹åº”çš„å¼‚å¸¸ç±»å‹</span></span><br><span class="line">    <span class="meta">@ExceptionHandler(SystemException.class)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">doSystemException</span><span class="params">(SystemException ex)</span>&#123;</span><br><span class="line">        <span class="comment">//è®°å½•æ—¥å¿—</span></span><br><span class="line">        <span class="comment">//å‘é€æ¶ˆæ¯ç»™è¿ç»´</span></span><br><span class="line">        <span class="comment">//å‘é€é‚®ä»¶ç»™å¼€å‘äººå‘˜,exå¯¹è±¡å‘é€ç»™å¼€å‘äººå‘˜</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Result</span>(ex.getCode(),<span class="literal">null</span>,ex.getMessage());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ExceptionHandler(BusinessException.class)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">doBusinessException</span><span class="params">(BusinessException ex)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Result</span>(ex.getCode(),<span class="literal">null</span>,ex.getMessage());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//é™¤äº†è‡ªå®šä¹‰çš„å¼‚å¸¸å¤„ç†å™¨ï¼Œä¿ç•™å¯¹Exceptionç±»å‹çš„å¼‚å¸¸å¤„ç†ï¼Œç”¨äºå¤„ç†éé¢„æœŸçš„å¼‚å¸¸</span></span><br><span class="line">    <span class="meta">@ExceptionHandler(Exception.class)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">doOtherException</span><span class="params">(Exception ex)</span>&#123;</span><br><span class="line">        <span class="comment">//è®°å½•æ—¥å¿—</span></span><br><span class="line">        <span class="comment">//å‘é€æ¶ˆæ¯ç»™è¿ç»´</span></span><br><span class="line">        <span class="comment">//å‘é€é‚®ä»¶ç»™å¼€å‘äººå‘˜,exå¯¹è±¡å‘é€ç»™å¼€å‘äººå‘˜</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Result</span>(Code.SYSTEM_UNKNOW_ERR,<span class="literal">null</span>,<span class="string">&quot;ç³»ç»Ÿç¹å¿™ï¼Œè¯·ç¨åå†è¯•ï¼&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="æ­¥éª¤4ï¼šè¿è¡Œç¨‹åº"><a href="#æ­¥éª¤4ï¼šè¿è¡Œç¨‹åº" class="headerlink" title="æ­¥éª¤4ï¼šè¿è¡Œç¨‹åº"></a>æ­¥éª¤4ï¼šè¿è¡Œç¨‹åº</h5><p>æ ¹æ®IDæŸ¥è¯¢ï¼Œ</p><p>å¦‚æœä¼ å…¥çš„å‚æ•°ä¸º1ï¼Œä¼šæŠ¥<code>BusinessException</code></p><p><img src="/2022/08/03/SpringMVC_day02/1630661162758.png" alt="1630661162758"></p><p>å¦‚æœä¼ å…¥çš„æ˜¯å…¶ä»–å‚æ•°ï¼Œä¼šæŠ¥<code>SystemException</code></p><p><img src="/2022/08/03/SpringMVC_day02/1630661192383.png" alt="1630661192383"></p><p>å¯¹äºå¼‚å¸¸æˆ‘ä»¬å°±å·²ç»å¤„ç†å®Œæˆäº†ï¼Œä¸ç®¡åå°å“ªä¸€å±‚æŠ›å‡ºå¼‚å¸¸ï¼Œéƒ½ä¼šä»¥æˆ‘ä»¬ä¸å‰ç«¯çº¦å®šå¥½çš„æ–¹å¼è¿›è¡Œè¿”å›ï¼Œå‰ç«¯åªéœ€è¦æŠŠä¿¡æ¯è·å–åˆ°ï¼Œæ ¹æ®è¿”å›çš„æ­£ç¡®ä¸å¦æ¥å±•ç¤ºä¸åŒçš„å†…å®¹å³å¯ã€‚</p><p><strong>å°ç»“</strong></p><p>ä»¥åé¡¹ç›®ä¸­çš„å¼‚å¸¸å¤„ç†æ–¹å¼ä¸º:</p><p><img src="/2022/08/03/SpringMVC_day02/1630658821746.png" alt="1630658821746"></p><h2 id="4ï¼Œå‰åå°åè®®è”è°ƒ"><a href="#4ï¼Œå‰åå°åè®®è”è°ƒ" class="headerlink" title="4ï¼Œå‰åå°åè®®è”è°ƒ"></a>4ï¼Œå‰åå°åè®®è”è°ƒ</h2><h3 id="4-1-ç¯å¢ƒå‡†å¤‡"><a href="#4-1-ç¯å¢ƒå‡†å¤‡" class="headerlink" title="4.1 ç¯å¢ƒå‡†å¤‡"></a>4.1 ç¯å¢ƒå‡†å¤‡</h3><ul><li>åˆ›å»ºä¸€ä¸ªWebçš„Mavené¡¹ç›®</li><li>pom.xmlæ·»åŠ SSMæ•´åˆæ‰€éœ€jaråŒ…</li><li>åˆ›å»ºå¯¹åº”çš„é…ç½®ç±»</li><li>ç¼–å†™Controllerã€Serviceæ¥å£ã€Serviceå®ç°ç±»ã€Daoæ¥å£å’Œæ¨¡å‹ç±»</li><li>resourcesä¸‹æä¾›jdbc.propertiesé…ç½®æ–‡ä»¶</li></ul><p>å†…å®¹å‚è€ƒå‰é¢çš„é¡¹ç›®æˆ–è€…ç›´æ¥ä½¿ç”¨å‰é¢çš„é¡¹ç›®è¿›è¡Œæœ¬èŠ‚å†…å®¹çš„å­¦ä¹ ã€‚</p><p>æœ€ç»ˆåˆ›å»ºå¥½çš„é¡¹ç›®ç»“æ„å¦‚ä¸‹:</p><p><img src="/2022/08/03/SpringMVC_day02/1630661781776.png" alt="1630661781776"></p><ol><li>å°†<code>èµ„æ–™\SSMåŠŸèƒ½é¡µé¢</code>ä¸‹é¢çš„é™æ€èµ„æºæ‹·è´åˆ°webappä¸‹ã€‚</li></ol><p><img src="/2022/08/03/SpringMVC_day02/1630663662691.png" alt="1630663662691"></p><ol start="2"><li>å› ä¸ºæ·»åŠ äº†é™æ€èµ„æºï¼ŒSpringMVCä¼šæ‹¦æˆªï¼Œæ‰€æœ‰éœ€è¦åœ¨SpringConfigçš„é…ç½®ç±»ä¸­å°†é™æ€èµ„æºè¿›è¡Œæ”¾è¡Œã€‚</li></ol><ul><li><p>æ–°å»ºSpringMvcSupport</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringMvcSupport</span> <span class="keyword">extends</span> <span class="title class_">WebMvcConfigurationSupport</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">addResourceHandlers</span><span class="params">(ResourceHandlerRegistry registry)</span> &#123;</span><br><span class="line">        registry.addResourceHandler(<span class="string">&quot;/pages/**&quot;</span>).addResourceLocations(<span class="string">&quot;/pages/&quot;</span>);</span><br><span class="line">        registry.addResourceHandler(<span class="string">&quot;/css/**&quot;</span>).addResourceLocations(<span class="string">&quot;/css/&quot;</span>);</span><br><span class="line">        registry.addResourceHandler(<span class="string">&quot;/js/**&quot;</span>).addResourceLocations(<span class="string">&quot;/js/&quot;</span>);</span><br><span class="line">        registry.addResourceHandler(<span class="string">&quot;/plugins/**&quot;</span>).addResourceLocations(<span class="string">&quot;/plugins/&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>åœ¨SpringMvcConfigä¸­æ‰«æSpringMvcSupport</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ComponentScan(&#123;&quot;com.itheima.controller&quot;,&quot;com.itheima.config&quot;&#125;)</span></span><br><span class="line"><span class="meta">@EnableWebMvc</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringMvcConfig</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p>æ¥ä¸‹æ¥æˆ‘ä»¬å°±éœ€è¦å°†æ‰€æœ‰çš„åˆ—è¡¨æŸ¥è¯¢ã€æ–°å¢ã€ä¿®æ”¹ã€åˆ é™¤ç­‰åŠŸèƒ½ä¸€ä¸ªä¸ªæ¥å®ç°ä¸‹ã€‚</p><h3 id="4-2-åˆ—è¡¨åŠŸèƒ½"><a href="#4-2-åˆ—è¡¨åŠŸèƒ½" class="headerlink" title="4.2 åˆ—è¡¨åŠŸèƒ½"></a>4.2 åˆ—è¡¨åŠŸèƒ½</h3><p><img src="/2022/08/03/SpringMVC_day02/1630670317859.png" alt="1630670317859"></p><blockquote><p>éœ€æ±‚:é¡µé¢åŠ è½½å®Œåå‘é€å¼‚æ­¥è¯·æ±‚åˆ°åå°è·å–åˆ—è¡¨æ•°æ®è¿›è¡Œå±•ç¤ºã€‚</p><p>1.æ‰¾åˆ°é¡µé¢çš„é’©å­å‡½æ•°ï¼Œ<code>created()</code></p><p>2.<code>created()</code>æ–¹æ³•ä¸­è°ƒç”¨äº†<code>this.getAll()</code>æ–¹æ³•</p><p>3.åœ¨getAll()æ–¹æ³•ä¸­ä½¿ç”¨axioså‘é€å¼‚æ­¥è¯·æ±‚ä»åå°è·å–æ•°æ®</p><p>4.è®¿é—®çš„è·¯å¾„ä¸º<code>http://localhost/books</code></p><p>5.è¿”å›æ•°æ®</p></blockquote><p>è¿”å›æ•°æ®res.dataçš„å†…å®¹å¦‚ä¸‹:</p><figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;data&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;è®¡ç®—æœºç†è®º&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Springå®æˆ˜ ç¬¬äº”ç‰ˆ&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Springå…¥é—¨ç»å…¸æ•™ç¨‹ï¼Œæ·±å…¥ç†è§£SpringåŸç†æŠ€æœ¯å†…å¹•&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;è®¡ç®—æœºç†è®º&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Spring 5æ ¸å¿ƒåŸç†ä¸30ä¸ªç±»æ‰‹å†™å®è·µ&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;åå¹´æ²‰æ·€ä¹‹ä½œï¼Œæ‰‹å†™Springç²¾åæ€æƒ³&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span>...</span><br><span class="line">    <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;code&quot;</span><span class="punctuation">:</span> <span class="number">20041</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;msg&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>å‘é€æ–¹å¼:</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title function_">getAll</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">//å‘é€ajaxè¯·æ±‚</span></span><br><span class="line">    axios.<span class="title function_">get</span>(<span class="string">&quot;/books&quot;</span>).<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">dataList</span> = res.<span class="property">data</span>.<span class="property">data</span>;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/2022/08/03/SpringMVC_day02/1630666787456.png" alt="1630666787456"></p><h3 id="4-3-æ·»åŠ åŠŸèƒ½"><a href="#4-3-æ·»åŠ åŠŸèƒ½" class="headerlink" title="4.3 æ·»åŠ åŠŸèƒ½"></a>4.3 æ·»åŠ åŠŸèƒ½</h3><p><img src="/2022/08/03/SpringMVC_day02/1630670332168.png" alt="1630670332168"></p><blockquote><p>éœ€æ±‚:å®Œæˆå›¾ç‰‡çš„æ–°å¢åŠŸèƒ½æ¨¡å—</p><p>1.æ‰¾åˆ°é¡µé¢ä¸Šçš„<code>æ–°å»º</code>æŒ‰é’®ï¼ŒæŒ‰é’®ä¸Šç»‘å®šäº†<code>@click=&quot;handleCreate()&quot;</code>æ–¹æ³•</p><p>2.åœ¨methodä¸­æ‰¾åˆ°<code>handleCreate</code>æ–¹æ³•ï¼Œæ–¹æ³•ä¸­æ‰“å¼€æ–°å¢é¢æ¿</p><p>3.æ–°å¢é¢æ¿ä¸­æ‰¾åˆ°<code>ç¡®å®š</code>æŒ‰é’®,æŒ‰é’®ä¸Šç»‘å®šäº†<code>@click=&quot;handleAdd()&quot;</code>æ–¹æ³•</p><p>4.åœ¨methodä¸­æ‰¾åˆ°<code>handleAdd</code>æ–¹æ³•</p><p>5.åœ¨æ–¹æ³•ä¸­å‘é€è¯·æ±‚å’Œæ•°æ®ï¼Œå“åº”æˆåŠŸåå°†æ–°å¢é¢æ¿å…³é—­å¹¶é‡æ–°æŸ¥è¯¢æ•°æ®</p></blockquote><p><code>handleCreate</code>æ‰“å¼€æ–°å¢é¢æ¿</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title function_">handleCreate</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">dialogFormVisible</span> = <span class="literal">true</span>;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><p><code>handleAdd</code>æ–¹æ³•å‘é€å¼‚æ­¥è¯·æ±‚å¹¶æºå¸¦æ•°æ®</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">handleAdd () &#123;</span><br><span class="line">    <span class="comment">//å‘é€ajaxè¯·æ±‚</span></span><br><span class="line">    <span class="comment">//this.formDataæ˜¯è¡¨å•ä¸­çš„æ•°æ®ï¼Œæœ€åæ˜¯ä¸€ä¸ªjsonæ•°æ®</span></span><br><span class="line">    axios.<span class="title function_">post</span>(<span class="string">&quot;/books&quot;</span>,<span class="variable language_">this</span>.<span class="property">formData</span>).<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">dialogFormVisible</span> = <span class="literal">false</span>;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">getAll</span>();</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="4-4-æ·»åŠ åŠŸèƒ½çŠ¶æ€å¤„ç†"><a href="#4-4-æ·»åŠ åŠŸèƒ½çŠ¶æ€å¤„ç†" class="headerlink" title="4.4 æ·»åŠ åŠŸèƒ½çŠ¶æ€å¤„ç†"></a>4.4 æ·»åŠ åŠŸèƒ½çŠ¶æ€å¤„ç†</h3><p>åŸºç¡€çš„æ–°å¢åŠŸèƒ½å·²ç»å®Œæˆï¼Œä½†æ˜¯è¿˜æœ‰ä¸€äº›é—®é¢˜éœ€è¦è§£å†³ä¸‹:</p><blockquote><p>éœ€æ±‚:æ–°å¢æˆåŠŸæ˜¯å…³é—­é¢æ¿ï¼Œé‡æ–°æŸ¥è¯¢æ•°æ®ï¼Œé‚£ä¹ˆæ–°å¢å¤±è´¥ä»¥åè¯¥å¦‚ä½•å¤„ç†?</p><p>1.åœ¨handlerAddæ–¹æ³•ä¸­æ ¹æ®åå°è¿”å›çš„æ•°æ®æ¥è¿›è¡Œä¸åŒçš„å¤„ç†</p><p>2.å¦‚æœåå°è¿”å›çš„æ˜¯æˆåŠŸï¼Œåˆ™æç¤ºæˆåŠŸä¿¡æ¯ï¼Œå¹¶å…³é—­é¢æ¿</p><p>3.å¦‚æœåå°è¿”å›çš„æ˜¯å¤±è´¥ï¼Œåˆ™æç¤ºé”™è¯¯ä¿¡æ¯</p></blockquote><p>(1)ä¿®æ”¹å‰ç«¯é¡µé¢</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">handleAdd () &#123;</span><br><span class="line">    <span class="comment">//å‘é€ajaxè¯·æ±‚</span></span><br><span class="line">    axios.<span class="title function_">post</span>(<span class="string">&quot;/books&quot;</span>,<span class="variable language_">this</span>.<span class="property">formData</span>).<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="comment">//å¦‚æœæ“ä½œæˆåŠŸï¼Œå…³é—­å¼¹å±‚ï¼Œæ˜¾ç¤ºæ•°æ®</span></span><br><span class="line">        <span class="keyword">if</span>(res.<span class="property">data</span>.<span class="property">code</span> == <span class="number">20011</span>)&#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">dialogFormVisible</span> = <span class="literal">false</span>;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">&quot;æ·»åŠ æˆåŠŸ&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(res.<span class="property">data</span>.<span class="property">code</span> == <span class="number">20010</span>)&#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(<span class="string">&quot;æ·»åŠ å¤±è´¥&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(res.<span class="property">data</span>.<span class="property">msg</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;).<span class="title function_">finally</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">getAll</span>();</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>(2)åå°è¿”å›æ“ä½œç»“æœï¼Œå°†Daoå±‚çš„å¢åˆ æ”¹æ–¹æ³•è¿”å›å€¼ä»<code>void</code>æ”¹æˆ<code>int</code></p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">BookDao</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//    @Insert(&quot;insert into tbl_book values(null,#&#123;type&#125;,#&#123;name&#125;,#&#123;description&#125;)&quot;)</span></span><br><span class="line">    <span class="meta">@Insert(&quot;insert into tbl_book (type,name,description) values(#&#123;type&#125;,#&#123;name&#125;,#&#123;description&#125;)&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">save</span><span class="params">(Book book)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Update(&quot;update tbl_book set type = #&#123;type&#125;, name = #&#123;name&#125;, description = #&#123;description&#125; where id = #&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">update</span><span class="params">(Book book)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Delete(&quot;delete from tbl_book where id = #&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">delete</span><span class="params">(Integer id)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Select(&quot;select * from tbl_book where id = #&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Book <span class="title function_">getById</span><span class="params">(Integer id)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Select(&quot;select * from tbl_book&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;Book&gt; <span class="title function_">getAll</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>(3)åœ¨BookServiceImplä¸­ï¼Œå¢åˆ æ”¹æ–¹æ³•æ ¹æ®DAOçš„è¿”å›å€¼æ¥å†³å®šè¿”å›true&#x2F;false</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">BookService</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> BookDao bookDao;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">save</span><span class="params">(Book book)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> bookDao.save(book) &gt; <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">update</span><span class="params">(Book book)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> bookDao.update(book) &gt; <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">delete</span><span class="params">(Integer id)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> bookDao.delete(id) &gt; <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Book <span class="title function_">getById</span><span class="params">(Integer id)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(id == <span class="number">1</span>)&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">BusinessException</span>(Code.BUSINESS_ERR,<span class="string">&quot;è¯·ä¸è¦ä½¿ç”¨ä½ çš„æŠ€æœ¯æŒ‘æˆ˜æˆ‘çš„è€æ€§!&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"><span class="comment">//        //å°†å¯èƒ½å‡ºç°çš„å¼‚å¸¸è¿›è¡ŒåŒ…è£…ï¼Œè½¬æ¢æˆè‡ªå®šä¹‰å¼‚å¸¸</span></span><br><span class="line"><span class="comment">//        try&#123;</span></span><br><span class="line"><span class="comment">//            int i = 1/0;</span></span><br><span class="line"><span class="comment">//        &#125;catch (Exception e)&#123;</span></span><br><span class="line"><span class="comment">//            throw new SystemException(Code.SYSTEM_TIMEOUT_ERR,&quot;æœåŠ¡å™¨è®¿é—®è¶…æ—¶ï¼Œè¯·é‡è¯•!&quot;,e);</span></span><br><span class="line"><span class="comment">//        &#125;</span></span><br><span class="line">        <span class="keyword">return</span> bookDao.getById(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> List&lt;Book&gt; <span class="title function_">getAll</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> bookDao.getAll();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>(4)æµ‹è¯•é”™è¯¯æƒ…å†µï¼Œå°†å›¾ä¹¦ç±»åˆ«é•¿åº¦è®¾ç½®è¶…å‡ºèŒƒå›´å³å¯</p><p><img src="/2022/08/03/SpringMVC_day02/1630668954348.png" alt="1630668954348"></p><p>å¤„ç†å®Œæ–°å¢åï¼Œä¼šå‘ç°æ–°å¢è¿˜å­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼Œ</p><p>æ–°å¢æˆåŠŸåï¼Œå†æ¬¡ç‚¹å‡»<code>æ–°å¢</code>æŒ‰é’®ä¼šå‘ç°ä¹‹å‰çš„æ•°æ®è¿˜å­˜åœ¨ï¼Œè¿™ä¸ªæ—¶å€™å°±éœ€è¦åœ¨æ–°å¢çš„æ—¶å€™å°†è¡¨å•å†…å®¹æ¸…ç©ºã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title function_">resetForm</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">formData</span> = &#123;&#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">handleCreate</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">dialogFormVisible</span> = <span class="literal">true</span>;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">resetForm</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="4-5-ä¿®æ”¹åŠŸèƒ½"><a href="#4-5-ä¿®æ”¹åŠŸèƒ½" class="headerlink" title="4.5 ä¿®æ”¹åŠŸèƒ½"></a>4.5 ä¿®æ”¹åŠŸèƒ½</h3><p><img src="/2022/08/03/SpringMVC_day02/1630670367812.png" alt="1630670367812"></p><blockquote><p>éœ€æ±‚:å®Œæˆå›¾ä¹¦ä¿¡æ¯çš„ä¿®æ”¹åŠŸèƒ½</p><p>1.æ‰¾åˆ°é¡µé¢ä¸­çš„<code>ç¼–è¾‘</code>æŒ‰é’®ï¼Œè¯¥æŒ‰é’®ç»‘å®šäº†<code>@click=&quot;handleUpdate(scope.row)&quot;</code></p><p>2.åœ¨methodçš„<code>handleUpdate</code>æ–¹æ³•ä¸­å‘é€å¼‚æ­¥è¯·æ±‚æ ¹æ®IDæŸ¥è¯¢å›¾ä¹¦ä¿¡æ¯</p><p>3.æ ¹æ®åå°è¿”å›çš„ç»“æœï¼Œåˆ¤æ–­æ˜¯å¦æŸ¥è¯¢æˆåŠŸ</p><p>â€‹å¦‚æœæŸ¥è¯¢æˆåŠŸæ‰“å¼€ä¿®æ”¹é¢æ¿å›æ˜¾æ•°æ®ï¼Œå¦‚æœå¤±è´¥æç¤ºé”™è¯¯ä¿¡æ¯</p><p>4.ä¿®æ”¹å®Œæˆåæ‰¾åˆ°ä¿®æ”¹é¢æ¿çš„<code>ç¡®å®š</code>æŒ‰é’®ï¼Œè¯¥æŒ‰é’®ç»‘å®šäº†<code>@click=&quot;handleEdit()&quot;</code></p><p>5.åœ¨methodçš„<code>handleEdit</code>æ–¹æ³•ä¸­å‘é€å¼‚æ­¥è¯·æ±‚æäº¤ä¿®æ”¹æ•°æ®</p><p>6.æ ¹æ®åå°è¿”å›çš„ç»“æœï¼Œåˆ¤æ–­æ˜¯å¦ä¿®æ”¹æˆåŠŸ</p><p>â€‹å¦‚æœæˆåŠŸæç¤ºé”™è¯¯ä¿¡æ¯ï¼Œå…³é—­ä¿®æ”¹é¢æ¿ï¼Œé‡æ–°æŸ¥è¯¢æ•°æ®ï¼Œå¦‚æœå¤±è´¥æç¤ºé”™è¯¯ä¿¡æ¯</p></blockquote><p>scope.rowä»£è¡¨çš„æ˜¯å½“å‰è¡Œçš„è¡Œæ•°æ®ï¼Œä¹Ÿå°±æ˜¯è¯´,scope.rowå°±æ˜¯é€‰ä¸­è¡Œå¯¹åº”çš„jsonæ•°æ®ï¼Œå¦‚ä¸‹:</p><figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;è®¡ç®—æœºç†è®º&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Springå®æˆ˜ ç¬¬äº”ç‰ˆ&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Springå…¥é—¨ç»å…¸æ•™ç¨‹ï¼Œæ·±å…¥ç†è§£SpringåŸç†æŠ€æœ¯å†…å¹•&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>ä¿®æ”¹<code>handleUpdate</code>æ–¹æ³•</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//å¼¹å‡ºç¼–è¾‘çª—å£</span></span><br><span class="line"><span class="title function_">handleUpdate</span>(<span class="params">row</span>) &#123;</span><br><span class="line">    <span class="comment">// console.log(row);   //row.id æŸ¥è¯¢æ¡ä»¶</span></span><br><span class="line">    <span class="comment">//æŸ¥è¯¢æ•°æ®ï¼Œæ ¹æ®idæŸ¥è¯¢</span></span><br><span class="line">    axios.<span class="title function_">get</span>(<span class="string">&quot;/books/&quot;</span>+row.<span class="property">id</span>).<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(res.<span class="property">data</span>.<span class="property">code</span> == <span class="number">20041</span>)&#123;</span><br><span class="line">            <span class="comment">//å±•ç¤ºå¼¹å±‚ï¼ŒåŠ è½½æ•°æ®</span></span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">formData</span> = res.<span class="property">data</span>.<span class="property">data</span>;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">dialogFormVisible4Edit</span> = <span class="literal">true</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(res.<span class="property">data</span>.<span class="property">msg</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹<code>handleEdit</code>æ–¹æ³•</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title function_">handleEdit</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">//å‘é€ajaxè¯·æ±‚</span></span><br><span class="line">    axios.<span class="title function_">put</span>(<span class="string">&quot;/books&quot;</span>,<span class="variable language_">this</span>.<span class="property">formData</span>).<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="comment">//å¦‚æœæ“ä½œæˆåŠŸï¼Œå…³é—­å¼¹å±‚ï¼Œæ˜¾ç¤ºæ•°æ®</span></span><br><span class="line">        <span class="keyword">if</span>(res.<span class="property">data</span>.<span class="property">code</span> == <span class="number">20031</span>)&#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">dialogFormVisible4Edit</span> = <span class="literal">false</span>;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">&quot;ä¿®æ”¹æˆåŠŸ&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(res.<span class="property">data</span>.<span class="property">code</span> == <span class="number">20030</span>)&#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(<span class="string">&quot;ä¿®æ”¹å¤±è´¥&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(res.<span class="property">data</span>.<span class="property">msg</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;).<span class="title function_">finally</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">getAll</span>();</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è‡³æ­¤ä¿®æ”¹åŠŸèƒ½å°±å·²ç»å®Œæˆã€‚</p><h3 id="4-6-åˆ é™¤åŠŸèƒ½"><a href="#4-6-åˆ é™¤åŠŸèƒ½" class="headerlink" title="4.6 åˆ é™¤åŠŸèƒ½"></a>4.6 åˆ é™¤åŠŸèƒ½</h3><p><img src="/2022/08/03/SpringMVC_day02/1630673984385.png" alt="1630673984385"></p><blockquote><p>éœ€æ±‚:å®Œæˆé¡µé¢çš„åˆ é™¤åŠŸèƒ½ã€‚</p><p>1.æ‰¾åˆ°é¡µé¢çš„åˆ é™¤æŒ‰é’®ï¼ŒæŒ‰é’®ä¸Šç»‘å®šäº†<code>@click=&quot;handleDelete(scope.row)&quot;</code></p><p>2.methodçš„<code>handleDelete</code>æ–¹æ³•å¼¹å‡ºæç¤ºæ¡†</p><p>3.ç”¨æˆ·ç‚¹å‡»å–æ¶ˆ,æç¤ºæ“ä½œå·²ç»è¢«å–æ¶ˆã€‚</p><p>4.ç”¨æˆ·ç‚¹å‡»ç¡®å®šï¼Œå‘é€å¼‚æ­¥è¯·æ±‚å¹¶æºå¸¦éœ€è¦åˆ é™¤æ•°æ®çš„ä¸»é”®ID</p><p>5.æ ¹æ®åå°è¿”å›ç»“æœåšä¸åŒçš„æ“ä½œ</p><p>â€‹å¦‚æœè¿”å›æˆåŠŸï¼Œæç¤ºæˆåŠŸä¿¡æ¯ï¼Œå¹¶é‡æ–°æŸ¥è¯¢æ•°æ®</p><p>â€‹å¦‚æœè¿”å›å¤±è´¥ï¼Œæç¤ºé”™è¯¯ä¿¡æ¯ï¼Œå¹¶é‡æ–°æŸ¥è¯¢æ•°æ®</p></blockquote><p>ä¿®æ”¹<code>handleDelete</code>æ–¹æ³•</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title function_">handleDelete</span>(<span class="params">row</span>) &#123;</span><br><span class="line">    <span class="comment">//1.å¼¹å‡ºæç¤ºæ¡†</span></span><br><span class="line">    <span class="variable language_">this</span>.$confirm(<span class="string">&quot;æ­¤æ“ä½œæ°¸ä¹…åˆ é™¤å½“å‰æ•°æ®ï¼Œæ˜¯å¦ç»§ç»­ï¼Ÿ&quot;</span>,<span class="string">&quot;æç¤º&quot;</span>,&#123;</span><br><span class="line">        <span class="attr">type</span>:<span class="string">&#x27;info&#x27;</span></span><br><span class="line">    &#125;).<span class="title function_">then</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">        <span class="comment">//2.åšåˆ é™¤ä¸šåŠ¡</span></span><br><span class="line">        axios.<span class="title function_">delete</span>(<span class="string">&quot;/books/&quot;</span>+row.<span class="property">id</span>).<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>)=&gt;</span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(res.<span class="property">data</span>.<span class="property">code</span> == <span class="number">20021</span>)&#123;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">&quot;åˆ é™¤æˆåŠŸ&quot;</span>);</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(<span class="string">&quot;åˆ é™¤å¤±è´¥&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;).<span class="title function_">finally</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="title function_">getAll</span>();</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;).<span class="title function_">catch</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">        <span class="comment">//3.å–æ¶ˆåˆ é™¤</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">info</span>(<span class="string">&quot;å–æ¶ˆåˆ é™¤æ“ä½œ&quot;</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥ï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªå®Œæ•´é¡µé¢</p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- é¡µé¢meta --&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>SpringMVCæ¡ˆä¾‹<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no&quot;</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- å¼•å…¥æ ·å¼ --&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;../plugins/elementui/index.css&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;../plugins/font-awesome/css/font-awesome.min.css&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;../css/style.css&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span> <span class="attr">class</span>=<span class="string">&quot;hold-transition&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;content-header&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                <span class="tag">&lt;<span class="name">h1</span>&gt;</span>å›¾ä¹¦ç®¡ç†<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;app-container&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;filter-container&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                        <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">placeholder</span>=<span class="string">&quot;å›¾ä¹¦åç§°&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;pagination.queryString&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 200px;&quot;</span> <span class="attr">class</span>=<span class="string">&quot;filter-item&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                        <span class="tag">&lt;<span class="name">el-button</span> @<span class="attr">click</span>=<span class="string">&quot;getAll()&quot;</span> <span class="attr">class</span>=<span class="string">&quot;dalfBut&quot;</span>&gt;</span>æŸ¥è¯¢<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                        <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">class</span>=<span class="string">&quot;butT&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;handleCreate()&quot;</span>&gt;</span>æ–°å»º<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-table</span> <span class="attr">size</span>=<span class="string">&quot;small&quot;</span> <span class="attr">current-row-key</span>=<span class="string">&quot;id&quot;</span> <span class="attr">:data</span>=<span class="string">&quot;dataList&quot;</span> <span class="attr">stripe</span> <span class="attr">highlight-current-row</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                        <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">type</span>=<span class="string">&quot;index&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span> <span class="attr">label</span>=<span class="string">&quot;åºå·&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                        <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;type&quot;</span> <span class="attr">label</span>=<span class="string">&quot;å›¾ä¹¦ç±»åˆ«&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                        <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;name&quot;</span> <span class="attr">label</span>=<span class="string">&quot;å›¾ä¹¦åç§°&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                        <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;description&quot;</span> <span class="attr">label</span>=<span class="string">&quot;æè¿°&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                        <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;æ“ä½œ&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                            <span class="tag">&lt;<span class="name">template</span> <span class="attr">slot-scope</span>=<span class="string">&quot;scope&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                                <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;handleUpdate(scope.row)&quot;</span>&gt;</span>ç¼–è¾‘<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                                <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;danger&quot;</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;handleDelete(scope.row)&quot;</span>&gt;</span>åˆ é™¤<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">el-table</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                    <span class="comment">&lt;!-- æ–°å¢æ ‡ç­¾å¼¹å±‚ --&gt;</span></span><br><span class="line"></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;add-form&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                        <span class="tag">&lt;<span class="name">el-dialog</span> <span class="attr">title</span>=<span class="string">&quot;æ–°å¢å›¾ä¹¦&quot;</span> <span class="attr">:visible.sync</span>=<span class="string">&quot;dialogFormVisible&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                            <span class="tag">&lt;<span class="name">el-form</span> <span class="attr">ref</span>=<span class="string">&quot;dataAddForm&quot;</span> <span class="attr">:model</span>=<span class="string">&quot;formData&quot;</span> <span class="attr">:rules</span>=<span class="string">&quot;rules&quot;</span> <span class="attr">label-position</span>=<span class="string">&quot;right&quot;</span> <span class="attr">label-width</span>=<span class="string">&quot;100px&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                                <span class="tag">&lt;<span class="name">el-row</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">el-col</span> <span class="attr">:span</span>=<span class="string">&quot;12&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                                        <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;å›¾ä¹¦ç±»åˆ«&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;type&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                                            <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;formData.type&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">                                        <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                                    <span class="tag">&lt;/<span class="name">el-col</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">el-col</span> <span class="attr">:span</span>=<span class="string">&quot;12&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                                        <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;å›¾ä¹¦åç§°&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;name&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                                            <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;formData.name&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">                                        <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                                    <span class="tag">&lt;/<span class="name">el-col</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                                <span class="tag">&lt;/<span class="name">el-row</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">                                <span class="tag">&lt;<span class="name">el-row</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">el-col</span> <span class="attr">:span</span>=<span class="string">&quot;24&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                                        <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;æè¿°&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                                            <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;formData.description&quot;</span> <span class="attr">type</span>=<span class="string">&quot;textarea&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                                        <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                                    <span class="tag">&lt;/<span class="name">el-col</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                                <span class="tag">&lt;/<span class="name">el-row</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">el-form</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                            <span class="tag">&lt;<span class="name">div</span> <span class="attr">slot</span>=<span class="string">&quot;footer&quot;</span> <span class="attr">class</span>=<span class="string">&quot;dialog-footer&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                                <span class="tag">&lt;<span class="name">el-button</span> @<span class="attr">click</span>=<span class="string">&quot;dialogFormVisible = false&quot;</span>&gt;</span>å–æ¶ˆ<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                                <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;handleAdd()&quot;</span>&gt;</span>ç¡®å®š<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">el-dialog</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                    <span class="comment">&lt;!-- ç¼–è¾‘æ ‡ç­¾å¼¹å±‚ --&gt;</span></span><br><span class="line"></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;add-form&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                        <span class="tag">&lt;<span class="name">el-dialog</span> <span class="attr">title</span>=<span class="string">&quot;ç¼–è¾‘æ£€æŸ¥é¡¹&quot;</span> <span class="attr">:visible.sync</span>=<span class="string">&quot;dialogFormVisible4Edit&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                            <span class="tag">&lt;<span class="name">el-form</span> <span class="attr">ref</span>=<span class="string">&quot;dataEditForm&quot;</span> <span class="attr">:model</span>=<span class="string">&quot;formData&quot;</span> <span class="attr">:rules</span>=<span class="string">&quot;rules&quot;</span> <span class="attr">label-position</span>=<span class="string">&quot;right&quot;</span> <span class="attr">label-width</span>=<span class="string">&quot;100px&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                                <span class="tag">&lt;<span class="name">el-row</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">el-col</span> <span class="attr">:span</span>=<span class="string">&quot;12&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                                        <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;å›¾ä¹¦ç±»åˆ«&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;type&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                                            <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;formData.type&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">                                        <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                                    <span class="tag">&lt;/<span class="name">el-col</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">el-col</span> <span class="attr">:span</span>=<span class="string">&quot;12&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                                        <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;å›¾ä¹¦åç§°&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;name&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                                            <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;formData.name&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">                                        <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                                    <span class="tag">&lt;/<span class="name">el-col</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                                <span class="tag">&lt;/<span class="name">el-row</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                                <span class="tag">&lt;<span class="name">el-row</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">el-col</span> <span class="attr">:span</span>=<span class="string">&quot;24&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                                        <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;æè¿°&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                                            <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;formData.description&quot;</span> <span class="attr">type</span>=<span class="string">&quot;textarea&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                                        <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                                    <span class="tag">&lt;/<span class="name">el-col</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                                <span class="tag">&lt;/<span class="name">el-row</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">el-form</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                            <span class="tag">&lt;<span class="name">div</span> <span class="attr">slot</span>=<span class="string">&quot;footer&quot;</span> <span class="attr">class</span>=<span class="string">&quot;dialog-footer&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                                <span class="tag">&lt;<span class="name">el-button</span> @<span class="attr">click</span>=<span class="string">&quot;dialogFormVisible4Edit = false&quot;</span>&gt;</span>å–æ¶ˆ<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                                <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;handleEdit()&quot;</span>&gt;</span>ç¡®å®š<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">el-dialog</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- å¼•å…¥ç»„ä»¶åº“ --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../js/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../plugins/elementui/index.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;../js/jquery.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../js/axios-0.18.0.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> vue = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">data</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">pagination</span>: &#123;&#125;,</span></span><br><span class="line"><span class="language-javascript"><span class="attr">dataList</span>: [],<span class="comment">//å½“å‰é¡µè¦å±•ç¤ºçš„åˆ—è¡¨æ•°æ®</span></span></span><br><span class="line"><span class="language-javascript">                <span class="attr">formData</span>: &#123;&#125;,<span class="comment">//è¡¨å•æ•°æ®</span></span></span><br><span class="line"><span class="language-javascript">                <span class="attr">dialogFormVisible</span>: <span class="literal">false</span>,<span class="comment">//æ§åˆ¶è¡¨å•æ˜¯å¦å¯è§</span></span></span><br><span class="line"><span class="language-javascript">                <span class="attr">dialogFormVisible4Edit</span>:<span class="literal">false</span>,<span class="comment">//ç¼–è¾‘è¡¨å•æ˜¯å¦å¯è§</span></span></span><br><span class="line"><span class="language-javascript">                <span class="attr">rules</span>: &#123;<span class="comment">//æ ¡éªŒè§„åˆ™</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">type</span>: [&#123; <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">&#x27;å›¾ä¹¦ç±»åˆ«ä¸ºå¿…å¡«é¡¹&#x27;</span>, <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span> &#125;],</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">name</span>: [&#123; <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">&#x27;å›¾ä¹¦åç§°ä¸ºå¿…å¡«é¡¹&#x27;</span>, <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span> &#125;]</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//é’©å­å‡½æ•°ï¼ŒVUEå¯¹è±¡åˆå§‹åŒ–å®Œæˆåè‡ªåŠ¨æ‰§è¡Œ</span></span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">created</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="title function_">getAll</span>();</span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//åˆ—è¡¨</span></span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">getAll</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">//å‘é€ajaxè¯·æ±‚</span></span></span><br><span class="line"><span class="language-javascript">                    axios.<span class="title function_">get</span>(<span class="string">&quot;/books&quot;</span>).<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>)=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="property">dataList</span> = res.<span class="property">data</span>.<span class="property">data</span>;</span></span><br><span class="line"><span class="language-javascript">                    &#125;);</span></span><br><span class="line"><span class="language-javascript">                &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//å¼¹å‡ºæ·»åŠ çª—å£</span></span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">handleCreate</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="property">dialogFormVisible</span> = <span class="literal">true</span>;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="title function_">resetForm</span>();</span></span><br><span class="line"><span class="language-javascript">                &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//é‡ç½®è¡¨å•</span></span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">resetForm</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="property">formData</span> = &#123;&#125;;</span></span><br><span class="line"><span class="language-javascript">                &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//æ·»åŠ </span></span></span><br><span class="line"><span class="language-javascript">                handleAdd () &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">//å‘é€ajaxè¯·æ±‚</span></span></span><br><span class="line"><span class="language-javascript">                    axios.<span class="title function_">post</span>(<span class="string">&quot;/books&quot;</span>,<span class="variable language_">this</span>.<span class="property">formData</span>).<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>)=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">console</span>.<span class="title function_">log</span>(res.<span class="property">data</span>);</span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">//å¦‚æœæ“ä½œæˆåŠŸï¼Œå…³é—­å¼¹å±‚ï¼Œæ˜¾ç¤ºæ•°æ®</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">if</span>(res.<span class="property">data</span>.<span class="property">code</span> == <span class="number">20011</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="variable language_">this</span>.<span class="property">dialogFormVisible</span> = <span class="literal">false</span>;</span></span><br><span class="line"><span class="language-javascript">                            <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">&quot;æ·»åŠ æˆåŠŸ&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">                        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(res.<span class="property">data</span>.<span class="property">code</span> == <span class="number">20010</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(<span class="string">&quot;æ·»åŠ å¤±è´¥&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">                        &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(res.<span class="property">data</span>.<span class="property">msg</span>);</span></span><br><span class="line"><span class="language-javascript">                        &#125;</span></span><br><span class="line"><span class="language-javascript">                    &#125;).<span class="title function_">finally</span>(<span class="function">()=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="title function_">getAll</span>();</span></span><br><span class="line"><span class="language-javascript">                    &#125;);</span></span><br><span class="line"><span class="language-javascript">                &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//å¼¹å‡ºç¼–è¾‘çª—å£</span></span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">handleUpdate</span>(<span class="params">row</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// console.log(row);   //row.id æŸ¥è¯¢æ¡ä»¶</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">//æŸ¥è¯¢æ•°æ®ï¼Œæ ¹æ®idæŸ¥è¯¢</span></span></span><br><span class="line"><span class="language-javascript">                    axios.<span class="title function_">get</span>(<span class="string">&quot;/books/&quot;</span>+row.<span class="property">id</span>).<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>)=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">// console.log(res.data.data);</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">if</span>(res.<span class="property">data</span>.<span class="property">code</span> == <span class="number">20041</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="comment">//å±•ç¤ºå¼¹å±‚ï¼ŒåŠ è½½æ•°æ®</span></span></span><br><span class="line"><span class="language-javascript">                            <span class="variable language_">this</span>.<span class="property">formData</span> = res.<span class="property">data</span>.<span class="property">data</span>;</span></span><br><span class="line"><span class="language-javascript">                            <span class="variable language_">this</span>.<span class="property">dialogFormVisible4Edit</span> = <span class="literal">true</span>;</span></span><br><span class="line"><span class="language-javascript">                        &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(res.<span class="property">data</span>.<span class="property">msg</span>);</span></span><br><span class="line"><span class="language-javascript">                        &#125;</span></span><br><span class="line"><span class="language-javascript">                    &#125;);</span></span><br><span class="line"><span class="language-javascript">                &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//ç¼–è¾‘</span></span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">handleEdit</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">//å‘é€ajaxè¯·æ±‚</span></span></span><br><span class="line"><span class="language-javascript">                    axios.<span class="title function_">put</span>(<span class="string">&quot;/books&quot;</span>,<span class="variable language_">this</span>.<span class="property">formData</span>).<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>)=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">//å¦‚æœæ“ä½œæˆåŠŸï¼Œå…³é—­å¼¹å±‚ï¼Œæ˜¾ç¤ºæ•°æ®</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">if</span>(res.<span class="property">data</span>.<span class="property">code</span> == <span class="number">20031</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="variable language_">this</span>.<span class="property">dialogFormVisible4Edit</span> = <span class="literal">false</span>;</span></span><br><span class="line"><span class="language-javascript">                            <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">&quot;ä¿®æ”¹æˆåŠŸ&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">                        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(res.<span class="property">data</span>.<span class="property">code</span> == <span class="number">20030</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(<span class="string">&quot;ä¿®æ”¹å¤±è´¥&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">                        &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(res.<span class="property">data</span>.<span class="property">msg</span>);</span></span><br><span class="line"><span class="language-javascript">                        &#125;</span></span><br><span class="line"><span class="language-javascript">                    &#125;).<span class="title function_">finally</span>(<span class="function">()=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="title function_">getAll</span>();</span></span><br><span class="line"><span class="language-javascript">                    &#125;);</span></span><br><span class="line"><span class="language-javascript">                &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// åˆ é™¤</span></span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">handleDelete</span>(<span class="params">row</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">//1.å¼¹å‡ºæç¤ºæ¡†</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.$confirm(<span class="string">&quot;æ­¤æ“ä½œæ°¸ä¹…åˆ é™¤å½“å‰æ•°æ®ï¼Œæ˜¯å¦ç»§ç»­ï¼Ÿ&quot;</span>,<span class="string">&quot;æç¤º&quot;</span>,&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">type</span>:<span class="string">&#x27;info&#x27;</span></span></span><br><span class="line"><span class="language-javascript">                    &#125;).<span class="title function_">then</span>(<span class="function">()=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">//2.åšåˆ é™¤ä¸šåŠ¡</span></span></span><br><span class="line"><span class="language-javascript">                        axios.<span class="title function_">delete</span>(<span class="string">&quot;/books/&quot;</span>+row.<span class="property">id</span>).<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>)=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">if</span>(res.<span class="property">data</span>.<span class="property">code</span> == <span class="number">20021</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                                <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">&quot;åˆ é™¤æˆåŠŸ&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">                            &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                                <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(<span class="string">&quot;åˆ é™¤å¤±è´¥&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">                            &#125;</span></span><br><span class="line"><span class="language-javascript">                        &#125;).<span class="title function_">finally</span>(<span class="function">()=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="variable language_">this</span>.<span class="title function_">getAll</span>();</span></span><br><span class="line"><span class="language-javascript">                        &#125;);</span></span><br><span class="line"><span class="language-javascript">                    &#125;).<span class="title function_">catch</span>(<span class="function">()=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">//3.å–æ¶ˆåˆ é™¤</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">info</span>(<span class="string">&quot;å–æ¶ˆåˆ é™¤æ“ä½œ&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">                    &#125;);</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="5ï¼Œæ‹¦æˆªå™¨"><a href="#5ï¼Œæ‹¦æˆªå™¨" class="headerlink" title="5ï¼Œæ‹¦æˆªå™¨"></a>5ï¼Œæ‹¦æˆªå™¨</h2><h3 id="5-1-æ‹¦æˆªå™¨æ¦‚å¿µ"><a href="#5-1-æ‹¦æˆªå™¨æ¦‚å¿µ" class="headerlink" title="5.1 æ‹¦æˆªå™¨æ¦‚å¿µ"></a>5.1 æ‹¦æˆªå™¨æ¦‚å¿µ</h3><p>è®²è§£æ‹¦æˆªå™¨çš„æ¦‚å¿µä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆçœ‹ä¸€å¼ å›¾:</p><p><img src="/2022/08/03/SpringMVC_day02/1630676280170.png" alt="1630676280170"></p><p>(1)æµè§ˆå™¨å‘é€ä¸€ä¸ªè¯·æ±‚ä¼šå…ˆåˆ°Tomcatçš„webæœåŠ¡å™¨</p><p>(2)TomcatæœåŠ¡å™¨æ¥æ”¶åˆ°è¯·æ±‚ä»¥åï¼Œä¼šå»åˆ¤æ–­è¯·æ±‚çš„æ˜¯é™æ€èµ„æºè¿˜æ˜¯åŠ¨æ€èµ„æº</p><p>(3)å¦‚æœæ˜¯é™æ€èµ„æºï¼Œä¼šç›´æ¥åˆ°Tomcatçš„é¡¹ç›®éƒ¨ç½²ç›®å½•ä¸‹å»ç›´æ¥è®¿é—®</p><p>(4)å¦‚æœæ˜¯åŠ¨æ€èµ„æºï¼Œå°±éœ€è¦äº¤ç»™é¡¹ç›®çš„åå°ä»£ç è¿›è¡Œå¤„ç†</p><p>(5)åœ¨æ‰¾åˆ°å…·ä½“çš„æ–¹æ³•ä¹‹å‰ï¼Œæˆ‘ä»¬å¯ä»¥å»é…ç½®è¿‡æ»¤å™¨(å¯ä»¥é…ç½®å¤šä¸ª)ï¼ŒæŒ‰ç…§é¡ºåºè¿›è¡Œæ‰§è¡Œ</p><p>(6)ç„¶åè¿›å…¥åˆ°åˆ°ä¸­å¤®å¤„ç†å™¨(SpringMVCä¸­çš„å†…å®¹)ï¼ŒSpringMVCä¼šæ ¹æ®é…ç½®çš„è§„åˆ™è¿›è¡Œæ‹¦æˆª</p><p>(7)å¦‚æœæ»¡è¶³è§„åˆ™ï¼Œåˆ™è¿›è¡Œå¤„ç†ï¼Œæ‰¾åˆ°å…¶å¯¹åº”çš„controllerç±»ä¸­çš„æ–¹æ³•è¿›è¡Œæ‰§è¡Œ,å®Œæˆåè¿”å›ç»“æœ</p><p>(8)å¦‚æœä¸æ»¡è¶³è§„åˆ™ï¼Œåˆ™ä¸è¿›è¡Œå¤„ç†</p><p>(9)è¿™ä¸ªæ—¶å€™ï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦åœ¨æ¯ä¸ªControlleræ–¹æ³•æ‰§è¡Œçš„å‰åæ·»åŠ ä¸šåŠ¡ï¼Œå…·ä½“è¯¥å¦‚ä½•æ¥å®ç°?</p><p>è¿™ä¸ªå°±æ˜¯æ‹¦æˆªå™¨è¦åšçš„äº‹ã€‚</p><ul><li>æ‹¦æˆªå™¨ï¼ˆInterceptorï¼‰æ˜¯ä¸€ç§åŠ¨æ€æ‹¦æˆªæ–¹æ³•è°ƒç”¨çš„æœºåˆ¶ï¼Œåœ¨SpringMVCä¸­åŠ¨æ€æ‹¦æˆªæ§åˆ¶å™¨æ–¹æ³•çš„æ‰§è¡Œ</li><li>ä½œç”¨:<ul><li>åœ¨æŒ‡å®šçš„æ–¹æ³•è°ƒç”¨å‰åæ‰§è¡Œé¢„å…ˆè®¾å®šçš„ä»£ç </li><li>é˜»æ­¢åŸå§‹æ–¹æ³•çš„æ‰§è¡Œ</li><li>æ€»ç»“ï¼šæ‹¦æˆªå™¨å°±æ˜¯ç”¨æ¥åšå¢å¼º</li></ul></li></ul><p>çœ‹å®Œä»¥åï¼Œå¤§å®¶ä¼šå‘ç°</p><ul><li>æ‹¦æˆªå™¨å’Œè¿‡æ»¤å™¨åœ¨ä½œç”¨å’Œæ‰§è¡Œé¡ºåºä¸Šä¹Ÿå¾ˆç›¸ä¼¼</li></ul><p>æ‰€ä»¥è¿™ä¸ªæ—¶å€™ï¼Œå°±æœ‰ä¸€ä¸ªé—®é¢˜éœ€è¦æ€è€ƒï¼š<strong>æ‹¦æˆªå™¨å’Œè¿‡æ»¤å™¨ä¹‹é—´çš„åŒºåˆ«æ˜¯ä»€ä¹ˆ?</strong></p><ul><li>å½’å±ä¸åŒï¼šFilterå±äºServletæŠ€æœ¯ï¼ŒInterceptorå±äºSpringMVCæŠ€æœ¯</li><li>æ‹¦æˆªå†…å®¹ä¸åŒï¼šFilterå¯¹æ‰€æœ‰è®¿é—®è¿›è¡Œå¢å¼ºï¼ŒInterceptorä»…é’ˆå¯¹SpringMVCçš„è®¿é—®è¿›è¡Œå¢å¼º</li></ul><p><img src="/2022/08/03/SpringMVC_day02/1630676903190.png" alt="1630676903190"></p><h3 id="5-2-æ‹¦æˆªå™¨å…¥é—¨æ¡ˆä¾‹"><a href="#5-2-æ‹¦æˆªå™¨å…¥é—¨æ¡ˆä¾‹" class="headerlink" title="5.2 æ‹¦æˆªå™¨å…¥é—¨æ¡ˆä¾‹"></a>5.2 æ‹¦æˆªå™¨å…¥é—¨æ¡ˆä¾‹</h3><h4 id="5-2-1-ç¯å¢ƒå‡†å¤‡"><a href="#5-2-1-ç¯å¢ƒå‡†å¤‡" class="headerlink" title="5.2.1 ç¯å¢ƒå‡†å¤‡"></a>5.2.1 ç¯å¢ƒå‡†å¤‡</h4><ul><li><p>åˆ›å»ºä¸€ä¸ªWebçš„Mavené¡¹ç›®</p></li><li><p>pom.xmlæ·»åŠ SSMæ•´åˆæ‰€éœ€jaråŒ…</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.itheima<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springmvc_12_interceptor<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>war<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.10.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-databind<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.9.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.tomcat.maven<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>tomcat7-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">port</span>&gt;</span>80<span class="tag">&lt;/<span class="name">port</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">path</span>&gt;</span>/<span class="tag">&lt;/<span class="name">path</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-compiler-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">source</span>&gt;</span>8<span class="tag">&lt;/<span class="name">source</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">target</span>&gt;</span>8<span class="tag">&lt;/<span class="name">target</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>åˆ›å»ºå¯¹åº”çš„é…ç½®ç±»</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ServletContainersInitConfig</span> <span class="keyword">extends</span> <span class="title class_">AbstractAnnotationConfigDispatcherServletInitializer</span> &#123;</span><br><span class="line">    <span class="keyword">protected</span> Class&lt;?&gt;[] getRootConfigClasses() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Class</span>[<span class="number">0</span>];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> Class&lt;?&gt;[] getServletConfigClasses() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Class</span>[]&#123;SpringMvcConfig.class&#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> String[] getServletMappings() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">String</span>[]&#123;<span class="string">&quot;/&quot;</span>&#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ä¹±ç å¤„ç†</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> Filter[] getServletFilters() &#123;</span><br><span class="line">        <span class="type">CharacterEncodingFilter</span> <span class="variable">filter</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CharacterEncodingFilter</span>();</span><br><span class="line">        filter.setEncoding(<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Filter</span>[]&#123;filter&#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ComponentScan(&#123;&quot;com.itheima.controller&quot;&#125;)</span></span><br><span class="line"><span class="meta">@EnableWebMvc</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringMvcConfig</span>&#123;</span><br><span class="line">   </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>åˆ›å»ºæ¨¡å‹ç±»Book</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Book</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">double</span> price;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">double</span> <span class="title function_">getPrice</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> price;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setPrice</span><span class="params">(<span class="type">double</span> price)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.price = price;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Book&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;ä¹¦å=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, ä»·æ ¼=&quot;</span> + price +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>ç¼–å†™Controller</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/books&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostMapping</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">save</span><span class="params">(<span class="meta">@RequestBody</span> Book book)</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;book save...&quot;</span> + book);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;&#123;&#x27;module&#x27;:&#x27;book save&#x27;&#125;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@DeleteMapping(&quot;/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">delete</span><span class="params">(<span class="meta">@PathVariable</span> Integer id)</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;book delete...&quot;</span> + id);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;&#123;&#x27;module&#x27;:&#x27;book delete&#x27;&#125;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PutMapping</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">update</span><span class="params">(<span class="meta">@RequestBody</span> Book book)</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;book update...&quot;</span>+book);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;&#123;&#x27;module&#x27;:&#x27;book update&#x27;&#125;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getById</span><span class="params">(<span class="meta">@PathVariable</span> Integer id)</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;book getById...&quot;</span>+id);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;&#123;&#x27;module&#x27;:&#x27;book getById&#x27;&#125;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getAll</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;book getAll...&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;&#123;&#x27;module&#x27;:&#x27;book getAll&#x27;&#125;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p>æœ€ç»ˆåˆ›å»ºå¥½çš„é¡¹ç›®ç»“æ„å¦‚ä¸‹:</p><p><img src="/2022/08/03/SpringMVC_day02/1630677370998.png" alt="1630677370998"></p><h4 id="5-2-2-æ‹¦æˆªå™¨å¼€å‘"><a href="#5-2-2-æ‹¦æˆªå™¨å¼€å‘" class="headerlink" title="5.2.2 æ‹¦æˆªå™¨å¼€å‘"></a>5.2.2 æ‹¦æˆªå™¨å¼€å‘</h4><h5 id="æ­¥éª¤1-åˆ›å»ºæ‹¦æˆªå™¨ç±»"><a href="#æ­¥éª¤1-åˆ›å»ºæ‹¦æˆªå™¨ç±»" class="headerlink" title="æ­¥éª¤1:åˆ›å»ºæ‹¦æˆªå™¨ç±»"></a>æ­¥éª¤1:åˆ›å»ºæ‹¦æˆªå™¨ç±»</h5><p>è®©ç±»å®ç°HandlerInterceptoræ¥å£ï¼Œé‡å†™æ¥å£ä¸­çš„ä¸‰ä¸ªæ–¹æ³•ã€‚</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="comment">//å®šä¹‰æ‹¦æˆªå™¨ç±»ï¼Œå®ç°HandlerInterceptoræ¥å£</span></span><br><span class="line"><span class="comment">//æ³¨æ„å½“å‰ç±»å¿…é¡»å—Springå®¹å™¨æ§åˆ¶</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ProjectInterceptor</span> <span class="keyword">implements</span> <span class="title class_">HandlerInterceptor</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="comment">//åŸå§‹æ–¹æ³•è°ƒç”¨å‰æ‰§è¡Œçš„å†…å®¹</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">preHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;preHandle...&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="comment">//åŸå§‹æ–¹æ³•è°ƒç”¨åæ‰§è¡Œçš„å†…å®¹</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">postHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;postHandle...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="comment">//åŸå§‹æ–¹æ³•è°ƒç”¨å®Œæˆåæ‰§è¡Œçš„å†…å®¹</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterCompletion</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;afterCompletion...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„ï¼š</strong>æ‹¦æˆªå™¨ç±»è¦è¢«SpringMVCå®¹å™¨æ‰«æåˆ°ã€‚</p><h5 id="æ­¥éª¤2ï¼šé…ç½®æ‹¦æˆªå™¨ç±»"><a href="#æ­¥éª¤2ï¼šé…ç½®æ‹¦æˆªå™¨ç±»" class="headerlink" title="æ­¥éª¤2ï¼šé…ç½®æ‹¦æˆªå™¨ç±»"></a>æ­¥éª¤2ï¼šé…ç½®æ‹¦æˆªå™¨ç±»</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringMvcSupport</span> <span class="keyword">extends</span> <span class="title class_">WebMvcConfigurationSupport</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> ProjectInterceptor projectInterceptor;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">addResourceHandlers</span><span class="params">(ResourceHandlerRegistry registry)</span> &#123;</span><br><span class="line">        registry.addResourceHandler(<span class="string">&quot;/pages/**&quot;</span>).addResourceLocations(<span class="string">&quot;/pages/&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">addInterceptors</span><span class="params">(InterceptorRegistry registry)</span> &#123;</span><br><span class="line">        <span class="comment">//é…ç½®æ‹¦æˆªå™¨</span></span><br><span class="line">        registry.addInterceptor(projectInterceptor).addPathPatterns(<span class="string">&quot;/books&quot;</span> );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="æ­¥éª¤3ï¼šSpringMVCæ·»åŠ SpringMvcSupportåŒ…æ‰«æ"><a href="#æ­¥éª¤3ï¼šSpringMVCæ·»åŠ SpringMvcSupportåŒ…æ‰«æ" class="headerlink" title="æ­¥éª¤3ï¼šSpringMVCæ·»åŠ SpringMvcSupportåŒ…æ‰«æ"></a>æ­¥éª¤3ï¼šSpringMVCæ·»åŠ SpringMvcSupportåŒ…æ‰«æ</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ComponentScan(&#123;&quot;com.itheima.controller&quot;,&quot;com.itheima.config&quot;&#125;)</span></span><br><span class="line"><span class="meta">@EnableWebMvc</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringMvcConfig</span>&#123;</span><br><span class="line">   </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="æ­¥éª¤4ï¼šè¿è¡Œç¨‹åºæµ‹è¯•"><a href="#æ­¥éª¤4ï¼šè¿è¡Œç¨‹åºæµ‹è¯•" class="headerlink" title="æ­¥éª¤4ï¼šè¿è¡Œç¨‹åºæµ‹è¯•"></a>æ­¥éª¤4ï¼šè¿è¡Œç¨‹åºæµ‹è¯•</h5><p>ä½¿ç”¨PostManå‘é€<code>http://localhost/books</code></p><p><img src="/2022/08/03/SpringMVC_day02/1630678114224.png" alt="1630678114224"></p><p>å¦‚æœå‘é€<code>http://localhost/books/100</code>ä¼šå‘ç°æ‹¦æˆªå™¨æ²¡æœ‰è¢«æ‰§è¡Œï¼ŒåŸå› æ˜¯æ‹¦æˆªå™¨çš„<code>addPathPatterns</code>æ–¹æ³•é…ç½®çš„æ‹¦æˆªè·¯å¾„æ˜¯<code>/books</code>,æˆ‘ä»¬ç°åœ¨å‘é€çš„æ˜¯<code>/books/100</code>ï¼Œæ‰€ä»¥æ²¡æœ‰åŒ¹é…ä¸Šï¼Œå› æ­¤æ²¡æœ‰æ‹¦æˆªï¼Œæ‹¦æˆªå™¨å°±ä¸ä¼šæ‰§è¡Œã€‚</p><h5 id="æ­¥éª¤5ï¼šä¿®æ”¹æ‹¦æˆªå™¨æ‹¦æˆªè§„åˆ™"><a href="#æ­¥éª¤5ï¼šä¿®æ”¹æ‹¦æˆªå™¨æ‹¦æˆªè§„åˆ™" class="headerlink" title="æ­¥éª¤5ï¼šä¿®æ”¹æ‹¦æˆªå™¨æ‹¦æˆªè§„åˆ™"></a>æ­¥éª¤5ï¼šä¿®æ”¹æ‹¦æˆªå™¨æ‹¦æˆªè§„åˆ™</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringMvcSupport</span> <span class="keyword">extends</span> <span class="title class_">WebMvcConfigurationSupport</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> ProjectInterceptor projectInterceptor;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">addResourceHandlers</span><span class="params">(ResourceHandlerRegistry registry)</span> &#123;</span><br><span class="line">        registry.addResourceHandler(<span class="string">&quot;/pages/**&quot;</span>).addResourceLocations(<span class="string">&quot;/pages/&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">addInterceptors</span><span class="params">(InterceptorRegistry registry)</span> &#123;</span><br><span class="line">        <span class="comment">//é…ç½®æ‹¦æˆªå™¨</span></span><br><span class="line">        registry.addInterceptor(projectInterceptor).addPathPatterns(<span class="string">&quot;/books&quot;</span>,<span class="string">&quot;/books/*&quot;</span> );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªæ—¶å€™ï¼Œå¦‚æœå†æ¬¡è®¿é—®<code>http://localhost/books/100</code>ï¼Œæ‹¦æˆªå™¨å°±ä¼šè¢«æ‰§è¡Œã€‚</p><p>æœ€åè¯´ä¸€ä»¶äº‹ï¼Œå°±æ˜¯æ‹¦æˆªå™¨ä¸­çš„<code>preHandler</code>æ–¹æ³•ï¼Œå¦‚æœè¿”å›true,åˆ™ä»£è¡¨æ”¾è¡Œï¼Œä¼šæ‰§è¡ŒåŸå§‹Controllerç±»ä¸­è¦è¯·æ±‚çš„æ–¹æ³•ï¼Œå¦‚æœè¿”å›falseï¼Œåˆ™ä»£è¡¨æ‹¦æˆªï¼Œåé¢çš„å°±ä¸ä¼šå†æ‰§è¡Œäº†ã€‚</p><h5 id="æ­¥éª¤6ï¼šç®€åŒ–SpringMvcSupportçš„ç¼–å†™"><a href="#æ­¥éª¤6ï¼šç®€åŒ–SpringMvcSupportçš„ç¼–å†™" class="headerlink" title="æ­¥éª¤6ï¼šç®€åŒ–SpringMvcSupportçš„ç¼–å†™"></a>æ­¥éª¤6ï¼šç®€åŒ–SpringMvcSupportçš„ç¼–å†™</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ComponentScan(&#123;&quot;com.itheima.controller&quot;&#125;)</span></span><br><span class="line"><span class="meta">@EnableWebMvc</span></span><br><span class="line"><span class="comment">//å®ç°WebMvcConfigureræ¥å£å¯ä»¥ç®€åŒ–å¼€å‘ï¼Œä½†å…·æœ‰ä¸€å®šçš„ä¾µå…¥æ€§</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringMvcConfig</span> <span class="keyword">implements</span> <span class="title class_">WebMvcConfigurer</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> ProjectInterceptor projectInterceptor;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addInterceptors</span><span class="params">(InterceptorRegistry registry)</span> &#123;</span><br><span class="line">        <span class="comment">//é…ç½®å¤šæ‹¦æˆªå™¨</span></span><br><span class="line">        registry.addInterceptor(projectInterceptor).addPathPatterns(<span class="string">&quot;/books&quot;</span>,<span class="string">&quot;/books/*&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ­¤åå’±ä»¬å°±ä¸ç”¨å†å†™<code>SpringMvcSupport</code>ç±»äº†ã€‚</p><p>æœ€åæˆ‘ä»¬æ¥çœ‹ä¸‹æ‹¦æˆªå™¨çš„æ‰§è¡Œæµç¨‹:</p><p><img src="/2022/08/03/SpringMVC_day02/1630679464294.png" alt="1630679464294"></p><p>å½“æœ‰æ‹¦æˆªå™¨åï¼Œè¯·æ±‚ä¼šå…ˆè¿›å…¥preHandleæ–¹æ³•ï¼Œ</p><p>â€‹å¦‚æœæ–¹æ³•è¿”å›trueï¼Œåˆ™æ”¾è¡Œç»§ç»­æ‰§è¡Œåé¢çš„handle[controllerçš„æ–¹æ³•]å’Œåé¢çš„æ–¹æ³•</p><p>â€‹å¦‚æœè¿”å›falseï¼Œåˆ™ç›´æ¥è·³è¿‡åé¢æ–¹æ³•çš„æ‰§è¡Œã€‚</p><h3 id="5-3-æ‹¦æˆªå™¨å‚æ•°"><a href="#5-3-æ‹¦æˆªå™¨å‚æ•°" class="headerlink" title="5.3 æ‹¦æˆªå™¨å‚æ•°"></a>5.3 æ‹¦æˆªå™¨å‚æ•°</h3><h4 id="5-3-1-å‰ç½®å¤„ç†æ–¹æ³•"><a href="#5-3-1-å‰ç½®å¤„ç†æ–¹æ³•" class="headerlink" title="5.3.1 å‰ç½®å¤„ç†æ–¹æ³•"></a>5.3.1 å‰ç½®å¤„ç†æ–¹æ³•</h4><p>åŸå§‹æ–¹æ³•ä¹‹å‰è¿è¡ŒpreHandle</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">preHandle</span><span class="params">(HttpServletRequest request,</span></span><br><span class="line"><span class="params">                         HttpServletResponse response,</span></span><br><span class="line"><span class="params">                         Object handler)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;preHandle&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>request:è¯·æ±‚å¯¹è±¡</li><li>response:å“åº”å¯¹è±¡</li><li>handler:è¢«è°ƒç”¨çš„å¤„ç†å™¨å¯¹è±¡ï¼Œæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªæ–¹æ³•å¯¹è±¡ï¼Œå¯¹åå°„ä¸­çš„Methodå¯¹è±¡è¿›è¡Œäº†å†åŒ…è£…</li></ul><p>ä½¿ç”¨requestå¯¹è±¡å¯ä»¥è·å–è¯·æ±‚æ•°æ®ä¸­çš„å†…å®¹ï¼Œå¦‚è·å–è¯·æ±‚å¤´çš„<code>Content-Type</code></p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">preHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">contentType</span> <span class="operator">=</span> request.getHeader(<span class="string">&quot;Content-Type&quot;</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;preHandle...&quot;</span>+contentType);</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨handlerå‚æ•°ï¼Œå¯ä»¥è·å–æ–¹æ³•çš„ç›¸å…³ä¿¡æ¯</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">preHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    <span class="type">HandlerMethod</span> <span class="variable">hm</span> <span class="operator">=</span> (HandlerMethod)handler;</span><br><span class="line">    <span class="type">String</span> <span class="variable">methodName</span> <span class="operator">=</span> hm.getMethod().getName();<span class="comment">//å¯ä»¥è·å–æ–¹æ³•çš„åç§°</span></span><br><span class="line">    System.out.println(<span class="string">&quot;preHandle...&quot;</span>+methodName);</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="5-3-2-åç½®å¤„ç†æ–¹æ³•"><a href="#5-3-2-åç½®å¤„ç†æ–¹æ³•" class="headerlink" title="5.3.2 åç½®å¤„ç†æ–¹æ³•"></a>5.3.2 åç½®å¤„ç†æ–¹æ³•</h4><p>åŸå§‹æ–¹æ³•è¿è¡Œåè¿è¡Œï¼Œå¦‚æœåŸå§‹æ–¹æ³•è¢«æ‹¦æˆªï¼Œåˆ™ä¸æ‰§è¡Œ  </p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">postHandle</span><span class="params">(HttpServletRequest request,</span></span><br><span class="line"><span class="params">                       HttpServletResponse response,</span></span><br><span class="line"><span class="params">                       Object handler,</span></span><br><span class="line"><span class="params">                       ModelAndView modelAndView)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;postHandle&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å‰ä¸‰ä¸ªå‚æ•°å’Œä¸Šé¢çš„æ˜¯ä¸€è‡´çš„ã€‚</p><p>modelAndView:å¦‚æœå¤„ç†å™¨æ‰§è¡Œå®Œæˆå…·æœ‰è¿”å›ç»“æœï¼Œå¯ä»¥è¯»å–åˆ°å¯¹åº”æ•°æ®ä¸é¡µé¢ä¿¡æ¯ï¼Œå¹¶è¿›è¡Œè°ƒæ•´</p><p>å› ä¸ºå’±ä»¬ç°åœ¨éƒ½æ˜¯è¿”å›jsonæ•°æ®ï¼Œæ‰€ä»¥è¯¥å‚æ•°çš„ä½¿ç”¨ç‡ä¸é«˜ã€‚</p><h4 id="5-3-3-å®Œæˆå¤„ç†æ–¹æ³•"><a href="#5-3-3-å®Œæˆå¤„ç†æ–¹æ³•" class="headerlink" title="5.3.3 å®Œæˆå¤„ç†æ–¹æ³•"></a>5.3.3 å®Œæˆå¤„ç†æ–¹æ³•</h4><p>æ‹¦æˆªå™¨æœ€åæ‰§è¡Œçš„æ–¹æ³•ï¼Œæ— è®ºåŸå§‹æ–¹æ³•æ˜¯å¦æ‰§è¡Œ</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterCompletion</span><span class="params">(HttpServletRequest request,</span></span><br><span class="line"><span class="params">                            HttpServletResponse response,</span></span><br><span class="line"><span class="params">                            Object handler,</span></span><br><span class="line"><span class="params">                            Exception ex)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;afterCompletion&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å‰ä¸‰ä¸ªå‚æ•°ä¸ä¸Šé¢çš„æ˜¯ä¸€è‡´çš„ã€‚</p><p>ex:å¦‚æœå¤„ç†å™¨æ‰§è¡Œè¿‡ç¨‹ä¸­å‡ºç°å¼‚å¸¸å¯¹è±¡ï¼Œå¯ä»¥é’ˆå¯¹å¼‚å¸¸æƒ…å†µè¿›è¡Œå•ç‹¬å¤„ç†  </p><p>å› ä¸ºæˆ‘ä»¬ç°åœ¨å·²ç»æœ‰å…¨å±€å¼‚å¸¸å¤„ç†å™¨ç±»ï¼Œæ‰€ä»¥è¯¥å‚æ•°çš„ä½¿ç”¨ç‡ä¹Ÿä¸é«˜ã€‚</p><p>è¿™ä¸‰ä¸ªæ–¹æ³•ä¸­ï¼Œæœ€å¸¸ç”¨çš„æ˜¯<code>preHandle</code>ï¼Œåœ¨è¿™ä¸ªæ–¹æ³•ä¸­å¯ä»¥é€šè¿‡è¿”å›å€¼æ¥å†³å®šæ˜¯å¦è¦è¿›è¡Œæ”¾è¡Œï¼Œæˆ‘ä»¬å¯ä»¥æŠŠä¸šåŠ¡é€»è¾‘æ”¾åœ¨è¯¥æ–¹æ³•ä¸­ï¼Œå¦‚æœæ»¡è¶³ä¸šåŠ¡åˆ™è¿”å›trueæ”¾è¡Œï¼Œä¸æ»¡è¶³åˆ™è¿”å›falseæ‹¦æˆªã€‚</p><h3 id="5-4-æ‹¦æˆªå™¨é“¾é…ç½®"><a href="#5-4-æ‹¦æˆªå™¨é“¾é…ç½®" class="headerlink" title="5.4 æ‹¦æˆªå™¨é“¾é…ç½®"></a>5.4 æ‹¦æˆªå™¨é“¾é…ç½®</h3><p>ç›®å‰ï¼Œæˆ‘ä»¬åœ¨é¡¹ç›®ä¸­åªæ·»åŠ äº†ä¸€ä¸ªæ‹¦æˆªå™¨ï¼Œå¦‚æœæœ‰å¤šä¸ªï¼Œè¯¥å¦‚ä½•é…ç½®?é…ç½®å¤šä¸ªåï¼Œæ‰§è¡Œé¡ºåºæ˜¯ä»€ä¹ˆ?</p><h4 id="5-4-1-é…ç½®å¤šä¸ªæ‹¦æˆªå™¨"><a href="#5-4-1-é…ç½®å¤šä¸ªæ‹¦æˆªå™¨" class="headerlink" title="5.4.1 é…ç½®å¤šä¸ªæ‹¦æˆªå™¨"></a>5.4.1 é…ç½®å¤šä¸ªæ‹¦æˆªå™¨</h4><h5 id="æ­¥éª¤1ï¼šåˆ›å»ºæ‹¦æˆªå™¨ç±»"><a href="#æ­¥éª¤1ï¼šåˆ›å»ºæ‹¦æˆªå™¨ç±»" class="headerlink" title="æ­¥éª¤1ï¼šåˆ›å»ºæ‹¦æˆªå™¨ç±»"></a>æ­¥éª¤1ï¼šåˆ›å»ºæ‹¦æˆªå™¨ç±»</h5><p>å®ç°æ¥å£ï¼Œå¹¶é‡å†™æ¥å£ä¸­çš„æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ProjectInterceptor2</span> <span class="keyword">implements</span> <span class="title class_">HandlerInterceptor</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">preHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;preHandle...222&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">postHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;postHandle...222&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterCompletion</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;afterCompletion...222&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="æ­¥éª¤2ï¼šé…ç½®æ‹¦æˆªå™¨ç±»-1"><a href="#æ­¥éª¤2ï¼šé…ç½®æ‹¦æˆªå™¨ç±»-1" class="headerlink" title="æ­¥éª¤2ï¼šé…ç½®æ‹¦æˆªå™¨ç±»"></a>æ­¥éª¤2ï¼šé…ç½®æ‹¦æˆªå™¨ç±»</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ComponentScan(&#123;&quot;com.itheima.controller&quot;&#125;)</span></span><br><span class="line"><span class="meta">@EnableWebMvc</span></span><br><span class="line"><span class="comment">//å®ç°WebMvcConfigureræ¥å£å¯ä»¥ç®€åŒ–å¼€å‘ï¼Œä½†å…·æœ‰ä¸€å®šçš„ä¾µå…¥æ€§</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringMvcConfig</span> <span class="keyword">implements</span> <span class="title class_">WebMvcConfigurer</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> ProjectInterceptor projectInterceptor;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> ProjectInterceptor2 projectInterceptor2;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addInterceptors</span><span class="params">(InterceptorRegistry registry)</span> &#123;</span><br><span class="line">        <span class="comment">//é…ç½®å¤šæ‹¦æˆªå™¨</span></span><br><span class="line">        registry.addInterceptor(projectInterceptor).addPathPatterns(<span class="string">&quot;/books&quot;</span>,<span class="string">&quot;/books/*&quot;</span>);</span><br><span class="line">        registry.addInterceptor(projectInterceptor2).addPathPatterns(<span class="string">&quot;/books&quot;</span>,<span class="string">&quot;/books/*&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="æ­¥éª¤3ï¼šè¿è¡Œç¨‹åºï¼Œè§‚å¯Ÿé¡ºåº"><a href="#æ­¥éª¤3ï¼šè¿è¡Œç¨‹åºï¼Œè§‚å¯Ÿé¡ºåº" class="headerlink" title="æ­¥éª¤3ï¼šè¿è¡Œç¨‹åºï¼Œè§‚å¯Ÿé¡ºåº"></a>æ­¥éª¤3ï¼šè¿è¡Œç¨‹åºï¼Œè§‚å¯Ÿé¡ºåº</h5><p><img src="/2022/08/03/SpringMVC_day02/1630680435269.png" alt="1630680435269"></p><p>æ‹¦æˆªå™¨æ‰§è¡Œçš„é¡ºåºæ˜¯å’Œé…ç½®é¡ºåºæœ‰å…³ã€‚å°±å’Œå‰é¢æ‰€æåˆ°çš„è¿ç»´äººå‘˜è¿›å…¥æœºæˆ¿çš„æ¡ˆä¾‹ï¼Œå…ˆè¿›åå‡ºã€‚</p><ul><li>å½“é…ç½®å¤šä¸ªæ‹¦æˆªå™¨æ—¶ï¼Œå½¢æˆæ‹¦æˆªå™¨é“¾</li><li>æ‹¦æˆªå™¨é“¾çš„è¿è¡Œé¡ºåºå‚ç…§æ‹¦æˆªå™¨æ·»åŠ é¡ºåºä¸ºå‡†</li><li>å½“æ‹¦æˆªå™¨ä¸­å‡ºç°å¯¹åŸå§‹å¤„ç†å™¨çš„æ‹¦æˆªï¼Œåé¢çš„æ‹¦æˆªå™¨å‡ç»ˆæ­¢è¿è¡Œ</li><li>å½“æ‹¦æˆªå™¨è¿è¡Œä¸­æ–­ï¼Œä»…è¿è¡Œé…ç½®åœ¨å‰é¢çš„æ‹¦æˆªå™¨çš„afterCompletionæ“ä½œ</li></ul><p><img src="/2022/08/03/SpringMVC_day02/1630680579735.png" alt="1630680579735"></p><p><strong>preHandle</strong>ï¼šä¸é…ç½®é¡ºåºç›¸åŒï¼Œå¿…å®šè¿è¡Œ</p><p><strong>postHandle</strong>ï¼šä¸é…ç½®é¡ºåºç›¸åï¼Œå¯èƒ½ä¸è¿è¡Œ</p><p><strong>afterCompletion</strong>ï¼šä¸é…ç½®é¡ºåºç›¸åï¼Œå¯èƒ½ä¸è¿è¡Œã€‚</p><p>è¿™ä¸ªé¡ºåºä¸å¤ªå¥½è®°ï¼Œæœ€ç»ˆåªéœ€è¦æŠŠæ¡ä½ä¸€ä¸ªåŸåˆ™å³å¯ï¼š<strong>ä»¥æœ€ç»ˆçš„è¿è¡Œç»“æœä¸ºå‡†</strong></p>]]></content>
      
      
      
        <tags>
            
            <tag> Javaå¼€å‘æ¡†æ¶ </tag>
            
            <tag> SpringMVC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringMVC--day01</title>
      <link href="/2022/08/03/SpringMVC_day01/"/>
      <url>/2022/08/03/SpringMVC_day01/</url>
      
        <content type="html"><![CDATA[<p><strong>ä»Šæ—¥å†…å®¹</strong></p><blockquote><ul><li>ç†è§£SpringMVCç›¸å…³æ¦‚å¿µ</li><li>å®ŒæˆSpringMVCçš„å…¥é—¨æ¡ˆä¾‹</li><li>å­¦ä¼šä½¿ç”¨PostManå·¥å…·å‘é€è¯·æ±‚å’Œæ•°æ®</li><li>æŒæ¡SpringMVCå¦‚ä½•æ¥æ”¶è¯·æ±‚ã€æ•°æ®å’Œå“åº”ç»“æœ</li><li>æŒæ¡RESTfulé£æ ¼åŠå…¶ä½¿ç”¨</li><li>å®ŒæˆåŸºäºRESTfulçš„æ¡ˆä¾‹ç¼–å†™</li></ul></blockquote><h2 id="0ï¼ŒSpringMVCç®€ä»‹"><a href="#0ï¼ŒSpringMVCç®€ä»‹" class="headerlink" title="0ï¼ŒSpringMVCç®€ä»‹"></a>0ï¼ŒSpringMVCç®€ä»‹</h2><p>çœ‹åˆ°SpringMVCè¿™ä¸ªåå­—æˆ‘ä»¬ä¼šå‘ç°å…¶ä¸­åŒ…å«Spring,é‚£ä¹ˆSpringMVCå’ŒSpringä¹‹é—´çš„ä¼šæœ‰å…³ç³»ä¹ˆ?ç­”æ¡ˆæ˜¯è‚¯å®šæœ‰ï¼ŒSpringMVCéš¶å±äºSpringï¼Œæ˜¯SpringæŠ€æœ¯ä¸­çš„ä¸€éƒ¨åˆ†ã€‚é‚£ä¹ˆSpringMVCåˆ°åº•æ˜¯ç”¨æ¥åšä»€ä¹ˆçš„å‘¢?</p><ul><li>å›æƒ³webé˜¶æ®µï¼Œæˆ‘ä»¬å­¦ä¹ è¿‡Servlet,è€ŒSpringMVCä¸ServletæŠ€æœ¯åŠŸèƒ½ç­‰åŒï¼Œå‡å±äºwebå±‚æˆ–è€…è¯´è¡¨ç°å±‚å¼€å‘æŠ€æœ¯ã€‚</li></ul><p>é‚£ä¹ˆæ—¢ç„¶å·²ç»æœ‰äº†Servletä¸ºä»€ä¹ˆè¿˜éœ€è¦èŠ±æ—¶é—´å†å­¦ä¹ ä¸€ä¸ªSpringMVCæŠ€æœ¯?è¦å›ç­”è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å°±éœ€è¦ææ¸…æ¥šSpringMVCä¸Servletç›¸æ¯”ï¼Œæœ‰ä»€ä¹ˆä¼˜åŠ¿:</p><p>æ¡†æ¶æˆ‘ä»¬éƒ½çŸ¥é“æ˜¯ç”¨æ¥ç®€åŒ–å¼€å‘çš„ï¼Œæ‰€ä»¥SpringMVCä¸Servletç›¸æ¯”ï¼Œå¼€å‘èµ·æ¥æ›´ç®€å•å¿«æ·ï¼Œç”¨æ›´å°‘çš„ä»£ç å®Œæˆè¡¨ç°å±‚ä»£ç çš„å¼€å‘ï¼Œé‚£ä¹ˆé—®é¢˜åˆæ¥äº†ï¼Œåˆ°åº•æœ‰å¤šç®€å•å‘¢?æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªä¾‹å­æ¥ä½“éªŒä¸€æŠŠå§ã€‚</p><p>å°†èµ„æ–™ä¸­çš„é¡¹ç›®å¯¼å…¥åˆ°IDEAä¸­ï¼Œæ‰“å¼€åæ ¼å¼å¦‚ä¸‹:</p><p><img src="/2022/08/03/SpringMVC_day01/1651590778564.png" alt="1651590778564"></p><ul><li>UserSaveServlet:ä½¿ç”¨Servletå¼€å‘çš„ç”¨æˆ·æ–°å¢æ¨¡å—</li></ul><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@WebServlet(&quot;/user/save&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserSaveServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">//1.æ¥æ”¶è¯·æ±‚å‚æ•°</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;name&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;servlet save name ==&gt; &quot;</span> + name);</span><br><span class="line">        <span class="comment">//2.ç”Ÿäº§å“åº”</span></span><br><span class="line">        resp.setContentType(<span class="string">&quot;text/json;charset=utf-8&quot;</span>);</span><br><span class="line">        <span class="type">PrintWriter</span> <span class="variable">pw</span> <span class="operator">=</span> resp.getWriter();</span><br><span class="line">        pw.write(<span class="string">&quot;&#123;&#x27;module&#x27;:&#x27;servlet save&#x27;&#125;&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="built_in">this</span>.doGet(req,resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>UserUpdateServlet:ä½¿ç”¨Servletå¼€å‘çš„ç”¨æˆ·ä¿®æ”¹æ¨¡å—</li></ul><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@WebServlet(&quot;/user/update&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserUpdateServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">//1.æ¥æ”¶è¯·æ±‚å‚æ•°</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;name&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;servlet update name ==&gt; &quot;</span> + name);</span><br><span class="line">        <span class="comment">//2.ç”Ÿäº§å“åº”</span></span><br><span class="line">        resp.setContentType(<span class="string">&quot;text/json;charset=utf-8&quot;</span>);</span><br><span class="line">        <span class="type">PrintWriter</span> <span class="variable">pw</span> <span class="operator">=</span> resp.getWriter();</span><br><span class="line">        pw.write(<span class="string">&quot;&#123;&#x27;module&#x27;:&#x27;servlet update&#x27;&#125;&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="built_in">this</span>.doGet(req,resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>UserDeleteServlet:ä½¿ç”¨Servletå¼€å‘çš„ç”¨æˆ·åˆ é™¤æ¨¡å—</li></ul><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@WebServlet(&quot;/user/delete&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserDeleteServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">//1.æ¥æ”¶è¯·æ±‚å‚æ•°</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;name&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;servlet delete name ==&gt; &quot;</span> + name);</span><br><span class="line">        <span class="comment">//2.ç”Ÿäº§å“åº”</span></span><br><span class="line">        resp.setContentType(<span class="string">&quot;text/json;charset=utf-8&quot;</span>);</span><br><span class="line">        <span class="type">PrintWriter</span> <span class="variable">pw</span> <span class="operator">=</span> resp.getWriter();</span><br><span class="line">        pw.write(<span class="string">&quot;&#123;&#x27;module&#x27;:&#x27;servlet delete&#x27;&#125;&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="built_in">this</span>.doGet(req,resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>UserDeleteServlet:ä½¿ç”¨Servletå¼€å‘çš„ç”¨æˆ·æŸ¥è¯¢æ¨¡å—</li></ul><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@WebServlet(&quot;/user/select&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserSelectServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">//1.æ¥æ”¶è¯·æ±‚å‚æ•°</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;name&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;servlet select name ==&gt; &quot;</span> + name);</span><br><span class="line">        <span class="comment">//2.ç”Ÿäº§å“åº”</span></span><br><span class="line">        resp.setContentType(<span class="string">&quot;text/json;charset=utf-8&quot;</span>);</span><br><span class="line">        <span class="type">PrintWriter</span> <span class="variable">pw</span> <span class="operator">=</span> resp.getWriter();</span><br><span class="line">        pw.write(<span class="string">&quot;&#123;&#x27;module&#x27;:&#x27;servlet select&#x27;&#125;&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="built_in">this</span>.doGet(req,resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯åŠ¨é¡¹ç›®ï¼Œæµ‹è¯•ç»“æœå¦‚ä¸‹:</p><p><img src="/2022/08/03/SpringMVC_day01/1651591732224.png" alt="1651591732224"></p><p>ä¸Šé¢å°±æ˜¯é€šè¿‡Servletçš„æ–¹å¼æ¥å®ç°çš„ç”¨æˆ·æ¨¡å—çš„å¢åˆ æ”¹æŸ¥åŠŸèƒ½ã€‚é‚£ä¹ˆå¦‚æœä½¿ç”¨SpringMVCæ¥å¼€å‘ç›¸åŒçš„åŠŸèƒ½ï¼Œåšå‡ºæ¥æ˜¯ä»€ä¹ˆæ ·å­çš„å‘¢?</p><p>æ‰“å¼€é¡¹ç›®springmvcåŒ…ä¸‹çš„<code>UserController</code>ç±»ï¼Œå†…å®¹å¦‚ä¸‹:</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/save&quot;)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">save</span><span class="params">(String name)</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;springmvc save name ==&gt; &quot;</span> + name);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;&#123;&#x27;module&#x27;:&#x27;springmvc save&#x27;&#125;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/delete&quot;)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">delete</span><span class="params">(String name)</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;springmvc delete name ==&gt; &quot;</span> + name);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;&#123;&#x27;module&#x27;:&#x27;springmvc delete&#x27;&#125;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/update&quot;)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">update</span><span class="params">(String name)</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;springmvc update name ==&gt; &quot;</span> + name);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;&#123;&#x27;module&#x27;:&#x27;springmvc update&#x27;&#125;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/select&quot;)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">select</span><span class="params">(String name)</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;springmvc select name ==&gt; &quot;</span> + name);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;&#123;&#x27;module&#x27;:&#x27;springmvc select&#x27;&#125;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯åŠ¨é¡¹ç›®ï¼Œæµ‹è¯•ç»“æœå¦‚ä¸‹:</p><p><img src="/2022/08/03/SpringMVC_day01/1651592524644.png" alt="1651592524644"></p><p>é€šè¿‡ä¸¤ç§æŠ€æœ¯å¯¹ç›¸åŒåŠŸèƒ½çš„å®ç°ï¼Œæˆ‘ä»¬ä¼šå‘ç°æ‰“å°è¾“å‡ºçš„ç»“æœæ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯å¯¹æ¯”ç¼–å†™çš„ä»£ç ä¼šå‘ç°SpringMVCè¿™ç§å¼€å‘æ–¹å¼<code>æ›´ç®€å•ã€æ›´é«˜æ•ˆ</code>ã€‚</p><p>æ‰€ä»¥æ¥ä¸‹æ¥æˆ‘ä»¬å°±éœ€è¦æ¥å­¦ä¹ ä¸‹SpringMVCè¿™é—¨æŠ€æœ¯ï¼Œä¸»è¦å­¦ä¹ é‚£äº›å†…å®¹å‘¢?</p><p>SpringMVCæ˜¯ç”¨æ¥æ›¿æ¢Servletçš„ï¼Œæ‰€ä»¥Servletèƒ½å®ç°çš„ï¼ŒSpringMVCå°±èƒ½å®ç°ï¼Œä¸»è¦å­¦ä¹ çš„å†…å®¹åŒ…å«å¦‚ä¸‹æ¨¡å—:</p><ul><li>SpringMVCç®€ä»‹</li><li><em>è¯·æ±‚ä¸å“åº”</em></li><li><em>RESTé£æ ¼</em></li><li><em>SSMæ•´åˆ(æ³¨è§£ç‰ˆ)</em></li><li>æ‹¦æˆªå™¨</li></ul><p>SpringMVCç®€ä»‹ï¼šä¸»è¦æ˜¯æ¥è®¤è¯†ä¸‹åˆ°åº•ä»€ä¹ˆæ˜¯SpringMVCã€‚</p><p>è¯·æ±‚ä¸ç›¸åº”ï¼šSpringMVCæ˜¯æ›¿æ¢Servletå¤„äºWebçš„æ¡†æ¶ï¼Œæ‰€ä»¥å…¶ä¸»è¦çš„ä½œç”¨å°±æ˜¯ç”¨æ¥æ¥æ”¶å‰ç«¯å‘è¿‡æ¥çš„è¯·æ±‚å’Œæ•°æ®ç„¶åç»è¿‡å¤„ç†å¹¶å°†å¤„ç†çš„ç»“æœå“åº”ç»™å‰ç«¯ï¼Œæ‰€ä»¥å¦‚ä½•å¤„ç†è¯·æ±‚å’Œå“åº”æ˜¯SpringMVCä¸­éå¸¸é‡è¦çš„ä¸€å—å†…å®¹ã€‚</p><p>RESTé£æ ¼ï¼šæ˜¯ä¸€ç§è½¯ä»¶æ¶æ„é£æ ¼ï¼Œå¯ä»¥é™ä½å¼€å‘çš„å¤æ‚æ€§ï¼Œæé«˜ç³»ç»Ÿçš„å¯ä¼¸ç¼©æ€§ï¼Œåœ¨ä»¥åå¼€å‘ä¸­éå¸¸é‡è¦å’Œå¸¸ç”¨ã€‚</p><p>SSMæ•´åˆï¼šæ˜¯æŠŠå’±ä»¬æ‰€å­¦ä¹ çš„SpringMVC+Spring+Mybatisæ•´åˆåœ¨ä¸€èµ·æ¥å®Œæˆä¸šåŠ¡å¼€å‘ï¼Œæ˜¯å¯¹æˆ‘ä»¬æ‰€å­¦ä¹ è¿™ä¸‰ä¸ªæ¡†æ¶çš„ä¸€ä¸ªç»¼åˆåº”ç”¨ã€‚</p><p>æ‹¦æˆªå™¨ï¼šæ˜¯SpringMVCä¸­çš„ä¸€ä¸ªå°çŸ¥è¯†ç‚¹ã€‚</p><p>å¯¹äºSpringMVCçš„å­¦ä¹ ï¼Œæœ€ç»ˆè¦è¾¾æˆçš„<code>ç›®æ ‡</code>ï¼š</p><ol><li><em>æŒæ¡åŸºäºSpringMVCè·å–è¯·æ±‚å‚æ•°å’Œå“åº”jsonæ•°æ®æ“ä½œ</em></li><li><em>ç†Ÿç»ƒåº”ç”¨åŸºäºRESTé£æ ¼çš„è¯·æ±‚è·¯å¾„è®¾ç½®ä¸å‚æ•°ä¼ é€’</em></li><li>èƒ½å¤Ÿæ ¹æ®å®é™…ä¸šåŠ¡å»ºç«‹å‰åç«¯å¼€å‘é€šä¿¡åè®®å¹¶è¿›è¡Œå®ç°</li><li><em>åŸºäºSSMæ•´åˆæŠ€æœ¯å¼€å‘ä»»æ„ä¸šåŠ¡æ¨¡å—åŠŸèƒ½</em></li></ol><p><strong>åœ¨è¿™ä¸€ç« ä¸­ï¼Œä¸»è¦å­¦ä¹ å¦‚ä¸‹å†…å®¹:</strong></p><ul><li>SpringMVCæ¦‚è¿°</li><li><em><strong>å…¥é—¨æ¡ˆä¾‹</strong></em></li><li><em><strong>å…¥é—¨æ¡ˆä¾‹å·¥ä½œæµç¨‹åˆ†æ</strong></em></li><li>ControlleråŠ è½½æ§åˆ¶</li><li>PostMan</li></ul><h3 id="0-1-SpringMVCæ¦‚è¿°"><a href="#0-1-SpringMVCæ¦‚è¿°" class="headerlink" title="0.1 SpringMVCæ¦‚è¿°"></a>0.1 SpringMVCæ¦‚è¿°</h3><p>æˆ‘ä»¬è¦å­¦ä¹ çš„SpringMVCç©¶ç«Ÿæ˜¯ä¸€é—¨ä»€ä¹ˆæŠ€æœ¯å‘¢?</p><p><img src="/2022/08/03/SpringMVC_day01/1651595619453.png" alt="1651595619453"></p><p>å½“å‰WEBç¨‹åºçš„å·¥ä½œæµç¨‹:</p><p>ä¸‰å±‚æ¶æ„</p><ul><li><p>webç¨‹åºé€šè¿‡æµè§ˆå™¨è®¿é—®å‰ç«¯é¡µé¢ï¼Œå‘é€å¼‚æ­¥è¯·æ±‚åˆ°åç«¯æœåŠ¡å™¨</p></li><li><p>åå°æœåŠ¡å™¨é‡‡ç”¨ä¸‰å±‚æ¶æ„è¿›è¡ŒåŠŸèƒ½å¼€å‘</p><ul><li>è¡¨ç°å±‚è´Ÿè´£æ¥æ”¶è¯·æ±‚å’Œæ•°æ®ç„¶åå°†æ•°æ®è½¬äº¤ç»™ä¸šåŠ¡å±‚</li><li>ä¸šåŠ¡å±‚è´Ÿè´£è°ƒç”¨æ•°æ®å±‚å®Œæˆæ•°æ®åº“è¡¨çš„å¢åˆ æ”¹æŸ¥ï¼Œå¹¶å°†ç»“æœè¿”ç»™è¡¨ç°å±‚</li><li>è¡¨ç°å±‚å°†æ•°æ®è½¬æ¢æˆjsonæ ¼å¼è¿”å›ç»™å‰ç«¯</li></ul></li><li><p>å‰ç«¯é¡µé¢å°†æ•°æ®è¿›è¡Œè§£ææœ€ç»ˆå±•ç¤ºç»™ç”¨æˆ·ã€‚</p></li></ul><p>è¡¨ç°å±‚ä¸æ•°æ®å±‚çš„æŠ€æœ¯é€‰å‹:</p><ul><li>æ•°æ®å±‚é‡‡ç”¨Mybatisæ¡†æ¶</li><li>å˜ç°å±‚é‡‡ç”¨SpringMVCæ¡†æ¶ï¼ŒSpringMVC<code>ä¸»è¦</code>è´Ÿè´£çš„å†…å®¹æœ‰:<ul><li>controllerå¦‚ä½•æ¥æ”¶è¯·æ±‚å’Œæ•°æ®</li><li>å¦‚ä½•å°†è¯·æ±‚å’Œæ•°æ®è½¬å‘ç»™ä¸šåŠ¡å±‚</li><li>å¦‚ä½•å°†å“åº”æ•°æ®è½¬æ¢æˆjsonå‘å›åˆ°å‰ç«¯</li></ul></li></ul><p>ä»‹ç»äº†è¿™ä¹ˆå¤šï¼Œæœ€åæˆ‘ä»¬æ¥å¯¹SpringMVCä¸€ä¸ªæ¦‚è¿°:</p><ul><li><p>SpringMVCæ˜¯ä¸€ç§åŸºäºJavaå®ç°MVCæ¨¡å‹çš„è½»é‡çº§Webæ¡†æ¶</p></li><li><p>ä¼˜ç‚¹</p><ul><li>ä½¿ç”¨ç®€å•ã€å¼€å‘ä¾¿æ·(ç›¸æ¯”äºServlet)</li><li>çµæ´»æ€§å¼º</li></ul><p>è¿™é‡Œæ‰€è¯´çš„ä¼˜ç‚¹ï¼Œå°±éœ€è¦æˆ‘ä»¬å†ä½¿ç”¨çš„è¿‡ç¨‹ä¸­æ…¢æ…¢ä½“ä¼šã€‚</p></li></ul><h2 id="1ï¼ŒSpringMVCå…¥é—¨æ¡ˆä¾‹"><a href="#1ï¼ŒSpringMVCå…¥é—¨æ¡ˆä¾‹" class="headerlink" title="1ï¼ŒSpringMVCå…¥é—¨æ¡ˆä¾‹"></a>1ï¼ŒSpringMVCå…¥é—¨æ¡ˆä¾‹</h2><p>å› ä¸ºSpringMVCæ˜¯ä¸€ä¸ªWebæ¡†æ¶ï¼Œå°†æ¥æ˜¯è¦æ›¿æ¢ä¹‹å‰æˆ‘ä»¬æ‰€ä½¿ç”¨çš„Servlet,æ‰€ä»¥æˆ‘ä»¬å…ˆæ¥å›é¡¾ä¸‹ä»¥å‰Servletæ˜¯å¦‚ä½•è¿›è¡Œå¼€å‘çš„?</p><p><img src="/2022/08/03/SpringMVC_day01/1651596381129.png" alt="1651596381129"></p><p>1.æµè§ˆå™¨å‘é€è¯·æ±‚åˆ°TomcatæœåŠ¡å™¨</p><p>2.TomcatæœåŠ¡å™¨æ¥æ”¶åˆ°è¯·æ±‚åï¼Œä¼šæ ¹æ®è¯·æ±‚è·¯å¾„æ¥åŒ¹é…å¯¹åº”çš„Servlet,å¹¶å°†è¯·æ±‚äº¤ç»™å¯¹åº”çš„Servletæ¥å¤„ç†</p><p>æ‰€ä»¥å¯¹äºServletæ¥è¯´ï¼Œæˆ‘ä»¬ä¸»è¦å®Œæˆçš„æ˜¯Servletç±»çš„å¼€å‘ä»¥åŠå¯¹åº”è·¯å¾„çš„é…ç½®ã€‚</p><p>é‚£ä¹ˆå¯¹äºSpringMVCç¨‹åºçš„æµç¨‹ä¼šæ˜¯ä»€ä¹ˆæ ·çš„å‘¢?</p><p><img src="/2022/08/03/SpringMVC_day01/1651596361174.png" alt="1651596361174"></p><p>1.æµè§ˆå™¨å‘é€è¯·æ±‚åˆ°TomcatæœåŠ¡å™¨</p><p>2.TomcatæœåŠ¡å™¨æ¥æ”¶åˆ°è¯·æ±‚åï¼Œä¼šå°†è¯·æ±‚äº¤ç»™SpringMVCä¸­çš„**DispatcherServlet[å‰ç«¯æ§åˆ¶å™¨]**æ¥å¤„ç†è¯·æ±‚</p><p>3.DispatcherServletä¸çœŸæ­£å¤„ç†è¯·æ±‚ï¼Œåªæ˜¯æŒ‰ç…§å¯¹åº”çš„è§„åˆ™å°†è¯·æ±‚åˆ†å‘åˆ°å¯¹åº”çš„Beanå¯¹è±¡</p><p>4.Beanå¯¹è±¡æ˜¯æœ‰æˆ‘ä»¬è‡ªå·±ç¼–å†™æ¥å¤„ç†ä¸åŒçš„è¯·æ±‚ï¼Œæ¯ä¸ªBeanä¸­å¯ä»¥å¤„ç†ä¸€ä¸ªæˆ–å¤šä¸ªä¸åŒçš„è¯·æ±‚url</p><p>5.DispatcherServletå’ŒBeanå¯¹è±¡éƒ½éœ€è¦äº¤ç»™Springå®¹å™¨æ¥è¿›è¡Œç®¡ç†</p><p>ç»¼ä¸Šæ‰€è¿°ï¼Œéœ€è¦æˆ‘ä»¬ç¼–å†™çš„å†…å®¹åŒ…å«:</p><ul><li>Beanå¯¹è±¡çš„ç¼–å†™</li><li>è¯·æ±‚urlå’ŒBeanå¯¹è±¡å¯¹åº”å…³ç³»çš„é…ç½®</li><li>æ„å»ºSpringå®¹å™¨ï¼Œå°†DispatcherServletå’ŒBeanå¯¹è±¡äº¤ç»™å®¹å™¨ç®¡ç†</li><li>é…ç½®TomcatæœåŠ¡å™¨ï¼Œä½¿å…¶èƒ½å¤Ÿè¯†åˆ«Springå®¹å™¨ï¼Œå¹¶å°†è¯·æ±‚äº¤ç»™å®¹å™¨ä¸­çš„DispatcherServletæ¥åˆ†å‘è¯·æ±‚</li></ul><p>å…·ä½“çš„å®ç°æ­¥éª¤å¦‚ä¸‹:</p><p>1.åˆ›å»ºwebå·¥ç¨‹(Mavenç»“æ„)å¹¶åœ¨å·¥ç¨‹çš„pom.xmlæ·»åŠ SpringMVCå’ŒServletåæ ‡</p><p>2.åˆ›å»ºSpringMVCæ§åˆ¶å™¨ç±»(ç­‰åŒäºServletåŠŸèƒ½)</p><p>3.åˆå§‹åŒ–SpringMVCç¯å¢ƒ(åŒSpringç¯å¢ƒ)ï¼Œè®¾å®šSpringMVCåŠ è½½å¯¹åº”çš„bean</p><p>4.åˆå§‹åŒ–Servletå®¹å™¨ï¼ŒåŠ è½½SpringMVCç¯å¢ƒï¼Œå¹¶è®¾ç½®SpringMVCæŠ€æœ¯å¤„ç†çš„è¯·æ±‚</p><h3 id="1-1-éœ€æ±‚åˆ†æ"><a href="#1-1-éœ€æ±‚åˆ†æ" class="headerlink" title="1.1 éœ€æ±‚åˆ†æ"></a>1.1 éœ€æ±‚åˆ†æ</h3><h3 id="1-2-æ¡ˆä¾‹åˆ¶ä½œ"><a href="#1-2-æ¡ˆä¾‹åˆ¶ä½œ" class="headerlink" title="1.2 æ¡ˆä¾‹åˆ¶ä½œ"></a>1.2 æ¡ˆä¾‹åˆ¶ä½œ</h3><h4 id="æ­¥éª¤1-åˆ›å»ºMavené¡¹ç›®ï¼Œå¹¶å¯¼å…¥å¯¹åº”çš„jaråŒ…"><a href="#æ­¥éª¤1-åˆ›å»ºMavené¡¹ç›®ï¼Œå¹¶å¯¼å…¥å¯¹åº”çš„jaråŒ…" class="headerlink" title="æ­¥éª¤1:åˆ›å»ºMavené¡¹ç›®ï¼Œå¹¶å¯¼å…¥å¯¹åº”çš„jaråŒ…"></a>æ­¥éª¤1:åˆ›å»ºMavené¡¹ç›®ï¼Œå¹¶å¯¼å…¥å¯¹åº”çš„jaråŒ…</h4><p>æ‰“å¼€IDEA,åˆ›å»ºä¸€ä¸ªæ–°çš„webé¡¹ç›®</p><p><img src="/2022/08/03/SpringMVC_day01/1630428920116.png" alt="1630428920116"></p><p>å› ä¸ºä½¿ç”¨éª¨æ¶åˆ›å»ºçš„é¡¹ç›®ç»“æ„ä¸å®Œæ•´ï¼Œéœ€è¦æ‰‹åŠ¨è¡¥å…¨</p><p><img src="/2022/08/03/SpringMVC_day01/1630429288339.png" alt="1630429288339"></p><p>å°†pom.xmlä¸­å¤šä½™çš„å†…å®¹åˆ é™¤æ‰ï¼Œå†æ·»åŠ SpringMVCéœ€è¦çš„ä¾èµ–</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="line">&lt;project xmlns=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> xmlns:xsi=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="line">  xsi:schemaLocation=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span><br><span class="line">  &lt;modelVersion&gt;<span class="number">4.0</span><span class="number">.0</span>&lt;/modelVersion&gt;</span><br><span class="line">  &lt;groupId&gt;com.itheima&lt;/groupId&gt;</span><br><span class="line">  &lt;artifactId&gt;springmvc_01_quickstart&lt;/artifactId&gt;</span><br><span class="line">  &lt;version&gt;<span class="number">1.0</span>-SNAPSHOT&lt;/version&gt;</span><br><span class="line">  &lt;packaging&gt;war&lt;/packaging&gt;</span><br><span class="line">  &lt;properties&gt;</span><br><span class="line">        &lt;project.build.sourceEncoding&gt;UTF-<span class="number">8</span>&lt;/project.build.sourceEncoding&gt;</span><br><span class="line">        &lt;maven.compiler.source&gt;<span class="number">1.8</span>&lt;/maven.compiler.source&gt;</span><br><span class="line">        &lt;maven.compiler.target&gt;<span class="number">1.8</span>&lt;/maven.compiler.target&gt;</span><br><span class="line">   &lt;/properties&gt;</span><br><span class="line">   &lt;!--<span class="number">1.</span> å¯¼å…¥SpringMVCä¸servletçš„åæ ‡--&gt; </span><br><span class="line">  &lt;dependencies&gt;</span><br><span class="line">    &lt;dependency&gt;</span><br><span class="line">      &lt;groupId&gt;javax.servlet&lt;/groupId&gt;</span><br><span class="line">      &lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;</span><br><span class="line">      &lt;version&gt;<span class="number">3.1</span><span class="number">.0</span>&lt;/version&gt;</span><br><span class="line">      &lt;scope&gt;provided&lt;/scope&gt;</span><br><span class="line">    &lt;/dependency&gt;</span><br><span class="line">    &lt;dependency&gt;</span><br><span class="line">      &lt;groupId&gt;org.springframework&lt;/groupId&gt;</span><br><span class="line">      &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;</span><br><span class="line">      &lt;version&gt;<span class="number">5.2</span><span class="number">.10</span>.RELEASE&lt;/version&gt;</span><br><span class="line">    &lt;/dependency&gt;</span><br><span class="line">  &lt;/dependencies&gt;</span><br><span class="line"></span><br><span class="line">  &lt;build&gt;</span><br><span class="line">    &lt;plugins&gt;</span><br><span class="line">      &lt;plugin&gt;</span><br><span class="line">        &lt;groupId&gt;org.apache.tomcat.maven&lt;/groupId&gt;</span><br><span class="line">        &lt;artifactId&gt;tomcat7-maven-plugin&lt;/artifactId&gt;</span><br><span class="line">        &lt;version&gt;<span class="number">2.1</span>&lt;/version&gt;</span><br><span class="line">        &lt;configuration&gt;</span><br><span class="line">          &lt;port&gt;<span class="number">80</span>&lt;/port&gt;</span><br><span class="line">          &lt;path&gt;/&lt;/path&gt;</span><br><span class="line">        &lt;/configuration&gt;</span><br><span class="line">      &lt;/plugin&gt;</span><br><span class="line">    &lt;/plugins&gt;</span><br><span class="line">  &lt;/build&gt;</span><br><span class="line">&lt;/project&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>**è¯´æ˜:**servletçš„åæ ‡ä¸ºä»€ä¹ˆéœ€è¦æ·»åŠ <code>&lt;scope&gt;provided&lt;/scope&gt;</code>?</p><ul><li><p>scopeæ˜¯mavenä¸­jaråŒ…ä¾èµ–ä½œç”¨èŒƒå›´çš„æè¿°ï¼Œ</p></li><li><p>å¦‚æœä¸è®¾ç½®é»˜è®¤æ˜¯<code>compile</code>åœ¨åœ¨ç¼–è¯‘ã€è¿è¡Œã€æµ‹è¯•æ—¶å‡æœ‰æ•ˆ</p></li><li><p>å¦‚æœè¿è¡Œæœ‰æ•ˆçš„è¯å°±ä¼šå’Œtomcatä¸­çš„servlet-apiåŒ…å‘ç”Ÿå†²çªï¼Œå¯¼è‡´å¯åŠ¨æŠ¥é”™</p></li><li><p>providedä»£è¡¨çš„æ˜¯è¯¥åŒ…åªåœ¨ç¼–è¯‘å’Œæµ‹è¯•çš„æ—¶å€™ç”¨ï¼Œè¿è¡Œçš„æ—¶å€™æ— æ•ˆç›´æ¥ä½¿ç”¨tomcatä¸­çš„ï¼Œå°±é¿å…å†²çª</p></li></ul><h4 id="æ­¥éª¤2-åˆ›å»ºæ§åˆ¶å™¨ç±»"><a href="#æ­¥éª¤2-åˆ›å»ºæ§åˆ¶å™¨ç±»" class="headerlink" title="æ­¥éª¤2:åˆ›å»ºæ§åˆ¶å™¨ç±»"></a>æ­¥éª¤2:åˆ›å»ºæ§åˆ¶å™¨ç±»</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//2.åˆ¶ä½œæ§åˆ¶å™¨ç±»ï¼Œç­‰åŒäºServlet</span></span><br><span class="line"><span class="comment">//2.1å¿…é¡»æ˜¯ä¸€ä¸ªspringç®¡ç†çš„bean</span></span><br><span class="line"><span class="comment">//2.2å®šä¹‰å…·ä½“å¤„ç†è¯·æ±‚çš„æ–¹æ³•</span></span><br><span class="line"><span class="comment">//2.3è®¾ç½®å½“å‰æ–¹æ³•çš„è®¿é—®è·¯å¾„</span></span><br><span class="line"><span class="comment">//2.4è®¾ç½®å“åº”ç»“æœä¸ºjsonæ•°æ®</span></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/save&quot;)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">save</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;user save ...&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;&#123;&#x27;module&#x27;:&#x27;springmvc&#x27;&#125;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="æ­¥éª¤3-åˆ›å»ºé…ç½®ç±»"><a href="#æ­¥éª¤3-åˆ›å»ºé…ç½®ç±»" class="headerlink" title="æ­¥éª¤3:åˆ›å»ºé…ç½®ç±»"></a>æ­¥éª¤3:åˆ›å»ºé…ç½®ç±»</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//3.å®šä¹‰é…ç½®ç±»åŠ è½½Controllerå¯¹åº”çš„bean</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ComponentScan(&quot;com.itheima.controller&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringMvcConfig</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ­¥éª¤4-åˆ›å»ºTomcatçš„Servletå®¹å™¨é…ç½®ç±»"><a href="#æ­¥éª¤4-åˆ›å»ºTomcatçš„Servletå®¹å™¨é…ç½®ç±»" class="headerlink" title="æ­¥éª¤4:åˆ›å»ºTomcatçš„Servletå®¹å™¨é…ç½®ç±»"></a>æ­¥éª¤4:åˆ›å»ºTomcatçš„Servletå®¹å™¨é…ç½®ç±»</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//4.å®šä¹‰servletå®¹å™¨çš„é…ç½®ç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ServletContainersInitConfig</span> <span class="keyword">extends</span> <span class="title class_">AbstractDispatcherServletInitializer</span> &#123;</span><br><span class="line">    <span class="comment">//åŠ è½½springMVCé…ç½®</span></span><br><span class="line">    <span class="keyword">protected</span> WebApplicationContext <span class="title function_">createServletApplicationContext</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//åˆå§‹åŒ–WebApplicationContextå¯¹è±¡</span></span><br><span class="line">        <span class="type">AnnotationConfigWebApplicationContext</span> <span class="variable">ctx</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AnnotationConfigWebApplicationContext</span>();</span><br><span class="line">        <span class="comment">//åŠ è½½æŒ‡å®šé…ç½®ç±»</span></span><br><span class="line">        ctx.register(SpringMvcConfig.class);</span><br><span class="line">        <span class="keyword">return</span> ctx;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è®¾ç½®Tomcatæ¥æ”¶çš„è¯·æ±‚å“ªäº›å½’SpringMVCå¤„ç†</span></span><br><span class="line">    <span class="keyword">protected</span> String[] getServletMappings() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">String</span>[]&#123;<span class="string">&quot;/&quot;</span>&#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è®¾ç½®springç›¸å…³é…ç½®</span></span><br><span class="line">    <span class="keyword">protected</span> WebApplicationContext <span class="title function_">createRootApplicationContext</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ­¥éª¤5-é…ç½®Tomcatç¯å¢ƒ"><a href="#æ­¥éª¤5-é…ç½®Tomcatç¯å¢ƒ" class="headerlink" title="æ­¥éª¤5:é…ç½®Tomcatç¯å¢ƒ"></a>æ­¥éª¤5:é…ç½®Tomcatç¯å¢ƒ</h4><p><img src="/2022/08/03/SpringMVC_day01/1630430302683.png" alt="1630430302683"></p><h4 id="æ­¥éª¤6-å¯åŠ¨è¿è¡Œé¡¹ç›®"><a href="#æ­¥éª¤6-å¯åŠ¨è¿è¡Œé¡¹ç›®" class="headerlink" title="æ­¥éª¤6:å¯åŠ¨è¿è¡Œé¡¹ç›®"></a>æ­¥éª¤6:å¯åŠ¨è¿è¡Œé¡¹ç›®</h4><p><img src="/2022/08/03/SpringMVC_day01/1630430345246.png" alt="1630430345246"></p><h4 id="æ­¥éª¤7-æµè§ˆå™¨è®¿é—®"><a href="#æ­¥éª¤7-æµè§ˆå™¨è®¿é—®" class="headerlink" title="æ­¥éª¤7:æµè§ˆå™¨è®¿é—®"></a>æ­¥éª¤7:æµè§ˆå™¨è®¿é—®</h4><p>æµè§ˆå™¨è¾“å…¥<code>http://localhost/save</code>è¿›è¡Œè®¿é—®ï¼Œå¯ä»¥çœ‹å¾—å¦‚ä¸‹å†…å®¹</p><p><img src="/2022/08/03/SpringMVC_day01/1651602301329.png" alt="1651602301329"></p><p>è‡³æ­¤SpringMVCçš„å…¥é—¨æ¡ˆä¾‹å°±å·²ç»å®Œæˆã€‚</p><h3 id="çŸ¥è¯†ç‚¹1ï¼š-Controller"><a href="#çŸ¥è¯†ç‚¹1ï¼š-Controller" class="headerlink" title="çŸ¥è¯†ç‚¹1ï¼š@Controller"></a>çŸ¥è¯†ç‚¹1ï¼š@Controller</h3><table><thead><tr><th>åç§°</th><th>@Controller</th></tr></thead><tbody><tr><td>ç±»å‹</td><td>ç±»æ³¨è§£</td></tr><tr><td>ä½ç½®</td><td>SpringMVCæ§åˆ¶å™¨ç±»å®šä¹‰ä¸Šæ–¹</td></tr><tr><td>ä½œç”¨</td><td>è®¾å®šSpringMVCçš„æ ¸å¿ƒæ§åˆ¶å™¨bean</td></tr></tbody></table><h3 id="çŸ¥è¯†ç‚¹2ï¼š-RequestMapping"><a href="#çŸ¥è¯†ç‚¹2ï¼š-RequestMapping" class="headerlink" title="çŸ¥è¯†ç‚¹2ï¼š@RequestMapping"></a>çŸ¥è¯†ç‚¹2ï¼š@RequestMapping</h3><table><thead><tr><th>åç§°</th><th>@RequestMapping</th></tr></thead><tbody><tr><td>ç±»å‹</td><td>ç±»æ³¨è§£æˆ–æ–¹æ³•æ³¨è§£</td></tr><tr><td>ä½ç½®</td><td>SpringMVCæ§åˆ¶å™¨ç±»æˆ–æ–¹æ³•å®šä¹‰ä¸Šæ–¹</td></tr><tr><td>ä½œç”¨</td><td>è®¾ç½®å½“å‰æ§åˆ¶å™¨æ–¹æ³•è¯·æ±‚è®¿é—®è·¯å¾„</td></tr><tr><td>ç›¸å…³å±æ€§</td><td>value(é»˜è®¤)ï¼Œè¯·æ±‚è®¿é—®è·¯å¾„</td></tr></tbody></table><h3 id="çŸ¥è¯†ç‚¹3ï¼š-ResponseBody"><a href="#çŸ¥è¯†ç‚¹3ï¼š-ResponseBody" class="headerlink" title="çŸ¥è¯†ç‚¹3ï¼š@ResponseBody"></a>çŸ¥è¯†ç‚¹3ï¼š@ResponseBody</h3><table><thead><tr><th>åç§°</th><th>@ResponseBody</th></tr></thead><tbody><tr><td>ç±»å‹</td><td>ç±»æ³¨è§£æˆ–æ–¹æ³•æ³¨è§£</td></tr><tr><td>ä½ç½®</td><td>SpringMVCæ§åˆ¶å™¨ç±»æˆ–æ–¹æ³•å®šä¹‰ä¸Šæ–¹</td></tr><tr><td>ä½œç”¨</td><td>è®¾ç½®å½“å‰æ§åˆ¶å™¨æ–¹æ³•å“åº”å†…å®¹ä¸ºå½“å‰è¿”å›å€¼ï¼Œæ— éœ€è§£æ</td></tr></tbody></table><h3 id="1-3-å…¥é—¨æ¡ˆä¾‹æ€»ç»“"><a href="#1-3-å…¥é—¨æ¡ˆä¾‹æ€»ç»“" class="headerlink" title="1.3 å…¥é—¨æ¡ˆä¾‹æ€»ç»“"></a>1.3 å…¥é—¨æ¡ˆä¾‹æ€»ç»“</h3><p>SpringMVCå…¥é—¨ç¨‹åºå¼€å‘æ€»ç»“(1+N)</p><ul><li>ä¸€æ¬¡æ€§å·¥ä½œ<ul><li>åˆ›å»ºå·¥ç¨‹ï¼Œè®¾ç½®æœåŠ¡å™¨ï¼ŒåŠ è½½å·¥ç¨‹</li><li>å¯¼å…¥åæ ‡</li><li>åˆ›å»ºwebå®¹å™¨å¯åŠ¨ç±»ï¼ŒåŠ è½½SpringMVCé…ç½®ï¼Œå¹¶è®¾ç½®SpringMVCè¯·æ±‚æ‹¦æˆªè·¯å¾„</li><li>SpringMVCæ ¸å¿ƒé…ç½®ç±»ï¼ˆè®¾ç½®é…ç½®ç±»ï¼Œæ‰«æcontrolleråŒ…ï¼ŒåŠ è½½Controlleræ§åˆ¶å™¨beanï¼‰</li></ul></li><li>å¤šæ¬¡å·¥ä½œ<ul><li><p>å®šä¹‰å¤„ç†è¯·æ±‚çš„æ§åˆ¶å™¨ç±»</p></li><li><p>å®šä¹‰å¤„ç†è¯·æ±‚çš„æ§åˆ¶å™¨æ–¹æ³•ï¼Œå¹¶é…ç½®æ˜ å°„è·¯å¾„ï¼ˆ@RequestMappingï¼‰ä¸è¿”å›jsonæ•°æ®ï¼ˆ@ResponseBodyï¼‰</p></li><li><p>å¤šæ¬¡å·¥ä½œæˆ‘ä»¬å¯ä»¥é€šè¿‡å®ç°ä¸€ä¸ªç”¨æˆ·çš„åˆ é™¤åŠŸèƒ½æ¥ä½“éªŒä¸€æŠŠ</p><ul><li>controllerç±»ä¸­ç¼–å†™åˆ é™¤æ–¹æ³•</li></ul><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//2.åˆ¶ä½œæ§åˆ¶å™¨ç±»ï¼Œç­‰åŒäºServlet</span></span><br><span class="line"><span class="comment">//2.1å¿…é¡»æ˜¯ä¸€ä¸ªspringç®¡ç†çš„bean</span></span><br><span class="line"><span class="comment">//2.2å®šä¹‰å…·ä½“å¤„ç†è¯·æ±‚çš„æ–¹æ³•</span></span><br><span class="line"><span class="comment">//2.3è®¾ç½®å½“å‰æ–¹æ³•çš„è®¿é—®è·¯å¾„</span></span><br><span class="line"><span class="comment">//2.4è®¾ç½®å“åº”ç»“æœä¸ºjsonæ•°æ®</span></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/save&quot;)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">save</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;user save ...&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;&#123;&#x27;module&#x27;:&#x27;springmvc&#x27;&#125;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/delete&quot;)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">delete</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;user delete ...&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;&#123;&#x27;module&#x27;:&#x27;springmvc delete &#x27;&#125;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li>é‡å¯æœåŠ¡å™¨ï¼Œè®¿é—®<code>http://localhost/delete</code>,å¯ä»¥çœ‹å¾—å¦‚ä¸‹æ•ˆæœ:</li></ul><p><img src="/2022/08/03/SpringMVC_day01/1651602676209.png" alt="1651602676209"></p></li></ul></li></ul><p>æœ€åé’ˆå¯¹æœ¬æ¡ˆä¾‹ä¸­å‡ºç°çš„Tomcatçš„Servletå®¹å™¨é…ç½®å†æ¥æ€»ç»“ä¸‹:</p><ul><li>AbstractDispatcherServletInitializerç±»æ˜¯SpringMVCæä¾›çš„å¿«é€Ÿåˆå§‹åŒ–Web3.0å®¹å™¨çš„æŠ½è±¡ç±»</li><li>AbstractDispatcherServletInitializeræä¾›ä¸‰ä¸ªæ¥å£æ–¹æ³•ä¾›ç”¨æˆ·å®ç°<ul><li>createRootApplicationContext()æ–¹æ³•ï¼Œå¦‚æœåˆ›å»ºServletå®¹å™¨æ—¶éœ€è¦åŠ è½½éSpringMVCå¯¹åº”çš„beanï¼Œä½¿ç”¨å½“å‰æ–¹æ³•è¿›è¡Œï¼Œä½¿ç”¨æ–¹å¼åŒcreateServletApplicationContext()</li><li>createServletApplicationContext()æ–¹æ³•ï¼Œåˆ›å»ºServletå®¹å™¨æ—¶ï¼ŒåŠ è½½SpringMVCå¯¹åº”çš„beanå¹¶æ”¾å…¥WebApplicationContextå¯¹è±¡èŒƒå›´ä¸­ï¼Œè€ŒWebApplicationContextçš„ä½œç”¨èŒƒå›´ä¸ºServletContextèŒƒå›´ï¼Œå³æ•´ä¸ªwebå®¹å™¨èŒƒå›´</li><li>ngetServletMappings()æ–¹æ³•ï¼Œè®¾å®šSpringMVCå¯¹åº”çš„è¯·æ±‚æ˜ å°„è·¯å¾„ï¼Œè®¾ç½®ä¸º&#x2F;è¡¨ç¤ºæ‹¦æˆªæ‰€æœ‰è¯·æ±‚ï¼Œä»»æ„è¯·æ±‚éƒ½å°†è½¬å…¥åˆ°SpringMVCè¿›è¡Œå¤„ç†</li><li>createServletApplicationContextç”¨æ¥åŠ è½½SpringMVCç¯å¢ƒ</li><li>createRootApplicationContextç”¨æ¥åŠ è½½Springç¯å¢ƒ</li></ul></li></ul><h3 id="1-4-å…¥é—¨æ¡ˆä¾‹å·¥ä½œæµç¨‹åˆ†æ"><a href="#1-4-å…¥é—¨æ¡ˆä¾‹å·¥ä½œæµç¨‹åˆ†æ" class="headerlink" title="1.4 å…¥é—¨æ¡ˆä¾‹å·¥ä½œæµç¨‹åˆ†æ"></a>1.4 å…¥é—¨æ¡ˆä¾‹å·¥ä½œæµç¨‹åˆ†æ</h3><p>ä¸ºäº†æ›´å¥½çš„ä½¿ç”¨SpringMVC,æˆ‘ä»¬å°†SpringMVCçš„ä½¿ç”¨è¿‡ç¨‹æ€»å…±åˆ†ä¸¤ä¸ªé˜¶æ®µæ¥åˆ†æï¼Œåˆ†åˆ«æ˜¯<code>å¯åŠ¨æœåŠ¡å™¨åˆå§‹åŒ–è¿‡ç¨‹</code>å’Œ<code>å•æ¬¡è¯·æ±‚è¿‡ç¨‹</code></p><p><img src="/2022/08/03/SpringMVC_day01/1630432494752.png" alt="1630432494752"></p><h4 id="1-4-1-å¯åŠ¨æœåŠ¡å™¨åˆå§‹åŒ–è¿‡ç¨‹"><a href="#1-4-1-å¯åŠ¨æœåŠ¡å™¨åˆå§‹åŒ–è¿‡ç¨‹" class="headerlink" title="1.4.1 å¯åŠ¨æœåŠ¡å™¨åˆå§‹åŒ–è¿‡ç¨‹"></a>1.4.1 å¯åŠ¨æœåŠ¡å™¨åˆå§‹åŒ–è¿‡ç¨‹</h4><ol><li><p>æœåŠ¡å™¨å¯åŠ¨ï¼Œæ‰§è¡ŒServletContainersInitConfigç±»ï¼Œåˆå§‹åŒ–webå®¹å™¨</p></li><li><p>æ‰§è¡ŒcreateServletApplicationContextæ–¹æ³•ï¼Œåˆ›å»ºäº†WebApplicationContextå¯¹è±¡</p><ul><li>è¯¥æ–¹æ³•åŠ è½½SpringMVCçš„é…ç½®ç±»SpringMvcConfigæ¥åˆå§‹åŒ–SpringMVCçš„å®¹å™¨</li></ul></li><li><p>åŠ è½½SpringMvcConfigé…ç½®ç±»</p><p><img src="/2022/08/03/SpringMVC_day01/1630433335744.png" alt="1630433335744"></p></li><li><p>æ‰§è¡Œ@ComponentScanåŠ è½½å¯¹åº”çš„bean</p><ul><li>æ‰«ææŒ‡å®šåŒ…ä¸‹æ‰€æœ‰ç±»ä¸Šçš„æ³¨è§£ï¼Œå¦‚Controllerç±»ä¸Šçš„@Controlleræ³¨è§£</li></ul></li><li><p>åŠ è½½UserControllerï¼Œæ¯ä¸ª@RequestMappingçš„åç§°å¯¹åº”ä¸€ä¸ªå…·ä½“çš„æ–¹æ³•</p><p><img src="/2022/08/03/SpringMVC_day01/1630433398932.png" alt="1630433398932"></p><ul><li>æ­¤æ—¶å°±å»ºç«‹äº† <code>/save</code> å’Œ saveæ–¹æ³•çš„å¯¹åº”å…³ç³»</li></ul></li><li><p>æ‰§è¡ŒgetServletMappingsæ–¹æ³•ï¼Œå®šä¹‰æ‰€æœ‰çš„è¯·æ±‚éƒ½é€šè¿‡SpringMVC</p><p><img src="/2022/08/03/SpringMVC_day01/1630433510528.png" alt="1630433510528"></p><ul><li><code>/</code>ä»£è¡¨æ‰€æ‹¦æˆªè¯·æ±‚çš„è·¯å¾„è§„åˆ™ï¼Œåªæœ‰è¢«æ‹¦æˆªåæ‰èƒ½äº¤ç»™SpringMVCæ¥å¤„ç†è¯·æ±‚</li></ul></li></ol><h4 id="1-4-2-å•æ¬¡è¯·æ±‚è¿‡ç¨‹"><a href="#1-4-2-å•æ¬¡è¯·æ±‚è¿‡ç¨‹" class="headerlink" title="1.4.2 å•æ¬¡è¯·æ±‚è¿‡ç¨‹"></a>1.4.2 å•æ¬¡è¯·æ±‚è¿‡ç¨‹</h4><ol><li>å‘é€è¯·æ±‚localhost&#x2F;save</li><li>webå®¹å™¨å‘ç°æ‰€æœ‰è¯·æ±‚éƒ½ç»è¿‡SpringMVCï¼Œå°†è¯·æ±‚äº¤ç»™SpringMVCå¤„ç†<ul><li>å› ä¸ºç¬¦åˆä¸Šé¢ç¬¬å…­æ­¥è®¾ç½®çš„è¯·æ±‚è·¯å¾„ï¼Œæ‰€ä»¥è¯¥è¯·æ±‚ä¼šäº¤ç»™SpringMVCæ¥å¤„ç†</li></ul></li><li>è§£æè¯·æ±‚è·¯å¾„&#x2F;save</li><li>ç”±&#x2F;saveåŒ¹é…æ‰§è¡Œå¯¹åº”çš„æ–¹æ³•save(ï¼‰<ul><li>ä¸Šé¢çš„ç¬¬äº”æ­¥å·²ç»å°†è¯·æ±‚è·¯å¾„å’Œæ–¹æ³•å»ºç«‹äº†å¯¹åº”å…³ç³»ï¼Œé€šè¿‡&#x2F;saveå°±èƒ½æ‰¾åˆ°å¯¹åº”çš„saveæ–¹æ³•</li></ul></li><li>æ‰§è¡Œsave()</li><li>æ£€æµ‹åˆ°æœ‰@ResponseBodyç›´æ¥å°†save()æ–¹æ³•çš„è¿”å›å€¼ä½œä¸ºå“åº”æ±‚ä½“è¿”å›ç»™è¯·æ±‚æ–¹</li></ol><h3 id="1-5-beanåŠ è½½æ§åˆ¶"><a href="#1-5-beanåŠ è½½æ§åˆ¶" class="headerlink" title="1.5 beanåŠ è½½æ§åˆ¶"></a>1.5 beanåŠ è½½æ§åˆ¶</h3><h4 id="1-5-1-é—®é¢˜åˆ†æ"><a href="#1-5-1-é—®é¢˜åˆ†æ" class="headerlink" title="1.5.1 é—®é¢˜åˆ†æ"></a>1.5.1 é—®é¢˜åˆ†æ</h4><p>å…¥é—¨æ¡ˆä¾‹çš„å†…å®¹å·²ç»åšå®Œäº†ï¼Œåœ¨å…¥é—¨æ¡ˆä¾‹ä¸­æˆ‘ä»¬åˆ›å»ºè¿‡ä¸€ä¸ª<code>SpringMvcConfig</code>çš„é…ç½®ç±»ï¼Œå†å›æƒ³å‰é¢å’±ä»¬å­¦ä¹ Springçš„æ—¶å€™ä¹Ÿåˆ›å»ºè¿‡ä¸€ä¸ªé…ç½®ç±»<code>SpringConfig</code>ã€‚è¿™ä¸¤ä¸ªé…ç½®ç±»éƒ½éœ€è¦åŠ è½½èµ„æºï¼Œé‚£ä¹ˆå®ƒä»¬åˆ†åˆ«éƒ½éœ€è¦åŠ è½½å“ªäº›å†…å®¹?</p><p>æˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹ç›®å‰æˆ‘ä»¬çš„é¡¹ç›®ç›®å½•ç»“æ„:</p><p><img src="/2022/08/03/SpringMVC_day01/1630459727575.png" alt="1630459727575"></p><ul><li><p>configç›®å½•å­˜å…¥çš„æ˜¯é…ç½®ç±»,å†™è¿‡çš„é…ç½®ç±»æœ‰:</p><ul><li>ServletContainersInitConfig</li><li>SpringConfig</li><li>SpringMvcConfig</li><li>JdbcConfig</li><li>MybatisConfig</li></ul></li><li><p>controllerç›®å½•å­˜æ”¾çš„æ˜¯SpringMVCçš„controllerç±»</p></li><li><p>serviceç›®å½•å­˜æ”¾çš„æ˜¯serviceæ¥å£å’Œå®ç°ç±»</p></li><li><p>daoç›®å½•å­˜æ”¾çš„æ˜¯dao&#x2F;Mapperæ¥å£</p></li></ul><p>controllerã€serviceå’Œdaoè¿™äº›ç±»éƒ½éœ€è¦è¢«å®¹å™¨ç®¡ç†æˆbeanå¯¹è±¡ï¼Œé‚£ä¹ˆåˆ°åº•æ˜¯è¯¥è®©SpringMVCåŠ è½½è¿˜æ˜¯è®©SpringåŠ è½½å‘¢?</p><ul><li>SpringMVCåŠ è½½å…¶ç›¸å…³bean(è¡¨ç°å±‚bean),ä¹Ÿå°±æ˜¯controlleråŒ…ä¸‹çš„ç±»</li><li>Springæ§åˆ¶çš„bean<ul><li>ä¸šåŠ¡bean(Service)</li><li>åŠŸèƒ½bean(DataSource,SqlSessionFactoryBean,MapperScannerConfigurerç­‰)</li></ul></li></ul><p>åˆ†ææ¸…æ¥šè°è¯¥ç®¡å“ªäº›beanä»¥åï¼Œæ¥ä¸‹æ¥è¦è§£å†³çš„é—®é¢˜æ˜¯å¦‚ä½•è®©Springå’ŒSpringMVCåˆ†å¼€åŠ è½½å„è‡ªçš„å†…å®¹ã€‚</p><p>åœ¨SpringMVCçš„é…ç½®ç±»<code>SpringMvcConfig</code>ä¸­ä½¿ç”¨æ³¨è§£<code>@ComponentScan</code>ï¼Œæˆ‘ä»¬åªéœ€è¦å°†å…¶æ‰«æèŒƒå›´è®¾ç½®åˆ°controllerå³å¯ï¼Œå¦‚</p><p><img src="/2022/08/03/SpringMVC_day01/1630460319004.png" alt="1630460319004"></p><p>åœ¨Springçš„é…ç½®ç±»<code>SpringConfig</code>ä¸­ä½¿ç”¨æ³¨è§£<code>@ComponentScan</code>,å½“æ—¶æ‰«æçš„èŒƒå›´ä¸­å…¶å®æ˜¯å·²ç»åŒ…å«äº†controller,å¦‚:</p><p><img src="/2022/08/03/SpringMVC_day01/1630460408159.png" alt="1630460408159"></p><p>ä»åŒ…ç»“æ„æ¥çœ‹çš„è¯ï¼ŒSpringå·²ç»å¤šæŠŠSpringMVCçš„controllerç±»ä¹Ÿç»™æ‰«æåˆ°ï¼Œæ‰€ä»¥é’ˆå¯¹è¿™ä¸ªé—®é¢˜è¯¥å¦‚ä½•è§£å†³ï¼Œå°±æ˜¯å’±ä»¬æ¥ä¸‹æ¥è¦å­¦ä¹ çš„å†…å®¹ã€‚</p><p>æ¦‚å†µçš„æè¿°ä¸‹å’±ä»¬ç°åœ¨çš„é—®é¢˜å°±æ˜¯å› ä¸ºåŠŸèƒ½ä¸åŒï¼Œå¦‚ä½•é¿å…Springé”™è¯¯åŠ è½½åˆ°SpringMVCçš„bean?</p><h4 id="1-5-2-æ€è·¯åˆ†æ"><a href="#1-5-2-æ€è·¯åˆ†æ" class="headerlink" title="1.5.2 æ€è·¯åˆ†æ"></a>1.5.2 æ€è·¯åˆ†æ</h4><p>é’ˆå¯¹ä¸Šé¢çš„é—®é¢˜ï¼Œè§£å†³æ–¹æ¡ˆä¹Ÿæ¯”è¾ƒç®€å•ï¼Œå°±æ˜¯:</p><ul><li>åŠ è½½Springæ§åˆ¶çš„beançš„æ—¶å€™æ’é™¤æ‰SpringMVCæ§åˆ¶çš„å¤‡æ¡ˆ</li></ul><p>å…·ä½“è¯¥å¦‚ä½•æ’é™¤ï¼Œæœ‰ä¸¤ç§æ–¹å¼æ¥è§£å†³:</p><ul><li>æ–¹å¼ä¸€ï¼šSpringåŠ è½½çš„beanè®¾å®šæ‰«æèŒƒå›´ä¸ºcom.itheima,æ’é™¤æ‰controlleråŒ…ä¸­çš„bean</li><li>æ–¹å¼äºŒï¼šSpringåŠ è½½çš„beanè®¾å®šæ‰«æèŒƒå›´ä¸ºç²¾å‡†èŒƒå›´ï¼Œä¾‹å¦‚serviceåŒ…ã€daoåŒ…ç­‰</li><li>æ–¹å¼ä¸‰ï¼šä¸åŒºåˆ†Springä¸SpringMVCçš„ç¯å¢ƒï¼ŒåŠ è½½åˆ°åŒä¸€ä¸ªç¯å¢ƒä¸­[äº†è§£å³å¯]</li></ul><h4 id="1-5-4-ç¯å¢ƒå‡†å¤‡"><a href="#1-5-4-ç¯å¢ƒå‡†å¤‡" class="headerlink" title="1.5.4 ç¯å¢ƒå‡†å¤‡"></a>1.5.4 ç¯å¢ƒå‡†å¤‡</h4><ul><li><p>åˆ›å»ºä¸€ä¸ªWebçš„Mavené¡¹ç›®</p></li><li><p>pom.xmlæ·»åŠ Springä¾èµ–</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.itheima<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springmvc_02_bean_load<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>war<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.10.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.16<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.47<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.10.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.tomcat.maven<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>tomcat7-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">port</span>&gt;</span>80<span class="tag">&lt;/<span class="name">port</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">path</span>&gt;</span>/<span class="tag">&lt;/<span class="name">path</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>åˆ›å»ºå¯¹åº”çš„é…ç½®ç±»</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ServletContainersInitConfig</span> <span class="keyword">extends</span> <span class="title class_">AbstractDispatcherServletInitializer</span> &#123;</span><br><span class="line">    <span class="keyword">protected</span> WebApplicationContext <span class="title function_">createServletApplicationContext</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">AnnotationConfigWebApplicationContext</span> <span class="variable">ctx</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AnnotationConfigWebApplicationContext</span>();</span><br><span class="line">        ctx.register(SpringMvcConfig.class);</span><br><span class="line">        <span class="keyword">return</span> ctx;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">protected</span> String[] getServletMappings() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">String</span>[]&#123;<span class="string">&quot;/&quot;</span>&#125;;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">protected</span> WebApplicationContext <span class="title function_">createRootApplicationContext</span><span class="params">()</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ComponentScan(&quot;com.itheima.controller&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringMvcConfig</span> &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ComponentScan(&quot;com.itheima&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringConfig</span> &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>ç¼–å†™Controllerï¼ŒServiceï¼ŒDaoï¼ŒDomainç±»</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/save&quot;)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">save</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;user save ...&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;&#123;&#x27;info&#x27;:&#x27;springmvc&#x27;&#125;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">(User user)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">(User user)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;user service ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserDao</span> &#123;</span><br><span class="line">    <span class="meta">@Insert(&quot;insert into tbl_user(name,age)values(#&#123;name&#125;,#&#123;age&#125;)&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">(User user)</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="comment">//setter..getter..toStringç•¥</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p>æœ€ç»ˆåˆ›å»ºå¥½çš„é¡¹ç›®ç»“æ„å¦‚ä¸‹:</p><p><img src="/2022/08/03/SpringMVC_day01/1630461261820.png" alt="1630461261820"></p><h4 id="1-5-5-è®¾ç½®beanåŠ è½½æ§åˆ¶"><a href="#1-5-5-è®¾ç½®beanåŠ è½½æ§åˆ¶" class="headerlink" title="1.5.5 è®¾ç½®beanåŠ è½½æ§åˆ¶"></a>1.5.5 è®¾ç½®beanåŠ è½½æ§åˆ¶</h4><p>æ–¹å¼ä¸€:ä¿®æ”¹Springé…ç½®ç±»ï¼Œè®¾å®šæ‰«æèŒƒå›´ä¸ºç²¾å‡†èŒƒå›´ã€‚</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ComponentScan(&#123;&quot;com.itheima.service&quot;,&quot;comitheima.dao&quot;&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringConfig</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>è¯´æ˜:</strong></p><p>ä¸Šè¿°åªæ˜¯é€šè¿‡ä¾‹å­è¯´æ˜å¯ä»¥ç²¾ç¡®æŒ‡å®šè®©Springæ‰«æå¯¹åº”çš„åŒ…ç»“æ„ï¼ŒçœŸæ­£åœ¨åšå¼€å‘çš„æ—¶å€™ï¼Œå› ä¸ºDaoæœ€ç»ˆæ˜¯äº¤ç»™<code>MapperScannerConfigurer</code>å¯¹è±¡æ¥è¿›è¡Œæ‰«æå¤„ç†çš„ï¼Œæˆ‘ä»¬åªéœ€è¦å°†å…¶æ‰«æåˆ°serviceåŒ…å³å¯ã€‚</p><p>æ–¹å¼äºŒ:ä¿®æ”¹Springé…ç½®ç±»ï¼Œè®¾å®šæ‰«æèŒƒå›´ä¸ºcom.itheima,æ’é™¤æ‰controlleråŒ…ä¸­çš„bean</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ComponentScan(value=&quot;com.itheima&quot;,</span></span><br><span class="line"><span class="meta">    excludeFilters=@ComponentScan.Filter(</span></span><br><span class="line"><span class="meta">    type = FilterType.ANNOTATION,</span></span><br><span class="line"><span class="meta">        classes = Controller.class</span></span><br><span class="line"><span class="meta">    )</span></span><br><span class="line"><span class="meta">)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringConfig</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p>excludeFilterså±æ€§ï¼šè®¾ç½®æ‰«æåŠ è½½beanæ—¶ï¼Œæ’é™¤çš„è¿‡æ»¤è§„åˆ™</p></li><li><p>typeå±æ€§ï¼šè®¾ç½®æ’é™¤è§„åˆ™ï¼Œå½“å‰ä½¿ç”¨æŒ‰ç…§beanå®šä¹‰æ—¶çš„æ³¨è§£ç±»å‹è¿›è¡Œæ’é™¤</p><ul><li>ANNOTATIONï¼šæŒ‰ç…§æ³¨è§£æ’é™¤</li><li>ASSIGNABLE_TYPE:æŒ‰ç…§æŒ‡å®šçš„ç±»å‹è¿‡æ»¤</li><li>ASPECTJ:æŒ‰ç…§Aspectjè¡¨è¾¾å¼æ’é™¤ï¼ŒåŸºæœ¬ä¸Šä¸ä¼šç”¨</li><li>REGEX:æŒ‰ç…§æ­£åˆ™è¡¨è¾¾å¼æ’é™¤</li><li>CUSTOM:æŒ‰ç…§è‡ªå®šä¹‰è§„åˆ™æ’é™¤</li></ul><p>å¤§å®¶åªéœ€è¦çŸ¥é“ç¬¬ä¸€ç§ANNOTATIONå³å¯</p></li><li><p>classeså±æ€§ï¼šè®¾ç½®æ’é™¤çš„å…·ä½“æ³¨è§£ç±»ï¼Œå½“å‰è®¾ç½®æ’é™¤@Controllerå®šä¹‰çš„bean</p></li></ul><p>å¦‚ä½•æµ‹è¯•controllerç±»å·²ç»è¢«æ’é™¤æ‰äº†?</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">App</span>&#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span> <span class="params">(String[] args)</span>&#123;</span><br><span class="line">        <span class="type">AnnotationConfigApplicationContext</span> <span class="variable">ctx</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AnnotationConfigApplicationContext</span>(SpringConfig.class);</span><br><span class="line">        System.out.println(ctx.getBean(UserController.class));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚æœè¢«æ’é™¤äº†ï¼Œè¯¥æ–¹æ³•æ‰§è¡Œå°±ä¼šæŠ¥beanæœªè¢«å®šä¹‰çš„é”™è¯¯</p><p><img src="/2022/08/03/SpringMVC_day01/1630462200947.png" alt="1630462200947"></p><p><strong><code>æ³¨æ„ï¼šæµ‹è¯•çš„æ—¶å€™ï¼Œéœ€è¦æŠŠSpringMvcConfigé…ç½®ç±»ä¸Šçš„@ComponentScanæ³¨è§£æ³¨é‡Šæ‰ï¼Œå¦åˆ™ä¸ä¼šæŠ¥é”™</code></strong></p><p>å‡ºç°é—®é¢˜çš„<strong>åŸå› </strong>æ˜¯ï¼š</p><ul><li>Springé…ç½®ç±»æ‰«æçš„åŒ…æ˜¯<code>com.itheima</code></li><li>SpringMVCçš„é…ç½®ç±»ï¼Œ<code>SpringMvcConfig</code>ä¸Šæœ‰ä¸€ä¸ª<code>@Configuration</code>æ³¨è§£ï¼Œä¹Ÿä¼šè¢«Springæ‰«æåˆ°</li><li>SpringMvcConfigä¸Š<strong>åˆ</strong>æœ‰ä¸€ä¸ª<code>@ComponentScan</code>ï¼ŒæŠŠcontrollerç±»åˆç»™æ‰«æè¿›æ¥äº†</li><li>æ‰€ä»¥å¦‚æœä¸æŠŠ@ComponentScanæ³¨é‡Šæ‰ï¼ŒSpringé…ç½®ç±»å°†Controlleræ’é™¤ï¼Œä½†æ˜¯å› ä¸ºæ‰«æåˆ°SpringMVCçš„é…ç½®ç±»ï¼Œåˆå°†å…¶åŠ è½½å›æ¥ï¼Œæ¼”ç¤ºçš„æ•ˆæœå°±å‡ºä¸æ¥</li><li>è§£å†³æ–¹æ¡ˆï¼Œä¹Ÿç®€å•ï¼ŒæŠŠSpringMVCçš„é…ç½®ç±»ç§»å‡ºSpringé…ç½®ç±»çš„æ‰«æèŒƒå›´å³å¯ã€‚</li></ul><p>æœ€åä¸€ä¸ªé—®é¢˜ï¼Œæœ‰äº†Springçš„é…ç½®ç±»ï¼Œè¦æƒ³åœ¨tomcatæœåŠ¡å™¨å¯åŠ¨å°†å…¶åŠ è½½ï¼Œæˆ‘ä»¬éœ€è¦ä¿®æ”¹ServletContainersInitConfig</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ServletContainersInitConfig</span> <span class="keyword">extends</span> <span class="title class_">AbstractDispatcherServletInitializer</span> &#123;</span><br><span class="line">    <span class="keyword">protected</span> WebApplicationContext <span class="title function_">createServletApplicationContext</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">AnnotationConfigWebApplicationContext</span> <span class="variable">ctx</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AnnotationConfigWebApplicationContext</span>();</span><br><span class="line">        ctx.register(SpringMvcConfig.class);</span><br><span class="line">        <span class="keyword">return</span> ctx;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">protected</span> String[] getServletMappings() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">String</span>[]&#123;<span class="string">&quot;/&quot;</span>&#125;;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">protected</span> WebApplicationContext <span class="title function_">createRootApplicationContext</span><span class="params">()</span> &#123;</span><br><span class="line">      <span class="type">AnnotationConfigWebApplicationContext</span> <span class="variable">ctx</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AnnotationConfigWebApplicationContext</span>();</span><br><span class="line">        ctx.register(SpringConfig.class);</span><br><span class="line">        <span class="keyword">return</span> ctx;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯¹äºä¸Šè¿°çš„é…ç½®æ–¹å¼ï¼ŒSpringè¿˜æä¾›äº†ä¸€ç§æ›´ç®€å•çš„é…ç½®æ–¹å¼ï¼Œå¯ä»¥ä¸ç”¨å†å»åˆ›å»º<code>AnnotationConfigWebApplicationContext</code>å¯¹è±¡ï¼Œä¸ç”¨æ‰‹åŠ¨<code>register</code>å¯¹åº”çš„é…ç½®ç±»ï¼Œå¦‚ä½•å®ç°?</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ServletContainersInitConfig</span> <span class="keyword">extends</span> <span class="title class_">AbstractAnnotationConfigDispatcherServletInitializer</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> Class&lt;?&gt;[] getRootConfigClasses() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Class</span>[]&#123;SpringConfig.class&#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> Class&lt;?&gt;[] getServletConfigClasses() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Class</span>[]&#123;SpringMvcConfig.class&#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> String[] getServletMappings() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">String</span>[]&#123;<span class="string">&quot;/&quot;</span>&#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å°†<code>ServletContainersInitConfig</code>ç»§æ‰¿<strong>AbstractAnnotationConfigDispatcherServletInitializer</strong>å®ç°ä¸‰ä¸ªæŠ½è±¡æ–¹æ³•ã€‚å…¶ä¸­<code>getRootConfigClasses()</code>å¯¹åº”&#96;&#96;SpringConfig.class<code>ã€</code>getServletConfigClasses()<code>å¯¹åº”</code>SpringMvcConfig.class&#96;</p><h3 id="çŸ¥è¯†ç‚¹1ï¼š-ComponentScan"><a href="#çŸ¥è¯†ç‚¹1ï¼š-ComponentScan" class="headerlink" title="çŸ¥è¯†ç‚¹1ï¼š@ComponentScan"></a>çŸ¥è¯†ç‚¹1ï¼š@ComponentScan</h3><table><thead><tr><th>åç§°</th><th>@ComponentScan</th></tr></thead><tbody><tr><td>ç±»å‹</td><td>ç±»æ³¨è§£</td></tr><tr><td>ä½ç½®</td><td>ç±»å®šä¹‰ä¸Šæ–¹</td></tr><tr><td>ä½œç”¨</td><td>è®¾ç½®springé…ç½®ç±»æ‰«æè·¯å¾„ï¼Œç”¨äºåŠ è½½ä½¿ç”¨æ³¨è§£æ ¼å¼å®šä¹‰çš„bean</td></tr><tr><td>ç›¸å…³å±æ€§</td><td>excludeFiltersï¼šæ’é™¤æ‰«æè·¯å¾„ä¸­åŠ è½½çš„bean,éœ€è¦æŒ‡å®šç±»åˆ«(type)å’Œå…·ä½“é¡¹(classes)<br>includeFiltersï¼šåŠ è½½æŒ‡å®šçš„beanï¼Œéœ€è¦æŒ‡å®šç±»åˆ«(type)å’Œå…·ä½“é¡¹(classes)</td></tr></tbody></table><h2 id="2ï¼ŒPostManå·¥å…·çš„ä½¿ç”¨"><a href="#2ï¼ŒPostManå·¥å…·çš„ä½¿ç”¨" class="headerlink" title="2ï¼ŒPostManå·¥å…·çš„ä½¿ç”¨"></a>2ï¼ŒPostManå·¥å…·çš„ä½¿ç”¨</h2><h3 id="2-1-PostManç®€ä»‹"><a href="#2-1-PostManç®€ä»‹" class="headerlink" title="2.1 PostManç®€ä»‹"></a>2.1 PostManç®€ä»‹</h3><p>ï¼ˆè¿™ä¸ªä½ç½®ä¸ªäººæ›´å»ºè®®ç”¨<a href="https://www.apifox.cn/">Apifox</a>ï¼Œå›½äº§ä¸­æ–‡åŠŸèƒ½æ›´å¼ºå¤§ä¸”ä¸­é—´æœ‰ä¸PostManç±»ä¼¼çš„ç•Œé¢ã€‚å› ä¸ºä¸ªäººæ‰€å­¦è¯¾ç¨‹ä¸­ç”¨çš„æ˜¯PostManï¼Œæ‰€ä»¥ç¬”è®°è¿™ä¸ªåœ°æ–¹ç”¨PostManï¼‰</p><p>ä»£ç ç¼–å†™å®Œåï¼Œæˆ‘ä»¬è¦æƒ³æµ‹è¯•ï¼Œåªéœ€è¦æ‰“å¼€æµè§ˆå™¨ç›´æ¥è¾“å…¥åœ°å€å‘é€è¯·æ±‚å³å¯ã€‚ä½†æ˜¯æˆ‘ä»¬å¦‚æœæˆ‘ä»¬å‘é€çš„æ˜¯<code>GET</code>è¯·æ±‚å¯ä»¥ç›´æ¥ä½¿ç”¨æµè§ˆå™¨ï¼Œä½†æ˜¯å¦‚æœè¦å‘é€çš„æ˜¯<code>POST</code>è¯·æ±‚å‘¢?</p><p>å¦‚æœè¦æ±‚å‘é€çš„æ˜¯postè¯·æ±‚ï¼Œæˆ‘ä»¬å°±å¾—å‡†å¤‡é¡µé¢åœ¨é¡µé¢ä¸Šå‡†å¤‡formè¡¨å•ï¼Œæµ‹è¯•èµ·æ¥æ¯”è¾ƒéº»çƒ¦ã€‚æ‰€ä»¥æˆ‘ä»¬å°±éœ€è¦å€ŸåŠ©ä¸€äº›ç¬¬ä¸‰æ–¹å·¥å…·ï¼Œå¦‚PostMan.</p><ul><li><p>PostManæ˜¯ä¸€æ¬¾åŠŸèƒ½å¼ºå¤§çš„ç½‘é¡µè°ƒè¯•ä¸å‘é€ç½‘é¡µHTTPè¯·æ±‚çš„Chromeæ’ä»¶ã€‚<img src="/2022/08/03/SpringMVC_day01/1630463382386.png" alt="1630463382386"></p></li><li><p>ä½œç”¨ï¼šå¸¸ç”¨äºè¿›è¡Œæ¥å£æµ‹è¯•</p></li><li><p>ç‰¹å¾</p><ul><li>ç®€å•</li><li>å®ç”¨</li><li>ç¾è§‚</li><li>å¤§æ–¹</li></ul></li></ul><h3 id="2-2-PostManå®‰è£…"><a href="#2-2-PostManå®‰è£…" class="headerlink" title="2.2 PostManå®‰è£…"></a>2.2 PostManå®‰è£…</h3><p>å®‰è£…å®Œæˆåï¼Œå¦‚æœéœ€è¦æ³¨å†Œï¼Œå¯ä»¥æŒ‰ç…§æç¤ºè¿›è¡Œæ³¨å†Œï¼Œå¦‚æœåº•éƒ¨æœ‰è·³è¿‡æµ‹è¯•çš„é“¾æ¥ä¹Ÿå¯ä»¥ç‚¹å‡»è·³è¿‡æ³¨å†Œ</p><p><img src="/2022/08/03/SpringMVC_day01/1630463816424.png" alt="1630463816424"></p><p>çœ‹åˆ°å¦‚ä¸‹ç•Œé¢ï¼Œå°±è¯´æ˜å·²ç»å®‰è£…æˆåŠŸã€‚</p><p><img src="/2022/08/03/SpringMVC_day01/1630463887711.png" alt="1630463887711"></p><h3 id="2-3-PostManä½¿ç”¨"><a href="#2-3-PostManä½¿ç”¨" class="headerlink" title="2.3 PostManä½¿ç”¨"></a>2.3 PostManä½¿ç”¨</h3><h4 id="2-3-1-åˆ›å»ºWorkSpaceå·¥ä½œç©ºé—´"><a href="#2-3-1-åˆ›å»ºWorkSpaceå·¥ä½œç©ºé—´" class="headerlink" title="2.3.1 åˆ›å»ºWorkSpaceå·¥ä½œç©ºé—´"></a>2.3.1 åˆ›å»ºWorkSpaceå·¥ä½œç©ºé—´</h4><p><img src="/2022/08/03/SpringMVC_day01/image-20210805150044862.png"></p><h4 id="2-3-2-å‘é€è¯·æ±‚"><a href="#2-3-2-å‘é€è¯·æ±‚" class="headerlink" title="2.3.2 å‘é€è¯·æ±‚"></a>2.3.2 å‘é€è¯·æ±‚</h4><p><img src="/2022/08/03/SpringMVC_day01/1630464489898.png" alt="1630464489898"></p><h4 id="2-3-3-ä¿å­˜å½“å‰è¯·æ±‚"><a href="#2-3-3-ä¿å­˜å½“å‰è¯·æ±‚" class="headerlink" title="2.3.3 ä¿å­˜å½“å‰è¯·æ±‚"></a>2.3.3 ä¿å­˜å½“å‰è¯·æ±‚</h4><p><img src="/2022/08/03/SpringMVC_day01/1630464783034.png" alt="1630464783034"></p><p>**æ³¨æ„:**ç¬¬ä¸€æ¬¡è¯·æ±‚éœ€è¦åˆ›å»ºä¸€ä¸ªæ–°çš„ç›®å½•ï¼Œåé¢å°±ä¸éœ€è¦åˆ›å»ºæ–°ç›®å½•ï¼Œç›´æ¥ä¿å­˜åˆ°å·²ç»åˆ›å»ºå¥½çš„ç›®å½•å³å¯ã€‚</p><h2 id="3ï¼Œè¯·æ±‚ä¸å“åº”"><a href="#3ï¼Œè¯·æ±‚ä¸å“åº”" class="headerlink" title="3ï¼Œè¯·æ±‚ä¸å“åº”"></a>3ï¼Œè¯·æ±‚ä¸å“åº”</h2><p>å‰é¢æˆ‘ä»¬å·²ç»å®Œæˆäº†å…¥é—¨æ¡ˆä¾‹ç›¸å…³çš„çŸ¥è¯†å­¦ä¹ ï¼Œæ¥æ¥äº†æˆ‘ä»¬å°±éœ€è¦é’ˆå¯¹SpringMVCç›¸å…³çš„çŸ¥è¯†ç‚¹è¿›è¡Œç³»ç»Ÿçš„å­¦ä¹ ï¼Œä¹‹å‰æˆ‘ä»¬æåˆ°è¿‡ï¼ŒSpringMVCæ˜¯webå±‚çš„æ¡†æ¶ï¼Œä¸»è¦çš„ä½œç”¨æ˜¯æ¥æ”¶è¯·æ±‚ã€æ¥æ”¶æ•°æ®ã€å“åº”ç»“æœï¼Œæ‰€ä»¥è¿™ä¸€ç« èŠ‚æ˜¯å­¦ä¹ SpringMVCçš„<strong>é‡ç‚¹</strong>å†…å®¹ï¼Œæˆ‘ä»¬ä¸»è¦ä¼šè®²è§£å››éƒ¨åˆ†å†…å®¹:</p><ul><li>è¯·æ±‚æ˜ å°„è·¯å¾„</li><li>è¯·æ±‚å‚æ•°</li><li>æ—¥æœŸç±»å‹å‚æ•°ä¼ é€’</li><li>å“åº”jsonæ•°æ®</li></ul><h3 id="3-1-è®¾ç½®è¯·æ±‚æ˜ å°„è·¯å¾„"><a href="#3-1-è®¾ç½®è¯·æ±‚æ˜ å°„è·¯å¾„" class="headerlink" title="3.1 è®¾ç½®è¯·æ±‚æ˜ å°„è·¯å¾„"></a>3.1 è®¾ç½®è¯·æ±‚æ˜ å°„è·¯å¾„</h3><h4 id="3-1-1-ç¯å¢ƒå‡†å¤‡"><a href="#3-1-1-ç¯å¢ƒå‡†å¤‡" class="headerlink" title="3.1.1 ç¯å¢ƒå‡†å¤‡"></a>3.1.1 ç¯å¢ƒå‡†å¤‡</h4><ul><li><p>åˆ›å»ºä¸€ä¸ªWebçš„Mavené¡¹ç›®</p></li><li><p>pom.xmlæ·»åŠ Springä¾èµ–</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.itheima<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springmvc_03_request_mapping<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>war<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.10.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.tomcat.maven<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>tomcat7-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">port</span>&gt;</span>80<span class="tag">&lt;/<span class="name">port</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">path</span>&gt;</span>/<span class="tag">&lt;/<span class="name">path</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>åˆ›å»ºå¯¹åº”çš„é…ç½®ç±»</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ServletContainersInitConfig</span> <span class="keyword">extends</span> <span class="title class_">AbstractAnnotationConfigDispatcherServletInitializer</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> Class&lt;?&gt;[] getServletConfigClasses() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Class</span>[]&#123;SpringMvcConfig.class&#125;;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">protected</span> String[] getServletMappings() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">String</span>[]&#123;<span class="string">&quot;/&quot;</span>&#125;;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">protected</span> Class&lt;?&gt;[] getRootConfigClasses() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Class</span>[<span class="number">0</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ComponentScan(&quot;com.itheima.controller&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringMvcConfig</span> &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>ç¼–å†™BookControllerå’ŒUserController</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/save&quot;)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">save</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;user save ...&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;&#123;&#x27;module&#x27;:&#x27;user save&#x27;&#125;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/delete&quot;)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">save</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;user delete ...&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;&#123;&#x27;module&#x27;:&#x27;user delete&#x27;&#125;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/save&quot;)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">save</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;book save ...&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;&#123;&#x27;module&#x27;:&#x27;book save&#x27;&#125;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p>æœ€ç»ˆåˆ›å»ºå¥½çš„é¡¹ç›®ç»“æ„å¦‚ä¸‹:</p><p><img src="/2022/08/03/SpringMVC_day01/1630466431549.png" alt="1630466431549"></p><p>æŠŠç¯å¢ƒå‡†å¤‡å¥½åï¼Œå¯åŠ¨TomcatæœåŠ¡å™¨ï¼Œåå°ä¼šæŠ¥é”™:</p><p><img src="/2022/08/03/SpringMVC_day01/1630466555934.png" alt="1630466555934"></p><p>ä»é”™è¯¯ä¿¡æ¯å¯ä»¥çœ‹å‡º:</p><ul><li>UserControlleræœ‰ä¸€ä¸ªsaveæ–¹æ³•ï¼Œè®¿é—®è·¯å¾„ä¸º<code>http://localhost/save</code></li><li>BookControllerä¹Ÿæœ‰ä¸€ä¸ªsaveæ–¹æ³•ï¼Œè®¿é—®è·¯å¾„ä¸º<code>http://localhost/save</code></li><li>å½“è®¿é—®<code>http://localhost/saved</code>çš„æ—¶å€™ï¼Œåˆ°åº•æ˜¯è®¿é—®UserControllerè¿˜æ˜¯BookController?</li></ul><h4 id="3-1-2-é—®é¢˜åˆ†æ"><a href="#3-1-2-é—®é¢˜åˆ†æ" class="headerlink" title="3.1.2 é—®é¢˜åˆ†æ"></a>3.1.2 é—®é¢˜åˆ†æ</h4><p>å›¢é˜Ÿå¤šäººå¼€å‘ï¼Œæ¯äººè®¾ç½®ä¸åŒçš„è¯·æ±‚è·¯å¾„ï¼Œå†²çªé—®é¢˜è¯¥å¦‚ä½•è§£å†³?</p><p>è§£å†³æ€è·¯:ä¸ºä¸åŒæ¨¡å—è®¾ç½®æ¨¡å—åä½œä¸ºè¯·æ±‚è·¯å¾„å‰ç½®</p><p>å¯¹äºBookæ¨¡å—çš„save,å°†å…¶è®¿é—®è·¯å¾„è®¾ç½®<code>http://localhost/book/save</code></p><p>å¯¹äºUseræ¨¡å—çš„save,å°†å…¶è®¿é—®è·¯å¾„è®¾ç½®<code>http://localhost/user/save</code></p><p>è¿™æ ·åœ¨åŒä¸€ä¸ªæ¨¡å—ä¸­å‡ºç°å‘½åå†²çªçš„æƒ…å†µå°±æ¯”è¾ƒå°‘äº†ã€‚</p><h4 id="3-1-3-è®¾ç½®æ˜ å°„è·¯å¾„"><a href="#3-1-3-è®¾ç½®æ˜ å°„è·¯å¾„" class="headerlink" title="3.1.3 è®¾ç½®æ˜ å°„è·¯å¾„"></a>3.1.3 è®¾ç½®æ˜ å°„è·¯å¾„</h4><h5 id="æ­¥éª¤1ï¼šä¿®æ”¹Controller"><a href="#æ­¥éª¤1ï¼šä¿®æ”¹Controller" class="headerlink" title="æ­¥éª¤1ï¼šä¿®æ”¹Controller"></a>æ­¥éª¤1ï¼šä¿®æ”¹Controller</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/user/save&quot;)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">save</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;user save ...&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;&#123;&#x27;module&#x27;:&#x27;user save&#x27;&#125;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/user/delete&quot;)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">save</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;user delete ...&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;&#123;&#x27;module&#x27;:&#x27;user delete&#x27;&#125;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/book/save&quot;)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">save</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;book save ...&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;&#123;&#x27;module&#x27;:&#x27;book save&#x27;&#125;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é—®é¢˜æ˜¯è§£å†³äº†ï¼Œä½†æ˜¯æ¯ä¸ªæ–¹æ³•å‰é¢éƒ½éœ€è¦è¿›è¡Œä¿®æ”¹ï¼Œå†™èµ·æ¥æ¯”è¾ƒéº»çƒ¦è€Œä¸”è¿˜æœ‰å¾ˆå¤šé‡å¤ä»£ç ï¼Œå¦‚æœ&#x2F;useråæœŸå‘ç”Ÿå˜åŒ–ï¼Œæ‰€æœ‰çš„æ–¹æ³•éƒ½éœ€è¦æ”¹ï¼Œè€¦åˆåº¦å¤ªé«˜ã€‚</p><h5 id="æ­¥éª¤2ï¼šä¼˜åŒ–è·¯å¾„é…ç½®"><a href="#æ­¥éª¤2ï¼šä¼˜åŒ–è·¯å¾„é…ç½®" class="headerlink" title="æ­¥éª¤2ï¼šä¼˜åŒ–è·¯å¾„é…ç½®"></a>æ­¥éª¤2ï¼šä¼˜åŒ–è·¯å¾„é…ç½®</h5><p>ä¼˜åŒ–æ–¹æ¡ˆ:</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/save&quot;)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">save</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;user save ...&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;&#123;&#x27;module&#x27;:&#x27;user save&#x27;&#125;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/delete&quot;)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">save</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;user delete ...&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;&#123;&#x27;module&#x27;:&#x27;user delete&#x27;&#125;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/book&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/save&quot;)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">save</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;book save ...&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;&#123;&#x27;module&#x27;:&#x27;book save&#x27;&#125;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>**æ³¨æ„: å½“ç±»ä¸Šå’Œæ–¹æ³•ä¸Šéƒ½æ·»åŠ äº†<code>@RequestMapping</code>æ³¨è§£ï¼Œå‰ç«¯å‘é€è¯·æ±‚çš„æ—¶å€™ï¼Œè¦å’Œä¸¤ä¸ªæ³¨è§£çš„valueå€¼ç›¸åŠ åŒ¹é…æ‰èƒ½è®¿é—®åˆ°ã€‚</p><ul><li>@RequestMappingæ³¨è§£valueå±æ€§å‰é¢åŠ ä¸åŠ <code>/</code>éƒ½å¯ä»¥</li></ul><p>æ‰©å±•å°çŸ¥è¯†:</p><p>å¯¹äºPostManå¦‚ä½•è§‰å¾—å­—å°ä¸å¥½çœ‹ï¼Œå¯ä»¥ä½¿ç”¨<code>ctrl+=</code>è°ƒå¤§ï¼Œ<code>ctrl+-</code>è°ƒå°ã€‚</p><h3 id="3-2-è¯·æ±‚å‚æ•°"><a href="#3-2-è¯·æ±‚å‚æ•°" class="headerlink" title="3.2 è¯·æ±‚å‚æ•°"></a>3.2 è¯·æ±‚å‚æ•°</h3><p>è¯·æ±‚è·¯å¾„è®¾ç½®å¥½åï¼Œåªè¦ç¡®ä¿é¡µé¢å‘é€è¯·æ±‚åœ°å€å’Œåå°Controllerç±»ä¸­é…ç½®çš„è·¯å¾„ä¸€è‡´ï¼Œå°±å¯ä»¥æ¥æ”¶åˆ°å‰ç«¯çš„è¯·æ±‚ï¼Œæ¥æ”¶åˆ°è¯·æ±‚åï¼Œå¦‚ä½•æ¥æ”¶é¡µé¢ä¼ é€’çš„å‚æ•°?</p><p>å…³äºè¯·æ±‚å‚æ•°çš„ä¼ é€’ä¸æ¥æ”¶æ˜¯å’Œè¯·æ±‚æ–¹å¼æœ‰å…³ç³»çš„ï¼Œç›®å‰æ¯”è¾ƒå¸¸è§çš„ä¸¤ç§è¯·æ±‚æ–¹å¼ä¸ºï¼š</p><ul><li>GET</li><li>POST</li></ul><p>é’ˆå¯¹äºä¸åŒçš„è¯·æ±‚å‰ç«¯å¦‚ä½•å‘é€ï¼Œåç«¯å¦‚ä½•æ¥æ”¶?</p><h4 id="3-2-1-ç¯å¢ƒå‡†å¤‡"><a href="#3-2-1-ç¯å¢ƒå‡†å¤‡" class="headerlink" title="3.2.1 ç¯å¢ƒå‡†å¤‡"></a>3.2.1 ç¯å¢ƒå‡†å¤‡</h4><ul><li><p>åˆ›å»ºä¸€ä¸ªWebçš„Mavené¡¹ç›®</p></li><li><p>pom.xmlæ·»åŠ Springä¾èµ–</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.itheima<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springmvc_03_request_mapping<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>war<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.10.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.tomcat.maven<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>tomcat7-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">port</span>&gt;</span>80<span class="tag">&lt;/<span class="name">port</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">path</span>&gt;</span>/<span class="tag">&lt;/<span class="name">path</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>åˆ›å»ºå¯¹åº”çš„é…ç½®ç±»</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ServletContainersInitConfig</span> <span class="keyword">extends</span> <span class="title class_">AbstractAnnotationConfigDispatcherServletInitializer</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> Class&lt;?&gt;[] getServletConfigClasses() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Class</span>[]&#123;SpringMvcConfig.class&#125;;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">protected</span> String[] getServletMappings() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">String</span>[]&#123;<span class="string">&quot;/&quot;</span>&#125;;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">protected</span> Class&lt;?&gt;[] getRootConfigClasses() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Class</span>[<span class="number">0</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ComponentScan(&quot;com.itheima.controller&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringMvcConfig</span> &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>ç¼–å†™UserController</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/commonParam&quot;)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">commonParam</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;&#123;&#x27;module&#x27;:&#x27;commonParam&#x27;&#125;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><ul><li><p>ç¼–å†™æ¨¡å‹ç±»ï¼ŒUserå’ŒAddress</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Address</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String province;</span><br><span class="line">    <span class="keyword">private</span> String city;</span><br><span class="line">    <span class="comment">//setter...getter...ç•¥</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line">    <span class="comment">//setter...getter...ç•¥</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p>æœ€ç»ˆåˆ›å»ºå¥½çš„é¡¹ç›®ç»“æ„å¦‚ä¸‹:</p><p><img src="/2022/08/03/SpringMVC_day01/1630467830654.png" alt="1630467830654"></p><h4 id="3-2-2-å‚æ•°ä¼ é€’"><a href="#3-2-2-å‚æ•°ä¼ é€’" class="headerlink" title="3.2.2 å‚æ•°ä¼ é€’"></a>3.2.2 å‚æ•°ä¼ é€’</h4><h5 id="GETå‘é€å•ä¸ªå‚æ•°"><a href="#GETå‘é€å•ä¸ªå‚æ•°" class="headerlink" title="GETå‘é€å•ä¸ªå‚æ•°"></a>GETå‘é€å•ä¸ªå‚æ•°</h5><p>å‘é€è¯·æ±‚ä¸å‚æ•°:</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">http://localhost/commonParam?name=itcast</span><br></pre></td></tr></table></figure><p><img src="/2022/08/03/SpringMVC_day01/1630467921300.png" alt="1630467921300"></p><p>æ¥æ”¶å‚æ•°ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/commonParam&quot;)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">commonParam</span><span class="params">(String name)</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ™®é€šå‚æ•°ä¼ é€’ name ==&gt; &quot;</span>+name);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;&#123;&#x27;module&#x27;:&#x27;commonParam&#x27;&#125;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="GETå‘é€å¤šä¸ªå‚æ•°"><a href="#GETå‘é€å¤šä¸ªå‚æ•°" class="headerlink" title="GETå‘é€å¤šä¸ªå‚æ•°"></a>GETå‘é€å¤šä¸ªå‚æ•°</h5><p>å‘é€è¯·æ±‚ä¸å‚æ•°:</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">http://localhost/commonParam?name=itcast&amp;age=15</span><br></pre></td></tr></table></figure><p><img src="/2022/08/03/SpringMVC_day01/1630468045733.png" alt="1630468045733"></p><p>æ¥æ”¶å‚æ•°ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/commonParam&quot;)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">commonParam</span><span class="params">(String name,<span class="type">int</span> age)</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ™®é€šå‚æ•°ä¼ é€’ name ==&gt; &quot;</span>+name);</span><br><span class="line">        System.out.println(<span class="string">&quot;æ™®é€šå‚æ•°ä¼ é€’ age ==&gt; &quot;</span>+age);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;&#123;&#x27;module&#x27;:&#x27;commonParam&#x27;&#125;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="GETè¯·æ±‚ä¸­æ–‡ä¹±ç "><a href="#GETè¯·æ±‚ä¸­æ–‡ä¹±ç " class="headerlink" title="GETè¯·æ±‚ä¸­æ–‡ä¹±ç "></a>GETè¯·æ±‚ä¸­æ–‡ä¹±ç </h5><p>å¦‚æœæˆ‘ä»¬ä¼ é€’çš„å‚æ•°ä¸­æœ‰ä¸­æ–‡ï¼Œä½ ä¼šå‘ç°æ¥æ”¶åˆ°çš„å‚æ•°ä¼šå‡ºç°ä¸­æ–‡ä¹±ç é—®é¢˜ã€‚</p><p>å‘é€è¯·æ±‚:<code>http://localhost/commonParam?name=å¼ ä¸‰&amp;age=18</code></p><p>æ§åˆ¶å°:</p><p><img src="/2022/08/03/SpringMVC_day01/1630480536510.png" alt="1630480536510"></p><p>å‡ºç°ä¹±ç çš„åŸå› ç›¸ä¿¡å¤§å®¶éƒ½æ¸…æ¥šï¼ŒTomcat8.5ä»¥åçš„ç‰ˆæœ¬å·²ç»å¤„ç†äº†ä¸­æ–‡ä¹±ç çš„é—®é¢˜ï¼Œä½†æ˜¯IDEAä¸­çš„Tomcatæ’ä»¶ç›®å‰åªåˆ°Tomcat7ï¼Œæ‰€ä»¥éœ€è¦<strong>ä¿®æ”¹pom.xmlæ¥è§£å†³GETè¯·æ±‚ä¸­æ–‡ä¹±ç é—®é¢˜</strong></p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.tomcat.maven<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>tomcat7-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">port</span>&gt;</span>80<span class="tag">&lt;/<span class="name">port</span>&gt;</span><span class="comment">&lt;!--tomcatç«¯å£å·--&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">path</span>&gt;</span>/<span class="tag">&lt;/<span class="name">path</span>&gt;</span> <span class="comment">&lt;!--è™šæ‹Ÿç›®å½•--&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">uriEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">uriEncoding</span>&gt;</span><span class="comment">&lt;!--è®¿é—®è·¯å¾„ç¼–è§£ç å­—ç¬¦é›†--&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="POSTå‘é€å‚æ•°"><a href="#POSTå‘é€å‚æ•°" class="headerlink" title="POSTå‘é€å‚æ•°"></a>POSTå‘é€å‚æ•°</h5><p>å‘é€è¯·æ±‚ä¸å‚æ•°:</p><p><img src="/2022/08/03/SpringMVC_day01/1630480812809.png" alt="1630480812809">æ¥æ”¶å‚æ•°ï¼š</p><p>å’ŒGETä¸€è‡´ï¼Œä¸ç”¨åšä»»ä½•ä¿®æ”¹</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/commonParam&quot;)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">commonParam</span><span class="params">(String name,<span class="type">int</span> age)</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ™®é€šå‚æ•°ä¼ é€’ name ==&gt; &quot;</span>+name);</span><br><span class="line">        System.out.println(<span class="string">&quot;æ™®é€šå‚æ•°ä¼ é€’ age ==&gt; &quot;</span>+age);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;&#123;&#x27;module&#x27;:&#x27;commonParam&#x27;&#125;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="POSTè¯·æ±‚ä¸­æ–‡ä¹±ç "><a href="#POSTè¯·æ±‚ä¸­æ–‡ä¹±ç " class="headerlink" title="POSTè¯·æ±‚ä¸­æ–‡ä¹±ç "></a>POSTè¯·æ±‚ä¸­æ–‡ä¹±ç </h5><p>å‘é€è¯·æ±‚ä¸å‚æ•°:</p><p><img src="/2022/08/03/SpringMVC_day01/1630480964421.png" alt="1630480964421"></p><p>æ¥æ”¶å‚æ•°:</p><p>æ§åˆ¶å°æ‰“å°ï¼Œä¼šå‘ç°æœ‰ä¸­æ–‡ä¹±ç é—®é¢˜ã€‚</p><p><img src="/2022/08/03/SpringMVC_day01/1630481008109.png" alt="1630481008109"></p><p>è§£å†³æ–¹æ¡ˆï¼šé…ç½®è¿‡æ»¤å™¨</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ServletContainersInitConfig</span> <span class="keyword">extends</span> <span class="title class_">AbstractAnnotationConfigDispatcherServletInitializer</span> &#123;</span><br><span class="line">    <span class="keyword">protected</span> Class&lt;?&gt;[] getRootConfigClasses() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Class</span>[<span class="number">0</span>];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> Class&lt;?&gt;[] getServletConfigClasses() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Class</span>[]&#123;SpringMvcConfig.class&#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> String[] getServletMappings() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">String</span>[]&#123;<span class="string">&quot;/&quot;</span>&#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ä¹±ç å¤„ç†</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> Filter[] getServletFilters() &#123;</span><br><span class="line">        <span class="type">CharacterEncodingFilter</span> <span class="variable">filter</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CharacterEncodingFilter</span>();</span><br><span class="line">        filter.setEncoding(<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Filter</span>[]&#123;filter&#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>CharacterEncodingFilteræ˜¯åœ¨spring-webåŒ…ä¸­ï¼Œæ‰€ä»¥ç”¨ä¹‹å‰éœ€è¦å¯¼å…¥å¯¹åº”çš„jaråŒ…ã€‚</p><h3 id="3-3-äº”ç§ç±»å‹å‚æ•°ä¼ é€’"><a href="#3-3-äº”ç§ç±»å‹å‚æ•°ä¼ é€’" class="headerlink" title="3.3 äº”ç§ç±»å‹å‚æ•°ä¼ é€’"></a>3.3 äº”ç§ç±»å‹å‚æ•°ä¼ é€’</h3><p>å‰é¢æˆ‘ä»¬å·²ç»èƒ½å¤Ÿä½¿ç”¨GETæˆ–POSTæ¥å‘é€è¯·æ±‚å’Œæ•°æ®ï¼Œæ‰€æºå¸¦çš„æ•°æ®éƒ½æ˜¯æ¯”è¾ƒç®€å•çš„æ•°æ®ï¼Œæ¥ä¸‹æ¥åœ¨è¿™ä¸ªåŸºç¡€ä¸Šï¼Œæˆ‘ä»¬æ¥ç ”ç©¶ä¸€äº›æ¯”è¾ƒè´Ÿè´£çš„å‚æ•°ä¼ é€’ï¼Œå¸¸è§çš„å‚æ•°ç§ç±»æœ‰:</p><ul><li>æ™®é€šå‚æ•°</li><li>POJOç±»å‹å‚æ•°</li><li>åµŒå¥—POJOç±»å‹å‚æ•°</li><li>æ•°ç»„ç±»å‹å‚æ•°</li><li>é›†åˆç±»å‹å‚æ•°</li></ul><h4 id="3-3-1-æ™®é€šå‚æ•°"><a href="#3-3-1-æ™®é€šå‚æ•°" class="headerlink" title="3.3.1 æ™®é€šå‚æ•°"></a>3.3.1 æ™®é€šå‚æ•°</h4><ul><li>æ™®é€šå‚æ•°:urlåœ°å€ä¼ å‚ï¼Œåœ°å€å‚æ•°åä¸å½¢å‚å˜é‡åç›¸åŒï¼Œå®šä¹‰å½¢å‚å³å¯æ¥æ”¶å‚æ•°ã€‚</li></ul><p><img src="/2022/08/03/SpringMVC_day01/1630481585729.png" alt="1630481585729"></p><p>å¦‚æœå½¢å‚ä¸åœ°å€å‚æ•°åä¸ä¸€è‡´è¯¥å¦‚ä½•è§£å†³?</p><p>å‘é€è¯·æ±‚ä¸å‚æ•°ï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">http://localhost/commonParamDifferentName?name=å¼ ä¸‰&amp;age=18</span><br></pre></td></tr></table></figure><p>åå°æ¥æ”¶å‚æ•°:</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/commonParamDifferentName&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">commonParamDifferentName</span><span class="params">(String userName , <span class="type">int</span> age)</span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;æ™®é€šå‚æ•°ä¼ é€’ userName ==&gt; &quot;</span>+userName);</span><br><span class="line">    System.out.println(<span class="string">&quot;æ™®é€šå‚æ•°ä¼ é€’ age ==&gt; &quot;</span>+age);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;&#123;&#x27;module&#x27;:&#x27;common param different name&#x27;&#125;&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å› ä¸ºå‰ç«¯ç»™çš„æ˜¯<code>name</code>,åå°æ¥æ”¶ä½¿ç”¨çš„æ˜¯<code>userName</code>,ä¸¤ä¸ªåç§°å¯¹ä¸ä¸Šï¼Œå¯¼è‡´æ¥æ”¶æ•°æ®å¤±è´¥:</p><p><img src="/2022/08/03/SpringMVC_day01/1630481772035.png" alt="1630481772035"></p><p>è§£å†³æ–¹æ¡ˆ:ä½¿ç”¨<code>@RequestParam</code>æ³¨è§£</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/commonParamDifferentName&quot;)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">commonParamDifferentName</span><span class="params">(<span class="meta">@RequestPaam(&quot;name&quot;)</span> String userName , <span class="type">int</span> age)</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ™®é€šå‚æ•°ä¼ é€’ userName ==&gt; &quot;</span>+userName);</span><br><span class="line">        System.out.println(<span class="string">&quot;æ™®é€šå‚æ•°ä¼ é€’ age ==&gt; &quot;</span>+age);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;&#123;&#x27;module&#x27;:&#x27;common param different name&#x27;&#125;&quot;</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„:å†™ä¸Š@RequestParamæ³¨è§£æ¡†æ¶å°±ä¸éœ€è¦è‡ªå·±å»è§£ææ³¨å…¥ï¼Œèƒ½æå‡æ¡†æ¶å¤„ç†æ€§èƒ½</strong></p><h4 id="3-3-2-POJOæ•°æ®ç±»å‹"><a href="#3-3-2-POJOæ•°æ®ç±»å‹" class="headerlink" title="3.3.2 POJOæ•°æ®ç±»å‹"></a>3.3.2 POJOæ•°æ®ç±»å‹</h4><p>ç®€å•æ•°æ®ç±»å‹ä¸€èˆ¬å¤„ç†çš„æ˜¯å‚æ•°ä¸ªæ•°æ¯”è¾ƒå°‘çš„è¯·æ±‚ï¼Œå¦‚æœå‚æ•°æ¯”è¾ƒå¤šï¼Œé‚£ä¹ˆåå°æ¥æ”¶å‚æ•°çš„æ—¶å€™å°±æ¯”è¾ƒå¤æ‚ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å¯ä»¥è€ƒè™‘ä½¿ç”¨POJOæ•°æ®ç±»å‹ã€‚</p><ul><li>POJOå‚æ•°ï¼šè¯·æ±‚å‚æ•°åä¸å½¢å‚å¯¹è±¡å±æ€§åç›¸åŒï¼Œå®šä¹‰POJOç±»å‹å½¢å‚å³å¯æ¥æ”¶å‚æ•°</li></ul><p>æ­¤æ—¶éœ€è¦ä½¿ç”¨å‰é¢å‡†å¤‡å¥½çš„POJOç±»ï¼Œå…ˆæ¥çœ‹ä¸‹User</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line">    <span class="comment">//setter...getter...ç•¥</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å‘é€è¯·æ±‚å’Œå‚æ•°:</p><p><img src="/2022/08/03/SpringMVC_day01/1630482186745.png" alt="1630482186745"></p><p>åå°æ¥æ”¶å‚æ•°:</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//POJOå‚æ•°ï¼šè¯·æ±‚å‚æ•°ä¸å½¢å‚å¯¹è±¡ä¸­çš„å±æ€§å¯¹åº”å³å¯å®Œæˆå‚æ•°ä¼ é€’</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/pojoParam&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">pojoParam</span><span class="params">(User user)</span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;pojoå‚æ•°ä¼ é€’ user ==&gt; &quot;</span>+user);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;&#123;&#x27;module&#x27;:&#x27;pojo param&#x27;&#125;&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„:</strong></p><ul><li>POJOå‚æ•°æ¥æ”¶ï¼Œå‰ç«¯GETå’ŒPOSTå‘é€è¯·æ±‚æ•°æ®çš„æ–¹å¼ä¸å˜ã€‚</li><li><strong>è¯·æ±‚å‚æ•°keyçš„åç§°è¦å’ŒPOJOä¸­å±æ€§çš„åç§°ä¸€è‡´ï¼Œå¦åˆ™æ— æ³•å°è£…ã€‚</strong></li></ul><h4 id="3-3-3-åµŒå¥—POJOç±»å‹å‚æ•°"><a href="#3-3-3-åµŒå¥—POJOç±»å‹å‚æ•°" class="headerlink" title="3.3.3 åµŒå¥—POJOç±»å‹å‚æ•°"></a>3.3.3 åµŒå¥—POJOç±»å‹å‚æ•°</h4><p>å¦‚æœPOJOå¯¹è±¡ä¸­åµŒå¥—äº†å…¶ä»–çš„POJOç±»ï¼Œå¦‚</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Address</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String province;</span><br><span class="line">    <span class="keyword">private</span> String city;</span><br><span class="line">    <span class="comment">//setter...getter...ç•¥</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line">    <span class="keyword">private</span> Address address;</span><br><span class="line">    <span class="comment">//setter...getter...ç•¥</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>åµŒå¥—POJOå‚æ•°ï¼šè¯·æ±‚å‚æ•°åä¸å½¢å‚å¯¹è±¡å±æ€§åç›¸åŒï¼ŒæŒ‰ç…§å¯¹è±¡å±‚æ¬¡ç»“æ„å…³ç³»å³å¯æ¥æ”¶åµŒå¥—POJOå±æ€§å‚æ•°</li></ul><p>å‘é€è¯·æ±‚å’Œå‚æ•°:</p><p><img src="/2022/08/03/SpringMVC_day01/1630482363291.png" alt="1630482363291"></p><p>åå°æ¥æ”¶å‚æ•°:</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//POJOå‚æ•°ï¼šè¯·æ±‚å‚æ•°ä¸å½¢å‚å¯¹è±¡ä¸­çš„å±æ€§å¯¹åº”å³å¯å®Œæˆå‚æ•°ä¼ é€’</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/pojoParam&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">pojoParam</span><span class="params">(User user)</span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;pojoå‚æ•°ä¼ é€’ user ==&gt; &quot;</span>+user);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;&#123;&#x27;module&#x27;:&#x27;pojo param&#x27;&#125;&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„:</strong></p><p><strong>è¯·æ±‚å‚æ•°keyçš„åç§°è¦å’ŒPOJOä¸­å±æ€§çš„åç§°ä¸€è‡´ï¼Œå¦åˆ™æ— æ³•å°è£…</strong></p><h4 id="3-3-4-æ•°ç»„ç±»å‹å‚æ•°"><a href="#3-3-4-æ•°ç»„ç±»å‹å‚æ•°" class="headerlink" title="3.3.4 æ•°ç»„ç±»å‹å‚æ•°"></a>3.3.4 æ•°ç»„ç±»å‹å‚æ•°</h4><p>ä¸¾ä¸ªç®€å•çš„ä¾‹å­ï¼Œå¦‚æœå‰ç«¯éœ€è¦è·å–ç”¨æˆ·çš„çˆ±å¥½ï¼Œçˆ±å¥½ç»å¤§å¤šæ•°æƒ…å†µä¸‹éƒ½æ˜¯å¤šä¸ªï¼Œå¦‚ä½•å‘é€è¯·æ±‚æ•°æ®å’Œæ¥æ”¶æ•°æ®å‘¢?</p><ul><li>æ•°ç»„å‚æ•°ï¼šè¯·æ±‚å‚æ•°åä¸å½¢å‚å¯¹è±¡å±æ€§åç›¸åŒä¸”è¯·æ±‚å‚æ•°ä¸ºå¤šä¸ªï¼Œå®šä¹‰æ•°ç»„ç±»å‹å³å¯æ¥æ”¶å‚æ•°</li></ul><p>å‘é€è¯·æ±‚å’Œå‚æ•°:</p><p><img src="/2022/08/03/SpringMVC_day01/1630482999626.png" alt="1630482999626"></p><p>åå°æ¥æ”¶å‚æ•°:</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//æ•°ç»„å‚æ•°ï¼šåŒåè¯·æ±‚å‚æ•°å¯ä»¥ç›´æ¥æ˜ å°„åˆ°å¯¹åº”åç§°çš„å½¢å‚æ•°ç»„å¯¹è±¡ä¸­</span></span><br><span class="line">  <span class="meta">@RequestMapping(&quot;/arrayParam&quot;)</span></span><br><span class="line">  <span class="meta">@ResponseBody</span></span><br><span class="line">  <span class="keyword">public</span> String <span class="title function_">arrayParam</span><span class="params">(String[] likes)</span>&#123;</span><br><span class="line">      System.out.println(<span class="string">&quot;æ•°ç»„å‚æ•°ä¼ é€’ likes ==&gt; &quot;</span>+ Arrays.toString(likes));</span><br><span class="line">      <span class="keyword">return</span> <span class="string">&quot;&#123;&#x27;module&#x27;:&#x27;array param&#x27;&#125;&quot;</span>;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><h4 id="3-3-5-é›†åˆç±»å‹å‚æ•°"><a href="#3-3-5-é›†åˆç±»å‹å‚æ•°" class="headerlink" title="3.3.5 é›†åˆç±»å‹å‚æ•°"></a>3.3.5 é›†åˆç±»å‹å‚æ•°</h4><p>æ•°ç»„èƒ½æ¥æ”¶å¤šä¸ªå€¼ï¼Œé‚£ä¹ˆé›†åˆæ˜¯å¦ä¹Ÿå¯ä»¥å®ç°è¿™ä¸ªåŠŸèƒ½å‘¢?</p><p>å‘é€è¯·æ±‚å’Œå‚æ•°:</p><p><img src="/2022/08/03/SpringMVC_day01/1630484283773.png" alt="1630484283773"></p><p>åå°æ¥æ”¶å‚æ•°:</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//é›†åˆå‚æ•°ï¼šåŒåè¯·æ±‚å‚æ•°å¯ä»¥ä½¿ç”¨@RequestParamæ³¨è§£æ˜ å°„åˆ°å¯¹åº”åç§°çš„é›†åˆå¯¹è±¡ä¸­ä½œä¸ºæ•°æ®</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/listParam&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">listParam</span><span class="params">(List&lt;String&gt; likes)</span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;é›†åˆå‚æ•°ä¼ é€’ likes ==&gt; &quot;</span>+ likes);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;&#123;&#x27;module&#x27;:&#x27;list param&#x27;&#125;&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿è¡Œä¼šæŠ¥é”™ï¼Œ</p><p><img src="/2022/08/03/SpringMVC_day01/1630484339065.png" alt="1630484339065"></p><p>é”™è¯¯çš„åŸå› æ˜¯:SpringMVCå°†Listçœ‹åšæ˜¯ä¸€ä¸ªPOJOå¯¹è±¡æ¥å¤„ç†ï¼Œå°†å…¶åˆ›å»ºä¸€ä¸ªå¯¹è±¡å¹¶å‡†å¤‡æŠŠå‰ç«¯çš„æ•°æ®å°è£…åˆ°å¯¹è±¡ä¸­ï¼Œä½†æ˜¯Listæ˜¯ä¸€ä¸ªæ¥å£æ— æ³•åˆ›å»ºå¯¹è±¡ï¼Œæ‰€ä»¥æŠ¥é”™ã€‚</p><p>è§£å†³æ–¹æ¡ˆæ˜¯ï¼šä½¿ç”¨<code>@RequestParam</code>æ³¨è§£</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//é›†åˆå‚æ•°ï¼šåŒåè¯·æ±‚å‚æ•°å¯ä»¥ä½¿ç”¨@RequestParamæ³¨è§£æ˜ å°„åˆ°å¯¹åº”åç§°çš„é›†åˆå¯¹è±¡ä¸­ä½œä¸ºæ•°æ®</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/listParam&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">listParam</span><span class="params">(<span class="meta">@RequestParam</span> List&lt;String&gt; likes)</span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;é›†åˆå‚æ•°ä¼ é€’ likes ==&gt; &quot;</span>+ likes);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;&#123;&#x27;module&#x27;:&#x27;list param&#x27;&#125;&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>é›†åˆä¿å­˜æ™®é€šå‚æ•°ï¼šè¯·æ±‚å‚æ•°åä¸å½¢å‚é›†åˆå¯¹è±¡åç›¸åŒä¸”è¯·æ±‚å‚æ•°ä¸ºå¤šä¸ªï¼Œ@RequestParamç»‘å®šå‚æ•°å…³ç³»</li><li>å¯¹äºç®€å•æ•°æ®ç±»å‹ä½¿ç”¨æ•°ç»„ä¼šæ¯”é›†åˆæ›´ç®€å•äº›ã€‚</li></ul><h3 id="çŸ¥è¯†ç‚¹1ï¼š-RequestParam"><a href="#çŸ¥è¯†ç‚¹1ï¼š-RequestParam" class="headerlink" title="çŸ¥è¯†ç‚¹1ï¼š@RequestParam"></a>çŸ¥è¯†ç‚¹1ï¼š@RequestParam</h3><table><thead><tr><th>åç§°</th><th>@RequestParam</th></tr></thead><tbody><tr><td>ç±»å‹</td><td>å½¢å‚æ³¨è§£</td></tr><tr><td>ä½ç½®</td><td>SpringMVCæ§åˆ¶å™¨æ–¹æ³•å½¢å‚å®šä¹‰å‰é¢</td></tr><tr><td>ä½œç”¨</td><td>ç»‘å®šè¯·æ±‚å‚æ•°ä¸å¤„ç†å™¨æ–¹æ³•å½¢å‚é—´çš„å…³ç³»</td></tr><tr><td>ç›¸å…³å‚æ•°</td><td>requiredï¼šæ˜¯å¦ä¸ºå¿…ä¼ å‚æ•° <br>defaultValueï¼šå‚æ•°é»˜è®¤å€¼</td></tr></tbody></table><h3 id="3-4-JSONæ•°æ®ä¼ è¾“å‚æ•°"><a href="#3-4-JSONæ•°æ®ä¼ è¾“å‚æ•°" class="headerlink" title="3.4 JSONæ•°æ®ä¼ è¾“å‚æ•°"></a>3.4 JSONæ•°æ®ä¼ è¾“å‚æ•°</h3><p>å‰é¢æˆ‘ä»¬è¯´è¿‡ï¼Œç°åœ¨æ¯”è¾ƒæµè¡Œçš„å¼€å‘æ–¹å¼ä¸ºå¼‚æ­¥è°ƒç”¨ã€‚å‰åå°ä»¥å¼‚æ­¥æ–¹å¼è¿›è¡Œäº¤æ¢ï¼Œä¼ è¾“çš„æ•°æ®ä½¿ç”¨çš„æ˜¯&#x3D;&#x3D;JSON&#x3D;&#x3D;,æ‰€ä»¥å‰ç«¯å¦‚æœå‘é€çš„æ˜¯JSONæ•°æ®ï¼Œåç«¯è¯¥å¦‚ä½•æ¥æ”¶?</p><p>å¯¹äºJSONæ•°æ®ç±»å‹ï¼Œæˆ‘ä»¬å¸¸è§çš„æœ‰ä¸‰ç§:</p><ul><li>jsonæ™®é€šæ•°ç»„ï¼ˆ[â€œvalue1â€,â€value2â€,â€value3â€,â€¦]ï¼‰</li><li>jsonå¯¹è±¡ï¼ˆ{key1:value1,key2:value2,â€¦}ï¼‰</li><li>jsonå¯¹è±¡æ•°ç»„ï¼ˆ[{key1:value1,â€¦},{key2:value2,â€¦}]ï¼‰</li></ul><p>å¯¹äºä¸Šè¿°æ•°æ®ï¼Œå‰ç«¯å¦‚ä½•å‘é€ï¼Œåç«¯å¦‚ä½•æ¥æ”¶?</p><h4 id="JSONæ™®é€šæ•°ç»„"><a href="#JSONæ™®é€šæ•°ç»„" class="headerlink" title="JSONæ™®é€šæ•°ç»„"></a>JSONæ™®é€šæ•°ç»„</h4><h6 id="æ­¥éª¤1ï¼špom-xmlæ·»åŠ ä¾èµ–"><a href="#æ­¥éª¤1ï¼špom-xmlæ·»åŠ ä¾èµ–" class="headerlink" title="æ­¥éª¤1ï¼špom.xmlæ·»åŠ ä¾èµ–"></a>æ­¥éª¤1ï¼špom.xmlæ·»åŠ ä¾èµ–</h6><p>SpringMVCé»˜è®¤ä½¿ç”¨çš„æ˜¯jacksonæ¥å¤„ç†jsonçš„è½¬æ¢ï¼Œæ‰€ä»¥éœ€è¦åœ¨pom.xmlæ·»åŠ jacksonä¾èµ–</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-databind<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.9.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h6 id="æ­¥éª¤2ï¼šPostManå‘é€JSONæ•°æ®"><a href="#æ­¥éª¤2ï¼šPostManå‘é€JSONæ•°æ®" class="headerlink" title="æ­¥éª¤2ï¼šPostManå‘é€JSONæ•°æ®"></a>æ­¥éª¤2ï¼šPostManå‘é€JSONæ•°æ®</h6><p><img src="/2022/08/03/SpringMVC_day01/1630485135061.png" alt="1630485135061"></p><h6 id="æ­¥éª¤3ï¼šå¼€å¯SpringMVCæ³¨è§£æ”¯æŒ"><a href="#æ­¥éª¤3ï¼šå¼€å¯SpringMVCæ³¨è§£æ”¯æŒ" class="headerlink" title="æ­¥éª¤3ï¼šå¼€å¯SpringMVCæ³¨è§£æ”¯æŒ"></a>æ­¥éª¤3ï¼šå¼€å¯SpringMVCæ³¨è§£æ”¯æŒ</h6><p>åœ¨SpringMVCçš„é…ç½®ç±»ä¸­å¼€å¯SpringMVCçš„æ³¨è§£æ”¯æŒï¼Œè¿™é‡Œé¢å°±åŒ…å«äº†å°†JSONè½¬æ¢æˆå¯¹è±¡çš„åŠŸèƒ½ã€‚</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ComponentScan(&quot;com.itheima.controller&quot;)</span></span><br><span class="line"><span class="comment">//å¼€å¯jsonæ•°æ®ç±»å‹è‡ªåŠ¨è½¬æ¢</span></span><br><span class="line"><span class="meta">@EnableWebMvc</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringMvcConfig</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h6 id="æ­¥éª¤4ï¼šå‚æ•°å‰æ·»åŠ -RequestBody"><a href="#æ­¥éª¤4ï¼šå‚æ•°å‰æ·»åŠ -RequestBody" class="headerlink" title="æ­¥éª¤4ï¼šå‚æ•°å‰æ·»åŠ @RequestBody"></a>æ­¥éª¤4ï¼šå‚æ•°å‰æ·»åŠ @RequestBody</h6><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//ä½¿ç”¨@RequestBodyæ³¨è§£å°†å¤–éƒ¨ä¼ é€’çš„jsonæ•°ç»„æ•°æ®æ˜ å°„åˆ°å½¢å‚çš„é›†åˆå¯¹è±¡ä¸­ä½œä¸ºæ•°æ®</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/listParamForJson&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">listParamForJson</span><span class="params">(<span class="meta">@RequestBody</span> List&lt;String&gt; likes)</span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;list common(json)å‚æ•°ä¼ é€’ list ==&gt; &quot;</span>+likes);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;&#123;&#x27;module&#x27;:&#x27;list common for json param&#x27;&#125;&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h6 id="æ­¥éª¤5ï¼šå¯åŠ¨è¿è¡Œç¨‹åº"><a href="#æ­¥éª¤5ï¼šå¯åŠ¨è¿è¡Œç¨‹åº" class="headerlink" title="æ­¥éª¤5ï¼šå¯åŠ¨è¿è¡Œç¨‹åº"></a>æ­¥éª¤5ï¼šå¯åŠ¨è¿è¡Œç¨‹åº</h6><p><img src="/2022/08/03/SpringMVC_day01/1630492624684.png" alt="1630492624684"></p><p>JSONæ™®é€šæ•°ç»„çš„æ•°æ®å°±å·²ç»ä¼ é€’å®Œæˆï¼Œä¸‹é¢é’ˆå¯¹JSONå¯¹è±¡æ•°æ®å’ŒJSONå¯¹è±¡æ•°ç»„çš„æ•°æ®è¯¥å¦‚ä½•ä¼ é€’å‘¢?</p><h4 id="JSONå¯¹è±¡æ•°æ®"><a href="#JSONå¯¹è±¡æ•°æ®" class="headerlink" title="JSONå¯¹è±¡æ•°æ®"></a>JSONå¯¹è±¡æ•°æ®</h4><p>æˆ‘ä»¬ä¼šå‘ç°ï¼Œåªéœ€è¦å…³æ³¨è¯·æ±‚å’Œæ•°æ®å¦‚ä½•å‘é€?åç«¯æ•°æ®å¦‚ä½•æ¥æ”¶?</p><p>è¯·æ±‚å’Œæ•°æ®çš„å‘é€:</p><figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line"><span class="attr">&quot;name&quot;</span><span class="punctuation">:</span><span class="string">&quot;itcast&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;age&quot;</span><span class="punctuation">:</span><span class="number">15</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p><img src="/2022/08/03/SpringMVC_day01/1630493105450.png" alt="1630493105450"></p><p>åç«¯æ¥æ”¶æ•°æ®ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/pojoParamForJson&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">pojoParamForJson</span><span class="params">(<span class="meta">@RequestBody</span> User user)</span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;pojo(json)å‚æ•°ä¼ é€’ user ==&gt; &quot;</span>+user);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;&#123;&#x27;module&#x27;:&#x27;pojo for json param&#x27;&#125;&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯åŠ¨ç¨‹åºè®¿é—®æµ‹è¯•</p><p><img src="/2022/08/03/SpringMVC_day01/1630493233550.png" alt="1630493233550"></p><p><strong>è¯´æ˜:</strong></p><p>addressä¸ºnullçš„åŸå› æ˜¯å‰ç«¯æ²¡æœ‰ä¼ é€’æ•°æ®ç»™åç«¯ã€‚</p><p>å¦‚æœæƒ³è¦addressä¹Ÿæœ‰æ•°æ®ï¼Œæˆ‘ä»¬éœ€æ±‚ä¿®æ”¹å‰ç«¯ä¼ é€’çš„æ•°æ®å†…å®¹:</p><figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line"><span class="attr">&quot;name&quot;</span><span class="punctuation">:</span><span class="string">&quot;itcast&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;age&quot;</span><span class="punctuation">:</span><span class="number">15</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;address&quot;</span><span class="punctuation">:</span><span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;province&quot;</span><span class="punctuation">:</span><span class="string">&quot;beijing&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;city&quot;</span><span class="punctuation">:</span><span class="string">&quot;beijing&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>å†æ¬¡å‘é€è¯·æ±‚ï¼Œå°±èƒ½çœ‹åˆ°addressä¸­çš„æ•°æ®</p><p><img src="/2022/08/03/SpringMVC_day01/1630493450694.png" alt="1630493450694"></p><h4 id="JSONå¯¹è±¡æ•°ç»„"><a href="#JSONå¯¹è±¡æ•°ç»„" class="headerlink" title="JSONå¯¹è±¡æ•°ç»„"></a>JSONå¯¹è±¡æ•°ç»„</h4><p>å¦‚ä½•é›†åˆä¸­ä¿å­˜å¤šä¸ªPOJOè¯¥å¦‚ä½•å®ç°?</p><p>è¯·æ±‚å’Œæ•°æ®çš„å‘é€:</p><figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span><span class="attr">&quot;name&quot;</span><span class="punctuation">:</span><span class="string">&quot;itcast&quot;</span><span class="punctuation">,</span><span class="attr">&quot;age&quot;</span><span class="punctuation">:</span><span class="number">15</span><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span><span class="attr">&quot;name&quot;</span><span class="punctuation">:</span><span class="string">&quot;itheima&quot;</span><span class="punctuation">,</span><span class="attr">&quot;age&quot;</span><span class="punctuation">:</span><span class="number">12</span><span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">]</span></span><br></pre></td></tr></table></figure><p> <img src="/2022/08/03/SpringMVC_day01/1630493501205.png" alt="1630493501205"></p><p>åç«¯æ¥æ”¶æ•°æ®:</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/listPojoParamForJson&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">listPojoParamForJson</span><span class="params">(<span class="meta">@RequestBody</span> List&lt;User&gt; list)</span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;list pojo(json)å‚æ•°ä¼ é€’ list ==&gt; &quot;</span>+list);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;&#123;&#x27;module&#x27;:&#x27;list pojo for json param&#x27;&#125;&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯åŠ¨ç¨‹åºè®¿é—®æµ‹è¯•</p><p><img src="/2022/08/03/SpringMVC_day01/1630493561137.png" alt="1630493561137"></p><p><strong>å°ç»“</strong></p><p>SpringMVCæ¥æ”¶JSONæ•°æ®çš„å®ç°æ­¥éª¤ä¸º:</p><p>(1)å¯¼å…¥jacksonåŒ…</p><p>(2)ä½¿ç”¨PostManå‘é€JSONæ•°æ®</p><p>(3)å¼€å¯SpringMVCæ³¨è§£é©±åŠ¨ï¼Œåœ¨é…ç½®ç±»ä¸Šæ·»åŠ @EnableWebMvcæ³¨è§£</p><p>(4)Controlleræ–¹æ³•çš„å‚æ•°å‰æ·»åŠ @RequestBodyæ³¨è§£</p><h4 id="çŸ¥è¯†ç‚¹1ï¼š-EnableWebMvc"><a href="#çŸ¥è¯†ç‚¹1ï¼š-EnableWebMvc" class="headerlink" title="çŸ¥è¯†ç‚¹1ï¼š@EnableWebMvc"></a>çŸ¥è¯†ç‚¹1ï¼š@EnableWebMvc</h4><table><thead><tr><th>åç§°</th><th>@EnableWebMvc</th></tr></thead><tbody><tr><td>ç±»å‹</td><td>é…ç½®ç±»æ³¨è§£</td></tr><tr><td>ä½ç½®</td><td>SpringMVCé…ç½®ç±»å®šä¹‰ä¸Šæ–¹</td></tr><tr><td>ä½œç”¨</td><td>å¼€å¯SpringMVCå¤šé¡¹è¾…åŠ©åŠŸèƒ½</td></tr></tbody></table><h4 id="çŸ¥è¯†ç‚¹2ï¼š-RequestBody"><a href="#çŸ¥è¯†ç‚¹2ï¼š-RequestBody" class="headerlink" title="çŸ¥è¯†ç‚¹2ï¼š@RequestBody"></a>çŸ¥è¯†ç‚¹2ï¼š@RequestBody</h4><table><thead><tr><th>åç§°</th><th>@RequestBody</th></tr></thead><tbody><tr><td>ç±»å‹</td><td>å½¢å‚æ³¨è§£</td></tr><tr><td>ä½ç½®</td><td>SpringMVCæ§åˆ¶å™¨æ–¹æ³•å½¢å‚å®šä¹‰å‰é¢</td></tr><tr><td>ä½œç”¨</td><td>å°†è¯·æ±‚ä¸­è¯·æ±‚ä½“æ‰€åŒ…å«çš„æ•°æ®ä¼ é€’ç»™è¯·æ±‚å‚æ•°ï¼Œæ­¤æ³¨è§£ä¸€ä¸ªå¤„ç†å™¨æ–¹æ³•åªèƒ½ä½¿ç”¨ä¸€æ¬¡</td></tr></tbody></table><h4 id="RequestBodyä¸-RequestParamåŒºåˆ«"><a href="#RequestBodyä¸-RequestParamåŒºåˆ«" class="headerlink" title="@RequestBodyä¸@RequestParamåŒºåˆ«"></a>@RequestBodyä¸@RequestParamåŒºåˆ«</h4><ul><li><p>åŒºåˆ«</p><ul><li>@RequestParamç”¨äºæ¥æ”¶urlåœ°å€ä¼ å‚ï¼Œè¡¨å•ä¼ å‚ã€application&#x2F;x-www-form-urlencodedã€‘</li><li>@RequestBodyç”¨äºæ¥æ”¶jsonæ•°æ®ã€application&#x2F;jsonã€‘</li></ul></li><li><p>åº”ç”¨</p><ul><li><strong>åæœŸå¼€å‘ä¸­ï¼Œå‘é€jsonæ ¼å¼æ•°æ®ä¸ºä¸»ï¼Œ@RequestBodyåº”ç”¨è¾ƒå¹¿</strong></li><li><strong>å¦‚æœå‘é€éjsonæ ¼å¼æ•°æ®ï¼Œé€‰ç”¨@RequestParamæ¥æ”¶è¯·æ±‚å‚æ•°</strong></li></ul></li></ul><h3 id="3-5-æ—¥æœŸç±»å‹å‚æ•°ä¼ é€’"><a href="#3-5-æ—¥æœŸç±»å‹å‚æ•°ä¼ é€’" class="headerlink" title="3.5 æ—¥æœŸç±»å‹å‚æ•°ä¼ é€’"></a>3.5 æ—¥æœŸç±»å‹å‚æ•°ä¼ é€’</h3><p>å‰é¢æˆ‘ä»¬å¤„ç†è¿‡ç®€å•æ•°æ®ç±»å‹ã€POJOæ•°æ®ç±»å‹ã€æ•°ç»„å’Œé›†åˆæ•°æ®ç±»å‹ä»¥åŠJSONæ•°æ®ç±»å‹ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬è¿˜å¾—å¤„ç†ä¸€ç§å¼€å‘ä¸­æ¯”è¾ƒå¸¸è§çš„ä¸€ç§æ•°æ®ç±»å‹ï¼Œ<code>æ—¥æœŸç±»å‹</code></p><p>æ—¥æœŸç±»å‹æ¯”è¾ƒç‰¹æ®Šï¼Œå› ä¸ºå¯¹äºæ—¥æœŸçš„æ ¼å¼æœ‰Nå¤šä¸­è¾“å…¥æ–¹å¼ï¼Œæ¯”å¦‚:</p><ul><li>2088-08-18</li><li>2088&#x2F;08&#x2F;18</li><li>08&#x2F;18&#x2F;2088</li><li>â€¦â€¦</li></ul><p>é’ˆå¯¹è¿™ä¹ˆå¤šæ—¥æœŸæ ¼å¼ï¼ŒSpringMVCè¯¥å¦‚ä½•æ¥æ”¶ï¼Œå®ƒèƒ½å¾ˆå¥½çš„å¤„ç†æ—¥æœŸç±»å‹æ•°æ®ä¹ˆ?</p><h4 id="æ­¥éª¤1-ç¼–å†™æ–¹æ³•æ¥æ”¶æ—¥æœŸæ•°æ®"><a href="#æ­¥éª¤1-ç¼–å†™æ–¹æ³•æ¥æ”¶æ—¥æœŸæ•°æ®" class="headerlink" title="æ­¥éª¤1:ç¼–å†™æ–¹æ³•æ¥æ”¶æ—¥æœŸæ•°æ®"></a>æ­¥éª¤1:ç¼–å†™æ–¹æ³•æ¥æ”¶æ—¥æœŸæ•°æ®</h4><p>åœ¨UserControllerç±»ä¸­æ·»åŠ æ–¹æ³•ï¼ŒæŠŠå‚æ•°è®¾ç½®ä¸ºæ—¥æœŸç±»å‹</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/dataParam&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">dataParam</span><span class="params">(Date date)</span></span><br><span class="line">    System.out.println(<span class="string">&quot;å‚æ•°ä¼ é€’ date ==&gt; &quot;</span>+date);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;&#123;&#x27;module&#x27;:&#x27;data param&#x27;&#125;&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ­¥éª¤2-å¯åŠ¨TomcatæœåŠ¡å™¨"><a href="#æ­¥éª¤2-å¯åŠ¨TomcatæœåŠ¡å™¨" class="headerlink" title="æ­¥éª¤2:å¯åŠ¨TomcatæœåŠ¡å™¨"></a>æ­¥éª¤2:å¯åŠ¨TomcatæœåŠ¡å™¨</h4><p>æŸ¥çœ‹æ§åˆ¶å°æ˜¯å¦æŠ¥é”™ï¼Œå¦‚æœæœ‰é”™è¯¯ï¼Œå…ˆè§£å†³é”™è¯¯ã€‚</p><h4 id="æ­¥éª¤3-ä½¿ç”¨PostManå‘é€è¯·æ±‚"><a href="#æ­¥éª¤3-ä½¿ç”¨PostManå‘é€è¯·æ±‚" class="headerlink" title="æ­¥éª¤3:ä½¿ç”¨PostManå‘é€è¯·æ±‚"></a>æ­¥éª¤3:ä½¿ç”¨PostManå‘é€è¯·æ±‚</h4><p>ä½¿ç”¨PostManå‘é€GETè¯·æ±‚ï¼Œå¹¶è®¾ç½®dateå‚æ•°</p><p><code>http://localhost/dataParam?date=2088/08/08</code></p><p><img src="/2022/08/03/SpringMVC_day01/1630494320917.png" alt="1630494320917"></p><h4 id="æ­¥éª¤4-æŸ¥çœ‹æ§åˆ¶å°"><a href="#æ­¥éª¤4-æŸ¥çœ‹æ§åˆ¶å°" class="headerlink" title="æ­¥éª¤4:æŸ¥çœ‹æ§åˆ¶å°"></a>æ­¥éª¤4:æŸ¥çœ‹æ§åˆ¶å°</h4><p><img src="/2022/08/03/SpringMVC_day01/1630494443738.png" alt="1630494443738"></p><p>é€šè¿‡æ‰“å°ï¼Œæˆ‘ä»¬å‘ç°SpringMVCå¯ä»¥æ¥æ”¶æ—¥æœŸæ•°æ®ç±»å‹ï¼Œå¹¶å°†å…¶æ‰“å°åœ¨æ§åˆ¶å°ã€‚</p><p>è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬å°±æƒ³å¦‚æœæŠŠæ—¥æœŸå‚æ•°çš„æ ¼å¼æ”¹æˆå…¶ä»–çš„ï¼ŒSpringMVCè¿˜èƒ½å¤„ç†ä¹ˆ?</p><h4 id="æ­¥éª¤5-æ›´æ¢æ—¥æœŸæ ¼å¼"><a href="#æ­¥éª¤5-æ›´æ¢æ—¥æœŸæ ¼å¼" class="headerlink" title="æ­¥éª¤5:æ›´æ¢æ—¥æœŸæ ¼å¼"></a>æ­¥éª¤5:æ›´æ¢æ—¥æœŸæ ¼å¼</h4><p>ä¸ºäº†èƒ½æ›´å¥½çš„çœ‹åˆ°ç¨‹åºè¿è¡Œçš„ç»“æœï¼Œæˆ‘ä»¬åœ¨æ–¹æ³•ä¸­å¤šæ·»åŠ ä¸€ä¸ªæ—¥æœŸå‚æ•°</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/dataParam&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">dataParam</span><span class="params">(Date date,Date date1)</span></span><br><span class="line">    System.out.println(<span class="string">&quot;å‚æ•°ä¼ é€’ date ==&gt; &quot;</span>+date);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;&#123;&#x27;module&#x27;:&#x27;data param&#x27;&#125;&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨PostManå‘é€è¯·æ±‚ï¼Œæºå¸¦ä¸¤ä¸ªä¸åŒçš„æ—¥æœŸæ ¼å¼ï¼Œ</p><p><code>http://localhost/dataParam?date=2088/08/08&amp;date1=2088-08-08</code></p><p><img src="/2022/08/03/SpringMVC_day01/1630494565970.png" alt="1630494565970"></p><p>å‘é€è¯·æ±‚å’Œæ•°æ®åï¼Œé¡µé¢ä¼šæŠ¥400ï¼Œæ§åˆ¶å°ä¼šæŠ¥é”™ä¸€ä¸ªé”™è¯¯</p><blockquote><p><code>Resolved [org.springframework.web.method.annotation.==MethodArgumentTypeMismatchException==: Failed to convert value of type &#39;java.lang.String&#39; to required type &#39;java.util.Date&#39;; nested exception is org.springframework.core.convert.==ConversionFailedException==: Failed to convert from type [java.lang.String] to type [java.util.Date] for value &#39;2088-08-08&#39;; nested exception is java.lang.IllegalArgumentException]</code></p></blockquote><p>ä»é”™è¯¯ä¿¡æ¯å¯ä»¥çœ‹å‡ºï¼Œé”™è¯¯çš„åŸå› æ˜¯åœ¨å°†<code>2088-08-08</code>è½¬æ¢æˆæ—¥æœŸç±»å‹çš„æ—¶å€™å¤±è´¥äº†ï¼ŒåŸå› æ˜¯SpringMVCé»˜è®¤æ”¯æŒçš„å­—ç¬¦ä¸²è½¬æ—¥æœŸçš„æ ¼å¼ä¸º<code>yyyy/MM/dd</code>ï¼Œè€Œæˆ‘ä»¬ç°åœ¨ä¼ é€’çš„ä¸ç¬¦åˆå…¶é»˜è®¤æ ¼å¼ï¼ŒSpringMVCå°±æ— æ³•è¿›è¡Œæ ¼å¼è½¬æ¢ï¼Œæ‰€ä»¥æŠ¥é”™ã€‚</p><p>è§£å†³æ–¹æ¡ˆä¹Ÿæ¯”è¾ƒç®€å•ï¼Œéœ€è¦ä½¿ç”¨<code>@DateTimeFormat</code></p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/dataParam&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">dataParam</span><span class="params">(Date date,</span></span><br><span class="line"><span class="params">                        <span class="meta">@DateTimeFormat(pattern=&quot;yyyy-MM-dd&quot;)</span> Date date1)</span></span><br><span class="line">    System.out.println(<span class="string">&quot;å‚æ•°ä¼ é€’ date ==&gt; &quot;</span>+date);</span><br><span class="line">System.out.println(<span class="string">&quot;å‚æ•°ä¼ é€’ date1(yyyy-MM-dd) ==&gt; &quot;</span>+date1);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;&#123;&#x27;module&#x27;:&#x27;data param&#x27;&#125;&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é‡æ–°å¯åŠ¨æœåŠ¡å™¨ï¼Œé‡æ–°å‘é€è¯·æ±‚æµ‹è¯•ï¼ŒSpringMVCå°±å¯ä»¥æ­£ç¡®çš„è¿›è¡Œæ—¥æœŸè½¬æ¢äº†</p><p><img src="/2022/08/03/SpringMVC_day01/1630495221038.png" alt="1630495221038"></p><h4 id="æ­¥éª¤6ï¼šæºå¸¦æ—¶é—´çš„æ—¥æœŸ"><a href="#æ­¥éª¤6ï¼šæºå¸¦æ—¶é—´çš„æ—¥æœŸ" class="headerlink" title="æ­¥éª¤6ï¼šæºå¸¦æ—¶é—´çš„æ—¥æœŸ"></a>æ­¥éª¤6ï¼šæºå¸¦æ—¶é—´çš„æ—¥æœŸ</h4><p>æ¥ä¸‹æ¥æˆ‘ä»¬å†æ¥å‘é€ä¸€ä¸ªæºå¸¦æ—¶é—´çš„æ—¥æœŸï¼Œçœ‹ä¸‹SpringMVCè¯¥å¦‚ä½•å¤„ç†?</p><p>å…ˆä¿®æ”¹UserControllerç±»ï¼Œæ·»åŠ ç¬¬ä¸‰ä¸ªå‚æ•°</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/dataParam&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">dataParam</span><span class="params">(Date date,</span></span><br><span class="line"><span class="params">                        <span class="meta">@DateTimeFormat(pattern=&quot;yyyy-MM-dd&quot;)</span> Date date1,</span></span><br><span class="line"><span class="params">                        <span class="meta">@DateTimeFormat(pattern=&quot;yyyy/MM/dd HH:mm:ss&quot;)</span> Date date2)</span></span><br><span class="line">    System.out.println(<span class="string">&quot;å‚æ•°ä¼ é€’ date ==&gt; &quot;</span>+date);</span><br><span class="line">System.out.println(<span class="string">&quot;å‚æ•°ä¼ é€’ date1(yyyy-MM-dd) ==&gt; &quot;</span>+date1);</span><br><span class="line">System.out.println(<span class="string">&quot;å‚æ•°ä¼ é€’ date2(yyyy/MM/dd HH:mm:ss) ==&gt; &quot;</span>+date2);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;&#123;&#x27;module&#x27;:&#x27;data param&#x27;&#125;&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨PostManå‘é€è¯·æ±‚ï¼Œæºå¸¦ä¸¤ä¸ªä¸åŒçš„æ—¥æœŸæ ¼å¼ï¼Œ</p><p><code>http://localhost/dataParam?date=2088/08/08&amp;date1=2088-08-08&amp;date2=2088/08/08 8:08:08</code></p><p><img src="/2022/08/03/SpringMVC_day01/1630495347289.png" alt="1630495347289"></p><p>é‡æ–°å¯åŠ¨æœåŠ¡å™¨ï¼Œé‡æ–°å‘é€è¯·æ±‚æµ‹è¯•ï¼ŒSpringMVCå°±å¯ä»¥å°†æ—¥æœŸæ—¶é—´çš„æ•°æ®è¿›è¡Œè½¬æ¢</p><p><img src="/2022/08/03/SpringMVC_day01/1630495507353.png" alt="1630495507353"></p><h4 id="çŸ¥è¯†ç‚¹1ï¼š-DateTimeFormat"><a href="#çŸ¥è¯†ç‚¹1ï¼š-DateTimeFormat" class="headerlink" title="çŸ¥è¯†ç‚¹1ï¼š@DateTimeFormat"></a>çŸ¥è¯†ç‚¹1ï¼š@DateTimeFormat</h4><table><thead><tr><th>åç§°</th><th>@DateTimeFormat</th></tr></thead><tbody><tr><td>ç±»å‹</td><td><em>å½¢å‚æ³¨è§£</em></td></tr><tr><td>ä½ç½®</td><td>SpringMVCæ§åˆ¶å™¨æ–¹æ³•å½¢å‚å‰é¢</td></tr><tr><td>ä½œç”¨</td><td>è®¾å®šæ—¥æœŸæ—¶é—´å‹æ•°æ®æ ¼å¼</td></tr><tr><td>ç›¸å…³å±æ€§</td><td>patternï¼šæŒ‡å®šæ—¥æœŸæ—¶é—´æ ¼å¼å­—ç¬¦ä¸²</td></tr></tbody></table><h4 id="å†…éƒ¨å®ç°åŸç†"><a href="#å†…éƒ¨å®ç°åŸç†" class="headerlink" title="å†…éƒ¨å®ç°åŸç†"></a>å†…éƒ¨å®ç°åŸç†</h4><p>è®²è§£å†…éƒ¨åŸç†ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆæ€è€ƒä¸ªé—®é¢˜:</p><ul><li>å‰ç«¯ä¼ é€’å­—ç¬¦ä¸²ï¼Œåç«¯ä½¿ç”¨æ—¥æœŸDateæ¥æ”¶</li><li>å‰ç«¯ä¼ é€’JSONæ•°æ®ï¼Œåç«¯ä½¿ç”¨å¯¹è±¡æ¥æ”¶</li><li>åå°éœ€è¦çš„æ•°æ®ç±»å‹æœ‰å¾ˆå¤šä¸­</li><li>å‰ç«¯ä¼ é€’å­—ç¬¦ä¸²ï¼Œåç«¯ä½¿ç”¨Integeræ¥æ”¶</li><li>åœ¨æ•°æ®çš„ä¼ é€’è¿‡ç¨‹ä¸­å­˜åœ¨å¾ˆå¤šç±»å‹çš„è½¬æ¢</li></ul><p>é—®:è°æ¥åšè¿™ä¸ªç±»å‹è½¬æ¢?</p><p>ç­”:SpringMVC</p><p>é—®ï¼šSpringMVCæ˜¯å¦‚ä½•å®ç°ç±»å‹è½¬æ¢çš„?</p><p>ç­”:Converteræ¥å£</p><p>åœ¨æ¡†æ¶ä¸­ï¼Œæœ‰ä¸€ä¸ªç±»å‹è½¬æ¢æ¥å£</p><ul><li>Converteræ¥å£</li></ul><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">*S: the source type</span></span><br><span class="line"><span class="comment">*T: the target type</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Converter</span>&lt;S, T&gt; &#123;</span><br><span class="line">    <span class="meta">@Nullable</span></span><br><span class="line">    <span class="comment">//è¯¥æ–¹æ³•å°±æ˜¯å°†ä»é¡µé¢ä¸Šæ¥æ”¶çš„æ•°æ®(S)è½¬æ¢æˆæˆ‘ä»¬æƒ³è¦çš„æ•°æ®ç±»å‹(T)è¿”å›</span></span><br><span class="line">    T <span class="title function_">convert</span><span class="params">(S source)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„:Converteræ‰€å±çš„åŒ…ä¸º<code>org.springframework.core.convert.converter</code></strong></p><ul><li>Converteræ¥å£çš„å®ç°ç±»</li></ul><p><img src="/2022/08/03/SpringMVC_day01/1630496385398.png" alt="1630496385398"></p><p>æ¡†æ¶ä¸­æœ‰æä¾›å¾ˆå¤šå¯¹åº”Converteræ¥å£çš„å®ç°ç±»ï¼Œç”¨æ¥å®ç°ä¸åŒæ•°æ®ç±»å‹ä¹‹é—´çš„è½¬æ¢ã€‚å‰é¢å’±ä»¬å…¶å®ä¸€ç›´åœ¨ä½¿ç”¨è¿™ä¸ªç±»å‹è½¬æ¢,å¦‚:</p><ul><li>è¯·æ±‚å‚æ•°å¹´é¾„æ•°æ®ï¼ˆStringâ†’Integerï¼‰</li><li>jsonæ•°æ®è½¬å¯¹è±¡ï¼ˆjson â†’ POJOï¼‰</li><li>æ—¥æœŸæ ¼å¼è½¬æ¢ï¼ˆString â†’ Dateï¼‰</li></ul><p><strong>æ³¨æ„ï¼šSpringMVCçš„é…ç½®ç±»æŠŠ@EnableWebMvcå½“åšæ ‡é…é…ç½®ä¸Šå»ï¼Œä¸è¦çœç•¥</strong></p><h3 id="3-6-å“åº”"><a href="#3-6-å“åº”" class="headerlink" title="3.6 å“åº”"></a>3.6 å“åº”</h3><p>SpringMVCæ¥æ”¶åˆ°è¯·æ±‚å’Œæ•°æ®åï¼Œè¿›è¡Œä¸€äº›äº†çš„å¤„ç†ï¼Œå½“ç„¶è¿™ä¸ªå¤„ç†å¯ä»¥æ˜¯è½¬å‘ç»™Serviceï¼ŒServiceå±‚å†è°ƒç”¨Daoå±‚å®Œæˆçš„ï¼Œä¸ç®¡æ€æ ·ï¼Œå¤„ç†å®Œä»¥åï¼Œéƒ½éœ€è¦å°†ç»“æœå‘ŠçŸ¥ç»™ç”¨æˆ·ã€‚</p><p>æ¯”å¦‚:æ ¹æ®ç”¨æˆ·IDæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯ã€æŸ¥è¯¢ç”¨æˆ·åˆ—è¡¨ã€æ–°å¢ç”¨æˆ·ç­‰ã€‚</p><p>å¯¹äºå“åº”ï¼Œä¸»è¦å°±åŒ…å«ä¸¤éƒ¨åˆ†å†…å®¹ï¼š</p><ul><li>å“åº”é¡µé¢</li><li>å“åº”æ•°æ®<ul><li>æ–‡æœ¬æ•°æ®</li><li>jsonæ•°æ®</li></ul></li></ul><p>å› ä¸ºå¼‚æ­¥è°ƒç”¨æ˜¯ç›®å‰å¸¸ç”¨çš„ä¸»æµæ–¹å¼ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦æ›´å…³æ³¨çš„å°±æ˜¯å¦‚ä½•è¿”å›JSONæ•°æ®ï¼Œå¯¹äºå…¶ä»–åªéœ€è¦è®¤è¯†äº†è§£å³å¯ã€‚</p><h4 id="3-6-1-ç¯å¢ƒå‡†å¤‡"><a href="#3-6-1-ç¯å¢ƒå‡†å¤‡" class="headerlink" title="3.6.1 ç¯å¢ƒå‡†å¤‡"></a>3.6.1 ç¯å¢ƒå‡†å¤‡</h4><ul><li><p>åˆ›å»ºä¸€ä¸ªWebçš„Mavené¡¹ç›®</p></li><li><p>pom.xmlæ·»åŠ Springä¾èµ–</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.itheima<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springmvc_05_response<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>war<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.10.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-databind<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.9.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.tomcat.maven<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>tomcat7-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">port</span>&gt;</span>80<span class="tag">&lt;/<span class="name">port</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">path</span>&gt;</span>/<span class="tag">&lt;/<span class="name">path</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>åˆ›å»ºå¯¹åº”çš„é…ç½®ç±»</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ServletContainersInitConfig</span> <span class="keyword">extends</span> <span class="title class_">AbstractAnnotationConfigDispatcherServletInitializer</span> &#123;</span><br><span class="line">    <span class="keyword">protected</span> Class&lt;?&gt;[] getRootConfigClasses() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Class</span>[<span class="number">0</span>];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> Class&lt;?&gt;[] getServletConfigClasses() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Class</span>[]&#123;SpringMvcConfig.class&#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> String[] getServletMappings() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">String</span>[]&#123;<span class="string">&quot;/&quot;</span>&#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ä¹±ç å¤„ç†</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> Filter[] getServletFilters() &#123;</span><br><span class="line">        <span class="type">CharacterEncodingFilter</span> <span class="variable">filter</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CharacterEncodingFilter</span>();</span><br><span class="line">        filter.setEncoding(<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Filter</span>[]&#123;filter&#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ComponentScan(&quot;com.itheima.controller&quot;)</span></span><br><span class="line"><span class="comment">//å¼€å¯jsonæ•°æ®ç±»å‹è‡ªåŠ¨è½¬æ¢</span></span><br><span class="line"><span class="meta">@EnableWebMvc</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringMvcConfig</span> &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>ç¼–å†™æ¨¡å‹ç±»User</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line">    <span class="comment">//getter...setter...toStringçœç•¥</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>webappä¸‹åˆ›å»ºpage.jsp</p><figure class="highlight jsp"><table><tr><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h2&gt;Hello Spring MVC!&lt;/h2&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></li><li><p>ç¼–å†™UserController</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p>æœ€ç»ˆåˆ›å»ºå¥½çš„é¡¹ç›®ç»“æ„å¦‚ä¸‹:</p><p><img src="/2022/08/03/SpringMVC_day01/1630497314131.png" alt="1630497314131"></p><h4 id="3-6-2-å“åº”é¡µé¢-äº†è§£"><a href="#3-6-2-å“åº”é¡µé¢-äº†è§£" class="headerlink" title="3.6.2 å“åº”é¡µé¢[äº†è§£]"></a>3.6.2 å“åº”é¡µé¢[äº†è§£]</h4><h5 id="æ­¥éª¤1-è®¾ç½®è¿”å›é¡µé¢"><a href="#æ­¥éª¤1-è®¾ç½®è¿”å›é¡µé¢" class="headerlink" title="æ­¥éª¤1:è®¾ç½®è¿”å›é¡µé¢"></a>æ­¥éª¤1:è®¾ç½®è¿”å›é¡µé¢</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/toJumpPage&quot;)</span></span><br><span class="line">    <span class="comment">//æ³¨æ„</span></span><br><span class="line">    <span class="comment">//1.æ­¤å¤„ä¸èƒ½æ·»åŠ @ResponseBody,å¦‚æœåŠ äº†è¯¥æ³¨å…¥ï¼Œä¼šç›´æ¥å°†page.jspå½“å­—ç¬¦ä¸²è¿”å›å‰ç«¯</span></span><br><span class="line">    <span class="comment">//2.æ–¹æ³•éœ€è¦è¿”å›String</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toJumpPage</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;è·³è½¬é¡µé¢&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;page.jsp&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="æ­¥éª¤2-å¯åŠ¨ç¨‹åºæµ‹è¯•"><a href="#æ­¥éª¤2-å¯åŠ¨ç¨‹åºæµ‹è¯•" class="headerlink" title="æ­¥éª¤2:å¯åŠ¨ç¨‹åºæµ‹è¯•"></a>æ­¥éª¤2:å¯åŠ¨ç¨‹åºæµ‹è¯•</h5><p>æ­¤å¤„æ¶‰åŠåˆ°é¡µé¢è·³è½¬ï¼Œæ‰€ä»¥ä¸é€‚åˆé‡‡ç”¨PostManè¿›è¡Œæµ‹è¯•ï¼Œç›´æ¥æ‰“å¼€æµè§ˆå™¨ï¼Œè¾“å…¥</p><p><code>http://localhost/toJumpPage</code></p><p><img src="/2022/08/03/SpringMVC_day01/1630497496785.png" alt="1630497496785"></p><h4 id="3-6-3-è¿”å›æ–‡æœ¬æ•°æ®-äº†è§£"><a href="#3-6-3-è¿”å›æ–‡æœ¬æ•°æ®-äº†è§£" class="headerlink" title="3.6.3 è¿”å›æ–‡æœ¬æ•°æ®[äº†è§£]"></a>3.6.3 è¿”å›æ–‡æœ¬æ•°æ®[äº†è§£]</h4><h5 id="æ­¥éª¤1-è®¾ç½®è¿”å›æ–‡æœ¬å†…å®¹"><a href="#æ­¥éª¤1-è®¾ç½®è¿”å›æ–‡æœ¬å†…å®¹" class="headerlink" title="æ­¥éª¤1:è®¾ç½®è¿”å›æ–‡æœ¬å†…å®¹"></a>æ­¥éª¤1:è®¾ç½®è¿”å›æ–‡æœ¬å†…å®¹</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line">    </span><br><span class="line">   <span class="meta">@RequestMapping(&quot;/toText&quot;)</span></span><br><span class="line"><span class="comment">//æ³¨æ„æ­¤å¤„è¯¥æ³¨è§£å°±ä¸èƒ½çœç•¥ï¼Œå¦‚æœçœç•¥äº†,ä¼šæŠŠresponse textå½“å‰é¡µé¢åç§°å»æŸ¥æ‰¾ï¼Œå¦‚æœæ²¡æœ‰å›æŠ¥404é”™è¯¯</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toText</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;è¿”å›çº¯æ–‡æœ¬æ•°æ®&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;response text&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="æ­¥éª¤2-å¯åŠ¨ç¨‹åºæµ‹è¯•-1"><a href="#æ­¥éª¤2-å¯åŠ¨ç¨‹åºæµ‹è¯•-1" class="headerlink" title="æ­¥éª¤2:å¯åŠ¨ç¨‹åºæµ‹è¯•"></a>æ­¥éª¤2:å¯åŠ¨ç¨‹åºæµ‹è¯•</h5><p>æ­¤å¤„ä¸æ¶‰åŠåˆ°é¡µé¢è·³è½¬ï¼Œå› ä¸ºæˆ‘ä»¬ç°åœ¨å‘é€çš„æ˜¯postè¯·æ±‚ï¼Œå¯ä»¥ä½¿ç”¨æµè§ˆå™¨ä¹Ÿå¯ä»¥ä½¿ç”¨PostManè¿›è¡Œæµ‹è¯•ï¼Œè¾“å…¥åœ°å€<code>http://localhost/toText</code>è®¿é—®</p><p><img src="/2022/08/03/SpringMVC_day01/1630497741388.png" alt="1630497741388"></p><h4 id="3-6-4-å“åº”JSONæ•°æ®"><a href="#3-6-4-å“åº”JSONæ•°æ®" class="headerlink" title="3.6.4 å“åº”JSONæ•°æ®"></a>3.6.4 å“åº”JSONæ•°æ®</h4><h5 id="å“åº”POJOå¯¹è±¡"><a href="#å“åº”POJOå¯¹è±¡" class="headerlink" title="å“åº”POJOå¯¹è±¡"></a>å“åº”POJOå¯¹è±¡</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/toJsonPOJO&quot;)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> User <span class="title function_">toJsonPOJO</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;è¿”å›jsonå¯¹è±¡æ•°æ®&quot;</span>);</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">        user.setName(<span class="string">&quot;itcast&quot;</span>);</span><br><span class="line">        user.setAge(<span class="number">15</span>);</span><br><span class="line">        <span class="keyword">return</span> user;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿”å›å€¼ä¸ºå®ä½“ç±»å¯¹è±¡ï¼Œè®¾ç½®è¿”å›å€¼ä¸ºå®ä½“ç±»ç±»å‹ï¼Œå³å¯å®ç°è¿”å›å¯¹åº”å¯¹è±¡çš„jsonæ•°æ®ï¼Œéœ€è¦ä¾èµ–&#x3D;&#x3D;@ResponseBody&#x3D;&#x3D;æ³¨è§£å’Œ&#x3D;&#x3D;@EnableWebMvc&#x3D;&#x3D;æ³¨è§£</p><p>é‡æ–°å¯åŠ¨æœåŠ¡å™¨ï¼Œè®¿é—®<code>http://localhost/toJsonPOJO</code></p><p><img src="/2022/08/03/SpringMVC_day01/1630497954896.png" alt="1630497954896"></p><h5 id="å“åº”POJOé›†åˆå¯¹è±¡"><a href="#å“åº”POJOé›†åˆå¯¹è±¡" class="headerlink" title="å“åº”POJOé›†åˆå¯¹è±¡"></a>å“åº”POJOé›†åˆå¯¹è±¡</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/toJsonList&quot;)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;User&gt; <span class="title function_">toJsonList</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;è¿”å›jsoné›†åˆæ•°æ®&quot;</span>);</span><br><span class="line">        <span class="type">User</span> <span class="variable">user1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">        user1.setName(<span class="string">&quot;ä¼ æ™ºæ’­å®¢&quot;</span>);</span><br><span class="line">        user1.setAge(<span class="number">15</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">User</span> <span class="variable">user2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">        user2.setName(<span class="string">&quot;é»‘é©¬ç¨‹åºå‘˜&quot;</span>);</span><br><span class="line">        user2.setAge(<span class="number">12</span>);</span><br><span class="line"></span><br><span class="line">        List&lt;User&gt; userList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;User&gt;();</span><br><span class="line">        userList.add(user1);</span><br><span class="line">        userList.add(user2);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> userList;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>é‡æ–°å¯åŠ¨æœåŠ¡å™¨ï¼Œè®¿é—®<code>http://localhost/toJsonList</code></p><p><img src="/2022/08/03/SpringMVC_day01/1630498084047.png" alt="1630498084047"></p><h4 id="çŸ¥è¯†ç‚¹1ï¼š-ResponseBody"><a href="#çŸ¥è¯†ç‚¹1ï¼š-ResponseBody" class="headerlink" title="çŸ¥è¯†ç‚¹1ï¼š@ResponseBody"></a>çŸ¥è¯†ç‚¹1ï¼š@ResponseBody</h4><table><thead><tr><th>åç§°</th><th>@ResponseBody</th></tr></thead><tbody><tr><td>ç±»å‹</td><td>æ–¹æ³•\ç±»æ³¨è§£</td></tr><tr><td>ä½ç½®</td><td>SpringMVCæ§åˆ¶å™¨æ–¹æ³•å®šä¹‰ä¸Šæ–¹å’Œæ§åˆ¶ç±»ä¸Š</td></tr><tr><td>ä½œç”¨</td><td>è®¾ç½®å½“å‰æ§åˆ¶å™¨è¿”å›å€¼ä½œä¸ºå“åº”ä½“,<br>å†™åœ¨ç±»ä¸Šï¼Œè¯¥ç±»çš„æ‰€æœ‰æ–¹æ³•éƒ½æœ‰è¯¥æ³¨è§£åŠŸèƒ½</td></tr><tr><td>ç›¸å…³å±æ€§</td><td>patternï¼šæŒ‡å®šæ—¥æœŸæ—¶é—´æ ¼å¼å­—ç¬¦ä¸²</td></tr></tbody></table><p><strong>è¯´æ˜:</strong></p><ul><li>è¯¥æ³¨è§£å¯ä»¥å†™åœ¨ç±»ä¸Šæˆ–è€…æ–¹æ³•ä¸Š</li><li>å†™åœ¨ç±»ä¸Šå°±æ˜¯è¯¥ç±»ä¸‹çš„æ‰€æœ‰æ–¹æ³•éƒ½æœ‰@ReponseBodyåŠŸèƒ½</li><li>å½“æ–¹æ³•ä¸Šæœ‰@ReponseBodyæ³¨è§£å<ul><li>æ–¹æ³•çš„è¿”å›å€¼ä¸ºå­—ç¬¦ä¸²ï¼Œä¼šå°†å…¶ä½œä¸ºæ–‡æœ¬å†…å®¹ç›´æ¥å“åº”ç»™å‰ç«¯</li><li>æ–¹æ³•çš„è¿”å›å€¼ä¸ºå¯¹è±¡ï¼Œä¼šå°†å¯¹è±¡è½¬æ¢æˆJSONå“åº”ç»™å‰ç«¯</li></ul></li></ul><p>æ­¤å¤„åˆä½¿ç”¨åˆ°äº†ç±»å‹è½¬æ¢ï¼Œå†…éƒ¨è¿˜æ˜¯é€šè¿‡Converteræ¥å£çš„å®ç°ç±»å®Œæˆçš„ï¼Œæ‰€ä»¥Converteré™¤äº†å‰é¢æ‰€è¯´çš„åŠŸèƒ½å¤–ï¼Œå®ƒè¿˜å¯ä»¥å®ç°:</p><ul><li>å¯¹è±¡è½¬Jsonæ•°æ®(POJO -&gt; json)</li><li>é›†åˆè½¬Jsonæ•°æ®(Collection -&gt; json)</li></ul><h2 id="4ï¼ŒResté£æ ¼"><a href="#4ï¼ŒResté£æ ¼" class="headerlink" title="4ï¼ŒResté£æ ¼"></a>4ï¼ŒResté£æ ¼</h2><p>å¯¹äºResté£æ ¼ï¼Œæˆ‘ä»¬éœ€è¦å­¦ä¹ çš„å†…å®¹åŒ…æ‹¬:</p><ul><li>RESTç®€ä»‹</li><li>RESTå…¥é—¨æ¡ˆä¾‹</li><li>RESTå¿«é€Ÿå¼€å‘</li><li>æ¡ˆä¾‹:åŸºäºRESTfulé¡µé¢æ•°æ®äº¤äº’</li></ul><h3 id="4-1-RESTç®€ä»‹"><a href="#4-1-RESTç®€ä»‹" class="headerlink" title="4.1 RESTç®€ä»‹"></a>4.1 RESTç®€ä»‹</h3><ul><li><p><strong>REST</strong>ï¼ˆRepresentational State Transferï¼‰ï¼Œè¡¨ç°å½¢å¼çŠ¶æ€è½¬æ¢,å®ƒæ˜¯ä¸€ç§è½¯ä»¶æ¶æ„&#x3D;&#x3D;é£æ ¼&#x3D;&#x3D;</p><p>å½“æˆ‘ä»¬æƒ³è¡¨ç¤ºä¸€ä¸ªç½‘ç»œèµ„æºçš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨ä¸¤ç§æ–¹å¼:</p><ul><li>ä¼ ç»Ÿé£æ ¼èµ„æºæè¿°å½¢å¼<ul><li><code>http://localhost/user/getById?id=1</code> æŸ¥è¯¢idä¸º1çš„ç”¨æˆ·ä¿¡æ¯</li><li><code>http://localhost/user/saveUser</code> ä¿å­˜ç”¨æˆ·ä¿¡æ¯</li></ul></li><li>RESTé£æ ¼æè¿°å½¢å¼<ul><li><code>http://localhost/user/1</code> </li><li><code>http://localhost/user</code></li></ul></li></ul></li></ul><p>ä¼ ç»Ÿæ–¹å¼ä¸€èˆ¬æ˜¯ä¸€ä¸ªè¯·æ±‚urlå¯¹åº”ä¸€ç§æ“ä½œï¼Œè¿™æ ·åšä¸ä»…éº»çƒ¦ï¼Œä¹Ÿä¸å®‰å…¨ï¼Œå› ä¸ºä¼šç¨‹åºçš„äººè¯»å–äº†ä½ çš„è¯·æ±‚urlåœ°å€ï¼Œå°±å¤§æ¦‚çŸ¥é“è¯¥urlå®ç°çš„æ˜¯ä¸€ä¸ªä»€ä¹ˆæ ·çš„æ“ä½œã€‚</p><p>æŸ¥çœ‹RESTé£æ ¼çš„æè¿°ï¼Œä½ ä¼šå‘ç°è¯·æ±‚åœ°å€å˜çš„ç®€å•äº†ï¼Œå¹¶ä¸”å…‰çœ‹è¯·æ±‚URLå¹¶ä¸æ˜¯å¾ˆèƒ½çŒœå‡ºæ¥è¯¥URLçš„å…·ä½“åŠŸèƒ½</p><p>æ‰€ä»¥RESTçš„ä¼˜ç‚¹æœ‰:</p><ul><li>éšè—èµ„æºçš„è®¿é—®è¡Œä¸ºï¼Œæ— æ³•é€šè¿‡åœ°å€å¾—çŸ¥å¯¹èµ„æºæ˜¯ä½•ç§æ“ä½œ</li><li>ä¹¦å†™ç®€åŒ–</li></ul><p>ä½†æ˜¯æˆ‘ä»¬çš„é—®é¢˜ä¹Ÿéšä¹‹è€Œæ¥äº†ï¼Œä¸€ä¸ªç›¸åŒçš„urlåœ°å€å³å¯ä»¥æ˜¯æ–°å¢ä¹Ÿå¯ä»¥æ˜¯ä¿®æ”¹æˆ–è€…æŸ¥è¯¢ï¼Œé‚£ä¹ˆåˆ°åº•æˆ‘ä»¬è¯¥å¦‚ä½•åŒºåˆ†è¯¥è¯·æ±‚åˆ°åº•æ˜¯ä»€ä¹ˆæ“ä½œå‘¢?</p><ul><li>æŒ‰ç…§RESTé£æ ¼è®¿é—®èµ„æºæ—¶ä½¿ç”¨<code>è¡Œä¸ºåŠ¨ä½œ</code>åŒºåˆ†å¯¹èµ„æºè¿›è¡Œäº†ä½•ç§æ“ä½œ<ul><li><strong><code>http://localhost/users</code>æŸ¥è¯¢å…¨éƒ¨ç”¨æˆ·ä¿¡æ¯ GETï¼ˆæŸ¥è¯¢ï¼‰</strong></li><li><strong><code>http://localhost/users/1</code>  æŸ¥è¯¢æŒ‡å®šç”¨æˆ·ä¿¡æ¯ GETï¼ˆæŸ¥è¯¢ï¼‰</strong></li><li><strong><code>http://localhost/users</code>    æ·»åŠ ç”¨æˆ·ä¿¡æ¯    POSTï¼ˆæ–°å¢&#x2F;ä¿å­˜ï¼‰</strong></li><li><strong><code>http://localhost/users</code>    ä¿®æ”¹ç”¨æˆ·ä¿¡æ¯    PUTï¼ˆä¿®æ”¹&#x2F;æ›´æ–°ï¼‰</strong></li><li><strong><code>http://localhost/users/1</code>  åˆ é™¤ç”¨æˆ·ä¿¡æ¯    DELETEï¼ˆåˆ é™¤ï¼‰</strong></li></ul></li></ul><p>è¯·æ±‚çš„æ–¹å¼æ¯”è¾ƒå¤šï¼Œä½†æ˜¯æ¯”è¾ƒå¸¸ç”¨çš„å°±4ç§ï¼Œåˆ†åˆ«æ˜¯<code>GET</code>,<code>POST</code>,<code>PUT</code>,<code>DELETE</code>ã€‚</p><p>æŒ‰ç…§ä¸åŒçš„è¯·æ±‚æ–¹å¼ä»£è¡¨ä¸åŒçš„æ“ä½œç±»å‹ã€‚</p><ul><li>å‘é€GETè¯·æ±‚æ˜¯ç”¨æ¥åšæŸ¥è¯¢</li><li>å‘é€POSTè¯·æ±‚æ˜¯ç”¨æ¥åšæ–°å¢</li><li>å‘é€PUTè¯·æ±‚æ˜¯ç”¨æ¥åšä¿®æ”¹</li><li>å‘é€DELETEè¯·æ±‚æ˜¯ç”¨æ¥åšåˆ é™¤</li></ul><p><strong>æ³¨æ„ï¼š</strong></p><ul><li>ä¸Šè¿°è¡Œä¸ºæ˜¯çº¦å®šæ–¹å¼ï¼Œçº¦å®šä¸æ˜¯è§„èŒƒï¼Œå¯ä»¥æ‰“ç ´ï¼Œæ‰€ä»¥ç§°RESTé£æ ¼ï¼Œè€Œä¸æ˜¯RESTè§„èŒƒ<ul><li>RESTæä¾›äº†å¯¹åº”çš„æ¶æ„æ–¹å¼ï¼ŒæŒ‰ç…§è¿™ç§æ¶æ„è®¾è®¡é¡¹ç›®å¯ä»¥é™ä½å¼€å‘çš„å¤æ‚æ€§ï¼Œæé«˜ç³»ç»Ÿçš„å¯ä¼¸ç¼©æ€§</li><li>RESTä¸­è§„å®šGET&#x2F;POST&#x2F;PUT&#x2F;DELETEé’ˆå¯¹çš„æ˜¯æŸ¥è¯¢&#x2F;æ–°å¢&#x2F;ä¿®æ”¹&#x2F;åˆ é™¤ï¼Œä½†æ˜¯æˆ‘ä»¬å¦‚æœéè¦ç”¨GETè¯·æ±‚åšåˆ é™¤ï¼Œè¿™ç‚¹åœ¨ç¨‹åºä¸Šè¿è¡Œæ˜¯å¯ä»¥å®ç°çš„</li><li>ä½†æ˜¯å¦‚æœç»å¤§å¤šæ•°äººéƒ½éµå¾ªè¿™ç§é£æ ¼ï¼Œä½ å†™çš„ä»£ç è®©åˆ«äººè¯»èµ·æ¥å°±æœ‰ç‚¹è«åå…¶å¦™äº†ã€‚</li></ul></li><li>æè¿°æ¨¡å—çš„åç§°é€šå¸¸ä½¿ç”¨å¤æ•°ï¼Œä¹Ÿå°±æ˜¯åŠ sçš„æ ¼å¼æè¿°ï¼Œè¡¨ç¤ºæ­¤ç±»èµ„æºï¼Œè€Œéå•ä¸ªèµ„æºï¼Œä¾‹å¦‚:usersã€booksã€accountsâ€¦â€¦</li></ul><p>æ¸…æ¥šäº†ä»€ä¹ˆæ˜¯RESTé£æ ¼åï¼Œæˆ‘ä»¬åæœŸä¼šç»å¸¸æåˆ°ä¸€ä¸ªæ¦‚å¿µå«<code>RESTful</code>ï¼Œé‚£ä»€ä¹ˆåˆæ˜¯RESTfulå‘¢?</p><ul><li>æ ¹æ®RESTé£æ ¼å¯¹èµ„æºè¿›è¡Œè®¿é—®ç§°ä¸º<code>RESTful</code>ã€‚</li></ul><p>åæœŸæˆ‘ä»¬åœ¨è¿›è¡Œå¼€å‘çš„è¿‡ç¨‹ä¸­ï¼Œå¤§å¤šæ˜¯éƒ½æ˜¯éµä»RESTé£æ ¼æ¥è®¿é—®æˆ‘ä»¬çš„åå°æœåŠ¡ï¼Œæ‰€ä»¥å¯ä»¥è¯´å’±ä»¬ä»¥åéƒ½æ˜¯åŸºäºRESTfulæ¥è¿›è¡Œå¼€å‘çš„ã€‚</p><h3 id="4-2-RESTfulå…¥é—¨æ¡ˆä¾‹"><a href="#4-2-RESTfulå…¥é—¨æ¡ˆä¾‹" class="headerlink" title="4.2 RESTfulå…¥é—¨æ¡ˆä¾‹"></a>4.2 RESTfulå…¥é—¨æ¡ˆä¾‹</h3><h4 id="4-2-1-ç¯å¢ƒå‡†å¤‡"><a href="#4-2-1-ç¯å¢ƒå‡†å¤‡" class="headerlink" title="4.2.1 ç¯å¢ƒå‡†å¤‡"></a>4.2.1 ç¯å¢ƒå‡†å¤‡</h4><ul><li><p>åˆ›å»ºä¸€ä¸ªWebçš„Mavené¡¹ç›®</p></li><li><p>pom.xmlæ·»åŠ Springä¾èµ–</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.itheima<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springmvc_06_rest<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>war<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.10.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-databind<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.9.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.tomcat.maven<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>tomcat7-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">port</span>&gt;</span>80<span class="tag">&lt;/<span class="name">port</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">path</span>&gt;</span>/<span class="tag">&lt;/<span class="name">path</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>åˆ›å»ºå¯¹åº”çš„é…ç½®ç±»</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ServletContainersInitConfig</span> <span class="keyword">extends</span> <span class="title class_">AbstractAnnotationConfigDispatcherServletInitializer</span> &#123;</span><br><span class="line">    <span class="keyword">protected</span> Class&lt;?&gt;[] getRootConfigClasses() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Class</span>[<span class="number">0</span>];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> Class&lt;?&gt;[] getServletConfigClasses() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Class</span>[]&#123;SpringMvcConfig.class&#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> String[] getServletMappings() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">String</span>[]&#123;<span class="string">&quot;/&quot;</span>&#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ä¹±ç å¤„ç†</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> Filter[] getServletFilters() &#123;</span><br><span class="line">        <span class="type">CharacterEncodingFilter</span> <span class="variable">filter</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CharacterEncodingFilter</span>();</span><br><span class="line">        filter.setEncoding(<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Filter</span>[]&#123;filter&#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ComponentScan(&quot;com.itheima.controller&quot;)</span></span><br><span class="line"><span class="comment">//å¼€å¯jsonæ•°æ®ç±»å‹è‡ªåŠ¨è½¬æ¢</span></span><br><span class="line"><span class="meta">@EnableWebMvc</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringMvcConfig</span> &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>ç¼–å†™æ¨¡å‹ç±»Userå’ŒBook</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line">    <span class="comment">//getter...setter...toStringçœç•¥</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Book</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">double</span> price;</span><br><span class="line">     <span class="comment">//getter...setter...toStringçœç•¥</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>ç¼–å†™UserControllerå’ŒBookController</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line"><span class="meta">@RequestMapping(&quot;/save&quot;)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">save</span><span class="params">(<span class="meta">@RequestBody</span> User user)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;user save...&quot;</span>+user);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;&#123;&#x27;module&#x27;:&#x27;user save&#x27;&#125;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/delete&quot;)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">delete</span><span class="params">(Integer id)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;user delete...&quot;</span> + id);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;&#123;&#x27;module&#x27;:&#x27;user delete&#x27;&#125;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/update&quot;)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">update</span><span class="params">(<span class="meta">@RequestBody</span> User user)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;user update...&quot;</span> + user);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;&#123;&#x27;module&#x27;:&#x27;user update&#x27;&#125;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/getById&quot;)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getById</span><span class="params">(Integer id)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;user getById...&quot;</span> + id);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;&#123;&#x27;module&#x27;:&#x27;user getById&#x27;&#125;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/findAll&quot;)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getAll</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;user getAll...&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;&#123;&#x27;module&#x27;:&#x27;user getAll&#x27;&#125;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookController</span> &#123;</span><br><span class="line">    </span><br><span class="line"><span class="meta">@RequestMapping(value = &quot;/books&quot;,method = RequestMethod.POST)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">save</span><span class="params">(<span class="meta">@RequestBody</span> Book book)</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;book save...&quot;</span> + book);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;&#123;&#x27;module&#x27;:&#x27;book save&#x27;&#125;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/books/&#123;id&#125;&quot;,method = RequestMethod.DELETE)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">delete</span><span class="params">(<span class="meta">@PathVariable</span> Integer id)</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;book delete...&quot;</span> + id);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;&#123;&#x27;module&#x27;:&#x27;book delete&#x27;&#125;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/books&quot;,method = RequestMethod.PUT)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">update</span><span class="params">(<span class="meta">@RequestBody</span> Book book)</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;book update...&quot;</span> + book);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;&#123;&#x27;module&#x27;:&#x27;book update&#x27;&#125;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/books/&#123;id&#125;&quot;,method = RequestMethod.GET)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getById</span><span class="params">(<span class="meta">@PathVariable</span> Integer id)</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;book getById...&quot;</span> + id);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;&#123;&#x27;module&#x27;:&#x27;book getById&#x27;&#125;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/books&quot;,method = RequestMethod.GET)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getAll</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;book getAll...&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;&#123;&#x27;module&#x27;:&#x27;book getAll&#x27;&#125;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p>æœ€ç»ˆåˆ›å»ºå¥½çš„é¡¹ç›®ç»“æ„å¦‚ä¸‹:</p><p><img src="/2022/08/03/SpringMVC_day01/1630503741455.png" alt="1630503741455"></p><h4 id="4-2-2-æ€è·¯åˆ†æ"><a href="#4-2-2-æ€è·¯åˆ†æ" class="headerlink" title="4.2.2 æ€è·¯åˆ†æ"></a>4.2.2 æ€è·¯åˆ†æ</h4><blockquote><p>éœ€æ±‚:å°†ä¹‹å‰çš„å¢åˆ æ”¹æŸ¥æ›¿æ¢æˆRESTfulçš„å¼€å‘æ–¹å¼ã€‚</p><p>1.ä¹‹å‰ä¸åŒçš„è¯·æ±‚æœ‰ä¸åŒçš„è·¯å¾„,ç°åœ¨è¦å°†å…¶ä¿®æ”¹ä¸ºç»Ÿä¸€çš„è¯·æ±‚è·¯å¾„</p><p> ä¿®æ”¹å‰: æ–°å¢: &#x2F;save ,ä¿®æ”¹: &#x2F;update,åˆ é™¤ &#x2F;deleteâ€¦</p><p> ä¿®æ”¹å: å¢åˆ æ”¹æŸ¥: &#x2F;users</p><p>2.æ ¹æ®GETæŸ¥è¯¢ã€POSTæ–°å¢ã€PUTä¿®æ”¹ã€DELETEåˆ é™¤å¯¹æ–¹æ³•çš„è¯·æ±‚æ–¹å¼è¿›è¡Œé™å®š</p><p>3.å‘é€è¯·æ±‚çš„è¿‡ç¨‹ä¸­å¦‚ä½•è®¾ç½®è¯·æ±‚å‚æ•°?</p></blockquote><h4 id="4-2-3-ä¿®æ”¹RESTfulé£æ ¼"><a href="#4-2-3-ä¿®æ”¹RESTfulé£æ ¼" class="headerlink" title="4.2.3 ä¿®æ”¹RESTfulé£æ ¼"></a>4.2.3 ä¿®æ”¹RESTfulé£æ ¼</h4><h5 id="æ–°å¢"><a href="#æ–°å¢" class="headerlink" title="æ–°å¢"></a>æ–°å¢</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line"><span class="comment">//è®¾ç½®å½“å‰è¯·æ±‚æ–¹æ³•ä¸ºPOSTï¼Œè¡¨ç¤ºRESTé£æ ¼ä¸­çš„æ·»åŠ æ“ä½œ</span></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/users&quot;,method = RequestMethod.POST)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">save</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;user save...&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;&#123;&#x27;module&#x27;:&#x27;user save&#x27;&#125;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p>å°†è¯·æ±‚è·¯å¾„æ›´æ”¹ä¸º<code>/users</code></p><ul><li>è®¿é—®è¯¥æ–¹æ³•ä½¿ç”¨ POST: <code>http://localhost/users</code></li></ul></li><li><p>ä½¿ç”¨methodå±æ€§é™å®šè¯¥æ–¹æ³•çš„è®¿é—®æ–¹å¼ä¸º<code>POST</code></p><ul><li><p>å¦‚æœå‘é€çš„ä¸æ˜¯POSTè¯·æ±‚ï¼Œæ¯”å¦‚å‘é€GETè¯·æ±‚ï¼Œåˆ™ä¼šæŠ¥é”™</p><p><img src="/2022/08/03/SpringMVC_day01/1630505392070.png" alt="1630505392070"></p></li></ul></li></ul><h5 id="åˆ é™¤"><a href="#åˆ é™¤" class="headerlink" title="åˆ é™¤"></a>åˆ é™¤</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line">    <span class="comment">//è®¾ç½®å½“å‰è¯·æ±‚æ–¹æ³•ä¸ºDELETEï¼Œè¡¨ç¤ºRESTé£æ ¼ä¸­çš„åˆ é™¤æ“ä½œ</span></span><br><span class="line"><span class="meta">@RequestMapping(value = &quot;/users&quot;,method = RequestMethod.DELETE)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">delete</span><span class="params">(Integer id)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;user delete...&quot;</span> + id);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;&#123;&#x27;module&#x27;:&#x27;user delete&#x27;&#125;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>å°†è¯·æ±‚è·¯å¾„æ›´æ”¹ä¸º<code>/users</code><ul><li>è®¿é—®è¯¥æ–¹æ³•ä½¿ç”¨ DELETE: <code>http://localhost/users</code></li></ul></li></ul><p>è®¿é—®æˆåŠŸï¼Œä½†æ˜¯åˆ é™¤æ–¹æ³•æ²¡æœ‰æºå¸¦æ‰€è¦åˆ é™¤æ•°æ®çš„id,æ‰€ä»¥é’ˆå¯¹RESTfulçš„å¼€å‘ï¼Œå¦‚ä½•æºå¸¦æ•°æ®å‚æ•°?</p><h6 id="ä¼ é€’è·¯å¾„å‚æ•°"><a href="#ä¼ é€’è·¯å¾„å‚æ•°" class="headerlink" title="ä¼ é€’è·¯å¾„å‚æ•°"></a>ä¼ é€’è·¯å¾„å‚æ•°</h6><p>å‰ç«¯å‘é€è¯·æ±‚çš„æ—¶å€™ä½¿ç”¨:<code>http://localhost/users/1</code>,è·¯å¾„ä¸­çš„<code>1</code>å°±æ˜¯æˆ‘ä»¬æƒ³è¦ä¼ é€’çš„å‚æ•°ã€‚</p><p>åç«¯è·å–å‚æ•°ï¼Œéœ€è¦åšå¦‚ä¸‹ä¿®æ”¹:</p><ul><li>ä¿®æ”¹@RequestMappingçš„valueå±æ€§ï¼Œå°†å…¶ä¸­ä¿®æ”¹ä¸º<code>/users/&#123;id&#125;</code>ï¼Œç›®çš„æ˜¯å’Œè·¯å¾„åŒ¹é…</li><li>åœ¨æ–¹æ³•çš„å½¢å‚å‰æ·»åŠ @PathVariableæ³¨è§£</li></ul><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line">    <span class="comment">//è®¾ç½®å½“å‰è¯·æ±‚æ–¹æ³•ä¸ºDELETEï¼Œè¡¨ç¤ºRESTé£æ ¼ä¸­çš„åˆ é™¤æ“ä½œ</span></span><br><span class="line"><span class="meta">@RequestMapping(value = &quot;/users/&#123;id&#125;&quot;,method = RequestMethod.DELETE)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">delete</span><span class="params">(<span class="meta">@PathVariable</span> Integer id)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;user delete...&quot;</span> + id);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;&#123;&#x27;module&#x27;:&#x27;user delete&#x27;&#125;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ€è€ƒå¦‚ä¸‹ä¸¤ä¸ªé—®é¢˜ï¼š</strong></p><p>(1)å¦‚æœæ–¹æ³•å½¢å‚çš„åç§°å’Œè·¯å¾„<code>&#123;&#125;</code>ä¸­çš„å€¼ä¸ä¸€è‡´ï¼Œè¯¥æ€ä¹ˆåŠ?</p><p><img src="/2022/08/03/SpringMVC_day01/1630506231379.png" alt="1630506231379"></p><p>(2)å¦‚æœæœ‰å¤šä¸ªå‚æ•°éœ€è¦ä¼ é€’è¯¥å¦‚ä½•ç¼–å†™?</p><p>å‰ç«¯å‘é€è¯·æ±‚çš„æ—¶å€™ä½¿ç”¨:<code>http://localhost/users/1/tom</code>,è·¯å¾„ä¸­çš„<code>1</code>å’Œ<code>tom</code>å°±æ˜¯æˆ‘ä»¬æƒ³è¦ä¼ é€’çš„ä¸¤ä¸ªå‚æ•°ã€‚</p><p>åç«¯è·å–å‚æ•°ï¼Œéœ€è¦åšå¦‚ä¸‹ä¿®æ”¹:</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line">    <span class="comment">//è®¾ç½®å½“å‰è¯·æ±‚æ–¹æ³•ä¸ºDELETEï¼Œè¡¨ç¤ºRESTé£æ ¼ä¸­çš„åˆ é™¤æ“ä½œ</span></span><br><span class="line"><span class="meta">@RequestMapping(value = &quot;/users/&#123;id&#125;/&#123;name&#125;&quot;,method = RequestMethod.DELETE)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">delete</span><span class="params">(<span class="meta">@PathVariable</span> Integer id,<span class="meta">@PathVariable</span> String name)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;user delete...&quot;</span> + id+<span class="string">&quot;,&quot;</span>+name);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;&#123;&#x27;module&#x27;:&#x27;user delete&#x27;&#125;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="ä¿®æ”¹"><a href="#ä¿®æ”¹" class="headerlink" title="ä¿®æ”¹"></a>ä¿®æ”¹</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line">    <span class="comment">//è®¾ç½®å½“å‰è¯·æ±‚æ–¹æ³•ä¸ºPUTï¼Œè¡¨ç¤ºRESTé£æ ¼ä¸­çš„ä¿®æ”¹æ“ä½œ</span></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/users&quot;,method = RequestMethod.PUT)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">update</span><span class="params">(<span class="meta">@RequestBody</span> User user)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;user update...&quot;</span> + user);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;&#123;&#x27;module&#x27;:&#x27;user update&#x27;&#125;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p>å°†è¯·æ±‚è·¯å¾„æ›´æ”¹ä¸º<code>/users</code></p><ul><li>è®¿é—®è¯¥æ–¹æ³•ä½¿ç”¨ PUT: <code>http://localhost/users</code></li></ul></li><li><p>è®¿é—®å¹¶æºå¸¦å‚æ•°:</p><p><img src="/2022/08/03/SpringMVC_day01/1630506507096.png" alt="1630506507096"></p></li></ul><h5 id="æ ¹æ®IDæŸ¥è¯¢"><a href="#æ ¹æ®IDæŸ¥è¯¢" class="headerlink" title="æ ¹æ®IDæŸ¥è¯¢"></a>æ ¹æ®IDæŸ¥è¯¢</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line">    <span class="comment">//è®¾ç½®å½“å‰è¯·æ±‚æ–¹æ³•ä¸ºGETï¼Œè¡¨ç¤ºRESTé£æ ¼ä¸­çš„æŸ¥è¯¢æ“ä½œ</span></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/users/&#123;id&#125;&quot; ,method = RequestMethod.GET)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getById</span><span class="params">(<span class="meta">@PathVariable</span> Integer id)</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;user getById...&quot;</span>+id);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;&#123;&#x27;module&#x27;:&#x27;user getById&#x27;&#125;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å°†è¯·æ±‚è·¯å¾„æ›´æ”¹ä¸º<code>/users</code></p><ul><li>è®¿é—®è¯¥æ–¹æ³•ä½¿ç”¨ GET: <code>http://localhost/users/666</code></li></ul><h5 id="æŸ¥è¯¢æ‰€æœ‰"><a href="#æŸ¥è¯¢æ‰€æœ‰" class="headerlink" title="æŸ¥è¯¢æ‰€æœ‰"></a>æŸ¥è¯¢æ‰€æœ‰</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line">    <span class="comment">//è®¾ç½®å½“å‰è¯·æ±‚æ–¹æ³•ä¸ºGETï¼Œè¡¨ç¤ºRESTé£æ ¼ä¸­çš„æŸ¥è¯¢æ“ä½œ</span></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/users&quot; ,method = RequestMethod.GET)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getAll</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;user getAll...&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;&#123;&#x27;module&#x27;:&#x27;user getAll&#x27;&#125;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å°†è¯·æ±‚è·¯å¾„æ›´æ”¹ä¸º<code>/users</code></p><ul><li>è®¿é—®è¯¥æ–¹æ³•ä½¿ç”¨ GET: <code>http://localhost/users</code></li></ul><p><strong>å°ç»“</strong></p><p>RESTfulå…¥é—¨æ¡ˆä¾‹ï¼Œæˆ‘ä»¬éœ€è¦å­¦ä¹ çš„å†…å®¹å¦‚ä¸‹:</p><p>(1)è®¾å®šHttpè¯·æ±‚åŠ¨ä½œ(åŠ¨è¯)</p><p><code>@RequestMapping(value=&quot;&quot;,method = RequestMethod.POST|GET|PUT|DELETE)</code></p><p>(2)è®¾å®šè¯·æ±‚å‚æ•°(è·¯å¾„å˜é‡)</p><p><code>@RequestMapping(value=&quot;/users/&#123;id&#125;&quot;,method = RequestMethod.DELETE)</code></p><p><code>@ReponseBody</code></p><p><code>public String delete(@PathVariable Integer id)&#123;</code></p><p><code>&#125;</code></p><h4 id="çŸ¥è¯†ç‚¹1ï¼š-PathVariable"><a href="#çŸ¥è¯†ç‚¹1ï¼š-PathVariable" class="headerlink" title="çŸ¥è¯†ç‚¹1ï¼š@PathVariable"></a>çŸ¥è¯†ç‚¹1ï¼š@PathVariable</h4><table><thead><tr><th>åç§°</th><th>@PathVariable</th></tr></thead><tbody><tr><td>ç±»å‹</td><td><em>å½¢å‚æ³¨è§£</em></td></tr><tr><td>ä½ç½®</td><td>SpringMVCæ§åˆ¶å™¨æ–¹æ³•å½¢å‚å®šä¹‰å‰é¢</td></tr><tr><td>ä½œç”¨</td><td>ç»‘å®šè·¯å¾„å‚æ•°ä¸å¤„ç†å™¨æ–¹æ³•å½¢å‚é—´çš„å…³ç³»ï¼Œè¦æ±‚è·¯å¾„å‚æ•°åä¸å½¢å‚åä¸€ä¸€å¯¹åº”</td></tr></tbody></table><p>å…³äºæ¥æ”¶å‚æ•°ï¼Œæˆ‘ä»¬å­¦è¿‡ä¸‰ä¸ªæ³¨è§£<code>@RequestBody</code>ã€<code>@RequestParam</code>ã€<code>@PathVariable</code>,è¿™ä¸‰ä¸ªæ³¨è§£ä¹‹é—´çš„åŒºåˆ«å’Œåº”ç”¨åˆ†åˆ«æ˜¯ä»€ä¹ˆ?</p><ul><li>åŒºåˆ«<ul><li>@RequestParamç”¨äºæ¥æ”¶urlåœ°å€ä¼ å‚æˆ–è¡¨å•ä¼ å‚</li><li>@RequestBodyç”¨äºæ¥æ”¶jsonæ•°æ®</li><li>@PathVariableç”¨äºæ¥æ”¶è·¯å¾„å‚æ•°ï¼Œä½¿ç”¨{å‚æ•°åç§°}æè¿°è·¯å¾„å‚æ•°</li></ul></li><li>åº”ç”¨<ul><li>åæœŸå¼€å‘ä¸­ï¼Œå‘é€è¯·æ±‚å‚æ•°è¶…è¿‡1ä¸ªæ—¶ï¼Œä»¥jsonæ ¼å¼ä¸ºä¸»ï¼Œ@RequestBodyåº”ç”¨è¾ƒå¹¿</li><li>å¦‚æœå‘é€éjsonæ ¼å¼æ•°æ®ï¼Œé€‰ç”¨@RequestParamæ¥æ”¶è¯·æ±‚å‚æ•°</li><li>é‡‡ç”¨RESTfulè¿›è¡Œå¼€å‘ï¼Œå½“å‚æ•°æ•°é‡è¾ƒå°‘æ—¶ï¼Œä¾‹å¦‚1ä¸ªï¼Œå¯ä»¥é‡‡ç”¨@PathVariableæ¥æ”¶è¯·æ±‚è·¯å¾„å˜é‡ï¼Œé€šå¸¸ç”¨äºä¼ é€’idå€¼</li></ul></li></ul><h3 id="4-3-RESTfulå¿«é€Ÿå¼€å‘"><a href="#4-3-RESTfulå¿«é€Ÿå¼€å‘" class="headerlink" title="4.3 RESTfulå¿«é€Ÿå¼€å‘"></a>4.3 RESTfulå¿«é€Ÿå¼€å‘</h3><p>åšå®Œäº†RESTfulçš„å¼€å‘ï¼Œä½ ä¼šå‘ç°&#x3D;&#x3D;å¥½éº»çƒ¦&#x3D;&#x3D;ï¼Œéº»çƒ¦åœ¨å“ª?</p><p><img src="/2022/08/03/SpringMVC_day01/1630507339724.png" alt="1630507339724"></p><p>é—®é¢˜1ï¼šæ¯ä¸ªæ–¹æ³•çš„@RequestMappingæ³¨è§£ä¸­éƒ½å®šä¹‰äº†è®¿é—®è·¯å¾„&#x2F;booksï¼Œé‡å¤æ€§å¤ªé«˜ã€‚</p><p>é—®é¢˜2ï¼šæ¯ä¸ªæ–¹æ³•çš„@RequestMappingæ³¨è§£ä¸­éƒ½è¦ä½¿ç”¨methodå±æ€§å®šä¹‰è¯·æ±‚æ–¹å¼ï¼Œé‡å¤æ€§å¤ªé«˜ã€‚</p><p>é—®é¢˜3ï¼šæ¯ä¸ªæ–¹æ³•å“åº”jsonéƒ½éœ€è¦åŠ ä¸Š@ResponseBodyæ³¨è§£ï¼Œé‡å¤æ€§å¤ªé«˜ã€‚</p><p>å¯¹äºä¸Šé¢æ‰€æçš„è¿™ä¸‰ä¸ªé—®é¢˜ï¼Œå…·ä½“è¯¥å¦‚ä½•è§£å†³?</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RestController</span> <span class="comment">//@Controller + ReponseBody</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/books&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookController</span> &#123;</span><br><span class="line">    </span><br><span class="line"><span class="comment">//@RequestMapping(method = RequestMethod.POST)</span></span><br><span class="line">    <span class="meta">@PostMapping</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">save</span><span class="params">(<span class="meta">@RequestBody</span> Book book)</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;book save...&quot;</span> + book);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;&#123;&#x27;module&#x27;:&#x27;book save&#x27;&#125;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//@RequestMapping(value = &quot;/&#123;id&#125;&quot;,method = RequestMethod.DELETE)</span></span><br><span class="line">    <span class="meta">@DeleteMapping(&quot;/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">delete</span><span class="params">(<span class="meta">@PathVariable</span> Integer id)</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;book delete...&quot;</span> + id);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;&#123;&#x27;module&#x27;:&#x27;book delete&#x27;&#125;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//@RequestMapping(method = RequestMethod.PUT)</span></span><br><span class="line">    <span class="meta">@PutMapping</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">update</span><span class="params">(<span class="meta">@RequestBody</span> Book book)</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;book update...&quot;</span> + book);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;&#123;&#x27;module&#x27;:&#x27;book update&#x27;&#125;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//@RequestMapping(value = &quot;/&#123;id&#125;&quot;,method = RequestMethod.GET)</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getById</span><span class="params">(<span class="meta">@PathVariable</span> Integer id)</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;book getById...&quot;</span> + id);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;&#123;&#x27;module&#x27;:&#x27;book getById&#x27;&#125;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//@RequestMapping(method = RequestMethod.GET)</span></span><br><span class="line">    <span class="meta">@GetMapping</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getAll</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;book getAll...&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;&#123;&#x27;module&#x27;:&#x27;book getAll&#x27;&#125;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯¹äºåˆšæ‰çš„é—®é¢˜ï¼Œæˆ‘ä»¬éƒ½æœ‰å¯¹åº”çš„è§£å†³æ–¹æ¡ˆï¼š</p><p>é—®é¢˜1ï¼šæ¯ä¸ªæ–¹æ³•çš„@RequestMappingæ³¨è§£ä¸­éƒ½å®šä¹‰äº†è®¿é—®è·¯å¾„&#x2F;booksï¼Œé‡å¤æ€§å¤ªé«˜ã€‚</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">å°†@RequestMappingæåˆ°ç±»ä¸Šé¢ï¼Œç”¨æ¥å®šä¹‰æ‰€æœ‰æ–¹æ³•å…±åŒçš„è®¿é—®è·¯å¾„ã€‚</span><br></pre></td></tr></table></figure><p>é—®é¢˜2ï¼šæ¯ä¸ªæ–¹æ³•çš„@RequestMappingæ³¨è§£ä¸­éƒ½è¦ä½¿ç”¨methodå±æ€§å®šä¹‰è¯·æ±‚æ–¹å¼ï¼Œé‡å¤æ€§å¤ªé«˜ã€‚</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ä½¿ç”¨@GetMapping  @PostMapping  @PutMapping  @DeleteMappingä»£æ›¿</span><br></pre></td></tr></table></figure><p>é—®é¢˜3ï¼šæ¯ä¸ªæ–¹æ³•å“åº”jsonéƒ½éœ€è¦åŠ ä¸Š@ResponseBodyæ³¨è§£ï¼Œé‡å¤æ€§å¤ªé«˜ã€‚</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1.å°†ResponseBodyæåˆ°ç±»ä¸Šé¢ï¼Œè®©æ‰€æœ‰çš„æ–¹æ³•éƒ½æœ‰@ResponseBodyçš„åŠŸèƒ½</span><br><span class="line">2.ä½¿ç”¨@RestControlleræ³¨è§£æ›¿æ¢@Controllerä¸@ResponseBodyæ³¨è§£ï¼Œç®€åŒ–ä¹¦å†™</span><br></pre></td></tr></table></figure><h4 id="çŸ¥è¯†ç‚¹1ï¼š-RestController"><a href="#çŸ¥è¯†ç‚¹1ï¼š-RestController" class="headerlink" title="çŸ¥è¯†ç‚¹1ï¼š@RestController"></a>çŸ¥è¯†ç‚¹1ï¼š@RestController</h4><table><thead><tr><th>åç§°</th><th>@RestController</th></tr></thead><tbody><tr><td>ç±»å‹</td><td>ç±»æ³¨è§£</td></tr><tr><td>ä½ç½®</td><td>åŸºäºSpringMVCçš„RESTfulå¼€å‘æ§åˆ¶å™¨ç±»å®šä¹‰ä¸Šæ–¹</td></tr><tr><td>ä½œç”¨</td><td>è®¾ç½®å½“å‰æ§åˆ¶å™¨ç±»ä¸ºRESTfulé£æ ¼ï¼Œ<br>ç­‰åŒäº<code>@Controller</code>ä¸<code>@ResponseBody</code>ä¸¤ä¸ªæ³¨è§£ç»„åˆåŠŸèƒ½</td></tr></tbody></table><h4 id="çŸ¥è¯†ç‚¹2ï¼š-GetMapping-PostMapping-PutMapping-DeleteMapping"><a href="#çŸ¥è¯†ç‚¹2ï¼š-GetMapping-PostMapping-PutMapping-DeleteMapping" class="headerlink" title="çŸ¥è¯†ç‚¹2ï¼š@GetMapping @PostMapping @PutMapping @DeleteMapping"></a>çŸ¥è¯†ç‚¹2ï¼š@GetMapping @PostMapping @PutMapping @DeleteMapping</h4><table><thead><tr><th>åç§°</th><th>@GetMapping @PostMapping @PutMapping @DeleteMapping</th></tr></thead><tbody><tr><td>ç±»å‹</td><td>æ–¹æ³•æ³¨è§£</td></tr><tr><td>ä½ç½®</td><td>åŸºäºSpringMVCçš„RESTfulå¼€å‘æ§åˆ¶å™¨æ–¹æ³•å®šä¹‰ä¸Šæ–¹</td></tr><tr><td>ä½œç”¨</td><td>è®¾ç½®å½“å‰æ§åˆ¶å™¨æ–¹æ³•è¯·æ±‚è®¿é—®è·¯å¾„ä¸è¯·æ±‚åŠ¨ä½œï¼Œæ¯ç§å¯¹åº”ä¸€ä¸ªè¯·æ±‚åŠ¨ä½œï¼Œ<br>ä¾‹å¦‚@GetMappingå¯¹åº”GETè¯·æ±‚</td></tr><tr><td>ç›¸å…³å±æ€§</td><td>valueï¼ˆé»˜è®¤ï¼‰ï¼šè¯·æ±‚è®¿é—®è·¯å¾„</td></tr></tbody></table><h3 id="4-4-RESTfulæ¡ˆä¾‹"><a href="#4-4-RESTfulæ¡ˆä¾‹" class="headerlink" title="4.4 RESTfulæ¡ˆä¾‹"></a>4.4 RESTfulæ¡ˆä¾‹</h3><h4 id="4-4-1-éœ€æ±‚åˆ†æ"><a href="#4-4-1-éœ€æ±‚åˆ†æ" class="headerlink" title="4.4.1 éœ€æ±‚åˆ†æ"></a>4.4.1 éœ€æ±‚åˆ†æ</h4><p>éœ€æ±‚ä¸€ï¼šå›¾ç‰‡åˆ—è¡¨æŸ¥è¯¢ï¼Œä»åå°è¿”å›æ•°æ®ï¼Œå°†æ•°æ®å±•ç¤ºåœ¨é¡µé¢ä¸Š</p><p><img src="/2022/08/03/SpringMVC_day01/1630508310063.png" alt="1630508310063"></p><p>éœ€æ±‚äºŒï¼šæ–°å¢å›¾ç‰‡ï¼Œå°†æ–°å¢å›¾ä¹¦çš„æ•°æ®ä¼ é€’åˆ°åå°ï¼Œå¹¶åœ¨æ§åˆ¶å°æ‰“å°</p><p><img src="/2022/08/03/SpringMVC_day01/1630508367105.png" alt="1630508367105"></p><p><strong>è¯´æ˜ï¼š</strong>æ­¤æ¬¡æ¡ˆä¾‹çš„é‡ç‚¹æ˜¯åœ¨SpringMVCä¸­å¦‚ä½•ä½¿ç”¨RESTfulå®ç°å‰åå°äº¤äº’ï¼Œæ‰€ä»¥æœ¬æ¡ˆä¾‹å¹¶æ²¡æœ‰å’Œæ•°æ®åº“è¿›è¡Œäº¤äº’ï¼Œæ‰€æœ‰æ•°æ®ä½¿ç”¨<code>å‡</code>æ•°æ®æ¥å®Œæˆå¼€å‘ã€‚</p><p>æ­¥éª¤åˆ†æ:</p><blockquote><p>1.æ­å»ºé¡¹ç›®å¯¼å…¥jaråŒ…</p><p>2.ç¼–å†™Controllerç±»ï¼Œæä¾›ä¸¤ä¸ªæ–¹æ³•ï¼Œä¸€ä¸ªç”¨æ¥åšåˆ—è¡¨æŸ¥è¯¢ï¼Œä¸€ä¸ªç”¨æ¥åšæ–°å¢</p><p>3.åœ¨æ–¹æ³•ä¸Šä½¿ç”¨RESTfulè¿›è¡Œè·¯å¾„è®¾ç½®</p><p>4.å®Œæˆè¯·æ±‚ã€å‚æ•°çš„æ¥æ”¶å’Œç»“æœçš„å“åº”</p><p>5.ä½¿ç”¨PostManè¿›è¡Œæµ‹è¯•</p><p>6.å°†å‰ç«¯é¡µé¢æ‹·è´åˆ°é¡¹ç›®ä¸­</p><p>7.é¡µé¢å‘é€ajaxè¯·æ±‚</p><p>8.å®Œæˆé¡µé¢æ•°æ®çš„å±•ç¤º</p></blockquote><h4 id="4-4-2-ç¯å¢ƒå‡†å¤‡"><a href="#4-4-2-ç¯å¢ƒå‡†å¤‡" class="headerlink" title="4.4.2 ç¯å¢ƒå‡†å¤‡"></a>4.4.2 ç¯å¢ƒå‡†å¤‡</h4><ul><li><p>åˆ›å»ºä¸€ä¸ªWebçš„Mavené¡¹ç›®</p></li><li><p>pom.xmlæ·»åŠ Springä¾èµ–</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.itheima<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springmvc_07_rest_case<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>war<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.10.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-databind<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.9.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.tomcat.maven<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>tomcat7-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">port</span>&gt;</span>80<span class="tag">&lt;/<span class="name">port</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">path</span>&gt;</span>/<span class="tag">&lt;/<span class="name">path</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>åˆ›å»ºå¯¹åº”çš„é…ç½®ç±»</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ServletContainersInitConfig</span> <span class="keyword">extends</span> <span class="title class_">AbstractAnnotationConfigDispatcherServletInitializer</span> &#123;</span><br><span class="line">    <span class="keyword">protected</span> Class&lt;?&gt;[] getRootConfigClasses() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Class</span>[<span class="number">0</span>];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> Class&lt;?&gt;[] getServletConfigClasses() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Class</span>[]&#123;SpringMvcConfig.class&#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> String[] getServletMappings() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">String</span>[]&#123;<span class="string">&quot;/&quot;</span>&#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ä¹±ç å¤„ç†</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> Filter[] getServletFilters() &#123;</span><br><span class="line">        <span class="type">CharacterEncodingFilter</span> <span class="variable">filter</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CharacterEncodingFilter</span>();</span><br><span class="line">        filter.setEncoding(<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Filter</span>[]&#123;filter&#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ComponentScan(&quot;com.itheima.controller&quot;)</span></span><br><span class="line"><span class="comment">//å¼€å¯jsonæ•°æ®ç±»å‹è‡ªåŠ¨è½¬æ¢</span></span><br><span class="line"><span class="meta">@EnableWebMvc</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringMvcConfig</span> &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>ç¼–å†™æ¨¡å‹ç±»Book</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Book</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String type;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String description;</span><br><span class="line">    <span class="comment">//setter...getter...toStringç•¥</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>ç¼–å†™BookController</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookController</span> &#123;</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p>æœ€ç»ˆåˆ›å»ºå¥½çš„é¡¹ç›®ç»“æ„å¦‚ä¸‹:</p><p><img src="/2022/08/03/SpringMVC_day01/1630508864017.png" alt="1630508864017"></p><h4 id="4-4-2-åå°æ¥å£å¼€å‘"><a href="#4-4-2-åå°æ¥å£å¼€å‘" class="headerlink" title="4.4.2 åå°æ¥å£å¼€å‘"></a>4.4.2 åå°æ¥å£å¼€å‘</h4><h5 id="æ­¥éª¤1ï¼šç¼–å†™Controllerç±»å¹¶ä½¿ç”¨RESTfulè¿›è¡Œé…ç½®"><a href="#æ­¥éª¤1ï¼šç¼–å†™Controllerç±»å¹¶ä½¿ç”¨RESTfulè¿›è¡Œé…ç½®" class="headerlink" title="æ­¥éª¤1ï¼šç¼–å†™Controllerç±»å¹¶ä½¿ç”¨RESTfulè¿›è¡Œé…ç½®"></a>æ­¥éª¤1ï¼šç¼–å†™Controllerç±»å¹¶ä½¿ç”¨RESTfulè¿›è¡Œé…ç½®</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/books&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostMapping</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">save</span><span class="params">(<span class="meta">@RequestBody</span> Book book)</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;book save ==&gt; &quot;</span>+ book);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;&#123;&#x27;module&#x27;:&#x27;book save success&#x27;&#125;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"> <span class="meta">@GetMapping</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;Book&gt; <span class="title function_">getAll</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;book getAll is running ...&quot;</span>);</span><br><span class="line">        List&lt;Book&gt; bookList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;Book&gt;();</span><br><span class="line"></span><br><span class="line">        <span class="type">Book</span> <span class="variable">book1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Book</span>();</span><br><span class="line">        book1.setType(<span class="string">&quot;è®¡ç®—æœº&quot;</span>);</span><br><span class="line">        book1.setName(<span class="string">&quot;SpringMVCå…¥é—¨æ•™ç¨‹&quot;</span>);</span><br><span class="line">        book1.setDescription(<span class="string">&quot;å°è¯•ç‰›åˆ€&quot;</span>);</span><br><span class="line">        bookList.add(book1);</span><br><span class="line"></span><br><span class="line">        <span class="type">Book</span> <span class="variable">book2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Book</span>();</span><br><span class="line">        book2.setType(<span class="string">&quot;è®¡ç®—æœº&quot;</span>);</span><br><span class="line">        book2.setName(<span class="string">&quot;SpringMVCå®æˆ˜æ•™ç¨‹&quot;</span>);</span><br><span class="line">        book2.setDescription(<span class="string">&quot;ä¸€ä»£å®—å¸ˆ&quot;</span>);</span><br><span class="line">        bookList.add(book2);</span><br><span class="line"></span><br><span class="line">        <span class="type">Book</span> <span class="variable">book3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Book</span>();</span><br><span class="line">        book3.setType(<span class="string">&quot;è®¡ç®—æœºä¸›ä¹¦&quot;</span>);</span><br><span class="line">        book3.setName(<span class="string">&quot;SpringMVCå®æˆ˜æ•™ç¨‹è¿›é˜¶&quot;</span>);</span><br><span class="line">        book3.setDescription(<span class="string">&quot;ä¸€ä»£å®—å¸ˆå‘•å¿ƒåˆ›ä½œ&quot;</span>);</span><br><span class="line">        bookList.add(book3);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> bookList;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="æ­¥éª¤2ï¼šä½¿ç”¨PostManè¿›è¡Œæµ‹è¯•"><a href="#æ­¥éª¤2ï¼šä½¿ç”¨PostManè¿›è¡Œæµ‹è¯•" class="headerlink" title="æ­¥éª¤2ï¼šä½¿ç”¨PostManè¿›è¡Œæµ‹è¯•"></a>æ­¥éª¤2ï¼šä½¿ç”¨PostManè¿›è¡Œæµ‹è¯•</h5><p>æµ‹è¯•æ–°å¢</p><figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span><span class="string">&quot;è®¡ç®—æœºä¸›ä¹¦&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span><span class="string">&quot;SpringMVCç»ˆæå¼€å‘&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span><span class="string">&quot;è¿™æ˜¯ä¸€æœ¬å¥½ä¹¦&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p><img src="/2022/08/03/SpringMVC_day01/1630509266954.png" alt="1630509266954"></p><p>æµ‹è¯•æŸ¥è¯¢</p><p><img src="/2022/08/03/SpringMVC_day01/image-20210805140307371.png"></p><h4 id="4-4-3-é¡µé¢è®¿é—®å¤„ç†"><a href="#4-4-3-é¡µé¢è®¿é—®å¤„ç†" class="headerlink" title="4.4.3 é¡µé¢è®¿é—®å¤„ç†"></a>4.4.3 é¡µé¢è®¿é—®å¤„ç†</h4><h5 id="æ­¥éª¤1ï¼šæ‹·è´é™æ€é¡µé¢"><a href="#æ­¥éª¤1ï¼šæ‹·è´é™æ€é¡µé¢" class="headerlink" title="æ­¥éª¤1ï¼šæ‹·è´é™æ€é¡µé¢"></a>æ­¥éª¤1ï¼šæ‹·è´é™æ€é¡µé¢</h5><p>å°†<code>èµ„æ–™\åŠŸèƒ½é¡µé¢</code>ä¸‹çš„æ‰€æœ‰å†…å®¹æ‹·è´åˆ°é¡¹ç›®çš„<code>webapp</code>ç›®å½•ä¸‹</p><p><img src="/2022/08/03/SpringMVC_day01/1630510166433.png" alt="1630510166433"></p><h5 id="æ­¥éª¤2ï¼šè®¿é—®pagesç›®å½•ä¸‹çš„books-html"><a href="#æ­¥éª¤2ï¼šè®¿é—®pagesç›®å½•ä¸‹çš„books-html" class="headerlink" title="æ­¥éª¤2ï¼šè®¿é—®pagesç›®å½•ä¸‹çš„books.html"></a>æ­¥éª¤2ï¼šè®¿é—®pagesç›®å½•ä¸‹çš„books.html</h5><p>æ‰“å¼€æµè§ˆå™¨è¾“å…¥<code>http://localhost/pages/books.html</code></p><p><img src="/2022/08/03/SpringMVC_day01/1630510225182.png" alt="1630510225182"></p><p>(1)å‡ºç°é”™è¯¯çš„åŸå› ?</p><p><img src="/2022/08/03/SpringMVC_day01/1630510264650.png" alt="1630510264650"></p><p>SpringMVCæ‹¦æˆªäº†é™æ€èµ„æºï¼Œæ ¹æ®&#x2F;pages&#x2F;books.htmlå»controlleræ‰¾å¯¹åº”çš„æ–¹æ³•ï¼Œæ‰¾ä¸åˆ°æ‰€ä»¥ä¼šæŠ¥404çš„é”™è¯¯ã€‚</p><p>(2)SpringMVCä¸ºä»€ä¹ˆä¼šæ‹¦æˆªé™æ€èµ„æºå‘¢?</p><p><img src="/2022/08/03/SpringMVC_day01/1630510397429.png" alt="1630510397429"></p><p>(3)è§£å†³æ–¹æ¡ˆ?</p><ul><li>SpringMVCéœ€è¦å°†é™æ€èµ„æºè¿›è¡Œæ”¾è¡Œã€‚</li></ul><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringMvcSupport</span> <span class="keyword">extends</span> <span class="title class_">WebMvcConfigurationSupport</span> &#123;</span><br><span class="line">    <span class="comment">//è®¾ç½®é™æ€èµ„æºè®¿é—®è¿‡æ»¤ï¼Œå½“å‰ç±»éœ€è¦è®¾ç½®ä¸ºé…ç½®ç±»ï¼Œå¹¶è¢«æ‰«æåŠ è½½</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">addResourceHandlers</span><span class="params">(ResourceHandlerRegistry registry)</span> &#123;</span><br><span class="line">        <span class="comment">//å½“è®¿é—®/pages/????æ—¶å€™ï¼Œä»/pagesç›®å½•ä¸‹æŸ¥æ‰¾å†…å®¹</span></span><br><span class="line">        registry.addResourceHandler(<span class="string">&quot;/pages/**&quot;</span>).addResourceLocations(<span class="string">&quot;/pages/&quot;</span>);</span><br><span class="line">        registry.addResourceHandler(<span class="string">&quot;/js/**&quot;</span>).addResourceLocations(<span class="string">&quot;/js/&quot;</span>);</span><br><span class="line">        registry.addResourceHandler(<span class="string">&quot;/css/**&quot;</span>).addResourceLocations(<span class="string">&quot;/css/&quot;</span>);</span><br><span class="line">        registry.addResourceHandler(<span class="string">&quot;/plugins/**&quot;</span>).addResourceLocations(<span class="string">&quot;/plugins/&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li>è¯¥é…ç½®ç±»æ˜¯åœ¨configç›®å½•ä¸‹ï¼ŒSpringMVCæ‰«æçš„æ˜¯controlleråŒ…ï¼Œæ‰€ä»¥è¯¥é…ç½®ç±»è¿˜æœªç”Ÿæ•ˆï¼Œè¦æƒ³ç”Ÿæ•ˆéœ€è¦å°†SpringMvcConfigé…ç½®ç±»è¿›è¡Œä¿®æ”¹</li></ul><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ComponentScan(&#123;&quot;com.itheima.controller&quot;,&quot;com.itheima.config&quot;&#125;)</span></span><br><span class="line"><span class="meta">@EnableWebMvc</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringMvcConfig</span> &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">æˆ–è€…</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ComponentScan(&quot;com.itheima&quot;)</span></span><br><span class="line"><span class="meta">@EnableWebMvc</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringMvcConfig</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="æ­¥éª¤3-ä¿®æ”¹books-htmlé¡µé¢"><a href="#æ­¥éª¤3-ä¿®æ”¹books-htmlé¡µé¢" class="headerlink" title="æ­¥éª¤3:ä¿®æ”¹books.htmlé¡µé¢"></a>æ­¥éª¤3:ä¿®æ”¹books.htmlé¡µé¢</h5><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- é¡µé¢meta --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>SpringMVCæ¡ˆä¾‹<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- å¼•å…¥æ ·å¼ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;../plugins/elementui/index.css&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;../plugins/font-awesome/css/font-awesome.min.css&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;../css/style.css&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span> <span class="attr">class</span>=<span class="string">&quot;hold-transition&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;content-header&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">h1</span>&gt;</span>å›¾ä¹¦ç®¡ç†<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;app-container&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;filter-container&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">placeholder</span>=<span class="string">&quot;å›¾ä¹¦åç§°&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 200px;&quot;</span> <span class="attr">class</span>=<span class="string">&quot;filter-item&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">class</span>=<span class="string">&quot;dalfBut&quot;</span>&gt;</span>æŸ¥è¯¢<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">class</span>=<span class="string">&quot;butT&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;openSave()&quot;</span>&gt;</span>æ–°å»º<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-table</span> <span class="attr">size</span>=<span class="string">&quot;small&quot;</span> <span class="attr">current-row-key</span>=<span class="string">&quot;id&quot;</span> <span class="attr">:data</span>=<span class="string">&quot;dataList&quot;</span> <span class="attr">stripe</span> <span class="attr">highlight-current-row</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">type</span>=<span class="string">&quot;index&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span> <span class="attr">label</span>=<span class="string">&quot;åºå·&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;type&quot;</span> <span class="attr">label</span>=<span class="string">&quot;å›¾ä¹¦ç±»åˆ«&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;name&quot;</span> <span class="attr">label</span>=<span class="string">&quot;å›¾ä¹¦åç§°&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;description&quot;</span> <span class="attr">label</span>=<span class="string">&quot;æè¿°&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;æ“ä½œ&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">template</span> <span class="attr">slot-scope</span>=<span class="string">&quot;scope&quot;</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span>&gt;</span>ç¼–è¾‘<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span> <span class="attr">type</span>=<span class="string">&quot;danger&quot;</span>&gt;</span>åˆ é™¤<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">el-table</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;pagination-container&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">el-pagination</span></span></span><br><span class="line"><span class="tag">                            <span class="attr">class</span>=<span class="string">&quot;pagiantion&quot;</span></span></span><br><span class="line"><span class="tag">                            @<span class="attr">current-change</span>=<span class="string">&quot;handleCurrentChange&quot;</span></span></span><br><span class="line"><span class="tag">                            <span class="attr">:current-page</span>=<span class="string">&quot;pagination.currentPage&quot;</span></span></span><br><span class="line"><span class="tag">                            <span class="attr">:page-size</span>=<span class="string">&quot;pagination.pageSize&quot;</span></span></span><br><span class="line"><span class="tag">                            <span class="attr">layout</span>=<span class="string">&quot;total, prev, pager, next, jumper&quot;</span></span></span><br><span class="line"><span class="tag">                            <span class="attr">:total</span>=<span class="string">&quot;pagination.total&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">el-pagination</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                    <span class="comment">&lt;!-- æ–°å¢æ ‡ç­¾å¼¹å±‚ --&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;add-form&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">el-dialog</span> <span class="attr">title</span>=<span class="string">&quot;æ–°å¢å›¾ä¹¦&quot;</span> <span class="attr">:visible.sync</span>=<span class="string">&quot;dialogFormVisible&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">el-form</span> <span class="attr">ref</span>=<span class="string">&quot;dataAddForm&quot;</span> <span class="attr">:model</span>=<span class="string">&quot;formData&quot;</span> <span class="attr">:rules</span>=<span class="string">&quot;rules&quot;</span> <span class="attr">label-position</span>=<span class="string">&quot;right&quot;</span> <span class="attr">label-width</span>=<span class="string">&quot;100px&quot;</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">el-row</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">el-col</span> <span class="attr">:span</span>=<span class="string">&quot;12&quot;</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;å›¾ä¹¦ç±»åˆ«&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;type&quot;</span>&gt;</span></span><br><span class="line">                                            <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;formData.type&quot;</span>/&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;/<span class="name">el-col</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">el-col</span> <span class="attr">:span</span>=<span class="string">&quot;12&quot;</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;å›¾ä¹¦åç§°&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;name&quot;</span>&gt;</span></span><br><span class="line">                                            <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;formData.name&quot;</span>/&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;/<span class="name">el-col</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;/<span class="name">el-row</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">el-row</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">el-col</span> <span class="attr">:span</span>=<span class="string">&quot;24&quot;</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;æè¿°&quot;</span>&gt;</span></span><br><span class="line">                                            <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;formData.description&quot;</span> <span class="attr">type</span>=<span class="string">&quot;textarea&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;/<span class="name">el-col</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;/<span class="name">el-row</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">el-form</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">div</span> <span class="attr">slot</span>=<span class="string">&quot;footer&quot;</span> <span class="attr">class</span>=<span class="string">&quot;dialog-footer&quot;</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">el-button</span> @<span class="attr">click</span>=<span class="string">&quot;dialogFormVisible = false&quot;</span>&gt;</span>å–æ¶ˆ<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;saveBook()&quot;</span>&gt;</span>ç¡®å®š<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">el-dialog</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- å¼•å…¥ç»„ä»¶åº“ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../js/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../plugins/elementui/index.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;../js/jquery.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../js/axios-0.18.0.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> vue = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">data</span>:&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="attr">dataList</span>: [],<span class="comment">//å½“å‰é¡µè¦å±•ç¤ºçš„åˆ†é¡µåˆ—è¡¨æ•°æ®</span></span></span><br><span class="line"><span class="language-javascript">                <span class="attr">formData</span>: &#123;&#125;,<span class="comment">//è¡¨å•æ•°æ®</span></span></span><br><span class="line"><span class="language-javascript">                <span class="attr">dialogFormVisible</span>: <span class="literal">false</span>,<span class="comment">//å¢åŠ è¡¨å•æ˜¯å¦å¯è§</span></span></span><br><span class="line"><span class="language-javascript">                <span class="attr">dialogFormVisible4Edit</span>:<span class="literal">false</span>,<span class="comment">//ç¼–è¾‘è¡¨å•æ˜¯å¦å¯è§</span></span></span><br><span class="line"><span class="language-javascript">                <span class="attr">pagination</span>: &#123;&#125;,<span class="comment">//åˆ†é¡µæ¨¡å‹æ•°æ®ï¼Œæš‚æ—¶å¼ƒç”¨</span></span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//é’©å­å‡½æ•°ï¼ŒVUEå¯¹è±¡åˆå§‹åŒ–å®Œæˆåè‡ªåŠ¨æ‰§è¡Œ</span></span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">created</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="title function_">getAll</span>();</span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// é‡ç½®è¡¨å•</span></span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">resetForm</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">//æ¸…ç©ºè¾“å…¥æ¡†</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="property">formData</span> = &#123;&#125;;</span></span><br><span class="line"><span class="language-javascript">                &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// å¼¹å‡ºæ·»åŠ çª—å£</span></span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">openSave</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="property">dialogFormVisible</span> = <span class="literal">true</span>;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="title function_">resetForm</span>();</span></span><br><span class="line"><span class="language-javascript">                &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//æ·»åŠ </span></span></span><br><span class="line"><span class="language-javascript">                saveBook () &#123;</span></span><br><span class="line"><span class="language-javascript">                    axios.<span class="title function_">post</span>(<span class="string">&quot;/books&quot;</span>,<span class="variable language_">this</span>.<span class="property">formData</span>).<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>)=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                    &#125;);</span></span><br><span class="line"><span class="language-javascript">                &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//ä¸»é¡µåˆ—è¡¨æŸ¥è¯¢</span></span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">getAll</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    axios.<span class="title function_">get</span>(<span class="string">&quot;/books&quot;</span>).<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>)=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="property">dataList</span> = res.<span class="property">data</span>;</span></span><br><span class="line"><span class="language-javascript">                    &#125;);</span></span><br><span class="line"><span class="language-javascript">                &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> Javaå¼€å‘æ¡†æ¶ </tag>
            
            <tag> SpringMVC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JDBC</title>
      <link href="/2022/07/31/JDBC/"/>
      <url>/2022/07/31/JDBC/</url>
      
        <content type="html"><![CDATA[<p><strong>ä»Šæ—¥ç›®æ ‡</strong></p><blockquote><ul><li>æŒæ¡JDBCçš„çš„CRUD</li><li>ç†è§£JDBCä¸­å„ä¸ªå¯¹è±¡çš„ä½œç”¨</li><li>æŒæ¡Druidçš„ä½¿ç”¨</li></ul></blockquote><h2 id="1ï¼ŒJDBCæ¦‚è¿°"><a href="#1ï¼ŒJDBCæ¦‚è¿°" class="headerlink" title="1ï¼ŒJDBCæ¦‚è¿°"></a>1ï¼ŒJDBCæ¦‚è¿°</h2><p>åœ¨å¼€å‘ä¸­æˆ‘ä»¬ä½¿ç”¨çš„æ˜¯javaè¯­è¨€ï¼Œé‚£ä¹ˆåŠ¿å¿…è¦é€šè¿‡javaè¯­è¨€æ“ä½œæ•°æ®åº“ä¸­çš„æ•°æ®ã€‚è¿™å°±æ˜¯æ¥ä¸‹æ¥è¦å­¦ä¹ çš„JDBCã€‚</p><h3 id="1-1-JDBCæ¦‚å¿µ"><a href="#1-1-JDBCæ¦‚å¿µ" class="headerlink" title="1.1  JDBCæ¦‚å¿µ"></a>1.1  JDBCæ¦‚å¿µ</h3><blockquote><p>JDBC   å°±æ˜¯ä½¿ç”¨Javaè¯­è¨€æ“ä½œå…³ç³»å‹æ•°æ®åº“çš„ä¸€å¥—API</p><p>å…¨ç§°ï¼š( Java DataBase Connectivity ) Java æ•°æ®åº“è¿æ¥</p></blockquote><img src="/2022/07/31/JDBC/image-20210725130537815.png" alt="image-20210725130537815" style="zoom:80%;"><p>æˆ‘ä»¬å¼€å‘çš„åŒä¸€å¥—Javaä»£ç æ˜¯æ— æ³•æ“ä½œä¸åŒçš„å…³ç³»å‹æ•°æ®åº“ï¼Œå› ä¸ºæ¯ä¸€ä¸ªå…³ç³»å‹æ•°æ®åº“çš„åº•å±‚å®ç°ç»†èŠ‚éƒ½ä¸ä¸€æ ·ã€‚å¦‚æœè¿™æ ·ï¼Œé—®é¢˜å°±å¾ˆå¤§äº†ï¼Œåœ¨å…¬å¸ä¸­å¯ä»¥åœ¨å¼€å‘é˜¶æ®µä½¿ç”¨çš„æ˜¯MySQLæ•°æ®åº“ï¼Œè€Œä¸Šçº¿æ—¶å…¬å¸æœ€ç»ˆé€‰ç”¨oracleæ•°æ®åº“ï¼Œæˆ‘ä»¬å°±éœ€è¦å¯¹ä»£ç è¿›è¡Œå¤§æ‰¹é‡ä¿®æ”¹ï¼Œè¿™æ˜¾ç„¶å¹¶ä¸æ˜¯æˆ‘ä»¬æƒ³çœ‹åˆ°çš„ã€‚æˆ‘ä»¬è¦åšåˆ°çš„æ˜¯åŒä¸€å¥—Javaä»£ç æ“ä½œä¸åŒçš„å…³ç³»å‹æ•°æ®åº“ï¼Œè€Œæ­¤æ—¶sunå…¬å¸å°±æŒ‡å®šäº†ä¸€å¥—æ ‡å‡†æ¥å£ï¼ˆJDBCï¼‰ï¼ŒJDBCä¸­å®šä¹‰äº†æ‰€æœ‰æ“ä½œå…³ç³»å‹æ•°æ®åº“çš„è§„åˆ™ã€‚ä¼—æ‰€å‘¨çŸ¥æ¥å£æ˜¯æ— æ³•ç›´æ¥ä½¿ç”¨çš„ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨æ¥å£çš„å®ç°ç±»ï¼Œè€Œè¿™å¥—å®ç°ç±»ï¼ˆç§°ä¹‹ä¸ºï¼šé©±åŠ¨ï¼‰å°±ç”±å„è‡ªçš„æ•°æ®åº“å‚å•†ç»™å‡ºã€‚</p><h3 id="1-2-JDBCæœ¬è´¨"><a href="#1-2-JDBCæœ¬è´¨" class="headerlink" title="1.2  JDBCæœ¬è´¨"></a>1.2  JDBCæœ¬è´¨</h3><ul><li>å®˜æ–¹ï¼ˆsunå…¬å¸ï¼‰å®šä¹‰çš„ä¸€å¥—æ“ä½œæ‰€æœ‰å…³ç³»å‹æ•°æ®åº“çš„è§„åˆ™ï¼Œå³æ¥å£</li><li>å„ä¸ªæ•°æ®åº“å‚å•†å»å®ç°è¿™å¥—æ¥å£ï¼Œæä¾›æ•°æ®åº“é©±åŠ¨jaråŒ…</li><li>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¿™å¥—æ¥å£ï¼ˆJDBCï¼‰ç¼–ç¨‹ï¼ŒçœŸæ­£æ‰§è¡Œçš„ä»£ç æ˜¯é©±åŠ¨jaråŒ…ä¸­çš„å®ç°ç±»</li></ul><h3 id="1-3-JDBCå¥½å¤„"><a href="#1-3-JDBCå¥½å¤„" class="headerlink" title="1.3  JDBCå¥½å¤„"></a>1.3  JDBCå¥½å¤„</h3><ul><li>å„æ•°æ®åº“å‚å•†ä½¿ç”¨ç›¸åŒçš„æ¥å£ï¼ŒJavaä»£ç ä¸éœ€è¦é’ˆå¯¹ä¸åŒæ•°æ®åº“åˆ†åˆ«å¼€å‘</li><li>å¯éšæ—¶æ›¿æ¢åº•å±‚æ•°æ®åº“ï¼Œè®¿é—®æ•°æ®åº“çš„Javaä»£ç åŸºæœ¬ä¸å˜</li></ul><p>ä»¥åç¼–å†™æ“ä½œæ•°æ®åº“çš„ä»£ç åªéœ€è¦é¢å‘JDBCï¼ˆæ¥å£ï¼‰ï¼Œæ“ä½œå“ªå„¿ä¸ªå…³ç³»å‹æ•°æ®åº“å°±éœ€è¦å¯¼å…¥è¯¥æ•°æ®åº“çš„é©±åŠ¨åŒ…ï¼Œå¦‚éœ€è¦æ“ä½œMySQLæ•°æ®åº“ï¼Œå°±éœ€è¦å†é¡¹ç›®ä¸­å¯¼å…¥MySQLæ•°æ®åº“çš„é©±åŠ¨åŒ…ã€‚å¦‚ä¸‹å›¾å°±æ˜¯MySQLé©±åŠ¨åŒ…</p><img src="/2022/07/31/JDBC/image-20210725133015535.png" alt="image-20210725133015535" style="zoom:90%;"><h2 id="2ï¼ŒJDBCå¿«é€Ÿå…¥é—¨"><a href="#2ï¼ŒJDBCå¿«é€Ÿå…¥é—¨" class="headerlink" title="2ï¼ŒJDBCå¿«é€Ÿå…¥é—¨"></a>2ï¼ŒJDBCå¿«é€Ÿå…¥é—¨</h2><p>å…ˆæ¥çœ‹çœ‹é€šè¿‡Javaæ“ä½œæ•°æ®åº“çš„æµç¨‹</p><img src="/2022/07/31/JDBC/image-20210725163745153.png" alt="image-20210725163745153" style="zoom:80%;"><p>ç¬¬ä¸€æ­¥ï¼šç¼–å†™Javaä»£ç </p><p>ç¬¬äºŒæ­¥ï¼šJavaä»£ç å°†SQLå‘é€åˆ°MySQLæœåŠ¡ç«¯</p><p>ç¬¬ä¸‰æ­¥ï¼šMySQLæœåŠ¡ç«¯æ¥æ”¶åˆ°SQLè¯­å¥å¹¶æ‰§è¡Œè¯¥SQLè¯­å¥</p><p>ç¬¬å››æ­¥ï¼šå°†SQLè¯­å¥æ‰§è¡Œçš„ç»“æœè¿”å›ç»™Javaä»£ç </p><h3 id="2-1-ç¼–å†™ä»£ç æ­¥éª¤"><a href="#2-1-ç¼–å†™ä»£ç æ­¥éª¤" class="headerlink" title="2.1  ç¼–å†™ä»£ç æ­¥éª¤"></a>2.1  ç¼–å†™ä»£ç æ­¥éª¤</h3><ul><li><p>åˆ›å»ºå·¥ç¨‹ï¼Œå¯¼å…¥é©±åŠ¨jaråŒ…</p><img src="/2022/07/31/JDBC/image-20210725133015535.png" alt="image-20210725133015535" style="zoom:90%;"></li><li><p>æ³¨å†Œé©±åŠ¨</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">Class.forName(&quot;com.mysql.jdbc.Driver&quot;);</span><br></pre></td></tr></table></figure></li><li><p>è·å–è¿æ¥</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">Connection conn <span class="operator">=</span> DriverManager.getConnection(url, username, password);</span><br></pre></td></tr></table></figure><p>Javaä»£ç éœ€è¦å‘é€SQLç»™MySQLæœåŠ¡ç«¯ï¼Œå°±éœ€è¦å…ˆå»ºç«‹è¿æ¥</p></li><li><p>å®šä¹‰SQLè¯­å¥</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">String <span class="keyword">sql</span> <span class="operator">=</span>  â€œ<span class="keyword">update</span>â€¦â€ ;</span><br></pre></td></tr></table></figure></li><li><p>è·å–æ‰§è¡ŒSQLå¯¹è±¡</p><p>æ‰§è¡ŒSQLè¯­å¥éœ€è¦SQLæ‰§è¡Œå¯¹è±¡ï¼Œè€Œè¿™ä¸ªæ‰§è¡Œå¯¹è±¡å°±æ˜¯Statementå¯¹è±¡</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">Statement stmt <span class="operator">=</span> conn.createStatement();</span><br></pre></td></tr></table></figure></li><li><p>æ‰§è¡ŒSQL</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">stmt.executeUpdate(<span class="keyword">sql</span>);  </span><br></pre></td></tr></table></figure></li><li><p>å¤„ç†è¿”å›ç»“æœ</p></li><li><p>é‡Šæ”¾èµ„æº</p></li></ul><h3 id="2-2-å…·ä½“æ“ä½œ"><a href="#2-2-å…·ä½“æ“ä½œ" class="headerlink" title="2.2  å…·ä½“æ“ä½œ"></a>2.2  å…·ä½“æ“ä½œ</h3><ul><li>åˆ›å»ºæ–°çš„ç©ºçš„é¡¹ç›®</li></ul><img src="/2022/07/31/JDBC/image-20210725165156501.png" alt="image-20210725165156501" style="zoom:70%;"><ul><li>å®šä¹‰é¡¹ç›®çš„åç§°ï¼Œå¹¶æŒ‡å®šä½ç½®</li></ul><img src="/2022/07/31/JDBC/image-20210725165220829.png" alt="image-20210725165220829" style="zoom:70%;"><ul><li>å¯¹é¡¹ç›®è¿›è¡Œè®¾ç½®ï¼ŒJDKç‰ˆæœ¬ã€ç¼–è¯‘ç‰ˆæœ¬</li></ul><img src="/2022/07/31/JDBC/image-20210725165349564.png" alt="image-20210725165349564" style="zoom:70%;"><ul><li>åˆ›å»ºæ¨¡å—ï¼ŒæŒ‡å®šæ¨¡å—çš„åç§°åŠä½ç½®</li></ul><img src="/2022/07/31/JDBC/image-20210725165536898.png" alt="image-20210725165536898" style="zoom:70%;"><ul><li><p>å¯¼å…¥é©±åŠ¨åŒ…</p><p>å°†mysqlçš„é©±åŠ¨åŒ…æ”¾åœ¨æ¨¡å—ä¸‹çš„libç›®å½•ï¼ˆéšæ„å‘½åï¼‰ä¸‹ï¼Œå¹¶å°†è¯¥jaråŒ…æ·»åŠ ä¸ºåº“æ–‡ä»¶</p></li></ul><img src="/2022/07/31/JDBC/image-20210725165657556.png" alt="image-20210725165657556" style="zoom:80%;"><ul><li>åœ¨æ·»åŠ ä¸ºåº“æ–‡ä»¶çš„æ—¶å€™ï¼Œæœ‰å¦‚ä¸‹ä¸‰ä¸ªé€‰é¡¹<ul><li>Global Library  ï¼š å…¨å±€æœ‰æ•ˆ</li><li>Project Library :   é¡¹ç›®æœ‰æ•ˆ</li><li>Module Library ï¼š æ¨¡å—æœ‰æ•ˆ</li></ul></li></ul><img src="/2022/07/31/JDBC/image-20210725165751273.png" alt="image-20210725165751273" style="zoom:80%;"><ul><li>åœ¨srcä¸‹åˆ›å»ºç±»</li></ul><img src="/2022/07/31/JDBC/image-20210725170004319.png" alt="image-20210725170004319" style="zoom:70%;"><ul><li>ç¼–å†™ä»£ç å¦‚ä¸‹</li></ul><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * JDBCå¿«é€Ÿå…¥é—¨</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JDBCDemo</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="comment">//1. æ³¨å†Œé©±åŠ¨</span></span><br><span class="line">        <span class="comment">//Class.forName(&quot;com.mysql.jdbc.Driver&quot;);</span></span><br><span class="line">        <span class="comment">//2. è·å–è¿æ¥</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> <span class="string">&quot;jdbc:mysql://127.0.0.1:3306/db1&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> <span class="string">&quot;root&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> <span class="string">&quot;1234&quot;</span>;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> DriverManager.getConnection(url, username, password);</span><br><span class="line">        <span class="comment">//3. å®šä¹‰sql</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;update account set money = 2000 where id = 1&quot;</span>;</span><br><span class="line">        <span class="comment">//4. è·å–æ‰§è¡Œsqlçš„å¯¹è±¡ Statement</span></span><br><span class="line">        <span class="type">Statement</span> <span class="variable">stmt</span> <span class="operator">=</span> conn.createStatement();</span><br><span class="line">        <span class="comment">//5. æ‰§è¡Œsql</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> stmt.executeUpdate(sql);<span class="comment">//å—å½±å“çš„è¡Œæ•°</span></span><br><span class="line">        <span class="comment">//6. å¤„ç†ç»“æœ</span></span><br><span class="line">        System.out.println(count);</span><br><span class="line">        <span class="comment">//7. é‡Šæ”¾èµ„æº</span></span><br><span class="line">        stmt.close();</span><br><span class="line">        conn.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="3ï¼ŒJDBC-APIè¯¦è§£"><a href="#3ï¼ŒJDBC-APIè¯¦è§£" class="headerlink" title="3ï¼ŒJDBC APIè¯¦è§£"></a>3ï¼ŒJDBC APIè¯¦è§£</h2><h3 id="3-1-DriverManager"><a href="#3-1-DriverManager" class="headerlink" title="3.1  DriverManager"></a>3.1  DriverManager</h3><p>DriverManagerï¼ˆé©±åŠ¨ç®¡ç†ç±»ï¼‰ä½œç”¨ï¼š</p><ul><li><p>æ³¨å†Œé©±åŠ¨</p><p><img src="/2022/07/31/JDBC/image-20210725171339346.png" alt="image-20210725171339346"></p><p>registerDriveræ–¹æ³•æ˜¯ç”¨äºæ³¨å†Œé©±åŠ¨çš„ï¼Œä½†æ˜¯æˆ‘ä»¬ä¹‹å‰åšçš„å…¥é—¨æ¡ˆä¾‹å¹¶ä¸æ˜¯è¿™æ ·å†™çš„ã€‚è€Œæ˜¯å¦‚ä¸‹å®ç°</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">Class.forName(&quot;com.mysql.jdbc.Driver&quot;);</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬æŸ¥è¯¢MySQLæä¾›çš„Driverç±»ï¼Œçœ‹å®ƒæ˜¯å¦‚ä½•å®ç°çš„ï¼Œæºç å¦‚ä¸‹ï¼š</p><img src="/2022/07/31/JDBC/image-20210725171635432.png" alt="image-20210725171635432" style="zoom:70%;"><p>åœ¨è¯¥ç±»ä¸­çš„é™æ€ä»£ç å—ä¸­å·²ç»æ‰§è¡Œäº† <code>DriverManager</code> å¯¹è±¡çš„ <code>registerDriver()</code> æ–¹æ³•è¿›è¡Œé©±åŠ¨çš„æ³¨å†Œäº†ï¼Œé‚£ä¹ˆæˆ‘ä»¬åªéœ€è¦åŠ è½½ <code>Driver</code> ç±»ï¼Œè¯¥é™æ€ä»£ç å—å°±ä¼šæ‰§è¡Œã€‚è€Œ <code>Class.forName(&quot;com.mysql.jdbc.Driver&quot;);</code> å°±å¯ä»¥åŠ è½½ <code>Driver</code> ç±»ã€‚</p><blockquote><p>&#x3D;&#x3D;æç¤ºï¼š&#x3D;&#x3D;</p><ul><li>MySQL 5ä¹‹åçš„é©±åŠ¨åŒ…ï¼Œå¯ä»¥çœç•¥æ³¨å†Œé©±åŠ¨çš„æ­¥éª¤</li><li>è‡ªåŠ¨åŠ è½½jaråŒ…ä¸­META-INF&#x2F;services&#x2F;java.sql.Driveræ–‡ä»¶ä¸­çš„é©±åŠ¨ç±»</li></ul></blockquote></li><li><p>è·å–æ•°æ®åº“è¿æ¥</p><p><img src="/2022/07/31/JDBC/image-20210725171355278.png" alt="image-20210725171355278"></p><p>å‚æ•°è¯´æ˜ï¼š</p><ul><li><p>url ï¼š è¿æ¥è·¯å¾„</p><blockquote><p>è¯­æ³•ï¼šjdbc:mysql:&#x2F;&#x2F;ipåœ°å€(åŸŸå):ç«¯å£å·&#x2F;æ•°æ®åº“åç§°?å‚æ•°é”®å€¼å¯¹1&amp;å‚æ•°é”®å€¼å¯¹2â€¦</p><p>ç¤ºä¾‹ï¼šjdbc:mysql:&#x2F;&#x2F;127.0.0.1:3306&#x2F;db1</p><p>&#x3D;&#x3D;ç»†èŠ‚ï¼š&#x3D;&#x3D;</p><ul><li><p>å¦‚æœè¿æ¥çš„æ˜¯æœ¬æœºmysqlæœåŠ¡å™¨ï¼Œå¹¶ä¸”mysqlæœåŠ¡é»˜è®¤ç«¯å£æ˜¯3306ï¼Œåˆ™urlå¯ä»¥ç®€å†™ä¸ºï¼šjdbc:mysql:&#x2F;&#x2F;&#x2F;æ•°æ®åº“åç§°?å‚æ•°é”®å€¼å¯¹</p></li><li><p>é…ç½® useSSL&#x3D;false å‚æ•°ï¼Œç¦ç”¨å®‰å…¨è¿æ¥æ–¹å¼ï¼Œè§£å†³è­¦å‘Šæç¤º</p></li></ul></blockquote></li><li><p>user ï¼šç”¨æˆ·å</p></li><li><p>poassword ï¼šå¯†ç </p></li></ul></li></ul><h3 id="3-2-Connection"><a href="#3-2-Connection" class="headerlink" title="3.2  Connection"></a>3.2  Connection</h3><p>Connectionï¼ˆæ•°æ®åº“è¿æ¥å¯¹è±¡ï¼‰ä½œç”¨ï¼š</p><ul><li>è·å–æ‰§è¡Œ SQL çš„å¯¹è±¡</li><li>ç®¡ç†äº‹åŠ¡</li></ul><h4 id="3-2-1-è·å–æ‰§è¡Œå¯¹è±¡"><a href="#3-2-1-è·å–æ‰§è¡Œå¯¹è±¡" class="headerlink" title="3.2.1  è·å–æ‰§è¡Œå¯¹è±¡"></a>3.2.1  è·å–æ‰§è¡Œå¯¹è±¡</h4><ul><li><p>æ™®é€šæ‰§è¡ŒSQLå¯¹è±¡</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">Statement createStatement()</span><br></pre></td></tr></table></figure><p>å…¥é—¨æ¡ˆä¾‹ä¸­å°±æ˜¯é€šè¿‡è¯¥æ–¹æ³•è·å–çš„æ‰§è¡Œå¯¹è±¡ã€‚</p></li><li><p>é¢„ç¼–è¯‘SQLçš„æ‰§è¡ŒSQLå¯¹è±¡ï¼šé˜²æ­¢SQLæ³¨å…¥</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">PreparedStatement  prepareStatement(<span class="keyword">sql</span>)</span><br></pre></td></tr></table></figure><p>é€šè¿‡è¿™ç§æ–¹å¼è·å–çš„ <code>PreparedStatement</code> SQLè¯­å¥æ‰§è¡Œå¯¹è±¡æ˜¯æˆ‘ä»¬ä¸€ä¼šé‡ç‚¹è¦è¿›è¡Œè®²è§£çš„ï¼Œå®ƒå¯ä»¥é˜²æ­¢SQLæ³¨å…¥ã€‚</p></li><li><p>æ‰§è¡Œå­˜å‚¨è¿‡ç¨‹çš„å¯¹è±¡</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">CallableStatement prepareCall(<span class="keyword">sql</span>)</span><br></pre></td></tr></table></figure><p>é€šè¿‡è¿™ç§æ–¹å¼è·å–çš„ <code>CallableStatement</code> æ‰§è¡Œå¯¹è±¡æ˜¯ç”¨æ¥æ‰§è¡Œå­˜å‚¨è¿‡ç¨‹çš„ï¼Œè€Œå­˜å‚¨è¿‡ç¨‹åœ¨MySQLä¸­ä¸å¸¸ç”¨ï¼Œæ‰€ä»¥è¿™ä¸ªæˆ‘ä»¬å°†ä¸è¿›è¡Œè®²è§£ã€‚</p></li></ul><h4 id="3-2-2-äº‹åŠ¡ç®¡ç†"><a href="#3-2-2-äº‹åŠ¡ç®¡ç†" class="headerlink" title="3.2.2  äº‹åŠ¡ç®¡ç†"></a>3.2.2  äº‹åŠ¡ç®¡ç†</h4><p>å…ˆå›é¡¾ä¸€ä¸‹MySQLäº‹åŠ¡ç®¡ç†çš„æ“ä½œï¼š</p><ul><li>å¼€å¯äº‹åŠ¡ ï¼š BEGIN æˆ–è€… START TRANSACTION;</li><li>æäº¤äº‹åŠ¡ ï¼š COMMIT;</li><li>å›æ»šäº‹åŠ¡ ï¼š ROLLBACK;</li></ul><blockquote><p>MySQLé»˜è®¤æ˜¯è‡ªåŠ¨æäº¤äº‹åŠ¡</p></blockquote><p>æ¥ä¸‹æ¥å­¦ä¹ JDBCäº‹åŠ¡ç®¡ç†çš„æ–¹æ³•ã€‚</p><p>Connectionå‡ å£ä¸­å®šä¹‰äº†3ä¸ªå¯¹åº”çš„æ–¹æ³•ï¼š</p><ul><li><p>å¼€å¯äº‹åŠ¡</p><p><img src="/2022/07/31/JDBC/image-20210725173444628.png" alt="image-20210725173444628"></p><p>å‚ä¸autoCommit è¡¨ç¤ºæ˜¯å¦è‡ªåŠ¨æäº¤äº‹åŠ¡ï¼Œtrueè¡¨ç¤ºè‡ªåŠ¨æäº¤äº‹åŠ¡ï¼Œfalseè¡¨ç¤ºæ‰‹åŠ¨æäº¤äº‹åŠ¡ã€‚è€Œå¼€å¯äº‹åŠ¡éœ€è¦å°†è¯¥å‚æ•°è®¾ä¸ºä¸ºfalseã€‚</p></li><li><p>æäº¤äº‹åŠ¡</p><p><img src="/2022/07/31/JDBC/image-20210725173618636.png" alt="image-20210725173618636"></p></li><li><p>å›æ»šäº‹åŠ¡</p><p><img src="/2022/07/31/JDBC/image-20210725173648674.png" alt="image-20210725173648674"></p></li></ul><p>å…·ä½“ä»£ç å®ç°å¦‚ä¸‹ï¼š</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * JDBC API è¯¦è§£ï¼šConnection</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">public class JDBCDemo3_Connection &#123;</span><br><span class="line"></span><br><span class="line">    public <span class="keyword">static</span> void main(String[] args) throws Exception &#123;</span><br><span class="line">        <span class="operator">/</span><span class="operator">/</span><span class="number">1.</span> æ³¨å†Œé©±åŠ¨</span><br><span class="line">        <span class="operator">/</span><span class="operator">/</span>Class.forName(&quot;com.mysql.jdbc.Driver&quot;);</span><br><span class="line">        <span class="operator">/</span><span class="operator">/</span><span class="number">2.</span> è·å–è¿æ¥ï¼šå¦‚æœè¿æ¥çš„æ˜¯æœ¬æœºmysqlå¹¶ä¸”ç«¯å£æ˜¯é»˜è®¤çš„ <span class="number">3306</span> å¯ä»¥ç®€åŒ–ä¹¦å†™</span><br><span class="line">        String url <span class="operator">=</span> &quot;jdbc:mysql:///db1?useSSL=false&quot;;</span><br><span class="line">        String username <span class="operator">=</span> &quot;root&quot;;</span><br><span class="line">        String password <span class="operator">=</span> &quot;1234&quot;;</span><br><span class="line">        Connection conn <span class="operator">=</span> DriverManager.getConnection(url, username, password);</span><br><span class="line">        <span class="operator">/</span><span class="operator">/</span><span class="number">3.</span> å®šä¹‰<span class="keyword">sql</span></span><br><span class="line">        String sql1 <span class="operator">=</span> &quot;update account set money = 3000 where id = 1&quot;;</span><br><span class="line">        String sql2 <span class="operator">=</span> &quot;update account set money = 3000 where id = 2&quot;;</span><br><span class="line">        <span class="operator">/</span><span class="operator">/</span><span class="number">4.</span> è·å–æ‰§è¡Œ<span class="keyword">sql</span>çš„å¯¹è±¡ Statement</span><br><span class="line">        Statement stmt <span class="operator">=</span> conn.createStatement();</span><br><span class="line"></span><br><span class="line">        try &#123;</span><br><span class="line">            <span class="operator">/</span><span class="operator">/</span> <span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span>å¼€å¯äº‹åŠ¡<span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span></span><br><span class="line">            conn.setAutoCommit(<span class="literal">false</span>);</span><br><span class="line">            <span class="operator">/</span><span class="operator">/</span><span class="number">5.</span> æ‰§è¡Œ<span class="keyword">sql</span></span><br><span class="line">            <span class="type">int</span> count1 <span class="operator">=</span> stmt.executeUpdate(sql1);<span class="operator">/</span><span class="operator">/</span>å—å½±å“çš„è¡Œæ•°</span><br><span class="line">            <span class="operator">/</span><span class="operator">/</span><span class="number">6.</span> å¤„ç†ç»“æœ</span><br><span class="line">            System.out.println(count1);</span><br><span class="line">            <span class="type">int</span> i <span class="operator">=</span> <span class="number">3</span><span class="operator">/</span><span class="number">0</span>;</span><br><span class="line">            <span class="operator">/</span><span class="operator">/</span><span class="number">5.</span> æ‰§è¡Œ<span class="keyword">sql</span></span><br><span class="line">            <span class="type">int</span> count2 <span class="operator">=</span> stmt.executeUpdate(sql2);<span class="operator">/</span><span class="operator">/</span>å—å½±å“çš„è¡Œæ•°</span><br><span class="line">            <span class="operator">/</span><span class="operator">/</span><span class="number">6.</span> å¤„ç†ç»“æœ</span><br><span class="line">            System.out.println(count2);</span><br><span class="line"></span><br><span class="line">            <span class="operator">/</span><span class="operator">/</span> <span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span>æäº¤äº‹åŠ¡<span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span></span><br><span class="line">            <span class="operator">/</span><span class="operator">/</span>ç¨‹åºè¿è¡Œåˆ°æ­¤å¤„ï¼Œè¯´æ˜æ²¡æœ‰å‡ºç°ä»»ä½•é—®é¢˜ï¼Œåˆ™éœ€æ±‚æäº¤äº‹åŠ¡</span><br><span class="line">            conn.commit();</span><br><span class="line">        &#125; catch (Exception e) &#123;</span><br><span class="line">            <span class="operator">/</span><span class="operator">/</span> <span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span>å›æ»šäº‹åŠ¡<span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span></span><br><span class="line">            <span class="operator">/</span><span class="operator">/</span>ç¨‹åºåœ¨å‡ºç°å¼‚å¸¸æ—¶ä¼šæ‰§è¡Œåˆ°è¿™ä¸ªåœ°æ–¹ï¼Œæ­¤æ—¶å°±éœ€è¦å›æ»šäº‹åŠ¡</span><br><span class="line">            conn.rollback();</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="operator">/</span><span class="operator">/</span><span class="number">7.</span> é‡Šæ”¾èµ„æº</span><br><span class="line">        stmt.close();</span><br><span class="line">        conn.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-3-Statement"><a href="#3-3-Statement" class="headerlink" title="3.3  Statement"></a>3.3  Statement</h3><h4 id="3-3-1-æ¦‚è¿°"><a href="#3-3-1-æ¦‚è¿°" class="headerlink" title="3.3.1  æ¦‚è¿°"></a>3.3.1  æ¦‚è¿°</h4><p>Statementå¯¹è±¡çš„ä½œç”¨å°±æ˜¯ç”¨æ¥æ‰§è¡ŒSQLè¯­å¥ã€‚è€Œé’ˆå¯¹ä¸åŒç±»å‹çš„SQLè¯­å¥ä½¿ç”¨çš„æ–¹æ³•ä¹Ÿä¸ä¸€æ ·ã€‚</p><ul><li><p>æ‰§è¡ŒDDLã€DMLè¯­å¥</p><p><img src="/2022/07/31/JDBC/image-20210725175151272.png" alt="image-20210725175151272"></p></li><li><p>æ‰§è¡ŒDQLè¯­å¥</p><img src="/2022/07/31/JDBC/image-20210725175131533.png" alt="image-20210725175131533" style="zoom:80%;"><p>è¯¥æ–¹æ³•æ¶‰åŠåˆ°äº† <code>ResultSet</code> å¯¹è±¡ï¼Œè€Œè¿™ä¸ªå¯¹è±¡æˆ‘ä»¬è¿˜æ²¡æœ‰å­¦ä¹ ï¼Œä¸€ä¼šå†é‡ç‚¹è®²è§£ã€‚</p></li></ul><h4 id="3-3-2-ä»£ç å®ç°"><a href="#3-3-2-ä»£ç å®ç°" class="headerlink" title="3.3.2  ä»£ç å®ç°"></a>3.3.2  ä»£ç å®ç°</h4><ul><li><p>æ‰§è¡ŒDMLè¯­å¥</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * æ‰§è¡ŒDMLè¯­å¥</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testDML</span><span class="params">()</span> <span class="keyword">throws</span>  Exception &#123;</span><br><span class="line">    <span class="comment">//1. æ³¨å†Œé©±åŠ¨</span></span><br><span class="line">    <span class="comment">//Class.forName(&quot;com.mysql.jdbc.Driver&quot;);</span></span><br><span class="line">    <span class="comment">//2. è·å–è¿æ¥ï¼šå¦‚æœè¿æ¥çš„æ˜¯æœ¬æœºmysqlå¹¶ä¸”ç«¯å£æ˜¯é»˜è®¤çš„ 3306 å¯ä»¥ç®€åŒ–ä¹¦å†™</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> <span class="string">&quot;jdbc:mysql:///db1?useSSL=false&quot;</span>;</span><br><span class="line">    <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> <span class="string">&quot;root&quot;</span>;</span><br><span class="line">    <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> <span class="string">&quot;1234&quot;</span>;</span><br><span class="line">    <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> DriverManager.getConnection(url, username, password);</span><br><span class="line">    <span class="comment">//3. å®šä¹‰sql</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;update account set money = 3000 where id = 1&quot;</span>;</span><br><span class="line">    <span class="comment">//4. è·å–æ‰§è¡Œsqlçš„å¯¹è±¡ Statement</span></span><br><span class="line">    <span class="type">Statement</span> <span class="variable">stmt</span> <span class="operator">=</span> conn.createStatement();</span><br><span class="line">    <span class="comment">//5. æ‰§è¡Œsql</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> stmt.executeUpdate(sql);<span class="comment">//æ‰§è¡Œå®ŒDMLè¯­å¥ï¼Œå—å½±å“çš„è¡Œæ•°</span></span><br><span class="line">    <span class="comment">//6. å¤„ç†ç»“æœ</span></span><br><span class="line">    <span class="comment">//System.out.println(count);</span></span><br><span class="line">    <span class="keyword">if</span>(count &gt; <span class="number">0</span>)&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ä¿®æ”¹æˆåŠŸ~&quot;</span>);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ä¿®æ”¹å¤±è´¥~&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//7. é‡Šæ”¾èµ„æº</span></span><br><span class="line">    stmt.close();</span><br><span class="line">    conn.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>æ‰§è¡ŒDDLè¯­å¥</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * æ‰§è¡ŒDDLè¯­å¥</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testDDL</span><span class="params">()</span> <span class="keyword">throws</span>  Exception &#123;</span><br><span class="line">    <span class="comment">//1. æ³¨å†Œé©±åŠ¨</span></span><br><span class="line">    <span class="comment">//Class.forName(&quot;com.mysql.jdbc.Driver&quot;);</span></span><br><span class="line">    <span class="comment">//2. è·å–è¿æ¥ï¼šå¦‚æœè¿æ¥çš„æ˜¯æœ¬æœºmysqlå¹¶ä¸”ç«¯å£æ˜¯é»˜è®¤çš„ 3306 å¯ä»¥ç®€åŒ–ä¹¦å†™</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> <span class="string">&quot;jdbc:mysql:///db1?useSSL=false&quot;</span>;</span><br><span class="line">    <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> <span class="string">&quot;root&quot;</span>;</span><br><span class="line">    <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> <span class="string">&quot;1234&quot;</span>;</span><br><span class="line">    <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> DriverManager.getConnection(url, username, password);</span><br><span class="line">    <span class="comment">//3. å®šä¹‰sql</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;drop database db2&quot;</span>;</span><br><span class="line">    <span class="comment">//4. è·å–æ‰§è¡Œsqlçš„å¯¹è±¡ Statement</span></span><br><span class="line">    <span class="type">Statement</span> <span class="variable">stmt</span> <span class="operator">=</span> conn.createStatement();</span><br><span class="line">    <span class="comment">//5. æ‰§è¡Œsql</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> stmt.executeUpdate(sql);<span class="comment">//æ‰§è¡Œå®ŒDDLè¯­å¥ï¼Œå¯èƒ½æ˜¯0</span></span><br><span class="line">    <span class="comment">//6. å¤„ç†ç»“æœ</span></span><br><span class="line">    System.out.println(count);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//7. é‡Šæ”¾èµ„æº</span></span><br><span class="line">    stmt.close();</span><br><span class="line">    conn.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼š</p><ul><li>ä»¥åå¼€å‘å¾ˆå°‘ä½¿ç”¨javaä»£ç æ“ä½œDDLè¯­å¥</li></ul></blockquote></li></ul><h3 id="3-4-ResultSet"><a href="#3-4-ResultSet" class="headerlink" title="3.4  ResultSet"></a>3.4  ResultSet</h3><h4 id="3-4-1-æ¦‚è¿°"><a href="#3-4-1-æ¦‚è¿°" class="headerlink" title="3.4.1  æ¦‚è¿°"></a>3.4.1  æ¦‚è¿°</h4><p>ResultSetï¼ˆç»“æœé›†å¯¹è±¡ï¼‰ä½œç”¨ï¼š</p><ul><li>å°è£…äº†SQLæŸ¥è¯¢è¯­å¥çš„ç»“æœã€‚</li></ul><p>è€Œæ‰§è¡Œäº†DQLè¯­å¥åå°±ä¼šè¿”å›è¯¥å¯¹è±¡ï¼Œå¯¹åº”æ‰§è¡ŒDQLè¯­å¥çš„æ–¹æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">ResultSet  executeQuery(<span class="keyword">sql</span>)ï¼šæ‰§è¡ŒDQL è¯­å¥ï¼Œè¿”å› ResultSet å¯¹è±¡</span><br></pre></td></tr></table></figure><p>é‚£ä¹ˆæˆ‘ä»¬å°±éœ€è¦ä» <code>ResultSet</code> å¯¹è±¡ä¸­è·å–æˆ‘ä»¬æƒ³è¦çš„æ•°æ®ã€‚<code>ResultSet</code> å¯¹è±¡æä¾›äº†æ“ä½œæŸ¥è¯¢ç»“æœæ•°æ®çš„æ–¹æ³•ï¼Œå¦‚ä¸‹ï¼š</p><blockquote><p>boolean  next()</p><ul><li>å°†å…‰æ ‡ä»å½“å‰ä½ç½®å‘å‰ç§»åŠ¨ä¸€è¡Œ </li><li>åˆ¤æ–­å½“å‰è¡Œæ˜¯å¦ä¸ºæœ‰æ•ˆè¡Œ</li></ul><p>æ–¹æ³•è¿”å›å€¼è¯´æ˜ï¼š</p><ul><li>true  ï¼š æœ‰æ•ˆèˆªï¼Œå½“å‰è¡Œæœ‰æ•°æ®</li><li>false ï¼š æ— æ•ˆè¡Œï¼Œå½“å‰è¡Œæ²¡æœ‰æ•°æ®</li></ul></blockquote><blockquote><p>xxx  getXxx(å‚æ•°)ï¼šè·å–æ•°æ®</p><ul><li>xxx : æ•°æ®ç±»å‹ï¼›å¦‚ï¼š int getInt(å‚æ•°) ï¼›String getString(å‚æ•°)</li><li>å‚æ•°<ul><li>intç±»å‹çš„å‚æ•°ï¼šåˆ—çš„ç¼–å·ï¼Œä»1å¼€å§‹</li><li>Stringç±»å‹çš„å‚æ•°ï¼š åˆ—çš„åç§°</li></ul></li></ul></blockquote><p>å¦‚ä¸‹å›¾ä¸ºæ‰§è¡ŒSQLè¯­å¥åçš„ç»“æœ</p><img src="/2022/07/31/JDBC/image-20210725181320813.png" alt="image-20210725181320813" style="zoom:80%;"><p>ä¸€å¼€å§‹å…‰æ ‡æŒ‡å®šäºç¬¬ä¸€è¡Œå‰ï¼Œå¦‚å›¾æ‰€ç¤ºçº¢è‰²ç®­å¤´æŒ‡å‘äºè¡¨å¤´è¡Œã€‚å½“æˆ‘ä»¬è°ƒç”¨äº† <code>next()</code> æ–¹æ³•åï¼Œå…‰æ ‡å°±ä¸‹ç§»åˆ°ç¬¬ä¸€è¡Œæ•°æ®ï¼Œå¹¶ä¸”æ–¹æ³•è¿”å›trueï¼Œæ­¤æ—¶å°±å¯ä»¥é€šè¿‡ <code>getInt(&quot;id&quot;)</code> è·å–å½“å‰è¡Œidå­—æ®µçš„å€¼ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ <code>getString(&quot;name&quot;)</code> è·å–å½“å‰è¡Œnameå­—æ®µçš„å€¼ã€‚å¦‚æœæƒ³è·å–ä¸‹ä¸€è¡Œçš„æ•°æ®ï¼Œç»§ç»­è°ƒç”¨ <code>next()</code>  æ–¹æ³•ï¼Œä»¥æ­¤ç±»æ¨ã€‚</p><h4 id="3-4-2-ä»£ç å®ç°"><a href="#3-4-2-ä»£ç å®ç°" class="headerlink" title="3.4.2  ä»£ç å®ç°"></a>3.4.2  ä»£ç å®ç°</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * æ‰§è¡ŒDQL</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testResultSet</span><span class="params">()</span> <span class="keyword">throws</span>  Exception &#123;</span><br><span class="line">    <span class="comment">//1. æ³¨å†Œé©±åŠ¨</span></span><br><span class="line">    <span class="comment">//Class.forName(&quot;com.mysql.jdbc.Driver&quot;);</span></span><br><span class="line">    <span class="comment">//2. è·å–è¿æ¥ï¼šå¦‚æœè¿æ¥çš„æ˜¯æœ¬æœºmysqlå¹¶ä¸”ç«¯å£æ˜¯é»˜è®¤çš„ 3306 å¯ä»¥ç®€åŒ–ä¹¦å†™</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> <span class="string">&quot;jdbc:mysql:///db1?useSSL=false&quot;</span>;</span><br><span class="line">    <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> <span class="string">&quot;root&quot;</span>;</span><br><span class="line">    <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> <span class="string">&quot;1234&quot;</span>;</span><br><span class="line">    <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> DriverManager.getConnection(url, username, password);</span><br><span class="line">    <span class="comment">//3. å®šä¹‰sql</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select * from account&quot;</span>;</span><br><span class="line">    <span class="comment">//4. è·å–statementå¯¹è±¡</span></span><br><span class="line">    <span class="type">Statement</span> <span class="variable">stmt</span> <span class="operator">=</span> conn.createStatement();</span><br><span class="line">    <span class="comment">//5. æ‰§è¡Œsql</span></span><br><span class="line">    <span class="type">ResultSet</span> <span class="variable">rs</span> <span class="operator">=</span> stmt.executeQuery(sql);</span><br><span class="line">    <span class="comment">//6. å¤„ç†ç»“æœï¼Œ éå†rsä¸­çš„æ‰€æœ‰æ•°æ®</span></span><br><span class="line">    <span class="comment">/* // 6.1 å…‰æ ‡å‘ä¸‹ç§»åŠ¨ä¸€è¡Œï¼Œå¹¶ä¸”åˆ¤æ–­å½“å‰è¡Œæ˜¯å¦æœ‰æ•°æ®</span></span><br><span class="line"><span class="comment">        while (rs.next())&#123;</span></span><br><span class="line"><span class="comment">            //6.2 è·å–æ•°æ®  getXxx()</span></span><br><span class="line"><span class="comment">            int id = rs.getInt(1);</span></span><br><span class="line"><span class="comment">            String name = rs.getString(2);</span></span><br><span class="line"><span class="comment">            double money = rs.getDouble(3);</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">            System.out.println(id);</span></span><br><span class="line"><span class="comment">            System.out.println(name);</span></span><br><span class="line"><span class="comment">            System.out.println(money);</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">            System.out.println(&quot;--------------&quot;);</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        &#125;*/</span></span><br><span class="line">    <span class="comment">// 6.1 å…‰æ ‡å‘ä¸‹ç§»åŠ¨ä¸€è¡Œï¼Œå¹¶ä¸”åˆ¤æ–­å½“å‰è¡Œæ˜¯å¦æœ‰æ•°æ®</span></span><br><span class="line">    <span class="keyword">while</span> (rs.next())&#123;</span><br><span class="line">        <span class="comment">//6.2 è·å–æ•°æ®  getXxx()</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">id</span> <span class="operator">=</span> rs.getInt(<span class="string">&quot;id&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> rs.getString(<span class="string">&quot;name&quot;</span>);</span><br><span class="line">        <span class="type">double</span> <span class="variable">money</span> <span class="operator">=</span> rs.getDouble(<span class="string">&quot;money&quot;</span>);</span><br><span class="line"></span><br><span class="line">        System.out.println(id);</span><br><span class="line">        System.out.println(name);</span><br><span class="line">        System.out.println(money);</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;--------------&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//7. é‡Šæ”¾èµ„æº</span></span><br><span class="line">    rs.close();</span><br><span class="line">    stmt.close();</span><br><span class="line">    conn.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-5-æ¡ˆä¾‹"><a href="#3-5-æ¡ˆä¾‹" class="headerlink" title="3.5  æ¡ˆä¾‹"></a>3.5  æ¡ˆä¾‹</h3><ul><li><p>éœ€æ±‚ï¼šæŸ¥è¯¢accountè´¦æˆ·è¡¨æ•°æ®ï¼Œå°è£…ä¸ºAccountå¯¹è±¡ä¸­ï¼Œå¹¶ä¸”å­˜å‚¨åˆ°ArrayListé›†åˆä¸­</p><img src="/2022/07/31/JDBC/image-20210725182352433.png" alt="image-20210725182352433" style="zoom:80%;"></li><li><p>ä»£ç å®ç°</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * æŸ¥è¯¢accountè´¦æˆ·è¡¨æ•°æ®ï¼Œå°è£…ä¸ºAccountå¯¹è±¡ä¸­ï¼Œå¹¶ä¸”å­˜å‚¨åˆ°ArrayListé›†åˆä¸­</span></span><br><span class="line"><span class="comment">  * 1. å®šä¹‰å®ä½“ç±»Account</span></span><br><span class="line"><span class="comment">  * 2. æŸ¥è¯¢æ•°æ®ï¼Œå°è£…åˆ°Accountå¯¹è±¡ä¸­</span></span><br><span class="line"><span class="comment">  * 3. å°†Accountå¯¹è±¡å­˜å…¥ArrayListé›†åˆä¸­</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testResultSet2</span><span class="params">()</span> <span class="keyword">throws</span>  Exception &#123;</span><br><span class="line">    <span class="comment">//1. æ³¨å†Œé©±åŠ¨</span></span><br><span class="line">    <span class="comment">//Class.forName(&quot;com.mysql.jdbc.Driver&quot;);</span></span><br><span class="line">    <span class="comment">//2. è·å–è¿æ¥ï¼šå¦‚æœè¿æ¥çš„æ˜¯æœ¬æœºmysqlå¹¶ä¸”ç«¯å£æ˜¯é»˜è®¤çš„ 3306 å¯ä»¥ç®€åŒ–ä¹¦å†™</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> <span class="string">&quot;jdbc:mysql:///db1?useSSL=false&quot;</span>;</span><br><span class="line">    <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> <span class="string">&quot;root&quot;</span>;</span><br><span class="line">    <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> <span class="string">&quot;1234&quot;</span>;</span><br><span class="line">    <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> DriverManager.getConnection(url, username, password);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//3. å®šä¹‰sql</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select * from account&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//4. è·å–statementå¯¹è±¡</span></span><br><span class="line">    <span class="type">Statement</span> <span class="variable">stmt</span> <span class="operator">=</span> conn.createStatement();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//5. æ‰§è¡Œsql</span></span><br><span class="line">    <span class="type">ResultSet</span> <span class="variable">rs</span> <span class="operator">=</span> stmt.executeQuery(sql);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ›å»ºé›†åˆ</span></span><br><span class="line">    List&lt;Account&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">   </span><br><span class="line">    <span class="comment">// 6.1 å…‰æ ‡å‘ä¸‹ç§»åŠ¨ä¸€è¡Œï¼Œå¹¶ä¸”åˆ¤æ–­å½“å‰è¡Œæ˜¯å¦æœ‰æ•°æ®</span></span><br><span class="line">    <span class="keyword">while</span> (rs.next())&#123;</span><br><span class="line">        <span class="type">Account</span> <span class="variable">account</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Account</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//6.2 è·å–æ•°æ®  getXxx()</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">id</span> <span class="operator">=</span> rs.getInt(<span class="string">&quot;id&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> rs.getString(<span class="string">&quot;name&quot;</span>);</span><br><span class="line">        <span class="type">double</span> <span class="variable">money</span> <span class="operator">=</span> rs.getDouble(<span class="string">&quot;money&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//èµ‹å€¼</span></span><br><span class="line">        account.setId(id);</span><br><span class="line">        account.setName(name);</span><br><span class="line">        account.setMoney(money);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å­˜å…¥é›†åˆ</span></span><br><span class="line">        list.add(account);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    System.out.println(list);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//7. é‡Šæ”¾èµ„æº</span></span><br><span class="line">    rs.close();</span><br><span class="line">    stmt.close();</span><br><span class="line">    conn.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h3 id="3-6-PreparedStatement"><a href="#3-6-PreparedStatement" class="headerlink" title="3.6  PreparedStatement"></a>3.6  PreparedStatement</h3><blockquote><p>PreparedStatementä½œç”¨ï¼š</p><ul><li>é¢„ç¼–è¯‘SQLè¯­å¥å¹¶æ‰§è¡Œï¼šé¢„é˜²SQLæ³¨å…¥é—®é¢˜</li></ul></blockquote><p>å¯¹ä¸Šé¢çš„ä½œç”¨ä¸­SQLæ³¨å…¥é—®é¢˜å¤§å®¶è‚¯å®šä¸ç†è§£ã€‚é‚£æˆ‘ä»¬å…ˆå¯¹SQLæ³¨å…¥è¿›è¡Œè¯´æ˜.</p><h4 id="3-6-1-SQLæ³¨å…¥"><a href="#3-6-1-SQLæ³¨å…¥" class="headerlink" title="3.6.1  SQLæ³¨å…¥"></a>3.6.1  SQLæ³¨å…¥</h4><blockquote><p>SQLæ³¨å…¥æ˜¯é€šè¿‡æ“ä½œè¾“å…¥æ¥ä¿®æ”¹äº‹å…ˆå®šä¹‰å¥½çš„SQLè¯­å¥ï¼Œç”¨ä»¥è¾¾åˆ°æ‰§è¡Œä»£ç å¯¹æœåŠ¡å™¨è¿›è¡Œæ”»å‡»çš„æ–¹æ³•ã€‚</p></blockquote><p>åœ¨ä»Šå¤©èµ„æ–™ä¸‹çš„ <code>day03-JDBC\èµ„æ–™\2. sqlæ³¨å…¥æ¼”ç¤º</code> ä¸­ä¿®æ”¹ <code>application.properties</code> æ–‡ä»¶ä¸­çš„ç”¨æˆ·åå’Œå¯†ç ï¼Œæ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">spring.datasource.driver-class-name</span>=<span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line"><span class="attr">spring.datasource.url</span>=<span class="string">jdbc:mysql://localhost:3306/test?useSSL=false&amp;useUnicode=true&amp;characterEncoding=UTF-8</span></span><br><span class="line"><span class="attr">spring.datasource.username</span>=<span class="string">root</span></span><br><span class="line"><span class="attr">spring.datasource.password</span>=<span class="string">1234</span></span><br></pre></td></tr></table></figure><p>åœ¨MySQLä¸­åˆ›å»ºåä¸º <code>test</code> çš„æ•°æ®åº“</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> database test;</span><br></pre></td></tr></table></figure><p>åœ¨å‘½ä»¤æç¤ºç¬¦ä¸­è¿è¡Œä»Šå¤©èµ„æ–™ä¸‹çš„ <code>day03-JDBC\èµ„æ–™\2. sqlæ³¨å…¥æ¼”ç¤º\sql.jar</code> è¿™ä¸ªjaråŒ…ã€‚</p><img src="/2022/07/31/JDBC/image-20210725184701026.png" alt="image-20210725184701026" style="zoom:80%;"> <p>æ­¤æ—¶æˆ‘ä»¬å°±èƒ½åœ¨æ•°æ®åº“ä¸­çœ‹åˆ°userè¡¨</p><img src="/2022/07/31/JDBC/image-20210725184817731.png" alt="image-20210725184817731" style="zoom:80%;"><p>æ¥ä¸‹æ¥åœ¨æµè§ˆå™¨çš„åœ°å€æ è¾“å…¥ <code>localhost:8080/login.html</code> å°±èƒ½çœ‹åˆ°å¦‚ä¸‹é¡µé¢</p><img src="/2022/07/31/JDBC/image-20210725185024731.png" alt="image-20210725185024731" style="zoom:80%;"><p>æˆ‘ä»¬å°±å¯ä»¥åœ¨å¦‚ä¸Šå›¾ä¸­è¾“å…¥ç”¨æˆ·åå’Œå¯†ç è¿›è¡Œç™»é™†ã€‚ç”¨æˆ·åå’Œå¯†ç è¾“å…¥æ­£ç¡®å°±ç™»é™†æˆåŠŸï¼Œè·³è½¬åˆ°é¦–é¡µã€‚ç”¨æˆ·åå’Œå¯†ç è¾“å…¥é”™è¯¯åˆ™ç»™å‡ºé”™è¯¯æç¤ºï¼Œå¦‚ä¸‹å›¾</p><img src="/2022/07/31/JDBC/image-20210725185320875.png" alt="image-20210725185320875" style="zoom:80%;"><p>ä½†æ˜¯æˆ‘å¯ä»¥é€šè¿‡è¾“å…¥ä¸€äº›ç‰¹æ®Šçš„å­—ç¬¦ç™»é™†åˆ°é¦–é¡µã€‚</p><p>ç”¨æˆ·åéšæ„å†™ï¼Œå¯†ç å†™æˆ <code>&#39; or &#39;1&#39; =&#39;1</code></p><img src="/2022/07/31/JDBC/image-20210725185603112.png" alt="image-20210725185603112" style="zoom:80%;"><p>è¿™å°±æ˜¯SQLæ³¨å…¥æ¼æ´ï¼Œä¹Ÿæ˜¯å¾ˆå±é™©çš„ã€‚å½“ç„¶ç°åœ¨å¸‚é¢ä¸Šçš„ç³»ç»Ÿéƒ½ä¸ä¼šå­˜åœ¨è¿™ç§é—®é¢˜äº†ï¼Œæ‰€ä»¥å¤§å®¶ä¹Ÿä¸è¦å°è¯•ç”¨è¿™ç§æ–¹å¼å»è¯•å…¶ä»–çš„ç³»ç»Ÿã€‚</p><p>é‚£ä¹ˆè¯¥å¦‚ä½•è§£å†³å‘¢ï¼Ÿè¿™é‡Œå°±å¯ä»¥å°†SQLæ‰§è¡Œå¯¹è±¡ <code>Statement</code> æ¢æˆ <code>PreparedStatement</code> å¯¹è±¡ã€‚</p><h4 id="3-6-2-ä»£ç æ¨¡æ‹ŸSQLæ³¨å…¥é—®é¢˜"><a href="#3-6-2-ä»£ç æ¨¡æ‹ŸSQLæ³¨å…¥é—®é¢˜" class="headerlink" title="3.6.2  ä»£ç æ¨¡æ‹ŸSQLæ³¨å…¥é—®é¢˜"></a>3.6.2  ä»£ç æ¨¡æ‹ŸSQLæ³¨å…¥é—®é¢˜</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testLogin</span><span class="params">()</span> <span class="keyword">throws</span>  Exception &#123;</span><br><span class="line">    <span class="comment">//2. è·å–è¿æ¥ï¼šå¦‚æœè¿æ¥çš„æ˜¯æœ¬æœºmysqlå¹¶ä¸”ç«¯å£æ˜¯é»˜è®¤çš„ 3306 å¯ä»¥ç®€åŒ–ä¹¦å†™</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> <span class="string">&quot;jdbc:mysql:///db1?useSSL=false&quot;</span>;</span><br><span class="line">    <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> <span class="string">&quot;root&quot;</span>;</span><br><span class="line">    <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> <span class="string">&quot;1234&quot;</span>;</span><br><span class="line">    <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> DriverManager.getConnection(url, username, password);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ¥æ”¶ç”¨æˆ·è¾“å…¥ ç”¨æˆ·åå’Œå¯†ç </span></span><br><span class="line">    <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> <span class="string">&quot;sjdljfld&quot;</span>;</span><br><span class="line">    <span class="type">String</span> <span class="variable">pwd</span> <span class="operator">=</span> <span class="string">&quot;&#x27; or &#x27;1&#x27; = &#x27;1&quot;</span>;</span><br><span class="line">    <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select * from tb_user where username = &#x27;&quot;</span>+name+<span class="string">&quot;&#x27; and password = &#x27;&quot;</span>+pwd+<span class="string">&quot;&#x27;&quot;</span>;</span><br><span class="line">    <span class="comment">// è·å–stmtå¯¹è±¡</span></span><br><span class="line">    <span class="type">Statement</span> <span class="variable">stmt</span> <span class="operator">=</span> conn.createStatement();</span><br><span class="line">    <span class="comment">// æ‰§è¡Œsql</span></span><br><span class="line">    <span class="type">ResultSet</span> <span class="variable">rs</span> <span class="operator">=</span> stmt.executeQuery(sql);</span><br><span class="line">    <span class="comment">// åˆ¤æ–­ç™»å½•æ˜¯å¦æˆåŠŸ</span></span><br><span class="line">    <span class="keyword">if</span>(rs.next())&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ç™»å½•æˆåŠŸ~&quot;</span>);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ç™»å½•å¤±è´¥~&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//7. é‡Šæ”¾èµ„æº</span></span><br><span class="line">    rs.close();</span><br><span class="line">    stmt.close();</span><br><span class="line">    conn.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç æ˜¯å°†ç”¨æˆ·åå’Œå¯†ç æ‹¼æ¥åˆ°sqlè¯­å¥ä¸­ï¼Œæ‹¼æ¥åçš„sqlè¯­å¥å¦‚ä¸‹</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> tb_user <span class="keyword">where</span> username <span class="operator">=</span> <span class="string">&#x27;sjdljfld&#x27;</span> <span class="keyword">and</span> password <span class="operator">=</span> <span class="string">&#x27;&#x27;</span><span class="keyword">or</span> <span class="string">&#x27;1&#x27;</span> <span class="operator">=</span> <span class="string">&#x27;1&#x27;</span></span><br></pre></td></tr></table></figure><p>ä»ä¸Šé¢è¯­å¥å¯ä»¥çœ‹å‡ºæ¡ä»¶ <code>username = &#39;sjdljfld&#39; and password = &#39;&#39;</code> ä¸ç®¡æ˜¯å¦æ»¡è¶³ï¼Œè€Œ <code>or</code> åé¢çš„ <code>&#39;1&#39; = &#39;1&#39;</code> æ˜¯å§‹ç»ˆæ»¡è¶³çš„ï¼Œæœ€ç»ˆæ¡ä»¶æ˜¯æˆç«‹çš„ï¼Œå°±å¯ä»¥æ­£å¸¸çš„è¿›è¡Œç™»é™†äº†ã€‚</p><p>æ¥ä¸‹æ¥æˆ‘ä»¬æ¥å­¦ä¹ PreparedStatementå¯¹è±¡.</p><h4 id="3-6-3-PreparedStatementæ¦‚è¿°"><a href="#3-6-3-PreparedStatementæ¦‚è¿°" class="headerlink" title="3.6.3  PreparedStatementæ¦‚è¿°"></a>3.6.3  PreparedStatementæ¦‚è¿°</h4><blockquote><p>PreparedStatementä½œç”¨ï¼š</p><ul><li>é¢„ç¼–è¯‘SQLè¯­å¥å¹¶æ‰§è¡Œï¼šé¢„é˜²SQLæ³¨å…¥é—®é¢˜</li></ul></blockquote><ul><li><p>è·å– PreparedStatement å¯¹è±¡</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// SQLè¯­å¥ä¸­çš„å‚æ•°å€¼ï¼Œä½¿ç”¨ï¼Ÿå ä½ç¬¦æ›¿ä»£</span></span><br><span class="line"><span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select * from user where username = ? and password = ?&quot;</span>;</span><br><span class="line"><span class="comment">// é€šè¿‡Connectionå¯¹è±¡è·å–ï¼Œå¹¶ä¼ å…¥å¯¹åº”çš„sqlè¯­å¥</span></span><br><span class="line"><span class="type">PreparedStatement</span> <span class="variable">pstmt</span> <span class="operator">=</span> conn.prepareStatement(sql);</span><br></pre></td></tr></table></figure></li><li><p>è®¾ç½®å‚æ•°å€¼</p><p>ä¸Šé¢çš„sqlè¯­å¥ä¸­å‚æ•°ä½¿ç”¨ ? è¿›è¡Œå ä½ï¼Œåœ¨ä¹‹å‰ä¹‹å‰è‚¯å®šè¦è®¾ç½®è¿™äº› ?  çš„å€¼ã€‚</p><blockquote><p>PreparedStatementå¯¹è±¡ï¼šsetXxx(å‚æ•°1ï¼Œå‚æ•°2)ï¼šç»™ ? èµ‹å€¼</p><ul><li><p>Xxxï¼šæ•°æ®ç±»å‹ ï¼› å¦‚ setInt (å‚æ•°1ï¼Œå‚æ•°2)</p></li><li><p>å‚æ•°ï¼š</p><ul><li><p>å‚æ•°1ï¼š ï¼Ÿçš„ä½ç½®ç¼–å·ï¼Œä»1 å¼€å§‹</p></li><li><p>å‚æ•°2ï¼š ï¼Ÿçš„å€¼</p></li></ul></li></ul></blockquote></li><li><p>æ‰§è¡ŒSQLè¯­å¥</p><blockquote><p>executeUpdate();  æ‰§è¡ŒDDLè¯­å¥å’ŒDMLè¯­å¥</p><p>executeQuery();  æ‰§è¡ŒDQLè¯­å¥</p><p>&#x3D;&#x3D;æ³¨æ„ï¼š&#x3D;&#x3D;</p><ul><li>è°ƒç”¨è¿™ä¸¤ä¸ªæ–¹æ³•æ—¶ä¸éœ€è¦ä¼ é€’SQLè¯­å¥ï¼Œå› ä¸ºè·å–SQLè¯­å¥æ‰§è¡Œå¯¹è±¡æ—¶å·²ç»å¯¹SQLè¯­å¥è¿›è¡Œé¢„ç¼–è¯‘äº†ã€‚</li></ul></blockquote></li></ul><h4 id="3-6-4-ä½¿ç”¨PreparedStatementæ”¹è¿›"><a href="#3-6-4-ä½¿ç”¨PreparedStatementæ”¹è¿›" class="headerlink" title="3.6.4  ä½¿ç”¨PreparedStatementæ”¹è¿›"></a>3.6.4  ä½¿ç”¨PreparedStatementæ”¹è¿›</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"> <span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testPreparedStatement</span><span class="params">()</span> <span class="keyword">throws</span>  Exception &#123;</span><br><span class="line">    <span class="comment">//2. è·å–è¿æ¥ï¼šå¦‚æœè¿æ¥çš„æ˜¯æœ¬æœºmysqlå¹¶ä¸”ç«¯å£æ˜¯é»˜è®¤çš„ 3306 å¯ä»¥ç®€åŒ–ä¹¦å†™</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> <span class="string">&quot;jdbc:mysql:///db1?useSSL=false&quot;</span>;</span><br><span class="line">    <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> <span class="string">&quot;root&quot;</span>;</span><br><span class="line">    <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> <span class="string">&quot;1234&quot;</span>;</span><br><span class="line">    <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> DriverManager.getConnection(url, username, password);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ¥æ”¶ç”¨æˆ·è¾“å…¥ ç”¨æˆ·åå’Œå¯†ç </span></span><br><span class="line">    <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> <span class="string">&quot;zhangsan&quot;</span>;</span><br><span class="line">    <span class="type">String</span> <span class="variable">pwd</span> <span class="operator">=</span> <span class="string">&quot;&#x27; or &#x27;1&#x27; = &#x27;1&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å®šä¹‰sql</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select * from tb_user where username = ? and password = ?&quot;</span>;</span><br><span class="line">    <span class="comment">// è·å–pstmtå¯¹è±¡</span></span><br><span class="line">    <span class="type">PreparedStatement</span> <span class="variable">pstmt</span> <span class="operator">=</span> conn.prepareStatement(sql);</span><br><span class="line">    <span class="comment">// è®¾ç½®ï¼Ÿçš„å€¼</span></span><br><span class="line">    pstmt.setString(<span class="number">1</span>,name);</span><br><span class="line">    pstmt.setString(<span class="number">2</span>,pwd);</span><br><span class="line">    <span class="comment">// æ‰§è¡Œsql</span></span><br><span class="line">    <span class="type">ResultSet</span> <span class="variable">rs</span> <span class="operator">=</span> pstmt.executeQuery();</span><br><span class="line">    <span class="comment">// åˆ¤æ–­ç™»å½•æ˜¯å¦æˆåŠŸ</span></span><br><span class="line">    <span class="keyword">if</span>(rs.next())&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ç™»å½•æˆåŠŸ~&quot;</span>);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ç™»å½•å¤±è´¥~&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//7. é‡Šæ”¾èµ„æº</span></span><br><span class="line">    rs.close();</span><br><span class="line">    pstmt.close();</span><br><span class="line">    conn.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œä¸Šé¢è¯­å¥å°±å¯ä»¥å‘ç°ä¸ä¼šå‡ºç°SQLæ³¨å…¥æ¼æ´é—®é¢˜äº†ã€‚é‚£ä¹ˆPreparedStatementåˆæ˜¯å¦‚ä½•è§£å†³çš„å‘¢ï¼Ÿå®ƒæ˜¯å°†ç‰¹æ®Šå­—ç¬¦è¿›è¡Œäº†è½¬ä¹‰ï¼Œè½¬ä¹‰çš„SQLå¦‚ä¸‹ï¼š</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> tb_user <span class="keyword">where</span> username <span class="operator">=</span> <span class="string">&#x27;sjdljfld&#x27;</span> <span class="keyword">and</span> password <span class="operator">=</span> <span class="string">&#x27;\&#x27;</span><span class="keyword">or</span> \<span class="string">&#x27;1\&#x27;</span> <span class="operator">=</span> \<span class="string">&#x27;1&#x27;</span></span><br></pre></td></tr></table></figure><h4 id="3-6-5-PreparedStatementåŸç†"><a href="#3-6-5-PreparedStatementåŸç†" class="headerlink" title="3.6.5  PreparedStatementåŸç†"></a>3.6.5  PreparedStatementåŸç†</h4><blockquote><p>PreparedStatement å¥½å¤„ï¼š</p><ul><li>é¢„ç¼–è¯‘SQLï¼Œæ€§èƒ½æ›´é«˜</li><li>é˜²æ­¢SQLæ³¨å…¥ï¼šå°†æ•æ„Ÿå­—ç¬¦è¿›è¡Œè½¬ä¹‰</li></ul></blockquote><img src="/2022/07/31/JDBC/image-20210725195756848.png" alt="image-20210725195756848" style="zoom:80%;"><p>Javaä»£ç æ“ä½œæ•°æ®åº“æµç¨‹å¦‚å›¾æ‰€ç¤ºï¼š</p><ul><li><p>å°†sqlè¯­å¥å‘é€åˆ°MySQLæœåŠ¡å™¨ç«¯</p></li><li><p>MySQLæœåŠ¡ç«¯ä¼šå¯¹sqlè¯­å¥è¿›è¡Œå¦‚ä¸‹æ“ä½œ</p><ul><li><p>æ£€æŸ¥SQLè¯­å¥</p><p>æ£€æŸ¥SQLè¯­å¥çš„è¯­æ³•æ˜¯å¦æ­£ç¡®ã€‚</p></li><li><p>ç¼–è¯‘SQLè¯­å¥ã€‚å°†SQLè¯­å¥ç¼–è¯‘æˆå¯æ‰§è¡Œçš„å‡½æ•°ã€‚</p><p>æ£€æŸ¥SQLå’Œç¼–è¯‘SQLèŠ±è´¹çš„æ—¶é—´æ¯”æ‰§è¡ŒSQLçš„æ—¶é—´è¿˜è¦é•¿ã€‚å¦‚æœæˆ‘ä»¬åªæ˜¯é‡æ–°è®¾ç½®å‚æ•°ï¼Œé‚£ä¹ˆæ£€æŸ¥SQLè¯­å¥å’Œç¼–è¯‘SQLè¯­å¥å°†ä¸éœ€è¦é‡å¤æ‰§è¡Œã€‚è¿™æ ·å°±æé«˜äº†æ€§èƒ½ã€‚</p></li><li><p>æ‰§è¡ŒSQLè¯­å¥</p></li></ul></li></ul><p>æ¥ä¸‹æ¥æˆ‘ä»¬é€šè¿‡æŸ¥è¯¢æ—¥å¿—æ¥çœ‹ä¸€ä¸‹åŸç†ã€‚</p><ul><li><p>å¼€å¯é¢„ç¼–è¯‘åŠŸèƒ½</p><p>åœ¨ä»£ç ä¸­ç¼–å†™urlæ—¶éœ€è¦åŠ ä¸Šä»¥ä¸‹å‚æ•°ã€‚è€Œæˆ‘ä»¬ä¹‹å‰æ ¹æœ¬å°±æ²¡æœ‰å¼€å¯é¢„ç¼–è¯‘åŠŸèƒ½ï¼Œåªæ˜¯è§£å†³äº†SQLæ³¨å…¥æ¼æ´ã€‚</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">useServerPrepStmts<span class="operator">=</span><span class="literal">true</span></span><br></pre></td></tr></table></figure></li><li><p>é…ç½®MySQLæ‰§è¡Œæ—¥å¿—ï¼ˆé‡å¯mysqlæœåŠ¡åç”Ÿæ•ˆï¼‰</p><p>åœ¨mysqlé…ç½®æ–‡ä»¶ï¼ˆmy.iniï¼‰ä¸­æ·»åŠ å¦‚ä¸‹é…ç½®</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">log-output=FILE</span><br><span class="line">general-log=1</span><br><span class="line">general_log_file=&quot;D:\mysql.log&quot;</span><br><span class="line">slow-query-log=1</span><br><span class="line">slow_query_log_file=&quot;D:\mysql_slow.log&quot;</span><br><span class="line">long_query_time=2</span><br></pre></td></tr></table></figure></li><li><p>javaæµ‹è¯•ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"> <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * PreparedStatementåŸç†</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testPreparedStatement2</span><span class="params">()</span> <span class="keyword">throws</span>  Exception &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//2. è·å–è¿æ¥ï¼šå¦‚æœè¿æ¥çš„æ˜¯æœ¬æœºmysqlå¹¶ä¸”ç«¯å£æ˜¯é»˜è®¤çš„ 3306 å¯ä»¥ç®€åŒ–ä¹¦å†™</span></span><br><span class="line">    <span class="comment">// useServerPrepStmts=true å‚æ•°å¼€å¯é¢„ç¼–è¯‘åŠŸèƒ½</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> <span class="string">&quot;jdbc:mysql:///db1?useSSL=false&amp;useServerPrepStmts=true&quot;</span>;</span><br><span class="line">    <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> <span class="string">&quot;root&quot;</span>;</span><br><span class="line">    <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> <span class="string">&quot;1234&quot;</span>;</span><br><span class="line">    <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> DriverManager.getConnection(url, username, password);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ¥æ”¶ç”¨æˆ·è¾“å…¥ ç”¨æˆ·åå’Œå¯†ç </span></span><br><span class="line">    <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> <span class="string">&quot;zhangsan&quot;</span>;</span><br><span class="line">    <span class="type">String</span> <span class="variable">pwd</span> <span class="operator">=</span> <span class="string">&quot;&#x27; or &#x27;1&#x27; = &#x27;1&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å®šä¹‰sql</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select * from tb_user where username = ? and password = ?&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è·å–pstmtå¯¹è±¡</span></span><br><span class="line">    <span class="type">PreparedStatement</span> <span class="variable">pstmt</span> <span class="operator">=</span> conn.prepareStatement(sql);</span><br><span class="line"></span><br><span class="line">    Thread.sleep(<span class="number">10000</span>);</span><br><span class="line">    <span class="comment">// è®¾ç½®ï¼Ÿçš„å€¼</span></span><br><span class="line">    pstmt.setString(<span class="number">1</span>,name);</span><br><span class="line">    pstmt.setString(<span class="number">2</span>,pwd);</span><br><span class="line">    <span class="type">ResultSet</span> <span class="variable">rs</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="comment">// æ‰§è¡Œsql</span></span><br><span class="line">    rs = pstmt.executeQuery();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è®¾ç½®ï¼Ÿçš„å€¼</span></span><br><span class="line">    pstmt.setString(<span class="number">1</span>,<span class="string">&quot;aaa&quot;</span>);</span><br><span class="line">    pstmt.setString(<span class="number">2</span>,<span class="string">&quot;bbb&quot;</span>);</span><br><span class="line">    <span class="comment">// æ‰§è¡Œsql</span></span><br><span class="line">    rs = pstmt.executeQuery();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ¤æ–­ç™»å½•æ˜¯å¦æˆåŠŸ</span></span><br><span class="line">    <span class="keyword">if</span>(rs.next())&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ç™»å½•æˆåŠŸ~&quot;</span>);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ç™»å½•å¤±è´¥~&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//7. é‡Šæ”¾èµ„æº</span></span><br><span class="line">    rs.close();</span><br><span class="line">    pstmt.close();</span><br><span class="line">    conn.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>æ‰§è¡ŒSQLè¯­å¥ï¼ŒæŸ¥çœ‹ <code>D:\mysql.log</code> æ—¥å¿—å¦‚ä¸‹:</p><p><img src="/2022/07/31/JDBC/image-20210725202829738.png" alt="image-20210725202829738"></p><p>ä¸Šå›¾ä¸­ç¬¬ä¸‰è¡Œä¸­çš„ <code>Prepare</code> æ˜¯å¯¹SQLè¯­å¥è¿›è¡Œé¢„ç¼–è¯‘ã€‚ç¬¬å››è¡Œå’Œç¬¬äº”è¡Œæ˜¯æ‰§è¡Œäº†ä¸¤æ¬¡SQLè¯­å¥ï¼Œè€Œç¬¬äºŒæ¬¡æ‰§è¡Œå‰å¹¶æ²¡æœ‰å¯¹SQLè¿›è¡Œé¢„ç¼–è¯‘ã€‚</p></li></ul><blockquote><p><strong>å°ç»“</strong>ï¼š</p><ul><li>åœ¨è·å–PreparedStatementå¯¹è±¡æ—¶ï¼Œå°†sqlè¯­å¥å‘é€ç»™mysqlæœåŠ¡å™¨è¿›è¡Œæ£€æŸ¥ï¼Œç¼–è¯‘ï¼ˆè¿™äº›æ­¥éª¤å¾ˆè€—æ—¶ï¼‰</li><li>æ‰§è¡Œæ—¶å°±ä¸ç”¨å†è¿›è¡Œè¿™äº›æ­¥éª¤äº†ï¼Œé€Ÿåº¦æ›´å¿«</li><li>å¦‚æœsqlæ¨¡æ¿ä¸€æ ·ï¼Œåˆ™åªéœ€è¦è¿›è¡Œä¸€æ¬¡æ£€æŸ¥ã€ç¼–è¯‘</li></ul></blockquote><h2 id="4ï¼Œæ•°æ®åº“è¿æ¥æ± "><a href="#4ï¼Œæ•°æ®åº“è¿æ¥æ± " class="headerlink" title="4ï¼Œæ•°æ®åº“è¿æ¥æ± "></a>4ï¼Œæ•°æ®åº“è¿æ¥æ± </h2><h3 id="4-1-æ•°æ®åº“è¿æ¥æ± ç®€ä»‹"><a href="#4-1-æ•°æ®åº“è¿æ¥æ± ç®€ä»‹" class="headerlink" title="4.1  æ•°æ®åº“è¿æ¥æ± ç®€ä»‹"></a>4.1  æ•°æ®åº“è¿æ¥æ± ç®€ä»‹</h3><blockquote><ul><li><p>æ•°æ®åº“è¿æ¥æ± æ˜¯ä¸ªå®¹å™¨ï¼Œè´Ÿè´£åˆ†é…ã€ç®¡ç†æ•°æ®åº“è¿æ¥(Connection)</p></li><li><p>å®ƒå…è®¸åº”ç”¨ç¨‹åºé‡å¤ä½¿ç”¨ä¸€ä¸ªç°æœ‰çš„æ•°æ®åº“è¿æ¥ï¼Œè€Œä¸æ˜¯å†é‡æ–°å»ºç«‹ä¸€ä¸ªï¼›</p></li><li><p>é‡Šæ”¾ç©ºé—²æ—¶é—´è¶…è¿‡æœ€å¤§ç©ºé—²æ—¶é—´çš„æ•°æ®åº“è¿æ¥æ¥é¿å…å› ä¸ºæ²¡æœ‰é‡Šæ”¾æ•°æ®åº“è¿æ¥è€Œå¼•èµ·çš„æ•°æ®åº“è¿æ¥é—æ¼</p></li><li><p>å¥½å¤„</p><ul><li>èµ„æºé‡ç”¨</li><li>æå‡ç³»ç»Ÿå“åº”é€Ÿåº¦</li><li>é¿å…æ•°æ®åº“è¿æ¥é—æ¼</li></ul></li></ul></blockquote><p>ä¹‹å‰æˆ‘ä»¬ä»£ç ä¸­ä½¿ç”¨è¿æ¥æ˜¯æ²¡æœ‰ä½¿ç”¨éƒ½åˆ›å»ºä¸€ä¸ªConnectionå¯¹è±¡ï¼Œä½¿ç”¨å®Œæ¯•å°±ä¼šå°†å…¶é”€æ¯ã€‚è¿™æ ·é‡å¤åˆ›å»ºé”€æ¯çš„è¿‡ç¨‹æ˜¯ç‰¹åˆ«è€—è´¹è®¡ç®—æœºçš„æ€§èƒ½çš„åŠæ¶ˆè€—æ—¶é—´çš„ã€‚</p><p>è€Œæ•°æ®åº“ä½¿ç”¨äº†æ•°æ®åº“è¿æ¥æ± åï¼Œå°±èƒ½è¾¾åˆ°Connectionå¯¹è±¡çš„å¤ç”¨ï¼Œå¦‚ä¸‹å›¾</p><img src="/2022/07/31/JDBC/image-20210725210432985.png" alt="image-20210725210432985" style="zoom:80%;"><p>è¿æ¥æ± æ˜¯åœ¨ä¸€å¼€å§‹å°±åˆ›å»ºå¥½äº†ä¸€äº›è¿æ¥ï¼ˆConnectionï¼‰å¯¹è±¡å­˜å‚¨èµ·æ¥ã€‚ç”¨æˆ·éœ€è¦è¿æ¥æ•°æ®åº“æ—¶ï¼Œä¸éœ€è¦è‡ªå·±åˆ›å»ºè¿æ¥ï¼Œè€Œåªéœ€è¦ä»è¿æ¥æ± ä¸­è·å–ä¸€ä¸ªè¿æ¥è¿›è¡Œä½¿ç”¨ï¼Œä½¿ç”¨å®Œæ¯•åå†å°†è¿æ¥å¯¹è±¡å½’è¿˜ç»™è¿æ¥æ± ï¼›è¿™æ ·å°±å¯ä»¥èµ·åˆ°èµ„æºé‡ç”¨ï¼Œä¹ŸèŠ‚çœäº†é¢‘ç¹åˆ›å»ºè¿æ¥é”€æ¯è¿æ¥æ‰€èŠ±è´¹çš„æ—¶é—´ï¼Œä»è€Œæå‡äº†ç³»ç»Ÿå“åº”çš„é€Ÿåº¦ã€‚</p><h3 id="4-2-æ•°æ®åº“è¿æ¥æ± å®ç°"><a href="#4-2-æ•°æ®åº“è¿æ¥æ± å®ç°" class="headerlink" title="4.2  æ•°æ®åº“è¿æ¥æ± å®ç°"></a>4.2  æ•°æ®åº“è¿æ¥æ± å®ç°</h3><ul><li><p>æ ‡å‡†æ¥å£ï¼š<strong>DataSource</strong></p><p>å®˜æ–¹(SUN) æä¾›çš„æ•°æ®åº“è¿æ¥æ± æ ‡å‡†æ¥å£ï¼Œç”±ç¬¬ä¸‰æ–¹ç»„ç»‡å®ç°æ­¤æ¥å£ã€‚è¯¥æ¥å£æä¾›äº†è·å–è¿æ¥çš„åŠŸèƒ½ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Connection <span class="title function_">getConnection</span><span class="params">()</span></span><br></pre></td></tr></table></figure><p>é‚£ä¹ˆä»¥åå°±ä¸éœ€è¦é€šè¿‡ <code>DriverManager</code> å¯¹è±¡è·å– <code>Connection</code> å¯¹è±¡ï¼Œè€Œæ˜¯é€šè¿‡è¿æ¥æ± ï¼ˆDataSourceï¼‰è·å– <code>Connection</code> å¯¹è±¡ã€‚</p></li><li><p>å¸¸è§çš„æ•°æ®åº“è¿æ¥æ± </p><ul><li>DBCP</li><li>C3P0</li><li>Druid</li></ul><p>æˆ‘ä»¬ç°åœ¨ä½¿ç”¨æ›´å¤šçš„æ˜¯Druidï¼Œå®ƒçš„æ€§èƒ½æ¯”å…¶ä»–ä¸¤ä¸ªä¼šå¥½ä¸€äº›ã€‚</p></li><li><p>Druidï¼ˆå¾·é²ä¼Šï¼‰</p><ul><li><p>Druidè¿æ¥æ± æ˜¯é˜¿é‡Œå·´å·´å¼€æºçš„æ•°æ®åº“è¿æ¥æ± é¡¹ç›® </p></li><li><p>åŠŸèƒ½å¼ºå¤§ï¼Œæ€§èƒ½ä¼˜ç§€ï¼Œæ˜¯Javaè¯­è¨€æœ€å¥½çš„æ•°æ®åº“è¿æ¥æ± ä¹‹ä¸€</p></li></ul></li></ul><h3 id="4-3-Driudä½¿ç”¨"><a href="#4-3-Driudä½¿ç”¨" class="headerlink" title="4.3  Driudä½¿ç”¨"></a>4.3  Driudä½¿ç”¨</h3><blockquote><ul><li>å¯¼å…¥jaråŒ… druid-1.1.12.jar</li><li>å®šä¹‰é…ç½®æ–‡ä»¶</li><li>åŠ è½½é…ç½®æ–‡ä»¶</li><li>è·å–æ•°æ®åº“è¿æ¥æ± å¯¹è±¡</li><li>è·å–è¿æ¥</li></ul></blockquote><p>ç°åœ¨é€šè¿‡ä»£ç å®ç°ï¼Œé¦–å…ˆéœ€è¦å…ˆå°†druidçš„jaråŒ…æ”¾åˆ°é¡¹ç›®ä¸‹çš„libä¸‹å¹¶æ·»åŠ ä¸ºåº“æ–‡ä»¶</p><img src="/2022/07/31/JDBC/image-20210725212911980.png" alt="image-20210725212911980" style="zoom:80%;"><p>é¡¹ç›®ç»“æ„å¦‚ä¸‹ï¼š</p><img src="/2022/07/31/JDBC/image-20210725213210091.png" alt="image-20210725213210091" style="zoom:80%;"><p>ç¼–å†™é…ç½®æ–‡ä»¶å¦‚ä¸‹ï¼š</p><figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">driverClassName</span>=<span class="string">com.mysql.jdbc.Driver</span></span><br><span class="line"><span class="attr">url</span>=<span class="string">jdbc:mysql:///db1?useSSL=false&amp;useServerPrepStmts=true</span></span><br><span class="line"><span class="attr">username</span>=<span class="string">root</span></span><br><span class="line"><span class="attr">password</span>=<span class="string">1234</span></span><br><span class="line"><span class="comment"># åˆå§‹åŒ–è¿æ¥æ•°é‡</span></span><br><span class="line"><span class="attr">initialSize</span>=<span class="string">5</span></span><br><span class="line"><span class="comment"># æœ€å¤§è¿æ¥æ•°</span></span><br><span class="line"><span class="attr">maxActive</span>=<span class="string">10</span></span><br><span class="line"><span class="comment"># æœ€å¤§ç­‰å¾…æ—¶é—´</span></span><br><span class="line"><span class="attr">maxWait</span>=<span class="string">3000</span></span><br></pre></td></tr></table></figure><p>ä½¿ç”¨druidçš„ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Druidæ•°æ®åº“è¿æ¥æ± æ¼”ç¤º</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DruidDemo</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="comment">//1.å¯¼å…¥jaråŒ…</span></span><br><span class="line">        <span class="comment">//2.å®šä¹‰é…ç½®æ–‡ä»¶</span></span><br><span class="line">        <span class="comment">//3. åŠ è½½é…ç½®æ–‡ä»¶</span></span><br><span class="line">        <span class="type">Properties</span> <span class="variable">prop</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Properties</span>();</span><br><span class="line">        prop.load(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;jdbc-demo/src/druid.properties&quot;</span>));</span><br><span class="line">        <span class="comment">//4. è·å–è¿æ¥æ± å¯¹è±¡</span></span><br><span class="line">        <span class="type">DataSource</span> <span class="variable">dataSource</span> <span class="operator">=</span> DruidDataSourceFactory.createDataSource(prop);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//5. è·å–æ•°æ®åº“è¿æ¥ Connection</span></span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> dataSource.getConnection();</span><br><span class="line">        System.out.println(connection); <span class="comment">//è·å–åˆ°äº†è¿æ¥åå°±å¯ä»¥ç»§ç»­åšå…¶ä»–æ“ä½œäº†</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//System.out.println(System.getProperty(&quot;user.dir&quot;));</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="5ï¼ŒJDBCç»ƒä¹ "><a href="#5ï¼ŒJDBCç»ƒä¹ " class="headerlink" title="5ï¼ŒJDBCç»ƒä¹ "></a>5ï¼ŒJDBCç»ƒä¹ </h2><h3 id="5-1-éœ€æ±‚"><a href="#5-1-éœ€æ±‚" class="headerlink" title="5.1  éœ€æ±‚"></a>5.1  éœ€æ±‚</h3><p>å®Œæˆå•†å“å“ç‰Œæ•°æ®çš„å¢åˆ æ”¹æŸ¥æ“ä½œ</p><ul><li>æŸ¥è¯¢ï¼šæŸ¥è¯¢æ‰€æœ‰æ•°æ®</li><li>æ·»åŠ ï¼šæ·»åŠ å“ç‰Œ</li><li>ä¿®æ”¹ï¼šæ ¹æ®idä¿®æ”¹</li><li>åˆ é™¤ï¼šæ ¹æ®idåˆ é™¤</li></ul><h3 id="5-2-æ¡ˆä¾‹å®ç°"><a href="#5-2-æ¡ˆä¾‹å®ç°" class="headerlink" title="5.2  æ¡ˆä¾‹å®ç°"></a>5.2  æ¡ˆä¾‹å®ç°</h3><h4 id="5-2-1-ç¯å¢ƒå‡†å¤‡"><a href="#5-2-1-ç¯å¢ƒå‡†å¤‡" class="headerlink" title="5.2.1  ç¯å¢ƒå‡†å¤‡"></a>5.2.1  ç¯å¢ƒå‡†å¤‡</h4><ul><li><p>æ•°æ®åº“è¡¨ <code>tb_brand</code></p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- åˆ é™¤tb_brandè¡¨</span></span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> if <span class="keyword">exists</span> tb_brand;</span><br><span class="line"><span class="comment">-- åˆ›å»ºtb_brandè¡¨</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> tb_brand (</span><br><span class="line">    <span class="comment">-- id ä¸»é”®</span></span><br><span class="line">    id <span class="type">int</span> <span class="keyword">primary</span> key auto_increment,</span><br><span class="line">    <span class="comment">-- å“ç‰Œåç§°</span></span><br><span class="line">    brand_name <span class="type">varchar</span>(<span class="number">20</span>),</span><br><span class="line">    <span class="comment">-- ä¼ä¸šåç§°</span></span><br><span class="line">    company_name <span class="type">varchar</span>(<span class="number">20</span>),</span><br><span class="line">    <span class="comment">-- æ’åºå­—æ®µ</span></span><br><span class="line">    ordered <span class="type">int</span>,</span><br><span class="line">    <span class="comment">-- æè¿°ä¿¡æ¯</span></span><br><span class="line">    description <span class="type">varchar</span>(<span class="number">100</span>),</span><br><span class="line">    <span class="comment">-- çŠ¶æ€ï¼š0ï¼šç¦ç”¨  1ï¼šå¯ç”¨</span></span><br><span class="line">    status <span class="type">int</span></span><br><span class="line">);</span><br><span class="line"><span class="comment">-- æ·»åŠ æ•°æ®</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> tb_brand (brand_name, company_name, ordered, description, status)</span><br><span class="line"><span class="keyword">values</span> (<span class="string">&#x27;ä¸‰åªæ¾é¼ &#x27;</span>, <span class="string">&#x27;ä¸‰åªæ¾é¼ è‚¡ä»½æœ‰é™å…¬å¸&#x27;</span>, <span class="number">5</span>, <span class="string">&#x27;å¥½åƒä¸ä¸Šç«&#x27;</span>, <span class="number">0</span>),</span><br><span class="line">       (<span class="string">&#x27;åä¸º&#x27;</span>, <span class="string">&#x27;åä¸ºæŠ€æœ¯æœ‰é™å…¬å¸&#x27;</span>, <span class="number">100</span>, <span class="string">&#x27;åä¸ºè‡´åŠ›äºæŠŠæ•°å­—ä¸–ç•Œå¸¦å…¥æ¯ä¸ªäººã€æ¯ä¸ªå®¶åº­ã€æ¯ä¸ªç»„ç»‡ï¼Œæ„å»ºä¸‡ç‰©äº’è”çš„æ™ºèƒ½ä¸–ç•Œ&#x27;</span>, <span class="number">1</span>),</span><br><span class="line">       (<span class="string">&#x27;å°ç±³&#x27;</span>, <span class="string">&#x27;å°ç±³ç§‘æŠ€æœ‰é™å…¬å¸&#x27;</span>, <span class="number">50</span>, <span class="string">&#x27;are you ok&#x27;</span>, <span class="number">1</span>);</span><br></pre></td></tr></table></figure></li><li><p>åœ¨pojoåŒ…ä¸‹å®ä½“ç±» Brand</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å“ç‰Œ</span></span><br><span class="line"><span class="comment"> * alt + é¼ æ ‡å·¦é”®ï¼šæ•´åˆ—ç¼–è¾‘</span></span><br><span class="line"><span class="comment"> * åœ¨å®ä½“ç±»ä¸­ï¼ŒåŸºæœ¬æ•°æ®ç±»å‹å»ºè®®ä½¿ç”¨å…¶å¯¹åº”çš„åŒ…è£…ç±»å‹</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Brand</span> &#123;</span><br><span class="line">    <span class="comment">// id ä¸»é”®</span></span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="comment">// å“ç‰Œåç§°</span></span><br><span class="line">    <span class="keyword">private</span> String brandName;</span><br><span class="line">    <span class="comment">// ä¼ä¸šåç§°</span></span><br><span class="line">    <span class="keyword">private</span> String companyName;</span><br><span class="line">    <span class="comment">// æ’åºå­—æ®µ</span></span><br><span class="line">    <span class="keyword">private</span> Integer ordered;</span><br><span class="line">    <span class="comment">// æè¿°ä¿¡æ¯</span></span><br><span class="line">    <span class="keyword">private</span> String description;</span><br><span class="line">    <span class="comment">// çŠ¶æ€ï¼š0ï¼šç¦ç”¨  1ï¼šå¯ç”¨</span></span><br><span class="line">    <span class="keyword">private</span> Integer status;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Integer <span class="title function_">getId</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setId</span><span class="params">(Integer id)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getBrandName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> brandName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setBrandName</span><span class="params">(String brandName)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.brandName = brandName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getCompanyName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> companyName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCompanyName</span><span class="params">(String companyName)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.companyName = companyName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Integer <span class="title function_">getOrdered</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> ordered;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setOrdered</span><span class="params">(Integer ordered)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.ordered = ordered;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getDescription</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> description;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setDescription</span><span class="params">(String description)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.description = description;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Integer <span class="title function_">getStatus</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> status;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setStatus</span><span class="params">(Integer status)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.status = status;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Brand&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;id=&quot;</span> + id +</span><br><span class="line">                <span class="string">&quot;, brandName=&#x27;&quot;</span> + brandName + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, companyName=&#x27;&quot;</span> + companyName + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, ordered=&quot;</span> + ordered +</span><br><span class="line">                <span class="string">&quot;, description=&#x27;&quot;</span> + description + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, status=&quot;</span> + status +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h4 id="5-2-2-æŸ¥è¯¢æ‰€æœ‰"><a href="#5-2-2-æŸ¥è¯¢æ‰€æœ‰" class="headerlink" title="5.2.2  æŸ¥è¯¢æ‰€æœ‰"></a>5.2.2  æŸ¥è¯¢æ‰€æœ‰</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"> <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * æŸ¥è¯¢æ‰€æœ‰</span></span><br><span class="line"><span class="comment">   * 1. SQLï¼šselect * from tb_brand;</span></span><br><span class="line"><span class="comment">   * 2. å‚æ•°ï¼šä¸éœ€è¦</span></span><br><span class="line"><span class="comment">   * 3. ç»“æœï¼šList&lt;Brand&gt;</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSelectAll</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    <span class="comment">//1. è·å–Connection</span></span><br><span class="line">    <span class="comment">//3. åŠ è½½é…ç½®æ–‡ä»¶</span></span><br><span class="line">    <span class="type">Properties</span> <span class="variable">prop</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Properties</span>();</span><br><span class="line">    prop.load(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;jdbc-demo/src/druid.properties&quot;</span>));</span><br><span class="line">    <span class="comment">//4. è·å–è¿æ¥æ± å¯¹è±¡</span></span><br><span class="line">    <span class="type">DataSource</span> <span class="variable">dataSource</span> <span class="operator">=</span> DruidDataSourceFactory.createDataSource(prop);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//5. è·å–æ•°æ®åº“è¿æ¥ Connection</span></span><br><span class="line">    <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> dataSource.getConnection();</span><br><span class="line">    <span class="comment">//2. å®šä¹‰SQL</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select * from tb_brand;&quot;</span>;</span><br><span class="line">    <span class="comment">//3. è·å–pstmtå¯¹è±¡</span></span><br><span class="line">    <span class="type">PreparedStatement</span> <span class="variable">pstmt</span> <span class="operator">=</span> conn.prepareStatement(sql);</span><br><span class="line">    <span class="comment">//4. è®¾ç½®å‚æ•°</span></span><br><span class="line">    <span class="comment">//5. æ‰§è¡ŒSQL</span></span><br><span class="line">    <span class="type">ResultSet</span> <span class="variable">rs</span> <span class="operator">=</span> pstmt.executeQuery();</span><br><span class="line">    <span class="comment">//6. å¤„ç†ç»“æœ List&lt;Brand&gt; å°è£…Brandå¯¹è±¡ï¼Œè£…è½½Listé›†åˆ</span></span><br><span class="line">    <span class="type">Brand</span> <span class="variable">brand</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    List&lt;Brand&gt; brands = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">while</span> (rs.next())&#123;</span><br><span class="line">        <span class="comment">//è·å–æ•°æ®</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">id</span> <span class="operator">=</span> rs.getInt(<span class="string">&quot;id&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">brandName</span> <span class="operator">=</span> rs.getString(<span class="string">&quot;brand_name&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">companyName</span> <span class="operator">=</span> rs.getString(<span class="string">&quot;company_name&quot;</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">ordered</span> <span class="operator">=</span> rs.getInt(<span class="string">&quot;ordered&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">description</span> <span class="operator">=</span> rs.getString(<span class="string">&quot;description&quot;</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">status</span> <span class="operator">=</span> rs.getInt(<span class="string">&quot;status&quot;</span>);</span><br><span class="line">        <span class="comment">//å°è£…Brandå¯¹è±¡</span></span><br><span class="line">        brand = <span class="keyword">new</span> <span class="title class_">Brand</span>();</span><br><span class="line">        brand.setId(id);</span><br><span class="line">        brand.setBrandName(brandName);</span><br><span class="line">        brand.setCompanyName(companyName);</span><br><span class="line">        brand.setOrdered(ordered);</span><br><span class="line">        brand.setDescription(description);</span><br><span class="line">        brand.setStatus(status);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//è£…è½½é›†åˆ</span></span><br><span class="line">        brands.add(brand);</span><br><span class="line">    &#125;</span><br><span class="line">    System.out.println(brands);</span><br><span class="line">    <span class="comment">//7. é‡Šæ”¾èµ„æº</span></span><br><span class="line">    rs.close();</span><br><span class="line">    pstmt.close();</span><br><span class="line">    conn.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="5-2-3-æ·»åŠ æ•°æ®"><a href="#5-2-3-æ·»åŠ æ•°æ®" class="headerlink" title="5.2.3  æ·»åŠ æ•°æ®"></a>5.2.3  æ·»åŠ æ•°æ®</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * æ·»åŠ </span></span><br><span class="line"><span class="comment">  * 1. SQLï¼šinsert into tb_brand(brand_name, company_name, ordered, description, status) values(?,?,?,?,?);</span></span><br><span class="line"><span class="comment">  * 2. å‚æ•°ï¼šéœ€è¦ï¼Œé™¤äº†idä¹‹å¤–çš„æ‰€æœ‰å‚æ•°ä¿¡æ¯</span></span><br><span class="line"><span class="comment">  * 3. ç»“æœï¼šboolean</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testAdd</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    <span class="comment">// æ¥æ”¶é¡µé¢æäº¤çš„å‚æ•°</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">brandName</span> <span class="operator">=</span> <span class="string">&quot;é¦™é£˜é£˜&quot;</span>;</span><br><span class="line">    <span class="type">String</span> <span class="variable">companyName</span> <span class="operator">=</span> <span class="string">&quot;é¦™é£˜é£˜&quot;</span>;</span><br><span class="line">    <span class="type">int</span> <span class="variable">ordered</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">    <span class="type">String</span> <span class="variable">description</span> <span class="operator">=</span> <span class="string">&quot;ç»•åœ°çƒä¸€åœˆ&quot;</span>;</span><br><span class="line">    <span class="type">int</span> <span class="variable">status</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//1. è·å–Connection</span></span><br><span class="line">    <span class="comment">//3. åŠ è½½é…ç½®æ–‡ä»¶</span></span><br><span class="line">    <span class="type">Properties</span> <span class="variable">prop</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Properties</span>();</span><br><span class="line">    prop.load(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;jdbc-demo/src/druid.properties&quot;</span>));</span><br><span class="line">    <span class="comment">//4. è·å–è¿æ¥æ± å¯¹è±¡</span></span><br><span class="line">    <span class="type">DataSource</span> <span class="variable">dataSource</span> <span class="operator">=</span> DruidDataSourceFactory.createDataSource(prop);</span><br><span class="line">    <span class="comment">//5. è·å–æ•°æ®åº“è¿æ¥ Connection</span></span><br><span class="line">    <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> dataSource.getConnection();</span><br><span class="line">    <span class="comment">//2. å®šä¹‰SQL</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;insert into tb_brand(brand_name, company_name, ordered, description, status) values(?,?,?,?,?);&quot;</span>;</span><br><span class="line">    <span class="comment">//3. è·å–pstmtå¯¹è±¡</span></span><br><span class="line">    <span class="type">PreparedStatement</span> <span class="variable">pstmt</span> <span class="operator">=</span> conn.prepareStatement(sql);</span><br><span class="line">    <span class="comment">//4. è®¾ç½®å‚æ•°</span></span><br><span class="line">    pstmt.setString(<span class="number">1</span>,brandName);</span><br><span class="line">    pstmt.setString(<span class="number">2</span>,companyName);</span><br><span class="line">    pstmt.setInt(<span class="number">3</span>,ordered);</span><br><span class="line">    pstmt.setString(<span class="number">4</span>,description);</span><br><span class="line">    pstmt.setInt(<span class="number">5</span>,status);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//5. æ‰§è¡ŒSQL</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> pstmt.executeUpdate(); <span class="comment">// å½±å“çš„è¡Œæ•°</span></span><br><span class="line">    <span class="comment">//6. å¤„ç†ç»“æœ</span></span><br><span class="line">    System.out.println(count &gt; <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//7. é‡Šæ”¾èµ„æº</span></span><br><span class="line">    pstmt.close();</span><br><span class="line">    conn.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="5-2-4-ä¿®æ”¹æ•°æ®"><a href="#5-2-4-ä¿®æ”¹æ•°æ®" class="headerlink" title="5.2.4  ä¿®æ”¹æ•°æ®"></a>5.2.4  ä¿®æ”¹æ•°æ®</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * ä¿®æ”¹</span></span><br><span class="line"><span class="comment">  * 1. SQLï¼š</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">     update tb_brand</span></span><br><span class="line"><span class="comment">         set brand_name  = ?,</span></span><br><span class="line"><span class="comment">         company_name= ?,</span></span><br><span class="line"><span class="comment">         ordered     = ?,</span></span><br><span class="line"><span class="comment">         description = ?,</span></span><br><span class="line"><span class="comment">         status      = ?</span></span><br><span class="line"><span class="comment">     where id = ?</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">   * 2. å‚æ•°ï¼šéœ€è¦ï¼Œæ‰€æœ‰æ•°æ®</span></span><br><span class="line"><span class="comment">   * 3. ç»“æœï¼šboolean</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testUpdate</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    <span class="comment">// æ¥æ”¶é¡µé¢æäº¤çš„å‚æ•°</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">brandName</span> <span class="operator">=</span> <span class="string">&quot;é¦™é£˜é£˜&quot;</span>;</span><br><span class="line">    <span class="type">String</span> <span class="variable">companyName</span> <span class="operator">=</span> <span class="string">&quot;é¦™é£˜é£˜&quot;</span>;</span><br><span class="line">    <span class="type">int</span> <span class="variable">ordered</span> <span class="operator">=</span> <span class="number">1000</span>;</span><br><span class="line">    <span class="type">String</span> <span class="variable">description</span> <span class="operator">=</span> <span class="string">&quot;ç»•åœ°çƒä¸‰åœˆ&quot;</span>;</span><br><span class="line">    <span class="type">int</span> <span class="variable">status</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">    <span class="type">int</span> <span class="variable">id</span> <span class="operator">=</span> <span class="number">4</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//1. è·å–Connection</span></span><br><span class="line">    <span class="comment">//3. åŠ è½½é…ç½®æ–‡ä»¶</span></span><br><span class="line">    <span class="type">Properties</span> <span class="variable">prop</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Properties</span>();</span><br><span class="line">    prop.load(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;jdbc-demo/src/druid.properties&quot;</span>));</span><br><span class="line">    <span class="comment">//4. è·å–è¿æ¥æ± å¯¹è±¡</span></span><br><span class="line">    <span class="type">DataSource</span> <span class="variable">dataSource</span> <span class="operator">=</span> DruidDataSourceFactory.createDataSource(prop);</span><br><span class="line">    <span class="comment">//5. è·å–æ•°æ®åº“è¿æ¥ Connection</span></span><br><span class="line">    <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> dataSource.getConnection();</span><br><span class="line">    <span class="comment">//2. å®šä¹‰SQL</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot; update tb_brand\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot;         set brand_name  = ?,\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot;         company_name= ?,\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot;         ordered     = ?,\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot;         description = ?,\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot;         status      = ?\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot;     where id = ?&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//3. è·å–pstmtå¯¹è±¡</span></span><br><span class="line">    <span class="type">PreparedStatement</span> <span class="variable">pstmt</span> <span class="operator">=</span> conn.prepareStatement(sql);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//4. è®¾ç½®å‚æ•°</span></span><br><span class="line">    pstmt.setString(<span class="number">1</span>,brandName);</span><br><span class="line">    pstmt.setString(<span class="number">2</span>,companyName);</span><br><span class="line">    pstmt.setInt(<span class="number">3</span>,ordered);</span><br><span class="line">    pstmt.setString(<span class="number">4</span>,description);</span><br><span class="line">    pstmt.setInt(<span class="number">5</span>,status);</span><br><span class="line">    pstmt.setInt(<span class="number">6</span>,id);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//5. æ‰§è¡ŒSQL</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> pstmt.executeUpdate(); <span class="comment">// å½±å“çš„è¡Œæ•°</span></span><br><span class="line">    <span class="comment">//6. å¤„ç†ç»“æœ</span></span><br><span class="line">    System.out.println(count &gt; <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//7. é‡Šæ”¾èµ„æº</span></span><br><span class="line">    pstmt.close();</span><br><span class="line">    conn.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="5-2-5-åˆ é™¤æ•°æ®"><a href="#5-2-5-åˆ é™¤æ•°æ®" class="headerlink" title="5.2.5  åˆ é™¤æ•°æ®"></a>5.2.5  åˆ é™¤æ•°æ®</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * åˆ é™¤</span></span><br><span class="line"><span class="comment">  * 1. SQLï¼š</span></span><br><span class="line"><span class="comment">            delete from tb_brand where id = ?</span></span><br><span class="line"><span class="comment">  * 2. å‚æ•°ï¼šéœ€è¦ï¼Œid</span></span><br><span class="line"><span class="comment">  * 3. ç»“æœï¼šboolean</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testDeleteById</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    <span class="comment">// æ¥æ”¶é¡µé¢æäº¤çš„å‚æ•°</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">id</span> <span class="operator">=</span> <span class="number">4</span>;</span><br><span class="line">    <span class="comment">//1. è·å–Connection</span></span><br><span class="line">    <span class="comment">//3. åŠ è½½é…ç½®æ–‡ä»¶</span></span><br><span class="line">    <span class="type">Properties</span> <span class="variable">prop</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Properties</span>();</span><br><span class="line">    prop.load(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;jdbc-demo/src/druid.properties&quot;</span>));</span><br><span class="line">    <span class="comment">//4. è·å–è¿æ¥æ± å¯¹è±¡</span></span><br><span class="line">    <span class="type">DataSource</span> <span class="variable">dataSource</span> <span class="operator">=</span> DruidDataSourceFactory.createDataSource(prop);</span><br><span class="line">    <span class="comment">//5. è·å–æ•°æ®åº“è¿æ¥ Connection</span></span><br><span class="line">    <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> dataSource.getConnection();</span><br><span class="line">    <span class="comment">//2. å®šä¹‰SQL</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot; delete from tb_brand where id = ?&quot;</span>;</span><br><span class="line">    <span class="comment">//3. è·å–pstmtå¯¹è±¡</span></span><br><span class="line">    <span class="type">PreparedStatement</span> <span class="variable">pstmt</span> <span class="operator">=</span> conn.prepareStatement(sql);</span><br><span class="line">    <span class="comment">//4. è®¾ç½®å‚æ•°</span></span><br><span class="line">    pstmt.setInt(<span class="number">1</span>,id);</span><br><span class="line">    <span class="comment">//5. æ‰§è¡ŒSQL</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> pstmt.executeUpdate(); <span class="comment">// å½±å“çš„è¡Œæ•°</span></span><br><span class="line">    <span class="comment">//6. å¤„ç†ç»“æœ</span></span><br><span class="line">    System.out.println(count &gt; <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//7. é‡Šæ”¾èµ„æº</span></span><br><span class="line">    pstmt.close();</span><br><span class="line">    conn.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> JDBC </tag>
            
            <tag> JavaWeb </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>IntelliJ IDEAå¸¸ç”¨å¿«æ·é”® + åŠ¨å›¾æ¼”ç¤º</title>
      <link href="/2022/07/30/IDEA%E5%B8%B8%E7%94%A8%E5%BF%AB%E6%8D%B7%E9%94%AE/"/>
      <url>/2022/07/30/IDEA%E5%B8%B8%E7%94%A8%E5%BF%AB%E6%8D%B7%E9%94%AE/</url>
      
        <content type="html"><![CDATA[<h1 id="ä»£ç è¡¥å…¨"><a href="#ä»£ç è¡¥å…¨" class="headerlink" title="ä»£ç è¡¥å…¨"></a>ä»£ç è¡¥å…¨</h1><h3 id="Ctrl-Jï¼šè‡ªåŠ¨ä»£ç "><a href="#Ctrl-Jï¼šè‡ªåŠ¨ä»£ç " class="headerlink" title="Ctrl + Jï¼šè‡ªåŠ¨ä»£ç "></a>Ctrl + Jï¼šè‡ªåŠ¨ä»£ç </h3><h3 id="Ctrl-Space-ï¼šåŸºæœ¬è¡¥å…¨"><a href="#Ctrl-Space-ï¼šåŸºæœ¬è¡¥å…¨" class="headerlink" title="Ctrl + Space ï¼šåŸºæœ¬è¡¥å…¨"></a>Ctrl + Space ï¼šåŸºæœ¬è¡¥å…¨</h3><p><img src="/2022/07/30/IDEA%E5%B8%B8%E7%94%A8%E5%BF%AB%E6%8D%B7%E9%94%AE/640.gif" alt="640"></p><h3 id="Ctrl-Alt-Space-æˆ–æŒ‰ä¸¤ä¸‹Ctrl-Space-ï¼šå†æ¬¡åŸºæœ¬è¡¥å…¨"><a href="#Ctrl-Alt-Space-æˆ–æŒ‰ä¸¤ä¸‹Ctrl-Space-ï¼šå†æ¬¡åŸºæœ¬è¡¥å…¨" class="headerlink" title="Ctrl + Alt + Space(æˆ–æŒ‰ä¸¤ä¸‹Ctrl + Space) ï¼šå†æ¬¡åŸºæœ¬è¡¥å…¨"></a>Ctrl + Alt + Space(æˆ–æŒ‰ä¸¤ä¸‹Ctrl + Space) ï¼šå†æ¬¡åŸºæœ¬è¡¥å…¨</h3><p><img src="/2022/07/30/IDEA%E5%B8%B8%E7%94%A8%E5%BF%AB%E6%8D%B7%E9%94%AE/641.gif" alt="641"></p><h3 id="Ctrl-Shift-Space-ï¼šç±»å‹åŒ¹é…ä»£ç è¡¥å…¨"><a href="#Ctrl-Shift-Space-ï¼šç±»å‹åŒ¹é…ä»£ç è¡¥å…¨" class="headerlink" title="Ctrl + Shift + Space ï¼šç±»å‹åŒ¹é…ä»£ç è¡¥å…¨"></a>Ctrl + Shift + Space ï¼šç±»å‹åŒ¹é…ä»£ç è¡¥å…¨</h3><p><img src="/2022/07/30/IDEA%E5%B8%B8%E7%94%A8%E5%BF%AB%E6%8D%B7%E9%94%AE/642.gif" alt="642"></p><h3 id="Ctrl-Shift-Enter-ï¼šè¡¥å…¨å½“å‰è¯­å¥"><a href="#Ctrl-Shift-Enter-ï¼šè¡¥å…¨å½“å‰è¯­å¥" class="headerlink" title="Ctrl + Shift + Enter ï¼šè¡¥å…¨å½“å‰è¯­å¥"></a>Ctrl + Shift + Enter ï¼šè¡¥å…¨å½“å‰è¯­å¥</h3><p><img src="/2022/07/30/IDEA%E5%B8%B8%E7%94%A8%E5%BF%AB%E6%8D%B7%E9%94%AE/643.gif" alt="643"></p><h3 id="Ctrl-Alt-V-ï¼šè‡ªåŠ¨ç”Ÿæˆå˜é‡å"><a href="#Ctrl-Alt-V-ï¼šè‡ªåŠ¨ç”Ÿæˆå˜é‡å" class="headerlink" title="Ctrl + Alt + V ï¼šè‡ªåŠ¨ç”Ÿæˆå˜é‡å"></a>Ctrl + Alt + V ï¼šè‡ªåŠ¨ç”Ÿæˆå˜é‡å</h3><h1 id="è·³è½¬"><a href="#è·³è½¬" class="headerlink" title="è·³è½¬"></a>è·³è½¬</h1><h3 id="Ctrl-Alt-å·¦å³æ–¹å‘é”®-ï¼šè¿”å›ä¸Šæ¬¡è·³è½¬çš„ä½ç½®"><a href="#Ctrl-Alt-å·¦å³æ–¹å‘é”®-ï¼šè¿”å›ä¸Šæ¬¡è·³è½¬çš„ä½ç½®" class="headerlink" title="Ctrl + Alt + å·¦å³æ–¹å‘é”® ï¼šè¿”å›ä¸Šæ¬¡è·³è½¬çš„ä½ç½®"></a>Ctrl + Alt + å·¦å³æ–¹å‘é”® ï¼šè¿”å›ä¸Šæ¬¡è·³è½¬çš„ä½ç½®</h3><h3 id="Ctrl-Shift-M-ï¼šè·³è½¬åˆ°å½“å‰ä»£ç å—å‰æˆ–ä»£ç å—å-èŠ±æ‹¬å·å¤–"><a href="#Ctrl-Shift-M-ï¼šè·³è½¬åˆ°å½“å‰ä»£ç å—å‰æˆ–ä»£ç å—å-èŠ±æ‹¬å·å¤–" class="headerlink" title="Ctrl + Shift + M ï¼šè·³è½¬åˆ°å½“å‰ä»£ç å—å‰æˆ–ä»£ç å—å(èŠ±æ‹¬å·å¤–)"></a>Ctrl + Shift + M ï¼šè·³è½¬åˆ°å½“å‰ä»£ç å—å‰æˆ–ä»£ç å—å(èŠ±æ‹¬å·å¤–)</h3><p><img src="/2022/07/30/IDEA%E5%B8%B8%E7%94%A8%E5%BF%AB%E6%8D%B7%E9%94%AE/644.gif" alt="644"></p><h3 id="Ctrl-ï¼šç§»åŠ¨åˆ°å½“å‰ä»£ç æ‰€åœ¨èŠ±æ‹¬å·å¼€å§‹ä½ç½®-æ‹¬å·å†…"><a href="#Ctrl-ï¼šç§»åŠ¨åˆ°å½“å‰ä»£ç æ‰€åœ¨èŠ±æ‹¬å·å¼€å§‹ä½ç½®-æ‹¬å·å†…" class="headerlink" title="Ctrl + [ ï¼šç§»åŠ¨åˆ°å½“å‰ä»£ç æ‰€åœ¨èŠ±æ‹¬å·å¼€å§‹ä½ç½®(æ‹¬å·å†…)"></a>Ctrl + [ ï¼šç§»åŠ¨åˆ°å½“å‰ä»£ç æ‰€åœ¨èŠ±æ‹¬å·å¼€å§‹ä½ç½®(æ‹¬å·å†…)</h3><h3 id="Ctrl-ï¼šç§»åŠ¨åˆ°å½“å‰ä»£ç æ‰€åœ¨èŠ±æ‹¬å·ç»“æŸä½ç½®-æ‹¬å·å†…"><a href="#Ctrl-ï¼šç§»åŠ¨åˆ°å½“å‰ä»£ç æ‰€åœ¨èŠ±æ‹¬å·ç»“æŸä½ç½®-æ‹¬å·å†…" class="headerlink" title="Ctrl + ] ï¼šç§»åŠ¨åˆ°å½“å‰ä»£ç æ‰€åœ¨èŠ±æ‹¬å·ç»“æŸä½ç½®(æ‹¬å·å†…)"></a>Ctrl + ] ï¼šç§»åŠ¨åˆ°å½“å‰ä»£ç æ‰€åœ¨èŠ±æ‹¬å·ç»“æŸä½ç½®(æ‹¬å·å†…)</h3><p><img src="/2022/07/30/IDEA%E5%B8%B8%E7%94%A8%E5%BF%AB%E6%8D%B7%E9%94%AE/654.gif" alt="654"></p><h3 id="F2-ï¼šè·³è½¬åˆ°ä¸‹ä¸€å¤„è­¦å‘Š-x2F-é”™è¯¯æ‰€åœ¨ä½ç½®"><a href="#F2-ï¼šè·³è½¬åˆ°ä¸‹ä¸€å¤„è­¦å‘Š-x2F-é”™è¯¯æ‰€åœ¨ä½ç½®" class="headerlink" title="F2 ï¼šè·³è½¬åˆ°ä¸‹ä¸€å¤„è­¦å‘Š&#x2F;é”™è¯¯æ‰€åœ¨ä½ç½®"></a>F2 ï¼šè·³è½¬åˆ°ä¸‹ä¸€å¤„è­¦å‘Š&#x2F;é”™è¯¯æ‰€åœ¨ä½ç½®</h3><h3 id="Shift-F2-ï¼šä¸Šä¸€ä¸ªçªå‡ºæ˜¾ç¤ºçš„é”™è¯¯"><a href="#Shift-F2-ï¼šä¸Šä¸€ä¸ªçªå‡ºæ˜¾ç¤ºçš„é”™è¯¯" class="headerlink" title="Shift + F2 ï¼šä¸Šä¸€ä¸ªçªå‡ºæ˜¾ç¤ºçš„é”™è¯¯"></a>Shift + F2 ï¼šä¸Šä¸€ä¸ªçªå‡ºæ˜¾ç¤ºçš„é”™è¯¯</h3><p><img src="/2022/07/30/IDEA%E5%B8%B8%E7%94%A8%E5%BF%AB%E6%8D%B7%E9%94%AE/645.gif" alt="645"></p><h3 id="Ctrl-Shift-Backspace-ï¼šè·³è½¬åˆ°ä¸Šä¸€æ¬¡ç¼–è¾‘çš„åœ°æ–¹"><a href="#Ctrl-Shift-Backspace-ï¼šè·³è½¬åˆ°ä¸Šä¸€æ¬¡ç¼–è¾‘çš„åœ°æ–¹" class="headerlink" title="Ctrl + Shift + Backspace ï¼šè·³è½¬åˆ°ä¸Šä¸€æ¬¡ç¼–è¾‘çš„åœ°æ–¹"></a>Ctrl + Shift + Backspace ï¼šè·³è½¬åˆ°ä¸Šä¸€æ¬¡ç¼–è¾‘çš„åœ°æ–¹</h3><p><img src="/2022/07/30/IDEA%E5%B8%B8%E7%94%A8%E5%BF%AB%E6%8D%B7%E9%94%AE/646.gif" alt="646"></p><h3 id="Ctrl-U-ï¼šè·³è½¬åˆ°çˆ¶ç±»æ–¹æ³•"><a href="#Ctrl-U-ï¼šè·³è½¬åˆ°çˆ¶ç±»æ–¹æ³•" class="headerlink" title="Ctrl + U ï¼šè·³è½¬åˆ°çˆ¶ç±»æ–¹æ³•"></a>Ctrl + U ï¼šè·³è½¬åˆ°çˆ¶ç±»æ–¹æ³•</h3><h3 id="Ctrl-B-Ctrl-é¼ æ ‡å·¦é”®-ï¼šè·³è½¬åˆ°æ–¹æ³•çš„å£°æ˜æˆ–ä½¿ç”¨å¤„"><a href="#Ctrl-B-Ctrl-é¼ æ ‡å·¦é”®-ï¼šè·³è½¬åˆ°æ–¹æ³•çš„å£°æ˜æˆ–ä½¿ç”¨å¤„" class="headerlink" title="Ctrl + B(Ctrl + é¼ æ ‡å·¦é”®) ï¼šè·³è½¬åˆ°æ–¹æ³•çš„å£°æ˜æˆ–ä½¿ç”¨å¤„"></a>Ctrl + B(Ctrl + é¼ æ ‡å·¦é”®) ï¼šè·³è½¬åˆ°æ–¹æ³•çš„å£°æ˜æˆ–ä½¿ç”¨å¤„</h3><p><img src="/2022/07/30/IDEA%E5%B8%B8%E7%94%A8%E5%BF%AB%E6%8D%B7%E9%94%AE/647.gif" alt="647"></p><h3 id="Ctrl-Alt-B-ï¼šè·³è½¬åˆ°æ–¹æ³•çš„å®ç°å¤„"><a href="#Ctrl-Alt-B-ï¼šè·³è½¬åˆ°æ–¹æ³•çš„å®ç°å¤„" class="headerlink" title="Ctrl + Alt + B ï¼šè·³è½¬åˆ°æ–¹æ³•çš„å®ç°å¤„"></a>Ctrl + Alt + B ï¼šè·³è½¬åˆ°æ–¹æ³•çš„å®ç°å¤„</h3><p><img src="/2022/07/30/IDEA%E5%B8%B8%E7%94%A8%E5%BF%AB%E6%8D%B7%E9%94%AE/648.gif" alt="648"></p><h3 id="Ctrl-Shift-B-ï¼šè·³è½¬åˆ°ç±»-x2F-æ–¹æ³•çš„å£°æ˜å¤„"><a href="#Ctrl-Shift-B-ï¼šè·³è½¬åˆ°ç±»-x2F-æ–¹æ³•çš„å£°æ˜å¤„" class="headerlink" title="Ctrl + Shift + B ï¼šè·³è½¬åˆ°ç±»&#x2F;æ–¹æ³•çš„å£°æ˜å¤„"></a>Ctrl + Shift + B ï¼šè·³è½¬åˆ°ç±»&#x2F;æ–¹æ³•çš„å£°æ˜å¤„</h3><p><img src="/2022/07/30/IDEA%E5%B8%B8%E7%94%A8%E5%BF%AB%E6%8D%B7%E9%94%AE/649.gif" alt="649"></p><h1 id="ä»£ç ç¼–è¾‘"><a href="#ä»£ç ç¼–è¾‘" class="headerlink" title="ä»£ç ç¼–è¾‘"></a>ä»£ç ç¼–è¾‘</h1><h3 id="Ctrl-Enter-ï¼šä¸Šæ’ä¸€è¡Œ"><a href="#Ctrl-Enter-ï¼šä¸Šæ’ä¸€è¡Œ" class="headerlink" title="Ctrl + Enter ï¼šä¸Šæ’ä¸€è¡Œ"></a>Ctrl + Enter ï¼šä¸Šæ’ä¸€è¡Œ</h3><h3 id="Shift-Enter-ï¼šä¸‹æ’ä¸€è¡Œ"><a href="#Shift-Enter-ï¼šä¸‹æ’ä¸€è¡Œ" class="headerlink" title="Shift + Enter ï¼šä¸‹æ’ä¸€è¡Œ"></a>Shift + Enter ï¼šä¸‹æ’ä¸€è¡Œ</h3><p>æ— è®ºå…‰æ ‡æ˜¯å¦åœ¨è¡Œå°¾ï¼Œéƒ½å¼€å§‹æ–°çš„è¡Œã€‚</p><p><img src="/2022/07/30/IDEA%E5%B8%B8%E7%94%A8%E5%BF%AB%E6%8D%B7%E9%94%AE/650.gif" alt="650"></p><h3 id="Alt-Insert-ï¼šè‡ªåŠ¨ç”Ÿæˆä¸€ç³»åˆ—æ–¹æ³•"><a href="#Alt-Insert-ï¼šè‡ªåŠ¨ç”Ÿæˆä¸€ç³»åˆ—æ–¹æ³•" class="headerlink" title="Alt + Insert ï¼šè‡ªåŠ¨ç”Ÿæˆä¸€ç³»åˆ—æ–¹æ³•"></a>Alt + Insert ï¼šè‡ªåŠ¨ç”Ÿæˆä¸€ç³»åˆ—æ–¹æ³•</h3><p><img src="/2022/07/30/IDEA%E5%B8%B8%E7%94%A8%E5%BF%AB%E6%8D%B7%E9%94%AE/651.gif" alt="651"></p><h3 id="Ctrl-O-ï¼šé‡å†™ç»§æ‰¿æ–¹æ³•"><a href="#Ctrl-O-ï¼šé‡å†™ç»§æ‰¿æ–¹æ³•" class="headerlink" title="Ctrl + O ï¼šé‡å†™ç»§æ‰¿æ–¹æ³•"></a>Ctrl + O ï¼šé‡å†™ç»§æ‰¿æ–¹æ³•</h3><h3 id="Ctrl-I-ï¼šå®ç°æ¥å£æ–¹æ³•"><a href="#Ctrl-I-ï¼šå®ç°æ¥å£æ–¹æ³•" class="headerlink" title="Ctrl + I ï¼šå®ç°æ¥å£æ–¹æ³•"></a>Ctrl + I ï¼šå®ç°æ¥å£æ–¹æ³•</h3><h3 id="Ctrl-P-ï¼šæ–¹æ³•å‚æ•°æç¤º"><a href="#Ctrl-P-ï¼šæ–¹æ³•å‚æ•°æç¤º" class="headerlink" title="Ctrl + P ï¼šæ–¹æ³•å‚æ•°æç¤º"></a>Ctrl + P ï¼šæ–¹æ³•å‚æ•°æç¤º</h3><p><img src="/2022/07/30/IDEA%E5%B8%B8%E7%94%A8%E5%BF%AB%E6%8D%B7%E9%94%AE/652.gif" alt="652"></p><h3 id="Shift-F6-ï¼šç±»-x2F-æ–¹æ³•-x2F-å˜é‡é‡å‘½å"><a href="#Shift-F6-ï¼šç±»-x2F-æ–¹æ³•-x2F-å˜é‡é‡å‘½å" class="headerlink" title="Shift + F6 ï¼šç±»&#x2F;æ–¹æ³•&#x2F;å˜é‡é‡å‘½å"></a>Shift + F6 ï¼šç±»&#x2F;æ–¹æ³•&#x2F;å˜é‡é‡å‘½å</h3><h3 id="Ctrl-Shift-F6-ï¼šé‡æ„å˜é‡ç±»å‹"><a href="#Ctrl-Shift-F6-ï¼šé‡æ„å˜é‡ç±»å‹" class="headerlink" title="Ctrl + Shift + F6 ï¼šé‡æ„å˜é‡ç±»å‹"></a>Ctrl + Shift + F6 ï¼šé‡æ„å˜é‡ç±»å‹</h3><h3 id="Ctrl-Alt-T-ï¼šä½¿ç”¨ä»£ç ç¯ç»•"><a href="#Ctrl-Alt-T-ï¼šä½¿ç”¨ä»£ç ç¯ç»•" class="headerlink" title="Ctrl + Alt + T ï¼šä½¿ç”¨ä»£ç ç¯ç»•"></a>Ctrl + Alt + T ï¼šä½¿ç”¨ä»£ç ç¯ç»•</h3><h3 id="Ctrl-F11-ï¼šæ·»åŠ ä¹¦ç­¾"><a href="#Ctrl-F11-ï¼šæ·»åŠ ä¹¦ç­¾" class="headerlink" title="Ctrl + F11 ï¼šæ·»åŠ ä¹¦ç­¾"></a>Ctrl + F11 ï¼šæ·»åŠ ä¹¦ç­¾</h3><p><img src="/2022/07/30/IDEA%E5%B8%B8%E7%94%A8%E5%BF%AB%E6%8D%B7%E9%94%AE/653.gif" alt="653"></p><h3 id="Ctrl-æ•°å­—-ï¼šå®šä½åˆ°å¯¹åº”æ•°å€¼çš„ä¹¦ç­¾ä½ç½®"><a href="#Ctrl-æ•°å­—-ï¼šå®šä½åˆ°å¯¹åº”æ•°å€¼çš„ä¹¦ç­¾ä½ç½®" class="headerlink" title="Ctrl + æ•°å­— ï¼šå®šä½åˆ°å¯¹åº”æ•°å€¼çš„ä¹¦ç­¾ä½ç½®"></a>Ctrl + æ•°å­— ï¼šå®šä½åˆ°å¯¹åº”æ•°å€¼çš„ä¹¦ç­¾ä½ç½®</h3><h1 id="æŸ¥æ‰¾æ“ä½œ"><a href="#æŸ¥æ‰¾æ“ä½œ" class="headerlink" title="æŸ¥æ‰¾æ“ä½œ"></a>æŸ¥æ‰¾æ“ä½œ</h1><h3 id="Ctrl-F12-ï¼šæ‰“å¼€æ–‡ä»¶ç»“æ„"><a href="#Ctrl-F12-ï¼šæ‰“å¼€æ–‡ä»¶ç»“æ„" class="headerlink" title="Ctrl + F12 ï¼šæ‰“å¼€æ–‡ä»¶ç»“æ„"></a>Ctrl + F12 ï¼šæ‰“å¼€æ–‡ä»¶ç»“æ„</h3><p><img src="/2022/07/30/IDEA%E5%B8%B8%E7%94%A8%E5%BF%AB%E6%8D%B7%E9%94%AE/655.gif" alt="655"></p><h3 id="Ctrl-H-ï¼šæŸ¥çœ‹ç±»ç»§æ‰¿å…³ç³»"><a href="#Ctrl-H-ï¼šæŸ¥çœ‹ç±»ç»§æ‰¿å…³ç³»" class="headerlink" title="Ctrl + H ï¼šæŸ¥çœ‹ç±»ç»§æ‰¿å…³ç³»"></a>Ctrl + H ï¼šæŸ¥çœ‹ç±»ç»§æ‰¿å…³ç³»</h3><p><img src="/2022/07/30/IDEA%E5%B8%B8%E7%94%A8%E5%BF%AB%E6%8D%B7%E9%94%AE/656.jpg" alt="656"></p>]]></content>
      
      
      
        <tags>
            
            <tag> IDEAå¿«æ·é”® </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2022å¹´8æœˆå­¦ä¹ è®¡åˆ’</title>
      <link href="/2022/07/28/study20228/"/>
      <url>/2022/07/28/study20228/</url>
      
        <content type="html"><![CDATA[<h3 id="æ¡†æ¶"><a href="#æ¡†æ¶" class="headerlink" title="æ¡†æ¶"></a>æ¡†æ¶</h3><ul><li><p><input checked disabled type="checkbox"> <a href="https://www.bilibili.com/video/BV1Fi4y1S7ix"><strong>SSMæ¡†æ¶++</strong></a></p><p><del>Springæ¡†æ¶</del>ã€<del>SpringMVCæ¡†æ¶</del>ã€<del>Mavené«˜çº§</del>ã€<del>SpringBootæ¡†æ¶</del>ã€<del>MyBatis-Plusæ¡†æ¶</del></p></li><li><p><input disabled type="checkbox"> <a href="https://www.bilibili.com/video/BV1P44y1N7QG"><strong>Springé«˜çº§</strong></a></p><p>å…¨é¢æ·±åº¦è®²è§£springåº•å±‚åŸç†</p></li><li><p><input disabled type="checkbox"> <a href="https://www.bilibili.com/video/BV1Qf4y1T7Hx?p=47&vd_source=fe89614ae0a1ab7631501658e6147ba8"><strong>mybatisåŸºç¡€å¤ä¹ </strong></a></p><p>å¤ä¹ </p></li><li><p><input disabled type="checkbox"> <a href="https://www.bilibili.com/video/BV1rE41197jR"><strong>MybatisPlus</strong></a></p><p>MyBatis çš„å¢å¼ºå·¥å…·</p></li><li><p><input disabled type="checkbox"> <a href="https://www.bilibili.com/video/BV15b4y1a7yG"><strong>SpringBoot</strong></a></p><p>springbooté›¶åŸºç¡€åˆ°é¡¹ç›®å®æˆ˜</p></li></ul><h3 id="ç®—æ³•ä¸æ•°æ®ç»“æ„"><a href="#ç®—æ³•ä¸æ•°æ®ç»“æ„" class="headerlink" title="ç®—æ³•ä¸æ•°æ®ç»“æ„"></a>ç®—æ³•ä¸æ•°æ®ç»“æ„</h3><p>â€‹å°ç å“¥</p>]]></content>
      
      
      
        <tags>
            
            <tag> å­¦ä¹ è®¡åˆ’ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æµ‹è¯•</title>
      <link href="/2022/07/28/test/"/>
      <url>/2022/07/28/test/</url>
      
        <content type="html"><![CDATA[<p>æœ¬é¡µé¢ä»…ç”¨äºæœ¬äººæµ‹è¯•</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Spring--day03</title>
      <link href="/2022/07/27/Spring_day3/"/>
      <url>/2022/07/27/Spring_day3/</url>
      
        <content type="html"><![CDATA[<p><strong>ä»Šæ—¥ç›®æ ‡</strong></p><blockquote><ul><li>ç†è§£å¹¶æŒæ¡AOPç›¸å…³æ¦‚å¿µ</li><li>èƒ½å¤Ÿè¯´å‡ºAOPçš„å·¥ä½œæµç¨‹</li><li>èƒ½è¿ç”¨AOPç›¸å…³çŸ¥è¯†å®Œæˆå¯¹åº”çš„æ¡ˆä¾‹ç¼–å†™</li><li>é‡ç‚¹æŒæ¡Springçš„å£°æ˜å¼äº‹åŠ¡ç®¡ç†</li></ul></blockquote><h2 id="1ï¼ŒAOPç®€ä»‹"><a href="#1ï¼ŒAOPç®€ä»‹" class="headerlink" title="1ï¼ŒAOPç®€ä»‹"></a>1ï¼ŒAOPç®€ä»‹</h2><p>å‰é¢æˆ‘ä»¬åœ¨ä»‹ç»Springçš„æ—¶å€™è¯´è¿‡ï¼ŒSpringæœ‰ä¸¤ä¸ªæ ¸å¿ƒçš„æ¦‚å¿µï¼Œä¸€ä¸ªæ˜¯<code>IOC/DI</code>ï¼Œä¸€ä¸ªæ˜¯<code>AOP</code>ã€‚</p><p>å‰é¢å·²ç»å¯¹<code>IOC/DI</code>è¿›è¡Œäº†ç³»ç»Ÿçš„å­¦ä¹ ï¼Œæ¥ä¸‹æ¥è¦å­¦ä¹ å®ƒçš„å¦ä¸€ä¸ªæ ¸å¿ƒå†…å®¹ï¼Œå°±æ˜¯AOPã€‚</p><p>å¯¹äºAOP,æˆ‘ä»¬å‰é¢æè¿‡ä¸€å¥è¯æ˜¯ï¼šAOPæ˜¯åœ¨ä¸æ”¹åŸæœ‰ä»£ç çš„å‰æä¸‹å¯¹å…¶è¿›è¡Œå¢å¼ºã€‚</p><p>å¯¹äºä¸‹é¢çš„å†…å®¹ï¼Œæˆ‘ä»¬ä¸»è¦å°±æ˜¯å›´ç»•ç€è¿™ä¸€å¥è¯è¿›è¡Œå±•å¼€å­¦ä¹ ï¼Œä¸»è¦å­¦ä¹ ä¸¤æ–¹é¢å†…å®¹<code>AOPæ ¸å¿ƒæ¦‚å¿µ</code>,<code>AOPä½œç”¨</code>:</p><h3 id="1-1-ä»€ä¹ˆæ˜¯AOP"><a href="#1-1-ä»€ä¹ˆæ˜¯AOP" class="headerlink" title="1.1 ä»€ä¹ˆæ˜¯AOP?"></a>1.1 ä»€ä¹ˆæ˜¯AOP?</h3><ul><li>AOP(Aspect Oriented Programming)é¢å‘åˆ‡é¢ç¼–ç¨‹ï¼Œä¸€ç§ç¼–ç¨‹èŒƒå¼ï¼ŒæŒ‡å¯¼å¼€å‘è€…å¦‚ä½•ç»„ç»‡ç¨‹åºç»“æ„ã€‚<ul><li>OOP(Object Oriented Programming)é¢å‘å¯¹è±¡ç¼–ç¨‹</li></ul></li></ul><p>æˆ‘ä»¬éƒ½çŸ¥é“OOPæ˜¯ä¸€ç§ç¼–ç¨‹æ€æƒ³ï¼Œé‚£ä¹ˆAOPä¹Ÿæ˜¯ä¸€ç§ç¼–ç¨‹æ€æƒ³ï¼Œç¼–ç¨‹æ€æƒ³ä¸»è¦çš„å†…å®¹å°±æ˜¯æŒ‡å¯¼ç¨‹åºå‘˜è¯¥å¦‚ä½•ç¼–å†™ç¨‹åºï¼Œæ‰€ä»¥å®ƒä»¬ä¸¤ä¸ªæ˜¯ä¸åŒçš„<code>ç¼–ç¨‹èŒƒå¼</code>ã€‚</p><h3 id="1-2-AOPä½œç”¨"><a href="#1-2-AOPä½œç”¨" class="headerlink" title="1.2 AOPä½œç”¨"></a>1.2 AOPä½œç”¨</h3><ul><li>ä½œç”¨:åœ¨ä¸æƒŠåŠ¨åŸå§‹è®¾è®¡çš„åŸºç¡€ä¸Šä¸ºå…¶è¿›è¡ŒåŠŸèƒ½å¢å¼ºï¼Œå‰é¢å’±ä»¬æœ‰æŠ€æœ¯å°±å¯ä»¥å®ç°è¿™æ ·çš„åŠŸèƒ½å³ä»£ç†æ¨¡å¼ã€‚</li></ul><p>å‰é¢å’±ä»¬æœ‰æŠ€æœ¯å°±å¯ä»¥å®ç°è¿™æ ·çš„åŠŸèƒ½å³<code>ä»£ç†æ¨¡å¼</code>ã€‚</p><h3 id="1-3-AOPæ ¸å¿ƒæ¦‚å¿µ"><a href="#1-3-AOPæ ¸å¿ƒæ¦‚å¿µ" class="headerlink" title="1.3 AOPæ ¸å¿ƒæ¦‚å¿µ"></a>1.3 AOPæ ¸å¿ƒæ¦‚å¿µ</h3><p>ä¸ºäº†èƒ½æ›´å¥½çš„ç†è§£AOPçš„ç›¸å…³æ¦‚å¿µï¼Œæˆ‘ä»¬å‡†å¤‡äº†ä¸€ä¸ªç¯å¢ƒï¼Œæ•´ä¸ªç¯å¢ƒçš„å†…å®¹æˆ‘ä»¬æš‚æ—¶å¯ä»¥ä¸ç”¨å…³æ³¨ï¼Œæœ€ä¸»è¦çš„ç±»ä¸º:<code>BookDaoImpl</code></p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookDaoImpl</span> <span class="keyword">implements</span> <span class="title class_">BookDao</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//è®°å½•ç¨‹åºå½“å‰æ‰§è¡Œæ‰§è¡Œï¼ˆå¼€å§‹æ—¶é—´ï¼‰</span></span><br><span class="line">        <span class="type">Long</span> <span class="variable">startTime</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">        <span class="comment">//ä¸šåŠ¡æ‰§è¡Œä¸‡æ¬¡</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>;i&lt;<span class="number">10000</span>;i++) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;book dao save ...&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//è®°å½•ç¨‹åºå½“å‰æ‰§è¡Œæ—¶é—´ï¼ˆç»“æŸæ—¶é—´ï¼‰</span></span><br><span class="line">        <span class="type">Long</span> <span class="variable">endTime</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">        <span class="comment">//è®¡ç®—æ—¶é—´å·®</span></span><br><span class="line">        <span class="type">Long</span> <span class="variable">totalTime</span> <span class="operator">=</span> endTime-startTime;</span><br><span class="line">        <span class="comment">//è¾“å‡ºä¿¡æ¯</span></span><br><span class="line">        System.out.println(<span class="string">&quot;æ‰§è¡Œä¸‡æ¬¡æ¶ˆè€—æ—¶é—´ï¼š&quot;</span> + totalTime + <span class="string">&quot;ms&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;book dao update ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">delete</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;book dao delete ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">select</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;book dao select ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»£ç çš„å†…å®¹ç›¸ä¿¡å¤§å®¶éƒ½èƒ½å¤Ÿè¯»æ‡‚ï¼Œå¯¹äº<code>save</code>æ–¹æ³•ä¸­æœ‰è®¡ç®—ä¸‡æ¬¡æ‰§è¡Œæ¶ˆè€—çš„æ—¶é—´ã€‚</p><p>å½“åœ¨Appç±»ä¸­ä»å®¹å™¨ä¸­è·å–bookDaoå¯¹è±¡åï¼Œåˆ†åˆ«æ‰§è¡Œå…¶<code>save</code>,<code>delete</code>,<code>update</code>å’Œ<code>select</code>æ–¹æ³•åä¼šæœ‰å¦‚ä¸‹çš„æ‰“å°ç»“æœ:</p><p><img src="/2022/07/27/Spring_day3/1630143927489.png" alt="1630143927489"></p><p>è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬å°±åº”è¯¥æœ‰äº›ç–‘é—®?</p><ul><li>å¯¹äºè®¡ç®—ä¸‡æ¬¡æ‰§è¡Œæ¶ˆè€—çš„æ—¶é—´åªæœ‰saveæ–¹æ³•æœ‰ï¼Œä¸ºä»€ä¹ˆdeleteå’Œupdateæ–¹æ³•ä¹Ÿä¼šæœ‰å‘¢?</li><li>deleteå’Œupdateæ–¹æ³•æœ‰ï¼Œé‚£ä»€ä¹ˆselectæ–¹æ³•ä¸ºä»€ä¹ˆåˆæ²¡æœ‰å‘¢?</li></ul><p>è¿™ä¸ªæ¡ˆä¾‹ä¸­å…¶å®å°±ä½¿ç”¨äº†Springçš„AOPï¼Œåœ¨ä¸æƒŠåŠ¨(æ”¹åŠ¨)åŸæœ‰è®¾è®¡(ä»£ç )çš„å‰æä¸‹ï¼Œæƒ³ç»™è°æ·»åŠ åŠŸèƒ½å°±ç»™è°æ·»åŠ ã€‚è¿™ä¸ªä¹Ÿå°±æ˜¯Springçš„ç†å¿µï¼š</p><ul><li>æ— å…¥ä¾µå¼&#x2F;æ— ä¾µå…¥å¼</li></ul><p>è¯´äº†è¿™ä¹ˆå¤šï¼ŒSpringåˆ°åº•æ˜¯å¦‚ä½•å®ç°çš„å‘¢?</p><p><img src="/2022/07/27/Spring_day3/1630144353462.png" alt="1630144353462"></p><p>(1)å‰é¢ä¸€ç›´åœ¨å¼ºè°ƒï¼ŒSpringçš„AOPæ˜¯å¯¹ä¸€ä¸ªç±»çš„æ–¹æ³•åœ¨ä¸è¿›è¡Œä»»ä½•ä¿®æ”¹çš„å‰æä¸‹å®ç°å¢å¼ºã€‚å¯¹äºä¸Šé¢çš„æ¡ˆä¾‹ä¸­BookServiceImplä¸­æœ‰<code>save</code>,<code>update</code>,<code>delete</code>å’Œ<code>select</code>æ–¹æ³•,è¿™äº›æ–¹æ³•æˆ‘ä»¬ç»™èµ·äº†ä¸€ä¸ªåå­—å«<strong>è¿æ¥ç‚¹</strong></p><p>(2)åœ¨BookServiceImplçš„å››ä¸ªæ–¹æ³•ä¸­ï¼Œ<code>update</code>å’Œ<code>delete</code>åªæœ‰æ‰“å°æ²¡æœ‰è®¡ç®—ä¸‡æ¬¡æ‰§è¡Œæ¶ˆè€—æ—¶é—´ï¼Œä½†æ˜¯åœ¨è¿è¡Œçš„æ—¶å€™å·²ç»æœ‰è¯¥åŠŸèƒ½ï¼Œé‚£ä¹Ÿå°±æ˜¯è¯´<code>update</code>å’Œ<code>delete</code>æ–¹æ³•éƒ½å·²ç»è¢«å¢å¼ºï¼Œæ‰€ä»¥å¯¹äºéœ€è¦å¢å¼ºçš„æ–¹æ³•æˆ‘ä»¬ç»™èµ·äº†ä¸€ä¸ªåå­—å«<strong>åˆ‡å…¥ç‚¹</strong></p><p>(3)æ‰§è¡ŒBookServiceImplçš„updateå’Œdeleteæ–¹æ³•çš„æ—¶å€™éƒ½è¢«æ·»åŠ äº†ä¸€ä¸ªè®¡ç®—ä¸‡æ¬¡æ‰§è¡Œæ¶ˆè€—æ—¶é—´çš„åŠŸèƒ½ï¼Œå°†è¿™ä¸ªåŠŸèƒ½æŠ½å–åˆ°ä¸€ä¸ªæ–¹æ³•ä¸­ï¼Œæ¢å¥è¯è¯´å°±æ˜¯å­˜æ”¾å…±æ€§åŠŸèƒ½çš„æ–¹æ³•ï¼Œæˆ‘ä»¬ç»™èµ·äº†ä¸ªåå­—å«<strong>é€šçŸ¥</strong></p><p>(4)é€šçŸ¥æ˜¯è¦å¢å¼ºçš„å†…å®¹ï¼Œä¼šæœ‰å¤šä¸ªï¼Œåˆ‡å…¥ç‚¹æ˜¯éœ€è¦è¢«å¢å¼ºçš„æ–¹æ³•ï¼Œä¹Ÿä¼šæœ‰å¤šä¸ªï¼Œé‚£å“ªä¸ªåˆ‡å…¥ç‚¹éœ€è¦æ·»åŠ å“ªä¸ªé€šçŸ¥ï¼Œå°±éœ€è¦æå‰å°†å®ƒä»¬ä¹‹é—´çš„å…³ç³»æè¿°æ¸…æ¥šï¼Œé‚£ä¹ˆå¯¹äºé€šçŸ¥å’Œåˆ‡å…¥ç‚¹ä¹‹é—´çš„å…³ç³»æè¿°ï¼Œæˆ‘ä»¬ç»™èµ·äº†ä¸ªåå­—å«<strong>åˆ‡é¢</strong></p><p>(5)é€šçŸ¥æ˜¯ä¸€ä¸ªæ–¹æ³•ï¼Œæ–¹æ³•ä¸èƒ½ç‹¬ç«‹å­˜åœ¨éœ€è¦è¢«å†™åœ¨ä¸€ä¸ªç±»ä¸­ï¼Œè¿™ä¸ªç±»æˆ‘ä»¬ä¹Ÿç»™èµ·äº†ä¸ªåå­—å«<strong>é€šçŸ¥ç±»</strong></p><p><strong>å°ç»“ï¼š</strong></p><ul><li>è¿æ¥ç‚¹(JoinPoint)ï¼šç¨‹åºæ‰§è¡Œè¿‡ç¨‹ä¸­çš„ä»»æ„ä½ç½®ï¼Œç²’åº¦ä¸ºæ‰§è¡Œæ–¹æ³•ã€æŠ›å‡ºå¼‚å¸¸ã€è®¾ç½®å˜é‡ç­‰<ul><li>åœ¨SpringAOPä¸­ï¼Œç†è§£ä¸ºæ–¹æ³•çš„æ‰§è¡Œ</li></ul></li><li>åˆ‡å…¥ç‚¹(Pointcut)ï¼šåŒ¹é…è¿æ¥ç‚¹çš„å¼å­ï¼ˆåˆ‡å…¥ç‚¹åœ¨è¿æ¥ç‚¹ä¸­ï¼‰<ul><li>åœ¨SpringAOPä¸­ï¼Œä¸€ä¸ªåˆ‡å…¥ç‚¹å¯ä»¥æè¿°ä¸€ä¸ªå…·ä½“æ–¹æ³•ï¼Œä¹Ÿå¯ä¹ŸåŒ¹é…å¤šä¸ªæ–¹æ³•<ul><li>ä¸€ä¸ªå…·ä½“çš„æ–¹æ³•:å¦‚com.itheima.daoåŒ…ä¸‹çš„BookDaoæ¥å£ä¸­çš„æ— å½¢å‚æ— è¿”å›å€¼çš„saveæ–¹æ³•</li><li>åŒ¹é…å¤šä¸ªæ–¹æ³•:æ‰€æœ‰çš„saveæ–¹æ³•ï¼Œæ‰€æœ‰çš„getå¼€å¤´çš„æ–¹æ³•ï¼Œæ‰€æœ‰ä»¥Daoç»“å°¾çš„æ¥å£ä¸­çš„ä»»æ„æ–¹æ³•ï¼Œæ‰€æœ‰å¸¦æœ‰ä¸€ä¸ªå‚æ•°çš„æ–¹æ³•</li></ul></li><li>è¿æ¥ç‚¹èŒƒå›´è¦æ¯”åˆ‡å…¥ç‚¹èŒƒå›´å¤§ï¼Œæ˜¯åˆ‡å…¥ç‚¹çš„æ–¹æ³•ä¹Ÿä¸€å®šæ˜¯è¿æ¥ç‚¹ï¼Œä½†æ˜¯æ˜¯è¿æ¥ç‚¹çš„æ–¹æ³•å°±ä¸ä¸€å®šè¦è¢«å¢å¼ºï¼Œæ‰€ä»¥å¯èƒ½ä¸æ˜¯åˆ‡å…¥ç‚¹ã€‚</li></ul></li><li>é€šçŸ¥(Advice)ï¼šåœ¨åˆ‡å…¥ç‚¹å¤„æ‰§è¡Œçš„æ“ä½œï¼Œä¹Ÿå°±æ˜¯å…±æ€§åŠŸèƒ½<ul><li>åœ¨SpringAOPä¸­ï¼ŒåŠŸèƒ½æœ€ç»ˆä»¥æ–¹æ³•çš„å½¢å¼å‘ˆç°</li></ul></li><li>é€šçŸ¥ç±»ï¼šå®šä¹‰é€šçŸ¥çš„ç±»</li><li>åˆ‡é¢(Aspect)ï¼šæè¿°é€šçŸ¥ä¸åˆ‡å…¥ç‚¹çš„å¯¹åº”å…³ç³»ã€‚</li></ul><h2 id="2ï¼ŒAOPå…¥é—¨æ¡ˆä¾‹"><a href="#2ï¼ŒAOPå…¥é—¨æ¡ˆä¾‹" class="headerlink" title="2ï¼ŒAOPå…¥é—¨æ¡ˆä¾‹"></a>2ï¼ŒAOPå…¥é—¨æ¡ˆä¾‹</h2><h3 id="2-1-éœ€æ±‚åˆ†æ"><a href="#2-1-éœ€æ±‚åˆ†æ" class="headerlink" title="2.1 éœ€æ±‚åˆ†æ"></a>2.1 éœ€æ±‚åˆ†æ</h3><p>æ¡ˆä¾‹è®¾å®šï¼šæµ‹ç®—æ¥å£æ‰§è¡Œæ•ˆç‡ï¼Œä½†æ˜¯è¿™ä¸ªæ¡ˆä¾‹ç¨å¾®å¤æ‚äº†ç‚¹ï¼Œæˆ‘ä»¬å¯¹å…¶è¿›è¡Œç®€åŒ–ã€‚</p><p>ç®€åŒ–è®¾å®šï¼šåœ¨æ–¹æ³•æ‰§è¡Œå‰è¾“å‡ºå½“å‰ç³»ç»Ÿæ—¶é—´ã€‚</p><p>å¯¹äºSpringAOPçš„å¼€å‘æœ‰ä¸¤ç§æ–¹å¼ï¼ŒXML å’Œ &#x3D;&#x3D;æ³¨è§£&#x3D;&#x3D;ï¼Œæˆ‘ä»¬ä½¿ç”¨å“ªä¸ªå‘¢?</p><p>å› ä¸ºç°åœ¨æ³¨è§£ä½¿ç”¨çš„æ¯”è¾ƒå¤šï¼Œæ‰€ä»¥æœ¬æ¬¡è¯¾ç¨‹å°±é‡‡ç”¨æ³¨è§£å®ŒæˆAOPçš„å¼€å‘ã€‚</p><p>æ€»ç»“éœ€æ±‚ä¸º:ä½¿ç”¨SpringAOPçš„æ³¨è§£æ–¹å¼å®Œæˆåœ¨æ–¹æ³•æ‰§è¡Œçš„å‰æ‰“å°å‡ºå½“å‰ç³»ç»Ÿæ—¶é—´ã€‚</p><h3 id="2-2-æ€è·¯åˆ†æ"><a href="#2-2-æ€è·¯åˆ†æ" class="headerlink" title="2.2 æ€è·¯åˆ†æ"></a>2.2 æ€è·¯åˆ†æ</h3><p>éœ€æ±‚æ˜ç¡®åï¼Œå…·ä½“è¯¥å¦‚ä½•å®ç°ï¼Œéƒ½æœ‰å“ªäº›æ­¥éª¤ï¼Œæˆ‘ä»¬å…ˆæ¥åˆ†æä¸‹:</p><blockquote><p>1.å¯¼å…¥åæ ‡(pom.xml)</p><p>2.åˆ¶ä½œè¿æ¥ç‚¹(åŸå§‹æ“ä½œï¼ŒDaoæ¥å£ä¸å®ç°ç±»)</p><p>3.åˆ¶ä½œå…±æ€§åŠŸèƒ½(é€šçŸ¥ç±»ä¸é€šçŸ¥)</p><p>4.å®šä¹‰åˆ‡å…¥ç‚¹</p><p>5.ç»‘å®šåˆ‡å…¥ç‚¹ä¸é€šçŸ¥å…³ç³»(åˆ‡é¢)</p></blockquote><h3 id="2-3-ç¯å¢ƒå‡†å¤‡"><a href="#2-3-ç¯å¢ƒå‡†å¤‡" class="headerlink" title="2.3 ç¯å¢ƒå‡†å¤‡"></a>2.3 ç¯å¢ƒå‡†å¤‡</h3><ul><li><p>åˆ›å»ºä¸€ä¸ªMavené¡¹ç›®</p></li><li><p>pom.xmlæ·»åŠ Springä¾èµ–</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.10.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>æ·»åŠ BookDaoå’ŒBookDaoImplç±»</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">BookDao</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookDaoImpl</span> <span class="keyword">implements</span> <span class="title class_">BookDao</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(System.currentTimeMillis());</span><br><span class="line">        System.out.println(<span class="string">&quot;book dao save ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;book dao update ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>åˆ›å»ºSpringçš„é…ç½®ç±»</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ComponentScan(&quot;com.itheima&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringConfig</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>ç¼–å†™Appè¿è¡Œç±»</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">App</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">ApplicationContext</span> <span class="variable">ctx</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AnnotationConfigApplicationContext</span>(SpringConfig.class);</span><br><span class="line">        <span class="type">BookDao</span> <span class="variable">bookDao</span> <span class="operator">=</span> ctx.getBean(BookDao.class);</span><br><span class="line">        bookDao.save();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p>æœ€ç»ˆåˆ›å»ºå¥½çš„é¡¹ç›®ç»“æ„å¦‚ä¸‹:</p><p><img src="/2022/07/27/Spring_day3/1630167092142.png" alt="1630167092142"></p><p><strong>è¯´æ˜:</strong></p><ul><li>ç›®å‰æ‰“å°saveæ–¹æ³•çš„æ—¶å€™ï¼Œå› ä¸ºæ–¹æ³•ä¸­æœ‰æ‰“å°ç³»ç»Ÿæ—¶é—´ï¼Œæ‰€ä»¥è¿è¡Œçš„æ—¶å€™æ˜¯å¯ä»¥çœ‹åˆ°ç³»ç»Ÿæ—¶é—´</li><li>å¯¹äºupdateæ–¹æ³•æ¥è¯´ï¼Œå°±æ²¡æœ‰è¯¥åŠŸèƒ½</li><li>æˆ‘ä»¬è¦ä½¿ç”¨SpringAOPçš„æ–¹å¼åœ¨ä¸æ”¹å˜updateæ–¹æ³•çš„å‰æä¸‹è®©å…¶å…·æœ‰æ‰“å°ç³»ç»Ÿæ—¶é—´çš„åŠŸèƒ½ã€‚</li></ul><h3 id="2-4-AOPå®ç°æ­¥éª¤"><a href="#2-4-AOPå®ç°æ­¥éª¤" class="headerlink" title="2.4 AOPå®ç°æ­¥éª¤"></a>2.4 AOPå®ç°æ­¥éª¤</h3><h4 id="æ­¥éª¤1-æ·»åŠ ä¾èµ–"><a href="#æ­¥éª¤1-æ·»åŠ ä¾èµ–" class="headerlink" title="æ­¥éª¤1:æ·»åŠ ä¾èµ–"></a>æ­¥éª¤1:æ·»åŠ ä¾èµ–</h4><p>pom.xml</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.aspectj<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>aspectjweaver<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.9.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="/2022/07/27/Spring_day3/1630146885493.png" alt="1630146885493"></p><ul><li>å› ä¸º<code>spring-context</code>ä¸­å·²ç»å¯¼å…¥äº†<code>spring-aop</code>,æ‰€ä»¥ä¸éœ€è¦å†å•ç‹¬å¯¼å…¥<code>spring-aop</code></li><li>å¯¼å…¥AspectJçš„jaråŒ…,AspectJæ˜¯AOPæ€æƒ³çš„ä¸€ä¸ªå…·ä½“å®ç°ï¼ŒSpringæœ‰è‡ªå·±çš„AOPå®ç°ï¼Œä½†æ˜¯ç›¸æ¯”äºAspectJæ¥è¯´æ¯”è¾ƒéº»çƒ¦ï¼Œæ‰€ä»¥æˆ‘ä»¬ç›´æ¥é‡‡ç”¨Springæ•´åˆApsectJçš„æ–¹å¼è¿›è¡ŒAOPå¼€å‘ã€‚</li></ul><h4 id="æ­¥éª¤2-å®šä¹‰æ¥å£ä¸å®ç°ç±»"><a href="#æ­¥éª¤2-å®šä¹‰æ¥å£ä¸å®ç°ç±»" class="headerlink" title="æ­¥éª¤2:å®šä¹‰æ¥å£ä¸å®ç°ç±»"></a>æ­¥éª¤2:å®šä¹‰æ¥å£ä¸å®ç°ç±»</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ç¯å¢ƒå‡†å¤‡çš„æ—¶å€™ï¼ŒBookDaoImplå·²ç»å‡†å¤‡å¥½ï¼Œä¸éœ€è¦åšä»»ä½•ä¿®æ”¹</span><br></pre></td></tr></table></figure><h4 id="æ­¥éª¤3-å®šä¹‰é€šçŸ¥ç±»å’Œé€šçŸ¥"><a href="#æ­¥éª¤3-å®šä¹‰é€šçŸ¥ç±»å’Œé€šçŸ¥" class="headerlink" title="æ­¥éª¤3:å®šä¹‰é€šçŸ¥ç±»å’Œé€šçŸ¥"></a>æ­¥éª¤3:å®šä¹‰é€šçŸ¥ç±»å’Œé€šçŸ¥</h4><p>é€šçŸ¥å°±æ˜¯å°†å…±æ€§åŠŸèƒ½æŠ½å–å‡ºæ¥åå½¢æˆçš„æ–¹æ³•ï¼Œå…±æ€§åŠŸèƒ½æŒ‡çš„å°±æ˜¯å½“å‰ç³»ç»Ÿæ—¶é—´çš„æ‰“å°ã€‚</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyAdvice</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(System.currentTimeMillis());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç±»åå’Œæ–¹æ³•åæ²¡æœ‰è¦æ±‚ï¼Œå¯ä»¥ä»»æ„ã€‚</p><h4 id="æ­¥éª¤4-å®šä¹‰åˆ‡å…¥ç‚¹"><a href="#æ­¥éª¤4-å®šä¹‰åˆ‡å…¥ç‚¹" class="headerlink" title="æ­¥éª¤4:å®šä¹‰åˆ‡å…¥ç‚¹"></a>æ­¥éª¤4:å®šä¹‰åˆ‡å…¥ç‚¹</h4><p>BookDaoImplä¸­æœ‰ä¸¤ä¸ªæ–¹æ³•ï¼Œåˆ†åˆ«æ˜¯saveå’Œupdateï¼Œæˆ‘ä»¬è¦å¢å¼ºçš„æ˜¯updateæ–¹æ³•ï¼Œè¯¥å¦‚ä½•å®šä¹‰å‘¢?</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyAdvice</span> &#123;</span><br><span class="line">    <span class="meta">@Pointcut(&quot;execution(void com.itheima.dao.BookDao.update())&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">pt</span><span class="params">()</span>&#123;&#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(System.currentTimeMillis());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>è¯´æ˜:</strong></p><ul><li>åˆ‡å…¥ç‚¹å®šä¹‰ä¾æ‰˜ä¸€ä¸ªä¸å…·æœ‰å®é™…æ„ä¹‰çš„æ–¹æ³•è¿›è¡Œï¼Œå³æ— å‚æ•°ã€æ— è¿”å›å€¼ã€æ–¹æ³•ä½“æ— å®é™…é€»è¾‘ã€‚</li><li>executionåŠåé¢ç¼–å†™çš„å†…å®¹ï¼Œåé¢ä¼šæœ‰ç« èŠ‚ä¸“é—¨å»å­¦ä¹ ã€‚</li></ul><h4 id="æ­¥éª¤5-åˆ¶ä½œåˆ‡é¢"><a href="#æ­¥éª¤5-åˆ¶ä½œåˆ‡é¢" class="headerlink" title="æ­¥éª¤5:åˆ¶ä½œåˆ‡é¢"></a>æ­¥éª¤5:åˆ¶ä½œåˆ‡é¢</h4><p>åˆ‡é¢æ˜¯ç”¨æ¥æè¿°é€šçŸ¥å’Œåˆ‡å…¥ç‚¹ä¹‹é—´çš„å…³ç³»ï¼Œå¦‚ä½•è¿›è¡Œå…³ç³»çš„ç»‘å®š?</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyAdvice</span> &#123;</span><br><span class="line">    <span class="meta">@Pointcut(&quot;execution(void com.itheima.dao.BookDao.update())&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">pt</span><span class="params">()</span>&#123;&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Before(&quot;pt()&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(System.currentTimeMillis());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç»‘å®šåˆ‡å…¥ç‚¹ä¸é€šçŸ¥å…³ç³»ï¼Œå¹¶æŒ‡å®šé€šçŸ¥æ·»åŠ åˆ°åŸå§‹è¿æ¥ç‚¹çš„å…·ä½“æ‰§è¡Œä½ç½®</p><p><img src="/2022/07/27/Spring_day3/1630148447689.png" alt="1630148447689"></p><p><strong>è¯´æ˜:</strong>@Beforeç¿»è¯‘è¿‡æ¥æ˜¯ä¹‹å‰ï¼Œä¹Ÿå°±æ˜¯è¯´é€šçŸ¥ä¼šåœ¨åˆ‡å…¥ç‚¹æ–¹æ³•æ‰§è¡Œä¹‹å‰æ‰§è¡Œï¼Œé™¤æ­¤ä¹‹å‰è¿˜æœ‰å…¶ä»–å››ç§ç±»å‹ï¼Œåé¢ä¼šè®²ã€‚</p><h4 id="æ­¥éª¤6-å°†é€šçŸ¥ç±»é…ç»™å®¹å™¨å¹¶æ ‡è¯†å…¶ä¸ºåˆ‡é¢ç±»"><a href="#æ­¥éª¤6-å°†é€šçŸ¥ç±»é…ç»™å®¹å™¨å¹¶æ ‡è¯†å…¶ä¸ºåˆ‡é¢ç±»" class="headerlink" title="æ­¥éª¤6:å°†é€šçŸ¥ç±»é…ç»™å®¹å™¨å¹¶æ ‡è¯†å…¶ä¸ºåˆ‡é¢ç±»"></a>æ­¥éª¤6:å°†é€šçŸ¥ç±»é…ç»™å®¹å™¨å¹¶æ ‡è¯†å…¶ä¸ºåˆ‡é¢ç±»</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyAdvice</span> &#123;</span><br><span class="line">    <span class="meta">@Pointcut(&quot;execution(void com.itheima.dao.BookDao.update())&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">pt</span><span class="params">()</span>&#123;&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Before(&quot;pt()&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(System.currentTimeMillis());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ­¥éª¤7-å¼€å¯æ³¨è§£æ ¼å¼AOPåŠŸèƒ½"><a href="#æ­¥éª¤7-å¼€å¯æ³¨è§£æ ¼å¼AOPåŠŸèƒ½" class="headerlink" title="æ­¥éª¤7:å¼€å¯æ³¨è§£æ ¼å¼AOPåŠŸèƒ½"></a>æ­¥éª¤7:å¼€å¯æ³¨è§£æ ¼å¼AOPåŠŸèƒ½</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ComponentScan(&quot;com.itheima&quot;)</span></span><br><span class="line"><span class="meta">@EnableAspectJAutoProxy</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringConfig</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ­¥éª¤8-è¿è¡Œç¨‹åº"><a href="#æ­¥éª¤8-è¿è¡Œç¨‹åº" class="headerlink" title="æ­¥éª¤8:è¿è¡Œç¨‹åº"></a>æ­¥éª¤8:è¿è¡Œç¨‹åº</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">App</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">ApplicationContext</span> <span class="variable">ctx</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AnnotationConfigApplicationContext</span>(SpringConfig.class);</span><br><span class="line">        <span class="type">BookDao</span> <span class="variable">bookDao</span> <span class="operator">=</span> ctx.getBean(BookDao.class);</span><br><span class="line">        bookDao.update();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>çœ‹åˆ°åœ¨æ‰§è¡Œupdateæ–¹æ³•ä¹‹å‰æ‰“å°äº†ç³»ç»Ÿæ—¶é—´æˆ³ï¼Œè¯´æ˜å¯¹åŸå§‹æ–¹æ³•è¿›è¡Œäº†å¢å¼ºï¼ŒAOPç¼–ç¨‹æˆåŠŸã€‚</p><p><img src="/2022/07/27/Spring_day3/1630147945888.png" alt="1630147945888"></p><h4 id="çŸ¥è¯†ç‚¹1ï¼š-EnableAspectJAutoProxy"><a href="#çŸ¥è¯†ç‚¹1ï¼š-EnableAspectJAutoProxy" class="headerlink" title="çŸ¥è¯†ç‚¹1ï¼š@EnableAspectJAutoProxy"></a>çŸ¥è¯†ç‚¹1ï¼š@EnableAspectJAutoProxy</h4><table><thead><tr><th>åç§°</th><th>@EnableAspectJAutoProxy</th></tr></thead><tbody><tr><td>ç±»å‹</td><td>é…ç½®ç±»æ³¨è§£</td></tr><tr><td>ä½ç½®</td><td>é…ç½®ç±»å®šä¹‰ä¸Šæ–¹</td></tr><tr><td>ä½œç”¨</td><td>å¼€å¯æ³¨è§£æ ¼å¼AOPåŠŸèƒ½</td></tr></tbody></table><h4 id="çŸ¥è¯†ç‚¹2ï¼š-Aspect"><a href="#çŸ¥è¯†ç‚¹2ï¼š-Aspect" class="headerlink" title="çŸ¥è¯†ç‚¹2ï¼š@Aspect"></a>çŸ¥è¯†ç‚¹2ï¼š@Aspect</h4><table><thead><tr><th>åç§°</th><th>@Aspect</th></tr></thead><tbody><tr><td>ç±»å‹</td><td>ç±»æ³¨è§£</td></tr><tr><td>ä½ç½®</td><td>åˆ‡é¢ç±»å®šä¹‰ä¸Šæ–¹</td></tr><tr><td>ä½œç”¨</td><td>è®¾ç½®å½“å‰ç±»ä¸ºAOPåˆ‡é¢ç±»</td></tr></tbody></table><h4 id="çŸ¥è¯†ç‚¹3ï¼š-Pointcut"><a href="#çŸ¥è¯†ç‚¹3ï¼š-Pointcut" class="headerlink" title="çŸ¥è¯†ç‚¹3ï¼š@Pointcut"></a>çŸ¥è¯†ç‚¹3ï¼š@Pointcut</h4><table><thead><tr><th>åç§°</th><th>@Pointcut</th></tr></thead><tbody><tr><td>ç±»å‹</td><td>æ–¹æ³•æ³¨è§£</td></tr><tr><td>ä½ç½®</td><td>åˆ‡å…¥ç‚¹æ–¹æ³•å®šä¹‰ä¸Šæ–¹</td></tr><tr><td>ä½œç”¨</td><td>è®¾ç½®åˆ‡å…¥ç‚¹æ–¹æ³•</td></tr><tr><td>å±æ€§</td><td>valueï¼ˆé»˜è®¤ï¼‰ï¼šåˆ‡å…¥ç‚¹è¡¨è¾¾å¼</td></tr></tbody></table><h4 id="çŸ¥è¯†ç‚¹4ï¼š-Before"><a href="#çŸ¥è¯†ç‚¹4ï¼š-Before" class="headerlink" title="çŸ¥è¯†ç‚¹4ï¼š@Before"></a>çŸ¥è¯†ç‚¹4ï¼š@Before</h4><table><thead><tr><th>åç§°</th><th>@Before</th></tr></thead><tbody><tr><td>ç±»å‹</td><td>æ–¹æ³•æ³¨è§£</td></tr><tr><td>ä½ç½®</td><td>é€šçŸ¥æ–¹æ³•å®šä¹‰ä¸Šæ–¹</td></tr><tr><td>ä½œç”¨</td><td>è®¾ç½®å½“å‰é€šçŸ¥æ–¹æ³•ä¸åˆ‡å…¥ç‚¹ä¹‹é—´çš„ç»‘å®šå…³ç³»ï¼Œå½“å‰é€šçŸ¥æ–¹æ³•åœ¨åŸå§‹åˆ‡å…¥ç‚¹æ–¹æ³•å‰è¿è¡Œ</td></tr></tbody></table><h2 id="3ï¼ŒAOPå·¥ä½œæµç¨‹"><a href="#3ï¼ŒAOPå·¥ä½œæµç¨‹" class="headerlink" title="3ï¼ŒAOPå·¥ä½œæµç¨‹"></a>3ï¼ŒAOPå·¥ä½œæµç¨‹</h2><p>AOPçš„å…¥é—¨æ¡ˆä¾‹å·²ç»å®Œæˆï¼Œå¯¹äºåˆšæ‰æ¡ˆä¾‹çš„æ‰§è¡Œè¿‡ç¨‹ï¼Œæˆ‘ä»¬å°±å¾—æ¥åˆ†æåˆ†æï¼Œè¿™ä¸€èŠ‚æˆ‘ä»¬ä¸»è¦è®²è§£ä¸¤ä¸ªçŸ¥è¯†ç‚¹:<code>AOPå·¥ä½œæµç¨‹</code>å’Œ<code>AOPæ ¸å¿ƒæ¦‚å¿µ</code>ã€‚å…¶ä¸­æ ¸å¿ƒæ¦‚å¿µæ˜¯å¯¹å‰é¢æ ¸å¿ƒæ¦‚å¿µçš„è¡¥å……ã€‚</p><h3 id="3-1-AOPå·¥ä½œæµç¨‹"><a href="#3-1-AOPå·¥ä½œæµç¨‹" class="headerlink" title="3.1 AOPå·¥ä½œæµç¨‹"></a>3.1 AOPå·¥ä½œæµç¨‹</h3><p>ç”±äºAOPæ˜¯åŸºäºSpringå®¹å™¨ç®¡ç†çš„beanåšçš„å¢å¼ºï¼Œæ‰€ä»¥æ•´ä¸ªå·¥ä½œè¿‡ç¨‹éœ€è¦ä»SpringåŠ è½½beanè¯´èµ·:</p><h4 id="æµç¨‹1-Springå®¹å™¨å¯åŠ¨"><a href="#æµç¨‹1-Springå®¹å™¨å¯åŠ¨" class="headerlink" title="æµç¨‹1:Springå®¹å™¨å¯åŠ¨"></a>æµç¨‹1:Springå®¹å™¨å¯åŠ¨</h4><ul><li>å®¹å™¨å¯åŠ¨å°±éœ€è¦å»åŠ è½½bean,å“ªäº›ç±»éœ€è¦è¢«åŠ è½½å‘¢?</li><li>éœ€è¦è¢«å¢å¼ºçš„ç±»ï¼Œå¦‚:BookServiceImpl</li><li>é€šçŸ¥ç±»ï¼Œå¦‚:MyAdvice</li><li>æ³¨æ„æ­¤æ—¶beanå¯¹è±¡è¿˜æ²¡æœ‰åˆ›å»ºæˆåŠŸ</li></ul><h4 id="æµç¨‹2-è¯»å–æ‰€æœ‰åˆ‡é¢é…ç½®ä¸­çš„åˆ‡å…¥ç‚¹"><a href="#æµç¨‹2-è¯»å–æ‰€æœ‰åˆ‡é¢é…ç½®ä¸­çš„åˆ‡å…¥ç‚¹" class="headerlink" title="æµç¨‹2:è¯»å–æ‰€æœ‰åˆ‡é¢é…ç½®ä¸­çš„åˆ‡å…¥ç‚¹"></a>æµç¨‹2:è¯»å–æ‰€æœ‰åˆ‡é¢é…ç½®ä¸­çš„åˆ‡å…¥ç‚¹</h4><p><img src="/2022/07/27/Spring_day3/1630151682428.png" alt="1630151682428"></p><ul><li>ä¸Šé¢è¿™ä¸ªä¾‹å­ä¸­æœ‰ä¸¤ä¸ªåˆ‡å…¥ç‚¹çš„é…ç½®ï¼Œä½†æ˜¯ç¬¬ä¸€ä¸ª<code>ptx()</code>å¹¶æ²¡æœ‰è¢«ä½¿ç”¨ï¼Œæ‰€ä»¥ä¸ä¼šè¢«è¯»å–ã€‚</li></ul><h4 id="æµç¨‹3-åˆå§‹åŒ–beanï¼Œ"><a href="#æµç¨‹3-åˆå§‹åŒ–beanï¼Œ" class="headerlink" title="æµç¨‹3:åˆå§‹åŒ–beanï¼Œ"></a>æµç¨‹3:åˆå§‹åŒ–beanï¼Œ</h4><p>åˆ¤å®šbeanå¯¹åº”çš„ç±»ä¸­çš„æ–¹æ³•æ˜¯å¦åŒ¹é…åˆ°ä»»æ„åˆ‡å…¥ç‚¹</p><ul><li><p>æ³¨æ„ç¬¬1æ­¥åœ¨å®¹å™¨å¯åŠ¨çš„æ—¶å€™ï¼Œbeanå¯¹è±¡è¿˜æ²¡æœ‰è¢«åˆ›å»ºæˆåŠŸã€‚</p></li><li><p>è¦è¢«å®ä¾‹åŒ–beanå¯¹è±¡çš„ç±»ä¸­çš„æ–¹æ³•å’Œåˆ‡å…¥ç‚¹è¿›è¡ŒåŒ¹é…</p><p><img src="/2022/07/27/Spring_day3/1630152538083.png" alt="1630152538083"></p><ul><li>åŒ¹é…å¤±è´¥ï¼Œåˆ›å»ºåŸå§‹å¯¹è±¡,å¦‚<code>UserDao</code><ul><li>åŒ¹é…å¤±è´¥è¯´æ˜ä¸éœ€è¦å¢å¼ºï¼Œç›´æ¥è°ƒç”¨åŸå§‹å¯¹è±¡çš„æ–¹æ³•å³å¯ã€‚</li></ul></li><li>åŒ¹é…æˆåŠŸï¼Œåˆ›å»ºåŸå§‹å¯¹è±¡ï¼ˆ&#x3D;&#x3D;ç›®æ ‡å¯¹è±¡&#x3D;&#x3D;ï¼‰çš„&#x3D;&#x3D;ä»£ç†&#x3D;&#x3D;å¯¹è±¡,å¦‚:<code>BookDao</code><ul><li>åŒ¹é…æˆåŠŸè¯´æ˜éœ€è¦å¯¹å…¶è¿›è¡Œå¢å¼º</li><li>å¯¹å“ªä¸ªç±»åšå¢å¼ºï¼Œè¿™ä¸ªç±»å¯¹åº”çš„å¯¹è±¡å°±å«åšç›®æ ‡å¯¹è±¡</li><li>å› ä¸ºè¦å¯¹ç›®æ ‡å¯¹è±¡è¿›è¡ŒåŠŸèƒ½å¢å¼ºï¼Œè€Œé‡‡ç”¨çš„æŠ€æœ¯æ˜¯åŠ¨æ€ä»£ç†ï¼Œæ‰€ä»¥ä¼šä¸ºå…¶åˆ›å»ºä¸€ä¸ªä»£ç†å¯¹è±¡</li><li>æœ€ç»ˆè¿è¡Œçš„æ˜¯ä»£ç†å¯¹è±¡çš„æ–¹æ³•ï¼Œåœ¨è¯¥æ–¹æ³•ä¸­ä¼šå¯¹åŸå§‹æ–¹æ³•è¿›è¡ŒåŠŸèƒ½å¢å¼º</li></ul></li></ul></li></ul><h4 id="æµç¨‹4-è·å–beanæ‰§è¡Œæ–¹æ³•"><a href="#æµç¨‹4-è·å–beanæ‰§è¡Œæ–¹æ³•" class="headerlink" title="æµç¨‹4:è·å–beanæ‰§è¡Œæ–¹æ³•"></a>æµç¨‹4:è·å–beanæ‰§è¡Œæ–¹æ³•</h4><ul><li>è·å–çš„beanæ˜¯åŸå§‹å¯¹è±¡æ—¶ï¼Œè°ƒç”¨æ–¹æ³•å¹¶æ‰§è¡Œï¼Œå®Œæˆæ“ä½œ</li><li>è·å–çš„beanæ˜¯ä»£ç†å¯¹è±¡æ—¶ï¼Œæ ¹æ®ä»£ç†å¯¹è±¡çš„è¿è¡Œæ¨¡å¼è¿è¡ŒåŸå§‹æ–¹æ³•ä¸å¢å¼ºçš„å†…å®¹ï¼Œå®Œæˆæ“ä½œ</li></ul><h4 id="éªŒè¯å®¹å™¨ä¸­æ˜¯å¦ä¸ºä»£ç†å¯¹è±¡"><a href="#éªŒè¯å®¹å™¨ä¸­æ˜¯å¦ä¸ºä»£ç†å¯¹è±¡" class="headerlink" title="éªŒè¯å®¹å™¨ä¸­æ˜¯å¦ä¸ºä»£ç†å¯¹è±¡"></a>éªŒè¯å®¹å™¨ä¸­æ˜¯å¦ä¸ºä»£ç†å¯¹è±¡</h4><p>ä¸ºäº†éªŒè¯IOCå®¹å™¨ä¸­åˆ›å»ºçš„å¯¹è±¡å’Œæˆ‘ä»¬åˆšæ‰æ‰€è¯´çš„ç»“è®ºæ˜¯å¦ä¸€è‡´ï¼Œé¦–å…ˆå…ˆæŠŠç»“è®ºç†å‡ºæ¥:</p><ul><li>å¦‚æœç›®æ ‡å¯¹è±¡ä¸­çš„æ–¹æ³•ä¼šè¢«å¢å¼ºï¼Œé‚£ä¹ˆå®¹å™¨ä¸­å°†å­˜å…¥çš„æ˜¯ç›®æ ‡å¯¹è±¡çš„ä»£ç†å¯¹è±¡</li><li>å¦‚æœç›®æ ‡å¯¹è±¡ä¸­çš„æ–¹æ³•ä¸è¢«å¢å¼ºï¼Œé‚£ä¹ˆå®¹å™¨ä¸­å°†å­˜å…¥çš„æ˜¯ç›®æ ‡å¯¹è±¡æœ¬èº«ã€‚</li></ul><h5 id="éªŒè¯æ€è·¯"><a href="#éªŒè¯æ€è·¯" class="headerlink" title="éªŒè¯æ€è·¯"></a>éªŒè¯æ€è·¯</h5><blockquote><p>1.è¦æ‰§è¡Œçš„æ–¹æ³•ï¼Œä¸è¢«å®šä¹‰çš„åˆ‡å…¥ç‚¹åŒ…å«ï¼Œå³ä¸è¦å¢å¼ºï¼Œæ‰“å°å½“å‰ç±»çš„getClass()æ–¹æ³•</p><p>2.è¦æ‰§è¡Œçš„æ–¹æ³•ï¼Œè¢«å®šä¹‰çš„åˆ‡å…¥ç‚¹åŒ…å«ï¼Œå³è¦å¢å¼ºï¼Œæ‰“å°å‡ºå½“å‰ç±»çš„getClass()æ–¹æ³•</p><p>3.è§‚å¯Ÿä¸¤æ¬¡æ‰“å°çš„ç»“æœ</p></blockquote><h5 id="æ­¥éª¤1-ä¿®æ”¹Appç±»-è·å–ç±»çš„ç±»å‹"><a href="#æ­¥éª¤1-ä¿®æ”¹Appç±»-è·å–ç±»çš„ç±»å‹" class="headerlink" title="æ­¥éª¤1:ä¿®æ”¹Appç±»,è·å–ç±»çš„ç±»å‹"></a>æ­¥éª¤1:ä¿®æ”¹Appç±»,è·å–ç±»çš„ç±»å‹</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">App</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">ApplicationContext</span> <span class="variable">ctx</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AnnotationConfigApplicationContext</span>(SpringConfig.class);</span><br><span class="line">        <span class="type">BookDao</span> <span class="variable">bookDao</span> <span class="operator">=</span> ctx.getBean(BookDao.class);</span><br><span class="line">        System.out.println(bookDao);</span><br><span class="line">        System.out.println(bookDao.getClass());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="æ­¥éª¤2-ä¿®æ”¹MyAdviceç±»ï¼Œä¸å¢å¼º"><a href="#æ­¥éª¤2-ä¿®æ”¹MyAdviceç±»ï¼Œä¸å¢å¼º" class="headerlink" title="æ­¥éª¤2:ä¿®æ”¹MyAdviceç±»ï¼Œä¸å¢å¼º"></a>æ­¥éª¤2:ä¿®æ”¹MyAdviceç±»ï¼Œä¸å¢å¼º</h5><p>å› ä¸ºå®šä¹‰çš„åˆ‡å…¥ç‚¹ä¸­ï¼Œè¢«ä¿®æ”¹æˆ<code>update1</code>,æ‰€ä»¥BookDaoä¸­çš„updateæ–¹æ³•åœ¨æ‰§è¡Œçš„æ—¶å€™ï¼Œå°±ä¸ä¼šè¢«å¢å¼ºï¼Œ</p><p>æ‰€ä»¥å®¹å™¨ä¸­çš„å¯¹è±¡åº”è¯¥æ˜¯ç›®æ ‡å¯¹è±¡æœ¬èº«ã€‚</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyAdvice</span> &#123;</span><br><span class="line">    <span class="meta">@Pointcut(&quot;execution(void com.itheima.dao.BookDao.update1())&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">pt</span><span class="params">()</span>&#123;&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Before(&quot;pt()&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(System.currentTimeMillis());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="æ­¥éª¤3-è¿è¡Œç¨‹åº"><a href="#æ­¥éª¤3-è¿è¡Œç¨‹åº" class="headerlink" title="æ­¥éª¤3:è¿è¡Œç¨‹åº"></a>æ­¥éª¤3:è¿è¡Œç¨‹åº</h5><p><img src="/2022/07/27/Spring_day3/1630154495165.png" alt="1630154495165"></p><h5 id="æ­¥éª¤4-ä¿®æ”¹MyAdviceç±»ï¼Œå¢å¼º"><a href="#æ­¥éª¤4-ä¿®æ”¹MyAdviceç±»ï¼Œå¢å¼º" class="headerlink" title="æ­¥éª¤4:ä¿®æ”¹MyAdviceç±»ï¼Œå¢å¼º"></a>æ­¥éª¤4:ä¿®æ”¹MyAdviceç±»ï¼Œå¢å¼º</h5><p>å› ä¸ºå®šä¹‰çš„åˆ‡å…¥ç‚¹ä¸­ï¼Œè¢«ä¿®æ”¹æˆ<code>update</code>,æ‰€ä»¥BookDaoä¸­çš„updateæ–¹æ³•åœ¨æ‰§è¡Œçš„æ—¶å€™ï¼Œå°±ä¼šè¢«å¢å¼ºï¼Œ</p><p>æ‰€ä»¥å®¹å™¨ä¸­çš„å¯¹è±¡åº”è¯¥æ˜¯ç›®æ ‡å¯¹è±¡çš„ä»£ç†å¯¹è±¡</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyAdvice</span> &#123;</span><br><span class="line">    <span class="meta">@Pointcut(&quot;execution(void com.itheima.dao.BookDao.update())&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">pt</span><span class="params">()</span>&#123;&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Before(&quot;pt()&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(System.currentTimeMillis());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="æ­¥éª¤5-è¿è¡Œç¨‹åº"><a href="#æ­¥éª¤5-è¿è¡Œç¨‹åº" class="headerlink" title="æ­¥éª¤5:è¿è¡Œç¨‹åº"></a>æ­¥éª¤5:è¿è¡Œç¨‹åº</h5><p><img src="/2022/07/27/Spring_day3/1630154625564.png" alt="1630154625564"></p><p>è‡³æ­¤å¯¹äºåˆšæ‰çš„ç»“è®ºï¼Œæˆ‘ä»¬å°±å¾—åˆ°äº†éªŒè¯ï¼Œè¿™å—å¤§å®¶éœ€è¦æ³¨æ„çš„æ˜¯:</p><p>ä¸èƒ½ç›´æ¥æ‰“å°å¯¹è±¡ï¼Œä»ä¸Šé¢ä¸¤æ¬¡ç»“æœä¸­å¯ä»¥çœ‹å‡ºï¼Œç›´æ¥æ‰“å°å¯¹è±¡èµ°çš„æ˜¯å¯¹è±¡çš„toStringæ–¹æ³•ï¼Œä¸ç®¡æ˜¯ä¸æ˜¯ä»£ç†å¯¹è±¡æ‰“å°çš„ç»“æœéƒ½æ˜¯ä¸€æ ·çš„ï¼ŒåŸå› æ˜¯å†…éƒ¨å¯¹toStringæ–¹æ³•è¿›è¡Œäº†é‡å†™ã€‚</p><h3 id="3-2-AOPæ ¸å¿ƒæ¦‚å¿µ"><a href="#3-2-AOPæ ¸å¿ƒæ¦‚å¿µ" class="headerlink" title="3.2 AOPæ ¸å¿ƒæ¦‚å¿µ"></a>3.2 AOPæ ¸å¿ƒæ¦‚å¿µ</h3><p>åœ¨ä¸Šé¢ä»‹ç»AOPçš„å·¥ä½œæµç¨‹ä¸­ï¼Œæˆ‘ä»¬æåˆ°äº†ä¸¤ä¸ªæ ¸å¿ƒæ¦‚å¿µï¼Œåˆ†åˆ«æ˜¯:</p><ul><li>ç›®æ ‡å¯¹è±¡(Target)ï¼šåŸå§‹åŠŸèƒ½å»æ‰å…±æ€§åŠŸèƒ½å¯¹åº”çš„ç±»äº§ç”Ÿçš„å¯¹è±¡ï¼Œè¿™ç§å¯¹è±¡æ˜¯æ— æ³•ç›´æ¥å®Œæˆæœ€ç»ˆå·¥ä½œçš„</li><li>ä»£ç†(Proxy)ï¼šç›®æ ‡å¯¹è±¡æ— æ³•ç›´æ¥å®Œæˆå·¥ä½œï¼Œéœ€è¦å¯¹å…¶è¿›è¡ŒåŠŸèƒ½å›å¡«ï¼Œé€šè¿‡åŸå§‹å¯¹è±¡çš„ä»£ç†å¯¹è±¡å®ç°</li></ul><p>ä¸Šé¢è¿™ä¸¤ä¸ªæ¦‚å¿µæ¯”è¾ƒæŠ½è±¡ï¼Œç®€å•æ¥è¯´ï¼Œ</p><p>ç›®æ ‡å¯¹è±¡å°±æ˜¯è¦å¢å¼ºçš„ç±»[å¦‚:BookServiceImplç±»]å¯¹åº”çš„å¯¹è±¡ï¼Œä¹Ÿå«åŸå§‹å¯¹è±¡ï¼Œä¸èƒ½è¯´å®ƒä¸èƒ½è¿è¡Œï¼Œåªèƒ½è¯´å®ƒåœ¨è¿è¡Œçš„è¿‡ç¨‹ä¸­å¯¹äºè¦å¢å¼ºçš„å†…å®¹æ˜¯ç¼ºå¤±çš„ã€‚</p><p>SpringAOPæ˜¯åœ¨ä¸æ”¹å˜åŸæœ‰è®¾è®¡(ä»£ç )çš„å‰æä¸‹å¯¹å…¶è¿›è¡Œå¢å¼ºçš„ï¼Œå®ƒçš„åº•å±‚é‡‡ç”¨çš„æ˜¯ä»£ç†æ¨¡å¼å®ç°çš„ï¼Œæ‰€ä»¥è¦å¯¹åŸå§‹å¯¹è±¡è¿›è¡Œå¢å¼ºï¼Œå°±éœ€è¦å¯¹åŸå§‹å¯¹è±¡åˆ›å»ºä»£ç†å¯¹è±¡ï¼Œåœ¨ä»£ç†å¯¹è±¡ä¸­çš„æ–¹æ³•æŠŠé€šçŸ¥[å¦‚:MyAdviceä¸­çš„methodæ–¹æ³•]å†…å®¹åŠ è¿›å»ï¼Œå°±å®ç°äº†å¢å¼º,è¿™å°±æ˜¯æˆ‘ä»¬æ‰€è¯´çš„ä»£ç†(Proxy)ã€‚</p><p><strong>å°ç»“</strong></p><p>é€šè¿‡è¿™ä¸€èŠ‚ä¸­ï¼Œæˆ‘ä»¬éœ€è¦æŒæ¡çš„å†…å®¹æœ‰ï¼š</p><ul><li>èƒ½è¯´å‡ºAOPçš„å·¥ä½œæµç¨‹</li><li>AOPçš„æ ¸å¿ƒæ¦‚å¿µ<ul><li>ç›®æ ‡å¯¹è±¡ã€è¿æ¥ç‚¹ã€åˆ‡å…¥ç‚¹</li><li>é€šçŸ¥ç±»ã€é€šçŸ¥</li><li>åˆ‡é¢</li><li>ä»£ç†</li></ul></li><li>SpringAOPçš„æœ¬è´¨æˆ–è€…å¯ä»¥è¯´åº•å±‚å®ç°æ˜¯é€šè¿‡ä»£ç†æ¨¡å¼ã€‚</li></ul><h2 id="4ï¼ŒAOPé…ç½®ç®¡ç†"><a href="#4ï¼ŒAOPé…ç½®ç®¡ç†" class="headerlink" title="4ï¼ŒAOPé…ç½®ç®¡ç†"></a>4ï¼ŒAOPé…ç½®ç®¡ç†</h2><h3 id="4-1-AOPåˆ‡å…¥ç‚¹è¡¨è¾¾å¼"><a href="#4-1-AOPåˆ‡å…¥ç‚¹è¡¨è¾¾å¼" class="headerlink" title="4.1 AOPåˆ‡å…¥ç‚¹è¡¨è¾¾å¼"></a>4.1 AOPåˆ‡å…¥ç‚¹è¡¨è¾¾å¼</h3><p>å‰é¢çš„æ¡ˆä¾‹ä¸­ï¼Œæœ‰æ¶‰åŠåˆ°å¦‚ä¸‹å†…å®¹:</p><p><img src="/2022/07/27/Spring_day3/1630155937718.png" alt="1630155937718"></p><p>å¯¹äºAOPä¸­åˆ‡å…¥ç‚¹è¡¨è¾¾å¼ï¼Œæˆ‘ä»¬æ€»å…±ä¼šå­¦ä¹ ä¸‰ä¸ªå†…å®¹ï¼Œåˆ†åˆ«æ˜¯<code>è¯­æ³•æ ¼å¼</code>ã€<code>é€šé…ç¬¦</code>å’Œ<code>ä¹¦å†™æŠ€å·§</code>ã€‚</p><h4 id="4-1-1-è¯­æ³•æ ¼å¼"><a href="#4-1-1-è¯­æ³•æ ¼å¼" class="headerlink" title="4.1.1 è¯­æ³•æ ¼å¼"></a>4.1.1 è¯­æ³•æ ¼å¼</h4><p>é¦–å…ˆæˆ‘ä»¬å…ˆè¦æ˜ç¡®ä¸¤ä¸ªæ¦‚å¿µ:</p><ul><li>åˆ‡å…¥ç‚¹:è¦è¿›è¡Œå¢å¼ºçš„æ–¹æ³•</li><li>åˆ‡å…¥ç‚¹è¡¨è¾¾å¼:è¦è¿›è¡Œå¢å¼ºçš„æ–¹æ³•çš„æè¿°æ–¹å¼</li></ul><p>å¯¹äºåˆ‡å…¥ç‚¹çš„æè¿°ï¼Œæˆ‘ä»¬å…¶å®æ˜¯æœ‰ä¸¤ä¸­æ–¹å¼çš„ï¼Œå…ˆæ¥çœ‹ä¸‹å‰é¢çš„ä¾‹å­</p><p><img src="/2022/07/27/Spring_day3/1630156172790.png" alt="1630156172790"></p><p>æè¿°æ–¹å¼ä¸€ï¼šæ‰§è¡Œcom.itheima.daoåŒ…ä¸‹çš„BookDaoæ¥å£ä¸­çš„æ— å‚æ•°updateæ–¹æ³•</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">execution(<span class="keyword">void</span> com.itheima.dao.BookDao.update())</span><br></pre></td></tr></table></figure><p>æè¿°æ–¹å¼äºŒï¼šæ‰§è¡Œcom.itheima.dao.implåŒ…ä¸‹çš„BookDaoImplç±»ä¸­çš„æ— å‚æ•°updateæ–¹æ³•</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">execution(void com.itheima.dao.impl.BookDaoImpl.update())</span><br></pre></td></tr></table></figure><p>å› ä¸ºè°ƒç”¨æ¥å£æ–¹æ³•çš„æ—¶å€™æœ€ç»ˆè¿è¡Œçš„è¿˜æ˜¯å…¶å®ç°ç±»çš„æ–¹æ³•ï¼Œæ‰€ä»¥ä¸Šé¢ä¸¤ç§æè¿°æ–¹å¼éƒ½æ˜¯å¯ä»¥çš„ã€‚</p><p>å¯¹äºåˆ‡å…¥ç‚¹è¡¨è¾¾å¼çš„è¯­æ³•ä¸º:</p><ul><li>åˆ‡å…¥ç‚¹è¡¨è¾¾å¼æ ‡å‡†æ ¼å¼ï¼šåŠ¨ä½œå…³é”®å­—(è®¿é—®ä¿®é¥°ç¬¦  è¿”å›å€¼  åŒ…å.ç±»&#x2F;æ¥å£å.æ–¹æ³•å(å‚æ•°) å¼‚å¸¸åï¼‰</li></ul><p>å¯¹äºè¿™ä¸ªæ ¼å¼ï¼Œæˆ‘ä»¬ä¸éœ€è¦ç¡¬è®°ï¼Œé€šè¿‡ä¸€ä¸ªä¾‹å­ï¼Œç†è§£å®ƒ:</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">execution(public User com.itheima.service.UserService.findById(int))</span><br></pre></td></tr></table></figure><ul><li>executionï¼šåŠ¨ä½œå…³é”®å­—ï¼Œæè¿°åˆ‡å…¥ç‚¹çš„è¡Œä¸ºåŠ¨ä½œï¼Œä¾‹å¦‚executionè¡¨ç¤ºæ‰§è¡Œåˆ°æŒ‡å®šåˆ‡å…¥ç‚¹</li><li>public:è®¿é—®ä¿®é¥°ç¬¦,è¿˜å¯ä»¥æ˜¯publicï¼Œprivateç­‰ï¼Œå¯ä»¥çœç•¥</li><li>Userï¼šè¿”å›å€¼ï¼Œå†™è¿”å›å€¼ç±»å‹</li><li>com.itheima.serviceï¼šåŒ…åï¼Œå¤šçº§åŒ…ä½¿ç”¨ç‚¹è¿æ¥</li><li>UserService:ç±»&#x2F;æ¥å£åç§°</li><li>findByIdï¼šæ–¹æ³•å</li><li>int:å‚æ•°ï¼Œç›´æ¥å†™å‚æ•°çš„ç±»å‹ï¼Œå¤šä¸ªç±»å‹ç”¨é€—å·éš”å¼€</li><li>å¼‚å¸¸åï¼šæ–¹æ³•å®šä¹‰ä¸­æŠ›å‡ºæŒ‡å®šå¼‚å¸¸ï¼Œå¯ä»¥çœç•¥</li></ul><p>åˆ‡å…¥ç‚¹è¡¨è¾¾å¼å°±æ˜¯è¦æ‰¾åˆ°éœ€è¦å¢å¼ºçš„æ–¹æ³•ï¼Œæ‰€ä»¥å®ƒå°±æ˜¯å¯¹ä¸€ä¸ªå…·ä½“æ–¹æ³•çš„æè¿°ï¼Œä½†æ˜¯æ–¹æ³•çš„å®šä¹‰ä¼šæœ‰å¾ˆå¤šï¼Œæ‰€ä»¥å¦‚æœæ¯ä¸€ä¸ªæ–¹æ³•å¯¹åº”ä¸€ä¸ªåˆ‡å…¥ç‚¹è¡¨è¾¾å¼ï¼Œæƒ³æƒ³è¿™å—å°±ä¼šè§‰å¾—å°†æ¥ç¼–å†™èµ·æ¥ä¼šæ¯”è¾ƒéº»çƒ¦ï¼Œæœ‰æ²¡æœ‰æ›´ç®€å•çš„æ–¹å¼å‘¢?</p><p>å°±éœ€è¦ç”¨åˆ°ä¸‹é¢æ‰€å­¦ä¹ çš„é€šé…ç¬¦ã€‚</p><h4 id="4-1-2-é€šé…ç¬¦"><a href="#4-1-2-é€šé…ç¬¦" class="headerlink" title="4.1.2 é€šé…ç¬¦"></a>4.1.2 é€šé…ç¬¦</h4><p>æˆ‘ä»¬ä½¿ç”¨é€šé…ç¬¦æè¿°åˆ‡å…¥ç‚¹ï¼Œä¸»è¦çš„ç›®çš„å°±æ˜¯ç®€åŒ–ä¹‹å‰çš„é…ç½®ï¼Œå…·ä½“éƒ½æœ‰å“ªäº›é€šé…ç¬¦å¯ä»¥ä½¿ç”¨?</p><ul><li><p><code>*</code>:å•ä¸ªç‹¬ç«‹çš„ä»»æ„ç¬¦å·ï¼Œå¯ä»¥ç‹¬ç«‹å‡ºç°ï¼Œä¹Ÿå¯ä»¥ä½œä¸ºå‰ç¼€æˆ–è€…åç¼€çš„åŒ¹é…ç¬¦å‡ºç°</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">executionï¼ˆpublic * com.itheima.*.UserService.find*(*))</span><br></pre></td></tr></table></figure><p>åŒ¹é…com.itheimaåŒ…ä¸‹çš„ä»»æ„åŒ…ä¸­çš„UserServiceç±»æˆ–æ¥å£ä¸­æ‰€æœ‰findå¼€å¤´çš„å¸¦æœ‰ä¸€ä¸ªå‚æ•°çš„æ–¹æ³•</p></li><li><p><code>..</code>ï¼šå¤šä¸ªè¿ç»­çš„ä»»æ„ç¬¦å·ï¼Œå¯ä»¥ç‹¬ç«‹å‡ºç°ï¼Œå¸¸ç”¨äºç®€åŒ–åŒ…åä¸å‚æ•°çš„ä¹¦å†™</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">executionï¼ˆpublic User com..UserService.findById(..))</span><br></pre></td></tr></table></figure><p>åŒ¹é…comåŒ…ä¸‹çš„ä»»æ„åŒ…ä¸­çš„UserServiceç±»æˆ–æ¥å£ä¸­æ‰€æœ‰åç§°ä¸ºfindByIdçš„æ–¹æ³•</p></li><li><p><code>+</code>ï¼šä¸“ç”¨äºåŒ¹é…å­ç±»ç±»å‹</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">execution(* *..*Service+.*(..))</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªä½¿ç”¨ç‡è¾ƒä½ï¼Œæè¿°å­ç±»çš„ï¼Œå’±ä»¬åšJavaEEå¼€å‘ï¼Œç»§æ‰¿æœºä¼šå°±ä¸€æ¬¡ï¼Œä½¿ç”¨éƒ½å¾ˆæ…é‡ï¼Œæ‰€ä»¥å¾ˆå°‘ç”¨å®ƒã€‚*Service+ï¼Œè¡¨ç¤ºæ‰€æœ‰ä»¥Serviceç»“å°¾çš„æ¥å£çš„å­ç±»ã€‚</p></li></ul><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æŠŠæ¡ˆä¾‹ä¸­ä½¿ç”¨åˆ°çš„åˆ‡å…¥ç‚¹è¡¨è¾¾å¼æ¥åˆ†æä¸‹:</p><p><img src="/2022/07/27/Spring_day3/1630163744963.png" alt="1630163744963"></p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">execution(<span class="keyword">void</span> com.itheima.dao.BookDao.update())</span><br><span class="line">åŒ¹é…æ¥å£ï¼Œèƒ½åŒ¹é…åˆ°</span><br><span class="line">execution(<span class="keyword">void</span> com.itheima.dao.impl.BookDaoImpl.update())</span><br><span class="line">åŒ¹é…å®ç°ç±»ï¼Œèƒ½åŒ¹é…åˆ°</span><br><span class="line">execution(* com.itheima.dao.impl.BookDaoImpl.update())</span><br><span class="line">è¿”å›å€¼ä»»æ„ï¼Œèƒ½åŒ¹é…åˆ°</span><br><span class="line">execution(* com.itheima.dao.impl.BookDaoImpl.update(*))</span><br><span class="line">è¿”å›å€¼ä»»æ„ï¼Œä½†æ˜¯updateæ–¹æ³•å¿…é¡»è¦æœ‰ä¸€ä¸ªå‚æ•°ï¼Œæ— æ³•åŒ¹é…ï¼Œè¦æƒ³åŒ¹é…éœ€è¦åœ¨updateæ¥å£å’Œå®ç°ç±»æ·»åŠ å‚æ•°</span><br><span class="line">execution(<span class="keyword">void</span> com.*.*.*.*.update())</span><br><span class="line">è¿”å›å€¼ä¸º<span class="keyword">void</span>,comåŒ…ä¸‹çš„ä»»æ„åŒ…ä¸‰å±‚åŒ…ä¸‹çš„ä»»æ„ç±»çš„updateæ–¹æ³•ï¼ŒåŒ¹é…åˆ°çš„æ˜¯å®ç°ç±»ï¼Œèƒ½åŒ¹é…</span><br><span class="line">execution(<span class="keyword">void</span> com.*.*.*.update())</span><br><span class="line">è¿”å›å€¼ä¸º<span class="keyword">void</span>,comåŒ…ä¸‹çš„ä»»æ„ä¸¤å±‚åŒ…ä¸‹çš„ä»»æ„ç±»çš„updateæ–¹æ³•ï¼ŒåŒ¹é…åˆ°çš„æ˜¯æ¥å£ï¼Œèƒ½åŒ¹é…</span><br><span class="line">execution(<span class="keyword">void</span> *..update())</span><br><span class="line">è¿”å›å€¼ä¸º<span class="keyword">void</span>ï¼Œæ–¹æ³•åæ˜¯updateçš„ä»»æ„åŒ…ä¸‹çš„ä»»æ„ç±»ï¼Œèƒ½åŒ¹é…</span><br><span class="line">execution(* *..*(..))</span><br><span class="line">åŒ¹é…é¡¹ç›®ä¸­ä»»æ„ç±»çš„ä»»æ„æ–¹æ³•ï¼Œèƒ½åŒ¹é…ï¼Œä½†æ˜¯ä¸å»ºè®®ä½¿ç”¨è¿™ç§æ–¹å¼ï¼Œå½±å“èŒƒå›´å¹¿</span><br><span class="line">execution(* *..u*(..))</span><br><span class="line">åŒ¹é…é¡¹ç›®ä¸­ä»»æ„åŒ…ä»»æ„ç±»ä¸‹åªè¦ä»¥uå¼€å¤´çš„æ–¹æ³•ï¼Œupdateæ–¹æ³•èƒ½æ»¡è¶³ï¼Œèƒ½åŒ¹é…</span><br><span class="line">execution(* *..*e(..))</span><br><span class="line">åŒ¹é…é¡¹ç›®ä¸­ä»»æ„åŒ…ä»»æ„ç±»ä¸‹åªè¦ä»¥eç»“å°¾çš„æ–¹æ³•ï¼Œupdateå’Œsaveæ–¹æ³•èƒ½æ»¡è¶³ï¼Œèƒ½åŒ¹é…</span><br><span class="line">execution(<span class="keyword">void</span> com..*())</span><br><span class="line">è¿”å›å€¼ä¸º<span class="keyword">void</span>ï¼ŒcomåŒ…ä¸‹çš„ä»»æ„åŒ…ä»»æ„ç±»ä»»æ„æ–¹æ³•ï¼Œèƒ½åŒ¹é…ï¼Œ*ä»£è¡¨çš„æ˜¯æ–¹æ³•</span><br><span class="line">execution(* com.itheima.*.*Service.find*(..))</span><br><span class="line">å°†é¡¹ç›®ä¸­æ‰€æœ‰ä¸šåŠ¡å±‚æ–¹æ³•çš„ä»¥findå¼€å¤´çš„æ–¹æ³•åŒ¹é…</span><br><span class="line">execution(* com.itheima.*.*Service.save*(..))</span><br><span class="line">å°†é¡¹ç›®ä¸­æ‰€æœ‰ä¸šåŠ¡å±‚æ–¹æ³•çš„ä»¥saveå¼€å¤´çš„æ–¹æ³•åŒ¹é…</span><br></pre></td></tr></table></figure><p>åé¢ä¸¤ç§æ›´ç¬¦åˆæˆ‘ä»¬å¹³å¸¸åˆ‡å…¥ç‚¹è¡¨è¾¾å¼çš„ç¼–å†™è§„åˆ™</p><h4 id="4-1-3-ä¹¦å†™æŠ€å·§"><a href="#4-1-3-ä¹¦å†™æŠ€å·§" class="headerlink" title="4.1.3 ä¹¦å†™æŠ€å·§"></a>4.1.3 ä¹¦å†™æŠ€å·§</h4><p>å¯¹äºåˆ‡å…¥ç‚¹è¡¨è¾¾å¼çš„ç¼–å†™å…¶å®æ˜¯å¾ˆçµæ´»çš„ï¼Œé‚£ä¹ˆåœ¨ç¼–å†™çš„æ—¶å€™ï¼Œæœ‰æ²¡æœ‰ä»€ä¹ˆå¥½çš„æŠ€å·§è®©æˆ‘ä»¬ç”¨ç”¨:</p><ul><li>æ‰€æœ‰ä»£ç æŒ‰ç…§æ ‡å‡†è§„èŒƒå¼€å‘ï¼Œå¦åˆ™ä»¥ä¸‹æŠ€å·§å…¨éƒ¨å¤±æ•ˆ</li><li>æè¿°åˆ‡å…¥ç‚¹é€š<strong>å¸¸æè¿°æ¥å£</strong>ï¼Œè€Œä¸æè¿°å®ç°ç±»,å¦‚æœæè¿°åˆ°å®ç°ç±»ï¼Œå°±å‡ºç°ç´§è€¦åˆäº†</li><li>è®¿é—®æ§åˆ¶ä¿®é¥°ç¬¦é’ˆå¯¹æ¥å£å¼€å‘å‡é‡‡ç”¨publicæè¿°ï¼ˆ<strong>å¯çœç•¥è®¿é—®æ§åˆ¶ä¿®é¥°ç¬¦æè¿°</strong>ï¼‰</li><li>è¿”å›å€¼ç±»å‹å¯¹äºå¢åˆ æ”¹ç±»ä½¿ç”¨ç²¾å‡†ç±»å‹åŠ é€ŸåŒ¹é…ï¼Œå¯¹äºæŸ¥è¯¢ç±»ä½¿ç”¨*é€šé…å¿«é€Ÿæè¿°</li><li><strong>åŒ…å</strong>ä¹¦å†™<strong>å°½é‡ä¸ä½¿ç”¨<code>..</code>åŒ¹é…</strong>ï¼Œæ•ˆç‡è¿‡ä½ï¼Œå¸¸ç”¨*åšå•ä¸ªåŒ…æè¿°åŒ¹é…ï¼Œæˆ–ç²¾å‡†åŒ¹é…</li><li><strong>æ¥å£å&#x2F;ç±»å</strong>ä¹¦å†™åç§°ä¸æ¨¡å—ç›¸å…³çš„<strong>é‡‡ç”¨*åŒ¹é…</strong>ï¼Œä¾‹å¦‚UserServiceä¹¦å†™æˆ*Serviceï¼Œç»‘å®šä¸šåŠ¡å±‚æ¥å£å</li><li><strong>æ–¹æ³•å</strong>ä¹¦å†™ä»¥<strong>åŠ¨è¯</strong>è¿›è¡Œ<strong>ç²¾å‡†åŒ¹é…</strong>ï¼Œåè¯é‡‡ç”¨<em>åŒ¹é…ï¼Œä¾‹å¦‚getByIdä¹¦å†™æˆgetBy</em>ï¼ŒselectAllä¹¦å†™æˆselectAll</li><li>å‚æ•°è§„åˆ™è¾ƒä¸ºå¤æ‚ï¼Œæ ¹æ®ä¸šåŠ¡æ–¹æ³•çµæ´»è°ƒæ•´</li><li>é€šå¸¸<strong>ä¸ä½¿ç”¨å¼‚å¸¸</strong>ä½œä¸º<strong>åŒ¹é…</strong>è§„åˆ™</li></ul><h3 id="4-2-AOPé€šçŸ¥ç±»å‹"><a href="#4-2-AOPé€šçŸ¥ç±»å‹" class="headerlink" title="4.2 AOPé€šçŸ¥ç±»å‹"></a>4.2 AOPé€šçŸ¥ç±»å‹</h3><p>å‰é¢çš„æ¡ˆä¾‹ä¸­ï¼Œæœ‰æ¶‰åŠåˆ°å¦‚ä¸‹å†…å®¹:</p><p><img src="/2022/07/27/Spring_day3/1630164718080.png" alt="1630164718080"></p><p>å®ƒæ‰€ä»£è¡¨çš„å«ä¹‰æ˜¯å°†<code>é€šçŸ¥</code>æ·»åŠ åˆ°<code>åˆ‡å…¥ç‚¹</code>æ–¹æ³•æ‰§è¡Œçš„<em>å‰é¢</em>ã€‚</p><p>é™¤äº†è¿™ä¸ªæ³¨è§£å¤–ï¼Œè¿˜æœ‰æ²¡æœ‰å…¶ä»–çš„æ³¨è§£ï¼Œæ¢ä¸ªé—®é¢˜å°±æ˜¯é™¤äº†å¯ä»¥åœ¨å‰é¢åŠ ï¼Œèƒ½ä¸èƒ½åœ¨å…¶ä»–çš„åœ°æ–¹åŠ ?</p><h4 id="4-2-1-ç±»å‹ä»‹ç»"><a href="#4-2-1-ç±»å‹ä»‹ç»" class="headerlink" title="4.2.1 ç±»å‹ä»‹ç»"></a>4.2.1 ç±»å‹ä»‹ç»</h4><p>æˆ‘ä»¬å…ˆæ¥å›é¡¾ä¸‹AOPé€šçŸ¥:</p><ul><li>AOPé€šçŸ¥æè¿°äº†æŠ½å–çš„å…±æ€§åŠŸèƒ½ï¼Œæ ¹æ®å…±æ€§åŠŸèƒ½æŠ½å–çš„ä½ç½®ä¸åŒï¼Œæœ€ç»ˆè¿è¡Œä»£ç æ—¶è¦å°†å…¶åŠ å…¥åˆ°åˆç†çš„ä½ç½®</li></ul><p>é€šçŸ¥å…·ä½“è¦æ·»åŠ åˆ°åˆ‡å…¥ç‚¹çš„å“ªé‡Œ?</p><p>å…±æä¾›äº†5ç§é€šçŸ¥ç±»å‹:</p><ul><li>å‰ç½®é€šçŸ¥</li><li>åç½®é€šçŸ¥</li><li><strong>ç¯ç»•é€šçŸ¥(é‡ç‚¹)</strong></li><li>è¿”å›åé€šçŸ¥(äº†è§£)</li><li>æŠ›å‡ºå¼‚å¸¸åé€šçŸ¥(äº†è§£)</li></ul><p>ä¸ºäº†æ›´å¥½çš„ç†è§£è¿™å‡ ç§é€šçŸ¥ç±»å‹ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€å¼ å›¾</p><p><img src="/2022/07/27/Spring_day3/1630166147697.png" alt="1630166147697"></p><p>(1)å‰ç½®é€šçŸ¥ï¼Œè¿½åŠ åŠŸèƒ½åˆ°æ–¹æ³•æ‰§è¡Œå‰,ç±»ä¼¼äºåœ¨ä»£ç 1æˆ–è€…ä»£ç 2æ·»åŠ å†…å®¹</p><p>(2)åç½®é€šçŸ¥,è¿½åŠ åŠŸèƒ½åˆ°æ–¹æ³•æ‰§è¡Œå,ä¸ç®¡æ–¹æ³•æ‰§è¡Œçš„è¿‡ç¨‹ä¸­æœ‰æ²¡æœ‰æŠ›å‡ºå¼‚å¸¸éƒ½ä¼šæ‰§è¡Œï¼Œç±»ä¼¼äºåœ¨ä»£ç 5æ·»åŠ å†…å®¹</p><p>(3)è¿”å›åé€šçŸ¥,è¿½åŠ åŠŸèƒ½åˆ°æ–¹æ³•æ‰§è¡Œåï¼Œåªæœ‰æ–¹æ³•æ­£å¸¸æ‰§è¡Œç»“æŸåæ‰è¿›è¡Œ,ç±»ä¼¼äºåœ¨ä»£ç 3æ·»åŠ å†…å®¹ï¼Œå¦‚æœæ–¹æ³•æ‰§è¡ŒæŠ›å‡ºå¼‚å¸¸ï¼Œè¿”å›åé€šçŸ¥å°†ä¸ä¼šè¢«æ·»åŠ </p><p>(4)æŠ›å‡ºå¼‚å¸¸åé€šçŸ¥,è¿½åŠ åŠŸèƒ½åˆ°æ–¹æ³•æŠ›å‡ºå¼‚å¸¸åï¼Œåªæœ‰æ–¹æ³•æ‰§è¡Œå‡ºå¼‚å¸¸æ‰è¿›è¡Œ,ç±»ä¼¼äºåœ¨ä»£ç 4æ·»åŠ å†…å®¹ï¼Œåªæœ‰æ–¹æ³•æŠ›å‡ºå¼‚å¸¸åæ‰ä¼šè¢«æ·»åŠ </p><p>(5)ç¯ç»•é€šçŸ¥,ç¯ç»•é€šçŸ¥åŠŸèƒ½æ¯”è¾ƒå¼ºå¤§ï¼Œå®ƒå¯ä»¥è¿½åŠ åŠŸèƒ½åˆ°æ–¹æ³•æ‰§è¡Œçš„å‰åï¼Œè¿™ä¹Ÿæ˜¯æ¯”è¾ƒå¸¸ç”¨çš„æ–¹å¼ï¼Œå®ƒå¯ä»¥å®ç°å…¶ä»–å››ç§é€šçŸ¥ç±»å‹çš„åŠŸèƒ½ï¼Œå…·ä½“æ˜¯å¦‚ä½•å®ç°çš„ï¼Œéœ€è¦æˆ‘ä»¬å¾€ä¸‹å­¦ä¹ ã€‚</p><h4 id="4-2-2-ç¯å¢ƒå‡†å¤‡"><a href="#4-2-2-ç¯å¢ƒå‡†å¤‡" class="headerlink" title="4.2.2 ç¯å¢ƒå‡†å¤‡"></a>4.2.2 ç¯å¢ƒå‡†å¤‡</h4><ul><li><p>åˆ›å»ºä¸€ä¸ªMavené¡¹ç›®</p></li><li><p>pom.xmlæ·»åŠ Springä¾èµ–</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.10.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.aspectj<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>aspectjweaver<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.9.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>æ·»åŠ BookDaoå’ŒBookDaoImplç±»</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">BookDao</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">()</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">select</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookDaoImpl</span> <span class="keyword">implements</span> <span class="title class_">BookDao</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;book dao update ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">select</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;book dao select is running ...&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">100</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>åˆ›å»ºSpringçš„é…ç½®ç±»</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ComponentScan(&quot;com.itheima&quot;)</span></span><br><span class="line"><span class="meta">@EnableAspectJAutoProxy</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringConfig</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>åˆ›å»ºé€šçŸ¥ç±»</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyAdvice</span> &#123;</span><br><span class="line">    <span class="meta">@Pointcut(&quot;execution(void com.itheima.dao.BookDao.update())&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">pt</span><span class="params">()</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">before</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;before advice ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">after</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;after advice ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">around</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;around before advice ...&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;around after advice ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterReturning</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;afterReturning advice ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterThrowing</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;afterThrowing advice ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>ç¼–å†™Appè¿è¡Œç±»</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">App</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">ApplicationContext</span> <span class="variable">ctx</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AnnotationConfigApplicationContext</span>(SpringConfig.class);</span><br><span class="line">        <span class="type">BookDao</span> <span class="variable">bookDao</span> <span class="operator">=</span> ctx.getBean(BookDao.class);</span><br><span class="line">        bookDao.update();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p>æœ€ç»ˆåˆ›å»ºå¥½çš„é¡¹ç›®ç»“æ„å¦‚ä¸‹:</p><p><img src="/2022/07/27/Spring_day3/1630167385146.png" alt="1630167385146"></p><h4 id="4-2-3-é€šçŸ¥ç±»å‹çš„ä½¿ç”¨"><a href="#4-2-3-é€šçŸ¥ç±»å‹çš„ä½¿ç”¨" class="headerlink" title="4.2.3 é€šçŸ¥ç±»å‹çš„ä½¿ç”¨"></a>4.2.3 é€šçŸ¥ç±»å‹çš„ä½¿ç”¨</h4><h5 id="å‰ç½®é€šçŸ¥"><a href="#å‰ç½®é€šçŸ¥" class="headerlink" title="å‰ç½®é€šçŸ¥"></a>å‰ç½®é€šçŸ¥</h5><p>ä¿®æ”¹MyAdvice,åœ¨beforeæ–¹æ³•ä¸Šæ·»åŠ <code>@Beforeæ³¨è§£</code></p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyAdvice</span> &#123;</span><br><span class="line">    <span class="meta">@Pointcut(&quot;execution(void com.itheima.dao.BookDao.update())&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">pt</span><span class="params">()</span>&#123;&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Before(&quot;pt()&quot;)</span></span><br><span class="line">    <span class="comment">//æ­¤å¤„ä¹Ÿå¯ä»¥å†™æˆ @Before(&quot;MyAdvice.pt()&quot;),ä¸å»ºè®®</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">before</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;before advice ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/2022/07/27/Spring_day3/1630167805723.png" alt="1630167805723"></p><h5 id="åç½®é€šçŸ¥"><a href="#åç½®é€šçŸ¥" class="headerlink" title="åç½®é€šçŸ¥"></a>åç½®é€šçŸ¥</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyAdvice</span> &#123;</span><br><span class="line">    <span class="meta">@Pointcut(&quot;execution(void com.itheima.dao.BookDao.update())&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">pt</span><span class="params">()</span>&#123;&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Before(&quot;pt()&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">before</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;before advice ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@After(&quot;pt()&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">after</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;after advice ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/2022/07/27/Spring_day3/1630167887131.png" alt="1630167887131"></p><h5 id="ç¯ç»•é€šçŸ¥"><a href="#ç¯ç»•é€šçŸ¥" class="headerlink" title="ç¯ç»•é€šçŸ¥"></a>ç¯ç»•é€šçŸ¥</h5><h6 id="åŸºæœ¬ä½¿ç”¨"><a href="#åŸºæœ¬ä½¿ç”¨" class="headerlink" title="åŸºæœ¬ä½¿ç”¨"></a>åŸºæœ¬ä½¿ç”¨</h6><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyAdvice</span> &#123;</span><br><span class="line">    <span class="meta">@Pointcut(&quot;execution(void com.itheima.dao.BookDao.update())&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">pt</span><span class="params">()</span>&#123;&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Around(&quot;pt()&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">around</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;around before advice ...&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;around after advice ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/2022/07/27/Spring_day3/1630167969051.png" alt="1630167969051"></p><p>è¿è¡Œç»“æœä¸­ï¼Œé€šçŸ¥çš„å†…å®¹æ‰“å°å‡ºæ¥ï¼Œä½†æ˜¯åŸå§‹æ–¹æ³•çš„å†…å®¹å´æ²¡æœ‰è¢«æ‰§è¡Œã€‚</p><p>å› ä¸ºç¯ç»•é€šçŸ¥éœ€è¦åœ¨åŸå§‹æ–¹æ³•çš„å‰åè¿›è¡Œå¢å¼ºï¼Œæ‰€ä»¥ç¯ç»•é€šçŸ¥å°±å¿…é¡»è¦èƒ½å¯¹åŸå§‹æ“ä½œè¿›è¡Œè°ƒç”¨ï¼Œå…·ä½“å¦‚ä½•å®ç°?</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyAdvice</span> &#123;</span><br><span class="line">    <span class="meta">@Pointcut(&quot;execution(void com.itheima.dao.BookDao.update())&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">pt</span><span class="params">()</span>&#123;&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Around(&quot;pt()&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">around</span><span class="params">(ProceedingJoinPoint pjp)</span> <span class="keyword">throws</span> Throwable&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;around before advice ...&quot;</span>);</span><br><span class="line">        <span class="comment">//è¡¨ç¤ºå¯¹åŸå§‹æ“ä½œçš„è°ƒç”¨</span></span><br><span class="line">        pjp.proceed();</span><br><span class="line">        System.out.println(<span class="string">&quot;around after advice ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>**è¯´æ˜:**proceed()ä¸ºä»€ä¹ˆè¦æŠ›å‡ºå¼‚å¸¸?</p><p>åŸå› å¾ˆç®€å•ï¼Œçœ‹ä¸‹æºç å°±çŸ¥é“äº†</p><p><img src="/2022/07/27/Spring_day3/1630168248052.png" alt="1630168248052"></p><p>å†æ¬¡è¿è¡Œï¼Œç¨‹åºå¯ä»¥çœ‹åˆ°åŸå§‹æ–¹æ³•å·²ç»è¢«æ‰§è¡Œäº†</p><p><img src="/2022/07/27/Spring_day3/1630168293492.png" alt="1630168293492"></p><h6 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h6><p>(1)åŸå§‹æ–¹æ³•æœ‰è¿”å›å€¼çš„å¤„ç†</p><ul><li>ä¿®æ”¹MyAdvice,å¯¹BookDaoä¸­çš„selectæ–¹æ³•æ·»åŠ ç¯ç»•é€šçŸ¥ï¼Œ</li></ul><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyAdvice</span> &#123;</span><br><span class="line">    <span class="meta">@Pointcut(&quot;execution(void com.itheima.dao.BookDao.update())&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">pt</span><span class="params">()</span>&#123;&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Pointcut(&quot;execution(int com.itheima.dao.BookDao.select())&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">pt2</span><span class="params">()</span>&#123;&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Around(&quot;pt2()&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">aroundSelect</span><span class="params">(ProceedingJoinPoint pjp)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;around before advice ...&quot;</span>);</span><br><span class="line">        <span class="comment">//è¡¨ç¤ºå¯¹åŸå§‹æ“ä½œçš„è°ƒç”¨</span></span><br><span class="line">        pjp.proceed();</span><br><span class="line">        System.out.println(<span class="string">&quot;around after advice ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>ä¿®æ”¹Appç±»ï¼Œè°ƒç”¨selectæ–¹æ³•</li></ul><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">App</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">ApplicationContext</span> <span class="variable">ctx</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AnnotationConfigApplicationContext</span>(SpringConfig.class);</span><br><span class="line">        <span class="type">BookDao</span> <span class="variable">bookDao</span> <span class="operator">=</span> ctx.getBean(BookDao.class);</span><br><span class="line">        <span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> bookDao.select();</span><br><span class="line">        System.out.println(num);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿è¡Œåä¼šæŠ¥é”™ï¼Œé”™è¯¯å†…å®¹ä¸º:</p><p>Exception in thread â€œmainâ€ org.springframework.aop.AopInvocationException: &#x3D;&#x3D;Null return value from advice does not match primitive return type for: public abstract int com.itheima.dao.BookDao.select()&#x3D;&#x3D;<br>    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:226)<br>    at com.sun.proxy.$Proxy19.select(Unknown Source)<br>    at com.itheima.App.main(App.java:12)</p><p>é”™è¯¯å¤§æ¦‚çš„æ„æ€æ˜¯:<code>ç©ºçš„è¿”å›ä¸åŒ¹é…åŸå§‹æ–¹æ³•çš„intè¿”å›</code></p><ul><li>voidå°±æ˜¯è¿”å›Null</li><li>åŸå§‹æ–¹æ³•å°±æ˜¯BookDaoä¸‹çš„selectæ–¹æ³•</li></ul><p>æ‰€ä»¥å¦‚æœæˆ‘ä»¬ä½¿ç”¨ç¯ç»•é€šçŸ¥çš„è¯ï¼Œè¦æ ¹æ®åŸå§‹æ–¹æ³•çš„è¿”å›å€¼æ¥è®¾ç½®ç¯ç»•é€šçŸ¥çš„è¿”å›å€¼ï¼Œå…·ä½“è§£å†³æ–¹æ¡ˆä¸º:</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyAdvice</span> &#123;</span><br><span class="line">    <span class="meta">@Pointcut(&quot;execution(void com.itheima.dao.BookDao.update())&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">pt</span><span class="params">()</span>&#123;&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Pointcut(&quot;execution(int com.itheima.dao.BookDao.select())&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">pt2</span><span class="params">()</span>&#123;&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Around(&quot;pt2()&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">aroundSelect</span><span class="params">(ProceedingJoinPoint pjp)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;around before advice ...&quot;</span>);</span><br><span class="line">        <span class="comment">//è¡¨ç¤ºå¯¹åŸå§‹æ“ä½œçš„è°ƒç”¨</span></span><br><span class="line">        <span class="type">Object</span> <span class="variable">ret</span> <span class="operator">=</span> pjp.proceed();</span><br><span class="line">        System.out.println(<span class="string">&quot;around after advice ...&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> ret;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>è¯´æ˜:</strong></p><p>â€‹ä¸ºä»€ä¹ˆè¿”å›çš„æ˜¯Objectè€Œä¸æ˜¯intçš„ä¸»è¦åŸå› æ˜¯Objectç±»å‹æ›´é€šç”¨ã€‚</p><p>â€‹åœ¨ç¯ç»•é€šçŸ¥ä¸­æ˜¯å¯ä»¥å¯¹åŸå§‹æ–¹æ³•è¿”å›å€¼å°±è¡Œä¿®æ”¹çš„ã€‚</p><h5 id="è¿”å›åé€šçŸ¥"><a href="#è¿”å›åé€šçŸ¥" class="headerlink" title="è¿”å›åé€šçŸ¥"></a>è¿”å›åé€šçŸ¥</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyAdvice</span> &#123;</span><br><span class="line">    <span class="meta">@Pointcut(&quot;execution(void com.itheima.dao.BookDao.update())&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">pt</span><span class="params">()</span>&#123;&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Pointcut(&quot;execution(int com.itheima.dao.BookDao.select())&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">pt2</span><span class="params">()</span>&#123;&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@AfterReturning(&quot;pt2()&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterReturning</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;afterReturning advice ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/2022/07/27/Spring_day3/1630169124446.png" alt="1630169124446"></p><p><strong>æ³¨æ„ï¼š</strong>è¿”å›åé€šçŸ¥æ˜¯éœ€è¦åœ¨åŸå§‹æ–¹æ³•<code>select</code>æ­£å¸¸æ‰§è¡Œåæ‰ä¼šè¢«æ‰§è¡Œï¼Œå¦‚æœ<code>select()</code>æ–¹æ³•æ‰§è¡Œçš„è¿‡ç¨‹ä¸­å‡ºç°äº†å¼‚å¸¸ï¼Œé‚£ä¹ˆè¿”å›åé€šçŸ¥æ˜¯ä¸ä¼šè¢«æ‰§è¡Œã€‚åç½®é€šçŸ¥æ˜¯ä¸ç®¡åŸå§‹æ–¹æ³•æœ‰æ²¡æœ‰æŠ›å‡ºå¼‚å¸¸éƒ½ä¼šè¢«æ‰§è¡Œã€‚è¿™ä¸ªæ¡ˆä¾‹å¤§å®¶ä¸‹å»å¯ä»¥è‡ªå·±ç»ƒä¹ éªŒè¯ä¸‹ã€‚</p><h5 id="å¼‚å¸¸åé€šçŸ¥"><a href="#å¼‚å¸¸åé€šçŸ¥" class="headerlink" title="å¼‚å¸¸åé€šçŸ¥"></a>å¼‚å¸¸åé€šçŸ¥</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyAdvice</span> &#123;</span><br><span class="line">    <span class="meta">@Pointcut(&quot;execution(void com.itheima.dao.BookDao.update())&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">pt</span><span class="params">()</span>&#123;&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Pointcut(&quot;execution(int com.itheima.dao.BookDao.select())&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">pt2</span><span class="params">()</span>&#123;&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@AfterReturning(&quot;pt2()&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterThrowing</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;afterThrowing advice ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/2022/07/27/Spring_day3/1630169357146.png" alt="1630169357146"></p><p><strong>æ³¨æ„ï¼š</strong>å¼‚å¸¸åé€šçŸ¥æ˜¯éœ€è¦åŸå§‹æ–¹æ³•æŠ›å‡ºå¼‚å¸¸ï¼Œå¯ä»¥åœ¨<code>select()</code>æ–¹æ³•ä¸­æ·»åŠ ä¸€è¡Œä»£ç <code>int i = 1/0</code>å³å¯ã€‚å¦‚æœæ²¡æœ‰æŠ›å¼‚å¸¸ï¼Œå¼‚å¸¸åé€šçŸ¥å°†ä¸ä¼šè¢«æ‰§è¡Œã€‚</p><p>å­¦ä¹ å®Œè¿™5ç§é€šçŸ¥ç±»å‹ï¼Œæˆ‘ä»¬æ¥æ€è€ƒä¸‹ç¯ç»•é€šçŸ¥æ˜¯å¦‚ä½•å®ç°å…¶ä»–é€šçŸ¥ç±»å‹çš„åŠŸèƒ½çš„?</p><p>å› ä¸ºç¯ç»•é€šçŸ¥æ˜¯å¯ä»¥æ§åˆ¶åŸå§‹æ–¹æ³•æ‰§è¡Œçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬æŠŠå¢å¼ºçš„ä»£ç å†™åœ¨è°ƒç”¨åŸå§‹æ–¹æ³•çš„ä¸åŒä½ç½®å°±å¯ä»¥å®ç°ä¸åŒçš„é€šçŸ¥ç±»å‹çš„åŠŸèƒ½ï¼Œå¦‚:</p><p><img src="/2022/07/27/Spring_day3/1630170090945.png" alt="1630170090945"></p><h5 id="é€šçŸ¥ç±»å‹æ€»ç»“"><a href="#é€šçŸ¥ç±»å‹æ€»ç»“" class="headerlink" title="é€šçŸ¥ç±»å‹æ€»ç»“"></a>é€šçŸ¥ç±»å‹æ€»ç»“</h5><h6 id="çŸ¥è¯†ç‚¹1ï¼š-After"><a href="#çŸ¥è¯†ç‚¹1ï¼š-After" class="headerlink" title="çŸ¥è¯†ç‚¹1ï¼š@After"></a>çŸ¥è¯†ç‚¹1ï¼š@After</h6><table><thead><tr><th>åç§°</th><th>@After</th></tr></thead><tbody><tr><td>ç±»å‹</td><td>æ–¹æ³•æ³¨è§£</td></tr><tr><td>ä½ç½®</td><td>é€šçŸ¥æ–¹æ³•å®šä¹‰ä¸Šæ–¹</td></tr><tr><td>ä½œç”¨</td><td>è®¾ç½®å½“å‰é€šçŸ¥æ–¹æ³•ä¸åˆ‡å…¥ç‚¹ä¹‹é—´çš„ç»‘å®šå…³ç³»ï¼Œå½“å‰é€šçŸ¥æ–¹æ³•åœ¨åŸå§‹åˆ‡å…¥ç‚¹æ–¹æ³•åè¿è¡Œ</td></tr></tbody></table><h6 id="çŸ¥è¯†ç‚¹2ï¼š-AfterReturning"><a href="#çŸ¥è¯†ç‚¹2ï¼š-AfterReturning" class="headerlink" title="çŸ¥è¯†ç‚¹2ï¼š@AfterReturning"></a>çŸ¥è¯†ç‚¹2ï¼š@AfterReturning</h6><table><thead><tr><th>åç§°</th><th>@AfterReturning</th></tr></thead><tbody><tr><td>ç±»å‹</td><td>æ–¹æ³•æ³¨è§£</td></tr><tr><td>ä½ç½®</td><td>é€šçŸ¥æ–¹æ³•å®šä¹‰ä¸Šæ–¹</td></tr><tr><td>ä½œç”¨</td><td>è®¾ç½®å½“å‰é€šçŸ¥æ–¹æ³•ä¸åˆ‡å…¥ç‚¹ä¹‹é—´ç»‘å®šå…³ç³»ï¼Œå½“å‰é€šçŸ¥æ–¹æ³•åœ¨åŸå§‹åˆ‡å…¥ç‚¹æ–¹æ³•æ­£å¸¸æ‰§è¡Œå®Œæ¯•åæ‰§è¡Œ</td></tr></tbody></table><h6 id="çŸ¥è¯†ç‚¹3ï¼š-AfterThrowing"><a href="#çŸ¥è¯†ç‚¹3ï¼š-AfterThrowing" class="headerlink" title="çŸ¥è¯†ç‚¹3ï¼š@AfterThrowing"></a>çŸ¥è¯†ç‚¹3ï¼š@AfterThrowing</h6><table><thead><tr><th>åç§°</th><th>@AfterThrowing</th></tr></thead><tbody><tr><td>ç±»å‹</td><td>æ–¹æ³•æ³¨è§£</td></tr><tr><td>ä½ç½®</td><td>é€šçŸ¥æ–¹æ³•å®šä¹‰ä¸Šæ–¹</td></tr><tr><td>ä½œç”¨</td><td>è®¾ç½®å½“å‰é€šçŸ¥æ–¹æ³•ä¸åˆ‡å…¥ç‚¹ä¹‹é—´ç»‘å®šå…³ç³»ï¼Œå½“å‰é€šçŸ¥æ–¹æ³•åœ¨åŸå§‹åˆ‡å…¥ç‚¹æ–¹æ³•è¿è¡ŒæŠ›å‡ºå¼‚å¸¸åæ‰§è¡Œ</td></tr></tbody></table><h6 id="çŸ¥è¯†ç‚¹4ï¼š-Aroundï¼ˆé‡ç‚¹ï¼‰"><a href="#çŸ¥è¯†ç‚¹4ï¼š-Aroundï¼ˆé‡ç‚¹ï¼‰" class="headerlink" title="çŸ¥è¯†ç‚¹4ï¼š@Aroundï¼ˆé‡ç‚¹ï¼‰"></a>çŸ¥è¯†ç‚¹4ï¼š@Aroundï¼ˆé‡ç‚¹ï¼‰</h6><table><thead><tr><th>åç§°</th><th>@Around</th></tr></thead><tbody><tr><td>ç±»å‹</td><td>æ–¹æ³•æ³¨è§£</td></tr><tr><td>ä½ç½®</td><td>é€šçŸ¥æ–¹æ³•å®šä¹‰ä¸Šæ–¹</td></tr><tr><td>ä½œç”¨</td><td>è®¾ç½®å½“å‰é€šçŸ¥æ–¹æ³•ä¸åˆ‡å…¥ç‚¹ä¹‹é—´çš„ç»‘å®šå…³ç³»ï¼Œå½“å‰é€šçŸ¥æ–¹æ³•åœ¨åŸå§‹åˆ‡å…¥ç‚¹æ–¹æ³•å‰åè¿è¡Œ</td></tr></tbody></table><p><strong>ç¯ç»•é€šçŸ¥æ³¨æ„äº‹é¡¹</strong></p><ol><li>ç¯ç»•é€šçŸ¥å¿…é¡»ä¾èµ–å½¢å‚ProceedingJoinPointæ‰èƒ½å®ç°å¯¹åŸå§‹æ–¹æ³•çš„è°ƒç”¨ï¼Œè¿›è€Œå®ç°åŸå§‹æ–¹æ³•è°ƒç”¨å‰ååŒæ—¶æ·»åŠ é€šçŸ¥</li><li>é€šçŸ¥ä¸­å¦‚æœæœªä½¿ç”¨ProceedingJoinPointå¯¹åŸå§‹æ–¹æ³•è¿›è¡Œè°ƒç”¨å°†è·³è¿‡åŸå§‹æ–¹æ³•çš„æ‰§è¡Œ</li><li>å¯¹åŸå§‹æ–¹æ³•çš„è°ƒç”¨å¯ä»¥ä¸æ¥æ”¶è¿”å›å€¼ï¼Œé€šçŸ¥æ–¹æ³•è®¾ç½®æˆvoidå³å¯ï¼Œå¦‚æœæ¥æ”¶è¿”å›å€¼ï¼Œæœ€å¥½è®¾å®šä¸ºObjectç±»å‹</li><li>åŸå§‹æ–¹æ³•çš„è¿”å›å€¼å¦‚æœæ˜¯voidç±»å‹ï¼Œé€šçŸ¥æ–¹æ³•çš„è¿”å›å€¼ç±»å‹å¯ä»¥è®¾ç½®æˆvoid,ä¹Ÿå¯ä»¥è®¾ç½®æˆObject</li><li>ç”±äºæ— æ³•é¢„çŸ¥åŸå§‹æ–¹æ³•è¿è¡Œåæ˜¯å¦ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œå› æ­¤ç¯ç»•é€šçŸ¥æ–¹æ³•å¿…é¡»è¦å¤„ç†Throwableå¼‚å¸¸</li></ol><h3 id="4-3-ä¸šåŠ¡å±‚æ¥å£æ‰§è¡Œæ•ˆç‡"><a href="#4-3-ä¸šåŠ¡å±‚æ¥å£æ‰§è¡Œæ•ˆç‡" class="headerlink" title="4.3 ä¸šåŠ¡å±‚æ¥å£æ‰§è¡Œæ•ˆç‡"></a>4.3 ä¸šåŠ¡å±‚æ¥å£æ‰§è¡Œæ•ˆç‡</h3><h4 id="4-3-1-éœ€æ±‚åˆ†æ"><a href="#4-3-1-éœ€æ±‚åˆ†æ" class="headerlink" title="4.3.1 éœ€æ±‚åˆ†æ"></a>4.3.1 éœ€æ±‚åˆ†æ</h4><p>è¿™ä¸ªéœ€æ±‚ä¹Ÿæ¯”è¾ƒç®€å•ï¼Œå‰é¢æˆ‘ä»¬åœ¨ä»‹ç»AOPçš„æ—¶å€™å·²ç»æ¼”ç¤ºè¿‡:</p><ul><li>éœ€æ±‚:ä»»æ„ä¸šåŠ¡å±‚æ¥å£æ‰§è¡Œå‡å¯æ˜¾ç¤ºå…¶æ‰§è¡Œæ•ˆç‡ï¼ˆæ‰§è¡Œæ—¶é•¿ï¼‰</li></ul><p>è¿™ä¸ªæ¡ˆä¾‹çš„ç›®çš„æ˜¯æŸ¥çœ‹æ¯ä¸ªä¸šåŠ¡å±‚æ‰§è¡Œçš„æ—¶é—´ï¼Œè¿™æ ·å°±å¯ä»¥ç›‘æ§å‡ºå“ªä¸ªä¸šåŠ¡æ¯”è¾ƒè€—æ—¶ï¼Œå°†å…¶æŸ¥æ‰¾å‡ºæ¥æ–¹ä¾¿ä¼˜åŒ–ã€‚</p><p>å…·ä½“å®ç°çš„æ€è·¯:</p><p>(1) å¼€å§‹æ‰§è¡Œæ–¹æ³•ä¹‹å‰è®°å½•ä¸€ä¸ªæ—¶é—´</p><p>(2) æ‰§è¡Œæ–¹æ³•</p><p>(3) æ‰§è¡Œå®Œæ–¹æ³•ä¹‹åè®°å½•ä¸€ä¸ªæ—¶é—´</p><p>(4) ç”¨åä¸€ä¸ªæ—¶é—´å‡å»å‰ä¸€ä¸ªæ—¶é—´çš„å·®å€¼ï¼Œå°±æ˜¯æˆ‘ä»¬éœ€è¦çš„ç»“æœã€‚</p><p>æ‰€ä»¥è¦åœ¨æ–¹æ³•æ‰§è¡Œçš„å‰åæ·»åŠ ä¸šåŠ¡ï¼Œç»è¿‡åˆ†ææˆ‘ä»¬å°†é‡‡ç”¨<code>ç¯ç»•é€šçŸ¥</code>ã€‚</p><p>**è¯´æ˜:**åŸå§‹æ–¹æ³•å¦‚æœåªæ‰§è¡Œä¸€æ¬¡ï¼Œæ—¶é—´å¤ªå¿«ï¼Œä¸¤ä¸ªæ—¶é—´å·®å¯èƒ½ä¸º0ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦æ‰§è¡Œä¸‡æ¬¡æ¥è®¡ç®—æ—¶é—´å·®ã€‚</p><h4 id="4-3-2-ç¯å¢ƒå‡†å¤‡"><a href="#4-3-2-ç¯å¢ƒå‡†å¤‡" class="headerlink" title="4.3.2 ç¯å¢ƒå‡†å¤‡"></a>4.3.2 ç¯å¢ƒå‡†å¤‡</h4><ul><li><p>åˆ›å»ºä¸€ä¸ªMavené¡¹ç›®</p></li><li><p>pom.xmlæ·»åŠ Springä¾èµ–</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.10.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.10.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.10.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.aspectj<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>aspectjweaver<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.9.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.47<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.16<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>æ·»åŠ AccountServiceã€AccountServiceImplã€AccountDaoä¸Accountç±»</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">AccountService</span> &#123;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">save</span><span class="params">(Account account)</span>;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">delete</span><span class="params">(Integer id)</span>;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">update</span><span class="params">(Account account)</span>;</span><br><span class="line">    List&lt;Account&gt; <span class="title function_">findAll</span><span class="params">()</span>;</span><br><span class="line">    Account <span class="title function_">findById</span><span class="params">(Integer id)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AccountServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">AccountService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> AccountDao accountDao;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">(Account account)</span> &#123;</span><br><span class="line">        accountDao.save(account);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">(Account account)</span>&#123;</span><br><span class="line">        accountDao.update(account);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">delete</span><span class="params">(Integer id)</span> &#123;</span><br><span class="line">        accountDao.delete(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Account <span class="title function_">findById</span><span class="params">(Integer id)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> accountDao.findById(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> List&lt;Account&gt; <span class="title function_">findAll</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> accountDao.findAll();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">AccountDao</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Insert(&quot;insert into tbl_account(name,money)values(#&#123;name&#125;,#&#123;money&#125;)&quot;)</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">save</span><span class="params">(Account account)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Delete(&quot;delete from tbl_account where id = #&#123;id&#125; &quot;)</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">delete</span><span class="params">(Integer id)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Update(&quot;update tbl_account set name = #&#123;name&#125; , money = #&#123;money&#125; where id = #&#123;id&#125; &quot;)</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">update</span><span class="params">(Account account)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Select(&quot;select * from tbl_account&quot;)</span></span><br><span class="line">    List&lt;Account&gt; <span class="title function_">findAll</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Select(&quot;select * from tbl_account where id = #&#123;id&#125; &quot;)</span></span><br><span class="line">    Account <span class="title function_">findById</span><span class="params">(Integer id)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Account</span> <span class="keyword">implements</span> <span class="title class_">Serializable</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Double money;</span><br><span class="line">    <span class="comment">//setter..getter..toStringæ–¹æ³•çœç•¥</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>resourcesä¸‹æä¾›ä¸€ä¸ªjdbc.properties</p><figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">jdbc.driver</span>=<span class="string">com.mysql.jdbc.Driver</span></span><br><span class="line"><span class="attr">jdbc.url</span>=<span class="string">jdbc:mysql://localhost:3306/spring_db?useSSL=false</span></span><br><span class="line"><span class="attr">jdbc.username</span>=<span class="string">root</span></span><br><span class="line"><span class="attr">jdbc.password</span>=<span class="string">root</span></span><br></pre></td></tr></table></figure></li><li><p>åˆ›å»ºç›¸å…³é…ç½®ç±»</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//Springé…ç½®ç±»:SpringConfig</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ComponentScan(&quot;com.itheima&quot;)</span></span><br><span class="line"><span class="meta">@PropertySource(&quot;classpath:jdbc.properties&quot;)</span></span><br><span class="line"><span class="meta">@Import(&#123;JdbcConfig.class,MybatisConfig.class&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringConfig</span> &#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//JdbcConfigé…ç½®ç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JdbcConfig</span> &#123;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;jdbc.driver&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String driver;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;jdbc.url&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String url;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;jdbc.username&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String userName;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;jdbc.password&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> DataSource <span class="title function_">dataSource</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">DruidDataSource</span> <span class="variable">ds</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DruidDataSource</span>();</span><br><span class="line">        ds.setDriverClassName(driver);</span><br><span class="line">        ds.setUrl(url);</span><br><span class="line">        ds.setUsername(userName);</span><br><span class="line">        ds.setPassword(password);</span><br><span class="line">        <span class="keyword">return</span> ds;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//MybatisConfigé…ç½®ç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MybatisConfig</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> SqlSessionFactoryBean <span class="title function_">sqlSessionFactory</span><span class="params">(DataSource dataSource)</span>&#123;</span><br><span class="line">        <span class="type">SqlSessionFactoryBean</span> <span class="variable">ssfb</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBean</span>();</span><br><span class="line">        ssfb.setTypeAliasesPackage(<span class="string">&quot;com.itheima.domain&quot;</span>);</span><br><span class="line">        ssfb.setDataSource(dataSource);</span><br><span class="line">        <span class="keyword">return</span> ssfb;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> MapperScannerConfigurer <span class="title function_">mapperScannerConfigurer</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">MapperScannerConfigurer</span> <span class="variable">msc</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MapperScannerConfigurer</span>();</span><br><span class="line">        msc.setBasePackage(<span class="string">&quot;com.itheima.dao&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> msc;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>ç¼–å†™Springæ•´åˆJunitçš„æµ‹è¯•ç±»</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RunWith(SpringJUnit4ClassRunner.class)</span></span><br><span class="line"><span class="meta">@ContextConfiguration(classes = SpringConfig.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AccountServiceTestCase</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> AccountService accountService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testFindById</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">Account</span> <span class="variable">ac</span> <span class="operator">=</span> accountService.findById(<span class="number">2</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testFindAll</span><span class="params">()</span>&#123;</span><br><span class="line">        List&lt;Account&gt; all = accountService.findAll();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p>æœ€ç»ˆåˆ›å»ºå¥½çš„é¡¹ç›®ç»“æ„å¦‚ä¸‹:</p><p><img src="/2022/07/27/Spring_day3/1630214631112.png" alt="1630214631112"></p><h4 id="4-3-3-åŠŸèƒ½å¼€å‘"><a href="#4-3-3-åŠŸèƒ½å¼€å‘" class="headerlink" title="4.3.3 åŠŸèƒ½å¼€å‘"></a>4.3.3 åŠŸèƒ½å¼€å‘</h4><h5 id="æ­¥éª¤1ï¼šå¼€å¯SpringAOPçš„æ³¨è§£åŠŸèƒ½"><a href="#æ­¥éª¤1ï¼šå¼€å¯SpringAOPçš„æ³¨è§£åŠŸèƒ½" class="headerlink" title="æ­¥éª¤1ï¼šå¼€å¯SpringAOPçš„æ³¨è§£åŠŸèƒ½"></a>æ­¥éª¤1ï¼šå¼€å¯SpringAOPçš„æ³¨è§£åŠŸèƒ½</h5><p>åœ¨Springçš„ä¸»é…ç½®æ–‡ä»¶SpringConfigç±»ä¸­æ·»åŠ æ³¨è§£</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@EnableAspectJAutoProxy</span></span><br></pre></td></tr></table></figure><h5 id="æ­¥éª¤2ï¼šåˆ›å»ºAOPçš„é€šçŸ¥ç±»"><a href="#æ­¥éª¤2ï¼šåˆ›å»ºAOPçš„é€šçŸ¥ç±»" class="headerlink" title="æ­¥éª¤2ï¼šåˆ›å»ºAOPçš„é€šçŸ¥ç±»"></a>æ­¥éª¤2ï¼šåˆ›å»ºAOPçš„é€šçŸ¥ç±»</h5><ul><li><p>è¯¥ç±»è¦è¢«Springç®¡ç†ï¼Œéœ€è¦æ·»åŠ @Component</p></li><li><p>è¦æ ‡è¯†è¯¥ç±»æ˜¯ä¸€ä¸ªAOPçš„åˆ‡é¢ç±»ï¼Œéœ€è¦æ·»åŠ @Aspect</p></li><li><p>é…ç½®åˆ‡å…¥ç‚¹è¡¨è¾¾å¼ï¼Œéœ€è¦æ·»åŠ ä¸€ä¸ªæ–¹æ³•ï¼Œå¹¶æ·»åŠ @Pointcut</p></li></ul><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ProjectAdvice</span> &#123;</span><br><span class="line">    <span class="comment">//é…ç½®ä¸šåŠ¡å±‚çš„æ‰€æœ‰æ–¹æ³•</span></span><br><span class="line">    <span class="meta">@Pointcut(&quot;execution(* com.itheima.service.*Service.*(..))&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">servicePt</span><span class="params">()</span>&#123;&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">runSpeed</span><span class="params">()</span>&#123;</span><br><span class="line">        </span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="æ­¥éª¤3ï¼šæ·»åŠ ç¯ç»•é€šçŸ¥"><a href="#æ­¥éª¤3ï¼šæ·»åŠ ç¯ç»•é€šçŸ¥" class="headerlink" title="æ­¥éª¤3ï¼šæ·»åŠ ç¯ç»•é€šçŸ¥"></a>æ­¥éª¤3ï¼šæ·»åŠ ç¯ç»•é€šçŸ¥</h5><p>åœ¨runSpeed()æ–¹æ³•ä¸Šæ·»åŠ @Around</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ProjectAdvice</span> &#123;</span><br><span class="line">    <span class="comment">//é…ç½®ä¸šåŠ¡å±‚çš„æ‰€æœ‰æ–¹æ³•</span></span><br><span class="line">    <span class="meta">@Pointcut(&quot;execution(* com.itheima.service.*Service.*(..))&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">servicePt</span><span class="params">()</span>&#123;&#125;</span><br><span class="line">    <span class="comment">//@Around(&quot;ProjectAdvice.servicePt()&quot;) å¯ä»¥ç®€å†™ä¸ºä¸‹é¢çš„æ–¹å¼</span></span><br><span class="line">    <span class="meta">@Around(&quot;servicePt()&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">runSpeed</span><span class="params">(ProceedingJoinPoint pjp)</span>&#123;</span><br><span class="line">        <span class="type">Object</span> <span class="variable">ret</span> <span class="operator">=</span> pjp.proceed();</span><br><span class="line">        <span class="keyword">return</span> ret;</span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„ï¼š</strong>ç›®å‰å¹¶æ²¡æœ‰åšä»»ä½•å¢å¼º</p><h5 id="æ­¥éª¤4ï¼šå®Œæˆæ ¸å¿ƒä¸šåŠ¡ï¼Œè®°å½•ä¸‡æ¬¡æ‰§è¡Œçš„æ—¶é—´"><a href="#æ­¥éª¤4ï¼šå®Œæˆæ ¸å¿ƒä¸šåŠ¡ï¼Œè®°å½•ä¸‡æ¬¡æ‰§è¡Œçš„æ—¶é—´" class="headerlink" title="æ­¥éª¤4ï¼šå®Œæˆæ ¸å¿ƒä¸šåŠ¡ï¼Œè®°å½•ä¸‡æ¬¡æ‰§è¡Œçš„æ—¶é—´"></a>æ­¥éª¤4ï¼šå®Œæˆæ ¸å¿ƒä¸šåŠ¡ï¼Œè®°å½•ä¸‡æ¬¡æ‰§è¡Œçš„æ—¶é—´</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ProjectAdvice</span> &#123;</span><br><span class="line">    <span class="comment">//é…ç½®ä¸šåŠ¡å±‚çš„æ‰€æœ‰æ–¹æ³•</span></span><br><span class="line">    <span class="meta">@Pointcut(&quot;execution(* com.itheima.service.*Service.*(..))&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">servicePt</span><span class="params">()</span>&#123;&#125;</span><br><span class="line">    <span class="comment">//@Around(&quot;ProjectAdvice.servicePt()&quot;) å¯ä»¥ç®€å†™ä¸ºä¸‹é¢çš„æ–¹å¼</span></span><br><span class="line">    <span class="meta">@Around(&quot;servicePt()&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">runSpeed</span><span class="params">(ProceedingJoinPoint pjp)</span>&#123;</span><br><span class="line">        </span><br><span class="line">        <span class="type">long</span> <span class="variable">start</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">10000</span>; i++) &#123;</span><br><span class="line">           pjp.proceed();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">long</span> <span class="variable">end</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">        System.out.println(<span class="string">&quot;ä¸šåŠ¡å±‚æ¥å£ä¸‡æ¬¡æ‰§è¡Œæ—¶é—´: &quot;</span>+(end-start)+<span class="string">&quot;ms&quot;</span>);</span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="æ­¥éª¤5ï¼šè¿è¡Œå•å…ƒæµ‹è¯•ç±»"><a href="#æ­¥éª¤5ï¼šè¿è¡Œå•å…ƒæµ‹è¯•ç±»" class="headerlink" title="æ­¥éª¤5ï¼šè¿è¡Œå•å…ƒæµ‹è¯•ç±»"></a>æ­¥éª¤5ï¼šè¿è¡Œå•å…ƒæµ‹è¯•ç±»</h5><p><img src="/2022/07/27/Spring_day3/1630215355776.png" alt="1630215355776"></p><p><strong>æ³¨æ„ï¼š</strong>å› ä¸ºç¨‹åºæ¯æ¬¡æ‰§è¡Œçš„æ—¶é•¿æ˜¯ä¸ä¸€æ ·çš„ï¼Œæ‰€ä»¥è¿è¡Œå¤šæ¬¡æœ€ç»ˆçš„ç»“æœæ˜¯ä¸ä¸€æ ·çš„ã€‚</p><h5 id="æ­¥éª¤6ï¼šç¨‹åºä¼˜åŒ–"><a href="#æ­¥éª¤6ï¼šç¨‹åºä¼˜åŒ–" class="headerlink" title="æ­¥éª¤6ï¼šç¨‹åºä¼˜åŒ–"></a>æ­¥éª¤6ï¼šç¨‹åºä¼˜åŒ–</h5><p>ç›®å‰ç¨‹åºæ‰€é¢ä¸´çš„é—®é¢˜æ˜¯ï¼Œå¤šä¸ªæ–¹æ³•ä¸€èµ·æ‰§è¡Œæµ‹è¯•çš„æ—¶å€™ï¼Œæ§åˆ¶å°éƒ½æ‰“å°çš„æ˜¯:</p><p><code>ä¸šåŠ¡å±‚æ¥å£ä¸‡æ¬¡æ‰§è¡Œæ—¶é—´:xxxms</code></p><p>æˆ‘ä»¬æ²¡æœ‰åŠæ³•åŒºåˆ†åˆ°åº•æ˜¯å“ªä¸ªæ¥å£çš„å“ªä¸ªæ–¹æ³•æ‰§è¡Œçš„å…·ä½“æ—¶é—´ï¼Œå…·ä½“å¦‚ä½•ä¼˜åŒ–?</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ProjectAdvice</span> &#123;</span><br><span class="line">    <span class="comment">//é…ç½®ä¸šåŠ¡å±‚çš„æ‰€æœ‰æ–¹æ³•</span></span><br><span class="line">    <span class="meta">@Pointcut(&quot;execution(* com.itheima.service.*Service.*(..))&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">servicePt</span><span class="params">()</span>&#123;&#125;</span><br><span class="line">    <span class="comment">//@Around(&quot;ProjectAdvice.servicePt()&quot;) å¯ä»¥ç®€å†™ä¸ºä¸‹é¢çš„æ–¹å¼</span></span><br><span class="line">    <span class="meta">@Around(&quot;servicePt()&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">runSpeed</span><span class="params">(ProceedingJoinPoint pjp)</span>&#123;</span><br><span class="line">        <span class="comment">//è·å–æ‰§è¡Œç­¾åä¿¡æ¯</span></span><br><span class="line">        <span class="type">Signature</span> <span class="variable">signature</span> <span class="operator">=</span> pjp.getSignature();</span><br><span class="line">        <span class="comment">//é€šè¿‡ç­¾åè·å–æ‰§è¡Œæ“ä½œåç§°(æ¥å£å)</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">className</span> <span class="operator">=</span> signature.getDeclaringTypeName();</span><br><span class="line">        <span class="comment">//é€šè¿‡ç­¾åè·å–æ‰§è¡Œæ“ä½œåç§°(æ–¹æ³•å)</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">methodName</span> <span class="operator">=</span> signature.getName();</span><br><span class="line">        </span><br><span class="line">        <span class="type">long</span> <span class="variable">start</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">10000</span>; i++) &#123;</span><br><span class="line">           pjp.proceed();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">long</span> <span class="variable">end</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">        System.out.println(<span class="string">&quot;ä¸‡æ¬¡æ‰§è¡Œï¼š&quot;</span>+ className+<span class="string">&quot;.&quot;</span>+methodName+<span class="string">&quot;----&gt;&quot;</span> +(end-start) + <span class="string">&quot;ms&quot;</span>);</span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="æ­¥éª¤7ï¼šè¿è¡Œå•å…ƒæµ‹è¯•ç±»"><a href="#æ­¥éª¤7ï¼šè¿è¡Œå•å…ƒæµ‹è¯•ç±»" class="headerlink" title="æ­¥éª¤7ï¼šè¿è¡Œå•å…ƒæµ‹è¯•ç±»"></a>æ­¥éª¤7ï¼šè¿è¡Œå•å…ƒæµ‹è¯•ç±»</h5><p><img src="/2022/07/27/Spring_day3/1630215743444.png" alt="1630215743444"></p><p><strong>è¡¥å……è¯´æ˜</strong></p><ul><li><p>å½“å‰æµ‹è¯•çš„æ¥å£æ‰§è¡Œæ•ˆç‡ä»…ä»…æ˜¯ä¸€ä¸ªç†è®ºå€¼ï¼Œå¹¶ä¸æ˜¯ä¸€æ¬¡å®Œæ•´çš„æ‰§è¡Œè¿‡ç¨‹ã€‚</p></li><li><p>è¿™å—åªæ˜¯é€šè¿‡è¯¥æ¡ˆä¾‹æŠŠAOPçš„ä½¿ç”¨è¿›è¡Œäº†å­¦ä¹ ï¼Œå…·ä½“çš„å®é™…å€¼æ˜¯æœ‰å¾ˆå¤šå› ç´ å…±åŒå†³å®šçš„ã€‚</p></li></ul><h3 id="4-4-AOPé€šçŸ¥è·å–æ•°æ®"><a href="#4-4-AOPé€šçŸ¥è·å–æ•°æ®" class="headerlink" title="4.4 AOPé€šçŸ¥è·å–æ•°æ®"></a>4.4 AOPé€šçŸ¥è·å–æ•°æ®</h3><p>ç›®å‰æˆ‘ä»¬å†™AOPä»…ä»…æ˜¯åœ¨åŸå§‹æ–¹æ³•å‰åè¿½åŠ ä¸€äº›æ“ä½œï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬è¦è¯´è¯´AOPä¸­æ•°æ®ç›¸å…³çš„å†…å®¹ï¼Œæˆ‘ä»¬å°†ä»<code>è·å–å‚æ•°</code>ã€<code>è·å–è¿”å›å€¼</code>å’Œ<code>è·å–å¼‚å¸¸</code>ä¸‰ä¸ªæ–¹é¢æ¥ç ”ç©¶åˆ‡å…¥ç‚¹çš„ç›¸å…³ä¿¡æ¯ã€‚</p><p>å‰é¢æˆ‘ä»¬ä»‹ç»é€šçŸ¥ç±»å‹çš„æ—¶å€™æ€»å…±è®²äº†äº”ç§ï¼Œé‚£ä¹ˆå¯¹äºè¿™äº”ç§ç±»å‹éƒ½ä¼šæœ‰å‚æ•°ï¼Œè¿”å›å€¼å’Œå¼‚å¸¸å—?</p><p>æˆ‘ä»¬å…ˆæ¥ä¸€ä¸ªä¸ªåˆ†æä¸‹:</p><ul><li>è·å–åˆ‡å…¥ç‚¹æ–¹æ³•çš„å‚æ•°ï¼Œæ‰€æœ‰çš„é€šçŸ¥ç±»å‹éƒ½å¯ä»¥è·å–å‚æ•°<ul><li>JoinPointï¼šé€‚ç”¨äºå‰ç½®ã€åç½®ã€è¿”å›åã€æŠ›å‡ºå¼‚å¸¸åé€šçŸ¥</li><li>ProceedingJoinPointï¼šé€‚ç”¨äºç¯ç»•é€šçŸ¥</li></ul></li><li>è·å–åˆ‡å…¥ç‚¹æ–¹æ³•è¿”å›å€¼ï¼Œå‰ç½®å’ŒæŠ›å‡ºå¼‚å¸¸åé€šçŸ¥æ˜¯æ²¡æœ‰è¿”å›å€¼ï¼Œåç½®é€šçŸ¥å¯æœ‰å¯æ— ï¼Œæ‰€ä»¥ä¸åšç ”ç©¶<ul><li>è¿”å›åé€šçŸ¥</li><li>ç¯ç»•é€šçŸ¥</li></ul></li><li>è·å–åˆ‡å…¥ç‚¹æ–¹æ³•è¿è¡Œå¼‚å¸¸ä¿¡æ¯ï¼Œå‰ç½®å’Œè¿”å›åé€šçŸ¥æ˜¯ä¸ä¼šæœ‰ï¼Œåç½®é€šçŸ¥å¯æœ‰å¯æ— ï¼Œæ‰€ä»¥ä¸åšç ”ç©¶<ul><li>æŠ›å‡ºå¼‚å¸¸åé€šçŸ¥</li><li>ç¯ç»•é€šçŸ¥</li></ul></li></ul><h4 id="4-4-1-ç¯å¢ƒå‡†å¤‡"><a href="#4-4-1-ç¯å¢ƒå‡†å¤‡" class="headerlink" title="4.4.1 ç¯å¢ƒå‡†å¤‡"></a>4.4.1 ç¯å¢ƒå‡†å¤‡</h4><ul><li><p>åˆ›å»ºä¸€ä¸ªMavené¡¹ç›®</p></li><li><p>pom.xmlæ·»åŠ Springä¾èµ–</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.10.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.aspectj<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>aspectjweaver<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.9.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>æ·»åŠ BookDaoå’ŒBookDaoImplç±»</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">BookDao</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">findName</span><span class="params">(<span class="type">int</span> id)</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookDaoImpl</span> <span class="keyword">implements</span> <span class="title class_">BookDao</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">findName</span><span class="params">(<span class="type">int</span> id)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;id:&quot;</span>+id);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;itcast&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>åˆ›å»ºSpringçš„é…ç½®ç±»</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ComponentScan(&quot;com.itheima&quot;)</span></span><br><span class="line"><span class="meta">@EnableAspectJAutoProxy</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringConfig</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>ç¼–å†™é€šçŸ¥ç±»</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyAdvice</span> &#123;</span><br><span class="line">    <span class="meta">@Pointcut(&quot;execution(* com.itheima.dao.BookDao.findName(..))&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">pt</span><span class="params">()</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Before(&quot;pt()&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">before</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;before advice ...&quot;</span> );</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@After(&quot;pt()&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">after</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;after advice ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Around(&quot;pt()&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">around</span><span class="params">()</span> <span class="keyword">throws</span> Throwable&#123;</span><br><span class="line">        <span class="type">Object</span> <span class="variable">ret</span> <span class="operator">=</span> pjp.proceed();</span><br><span class="line">        <span class="keyword">return</span> ret;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@AfterReturning(&quot;pt()&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterReturning</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;afterReturning advice ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@AfterThrowing(&quot;pt()&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterThrowing</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;afterThrowing advice ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>ç¼–å†™Appè¿è¡Œç±»</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">App</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">ApplicationContext</span> <span class="variable">ctx</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AnnotationConfigApplicationContext</span>(SpringConfig.class);</span><br><span class="line">        <span class="type">BookDao</span> <span class="variable">bookDao</span> <span class="operator">=</span> ctx.getBean(BookDao.class);</span><br><span class="line">        <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> bookDao.findName(<span class="number">100</span>);</span><br><span class="line">        System.out.println(name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p>æœ€ç»ˆåˆ›å»ºå¥½çš„é¡¹ç›®ç»“æ„å¦‚ä¸‹:</p><p><img src="/2022/07/27/Spring_day3/1630233154992.png" alt="1630233154992"></p><h4 id="4-4-2-è·å–å‚æ•°"><a href="#4-4-2-è·å–å‚æ•°" class="headerlink" title="4.4.2 è·å–å‚æ•°"></a>4.4.2 è·å–å‚æ•°</h4><h5 id="éç¯ç»•é€šçŸ¥è·å–æ–¹å¼"><a href="#éç¯ç»•é€šçŸ¥è·å–æ–¹å¼" class="headerlink" title="éç¯ç»•é€šçŸ¥è·å–æ–¹å¼"></a>éç¯ç»•é€šçŸ¥è·å–æ–¹å¼</h5><p>åœ¨æ–¹æ³•ä¸Šæ·»åŠ JoinPointï¼Œé€šè¿‡JoinPointæ¥è·å–å‚æ•°</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyAdvice</span> &#123;</span><br><span class="line">    <span class="meta">@Pointcut(&quot;execution(* com.itheima.dao.BookDao.findName(..))&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">pt</span><span class="params">()</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Before(&quot;pt()&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">before</span><span class="params">(JoinPoint jp)</span> </span><br><span class="line">        Object[] args = jp.getArgs();</span><br><span class="line">        System.out.println(Arrays.toString(args));</span><br><span class="line">        System.out.println(<span class="string">&quot;before advice ...&quot;</span> );</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">//...å…¶ä»–çš„ç•¥</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿è¡ŒAppç±»ï¼Œå¯ä»¥è·å–å¦‚ä¸‹å†…å®¹ï¼Œè¯´æ˜å‚æ•°100å·²ç»è¢«è·å–</p><p><img src="/2022/07/27/Spring_day3/1630233291929.png" alt="1630233291929"></p><p><strong>æ€è€ƒ:æ–¹æ³•çš„å‚æ•°åªæœ‰ä¸€ä¸ªï¼Œä¸ºä»€ä¹ˆè·å–çš„æ˜¯ä¸€ä¸ªæ•°ç»„?</strong></p><p>å› ä¸ºå‚æ•°çš„ä¸ªæ•°æ˜¯ä¸å›ºå®šçš„ï¼Œæ‰€ä»¥ä½¿ç”¨æ•°ç»„æ›´é€šé…äº›ã€‚</p><p>å¦‚æœå°†å‚æ•°æ”¹æˆä¸¤ä¸ªä¼šæ˜¯ä»€ä¹ˆæ•ˆæœå‘¢?</p><p>(1)ä¿®æ”¹BookDaoæ¥å£å’ŒBookDaoImplå®ç°ç±»</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">BookDao</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">findName</span><span class="params">(<span class="type">int</span> id,String password)</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookDaoImpl</span> <span class="keyword">implements</span> <span class="title class_">BookDao</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">findName</span><span class="params">(<span class="type">int</span> id,String password)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;id:&quot;</span>+id);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;itcast&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>(2)ä¿®æ”¹Appç±»ï¼Œè°ƒç”¨æ–¹æ³•ä¼ å…¥å¤šä¸ªå‚æ•°</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">App</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">ApplicationContext</span> <span class="variable">ctx</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AnnotationConfigApplicationContext</span>(SpringConfig.class);</span><br><span class="line">        <span class="type">BookDao</span> <span class="variable">bookDao</span> <span class="operator">=</span> ctx.getBean(BookDao.class);</span><br><span class="line">        <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> bookDao.findName(<span class="number">100</span>,<span class="string">&quot;itheima&quot;</span>);</span><br><span class="line">        System.out.println(name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>(3)è¿è¡ŒAppï¼ŒæŸ¥çœ‹ç»“æœ,è¯´æ˜ä¸¤ä¸ªå‚æ•°éƒ½å·²ç»è¢«è·å–åˆ°</p><p><img src="/2022/07/27/Spring_day3/1630233548743.png" alt="1630233548743"></p><p><strong>è¯´æ˜:</strong></p><p>ä½¿ç”¨JoinPointçš„æ–¹å¼è·å–å‚æ•°é€‚ç”¨äº<code>å‰ç½®</code>ã€<code>åç½®</code>ã€<code>è¿”å›å</code>ã€<code>æŠ›å‡ºå¼‚å¸¸å</code>é€šçŸ¥ã€‚å‰©ä¸‹çš„å¤§å®¶è‡ªè¡Œå»éªŒè¯ã€‚</p><h5 id="ç¯ç»•é€šçŸ¥è·å–æ–¹å¼"><a href="#ç¯ç»•é€šçŸ¥è·å–æ–¹å¼" class="headerlink" title="ç¯ç»•é€šçŸ¥è·å–æ–¹å¼"></a>ç¯ç»•é€šçŸ¥è·å–æ–¹å¼</h5><p>ç¯ç»•é€šçŸ¥ä½¿ç”¨çš„æ˜¯ProceedingJoinPointï¼Œå› ä¸ºProceedingJoinPointæ˜¯JoinPointç±»çš„å­ç±»ï¼Œæ‰€ä»¥å¯¹äºProceedingJoinPointç±»ä¸­åº”è¯¥ä¹Ÿä¼šæœ‰å¯¹åº”çš„<code>getArgs()</code>æ–¹æ³•ï¼Œæˆ‘ä»¬å»éªŒè¯ä¸‹:</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyAdvice</span> &#123;</span><br><span class="line">    <span class="meta">@Pointcut(&quot;execution(* com.itheima.dao.BookDao.findName(..))&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">pt</span><span class="params">()</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Around(&quot;pt()&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">around</span><span class="params">(ProceedingJoinPoint pjp)</span><span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">        Object[] args = pjp.getArgs();</span><br><span class="line">        System.out.println(Arrays.toString(args));</span><br><span class="line">        <span class="type">Object</span> <span class="variable">ret</span> <span class="operator">=</span> pjp.proceed();</span><br><span class="line">        <span class="keyword">return</span> ret;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">//å…¶ä»–çš„ç•¥</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿è¡ŒAppåæŸ¥çœ‹è¿è¡Œç»“æœï¼Œè¯´æ˜ProceedingJoinPointä¹Ÿæ˜¯å¯ä»¥é€šè¿‡getArgs()è·å–å‚æ•°</p><p><img src="/2022/07/27/Spring_day3/1630233974310.png" alt="1630233974310"></p><p><strong>æ³¨æ„:</strong></p><ul><li><p>pjp.proceed()æ–¹æ³•æ˜¯æœ‰ä¸¤ä¸ªæ„é€ æ–¹æ³•ï¼Œåˆ†åˆ«æ˜¯:</p><p><img src="/2022/07/27/Spring_day3/1630234756123.png" alt="1630234756123"></p><ul><li><p>è°ƒç”¨æ— å‚æ•°çš„proceedï¼Œå½“åŸå§‹æ–¹æ³•æœ‰å‚æ•°ï¼Œä¼šåœ¨è°ƒç”¨çš„è¿‡ç¨‹ä¸­è‡ªåŠ¨ä¼ å…¥å‚æ•°</p></li><li><p>æ‰€ä»¥è°ƒç”¨è¿™ä¸¤ä¸ªæ–¹æ³•çš„ä»»æ„ä¸€ä¸ªéƒ½å¯ä»¥å®ŒæˆåŠŸèƒ½</p></li><li><p>ä½†æ˜¯å½“éœ€è¦ä¿®æ”¹åŸå§‹æ–¹æ³•çš„å‚æ•°æ—¶ï¼Œå°±åªèƒ½é‡‡ç”¨å¸¦æœ‰å‚æ•°çš„æ–¹æ³•,å¦‚ä¸‹:</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyAdvice</span> &#123;</span><br><span class="line">    <span class="meta">@Pointcut(&quot;execution(* com.itheima.dao.BookDao.findName(..))&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">pt</span><span class="params">()</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Around(&quot;pt()&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">around</span><span class="params">(ProceedingJoinPoint pjp)</span> <span class="keyword">throws</span> Throwable&#123;</span><br><span class="line">        Object[] args = pjp.getArgs();</span><br><span class="line">        System.out.println(Arrays.toString(args));</span><br><span class="line">        args[<span class="number">0</span>] = <span class="number">666</span>;</span><br><span class="line">        <span class="type">Object</span> <span class="variable">ret</span> <span class="operator">=</span> pjp.proceed(args);</span><br><span class="line">        <span class="keyword">return</span> ret;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">//å…¶ä»–çš„ç•¥</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æœ‰äº†è¿™ä¸ªç‰¹æ€§åï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨ç¯ç»•é€šçŸ¥ä¸­å¯¹åŸå§‹æ–¹æ³•çš„å‚æ•°è¿›è¡Œæ‹¦æˆªè¿‡æ»¤ï¼Œé¿å…ç”±äºå‚æ•°çš„é—®é¢˜å¯¼è‡´ç¨‹åºæ— æ³•æ­£ç¡®è¿è¡Œï¼Œä¿è¯ä»£ç çš„å¥å£®æ€§ã€‚</p></li></ul></li></ul><h4 id="4-4-3-è·å–è¿”å›å€¼"><a href="#4-4-3-è·å–è¿”å›å€¼" class="headerlink" title="4.4.3 è·å–è¿”å›å€¼"></a>4.4.3 è·å–è¿”å›å€¼</h4><p>å¯¹äºè¿”å›å€¼ï¼Œåªæœ‰è¿”å›å<code>AfterReturing</code>å’Œç¯ç»•<code>Around</code>è¿™ä¸¤ä¸ªé€šçŸ¥ç±»å‹å¯ä»¥è·å–ï¼Œå…·ä½“å¦‚ä½•è·å–?</p><h5 id="ç¯ç»•é€šçŸ¥è·å–è¿”å›å€¼"><a href="#ç¯ç»•é€šçŸ¥è·å–è¿”å›å€¼" class="headerlink" title="ç¯ç»•é€šçŸ¥è·å–è¿”å›å€¼"></a>ç¯ç»•é€šçŸ¥è·å–è¿”å›å€¼</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyAdvice</span> &#123;</span><br><span class="line">    <span class="meta">@Pointcut(&quot;execution(* com.itheima.dao.BookDao.findName(..))&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">pt</span><span class="params">()</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Around(&quot;pt()&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">around</span><span class="params">(ProceedingJoinPoint pjp)</span> <span class="keyword">throws</span> Throwable&#123;</span><br><span class="line">        Object[] args = pjp.getArgs();</span><br><span class="line">        System.out.println(Arrays.toString(args));</span><br><span class="line">        args[<span class="number">0</span>] = <span class="number">666</span>;</span><br><span class="line">        <span class="type">Object</span> <span class="variable">ret</span> <span class="operator">=</span> pjp.proceed(args);</span><br><span class="line">        <span class="keyword">return</span> ret;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">//å…¶ä»–çš„ç•¥</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šè¿°ä»£ç ä¸­ï¼Œ<code>ret</code>å°±æ˜¯æ–¹æ³•çš„è¿”å›å€¼ï¼Œæˆ‘ä»¬æ˜¯å¯ä»¥ç›´æ¥è·å–ï¼Œä¸ä½†å¯ä»¥è·å–ï¼Œå¦‚æœéœ€è¦è¿˜å¯ä»¥è¿›è¡Œä¿®æ”¹ã€‚</p><h5 id="è¿”å›åé€šçŸ¥è·å–è¿”å›å€¼"><a href="#è¿”å›åé€šçŸ¥è·å–è¿”å›å€¼" class="headerlink" title="è¿”å›åé€šçŸ¥è·å–è¿”å›å€¼"></a>è¿”å›åé€šçŸ¥è·å–è¿”å›å€¼</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyAdvice</span> &#123;</span><br><span class="line">    <span class="meta">@Pointcut(&quot;execution(* com.itheima.dao.BookDao.findName(..))&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">pt</span><span class="params">()</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@AfterReturning(value = &quot;pt()&quot;,returning = &quot;ret&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterReturning</span><span class="params">(Object ret)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;afterReturning advice ...&quot;</span>+ret);</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">//å…¶ä»–çš„ç•¥</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„ï¼š</strong></p><p>(1)å‚æ•°åçš„é—®é¢˜</p><p><img src="/2022/07/27/Spring_day3/1630237320870.png" alt="1630237320870"></p><p>(2)afterReturningæ–¹æ³•å‚æ•°ç±»å‹çš„é—®é¢˜</p><p>å‚æ•°ç±»å‹å¯ä»¥å†™æˆStringï¼Œä½†æ˜¯ä¸ºäº†èƒ½åŒ¹é…æ›´å¤šçš„å‚æ•°ç±»å‹ï¼Œå»ºè®®å†™æˆObjectç±»å‹</p><p>(3)afterReturningæ–¹æ³•å‚æ•°çš„é¡ºåºé—®é¢˜</p><p><img src="/2022/07/27/Spring_day3/1630237586682.png" alt="1630237586682"></p><p>è¿è¡ŒAppåæŸ¥çœ‹è¿è¡Œç»“æœï¼Œè¯´æ˜è¿”å›å€¼å·²ç»è¢«è·å–åˆ°</p><p><img src="/2022/07/27/Spring_day3/1630237372286.png" alt="1630237372286"></p><h4 id="4-4-4-è·å–å¼‚å¸¸"><a href="#4-4-4-è·å–å¼‚å¸¸" class="headerlink" title="4.4.4 è·å–å¼‚å¸¸"></a>4.4.4 è·å–å¼‚å¸¸</h4><p>å¯¹äºè·å–æŠ›å‡ºçš„å¼‚å¸¸ï¼Œåªæœ‰æŠ›å‡ºå¼‚å¸¸å<code>AfterThrowing</code>å’Œç¯ç»•<code>Around</code>è¿™ä¸¤ä¸ªé€šçŸ¥ç±»å‹å¯ä»¥è·å–ï¼Œå…·ä½“å¦‚ä½•è·å–?</p><h5 id="ç¯ç»•é€šçŸ¥è·å–å¼‚å¸¸"><a href="#ç¯ç»•é€šçŸ¥è·å–å¼‚å¸¸" class="headerlink" title="ç¯ç»•é€šçŸ¥è·å–å¼‚å¸¸"></a>ç¯ç»•é€šçŸ¥è·å–å¼‚å¸¸</h5><p>è¿™å—æ¯”è¾ƒç®€å•ï¼Œä»¥å‰æˆ‘ä»¬æ˜¯æŠ›å‡ºå¼‚å¸¸ï¼Œç°åœ¨åªéœ€è¦å°†å¼‚å¸¸æ•è·ï¼Œå°±å¯ä»¥è·å–åˆ°åŸå§‹æ–¹æ³•çš„å¼‚å¸¸ä¿¡æ¯äº†</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyAdvice</span> &#123;</span><br><span class="line">    <span class="meta">@Pointcut(&quot;execution(* com.itheima.dao.BookDao.findName(..))&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">pt</span><span class="params">()</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Around(&quot;pt()&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">around</span><span class="params">(ProceedingJoinPoint pjp)</span>&#123;</span><br><span class="line">        Object[] args = pjp.getArgs();</span><br><span class="line">        System.out.println(Arrays.toString(args));</span><br><span class="line">        args[<span class="number">0</span>] = <span class="number">666</span>;</span><br><span class="line">        <span class="type">Object</span> <span class="variable">ret</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            ret = pjp.proceed(args);</span><br><span class="line">        &#125;<span class="keyword">catch</span>(Throwable throwable)&#123;</span><br><span class="line">            t.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ret;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">//å…¶ä»–çš„ç•¥</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨catchæ–¹æ³•ä¸­å°±å¯ä»¥è·å–åˆ°å¼‚å¸¸ï¼Œè‡³äºè·å–åˆ°å¼‚å¸¸ä»¥åè¯¥å¦‚ä½•å¤„ç†ï¼Œè¿™ä¸ªå°±å’Œä½ çš„ä¸šåŠ¡éœ€æ±‚æœ‰å…³äº†ã€‚</p><h5 id="æŠ›å‡ºå¼‚å¸¸åé€šçŸ¥è·å–å¼‚å¸¸"><a href="#æŠ›å‡ºå¼‚å¸¸åé€šçŸ¥è·å–å¼‚å¸¸" class="headerlink" title="æŠ›å‡ºå¼‚å¸¸åé€šçŸ¥è·å–å¼‚å¸¸"></a>æŠ›å‡ºå¼‚å¸¸åé€šçŸ¥è·å–å¼‚å¸¸</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyAdvice</span> &#123;</span><br><span class="line">    <span class="meta">@Pointcut(&quot;execution(* com.itheima.dao.BookDao.findName(..))&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">pt</span><span class="params">()</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@AfterThrowing(value = &quot;pt()&quot;,throwing = &quot;t&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterThrowing</span><span class="params">(Throwable t)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;afterThrowing advice ...&quot;</span>+t);</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">//å…¶ä»–çš„ç•¥</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚ä½•è®©åŸå§‹æ–¹æ³•æŠ›å‡ºå¼‚å¸¸ï¼Œæ–¹å¼æœ‰å¾ˆå¤šï¼Œ</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookDaoImpl</span> <span class="keyword">implements</span> <span class="title class_">BookDao</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">findName</span><span class="params">(<span class="type">int</span> id,String password)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;id:&quot;</span>+id);</span><br><span class="line">        <span class="keyword">if</span>(<span class="literal">true</span>)&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">NullPointerException</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;itcast&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„ï¼š</strong></p><p><img src="/2022/07/27/Spring_day3/1630239939043.png" alt="1630239939043"></p><p>è¿è¡ŒAppåï¼ŒæŸ¥çœ‹æ§åˆ¶å°ï¼Œå°±èƒ½çœ‹çš„å¼‚å¸¸ä¿¡æ¯è¢«æ‰“å°åˆ°æ§åˆ¶å°</p><p><img src="/2022/07/27/Spring_day3/1630239997560.png" alt="1630239997560"></p><p>è‡³æ­¤ï¼ŒAOPé€šçŸ¥å¦‚ä½•è·å–æ•°æ®å°±å·²ç»è®²è§£å®Œäº†ï¼Œæ•°æ®ä¸­åŒ…å«<code>å‚æ•°</code>ã€<code>è¿”å›å€¼</code>ã€<code>å¼‚å¸¸(äº†è§£)</code>ã€‚</p><h3 id="4-5-ç™¾åº¦ç½‘ç›˜å¯†ç æ•°æ®å…¼å®¹å¤„ç†"><a href="#4-5-ç™¾åº¦ç½‘ç›˜å¯†ç æ•°æ®å…¼å®¹å¤„ç†" class="headerlink" title="4.5 ç™¾åº¦ç½‘ç›˜å¯†ç æ•°æ®å…¼å®¹å¤„ç†"></a>4.5 ç™¾åº¦ç½‘ç›˜å¯†ç æ•°æ®å…¼å®¹å¤„ç†</h3><h4 id="4-5-1-éœ€æ±‚åˆ†æ"><a href="#4-5-1-éœ€æ±‚åˆ†æ" class="headerlink" title="4.5.1 éœ€æ±‚åˆ†æ"></a>4.5.1 éœ€æ±‚åˆ†æ</h4><p>éœ€æ±‚: å¯¹ç™¾åº¦ç½‘ç›˜åˆ†äº«é“¾æ¥è¾“å…¥å¯†ç æ—¶å°¾éƒ¨å¤šè¾“å…¥çš„ç©ºæ ¼åšå…¼å®¹å¤„ç†ã€‚</p><p><img src="/2022/07/27/Spring_day3/1630240203033.png" alt="1630240203033"></p><p>é—®é¢˜æè¿°:</p><ul><li><p>ç‚¹å‡»é“¾æ¥ï¼Œä¼šæç¤ºï¼Œè¯·è¾“å…¥æå–ç ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º</p><p><img src="/2022/07/27/Spring_day3/1630240528228.png" alt="1630240528228"></p></li><li><p>å½“æˆ‘ä»¬ä»åˆ«äººå‘ç»™æˆ‘ä»¬çš„å†…å®¹ä¸­å¤åˆ¶æå–ç çš„æ—¶å€™ï¼Œæœ‰æ—¶å€™ä¼šå¤šå¤åˆ¶åˆ°ä¸€äº›ç©ºæ ¼ï¼Œç›´æ¥ç²˜è´´åˆ°ç™¾åº¦çš„æå–ç è¾“å…¥æ¡†</p></li><li><p>ä½†æ˜¯ç™¾åº¦é‚£è¾¹è®°å½•çš„æå–ç æ˜¯æ²¡æœ‰ç©ºæ ¼çš„</p></li><li><p>è¿™ä¸ªæ—¶å€™å¦‚æœä¸åšå¤„ç†ï¼Œç›´æ¥å¯¹æ¯”çš„è¯ï¼Œå°±ä¼šå¼•å‘æå–ç ä¸ä¸€è‡´ï¼Œå¯¼è‡´æ— æ³•è®¿é—®ç™¾åº¦ç›˜ä¸Šçš„å†…å®¹</p></li><li><p>æ‰€ä»¥å¤šè¾“å…¥ä¸€ä¸ªç©ºæ ¼å¯èƒ½ä¼šå¯¼è‡´é¡¹ç›®çš„åŠŸèƒ½æ— æ³•æ­£å¸¸ä½¿ç”¨ã€‚</p></li><li><p>æ­¤æ—¶æˆ‘ä»¬å°±æƒ³èƒ½ä¸èƒ½å°†è¾“å…¥çš„å‚æ•°å…ˆå¸®ç”¨æˆ·å»æ‰ç©ºæ ¼å†æ“ä½œå‘¢?</p></li></ul><p>ç­”æ¡ˆæ˜¯å¯ä»¥çš„ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨ä¸šåŠ¡æ–¹æ³•æ‰§è¡Œä¹‹å‰å¯¹æ‰€æœ‰çš„è¾“å…¥å‚æ•°è¿›è¡Œæ ¼å¼å¤„ç†â€”â€”<code>trim()</code></p><ul><li>æ˜¯å¯¹æ‰€æœ‰çš„å‚æ•°éƒ½éœ€è¦å»é™¤ç©ºæ ¼ä¹ˆ?</li></ul><p>ä¹Ÿæ²¡æœ‰å¿…è¦ï¼Œä¸€èˆ¬åªéœ€è¦é’ˆå¯¹å­—ç¬¦ä¸²å¤„ç†å³å¯ã€‚</p><ul><li>ä»¥åæ¶‰åŠåˆ°éœ€è¦å»é™¤å‰åç©ºæ ¼çš„ä¸šåŠ¡å¯èƒ½ä¼šæœ‰å¾ˆå¤šï¼Œè¿™ä¸ªå»ç©ºæ ¼çš„ä»£ç æ˜¯æ¯ä¸ªä¸šåŠ¡éƒ½å†™ä¹ˆ?</li></ul><p>å¯ä»¥è€ƒè™‘ä½¿ç”¨AOPæ¥ç»Ÿä¸€å¤„ç†ã€‚</p><ul><li>AOPæœ‰äº”ç§é€šçŸ¥ç±»å‹ï¼Œè¯¥ä½¿ç”¨å“ªç§å‘¢?</li></ul><p>æˆ‘ä»¬çš„éœ€æ±‚æ˜¯å°†åŸå§‹æ–¹æ³•çš„å‚æ•°å¤„ç†ååœ¨å‚ä¸åŸå§‹æ–¹æ³•çš„è°ƒç”¨ï¼Œèƒ½åšè¿™ä»¶äº‹çš„å°±åªæœ‰ç¯ç»•é€šçŸ¥ã€‚</p><p>ç»¼ä¸Šæ‰€è¿°ï¼Œæˆ‘ä»¬éœ€è¦è€ƒè™‘ä¸¤ä»¶äº‹:<br>â‘ ï¼šåœ¨ä¸šåŠ¡æ–¹æ³•æ‰§è¡Œä¹‹å‰å¯¹æ‰€æœ‰çš„è¾“å…¥å‚æ•°è¿›è¡Œæ ¼å¼å¤„ç†â€”â€”<code>trim()</code><br>â‘¡ï¼šä½¿ç”¨å¤„ç†åçš„å‚æ•°è°ƒç”¨åŸå§‹æ–¹æ³•â€”â€”ç¯ç»•é€šçŸ¥ä¸­å­˜åœ¨å¯¹åŸå§‹æ–¹æ³•çš„è°ƒç”¨</p><h4 id="4-5-2-ç¯å¢ƒå‡†å¤‡"><a href="#4-5-2-ç¯å¢ƒå‡†å¤‡" class="headerlink" title="4.5.2 ç¯å¢ƒå‡†å¤‡"></a>4.5.2 ç¯å¢ƒå‡†å¤‡</h4><ul><li><p>åˆ›å»ºä¸€ä¸ªMavené¡¹ç›®</p></li><li><p>pom.xmlæ·»åŠ Springä¾èµ–</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.10.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.aspectj<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>aspectjweaver<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.9.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>æ·»åŠ ResourcesServiceï¼ŒResourcesServiceImpl,ResourcesDaoå’ŒResourcesDaoImplç±»</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">ResourcesDao</span> &#123;</span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">readResources</span><span class="params">(String url, String password)</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ResourcesDaoImpl</span> <span class="keyword">implements</span> <span class="title class_">ResourcesDao</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">readResources</span><span class="params">(String url, String password)</span> &#123;</span><br><span class="line">        <span class="comment">//æ¨¡æ‹Ÿæ ¡éªŒ</span></span><br><span class="line">        <span class="keyword">return</span> password.equals(<span class="string">&quot;root&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">ResourcesService</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">openURL</span><span class="params">(String url ,String password)</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ResourcesServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">ResourcesService</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> ResourcesDao resourcesDao;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">openURL</span><span class="params">(String url, String password)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> resourcesDao.readResources(url,password);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>åˆ›å»ºSpringçš„é…ç½®ç±»</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ComponentScan(&quot;com.itheima&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringConfig</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>ç¼–å†™Appè¿è¡Œç±»</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">App</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">ApplicationContext</span> <span class="variable">ctx</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AnnotationConfigApplicationContext</span>(SpringConfig.class);</span><br><span class="line">        <span class="type">ResourcesService</span> <span class="variable">resourcesService</span> <span class="operator">=</span> ctx.getBean(ResourcesService.class);</span><br><span class="line">        <span class="type">boolean</span> <span class="variable">flag</span> <span class="operator">=</span> resourcesService.openURL(<span class="string">&quot;http://pan.baidu.com/haha&quot;</span>, <span class="string">&quot;root&quot;</span>);</span><br><span class="line">        System.out.println(flag);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p>æœ€ç»ˆåˆ›å»ºå¥½çš„é¡¹ç›®ç»“æ„å¦‚ä¸‹:</p><p><img src="/2022/07/27/Spring_day3/1630241681697.png" alt="1630241681697"></p><p>ç°åœ¨é¡¹ç›®çš„æ•ˆæœæ˜¯ï¼Œå½“è¾“å…¥å¯†ç ä¸ºâ€rootâ€æ§åˆ¶å°æ‰“å°ä¸ºtrue,å¦‚æœå¯†ç æ”¹ä¸ºâ€root  â€œæ§åˆ¶å°æ‰“å°çš„æ˜¯false</p><p>éœ€æ±‚æ˜¯ä½¿ç”¨AOPå°†å‚æ•°è¿›è¡Œç»Ÿä¸€å¤„ç†ï¼Œä¸ç®¡è¾“å…¥çš„å¯†ç <code>root</code>å‰ååŒ…å«å¤šå°‘ä¸ªç©ºæ ¼ï¼Œæœ€ç»ˆæ§åˆ¶å°æ‰“å°çš„éƒ½æ˜¯trueã€‚</p><h4 id="4-5-3-å…·ä½“å®ç°"><a href="#4-5-3-å…·ä½“å®ç°" class="headerlink" title="4.5.3 å…·ä½“å®ç°"></a>4.5.3 å…·ä½“å®ç°</h4><h5 id="æ­¥éª¤1-å¼€å¯SpringAOPçš„æ³¨è§£åŠŸèƒ½"><a href="#æ­¥éª¤1-å¼€å¯SpringAOPçš„æ³¨è§£åŠŸèƒ½" class="headerlink" title="æ­¥éª¤1:å¼€å¯SpringAOPçš„æ³¨è§£åŠŸèƒ½"></a>æ­¥éª¤1:å¼€å¯SpringAOPçš„æ³¨è§£åŠŸèƒ½</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ComponentScan(&quot;com.itheima&quot;)</span></span><br><span class="line"><span class="meta">@EnableAspectJAutoProxy</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringConfig</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="æ­¥éª¤2-ç¼–å†™é€šçŸ¥ç±»"><a href="#æ­¥éª¤2-ç¼–å†™é€šçŸ¥ç±»" class="headerlink" title="æ­¥éª¤2:ç¼–å†™é€šçŸ¥ç±»"></a>æ­¥éª¤2:ç¼–å†™é€šçŸ¥ç±»</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DataAdvice</span> &#123;</span><br><span class="line">    <span class="meta">@Pointcut(&quot;execution(boolean com.itheima.service.*Service.*(*,*))&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">servicePt</span><span class="params">()</span>&#123;&#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="æ­¥éª¤3-æ·»åŠ ç¯ç»•é€šçŸ¥"><a href="#æ­¥éª¤3-æ·»åŠ ç¯ç»•é€šçŸ¥" class="headerlink" title="æ­¥éª¤3:æ·»åŠ ç¯ç»•é€šçŸ¥"></a>æ­¥éª¤3:æ·»åŠ ç¯ç»•é€šçŸ¥</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DataAdvice</span> &#123;</span><br><span class="line">    <span class="meta">@Pointcut(&quot;execution(boolean com.itheima.service.*Service.*(*,*))&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">servicePt</span><span class="params">()</span>&#123;&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Around(&quot;DataAdvice.servicePt()&quot;)</span></span><br><span class="line">    <span class="comment">// @Around(&quot;servicePt()&quot;)è¿™ä¸¤ç§å†™æ³•éƒ½å¯¹</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">trimStr</span><span class="params">(ProceedingJoinPoint pjp)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">        <span class="type">Object</span> <span class="variable">ret</span> <span class="operator">=</span> pjp.proceed();</span><br><span class="line">        <span class="keyword">return</span> ret;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="æ­¥éª¤4-å®Œæˆæ ¸å¿ƒä¸šåŠ¡ï¼Œå¤„ç†å‚æ•°ä¸­çš„ç©ºæ ¼"><a href="#æ­¥éª¤4-å®Œæˆæ ¸å¿ƒä¸šåŠ¡ï¼Œå¤„ç†å‚æ•°ä¸­çš„ç©ºæ ¼" class="headerlink" title="æ­¥éª¤4:å®Œæˆæ ¸å¿ƒä¸šåŠ¡ï¼Œå¤„ç†å‚æ•°ä¸­çš„ç©ºæ ¼"></a>æ­¥éª¤4:å®Œæˆæ ¸å¿ƒä¸šåŠ¡ï¼Œå¤„ç†å‚æ•°ä¸­çš„ç©ºæ ¼</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DataAdvice</span> &#123;</span><br><span class="line">    <span class="meta">@Pointcut(&quot;execution(boolean com.itheima.service.*Service.*(*,*))&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">servicePt</span><span class="params">()</span>&#123;&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Around(&quot;DataAdvice.servicePt()&quot;)</span></span><br><span class="line">    <span class="comment">// @Around(&quot;servicePt()&quot;)è¿™ä¸¤ç§å†™æ³•éƒ½å¯¹</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">trimStr</span><span class="params">(ProceedingJoinPoint pjp)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">        <span class="comment">//è·å–åŸå§‹æ–¹æ³•çš„å‚æ•°</span></span><br><span class="line">        Object[] args = pjp.getArgs();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; args.length; i++) &#123;</span><br><span class="line">            <span class="comment">//åˆ¤æ–­å‚æ•°æ˜¯ä¸æ˜¯å­—ç¬¦ä¸²</span></span><br><span class="line">            <span class="keyword">if</span>(args[i].getClass().equals(String.class))&#123;</span><br><span class="line">                args[i] = args[i].toString().trim();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//å°†ä¿®æ”¹åçš„å‚æ•°ä¼ å…¥åˆ°åŸå§‹æ–¹æ³•çš„æ‰§è¡Œä¸­</span></span><br><span class="line">        <span class="type">Object</span> <span class="variable">ret</span> <span class="operator">=</span> pjp.proceed(args);</span><br><span class="line">        <span class="keyword">return</span> ret;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="æ­¥éª¤5-è¿è¡Œç¨‹åº-1"><a href="#æ­¥éª¤5-è¿è¡Œç¨‹åº-1" class="headerlink" title="æ­¥éª¤5:è¿è¡Œç¨‹åº"></a>æ­¥éª¤5:è¿è¡Œç¨‹åº</h5><p>ä¸ç®¡å¯†ç <code>root</code>å‰åæ˜¯å¦åŠ ç©ºæ ¼ï¼Œæœ€ç»ˆæ§åˆ¶å°æ‰“å°çš„éƒ½æ˜¯true</p><h5 id="æ­¥éª¤6-ä¼˜åŒ–æµ‹è¯•"><a href="#æ­¥éª¤6-ä¼˜åŒ–æµ‹è¯•" class="headerlink" title="æ­¥éª¤6:ä¼˜åŒ–æµ‹è¯•"></a>æ­¥éª¤6:ä¼˜åŒ–æµ‹è¯•</h5><p>ä¸ºäº†èƒ½æ›´å¥½çš„çœ‹å‡ºAOPå·²ç»ç”Ÿæ•ˆï¼Œæˆ‘ä»¬å¯ä»¥ä¿®æ”¹ResourcesImplç±»ï¼Œåœ¨æ–¹æ³•ä¸­å°†å¯†ç çš„é•¿åº¦è¿›è¡Œæ‰“å°</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ResourcesDaoImpl</span> <span class="keyword">implements</span> <span class="title class_">ResourcesDao</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">readResources</span><span class="params">(String url, String password)</span> &#123;</span><br><span class="line">        System.out.println(password.length());</span><br><span class="line">        <span class="comment">//æ¨¡æ‹Ÿæ ¡éªŒ</span></span><br><span class="line">        <span class="keyword">return</span> password.equals(<span class="string">&quot;root&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å†æ¬¡è¿è¡ŒæˆåŠŸï¼Œå°±å¯ä»¥æ ¹æ®æœ€ç»ˆæ‰“å°çš„é•¿åº¦æ¥çœ‹çœ‹ï¼Œå­—ç¬¦ä¸²çš„ç©ºæ ¼æœ‰æ²¡æœ‰è¢«å»é™¤æ‰ã€‚</p><p><strong>æ³¨æ„ï¼š</strong></p><p><img src="/2022/07/27/Spring_day3/1630242491831.png" alt="1630242491831"></p><h2 id="5ï¼ŒAOPæ€»ç»“"><a href="#5ï¼ŒAOPæ€»ç»“" class="headerlink" title="5ï¼ŒAOPæ€»ç»“"></a>5ï¼ŒAOPæ€»ç»“</h2><p>AOPçš„çŸ¥è¯†å°±å·²ç»è®²è§£å®Œäº†ï¼Œæ¥ä¸‹æ¥å¯¹äºAOPçš„çŸ¥è¯†è¿›è¡Œä¸€ä¸ªæ€»ç»“:</p><h3 id="5-1-AOPçš„æ ¸å¿ƒæ¦‚å¿µ"><a href="#5-1-AOPçš„æ ¸å¿ƒæ¦‚å¿µ" class="headerlink" title="5.1 AOPçš„æ ¸å¿ƒæ¦‚å¿µ"></a>5.1 AOPçš„æ ¸å¿ƒæ¦‚å¿µ</h3><ul><li>æ¦‚å¿µï¼šAOP(Aspect Oriented Programming)é¢å‘åˆ‡é¢ç¼–ç¨‹ï¼Œä¸€ç§ç¼–ç¨‹èŒƒå¼</li><li>ä½œç”¨ï¼šåœ¨ä¸æƒŠåŠ¨åŸå§‹è®¾è®¡çš„åŸºç¡€ä¸Šä¸ºæ–¹æ³•è¿›è¡ŒåŠŸèƒ½<strong>å¢å¼º</strong></li><li>æ ¸å¿ƒæ¦‚å¿µ<ul><li>ä»£ç†ï¼ˆProxyï¼‰ï¼šSpringAOPçš„æ ¸å¿ƒæœ¬è´¨æ˜¯é‡‡ç”¨ä»£ç†æ¨¡å¼å®ç°çš„</li><li>è¿æ¥ç‚¹ï¼ˆJoinPointï¼‰ï¼šåœ¨SpringAOPä¸­ï¼Œç†è§£ä¸ºä»»æ„æ–¹æ³•çš„æ‰§è¡Œ</li><li>åˆ‡å…¥ç‚¹ï¼ˆPointcutï¼‰ï¼šåŒ¹é…è¿æ¥ç‚¹çš„å¼å­ï¼Œä¹Ÿæ˜¯å…·æœ‰å…±æ€§åŠŸèƒ½çš„æ–¹æ³•æè¿°</li><li>é€šçŸ¥ï¼ˆAdviceï¼‰ï¼šè‹¥å¹²ä¸ªæ–¹æ³•çš„å…±æ€§åŠŸèƒ½ï¼Œåœ¨åˆ‡å…¥ç‚¹å¤„æ‰§è¡Œï¼Œæœ€ç»ˆä½“ç°ä¸ºä¸€ä¸ªæ–¹æ³•</li><li>åˆ‡é¢ï¼ˆAspectï¼‰ï¼šæè¿°é€šçŸ¥ä¸åˆ‡å…¥ç‚¹çš„å¯¹åº”å…³ç³»</li><li>ç›®æ ‡å¯¹è±¡ï¼ˆTargetï¼‰ï¼šè¢«ä»£ç†çš„åŸå§‹å¯¹è±¡æˆä¸ºç›®æ ‡å¯¹è±¡</li></ul></li></ul><h3 id="5-2-åˆ‡å…¥ç‚¹è¡¨è¾¾å¼"><a href="#5-2-åˆ‡å…¥ç‚¹è¡¨è¾¾å¼" class="headerlink" title="5.2 åˆ‡å…¥ç‚¹è¡¨è¾¾å¼"></a>5.2 åˆ‡å…¥ç‚¹è¡¨è¾¾å¼</h3><ul><li><p>åˆ‡å…¥ç‚¹è¡¨è¾¾å¼æ ‡å‡†æ ¼å¼ï¼šåŠ¨ä½œå…³é”®å­—(è®¿é—®ä¿®é¥°ç¬¦  è¿”å›å€¼  åŒ…å.ç±»&#x2F;æ¥å£å.æ–¹æ³•åï¼ˆå‚æ•°ï¼‰å¼‚å¸¸å)</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">execution(* com.itheima.service.*Service.*(..))</span><br></pre></td></tr></table></figure></li><li><p>åˆ‡å…¥ç‚¹è¡¨è¾¾å¼æè¿°é€šé…ç¬¦ï¼š</p><ul><li>ä½œç”¨ï¼šç”¨äºå¿«é€Ÿæè¿°ï¼ŒèŒƒå›´æè¿°</li><li><code>*</code>ï¼šåŒ¹é…ä»»æ„ç¬¦å·ï¼ˆå¸¸ç”¨ï¼‰</li><li><code>..</code> ï¼šåŒ¹é…å¤šä¸ªè¿ç»­çš„ä»»æ„ç¬¦å·ï¼ˆå¸¸ç”¨ï¼‰</li><li><code>+</code>ï¼šåŒ¹é…å­ç±»ç±»å‹</li></ul></li><li><p>åˆ‡å…¥ç‚¹è¡¨è¾¾å¼ä¹¦å†™æŠ€å·§</p><p>1.æŒ‰<strong>æ ‡å‡†è§„èŒƒ</strong>å¼€å‘<br>2.æŸ¥è¯¢æ“ä½œçš„è¿”å›å€¼å»ºè®®ä½¿ç”¨*åŒ¹é…<br>3.å‡å°‘ä½¿ç”¨..çš„å½¢å¼æè¿°åŒ…<br>4.å¯¹æ¥å£è¿›è¡Œæè¿°ï¼Œä½¿ç”¨*è¡¨ç¤ºæ¨¡å—åï¼Œä¾‹å¦‚UserServiceçš„åŒ¹é…æè¿°ä¸º*Service<br>5.æ–¹æ³•åä¹¦å†™ä¿ç•™åŠ¨è¯ï¼Œä¾‹å¦‚getï¼Œä½¿ç”¨*è¡¨ç¤ºåè¯ï¼Œä¾‹å¦‚getByIdåŒ¹é…æè¿°ä¸ºgetBy*<br>6.å‚æ•°æ ¹æ®å®é™…æƒ…å†µçµæ´»è°ƒæ•´</p></li></ul><h3 id="5-3-äº”ç§é€šçŸ¥ç±»å‹"><a href="#5-3-äº”ç§é€šçŸ¥ç±»å‹" class="headerlink" title="5.3 äº”ç§é€šçŸ¥ç±»å‹"></a>5.3 äº”ç§é€šçŸ¥ç±»å‹</h3><ul><li>å‰ç½®é€šçŸ¥</li><li>åç½®é€šçŸ¥</li><li>ç¯ç»•é€šçŸ¥ï¼ˆé‡ç‚¹ï¼‰<ul><li>ç¯ç»•é€šçŸ¥ä¾èµ–å½¢å‚ProceedingJoinPointæ‰èƒ½å®ç°å¯¹åŸå§‹æ–¹æ³•çš„è°ƒç”¨</li><li>ç¯ç»•é€šçŸ¥å¯ä»¥éš”ç¦»åŸå§‹æ–¹æ³•çš„è°ƒç”¨æ‰§è¡Œ</li><li>ç¯ç»•é€šçŸ¥è¿”å›å€¼è®¾ç½®ä¸ºObjectç±»å‹</li><li>ç¯ç»•é€šçŸ¥ä¸­å¯ä»¥å¯¹åŸå§‹æ–¹æ³•è°ƒç”¨è¿‡ç¨‹ä¸­å‡ºç°çš„å¼‚å¸¸è¿›è¡Œå¤„ç†</li></ul></li><li>è¿”å›åé€šçŸ¥</li><li>æŠ›å‡ºå¼‚å¸¸åé€šçŸ¥</li></ul><h3 id="5-4-é€šçŸ¥ä¸­è·å–å‚æ•°"><a href="#5-4-é€šçŸ¥ä¸­è·å–å‚æ•°" class="headerlink" title="5.4 é€šçŸ¥ä¸­è·å–å‚æ•°"></a>5.4 é€šçŸ¥ä¸­è·å–å‚æ•°</h3><ul><li>è·å–åˆ‡å…¥ç‚¹æ–¹æ³•çš„å‚æ•°ï¼Œæ‰€æœ‰çš„é€šçŸ¥ç±»å‹éƒ½å¯ä»¥è·å–å‚æ•°<ul><li>JoinPointï¼šé€‚ç”¨äºå‰ç½®ã€åç½®ã€è¿”å›åã€æŠ›å‡ºå¼‚å¸¸åé€šçŸ¥</li><li>ProceedingJoinPointï¼šé€‚ç”¨äºç¯ç»•é€šçŸ¥</li></ul></li><li>è·å–åˆ‡å…¥ç‚¹æ–¹æ³•è¿”å›å€¼ï¼Œå‰ç½®å’ŒæŠ›å‡ºå¼‚å¸¸åé€šçŸ¥æ˜¯æ²¡æœ‰è¿”å›å€¼ï¼Œåç½®é€šçŸ¥å¯æœ‰å¯æ— ï¼Œæ‰€ä»¥ä¸åšç ”ç©¶<ul><li>è¿”å›åé€šçŸ¥</li><li>ç¯ç»•é€šçŸ¥</li></ul></li><li>è·å–åˆ‡å…¥ç‚¹æ–¹æ³•è¿è¡Œå¼‚å¸¸ä¿¡æ¯ï¼Œå‰ç½®å’Œè¿”å›åé€šçŸ¥æ˜¯ä¸ä¼šæœ‰ï¼Œåç½®é€šçŸ¥å¯æœ‰å¯æ— ï¼Œæ‰€ä»¥ä¸åšç ”ç©¶<ul><li>æŠ›å‡ºå¼‚å¸¸åé€šçŸ¥</li><li>ç¯ç»•é€šçŸ¥</li></ul></li></ul><h2 id="6ï¼ŒAOPäº‹åŠ¡ç®¡ç†"><a href="#6ï¼ŒAOPäº‹åŠ¡ç®¡ç†" class="headerlink" title="6ï¼ŒAOPäº‹åŠ¡ç®¡ç†"></a>6ï¼ŒAOPäº‹åŠ¡ç®¡ç†</h2><h3 id="6-1-Springäº‹åŠ¡ç®€ä»‹"><a href="#6-1-Springäº‹åŠ¡ç®€ä»‹" class="headerlink" title="6.1 Springäº‹åŠ¡ç®€ä»‹"></a>6.1 Springäº‹åŠ¡ç®€ä»‹</h3><h4 id="6-1-1-ç›¸å…³æ¦‚å¿µä»‹ç»"><a href="#6-1-1-ç›¸å…³æ¦‚å¿µä»‹ç»" class="headerlink" title="6.1.1 ç›¸å…³æ¦‚å¿µä»‹ç»"></a>6.1.1 ç›¸å…³æ¦‚å¿µä»‹ç»</h4><ul><li>äº‹åŠ¡ä½œç”¨ï¼šåœ¨æ•°æ®å±‚ä¿éšœä¸€ç³»åˆ—çš„æ•°æ®åº“æ“ä½œåŒæˆåŠŸåŒå¤±è´¥</li><li>Springäº‹åŠ¡ä½œç”¨ï¼šåœ¨æ•°æ®å±‚æˆ–<strong>ä¸šåŠ¡å±‚</strong>ä¿éšœä¸€ç³»åˆ—çš„æ•°æ®åº“æ“ä½œåŒæˆåŠŸåŒå¤±è´¥</li></ul><p>æ•°æ®å±‚æœ‰äº‹åŠ¡æˆ‘ä»¬å¯ä»¥ç†è§£ï¼Œä¸ºä»€ä¹ˆä¸šåŠ¡å±‚ä¹Ÿéœ€è¦å¤„ç†äº‹åŠ¡å‘¢?</p><p>ä¸¾ä¸ªç®€å•çš„ä¾‹å­ï¼Œ</p><ul><li>è½¬è´¦ä¸šåŠ¡ä¼šæœ‰ä¸¤æ¬¡æ•°æ®å±‚çš„è°ƒç”¨ï¼Œä¸€æ¬¡æ˜¯åŠ é’±ä¸€æ¬¡æ˜¯å‡é’±</li><li>æŠŠäº‹åŠ¡æ”¾åœ¨æ•°æ®å±‚ï¼ŒåŠ é’±å’Œå‡é’±å°±æœ‰ä¸¤ä¸ªäº‹åŠ¡</li><li>æ²¡åŠæ³•ä¿è¯åŠ é’±å’Œå‡é’±åŒæ—¶æˆåŠŸæˆ–è€…åŒæ—¶å¤±è´¥</li><li>è¿™ä¸ªæ—¶å€™å°±éœ€è¦å°†äº‹åŠ¡æ”¾åœ¨ä¸šåŠ¡å±‚è¿›è¡Œå¤„ç†ã€‚</li></ul><p>Springä¸ºäº†ç®¡ç†äº‹åŠ¡ï¼Œæä¾›äº†ä¸€ä¸ªå¹³å°äº‹åŠ¡ç®¡ç†å™¨<code>PlatformTransactionManager</code></p><p><img src="/2022/07/27/Spring_day3/1630243651541.png" alt="1630243651541"></p><p>commitæ˜¯ç”¨æ¥æäº¤äº‹åŠ¡ï¼Œrollbackæ˜¯ç”¨æ¥å›æ»šäº‹åŠ¡ã€‚</p><p>PlatformTransactionManageråªæ˜¯ä¸€ä¸ªæ¥å£ï¼ŒSpringè¿˜ä¸ºå…¶æä¾›äº†ä¸€ä¸ªå…·ä½“çš„å®ç°:</p><p><img src="/2022/07/27/Spring_day3/1630243993380.png" alt="1630243993380"></p><p>ä»åç§°ä¸Šå¯ä»¥çœ‹å‡ºï¼Œæˆ‘ä»¬åªéœ€è¦ç»™å®ƒä¸€ä¸ªDataSourceå¯¹è±¡ï¼Œå®ƒå°±å¯ä»¥å¸®ä½ å»åœ¨ä¸šåŠ¡å±‚ç®¡ç†äº‹åŠ¡ã€‚å…¶å†…éƒ¨é‡‡ç”¨çš„æ˜¯JDBCçš„äº‹åŠ¡ã€‚æ‰€ä»¥è¯´å¦‚æœä½ æŒä¹…å±‚é‡‡ç”¨çš„æ˜¯JDBCç›¸å…³çš„æŠ€æœ¯ï¼Œå°±å¯ä»¥é‡‡ç”¨è¿™ä¸ªäº‹åŠ¡ç®¡ç†å™¨æ¥ç®¡ç†ä½ çš„äº‹åŠ¡ã€‚è€ŒMybatiså†…éƒ¨é‡‡ç”¨çš„å°±æ˜¯JDBCçš„äº‹åŠ¡ï¼Œæ‰€ä»¥åæœŸæˆ‘ä»¬Springæ•´åˆMybatiså°±é‡‡ç”¨çš„è¿™ä¸ªDataSourceTransactionManageräº‹åŠ¡ç®¡ç†å™¨ã€‚</p><h4 id="6-1-2-è½¬è´¦æ¡ˆä¾‹-éœ€æ±‚åˆ†æ"><a href="#6-1-2-è½¬è´¦æ¡ˆä¾‹-éœ€æ±‚åˆ†æ" class="headerlink" title="6.1.2 è½¬è´¦æ¡ˆä¾‹-éœ€æ±‚åˆ†æ"></a>6.1.2 è½¬è´¦æ¡ˆä¾‹-éœ€æ±‚åˆ†æ</h4><p>æ¥ä¸‹æ¥é€šè¿‡ä¸€ä¸ªæ¡ˆä¾‹æ¥å­¦ä¹ ä¸‹Springæ˜¯å¦‚ä½•æ¥ç®¡ç†äº‹åŠ¡çš„ã€‚</p><p>å…ˆæ¥åˆ†æä¸‹éœ€æ±‚:</p><p>éœ€æ±‚: å®ç°ä»»æ„ä¸¤ä¸ªè´¦æˆ·é—´è½¬è´¦æ“ä½œ</p><p>éœ€æ±‚å¾®ç¼©: Aè´¦æˆ·å‡é’±ï¼ŒBè´¦æˆ·åŠ é’±</p><p>ä¸ºäº†å®ç°ä¸Šè¿°çš„ä¸šåŠ¡éœ€æ±‚ï¼Œæˆ‘ä»¬å¯ä»¥æŒ‰ç…§ä¸‹é¢æ­¥éª¤æ¥å®ç°ä¸‹:<br>â‘ ï¼šæ•°æ®å±‚æä¾›åŸºç¡€æ“ä½œï¼ŒæŒ‡å®šè´¦æˆ·å‡é’±ï¼ˆoutMoneyï¼‰ï¼ŒæŒ‡å®šè´¦æˆ·åŠ é’±ï¼ˆinMoneyï¼‰</p><p>â‘¡ï¼šä¸šåŠ¡å±‚æä¾›è½¬è´¦æ“ä½œï¼ˆtransferï¼‰ï¼Œè°ƒç”¨å‡é’±ä¸åŠ é’±çš„æ“ä½œ</p><p>â‘¢ï¼šæä¾›2ä¸ªè´¦å·å’Œæ“ä½œé‡‘é¢æ‰§è¡Œè½¬è´¦æ“ä½œ</p><p>â‘£ï¼šåŸºäºSpringæ•´åˆMyBatisç¯å¢ƒæ­å»ºä¸Šè¿°æ“ä½œ</p><h4 id="6-1-3-è½¬è´¦æ¡ˆä¾‹-ç¯å¢ƒæ­å»º"><a href="#6-1-3-è½¬è´¦æ¡ˆä¾‹-ç¯å¢ƒæ­å»º" class="headerlink" title="6.1.3 è½¬è´¦æ¡ˆä¾‹-ç¯å¢ƒæ­å»º"></a>6.1.3 è½¬è´¦æ¡ˆä¾‹-ç¯å¢ƒæ­å»º</h4><h5 id="æ­¥éª¤1-å‡†å¤‡æ•°æ®åº“è¡¨"><a href="#æ­¥éª¤1-å‡†å¤‡æ•°æ®åº“è¡¨" class="headerlink" title="æ­¥éª¤1:å‡†å¤‡æ•°æ®åº“è¡¨"></a>æ­¥éª¤1:å‡†å¤‡æ•°æ®åº“è¡¨</h5><p>ä¹‹å‰æˆ‘ä»¬åœ¨æ•´åˆMybatisçš„æ—¶å€™å·²ç»åˆ›å»ºäº†è¿™ä¸ªè¡¨,å¯ä»¥ç›´æ¥ä½¿ç”¨</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> database spring_db <span class="type">character</span> <span class="keyword">set</span> utf8;</span><br><span class="line">use spring_db;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> tbl_account(</span><br><span class="line">    id <span class="type">int</span> <span class="keyword">primary</span> key auto_increment,</span><br><span class="line">    name <span class="type">varchar</span>(<span class="number">35</span>),</span><br><span class="line">    money <span class="keyword">double</span></span><br><span class="line">);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> tbl_account <span class="keyword">values</span>(<span class="number">1</span>,<span class="string">&#x27;Tom&#x27;</span>,<span class="number">1000</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> tbl_account <span class="keyword">values</span>(<span class="number">2</span>,<span class="string">&#x27;Jerry&#x27;</span>,<span class="number">1000</span>);</span><br></pre></td></tr></table></figure><h5 id="æ­¥éª¤2-åˆ›å»ºé¡¹ç›®å¯¼å…¥jaråŒ…"><a href="#æ­¥éª¤2-åˆ›å»ºé¡¹ç›®å¯¼å…¥jaråŒ…" class="headerlink" title="æ­¥éª¤2:åˆ›å»ºé¡¹ç›®å¯¼å…¥jaråŒ…"></a>æ­¥éª¤2:åˆ›å»ºé¡¹ç›®å¯¼å…¥jaråŒ…</h5><p>é¡¹ç›®çš„pom.xmlæ·»åŠ ç›¸å…³ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.10.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.16<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.47<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.10.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.10.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="æ­¥éª¤3-æ ¹æ®è¡¨åˆ›å»ºæ¨¡å‹ç±»"><a href="#æ­¥éª¤3-æ ¹æ®è¡¨åˆ›å»ºæ¨¡å‹ç±»" class="headerlink" title="æ­¥éª¤3:æ ¹æ®è¡¨åˆ›å»ºæ¨¡å‹ç±»"></a>æ­¥éª¤3:æ ¹æ®è¡¨åˆ›å»ºæ¨¡å‹ç±»</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Account</span> <span class="keyword">implements</span> <span class="title class_">Serializable</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Double money;</span><br><span class="line"><span class="comment">//setter...getter...toString...æ–¹æ³•ç•¥    </span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="æ­¥éª¤4-åˆ›å»ºDaoæ¥å£"><a href="#æ­¥éª¤4-åˆ›å»ºDaoæ¥å£" class="headerlink" title="æ­¥éª¤4:åˆ›å»ºDaoæ¥å£"></a>æ­¥éª¤4:åˆ›å»ºDaoæ¥å£</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">AccountDao</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Update(&quot;update tbl_account set money = money + #&#123;money&#125; where name = #&#123;name&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">inMoney</span><span class="params">(<span class="meta">@Param(&quot;name&quot;)</span> String name, <span class="meta">@Param(&quot;money&quot;)</span> Double money)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Update(&quot;update tbl_account set money = money - #&#123;money&#125; where name = #&#123;name&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">outMoney</span><span class="params">(<span class="meta">@Param(&quot;name&quot;)</span> String name, <span class="meta">@Param(&quot;money&quot;)</span> Double money)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="æ­¥éª¤5-åˆ›å»ºServiceæ¥å£å’Œå®ç°ç±»"><a href="#æ­¥éª¤5-åˆ›å»ºServiceæ¥å£å’Œå®ç°ç±»" class="headerlink" title="æ­¥éª¤5:åˆ›å»ºServiceæ¥å£å’Œå®ç°ç±»"></a>æ­¥éª¤5:åˆ›å»ºServiceæ¥å£å’Œå®ç°ç±»</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">AccountService</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è½¬è´¦æ“ä½œ</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> out ä¼ å‡ºæ–¹</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> in è½¬å…¥æ–¹</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> money é‡‘é¢</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">transfer</span><span class="params">(String out,String in ,Double money)</span> ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AccountServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">AccountService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> AccountDao accountDao;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">transfer</span><span class="params">(String out,String in ,Double money)</span> &#123;</span><br><span class="line">        accountDao.outMoney(out,money);</span><br><span class="line">        accountDao.inMoney(in,money);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="æ­¥éª¤6-æ·»åŠ jdbc-propertiesæ–‡ä»¶"><a href="#æ­¥éª¤6-æ·»åŠ jdbc-propertiesæ–‡ä»¶" class="headerlink" title="æ­¥éª¤6:æ·»åŠ jdbc.propertiesæ–‡ä»¶"></a>æ­¥éª¤6:æ·»åŠ jdbc.propertiesæ–‡ä»¶</h5><figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">jdbc.driver</span>=<span class="string">com.mysql.jdbc.Driver</span></span><br><span class="line"><span class="attr">jdbc.url</span>=<span class="string">jdbc:mysql://localhost:3306/spring_db?useSSL=false</span></span><br><span class="line"><span class="attr">jdbc.username</span>=<span class="string">root</span></span><br><span class="line"><span class="attr">jdbc.password</span>=<span class="string">root</span></span><br></pre></td></tr></table></figure><h5 id="æ­¥éª¤7-åˆ›å»ºJdbcConfigé…ç½®ç±»"><a href="#æ­¥éª¤7-åˆ›å»ºJdbcConfigé…ç½®ç±»" class="headerlink" title="æ­¥éª¤7:åˆ›å»ºJdbcConfigé…ç½®ç±»"></a>æ­¥éª¤7:åˆ›å»ºJdbcConfigé…ç½®ç±»</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JdbcConfig</span> &#123;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;jdbc.driver&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String driver;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;jdbc.url&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String url;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;jdbc.username&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String userName;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;jdbc.password&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> DataSource <span class="title function_">dataSource</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">DruidDataSource</span> <span class="variable">ds</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DruidDataSource</span>();</span><br><span class="line">        ds.setDriverClassName(driver);</span><br><span class="line">        ds.setUrl(url);</span><br><span class="line">        ds.setUsername(userName);</span><br><span class="line">        ds.setPassword(password);</span><br><span class="line">        <span class="keyword">return</span> ds;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="æ­¥éª¤8-åˆ›å»ºMybatisConfigé…ç½®ç±»"><a href="#æ­¥éª¤8-åˆ›å»ºMybatisConfigé…ç½®ç±»" class="headerlink" title="æ­¥éª¤8:åˆ›å»ºMybatisConfigé…ç½®ç±»"></a>æ­¥éª¤8:åˆ›å»ºMybatisConfigé…ç½®ç±»</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MybatisConfig</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> SqlSessionFactoryBean <span class="title function_">sqlSessionFactory</span><span class="params">(DataSource dataSource)</span>&#123;</span><br><span class="line">        <span class="type">SqlSessionFactoryBean</span> <span class="variable">ssfb</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBean</span>();</span><br><span class="line">        ssfb.setTypeAliasesPackage(<span class="string">&quot;com.itheima.domain&quot;</span>);</span><br><span class="line">        ssfb.setDataSource(dataSource);</span><br><span class="line">        <span class="keyword">return</span> ssfb;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> MapperScannerConfigurer <span class="title function_">mapperScannerConfigurer</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">MapperScannerConfigurer</span> <span class="variable">msc</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MapperScannerConfigurer</span>();</span><br><span class="line">        msc.setBasePackage(<span class="string">&quot;com.itheima.dao&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> msc;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="æ­¥éª¤9-åˆ›å»ºSpringConfigé…ç½®ç±»"><a href="#æ­¥éª¤9-åˆ›å»ºSpringConfigé…ç½®ç±»" class="headerlink" title="æ­¥éª¤9:åˆ›å»ºSpringConfigé…ç½®ç±»"></a>æ­¥éª¤9:åˆ›å»ºSpringConfigé…ç½®ç±»</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ComponentScan(&quot;com.itheima&quot;)</span></span><br><span class="line"><span class="meta">@PropertySource(&quot;classpath:jdbc.properties&quot;)</span></span><br><span class="line"><span class="meta">@Import(&#123;JdbcConfig.class,MybatisConfig.class&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringConfig</span> &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="æ­¥éª¤10-ç¼–å†™æµ‹è¯•ç±»"><a href="#æ­¥éª¤10-ç¼–å†™æµ‹è¯•ç±»" class="headerlink" title="æ­¥éª¤10:ç¼–å†™æµ‹è¯•ç±»"></a>æ­¥éª¤10:ç¼–å†™æµ‹è¯•ç±»</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RunWith(SpringJUnit4ClassRunner.class)</span></span><br><span class="line"><span class="meta">@ContextConfiguration(classes = SpringConfig.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AccountServiceTest</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> AccountService accountService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testTransfer</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        accountService.transfer(<span class="string">&quot;Tom&quot;</span>,<span class="string">&quot;Jerry&quot;</span>,<span class="number">100D</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æœ€ç»ˆåˆ›å»ºå¥½çš„é¡¹ç›®ç»“æ„å¦‚ä¸‹:</p><p><img src="/2022/07/27/Spring_day3/1630247220645.png" alt="1630247220645"></p><h4 id="6-1-4-äº‹åŠ¡ç®¡ç†"><a href="#6-1-4-äº‹åŠ¡ç®¡ç†" class="headerlink" title="6.1.4 äº‹åŠ¡ç®¡ç†"></a>6.1.4 äº‹åŠ¡ç®¡ç†</h4><p>ä¸Šè¿°ç¯å¢ƒï¼Œè¿è¡Œå•å…ƒæµ‹è¯•ç±»ï¼Œä¼šæ‰§è¡Œè½¬è´¦æ“ä½œï¼Œ<code>Tom</code>çš„è´¦æˆ·ä¼šå‡å°‘100ï¼Œ<code>Jerry</code>çš„è´¦æˆ·ä¼šåŠ 100ã€‚</p><p>è¿™æ˜¯æ­£å¸¸æƒ…å†µä¸‹çš„è¿è¡Œç»“æœï¼Œä½†æ˜¯å¦‚æœåœ¨è½¬è´¦çš„è¿‡ç¨‹ä¸­å‡ºç°äº†å¼‚å¸¸ï¼Œå¦‚:</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AccountServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">AccountService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> AccountDao accountDao;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">transfer</span><span class="params">(String out,String in ,Double money)</span> &#123;</span><br><span class="line">        accountDao.outMoney(out,money);</span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>/<span class="number">0</span>;</span><br><span class="line">        accountDao.inMoney(in,money);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªæ—¶å€™å°±æ¨¡æ‹Ÿäº†è½¬è´¦è¿‡ç¨‹ä¸­å‡ºç°å¼‚å¸¸çš„æƒ…å†µï¼Œæ­£ç¡®çš„æ“ä½œåº”è¯¥æ˜¯è½¬è´¦å‡ºé—®é¢˜äº†ï¼Œ<code>Tom</code>åº”è¯¥è¿˜æ˜¯900ï¼Œ<code>Jerry</code>åº”è¯¥è¿˜æ˜¯1100ï¼Œä½†æ˜¯çœŸæ­£è¿è¡Œåä¼šå‘ç°ï¼Œå¹¶æ²¡æœ‰åƒæˆ‘ä»¬æƒ³è±¡çš„é‚£æ ·ï¼Œ<code>Tom</code>è´¦æˆ·ä¸º800è€Œ<code>Jerry</code>è¿˜æ˜¯1100,100å—é’±å‡­ç©ºæ¶ˆæ¯äº†ï¼Œé“¶è¡Œä¹ç–¯äº†ã€‚å¦‚æœæŠŠè½¬è´¦æ¢ä¸ªé¡ºåºï¼Œé“¶è¡Œå°±è¯¥å“­äº†ã€‚</p><p>ä¸ç®¡å“ªç§æƒ…å†µï¼Œéƒ½æ˜¯ä¸å…è®¸å‡ºç°çš„ï¼Œå¯¹åˆšæ‰çš„ç»“æœæˆ‘ä»¬åšä¸€ä¸ªåˆ†æ:</p><p>â‘ ï¼šç¨‹åºæ­£å¸¸æ‰§è¡Œæ—¶ï¼Œè´¦æˆ·é‡‘é¢Aå‡BåŠ ï¼Œæ²¡æœ‰é—®é¢˜</p><p>â‘¡ï¼šç¨‹åºå‡ºç°å¼‚å¸¸åï¼Œè½¬è´¦å¤±è´¥ï¼Œä½†æ˜¯å¼‚å¸¸ä¹‹å‰æ“ä½œæˆåŠŸï¼Œå¼‚å¸¸ä¹‹åæ“ä½œå¤±è´¥ï¼Œæ•´ä½“ä¸šåŠ¡å¤±è´¥</p><p>å½“ç¨‹åºå‡ºé—®é¢˜åï¼Œæˆ‘ä»¬éœ€è¦è®©äº‹åŠ¡è¿›è¡Œå›æ»šï¼Œè€Œä¸”è¿™ä¸ªäº‹åŠ¡åº”è¯¥æ˜¯åŠ åœ¨ä¸šåŠ¡å±‚ä¸Šï¼Œè€ŒSpringçš„äº‹åŠ¡ç®¡ç†å°±æ˜¯ç”¨æ¥è§£å†³è¿™ç±»é—®é¢˜çš„ã€‚</p><p>Springäº‹åŠ¡ç®¡ç†å…·ä½“çš„å®ç°æ­¥éª¤ä¸º:</p><h5 id="æ­¥éª¤1-åœ¨éœ€è¦è¢«äº‹åŠ¡ç®¡ç†çš„æ–¹æ³•ä¸Šæ·»åŠ æ³¨è§£"><a href="#æ­¥éª¤1-åœ¨éœ€è¦è¢«äº‹åŠ¡ç®¡ç†çš„æ–¹æ³•ä¸Šæ·»åŠ æ³¨è§£" class="headerlink" title="æ­¥éª¤1:åœ¨éœ€è¦è¢«äº‹åŠ¡ç®¡ç†çš„æ–¹æ³•ä¸Šæ·»åŠ æ³¨è§£"></a>æ­¥éª¤1:åœ¨éœ€è¦è¢«äº‹åŠ¡ç®¡ç†çš„æ–¹æ³•ä¸Šæ·»åŠ æ³¨è§£</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">AccountService</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è½¬è´¦æ“ä½œ</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> out ä¼ å‡ºæ–¹</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> in è½¬å…¥æ–¹</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> money é‡‘é¢</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="comment">//é…ç½®å½“å‰æ¥å£æ–¹æ³•å…·æœ‰äº‹åŠ¡</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">transfer</span><span class="params">(String out,String in ,Double money)</span> ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AccountServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">AccountService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> AccountDao accountDao;</span><br><span class="line"><span class="meta">@Transactional</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">transfer</span><span class="params">(String out,String in ,Double money)</span> &#123;</span><br><span class="line">        accountDao.outMoney(out,money);</span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>/<span class="number">0</span>;</span><br><span class="line">        accountDao.inMoney(in,money);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„ï¼š</strong></p><p>@Transactionalå¯ä»¥å†™åœ¨æ¥å£ç±»ä¸Šã€æ¥å£æ–¹æ³•ä¸Šã€å®ç°ç±»ä¸Šå’Œå®ç°ç±»æ–¹æ³•ä¸Š</p><ul><li>å†™åœ¨æ¥å£ç±»ä¸Šï¼Œè¯¥æ¥å£çš„æ‰€æœ‰å®ç°ç±»çš„æ‰€æœ‰æ–¹æ³•éƒ½ä¼šæœ‰äº‹åŠ¡</li><li>å†™åœ¨æ¥å£æ–¹æ³•ä¸Šï¼Œè¯¥æ¥å£çš„æ‰€æœ‰å®ç°ç±»çš„è¯¥æ–¹æ³•éƒ½ä¼šæœ‰äº‹åŠ¡</li><li>å†™åœ¨å®ç°ç±»ä¸Šï¼Œè¯¥ç±»ä¸­çš„æ‰€æœ‰æ–¹æ³•éƒ½ä¼šæœ‰äº‹åŠ¡</li><li>å†™åœ¨å®ç°ç±»æ–¹æ³•ä¸Šï¼Œè¯¥æ–¹æ³•ä¸Šæœ‰äº‹åŠ¡</li><li><em><strong>å»ºè®®å†™åœ¨å®ç°ç±»æˆ–å®ç°ç±»çš„æ–¹æ³•ä¸Š</strong></em></li></ul><h5 id="æ­¥éª¤2-åœ¨JdbcConfigç±»ä¸­é…ç½®äº‹åŠ¡ç®¡ç†å™¨"><a href="#æ­¥éª¤2-åœ¨JdbcConfigç±»ä¸­é…ç½®äº‹åŠ¡ç®¡ç†å™¨" class="headerlink" title="æ­¥éª¤2:åœ¨JdbcConfigç±»ä¸­é…ç½®äº‹åŠ¡ç®¡ç†å™¨"></a>æ­¥éª¤2:åœ¨JdbcConfigç±»ä¸­é…ç½®äº‹åŠ¡ç®¡ç†å™¨</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JdbcConfig</span> &#123;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;jdbc.driver&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String driver;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;jdbc.url&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String url;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;jdbc.username&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String userName;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;jdbc.password&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> DataSource <span class="title function_">dataSource</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">DruidDataSource</span> <span class="variable">ds</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DruidDataSource</span>();</span><br><span class="line">        ds.setDriverClassName(driver);</span><br><span class="line">        ds.setUrl(url);</span><br><span class="line">        ds.setUsername(userName);</span><br><span class="line">        ds.setPassword(password);</span><br><span class="line">        <span class="keyword">return</span> ds;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//é…ç½®äº‹åŠ¡ç®¡ç†å™¨ï¼Œmybatisä½¿ç”¨çš„æ˜¯jdbcäº‹åŠ¡</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> PlatformTransactionManager <span class="title function_">transactionManager</span><span class="params">(DataSource dataSource)</span>&#123;</span><br><span class="line">        <span class="type">DataSourceTransactionManager</span> <span class="variable">transactionManager</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DataSourceTransactionManager</span>();</span><br><span class="line">        transactionManager.setDataSource(dataSource);</span><br><span class="line">        <span class="keyword">return</span> transactionManager;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„ï¼š</strong>äº‹åŠ¡ç®¡ç†å™¨è¦æ ¹æ®ä½¿ç”¨æŠ€æœ¯è¿›è¡Œé€‰æ‹©ï¼ŒMybatisæ¡†æ¶ä½¿ç”¨çš„æ˜¯JDBCäº‹åŠ¡ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨<code>DataSourceTransactionManager</code></p><h5 id="æ­¥éª¤3ï¼šå¼€å¯äº‹åŠ¡æ³¨è§£"><a href="#æ­¥éª¤3ï¼šå¼€å¯äº‹åŠ¡æ³¨è§£" class="headerlink" title="æ­¥éª¤3ï¼šå¼€å¯äº‹åŠ¡æ³¨è§£"></a>æ­¥éª¤3ï¼šå¼€å¯äº‹åŠ¡æ³¨è§£</h5><p>åœ¨SpringConfigçš„é…ç½®ç±»ä¸­å¼€å¯</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ComponentScan(&quot;com.itheima&quot;)</span></span><br><span class="line"><span class="meta">@PropertySource(&quot;classpath:jdbc.properties&quot;)</span></span><br><span class="line"><span class="meta">@Import(&#123;JdbcConfig.class,MybatisConfig.class</span></span><br><span class="line"><span class="meta">//å¼€å¯æ³¨è§£å¼äº‹åŠ¡é©±åŠ¨</span></span><br><span class="line"><span class="meta">@EnableTransactionManagement</span></span><br><span class="line"><span class="meta">public class SpringConfig &#123;</span></span><br><span class="line"><span class="meta">&#125;</span></span><br><span class="line"><span class="meta"></span></span><br></pre></td></tr></table></figure><h5 id="æ­¥éª¤4-è¿è¡Œæµ‹è¯•ç±»"><a href="#æ­¥éª¤4-è¿è¡Œæµ‹è¯•ç±»" class="headerlink" title="æ­¥éª¤4:è¿è¡Œæµ‹è¯•ç±»"></a>æ­¥éª¤4:è¿è¡Œæµ‹è¯•ç±»</h5><p>ä¼šå‘ç°åœ¨è½¬æ¢çš„ä¸šåŠ¡å‡ºç°é”™è¯¯åï¼Œäº‹åŠ¡å°±å¯ä»¥æ§åˆ¶å›é¡¾ï¼Œä¿è¯æ•°æ®çš„æ­£ç¡®æ€§ã€‚</p><h5 id="çŸ¥è¯†ç‚¹1ï¼š-EnableTransactionManagement"><a href="#çŸ¥è¯†ç‚¹1ï¼š-EnableTransactionManagement" class="headerlink" title="çŸ¥è¯†ç‚¹1ï¼š@EnableTransactionManagement"></a>çŸ¥è¯†ç‚¹1ï¼š@EnableTransactionManagement</h5><table><thead><tr><th>åç§°</th><th>@EnableTransactionManagement</th></tr></thead><tbody><tr><td>ç±»å‹</td><td>é…ç½®ç±»æ³¨è§£</td></tr><tr><td>ä½ç½®</td><td>é…ç½®ç±»å®šä¹‰ä¸Šæ–¹</td></tr><tr><td>ä½œç”¨</td><td>è®¾ç½®å½“å‰Springç¯å¢ƒä¸­å¼€å¯æ³¨è§£å¼äº‹åŠ¡æ”¯æŒ</td></tr></tbody></table><h5 id="çŸ¥è¯†ç‚¹2ï¼š-Transactional"><a href="#çŸ¥è¯†ç‚¹2ï¼š-Transactional" class="headerlink" title="çŸ¥è¯†ç‚¹2ï¼š@Transactional"></a>çŸ¥è¯†ç‚¹2ï¼š@Transactional</h5><table><thead><tr><th>åç§°</th><th>@Transactional</th></tr></thead><tbody><tr><td>ç±»å‹</td><td>æ¥å£æ³¨è§£  ç±»æ³¨è§£  æ–¹æ³•æ³¨è§£</td></tr><tr><td>ä½ç½®</td><td>ä¸šåŠ¡å±‚æ¥å£ä¸Šæ–¹  ä¸šåŠ¡å±‚å®ç°ç±»ä¸Šæ–¹  ä¸šåŠ¡æ–¹æ³•ä¸Šæ–¹</td></tr><tr><td>ä½œç”¨</td><td>ä¸ºå½“å‰ä¸šåŠ¡å±‚æ–¹æ³•æ·»åŠ äº‹åŠ¡ï¼ˆå¦‚æœè®¾ç½®åœ¨ç±»æˆ–æ¥å£ä¸Šæ–¹åˆ™ç±»æˆ–æ¥å£ä¸­æ‰€æœ‰æ–¹æ³•å‡æ·»åŠ äº‹åŠ¡ï¼‰</td></tr></tbody></table><h3 id="6-2-Springäº‹åŠ¡è§’è‰²"><a href="#6-2-Springäº‹åŠ¡è§’è‰²" class="headerlink" title="6.2 Springäº‹åŠ¡è§’è‰²"></a>6.2 Springäº‹åŠ¡è§’è‰²</h3><p>è¿™èŠ‚ä¸­æˆ‘ä»¬é‡ç‚¹è¦ç†è§£ä¸¤ä¸ªæ¦‚å¿µï¼Œåˆ†åˆ«æ˜¯<code>äº‹åŠ¡ç®¡ç†å‘˜</code>å’Œ<code>äº‹åŠ¡åè°ƒå‘˜</code>ã€‚</p><ol><li>æœªå¼€å¯Springäº‹åŠ¡ä¹‹å‰:</li></ol><p><img src="/2022/07/27/Spring_day3/1630248794837.png" alt="1630248794837"></p><ul><li>AccountDaoçš„outMoneyå› ä¸ºæ˜¯ä¿®æ”¹æ“ä½œï¼Œä¼šå¼€å¯ä¸€ä¸ªäº‹åŠ¡T1</li><li>AccountDaoçš„inMoneyå› ä¸ºæ˜¯ä¿®æ”¹æ“ä½œï¼Œä¼šå¼€å¯ä¸€ä¸ªäº‹åŠ¡T2</li><li>AccountServiceçš„transferæ²¡æœ‰äº‹åŠ¡ï¼Œ<ul><li>è¿è¡Œè¿‡ç¨‹ä¸­å¦‚æœæ²¡æœ‰æŠ›å‡ºå¼‚å¸¸ï¼Œåˆ™T1å’ŒT2éƒ½æ­£å¸¸æäº¤ï¼Œæ•°æ®æ­£ç¡®</li><li>å¦‚æœåœ¨ä¸¤ä¸ªæ–¹æ³•ä¸­é—´æŠ›å‡ºå¼‚å¸¸ï¼ŒT1å› ä¸ºæ‰§è¡ŒæˆåŠŸæäº¤äº‹åŠ¡ï¼ŒT2å› ä¸ºæŠ›å¼‚å¸¸ä¸ä¼šè¢«æ‰§è¡Œ</li><li>å°±ä¼šå¯¼è‡´æ•°æ®å‡ºç°é”™è¯¯</li></ul></li></ul><ol start="2"><li>å¼€å¯Springçš„äº‹åŠ¡ç®¡ç†å</li></ol><p><img src="/2022/07/27/Spring_day3/1630249111055.png" alt="1630249111055"></p><ul><li>transferä¸Šæ·»åŠ äº†@Transactionalæ³¨è§£ï¼Œåœ¨è¯¥æ–¹æ³•ä¸Šå°±ä¼šæœ‰ä¸€ä¸ªäº‹åŠ¡T</li><li>AccountDaoçš„outMoneyæ–¹æ³•çš„äº‹åŠ¡T1åŠ å…¥åˆ°transferçš„äº‹åŠ¡Tä¸­</li><li>AccountDaoçš„inMoneyæ–¹æ³•çš„äº‹åŠ¡T2åŠ å…¥åˆ°transferçš„äº‹åŠ¡Tä¸­</li><li>è¿™æ ·å°±ä¿è¯ä»–ä»¬åœ¨åŒä¸€ä¸ªäº‹åŠ¡ä¸­ï¼Œå½“ä¸šåŠ¡å±‚ä¸­å‡ºç°å¼‚å¸¸ï¼Œæ•´ä¸ªäº‹åŠ¡å°±ä¼šå›æ»šï¼Œä¿è¯æ•°æ®çš„å‡†ç¡®æ€§ã€‚</li></ul><p>é€šè¿‡ä¸Šé¢ä¾‹å­çš„åˆ†æï¼Œæˆ‘ä»¬å°±å¯ä»¥å¾—åˆ°å¦‚ä¸‹æ¦‚å¿µ:</p><ul><li>äº‹åŠ¡ç®¡ç†å‘˜ï¼šå‘èµ·äº‹åŠ¡æ–¹ï¼Œåœ¨Springä¸­é€šå¸¸æŒ‡ä»£ä¸šåŠ¡å±‚å¼€å¯äº‹åŠ¡çš„æ–¹æ³•</li><li>äº‹åŠ¡åè°ƒå‘˜ï¼šåŠ å…¥äº‹åŠ¡æ–¹ï¼Œåœ¨Springä¸­é€šå¸¸æŒ‡ä»£æ•°æ®å±‚æ–¹æ³•ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸šåŠ¡å±‚æ–¹æ³•</li></ul><p><strong>æ³¨æ„ï¼š</strong></p><p>ç›®å‰çš„äº‹åŠ¡ç®¡ç†æ˜¯åŸºäº<code>DataSourceTransactionManager</code>å’Œ<code>SqlSessionFactoryBean</code>ä½¿ç”¨çš„æ˜¯åŒä¸€ä¸ªæ•°æ®æºã€‚</p><h3 id="6-3-Springäº‹åŠ¡å±æ€§"><a href="#6-3-Springäº‹åŠ¡å±æ€§" class="headerlink" title="6.3 Springäº‹åŠ¡å±æ€§"></a>6.3 Springäº‹åŠ¡å±æ€§</h3><p>ä¸Šä¸€èŠ‚æˆ‘ä»¬ä»‹ç»äº†ä¸¤ä¸ªæ¦‚å¿µï¼Œäº‹åŠ¡çš„ç®¡ç†å‘˜å’Œäº‹åŠ¡çš„ååŒå‘˜ï¼Œå¯¹äºè¿™ä¸¤ä¸ªæ¦‚å¿µå…·ä½“åšä»€ä¹ˆçš„ï¼Œæˆ‘ä»¬å¾…ä¼šé€šè¿‡æ¡ˆä¾‹æ¥ä½¿ç”¨ä¸‹ã€‚é™¤äº†è¿™ä¸¤ä¸ªæ¦‚å¿µï¼Œè¿˜æœ‰å°±æ˜¯äº‹åŠ¡çš„å…¶ä»–ç›¸å…³é…ç½®éƒ½æœ‰å“ªäº›ï¼Œå°±æ˜¯æˆ‘ä»¬æ¥ä¸‹æ¥è¦å­¦ä¹ çš„å†…å®¹ã€‚</p><p>åœ¨è¿™ä¸€èŠ‚ä¸­ï¼Œæˆ‘ä»¬ä¸»è¦å­¦ä¹ ä¸‰éƒ¨åˆ†å†…å®¹<code>äº‹åŠ¡é…ç½®</code>ã€<code>è½¬è´¦ä¸šåŠ¡è¿½åŠ æ—¥å¿—</code>ã€<code>äº‹åŠ¡ä¼ æ’­è¡Œä¸º</code>ã€‚</p><h4 id="6-3-1-äº‹åŠ¡é…ç½®"><a href="#6-3-1-äº‹åŠ¡é…ç½®" class="headerlink" title="6.3.1 äº‹åŠ¡é…ç½®"></a>6.3.1 äº‹åŠ¡é…ç½®</h4><p><img src="/2022/07/27/Spring_day3/1630250069844.png" alt="1630250069844"></p><p>ä¸Šé¢è¿™äº›å±æ€§éƒ½å¯ä»¥åœ¨<code>@Transactional</code>æ³¨è§£çš„å‚æ•°ä¸Šè¿›è¡Œè®¾ç½®ã€‚</p><ul><li><p>readOnlyï¼štrueåªè¯»äº‹åŠ¡ï¼Œfalseè¯»å†™äº‹åŠ¡ï¼Œå¢åˆ æ”¹è¦è®¾ä¸ºfalse,æŸ¥è¯¢è®¾ä¸ºtrueã€‚</p></li><li><p>timeout:è®¾ç½®è¶…æ—¶æ—¶é—´å•ä½ç§’ï¼Œåœ¨å¤šé•¿æ—¶é—´ä¹‹å†…äº‹åŠ¡æ²¡æœ‰æäº¤æˆåŠŸå°±è‡ªåŠ¨å›æ»šï¼Œ-1è¡¨ç¤ºä¸è®¾ç½®è¶…æ—¶æ—¶é—´ã€‚</p></li><li><p>rollbackFor:å½“å‡ºç°æŒ‡å®šå¼‚å¸¸è¿›è¡Œäº‹åŠ¡å›æ»š</p></li><li><p>noRollbackFor:å½“å‡ºç°æŒ‡å®šå¼‚å¸¸ä¸è¿›è¡Œäº‹åŠ¡å›æ»š</p><ul><li><p>æ€è€ƒ:å‡ºç°å¼‚å¸¸äº‹åŠ¡ä¼šè‡ªåŠ¨å›æ»šï¼Œè¿™ä¸ªæ˜¯æˆ‘ä»¬ä¹‹å‰å°±å·²ç»çŸ¥é“çš„</p></li><li><p>noRollbackForæ˜¯è®¾å®šå¯¹äºæŒ‡å®šçš„å¼‚å¸¸ä¸å›æ»šï¼Œè¿™ä¸ªå¥½ç†è§£</p></li><li><p>rollbackForæ˜¯æŒ‡å®šå›æ»šå¼‚å¸¸ï¼Œå¯¹äºå¼‚å¸¸äº‹åŠ¡ä¸åº”è¯¥éƒ½å›æ»šä¹ˆï¼Œä¸ºä»€ä¹ˆè¿˜è¦æŒ‡å®š?</p><ul><li><p>è¿™å—éœ€è¦æ›´æ­£ä¸€ä¸ªçŸ¥è¯†ç‚¹ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰çš„å¼‚å¸¸éƒ½ä¼šå›æ»šäº‹åŠ¡ï¼Œæ¯”å¦‚ä¸‹é¢çš„ä»£ç å°±ä¸ä¼šå›æ»š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">AccountService</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è½¬è´¦æ“ä½œ</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> out ä¼ å‡ºæ–¹</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> in è½¬å…¥æ–¹</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> money é‡‘é¢</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="comment">//é…ç½®å½“å‰æ¥å£æ–¹æ³•å…·æœ‰äº‹åŠ¡</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">transfer</span><span class="params">(String out,String in ,Double money)</span> <span class="keyword">throws</span> IOException;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AccountServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">AccountService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> AccountDao accountDao;</span><br><span class="line"><span class="meta">@Transactional</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">transfer</span><span class="params">(String out,String in ,Double money)</span> <span class="keyword">throws</span> IOException&#123;</span><br><span class="line">        accountDao.outMoney(out,money);</span><br><span class="line">        <span class="comment">//int i = 1/0; //è¿™ä¸ªå¼‚å¸¸äº‹åŠ¡ä¼šå›æ»š</span></span><br><span class="line">        <span class="keyword">if</span>(<span class="literal">true</span>)&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IOException</span>(); <span class="comment">//è¿™ä¸ªå¼‚å¸¸äº‹åŠ¡å°±ä¸ä¼šå›æ»š</span></span><br><span class="line">        &#125;</span><br><span class="line">        accountDao.inMoney(in,money);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul></li></ul></li><li><p>å‡ºç°è¿™ä¸ªé—®é¢˜çš„åŸå› æ˜¯ï¼ŒSpringçš„äº‹åŠ¡åªä¼šå¯¹<code>Errorå¼‚å¸¸</code>å’Œ<code>RuntimeExceptionå¼‚å¸¸</code>åŠå…¶å­ç±»è¿›è¡Œäº‹åŠ¡å›é¡¾ï¼Œå…¶ä»–çš„å¼‚å¸¸ç±»å‹æ˜¯ä¸ä¼šå›æ»šçš„ï¼Œå¯¹åº”IOExceptionä¸ç¬¦åˆä¸Šè¿°æ¡ä»¶æ‰€ä»¥ä¸å›æ»š</p><ul><li><p>æ­¤æ—¶å°±å¯ä»¥ä½¿ç”¨rollbackForå±æ€§æ¥è®¾ç½®å‡ºç°IOExceptionå¼‚å¸¸ä¸å›æ»š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AccountServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">AccountService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> AccountDao accountDao;</span><br><span class="line"> <span class="meta">@Transactional(rollbackFor = &#123;IOException.class&#125;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">transfer</span><span class="params">(String out,String in ,Double money)</span> <span class="keyword">throws</span> IOException&#123;</span><br><span class="line">        accountDao.outMoney(out,money);</span><br><span class="line">        <span class="comment">//int i = 1/0; //è¿™ä¸ªå¼‚å¸¸äº‹åŠ¡ä¼šå›æ»š</span></span><br><span class="line">        <span class="keyword">if</span>(<span class="literal">true</span>)&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IOException</span>(); <span class="comment">//è¿™ä¸ªå¼‚å¸¸äº‹åŠ¡å°±ä¸ä¼šå›æ»š</span></span><br><span class="line">        &#125;</span><br><span class="line">        accountDao.inMoney(in,money);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul></li><li><p>rollbackForClassNameç­‰åŒäºrollbackFor,åªä¸è¿‡å±æ€§ä¸ºå¼‚å¸¸çš„ç±»å…¨åå­—ç¬¦ä¸²</p></li><li><p>noRollbackForClassNameç­‰åŒäºnoRollbackForï¼Œåªä¸è¿‡å±æ€§ä¸ºå¼‚å¸¸çš„ç±»å…¨åå­—ç¬¦ä¸²</p></li><li><p>isolationè®¾ç½®äº‹åŠ¡çš„éš”ç¦»çº§åˆ«</p><ul><li>DEFAULT   :é»˜è®¤éš”ç¦»çº§åˆ«, ä¼šé‡‡ç”¨æ•°æ®åº“çš„éš”ç¦»çº§åˆ«</li><li>READ_UNCOMMITTED : è¯»æœªæäº¤</li><li>READ_COMMITTED : è¯»å·²æäº¤</li><li>REPEATABLE_READ : é‡å¤è¯»å–</li><li>SERIALIZABLE: ä¸²è¡ŒåŒ–</li></ul></li></ul><h4 id="6-3-2-è½¬è´¦ä¸šåŠ¡è¿½åŠ æ—¥å¿—æ¡ˆä¾‹"><a href="#6-3-2-è½¬è´¦ä¸šåŠ¡è¿½åŠ æ—¥å¿—æ¡ˆä¾‹" class="headerlink" title="6.3.2 è½¬è´¦ä¸šåŠ¡è¿½åŠ æ—¥å¿—æ¡ˆä¾‹"></a>6.3.2 è½¬è´¦ä¸šåŠ¡è¿½åŠ æ—¥å¿—æ¡ˆä¾‹</h4><h5 id="6-3-2-1-éœ€æ±‚åˆ†æ"><a href="#6-3-2-1-éœ€æ±‚åˆ†æ" class="headerlink" title="6.3.2.1 éœ€æ±‚åˆ†æ"></a>6.3.2.1 éœ€æ±‚åˆ†æ</h5><p>åœ¨å‰é¢çš„è½¬æ¡ˆä¾‹çš„åŸºç¡€ä¸Šæ·»åŠ æ–°çš„éœ€æ±‚ï¼Œå®Œæˆè½¬è´¦åè®°å½•æ—¥å¿—ã€‚</p><ul><li>éœ€æ±‚ï¼šå®ç°ä»»æ„ä¸¤ä¸ªè´¦æˆ·é—´è½¬è´¦æ“ä½œï¼Œå¹¶å¯¹æ¯æ¬¡è½¬è´¦æ“ä½œåœ¨æ•°æ®åº“è¿›è¡Œç•™ç—•</li><li>éœ€æ±‚å¾®ç¼©ï¼šAè´¦æˆ·å‡é’±ï¼ŒBè´¦æˆ·åŠ é’±ï¼Œæ•°æ®åº“è®°å½•æ—¥å¿—</li></ul><p>åŸºäºä¸Šè¿°çš„ä¸šåŠ¡éœ€æ±‚ï¼Œæˆ‘ä»¬æ¥åˆ†æä¸‹è¯¥å¦‚ä½•å®ç°:</p><p>â‘ ï¼šåŸºäºè½¬è´¦æ“ä½œæ¡ˆä¾‹æ·»åŠ æ—¥å¿—æ¨¡å—ï¼Œå®ç°æ•°æ®åº“ä¸­è®°å½•æ—¥å¿—</p><p>â‘¡ï¼šä¸šåŠ¡å±‚è½¬è´¦æ“ä½œï¼ˆtransferï¼‰ï¼Œè°ƒç”¨å‡é’±ã€åŠ é’±ä¸è®°å½•æ—¥å¿—åŠŸèƒ½</p><p>éœ€è¦æ³¨æ„ä¸€ç‚¹å°±æ˜¯ï¼Œæˆ‘ä»¬è¿™ä¸ªæ¡ˆä¾‹çš„é¢„æœŸæ•ˆæœä¸º:</p><p><em>æ— è®ºè½¬è´¦æ“ä½œæ˜¯å¦æˆåŠŸï¼Œå‡è¿›è¡Œè½¬è´¦æ“ä½œçš„æ—¥å¿—ç•™ç—•</em></p><h5 id="6-3-2-2-ç¯å¢ƒå‡†å¤‡"><a href="#6-3-2-2-ç¯å¢ƒå‡†å¤‡" class="headerlink" title="6.3.2.2 ç¯å¢ƒå‡†å¤‡"></a>6.3.2.2 ç¯å¢ƒå‡†å¤‡</h5><p>è¯¥ç¯å¢ƒæ˜¯åŸºäºè½¬è´¦ç¯å¢ƒæ¥å®Œæˆçš„ï¼Œæ‰€ä»¥ç¯å¢ƒçš„å‡†å¤‡å¯ä»¥å‚è€ƒ<code>6.1.3çš„ç¯å¢ƒæ­å»ºæ­¥éª¤</code>ï¼Œåœ¨å…¶åŸºç¡€ä¸Šï¼Œæˆ‘ä»¬ç»§ç»­å¾€ä¸‹å†™</p><h6 id="æ­¥éª¤1-åˆ›å»ºæ—¥å¿—è¡¨"><a href="#æ­¥éª¤1-åˆ›å»ºæ—¥å¿—è¡¨" class="headerlink" title="æ­¥éª¤1:åˆ›å»ºæ—¥å¿—è¡¨"></a>æ­¥éª¤1:åˆ›å»ºæ—¥å¿—è¡¨</h6><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> tbl_log(</span><br><span class="line">   id <span class="type">int</span> <span class="keyword">primary</span> key auto_increment,</span><br><span class="line">   info <span class="type">varchar</span>(<span class="number">255</span>),</span><br><span class="line">   createDate datetime</span><br><span class="line">)</span><br></pre></td></tr></table></figure><h6 id="æ­¥éª¤2-æ·»åŠ LogDaoæ¥å£"><a href="#æ­¥éª¤2-æ·»åŠ LogDaoæ¥å£" class="headerlink" title="æ­¥éª¤2:æ·»åŠ LogDaoæ¥å£"></a>æ­¥éª¤2:æ·»åŠ LogDaoæ¥å£</h6><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">LogDao</span> &#123;</span><br><span class="line">    <span class="meta">@Insert(&quot;insert into tbl_log (info,createDate) values(#&#123;info&#125;,now())&quot;)</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">log</span><span class="params">(String info)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h6 id="æ­¥éª¤3-æ·»åŠ LogServiceæ¥å£ä¸å®ç°ç±»"><a href="#æ­¥éª¤3-æ·»åŠ LogServiceæ¥å£ä¸å®ç°ç±»" class="headerlink" title="æ­¥éª¤3:æ·»åŠ LogServiceæ¥å£ä¸å®ç°ç±»"></a>æ­¥éª¤3:æ·»åŠ LogServiceæ¥å£ä¸å®ç°ç±»</h6><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">LogService</span> &#123;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">log</span><span class="params">(String out, String in, Double money)</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LogServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">LogService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> LogDao logDao;</span><br><span class="line"><span class="meta">@Transactional</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">log</span><span class="params">(String out,String in,Double money )</span> &#123;</span><br><span class="line">        logDao.log(<span class="string">&quot;è½¬è´¦æ“ä½œç”±&quot;</span>+out+<span class="string">&quot;åˆ°&quot;</span>+in+<span class="string">&quot;,é‡‘é¢ï¼š&quot;</span>+money);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h6 id="æ­¥éª¤4-åœ¨è½¬è´¦çš„ä¸šåŠ¡ä¸­æ·»åŠ è®°å½•æ—¥å¿—"><a href="#æ­¥éª¤4-åœ¨è½¬è´¦çš„ä¸šåŠ¡ä¸­æ·»åŠ è®°å½•æ—¥å¿—" class="headerlink" title="æ­¥éª¤4:åœ¨è½¬è´¦çš„ä¸šåŠ¡ä¸­æ·»åŠ è®°å½•æ—¥å¿—"></a>æ­¥éª¤4:åœ¨è½¬è´¦çš„ä¸šåŠ¡ä¸­æ·»åŠ è®°å½•æ—¥å¿—</h6><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">AccountService</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è½¬è´¦æ“ä½œ</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> out ä¼ å‡ºæ–¹</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> in è½¬å…¥æ–¹</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> money é‡‘é¢</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="comment">//é…ç½®å½“å‰æ¥å£æ–¹æ³•å…·æœ‰äº‹åŠ¡</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">transfer</span><span class="params">(String out,String in ,Double money)</span><span class="keyword">throws</span> IOException ;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AccountServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">AccountService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> AccountDao accountDao;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> LogService logService;</span><br><span class="line"><span class="meta">@Transactional</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">transfer</span><span class="params">(String out,String in ,Double money)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            accountDao.outMoney(out,money);</span><br><span class="line">            accountDao.inMoney(in,money);</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            logService.log(out,in,money);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h6 id="æ­¥éª¤5-è¿è¡Œç¨‹åº-2"><a href="#æ­¥éª¤5-è¿è¡Œç¨‹åº-2" class="headerlink" title="æ­¥éª¤5:è¿è¡Œç¨‹åº"></a>æ­¥éª¤5:è¿è¡Œç¨‹åº</h6><ul><li><p>å½“ç¨‹åºæ­£å¸¸è¿è¡Œï¼Œtbl_accountè¡¨ä¸­è½¬è´¦æˆåŠŸï¼Œtbl_logè¡¨ä¸­æ—¥å¿—è®°å½•æˆåŠŸ</p></li><li><p>å½“è½¬è´¦ä¸šåŠ¡ä¹‹é—´å‡ºç°å¼‚å¸¸(int i &#x3D;1&#x2F;0),è½¬è´¦å¤±è´¥ï¼Œtbl_accountæˆåŠŸå›æ»šï¼Œä½†æ˜¯tbl_logè¡¨æœªæ·»åŠ æ•°æ®</p></li><li><p>è¿™ä¸ªç»“æœå’Œæˆ‘ä»¬æƒ³è¦çš„ä¸ä¸€æ ·ï¼Œä»€ä¹ˆåŸå› ?è¯¥å¦‚ä½•è§£å†³?</p></li><li><p>å¤±è´¥åŸå› :æ—¥å¿—çš„è®°å½•ä¸è½¬è´¦æ“ä½œéš¶å±åŒä¸€ä¸ªäº‹åŠ¡ï¼ŒåŒæˆåŠŸåŒå¤±è´¥</p></li><li><p>æœ€ç»ˆæ•ˆæœ:æ— è®ºè½¬è´¦æ“ä½œæ˜¯å¦æˆåŠŸï¼Œæ—¥å¿—å¿…é¡»ä¿ç•™</p></li></ul><h4 id="6-3-3-äº‹åŠ¡ä¼ æ’­è¡Œä¸º"><a href="#6-3-3-äº‹åŠ¡ä¼ æ’­è¡Œä¸º" class="headerlink" title="6.3.3 äº‹åŠ¡ä¼ æ’­è¡Œä¸º"></a>6.3.3 äº‹åŠ¡ä¼ æ’­è¡Œä¸º</h4><p><img src="/2022/07/27/Spring_day3/1630253779575.png" alt="1630253779575"></p><p>å¯¹äºä¸Šè¿°æ¡ˆä¾‹çš„åˆ†æ:</p><ul><li>logæ–¹æ³•ã€inMoneyæ–¹æ³•å’ŒoutMoneyæ–¹æ³•éƒ½å±äºå¢åˆ æ”¹ï¼Œåˆ†åˆ«æœ‰äº‹åŠ¡T1,T2,T3</li><li>transferå› ä¸ºåŠ äº†@Transactionalæ³¨è§£ï¼Œä¹Ÿå¼€å¯äº†äº‹åŠ¡T</li><li>å‰é¢æˆ‘ä»¬è®²è¿‡Springäº‹åŠ¡ä¼šæŠŠT1,T2,T3éƒ½åŠ å…¥åˆ°äº‹åŠ¡Tä¸­</li><li>æ‰€ä»¥å½“è½¬è´¦å¤±è´¥åï¼Œæ‰€æœ‰çš„äº‹åŠ¡éƒ½å›æ»šï¼Œå¯¼è‡´æ—¥å¿—æ²¡æœ‰è®°å½•ä¸‹æ¥</li><li>è¿™å’Œæˆ‘ä»¬çš„éœ€æ±‚ä¸ç¬¦ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±æƒ³èƒ½ä¸èƒ½è®©logæ–¹æ³•å•ç‹¬æ˜¯ä¸€ä¸ªäº‹åŠ¡å‘¢?</li></ul><p>è¦æƒ³è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå°±éœ€è¦ç”¨åˆ°äº‹åŠ¡ä¼ æ’­è¡Œä¸ºï¼Œæ‰€è°“çš„äº‹åŠ¡ä¼ æ’­è¡Œä¸ºæŒ‡çš„æ˜¯:</p><p>äº‹åŠ¡ä¼ æ’­è¡Œä¸ºï¼šäº‹åŠ¡åè°ƒå‘˜å¯¹äº‹åŠ¡ç®¡ç†å‘˜æ‰€æºå¸¦äº‹åŠ¡çš„å¤„ç†æ€åº¦ã€‚</p><p>å…·ä½“å¦‚ä½•è§£å†³ï¼Œå°±éœ€è¦ç”¨åˆ°ä¹‹å‰æˆ‘ä»¬æ²¡æœ‰è¯´çš„<code>propagationå±æ€§</code>ã€‚</p><h5 id="1-ä¿®æ”¹logServiceæ”¹å˜äº‹åŠ¡çš„ä¼ æ’­è¡Œä¸º"><a href="#1-ä¿®æ”¹logServiceæ”¹å˜äº‹åŠ¡çš„ä¼ æ’­è¡Œä¸º" class="headerlink" title="1.ä¿®æ”¹logServiceæ”¹å˜äº‹åŠ¡çš„ä¼ æ’­è¡Œä¸º"></a>1.ä¿®æ”¹logServiceæ”¹å˜äº‹åŠ¡çš„ä¼ æ’­è¡Œä¸º</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LogServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">LogService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> LogDao logDao;</span><br><span class="line"><span class="comment">//propagationè®¾ç½®äº‹åŠ¡å±æ€§ï¼šä¼ æ’­è¡Œä¸ºè®¾ç½®ä¸ºå½“å‰æ“ä½œéœ€è¦æ–°äº‹åŠ¡</span></span><br><span class="line">    <span class="meta">@Transactional(propagation = Propagation.REQUIRES_NEW)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">log</span><span class="params">(String out,String in,Double money )</span> &#123;</span><br><span class="line">        logDao.log(<span class="string">&quot;è½¬è´¦æ“ä½œç”±&quot;</span>+out+<span class="string">&quot;åˆ°&quot;</span>+in+<span class="string">&quot;,é‡‘é¢ï¼š&quot;</span>+money);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿è¡Œåï¼Œå°±èƒ½å®ç°æˆ‘ä»¬æƒ³è¦çš„ç»“æœï¼Œä¸ç®¡è½¬è´¦æ˜¯å¦æˆåŠŸï¼Œéƒ½ä¼šè®°å½•æ—¥å¿—ã€‚</p><h5 id="2-äº‹åŠ¡ä¼ æ’­è¡Œä¸ºçš„å¯é€‰å€¼"><a href="#2-äº‹åŠ¡ä¼ æ’­è¡Œä¸ºçš„å¯é€‰å€¼" class="headerlink" title="2.äº‹åŠ¡ä¼ æ’­è¡Œä¸ºçš„å¯é€‰å€¼"></a>2.äº‹åŠ¡ä¼ æ’­è¡Œä¸ºçš„å¯é€‰å€¼</h5><p><img src="/2022/07/27/Spring_day3/1630254257628.png" alt="1630254257628"></p><p>å¯¹äºæˆ‘ä»¬å¼€å‘å®é™…ä¸­ä½¿ç”¨çš„è¯ï¼Œå› ä¸ºé»˜è®¤å€¼éœ€è¦äº‹åŠ¡æ˜¯å¸¸æ€çš„ã€‚æ ¹æ®å¼€å‘è¿‡ç¨‹é€‰æ‹©å…¶ä»–çš„å°±å¯ä»¥äº†ï¼Œä¾‹å¦‚æ¡ˆä¾‹ä¸­éœ€è¦æ–°äº‹åŠ¡å°±éœ€è¦æ‰‹å·¥é…ç½®ã€‚å…¶å®å…¥è´¦å’Œå‡ºè´¦æ“ä½œä¸Šä¹Ÿæœ‰äº‹åŠ¡ï¼Œé‡‡ç”¨çš„å°±æ˜¯é»˜è®¤å€¼ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> Javaå¼€å‘æ¡†æ¶ </tag>
            
            <tag> Spring </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Spring--day02</title>
      <link href="/2022/07/27/Spring_day2/"/>
      <url>/2022/07/27/Spring_day2/</url>
      
        <content type="html"><![CDATA[<p><strong>ä»Šæ—¥ç›®æ ‡</strong></p><blockquote><ul><li>æŒæ¡IOC&#x2F;DIé…ç½®ç®¡ç†ç¬¬ä¸‰æ–¹bean</li><li>æŒæ¡IOC&#x2F;DIçš„æ³¨è§£å¼€å‘</li><li>æŒæ¡IOC&#x2F;DIæ³¨è§£ç®¡ç†ç¬¬ä¸‰æ–¹bean</li><li>å®ŒæˆSpringä¸MybatisåŠJunitçš„æ•´åˆå¼€å‘</li></ul></blockquote><h2 id="1ï¼ŒIOC-x2F-DIé…ç½®ç®¡ç†ç¬¬ä¸‰æ–¹bean"><a href="#1ï¼ŒIOC-x2F-DIé…ç½®ç®¡ç†ç¬¬ä¸‰æ–¹bean" class="headerlink" title="1ï¼ŒIOC&#x2F;DIé…ç½®ç®¡ç†ç¬¬ä¸‰æ–¹bean"></a>1ï¼ŒIOC&#x2F;DIé…ç½®ç®¡ç†ç¬¬ä¸‰æ–¹bean</h2><p>å‰é¢æ‰€è®²çš„çŸ¥è¯†ç‚¹éƒ½æ˜¯åŸºäºæˆ‘ä»¬è‡ªå·±å†™çš„ç±»ï¼Œç°åœ¨å¦‚æœæœ‰éœ€æ±‚è®©æˆ‘ä»¬å»ç®¡ç†ç¬¬ä¸‰æ–¹jaråŒ…ä¸­çš„ç±»ï¼Œè¯¥å¦‚ä½•ç®¡ç†?</p><h3 id="1-1-æ¡ˆä¾‹-æ•°æ®æºå¯¹è±¡ç®¡ç†"><a href="#1-1-æ¡ˆä¾‹-æ•°æ®æºå¯¹è±¡ç®¡ç†" class="headerlink" title="1.1 æ¡ˆä¾‹:æ•°æ®æºå¯¹è±¡ç®¡ç†"></a>1.1 æ¡ˆä¾‹:æ•°æ®æºå¯¹è±¡ç®¡ç†</h3><p>åœ¨è¿™ä¸€èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†é€šè¿‡ä¸€ä¸ªæ¡ˆä¾‹æ¥å­¦ä¹ ä¸‹å¯¹äºç¬¬ä¸‰æ–¹beanè¯¥å¦‚ä½•è¿›è¡Œé…ç½®ç®¡ç†ã€‚</p><p>ä»¥åæˆ‘ä»¬ä¼šç”¨åˆ°å¾ˆå¤šç¬¬ä¸‰æ–¹çš„bean,æœ¬æ¬¡æ¡ˆä¾‹å°†ä½¿ç”¨å’±ä»¬å‰é¢æåˆ°è¿‡çš„æ•°æ®æº<code>Druid(å¾·é²ä¼Š)</code>å’Œ<code>C3P0</code>æ¥é…ç½®å­¦ä¹ ä¸‹ã€‚</p><h4 id="1-1-1-ç¯å¢ƒå‡†å¤‡"><a href="#1-1-1-ç¯å¢ƒå‡†å¤‡" class="headerlink" title="1.1.1 ç¯å¢ƒå‡†å¤‡"></a>1.1.1 ç¯å¢ƒå‡†å¤‡</h4><p>å­¦ä¹ ä¹‹å‰ï¼Œå…ˆæ¥å‡†å¤‡ä¸‹æ¡ˆä¾‹ç¯å¢ƒ:</p><ul><li><p>åˆ›å»ºä¸€ä¸ªMavené¡¹ç›®</p><p><img src="/2022/07/27/Spring_day2/1629860338328.png" alt="1629860338328"></p></li><li><p>pom.xmlæ·»åŠ ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.10.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>resourcesä¸‹æ·»åŠ springçš„é…ç½®æ–‡ä»¶applicationContext.xml</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;</span></span></span><br><span class="line"><span class="string"><span class="tag">            http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">            http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>ç¼–å†™ä¸€ä¸ªè¿è¡Œç±»App</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">App</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">ApplicationContext</span> <span class="variable">ctx</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;applicationContext.xml&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h4 id="1-1-2-æ€è·¯åˆ†æ"><a href="#1-1-2-æ€è·¯åˆ†æ" class="headerlink" title="1.1.2 æ€è·¯åˆ†æ"></a>1.1.2 æ€è·¯åˆ†æ</h4><p>åœ¨ä¸Šè¿°ç¯å¢ƒä¸‹ï¼Œæˆ‘ä»¬æ¥å¯¹æ•°æ®æºè¿›è¡Œé…ç½®ç®¡ç†ï¼Œå…ˆæ¥åˆ†æä¸‹æ€è·¯:</p><blockquote><p>éœ€æ±‚:ä½¿ç”¨Springçš„IOCå®¹å™¨æ¥ç®¡ç†Druidè¿æ¥æ± å¯¹è±¡</p><p>1.ä½¿ç”¨ç¬¬ä¸‰æ–¹çš„æŠ€æœ¯ï¼Œéœ€è¦åœ¨pom.xmlæ·»åŠ ä¾èµ–</p><p>2.åœ¨é…ç½®æ–‡ä»¶ä¸­å°†ã€ç¬¬ä¸‰æ–¹çš„ç±»ã€‘åˆ¶ä½œæˆä¸€ä¸ªbeanï¼Œè®©IOCå®¹å™¨è¿›è¡Œç®¡ç†</p><p>3.æ•°æ®åº“è¿æ¥éœ€è¦åŸºç¡€çš„å››è¦ç´ <code>é©±åŠ¨</code>ã€<code>è¿æ¥</code>ã€<code>ç”¨æˆ·å</code>å’Œ<code>å¯†ç </code>ï¼Œã€å¦‚ä½•æ³¨å…¥ã€‘åˆ°å¯¹åº”çš„beanä¸­</p><p>4.ä»IOCå®¹å™¨ä¸­è·å–å¯¹åº”çš„beanå¯¹è±¡ï¼Œå°†å…¶æ‰“å°åˆ°æ§åˆ¶å°æŸ¥çœ‹ç»“æœ</p></blockquote><p><strong>æ€è€ƒ:</strong></p><ul><li>ç¬¬ä¸‰æ–¹çš„ç±»æŒ‡çš„æ˜¯ä»€ä¹ˆ?</li><li>å¦‚ä½•æ³¨å…¥æ•°æ®åº“è¿æ¥å››è¦ç´ ?</li></ul><h4 id="1-1-3-å®ç°Druidç®¡ç†"><a href="#1-1-3-å®ç°Druidç®¡ç†" class="headerlink" title="1.1.3 å®ç°Druidç®¡ç†"></a>1.1.3 å®ç°Druidç®¡ç†</h4><p>å¸¦ç€è¿™ä¸¤ä¸ªé—®é¢˜ï¼ŒæŠŠä¸‹é¢çš„æ¡ˆä¾‹å®ç°ä¸‹:</p><h5 id="æ­¥éª¤1-å¯¼å…¥druidçš„ä¾èµ–"><a href="#æ­¥éª¤1-å¯¼å…¥druidçš„ä¾èµ–" class="headerlink" title="æ­¥éª¤1:å¯¼å…¥druidçš„ä¾èµ–"></a>æ­¥éª¤1:å¯¼å…¥<code>druid</code>çš„ä¾èµ–</h5><p>pom.xmlä¸­æ·»åŠ ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.16<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="æ­¥éª¤2-é…ç½®ç¬¬ä¸‰æ–¹bean"><a href="#æ­¥éª¤2-é…ç½®ç¬¬ä¸‰æ–¹bean" class="headerlink" title="æ­¥éª¤2:é…ç½®ç¬¬ä¸‰æ–¹bean"></a>æ­¥éª¤2:é…ç½®ç¬¬ä¸‰æ–¹bean</h5><p>åœ¨applicationContext.xmlé…ç½®æ–‡ä»¶ä¸­æ·»åŠ <code>DruidDataSource</code>çš„é…ç½®</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;</span></span></span><br><span class="line"><span class="string"><span class="tag">            http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">            http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--ç®¡ç†DruidDataSourceå¯¹è±¡--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;com.alibaba.druid.pool.DruidDataSource&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClassName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/spring_db&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>è¯´æ˜:</strong></p><ul><li>driverClassName:æ•°æ®åº“é©±åŠ¨</li><li>url:æ•°æ®åº“è¿æ¥åœ°å€</li><li>username:æ•°æ®åº“è¿æ¥ç”¨æˆ·å</li><li>password:æ•°æ®åº“è¿æ¥å¯†ç </li><li>æ•°æ®åº“è¿æ¥çš„å››è¦ç´ è¦å’Œè‡ªå·±ä½¿ç”¨çš„æ•°æ®åº“ä¿¡æ¯ä¸€è‡´ã€‚</li></ul><h5 id="æ­¥éª¤3-ä»IOCå®¹å™¨ä¸­è·å–å¯¹åº”çš„beanå¯¹è±¡"><a href="#æ­¥éª¤3-ä»IOCå®¹å™¨ä¸­è·å–å¯¹åº”çš„beanå¯¹è±¡" class="headerlink" title="æ­¥éª¤3:ä»IOCå®¹å™¨ä¸­è·å–å¯¹åº”çš„beanå¯¹è±¡"></a>æ­¥éª¤3:ä»IOCå®¹å™¨ä¸­è·å–å¯¹åº”çš„beanå¯¹è±¡</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">App</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">       <span class="type">ApplicationContext</span> <span class="variable">ctx</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;applicationContext.xml&quot;</span>);</span><br><span class="line">       <span class="type">DataSource</span> <span class="variable">dataSource</span> <span class="operator">=</span> (DataSource) ctx.getBean(<span class="string">&quot;dataSource&quot;</span>);</span><br><span class="line">       System.out.println(dataSource);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="æ­¥éª¤4-è¿è¡Œç¨‹åº"><a href="#æ­¥éª¤4-è¿è¡Œç¨‹åº" class="headerlink" title="æ­¥éª¤4:è¿è¡Œç¨‹åº"></a>æ­¥éª¤4:è¿è¡Œç¨‹åº</h5><p>æ‰“å°å¦‚ä¸‹ç»“æœ: è¯´æ˜ç¬¬ä¸‰æ–¹beanå¯¹è±¡å·²ç»è¢«springçš„IOCå®¹å™¨è¿›è¡Œç®¡ç†</p><p><img src="/2022/07/27/Spring_day2/1629887733081.png" alt="1629887733081"></p><p>åšå®Œæ¡ˆä¾‹åï¼Œæˆ‘ä»¬å¯ä»¥å°†åˆšæ‰æ€è€ƒçš„ä¸¤ä¸ªé—®é¢˜ç­”æ¡ˆè¯´ä¸‹:</p><ul><li><p>ç¬¬ä¸‰æ–¹çš„ç±»æŒ‡çš„æ˜¯ä»€ä¹ˆ?</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">DruidDataSource</span><br></pre></td></tr></table></figure></li><li><p>å¦‚ä½•æ³¨å…¥æ•°æ®åº“è¿æ¥å››è¦ç´ ?</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">setteræ³¨å…¥</span><br></pre></td></tr></table></figure></li></ul><h4 id="1-1-4-å®ç°C3P0ç®¡ç†"><a href="#1-1-4-å®ç°C3P0ç®¡ç†" class="headerlink" title="1.1.4 å®ç°C3P0ç®¡ç†"></a>1.1.4 å®ç°C3P0ç®¡ç†</h4><p>å®Œæˆäº†DruidDataSourceçš„ç®¡ç†ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å†æ¥åŠ æ·±ä¸‹ç»ƒä¹ ï¼Œè¿™æ¬¡æˆ‘ä»¬æ¥ç®¡ç†<code>C3P0</code>æ•°æ®æºï¼Œå…·ä½“çš„å®ç°æ­¥éª¤æ˜¯ä»€ä¹ˆå‘¢?</p><blockquote><p>éœ€æ±‚:ä½¿ç”¨Springçš„IOCå®¹å™¨æ¥ç®¡ç†C3P0è¿æ¥æ± å¯¹è±¡</p><p>å®ç°æ–¹æ¡ˆå’Œä¸Šé¢åŸºæœ¬ä¸€è‡´ï¼Œé‡ç‚¹è¦å…³æ³¨ç®¡ç†çš„æ˜¯å“ªä¸ªbeanå¯¹è±¡&#96;?</p></blockquote><h5 id="æ­¥éª¤1-å¯¼å…¥C3P0çš„ä¾èµ–"><a href="#æ­¥éª¤1-å¯¼å…¥C3P0çš„ä¾èµ–" class="headerlink" title="æ­¥éª¤1:å¯¼å…¥C3P0çš„ä¾èµ–"></a>æ­¥éª¤1:å¯¼å…¥<code>C3P0</code>çš„ä¾èµ–</h5><p>pom.xmlä¸­æ·»åŠ ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>c3p0<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>c3p0<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.9.1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>å¯¹äºæ–°çš„æŠ€æœ¯ï¼Œä¸çŸ¥é“å…·ä½“çš„åæ ‡è¯¥å¦‚ä½•æŸ¥æ‰¾?</strong></p><ul><li><p>ç›´æ¥ç™¾åº¦æœç´¢</p></li><li><p>ä»mvnçš„ä»“åº“<code>https://mvnrepository.com/</code>ä¸­è¿›è¡Œæœç´¢</p><p><img src="/2022/07/27/Spring_day2/1629888540286.png" alt="1629888540286"></p></li></ul><h5 id="æ­¥éª¤2-é…ç½®ç¬¬ä¸‰æ–¹bean-1"><a href="#æ­¥éª¤2-é…ç½®ç¬¬ä¸‰æ–¹bean-1" class="headerlink" title="æ­¥éª¤2:é…ç½®ç¬¬ä¸‰æ–¹bean"></a>æ­¥éª¤2:é…ç½®ç¬¬ä¸‰æ–¹bean</h5><p>åœ¨applicationContext.xmlé…ç½®æ–‡ä»¶ä¸­æ·»åŠ é…ç½®</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.mchange.v2.c3p0.ComboPooledDataSource&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClass&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;jdbcUrl&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/spring_db&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;user&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;maxPoolSize&quot;</span> <span class="attr">value</span>=<span class="string">&quot;1000&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„:</strong></p><ul><li>ComboPooledDataSourceçš„å±æ€§æ˜¯é€šè¿‡setteræ–¹å¼è¿›è¡Œæ³¨å…¥</li><li>æƒ³æ³¨å…¥å±æ€§å°±éœ€è¦åœ¨ComboPooledDataSourceç±»æˆ–å…¶ä¸Šå±‚ç±»ä¸­æœ‰æä¾›å±æ€§å¯¹åº”çš„setteræ–¹æ³•</li><li>C3P0çš„å››ä¸ªå±æ€§å’ŒDruidçš„å››ä¸ªå±æ€§æ˜¯ä¸ä¸€æ ·çš„</li></ul><h5 id="æ­¥éª¤3-è¿è¡Œç¨‹åº"><a href="#æ­¥éª¤3-è¿è¡Œç¨‹åº" class="headerlink" title="æ­¥éª¤3:è¿è¡Œç¨‹åº"></a>æ­¥éª¤3:è¿è¡Œç¨‹åº</h5><p>ç¨‹åºä¼šæŠ¥é”™ï¼Œé”™è¯¯å¦‚ä¸‹</p><p><img src="/2022/07/27/Spring_day2/1629889170229.png" alt="1629889170229"></p><p>æŠ¥çš„é”™ä¸º<code>ClassNotFoundException</code>ï¼Œç¿»è¯‘å‡ºæ¥æ˜¯<code>ç±»æ²¡æœ‰å‘ç°çš„å¼‚å¸¸</code>ï¼Œå…·ä½“çš„ç±»ä¸º<code>com.mysql.jdbc.Driver</code>ã€‚é”™è¯¯çš„åŸå› æ˜¯ç¼ºå°‘mysqlçš„é©±åŠ¨åŒ…ã€‚</p><p>åˆ†æå‡ºé”™è¯¯çš„åŸå› ï¼Œå…·ä½“çš„è§£å†³æ–¹æ¡ˆå°±æ¯”è¾ƒç®€å•ï¼Œåªéœ€è¦åœ¨pom.xmlæŠŠé©±åŠ¨åŒ…å¼•å…¥å³å¯ã€‚</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.47<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ·»åŠ å®Œmysqlçš„é©±åŠ¨åŒ…ä»¥åï¼Œå†æ¬¡è¿è¡ŒApp,å°±å¯ä»¥æ‰“å°å‡ºç»“æœ:</p><p><img src="/2022/07/27/Spring_day2/1629903845404.png" alt="1629903845404"></p><p><strong>æ³¨æ„ï¼š</strong></p><ul><li>æ•°æ®è¿æ¥æ± åœ¨é…ç½®å±æ€§çš„æ—¶å€™ï¼Œé™¤äº†å¯ä»¥æ³¨å…¥æ•°æ®åº“è¿æ¥å››è¦ç´ å¤–è¿˜å¯ä»¥é…ç½®å¾ˆå¤šå…¶ä»–çš„å±æ€§ï¼Œå…·ä½“éƒ½æœ‰å“ªäº›å±æ€§ç”¨åˆ°çš„æ—¶å€™å†å»æŸ¥ï¼Œä¸€èˆ¬é…ç½®åŸºç¡€çš„å››ä¸ªï¼Œå…¶ä»–éƒ½æœ‰è‡ªå·±çš„é»˜è®¤å€¼</li><li>Druidå’ŒC3P0åœ¨æ²¡æœ‰å¯¼å…¥mysqlé©±åŠ¨åŒ…çš„å‰æä¸‹ï¼Œä¸€ä¸ªæ²¡æŠ¥é”™ä¸€ä¸ªæŠ¥é”™ï¼Œè¯´æ˜Druidåœ¨åˆå§‹åŒ–çš„æ—¶å€™æ²¡æœ‰å»åŠ è½½é©±åŠ¨ï¼Œè€ŒC3P0åˆšå¥½ç›¸å</li><li>Druidç¨‹åºè¿è¡Œè™½ç„¶æ²¡æœ‰æŠ¥é”™ï¼Œä½†æ˜¯å½“è°ƒç”¨DruidDataSourceçš„getConnection()æ–¹æ³•è·å–è¿æ¥çš„æ—¶å€™ï¼Œä¹Ÿä¼šæŠ¥æ‰¾ä¸åˆ°é©±åŠ¨ç±»çš„é”™è¯¯</li></ul><h3 id="1-2-åŠ è½½propertiesæ–‡ä»¶"><a href="#1-2-åŠ è½½propertiesæ–‡ä»¶" class="headerlink" title="1.2 åŠ è½½propertiesæ–‡ä»¶"></a>1.2 åŠ è½½propertiesæ–‡ä»¶</h3><p>ä¸ŠèŠ‚ä¸­æˆ‘ä»¬å·²ç»å®Œæˆä¸¤ä¸ªæ•°æ®æº<code>druid</code>å’Œ<code>C3P0</code>çš„é…ç½®ï¼Œä½†æ˜¯å…¶ä¸­åŒ…å«äº†ä¸€äº›é—®é¢˜ï¼Œæˆ‘ä»¬æ¥åˆ†æä¸‹:</p><ul><li>è¿™ä¸¤ä¸ªæ•°æ®æºä¸­éƒ½ä½¿ç”¨åˆ°äº†ä¸€äº›å›ºå®šçš„å¸¸é‡å¦‚æ•°æ®åº“è¿æ¥å››è¦ç´ ï¼ŒæŠŠè¿™äº›å€¼å†™åœ¨Springçš„é…ç½®æ–‡ä»¶ä¸­ä¸åˆ©äºåæœŸç»´æŠ¤</li><li>éœ€è¦å°†è¿™äº›å€¼æå–åˆ°ä¸€ä¸ªå¤–éƒ¨çš„propertiesé…ç½®æ–‡ä»¶ä¸­</li><li>Springæ¡†æ¶å¦‚ä½•ä»é…ç½®æ–‡ä»¶ä¸­è¯»å–å±æ€§å€¼æ¥é…ç½®å°±æ˜¯æ¥ä¸‹æ¥è¦è§£å†³çš„é—®é¢˜ã€‚</li></ul><p>é—®é¢˜æå‡ºæ¥åï¼Œå…·ä½“è¯¥å¦‚ä½•å®ç°?</p><h4 id="1-2-1-ç¬¬ä¸‰æ–¹beanå±æ€§ä¼˜åŒ–"><a href="#1-2-1-ç¬¬ä¸‰æ–¹beanå±æ€§ä¼˜åŒ–" class="headerlink" title="1.2.1 ç¬¬ä¸‰æ–¹beanå±æ€§ä¼˜åŒ–"></a>1.2.1 ç¬¬ä¸‰æ–¹beanå±æ€§ä¼˜åŒ–</h4><h5 id="1-2-1-1-å®ç°æ€è·¯"><a href="#1-2-1-1-å®ç°æ€è·¯" class="headerlink" title="1.2.1.1 å®ç°æ€è·¯"></a>1.2.1.1 å®ç°æ€è·¯</h5><blockquote><p>éœ€æ±‚:å°†æ•°æ®åº“è¿æ¥å››è¦ç´ æå–åˆ°propertiesé…ç½®æ–‡ä»¶ï¼Œspringæ¥åŠ è½½é…ç½®ä¿¡æ¯å¹¶ä½¿ç”¨è¿™äº›ä¿¡æ¯æ¥å®Œæˆå±æ€§æ³¨å…¥ã€‚</p><p>1.åœ¨resourcesä¸‹åˆ›å»ºä¸€ä¸ªjdbc.properties(æ–‡ä»¶çš„åç§°å¯ä»¥ä»»æ„)</p><p>2.å°†æ•°æ®åº“è¿æ¥å››è¦ç´ é…ç½®åˆ°é…ç½®æ–‡ä»¶ä¸­</p><p>3.åœ¨Springçš„é…ç½®æ–‡ä»¶ä¸­åŠ è½½propertiesæ–‡ä»¶</p><p>4.ä½¿ç”¨åŠ è½½åˆ°çš„å€¼å®ç°å±æ€§æ³¨å…¥</p><p>å…¶ä¸­ç¬¬3ï¼Œ4æ­¥éª¤æ˜¯éœ€è¦å¤§å®¶é‡ç‚¹å…³æ³¨ï¼Œå…·ä½“æ˜¯å¦‚ä½•å®ç°ã€‚</p></blockquote><h5 id="1-2-1-2-å®ç°æ­¥éª¤"><a href="#1-2-1-2-å®ç°æ­¥éª¤" class="headerlink" title="1.2.1.2 å®ç°æ­¥éª¤"></a>1.2.1.2 å®ç°æ­¥éª¤</h5><h6 id="æ­¥éª¤1-å‡†å¤‡propertiesé…ç½®æ–‡ä»¶"><a href="#æ­¥éª¤1-å‡†å¤‡propertiesé…ç½®æ–‡ä»¶" class="headerlink" title="æ­¥éª¤1:å‡†å¤‡propertiesé…ç½®æ–‡ä»¶"></a>æ­¥éª¤1:å‡†å¤‡propertiesé…ç½®æ–‡ä»¶</h6><p>resourcesä¸‹åˆ›å»ºä¸€ä¸ªjdbc.propertiesæ–‡ä»¶,å¹¶æ·»åŠ å¯¹åº”çš„å±æ€§é”®å€¼å¯¹</p><figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">jdbc.driver</span>=<span class="string">com.mysql.jdbc.Driver</span></span><br><span class="line"><span class="attr">jdbc.url</span>=<span class="string">jdbc:mysql://127.0.0.1:3306/spring_db</span></span><br><span class="line"><span class="attr">jdbc.username</span>=<span class="string">root</span></span><br><span class="line"><span class="attr">jdbc.password</span>=<span class="string">root</span></span><br></pre></td></tr></table></figure><h6 id="æ­¥éª¤2-å¼€å¯contextå‘½åç©ºé—´"><a href="#æ­¥éª¤2-å¼€å¯contextå‘½åç©ºé—´" class="headerlink" title="æ­¥éª¤2:å¼€å¯contextå‘½åç©ºé—´"></a>æ­¥éª¤2:å¼€å¯<code>context</code>å‘½åç©ºé—´</h6><p>åœ¨applicationContext.xmlä¸­å¼€<code>context</code>å‘½åç©ºé—´</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;</span></span></span><br><span class="line"><span class="string"><span class="tag">            http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">            http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">            http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="string"><span class="tag">            http://www.springframework.org/schema/context/spring-context.xsd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><h6 id="æ­¥éª¤3-åŠ è½½propertiesé…ç½®æ–‡ä»¶"><a href="#æ­¥éª¤3-åŠ è½½propertiesé…ç½®æ–‡ä»¶" class="headerlink" title="æ­¥éª¤3:åŠ è½½propertiesé…ç½®æ–‡ä»¶"></a>æ­¥éª¤3:åŠ è½½propertiesé…ç½®æ–‡ä»¶</h6><p>åœ¨é…ç½®æ–‡ä»¶ä¸­ä½¿ç”¨<code>context</code>å‘½åç©ºé—´ä¸‹çš„æ ‡ç­¾æ¥åŠ è½½propertiesé…ç½®æ–‡ä»¶</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">&quot;jdbc.properties&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure><h6 id="æ­¥éª¤4-å®Œæˆå±æ€§æ³¨å…¥"><a href="#æ­¥éª¤4-å®Œæˆå±æ€§æ³¨å…¥" class="headerlink" title="æ­¥éª¤4:å®Œæˆå±æ€§æ³¨å…¥"></a>æ­¥éª¤4:å®Œæˆå±æ€§æ³¨å…¥</h6><p>ä½¿ç”¨<code>$&#123;key&#125;</code>æ¥è¯»å–propertiesé…ç½®æ–‡ä»¶ä¸­çš„å†…å®¹å¹¶å®Œæˆå±æ€§æ³¨å…¥</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;</span></span></span><br><span class="line"><span class="string"><span class="tag">            http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">            http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">            http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="string"><span class="tag">            http://www.springframework.org/schema/context/spring-context.xsd&quot;</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">&quot;jdbc.properties&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.alibaba.druid.pool.DruidDataSource&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClassName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.driver&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.url&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.username&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.password&#125;&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><p>è‡³æ­¤ï¼Œè¯»å–å¤–éƒ¨propertiesé…ç½®æ–‡ä»¶ä¸­çš„å†…å®¹å°±å·²ç»å®Œæˆã€‚</p><h4 id="1-2-2-è¯»å–å•ä¸ªå±æ€§"><a href="#1-2-2-è¯»å–å•ä¸ªå±æ€§" class="headerlink" title="1.2.2 è¯»å–å•ä¸ªå±æ€§"></a>1.2.2 è¯»å–å•ä¸ªå±æ€§</h4><h5 id="1-2-2-1-å®ç°æ€è·¯"><a href="#1-2-2-1-å®ç°æ€è·¯" class="headerlink" title="1.2.2.1 å®ç°æ€è·¯"></a>1.2.2.1 å®ç°æ€è·¯</h5><p>å¯¹äºä¸Šé¢çš„æ¡ˆä¾‹ï¼Œæ•ˆæœä¸æ˜¯å¾ˆæ˜æ˜¾ï¼Œæˆ‘ä»¬å¯ä»¥æ¢ä¸ªæ¡ˆä¾‹æ¥æ¼”ç¤ºä¸‹:</p><blockquote><p>éœ€æ±‚:ä»propertiesé…ç½®æ–‡ä»¶ä¸­è¯»å–keyä¸ºnameçš„å€¼ï¼Œå¹¶å°†å…¶æ³¨å…¥åˆ°BookDaoä¸­å¹¶åœ¨saveæ–¹æ³•ä¸­è¿›è¡Œæ‰“å°ã€‚</p><p>1.åœ¨é¡¹ç›®ä¸­æ·»åŠ BookDaoå’ŒBookDaoImplç±»</p><p>2.ä¸ºBookDaoImplæ·»åŠ ä¸€ä¸ªnameå±æ€§å¹¶æä¾›setteræ–¹æ³•</p><p>3.åœ¨jdbc.propertiesä¸­æ·»åŠ æ•°æ®æ³¨å…¥åˆ°bookDaoä¸­æ‰“å°æ–¹ä¾¿æŸ¥è¯¢ç»“æœ</p><p>4.åœ¨applicationContext.xmlæ·»åŠ é…ç½®å®Œæˆé…ç½®æ–‡ä»¶åŠ è½½ã€å±æ€§æ³¨å…¥(${key})</p></blockquote><h5 id="1-2-2-2-å®ç°æ­¥éª¤"><a href="#1-2-2-2-å®ç°æ­¥éª¤" class="headerlink" title="1.2.2.2 å®ç°æ­¥éª¤"></a>1.2.2.2 å®ç°æ­¥éª¤</h5><h6 id="æ­¥éª¤1-åœ¨é¡¹ç›®ä¸­æ·»å¯¹åº”çš„ç±»"><a href="#æ­¥éª¤1-åœ¨é¡¹ç›®ä¸­æ·»å¯¹åº”çš„ç±»" class="headerlink" title="æ­¥éª¤1:åœ¨é¡¹ç›®ä¸­æ·»å¯¹åº”çš„ç±»"></a>æ­¥éª¤1:åœ¨é¡¹ç›®ä¸­æ·»å¯¹åº”çš„ç±»</h6><p>BookDaoå’ŒBookDaoImplç±»ï¼Œå¹¶åœ¨BookDaoImplç±»ä¸­æ·»åŠ <code>name</code>å±æ€§ä¸setteræ–¹æ³•</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">BookDao</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookDaoImpl</span> <span class="keyword">implements</span> <span class="title class_">BookDao</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;book dao save ...&quot;</span> + name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h6 id="æ­¥éª¤2-å®Œæˆé…ç½®æ–‡ä»¶çš„è¯»å–ä¸æ³¨å…¥"><a href="#æ­¥éª¤2-å®Œæˆé…ç½®æ–‡ä»¶çš„è¯»å–ä¸æ³¨å…¥" class="headerlink" title="æ­¥éª¤2:å®Œæˆé…ç½®æ–‡ä»¶çš„è¯»å–ä¸æ³¨å…¥"></a>æ­¥éª¤2:å®Œæˆé…ç½®æ–‡ä»¶çš„è¯»å–ä¸æ³¨å…¥</h6><p>åœ¨applicationContext.xmlæ·»åŠ é…ç½®ï¼Œ<code>beançš„é…ç½®ç®¡ç†</code>ã€<code>è¯»å–å¤–éƒ¨properties</code>ã€<code>ä¾èµ–æ³¨å…¥</code>:</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;</span></span></span><br><span class="line"><span class="string"><span class="tag">            http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">            http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">            http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="string"><span class="tag">            http://www.springframework.org/schema/context/spring-context.xsd&quot;</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">&quot;jdbc.properties&quot;</span>/&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;bookDao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.dao.impl.BookDaoImpl&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.driver&#125;&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><h6 id="æ­¥éª¤3-è¿è¡Œç¨‹åº-1"><a href="#æ­¥éª¤3-è¿è¡Œç¨‹åº-1" class="headerlink" title="æ­¥éª¤3:è¿è¡Œç¨‹åº"></a>æ­¥éª¤3:è¿è¡Œç¨‹åº</h6><p>åœ¨Appç±»ä¸­ï¼Œä»IOCå®¹å™¨ä¸­è·å–bookDaoå¯¹è±¡ï¼Œè°ƒç”¨æ–¹æ³•ï¼ŒæŸ¥çœ‹å€¼æ˜¯å¦å·²ç»è¢«è·å–åˆ°å¹¶æ‰“å°æ§åˆ¶å°</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">App</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception&#123;</span><br><span class="line">        <span class="type">ApplicationContext</span> <span class="variable">ctx</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;applicationContext.xml&quot;</span>);</span><br><span class="line">        <span class="type">BookDao</span> <span class="variable">bookDao</span> <span class="operator">=</span> (BookDao) ctx.getBean(<span class="string">&quot;bookDao&quot;</span>);</span><br><span class="line">        bookDao.save();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/2022/07/27/Spring_day2/1629975492444.png" alt="1629975492444"></p><h5 id="1-2-2-3-æ³¨æ„äº‹é¡¹"><a href="#1-2-2-3-æ³¨æ„äº‹é¡¹" class="headerlink" title="1.2.2.3 æ³¨æ„äº‹é¡¹"></a>1.2.2.3 æ³¨æ„äº‹é¡¹</h5><p>è‡³æ­¤ï¼Œè¯»å–propertiesé…ç½®æ–‡ä»¶ä¸­çš„å†…å®¹å°±å·²ç»å®Œæˆï¼Œä½†æ˜¯åœ¨ä½¿ç”¨çš„æ—¶å€™ï¼Œæœ‰äº›æ³¨æ„äº‹é¡¹:</p><ul><li><p>é—®é¢˜ä¸€ï¼šé”®å€¼å¯¹çš„keyä¸º<code>username</code>å¼•å‘çš„é—®é¢˜</p><p>1.åœ¨propertiesä¸­é…ç½®é”®å€¼å¯¹çš„æ—¶å€™ï¼Œå¦‚æœkeyè®¾ç½®ä¸º<code>username</code></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">username=root666</span><br></pre></td></tr></table></figure><p>2.åœ¨applicationContext.xmlæ³¨å…¥è¯¥å±æ€§</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;</span></span></span><br><span class="line"><span class="string"><span class="tag">            http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">            http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">            http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="string"><span class="tag">            http://www.springframework.org/schema/context/spring-context.xsd&quot;</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">&quot;jdbc.properties&quot;</span>/&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;bookDao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.dao.impl.BookDaoImpl&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;username&#125;&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><p>3.è¿è¡Œåï¼Œåœ¨æ§åˆ¶å°æ‰“å°çš„å´ä¸æ˜¯<code>root666</code>ï¼Œè€Œæ˜¯è‡ªå·±ç”µè„‘çš„ç”¨æˆ·å</p><p><img src="/2022/07/27/Spring_day2/1629975934694.png" alt="1629975934694"></p><p>4.å‡ºç°é—®é¢˜çš„åŸå› æ˜¯<code>&lt;context:property-placeholder/&gt;</code>æ ‡ç­¾ä¼šåŠ è½½ç³»ç»Ÿçš„ç¯å¢ƒå˜é‡ï¼Œè€Œä¸”ç¯å¢ƒå˜é‡çš„å€¼ä¼šè¢«ä¼˜å…ˆåŠ è½½ï¼Œå¦‚ä½•æŸ¥çœ‹ç³»ç»Ÿçš„ç¯å¢ƒå˜é‡?</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception&#123;</span><br><span class="line">    Map&lt;String, String&gt; env = System.getenv();</span><br><span class="line">    System.out.println(env);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¤§å®¶å¯ä»¥è‡ªè¡Œè¿è¡Œï¼Œåœ¨æ‰“å°å‡ºæ¥çš„ç»“æœä¸­ä¼šæœ‰ä¸€ä¸ªUSERNAME&#x3D;XXX[è‡ªå·±ç”µè„‘çš„ç”¨æˆ·åç§°]</p><p>5.è§£å†³æ–¹æ¡ˆ</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;</span></span></span><br><span class="line"><span class="string"><span class="tag">            http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">            http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">            http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="string"><span class="tag">            http://www.springframework.org/schema/context/spring-context.xsd&quot;</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">&quot;jdbc.properties&quot;</span> <span class="attr">system-properties-mode</span>=<span class="string">&quot;NEVER&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><p>system-properties-modeï¼šè®¾ç½®ä¸ºNEVER,è¡¨ç¤ºä¸åŠ è½½ç³»ç»Ÿå±æ€§ï¼Œå°±å¯ä»¥è§£å†³ä¸Šè¿°é—®é¢˜ã€‚</p><p>å½“ç„¶è¿˜æœ‰ä¸€ä¸ªè§£å†³æ–¹æ¡ˆå°±æ˜¯é¿å…ä½¿ç”¨<code>username</code>ä½œä¸ºå±æ€§çš„<code>key</code>ã€‚</p></li><li><p>é—®é¢˜äºŒï¼šå½“æœ‰å¤šä¸ªpropertiesé…ç½®æ–‡ä»¶éœ€è¦è¢«åŠ è½½ï¼Œè¯¥å¦‚ä½•é…ç½®?</p><p>1.è°ƒæ•´ä¸‹é…ç½®æ–‡ä»¶çš„å†…å®¹ï¼Œåœ¨resourcesä¸‹æ·»åŠ <code>jdbc.properties</code>,<code>jdbc2.properties</code>,å†…å®¹å¦‚ä¸‹:</p><p>jdbc.properties</p><figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">jdbc.driver</span>=<span class="string">com.mysql.jdbc.Driver</span></span><br><span class="line"><span class="attr">jdbc.url</span>=<span class="string">jdbc:mysql://127.0.0.1:3306/spring_db</span></span><br><span class="line"><span class="attr">jdbc.username</span>=<span class="string">root</span></span><br><span class="line"><span class="attr">jdbc.password</span>=<span class="string">root</span></span><br></pre></td></tr></table></figure><p>jdbc2.properties</p><figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">username</span>=<span class="string">root666</span></span><br></pre></td></tr></table></figure><p>2.ä¿®æ”¹applicationContext.xml</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;</span></span></span><br><span class="line"><span class="string"><span class="tag">            http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">            http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">            http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="string"><span class="tag">            http://www.springframework.org/schema/context/spring-context.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--æ–¹å¼ä¸€ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">&quot;jdbc.properties,jdbc2.properties&quot;</span> <span class="attr">system-properties-mode</span>=<span class="string">&quot;NEVER&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--æ–¹å¼äºŒ--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">&quot;*.properties&quot;</span> <span class="attr">system-properties-mode</span>=<span class="string">&quot;NEVER&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--æ–¹å¼ä¸‰ æ ‡å‡†çš„å†™æ³•--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">&quot;classpath:*.properties&quot;</span> <span class="attr">system-properties-mode</span>=<span class="string">&quot;NEVER&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--æ–¹å¼å›› ä»ç±»è·¯å¾„æˆ–jaråŒ…ä¸­æœç´¢å¹¶åŠ è½½propertiesæ–‡ä»¶--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">&quot;classpath*:*.properties&quot;</span> <span class="attr">system-properties-mode</span>=<span class="string">&quot;NEVER&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>è¯´æ˜:</strong></p><ul><li>æ–¹å¼ä¸€ï¼šå¯ä»¥å®ç°ï¼Œå¦‚æœé…ç½®æ–‡ä»¶å¤šçš„è¯ï¼Œæ¯ä¸ªéƒ½éœ€è¦é…ç½®</li><li>æ–¹å¼äºŒï¼š<code>*.properties</code>ä»£è¡¨æ‰€æœ‰ä»¥propertiesç»“å°¾çš„æ–‡ä»¶éƒ½ä¼šè¢«åŠ è½½ï¼Œå¯ä»¥è§£å†³æ–¹å¼ä¸€çš„é—®é¢˜ï¼Œä½†æ˜¯ä¸æ ‡å‡†</li><li>æ–¹å¼ä¸‰ï¼š<em><strong>æ ‡å‡†çš„å†™æ³•</strong></em>ï¼Œ<code>classpath:</code>ä»£è¡¨çš„æ˜¯ä»æ ¹è·¯å¾„ä¸‹å¼€å§‹æŸ¥æ‰¾ï¼Œä½†æ˜¯åªèƒ½æŸ¥è¯¢å½“å‰é¡¹ç›®çš„æ ¹è·¯å¾„</li><li>æ–¹å¼å››ï¼šä¸ä»…å¯ä»¥åŠ è½½å½“å‰é¡¹ç›®è¿˜å¯ä»¥åŠ è½½å½“å‰é¡¹ç›®æ‰€ä¾èµ–çš„æ‰€æœ‰é¡¹ç›®çš„æ ¹è·¯å¾„ä¸‹çš„propertiesé…ç½®æ–‡ä»¶</li></ul></li></ul><h4 id="1-2-3-åŠ è½½propertiesæ–‡ä»¶å°ç»“"><a href="#1-2-3-åŠ è½½propertiesæ–‡ä»¶å°ç»“" class="headerlink" title="1.2.3 åŠ è½½propertiesæ–‡ä»¶å°ç»“"></a>1.2.3 åŠ è½½propertiesæ–‡ä»¶å°ç»“</h4><p>  æœ¬èŠ‚ä¸»è¦è®²è§£çš„æ˜¯propertiesé…ç½®æ–‡ä»¶çš„åŠ è½½ï¼Œéœ€è¦æŒæ¡çš„å†…å®¹æœ‰:</p><ul><li><p>å¦‚ä½•å¼€å¯<code>context</code>å‘½åç©ºé—´</p><p><img src="/2022/07/27/Spring_day2/1629980280952.png" alt="1629980280952"></p></li><li><p>å¦‚ä½•åŠ è½½propertiesé…ç½®æ–‡ä»¶</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">&quot;&quot;</span> <span class="attr">system-properties-mode</span>=<span class="string">&quot;NEVER&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>å¦‚ä½•åœ¨applicationContext.xmlå¼•å…¥propertiesé…ç½®æ–‡ä»¶ä¸­çš„å€¼</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$&#123;key&#125;</span><br></pre></td></tr></table></figure></li></ul><h2 id="2ï¼Œæ ¸å¿ƒå®¹å™¨"><a href="#2ï¼Œæ ¸å¿ƒå®¹å™¨" class="headerlink" title="2ï¼Œæ ¸å¿ƒå®¹å™¨"></a>2ï¼Œæ ¸å¿ƒå®¹å™¨</h2><p>å‰é¢å·²ç»å®Œæˆbeanä¸ä¾èµ–æ³¨å…¥çš„ç›¸å…³çŸ¥è¯†å­¦ä¹ ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬ä¸»è¦å­¦ä¹ çš„æ˜¯IOCå®¹å™¨ä¸­çš„<code>æ ¸å¿ƒå®¹å™¨</code>ã€‚</p><p>è¿™é‡Œæ‰€è¯´çš„æ ¸å¿ƒå®¹å™¨ï¼Œå¤§å®¶å¯ä»¥æŠŠå®ƒç®€å•çš„ç†è§£ä¸º<code>ApplicationContext</code>ï¼Œå‰é¢è™½ç„¶å·²ç»ç”¨åˆ°è¿‡ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰ç³»ç»Ÿçš„å­¦ä¹ ï¼Œæ¥ä¸‹æ¥å’±ä»¬ä»ä»¥ä¸‹å‡ ä¸ªé—®é¢˜å…¥æ‰‹æ¥å­¦ä¹ ä¸‹å®¹å™¨çš„ç›¸å…³çŸ¥è¯†:</p><ul><li>å¦‚ä½•åˆ›å»ºå®¹å™¨?</li><li>åˆ›å»ºå¥½å®¹å™¨åï¼Œå¦‚ä½•ä»å®¹å™¨ä¸­è·å–beanå¯¹è±¡?</li><li>å®¹å™¨ç±»çš„å±‚æ¬¡ç»“æ„æ˜¯ä»€ä¹ˆ?</li><li>BeanFactoryæ˜¯ä»€ä¹ˆ?</li></ul><h3 id="2-1-ç¯å¢ƒå‡†å¤‡"><a href="#2-1-ç¯å¢ƒå‡†å¤‡" class="headerlink" title="2.1 ç¯å¢ƒå‡†å¤‡"></a>2.1 ç¯å¢ƒå‡†å¤‡</h3><p>åœ¨å­¦ä¹ å’Œè§£å†³ä¸Šè¿°é—®é¢˜ä¹‹å‰ï¼Œå…ˆæ¥å‡†å¤‡ä¸‹æ¡ˆä¾‹ç¯å¢ƒ:</p><ul><li><p>åˆ›å»ºä¸€ä¸ªMavené¡¹ç›®</p></li><li><p>pom.xmlæ·»åŠ Springçš„ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.10.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>resourcesä¸‹æ·»åŠ applicationContext.xml</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;</span></span></span><br><span class="line"><span class="string"><span class="tag">            http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;bookDao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.dao.impl.BookDaoImpl&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>æ·»åŠ BookDaoå’ŒBookDaoImplç±»</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">BookDao</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookDaoImpl</span> <span class="keyword">implements</span> <span class="title class_">BookDao</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;book dao save ...&quot;</span> );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>åˆ›å»ºè¿è¡Œç±»App</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">App</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">ApplicationContext</span> <span class="variable">ctx</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;applicationContext.xml&quot;</span>);</span><br><span class="line">        <span class="type">BookDao</span> <span class="variable">bookDao</span> <span class="operator">=</span> (BookDao) ctx.getBean(<span class="string">&quot;bookDao&quot;</span>);</span><br><span class="line">        bookDao.save();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p>æœ€ç»ˆåˆ›å»ºå¥½çš„é¡¹ç›®ç»“æ„å¦‚ä¸‹:</p><p><img src="/2022/07/27/Spring_day2/1629982672522.png" alt="1629982672522"></p><h3 id="2-2-å®¹å™¨"><a href="#2-2-å®¹å™¨" class="headerlink" title="2.2 å®¹å™¨"></a>2.2 å®¹å™¨</h3><h4 id="2-2-1-å®¹å™¨çš„åˆ›å»ºæ–¹å¼"><a href="#2-2-1-å®¹å™¨çš„åˆ›å»ºæ–¹å¼" class="headerlink" title="2.2.1 å®¹å™¨çš„åˆ›å»ºæ–¹å¼"></a>2.2.1 å®¹å™¨çš„åˆ›å»ºæ–¹å¼</h4><p>æ¡ˆä¾‹ä¸­åˆ›å»º<code>ApplicationContext</code>çš„æ–¹å¼ä¸º:</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">ApplicationContext</span> <span class="variable">ctx</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;applicationContext.xml&quot;</span>);</span><br></pre></td></tr></table></figure><p>è¿™ç§æ–¹å¼ç¿»è¯‘ä¸ºï¼šç±»è·¯å¾„ä¸‹çš„XMLé…ç½®æ–‡ä»¶</p><p>é™¤äº†ä¸Šé¢è¿™ç§æ–¹å¼ï¼ŒSpringè¿˜æä¾›äº†å¦å¤–ä¸€ç§åˆ›å»ºæ–¹å¼ä¸º:</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">ApplicationContext</span> <span class="variable">ctx</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileSystemXmlApplicationContext</span>(<span class="string">&quot;applicationContext.xml&quot;</span>);</span><br></pre></td></tr></table></figure><p>è¿™ç§æ–¹å¼ç¿»è¯‘ä¸ºï¼šæ–‡ä»¶ç³»ç»Ÿä¸‹çš„XMLé…ç½®æ–‡ä»¶</p><p>ä½¿ç”¨è¿™ç§æ–¹å¼ï¼Œè¿è¡Œï¼Œä¼šå‡ºç°å¦‚ä¸‹é”™è¯¯:</p><p><img src="/2022/07/27/Spring_day2/1629983245121.png" alt="1629983245121"></p><p>ä»é”™è¯¯ä¿¡æ¯ä¸­èƒ½å‘ç°ï¼Œè¿™ç§æ–¹å¼æ˜¯ä»é¡¹ç›®è·¯å¾„ä¸‹å¼€å§‹æŸ¥æ‰¾<code>applicationContext.xml</code>é…ç½®æ–‡ä»¶çš„ï¼Œæ‰€ä»¥éœ€è¦å°†å…¶ä¿®æ”¹ä¸º:</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">ApplicationContext</span> <span class="variable">ctx</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileSystemXmlApplicationContext</span>(<span class="string">&quot;D:\\workspace\\spring\\spring_10_container\\src\\main\\resources\\applicationContext.xml&quot;</span>); </span><br></pre></td></tr></table></figure><p>**è¯´æ˜:**å¤§å®¶ç»ƒä¹ çš„æ—¶å€™ï¼Œå†™è‡ªå·±çš„å…·ä½“è·¯å¾„ã€‚</p><p>è¿™ç§æ–¹å¼è™½èƒ½å®ç°ï¼Œä½†æ˜¯å½“é¡¹ç›®çš„ä½ç½®å‘ç”Ÿå˜åŒ–å,ä»£ç ä¹Ÿéœ€è¦è·Ÿç€æ”¹,è€¦åˆåº¦è¾ƒé«˜,ä¸æ¨èä½¿ç”¨ã€‚</p><h4 id="2-2-2-Beançš„ä¸‰ç§è·å–æ–¹å¼"><a href="#2-2-2-Beançš„ä¸‰ç§è·å–æ–¹å¼" class="headerlink" title="2.2.2 Beançš„ä¸‰ç§è·å–æ–¹å¼"></a>2.2.2 Beançš„ä¸‰ç§è·å–æ–¹å¼</h4><p>æ–¹å¼ä¸€ï¼Œå°±æ˜¯ç›®å‰æ¡ˆä¾‹ä¸­è·å–çš„æ–¹å¼:</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">BookDao</span> <span class="variable">bookDao</span> <span class="operator">=</span> (BookDao) ctx.getBean(<span class="string">&quot;bookDao&quot;</span>);</span><br></pre></td></tr></table></figure><p>è¿™ç§æ–¹å¼å­˜åœ¨çš„é—®é¢˜æ˜¯æ¯æ¬¡è·å–çš„æ—¶å€™éƒ½éœ€è¦è¿›è¡Œç±»å‹è½¬æ¢ï¼Œæœ‰æ²¡æœ‰æ›´ç®€å•çš„æ–¹å¼å‘¢?</p><p>æ–¹å¼äºŒï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">BookDao bookDao = ctx.getBean(&quot;bookDao&quot;ï¼ŒBookDao.class);</span><br></pre></td></tr></table></figure><p>è¿™ç§æ–¹å¼å¯ä»¥è§£å†³ç±»å‹å¼ºè½¬é—®é¢˜ï¼Œä½†æ˜¯å‚æ•°åˆå¤šåŠ äº†ä¸€ä¸ªï¼Œç›¸å¯¹æ¥è¯´æ²¡æœ‰ç®€åŒ–å¤šå°‘ã€‚</p><p>æ–¹å¼ä¸‰ï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">BookDao bookDao = ctx.getBean(BookDao.class);</span><br></pre></td></tr></table></figure><p>è¿™ç§æ–¹å¼å°±ç±»ä¼¼æˆ‘ä»¬ä¹‹å‰æ‰€å­¦ä¹ ä¾èµ–æ³¨å…¥ä¸­çš„æŒ‰ç±»å‹æ³¨å…¥ã€‚å¿…é¡»è¦ç¡®ä¿IOCå®¹å™¨ä¸­è¯¥ç±»å‹å¯¹åº”çš„<strong>beanå¯¹è±¡åªèƒ½æœ‰ä¸€ä¸ª</strong>ã€‚</p><h4 id="2-2-3-å®¹å™¨ç±»å±‚æ¬¡ç»“æ„"><a href="#2-2-3-å®¹å™¨ç±»å±‚æ¬¡ç»“æ„" class="headerlink" title="2.2.3 å®¹å™¨ç±»å±‚æ¬¡ç»“æ„"></a>2.2.3 å®¹å™¨ç±»å±‚æ¬¡ç»“æ„</h4><p>(1)åœ¨IDEAä¸­åŒå‡»<code>shift</code>,è¾“å…¥BeanFactory</p><p><img src="/2022/07/27/Spring_day2/1629985148294.png" alt="1629985148294"></p><p>(2)ç‚¹å‡»è¿›å…¥BeanFactoryç±»ï¼Œctrl+h,å°±èƒ½æŸ¥çœ‹åˆ°å¦‚ä¸‹ç»“æ„çš„å±‚æ¬¡å…³ç³»</p><p><img src="/2022/07/27/Spring_day2/1629984980781.png" alt="1629984980781"></p><p>ä»å›¾ä¸­å¯ä»¥çœ‹å‡ºï¼Œå®¹å™¨ç±»ä¹Ÿæ˜¯ä»æ— åˆ°æœ‰æ ¹æ®éœ€è¦ä¸€å±‚å±‚å åŠ ä¸Šæ¥çš„ï¼Œå¤§å®¶é‡ç‚¹ç†è§£ä¸‹è¿™ç§è®¾è®¡æ€æƒ³ã€‚</p><h4 id="2-2-4-BeanFactoryçš„ä½¿ç”¨"><a href="#2-2-4-BeanFactoryçš„ä½¿ç”¨" class="headerlink" title="2.2.4 BeanFactoryçš„ä½¿ç”¨"></a>2.2.4 BeanFactoryçš„ä½¿ç”¨</h4><p>ä½¿ç”¨BeanFactoryæ¥åˆ›å»ºIOCå®¹å™¨çš„å…·ä½“å®ç°æ–¹å¼ä¸º:</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AppForBeanFactory</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Resource</span> <span class="variable">resources</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathResource</span>(<span class="string">&quot;applicationContext.xml&quot;</span>);</span><br><span class="line">        <span class="type">BeanFactory</span> <span class="variable">bf</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">XmlBeanFactory</span>(resources);</span><br><span class="line">        <span class="type">BookDao</span> <span class="variable">bookDao</span> <span class="operator">=</span> bf.getBean(BookDao.class);</span><br><span class="line">        bookDao.save();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸ºäº†æ›´å¥½çš„çœ‹å‡º<code>BeanFactory</code>å’Œ<code>ApplicationContext</code>ä¹‹é—´çš„åŒºåˆ«ï¼Œåœ¨BookDaoImplæ·»åŠ å¦‚ä¸‹æ„é€ å‡½æ•°:</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookDaoImpl</span> <span class="keyword">implements</span> <span class="title class_">BookDao</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">BookDaoImpl</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;constructor&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;book dao save ...&quot;</span> );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚æœä¸å»è·å–beanå¯¹è±¡ï¼Œæ‰“å°ä¼šå‘ç°ï¼š</p><ul><li><p>BeanFactoryæ˜¯å»¶è¿ŸåŠ è½½ï¼Œåªæœ‰åœ¨è·å–beanå¯¹è±¡çš„æ—¶å€™æ‰ä¼šå»åˆ›å»º</p></li><li><p>ApplicationContextæ˜¯ç«‹å³åŠ è½½ï¼Œå®¹å™¨åŠ è½½çš„æ—¶å€™å°±ä¼šåˆ›å»ºbeanå¯¹è±¡</p></li><li><p>ApplicationContextè¦æƒ³æˆä¸ºå»¶è¿ŸåŠ è½½ï¼Œåªéœ€è¦æŒ‰ç…§å¦‚ä¸‹æ–¹å¼è¿›è¡Œé…ç½®</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;</span></span></span><br><span class="line"><span class="string"><span class="tag">            http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;bookDao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.dao.impl.BookDaoImpl&quot;</span>  <span class="attr">lazy-init</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul><p><strong>å°ç»“</strong></p><ul><li><p>å®¹å™¨åˆ›å»ºçš„ä¸¤ç§æ–¹å¼</p><ul><li>ClassPathXmlApplicationContext[æŒæ¡]</li><li>FileSystemXmlApplicationContext[çŸ¥é“å³å¯]</li></ul></li><li><p>è·å–Beançš„ä¸‰ç§æ–¹å¼</p><ul><li>getBean(â€œåç§°â€):éœ€è¦ç±»å‹è½¬æ¢</li><li>getBean(â€œåç§°â€,ç±»å‹.class):å¤šäº†ä¸€ä¸ªå‚æ•°</li><li>getBean(ç±»å‹.class):å®¹å™¨ä¸­ä¸èƒ½æœ‰å¤šä¸ªè¯¥ç±»çš„beanå¯¹è±¡</li></ul><p>ä¸Šè¿°ä¸‰ç§æ–¹å¼ï¼Œå„æœ‰å„çš„ä¼˜ç¼ºç‚¹ï¼Œç”¨å“ªä¸ªéƒ½å¯ä»¥ã€‚</p></li><li><p>å®¹å™¨ç±»å±‚æ¬¡ç»“æ„</p><ul><li><em>åªéœ€è¦çŸ¥æ™“å®¹å™¨çš„æœ€ä¸Šçº§çš„çˆ¶æ¥å£ä¸º BeanFactoryå³å¯</em></li></ul></li><li><p>BeanFactory</p><ul><li>ä½¿ç”¨BeanFactoryåˆ›å»ºçš„å®¹å™¨æ˜¯å»¶è¿ŸåŠ è½½</li><li>ä½¿ç”¨ApplicationContextåˆ›å»ºçš„å®¹å™¨æ˜¯ç«‹å³åŠ è½½</li><li>å…·ä½“BeanFactoryå¦‚ä½•åˆ›å»ºåªéœ€è¦äº†è§£å³å¯ã€‚</li></ul></li></ul><h3 id="2-3-æ ¸å¿ƒå®¹å™¨æ€»ç»“"><a href="#2-3-æ ¸å¿ƒå®¹å™¨æ€»ç»“" class="headerlink" title="2.3 æ ¸å¿ƒå®¹å™¨æ€»ç»“"></a>2.3 æ ¸å¿ƒå®¹å™¨æ€»ç»“</h3><h4 id="2-3-1-å®¹å™¨ç›¸å…³"><a href="#2-3-1-å®¹å™¨ç›¸å…³" class="headerlink" title="2.3.1 å®¹å™¨ç›¸å…³"></a>2.3.1 å®¹å™¨ç›¸å…³</h4><ul><li>BeanFactoryæ˜¯IoCå®¹å™¨çš„<code>é¡¶å±‚æ¥å£</code>ï¼Œåˆå§‹åŒ–BeanFactoryå¯¹è±¡æ—¶ï¼ŒåŠ è½½çš„beanå»¶è¿ŸåŠ è½½</li><li>ApplicationContextæ¥å£æ˜¯Springå®¹å™¨çš„æ ¸å¿ƒæ¥å£ï¼Œåˆå§‹åŒ–æ—¶beanç«‹å³åŠ è½½</li><li>ApplicationContextæ¥å£æä¾›åŸºç¡€çš„beanæ“ä½œç›¸å…³æ–¹æ³•ï¼Œé€šè¿‡å…¶ä»–æ¥å£æ‰©å±•å…¶åŠŸèƒ½</li><li>ApplicationContextæ¥å£å¸¸ç”¨åˆå§‹åŒ–ç±»<ul><li><strong>ClassPathXmlApplicationContext(å¸¸ç”¨)</strong></li><li>FileSystemXmlApplicationContext</li></ul></li></ul><h4 id="2-3-2-beanç›¸å…³"><a href="#2-3-2-beanç›¸å…³" class="headerlink" title="2.3.2 beanç›¸å…³"></a>2.3.2 beanç›¸å…³</h4><p><img src="/2022/07/27/Spring_day2/1629986510487.png" alt="1629986510487"></p><p>å…¶å®æ•´ä¸ªé…ç½®ä¸­æœ€å¸¸ç”¨çš„å°±ä¸¤ä¸ªå±æ€§<code>id</code>å’Œ<code>class</code>ã€‚</p><p>æŠŠ<strong>scopeã€init-methodã€destroy-method</strong>æ¡†èµ·æ¥çš„åŸå› æ˜¯ï¼Œåé¢æ³¨è§£åœ¨è®²è§£çš„æ—¶å€™è¿˜ä¼šç”¨åˆ°ï¼Œæ‰€ä»¥å¤§å®¶å¯¹è¿™ä¸‰ä¸ªå±æ€§å…³æ³¨ä¸‹ã€‚</p><p>scopeï¼š<code>singleton</code>é»˜è®¤ä¸ºå•ä¾‹   <code>prototype</code>ä¸ºéå•ä¾‹</p><h4 id="2-3-3-ä¾èµ–æ³¨å…¥ç›¸å…³"><a href="#2-3-3-ä¾èµ–æ³¨å…¥ç›¸å…³" class="headerlink" title="2.3.3 ä¾èµ–æ³¨å…¥ç›¸å…³"></a>2.3.3 ä¾èµ–æ³¨å…¥ç›¸å…³</h4><p><img src="/2022/07/27/Spring_day2/1629986848563.png" alt="1629986848563"></p><h2 id="3ï¼ŒIOC-x2F-DIæ³¨è§£å¼€å‘"><a href="#3ï¼ŒIOC-x2F-DIæ³¨è§£å¼€å‘" class="headerlink" title="3ï¼ŒIOC&#x2F;DIæ³¨è§£å¼€å‘"></a>3ï¼ŒIOC&#x2F;DIæ³¨è§£å¼€å‘</h2><p>Springçš„IOC&#x2F;DIå¯¹åº”çš„é…ç½®å¼€å‘å°±å·²ç»è®²è§£å®Œæˆï¼Œä½†æ˜¯ä½¿ç”¨èµ·æ¥ç›¸å¯¹æ¥è¯´è¿˜æ˜¯æ¯”è¾ƒå¤æ‚çš„ï¼Œå¤æ‚çš„åœ°æ–¹åœ¨&#x3D;&#x3D;é…ç½®æ–‡ä»¶&#x3D;&#x3D;ã€‚</p><p>å‰é¢å’±ä»¬èŠSpringçš„æ—¶å€™è¯´è¿‡ï¼ŒSpringå¯ä»¥ç®€åŒ–ä»£ç çš„å¼€å‘ï¼Œåˆ°ç°åœ¨å¹¶æ²¡æœ‰ä½“ä¼šåˆ°ã€‚</p><p>æ‰€ä»¥Springåˆ°åº•æ˜¯å¦‚ä½•ç®€åŒ–ä»£ç å¼€å‘çš„å‘¢?</p><p>è¦æƒ³çœŸæ­£ç®€åŒ–å¼€å‘ï¼Œå°±éœ€è¦ç”¨åˆ°Springçš„æ³¨è§£å¼€å‘ï¼ŒSpringå¯¹æ³¨è§£æ”¯æŒçš„ç‰ˆæœ¬å†ç¨‹:</p><ul><li>2.0ç‰ˆå¼€å§‹æ”¯æŒæ³¨è§£</li><li>2.5ç‰ˆæ³¨è§£åŠŸèƒ½è¶‹äºå®Œå–„</li><li>3.0ç‰ˆæ”¯æŒçº¯æ³¨è§£å¼€å‘</li></ul><p>å…³äºæ³¨è§£å¼€å‘ï¼Œæˆ‘ä»¬ä¼šè®²è§£ä¸¤å—å†…å®¹<code>æ³¨è§£å¼€å‘å®šä¹‰bean</code>å’Œ<code>çº¯æ³¨è§£å¼€å‘</code>ã€‚</p><p>æ³¨è§£å¼€å‘å®šä¹‰beanç”¨çš„æ˜¯2.5ç‰ˆæä¾›çš„æ³¨è§£ï¼Œçº¯æ³¨è§£å¼€å‘ç”¨çš„æ˜¯3.0ç‰ˆæä¾›çš„æ³¨è§£ã€‚</p><h3 id="3-1-ç¯å¢ƒå‡†å¤‡"><a href="#3-1-ç¯å¢ƒå‡†å¤‡" class="headerlink" title="3.1 ç¯å¢ƒå‡†å¤‡"></a>3.1 ç¯å¢ƒå‡†å¤‡</h3><p>åœ¨å­¦ä¹ æ³¨è§£å¼€å‘ä¹‹å‰ï¼Œå…ˆæ¥å‡†å¤‡ä¸‹æ¡ˆä¾‹ç¯å¢ƒ:</p><ul><li><p>åˆ›å»ºä¸€ä¸ªMavené¡¹ç›®</p></li><li><p>pom.xmlæ·»åŠ Springçš„ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.10.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>resourcesä¸‹æ·»åŠ applicationContext.xml</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;</span></span></span><br><span class="line"><span class="string"><span class="tag">            http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;bookDao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.dao.impl.BookDaoImpl&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>æ·»åŠ BookDaoã€BookDaoImplã€BookServiceã€BookServiceImplç±»</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">BookDao</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookDaoImpl</span> <span class="keyword">implements</span> <span class="title class_">BookDao</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;book dao save ...&quot;</span> );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">BookService</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">BookService</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;book service save ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>åˆ›å»ºè¿è¡Œç±»App</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">App</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">ApplicationContext</span> <span class="variable">ctx</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;applicationContext.xml&quot;</span>);</span><br><span class="line">        <span class="type">BookDao</span> <span class="variable">bookDao</span> <span class="operator">=</span> (BookDao) ctx.getBean(<span class="string">&quot;bookDao&quot;</span>);</span><br><span class="line">        bookDao.save();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p>æœ€ç»ˆåˆ›å»ºå¥½çš„é¡¹ç›®ç»“æ„å¦‚ä¸‹:</p><p><img src="/2022/07/27/Spring_day2/1629989221808.png" alt="1629989221808"></p><h3 id="3-2-æ³¨è§£å¼€å‘å®šä¹‰bean"><a href="#3-2-æ³¨è§£å¼€å‘å®šä¹‰bean" class="headerlink" title="3.2 æ³¨è§£å¼€å‘å®šä¹‰bean"></a>3.2 æ³¨è§£å¼€å‘å®šä¹‰bean</h3><p>åœ¨ä¸Šè¿°ç¯å¢ƒçš„åŸºç¡€ä¸Šï¼Œæˆ‘ä»¬æ¥å­¦ä¸€å­¦Springæ˜¯å¦‚ä½•é€šè¿‡æ³¨è§£å®ç°beançš„å®šä¹‰å¼€å‘?</p><h4 id="æ­¥éª¤1-åˆ é™¤åŸXMLé…ç½®"><a href="#æ­¥éª¤1-åˆ é™¤åŸXMLé…ç½®" class="headerlink" title="æ­¥éª¤1:åˆ é™¤åŸXMLé…ç½®"></a>æ­¥éª¤1:åˆ é™¤åŸXMLé…ç½®</h4><p>å°†é…ç½®æ–‡ä»¶ä¸­çš„<code>&lt;bean&gt;</code>æ ‡ç­¾åˆ é™¤æ‰</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;bookDao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.dao.impl.BookDaoImpl&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure><h4 id="æ­¥éª¤2-Daoä¸Šæ·»åŠ æ³¨è§£"><a href="#æ­¥éª¤2-Daoä¸Šæ·»åŠ æ³¨è§£" class="headerlink" title="æ­¥éª¤2:Daoä¸Šæ·»åŠ æ³¨è§£"></a>æ­¥éª¤2:Daoä¸Šæ·»åŠ æ³¨è§£</h4><p>åœ¨BookDaoImplç±»ä¸Šæ·»åŠ <code>@Component</code>æ³¨è§£</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component(&quot;bookDao&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookDaoImpl</span> <span class="keyword">implements</span> <span class="title class_">BookDao</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;book dao save ...&quot;</span> );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼š<code>@Component</code>æ³¨è§£ä¸å¯ä»¥æ·»åŠ åœ¨æ¥å£ä¸Šï¼Œå› ä¸ºæ¥å£æ˜¯æ— æ³•åˆ›å»ºå¯¹è±¡çš„ã€‚</p><p>XMLä¸æ³¨è§£é…ç½®çš„å¯¹åº”å…³ç³»:</p><p><img src="/2022/07/27/Spring_day2/1629990315619.png" alt="1629990315619"></p><h4 id="æ­¥éª¤3-é…ç½®Springçš„æ³¨è§£åŒ…æ‰«æ"><a href="#æ­¥éª¤3-é…ç½®Springçš„æ³¨è§£åŒ…æ‰«æ" class="headerlink" title="æ­¥éª¤3:é…ç½®Springçš„æ³¨è§£åŒ…æ‰«æ"></a>æ­¥éª¤3:é…ç½®Springçš„æ³¨è§£åŒ…æ‰«æ</h4><p>ä¸ºäº†è®©Springæ¡†æ¶èƒ½å¤Ÿæ‰«æåˆ°å†™åœ¨ç±»ä¸Šçš„æ³¨è§£ï¼Œéœ€è¦åœ¨é…ç½®æ–‡ä»¶ä¸Šè¿›è¡ŒåŒ…æ‰«æ</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;</span></span></span><br><span class="line"><span class="string"><span class="tag">            http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.itheima&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>è¯´æ˜:</strong></p><p>component-scan</p><ul><li>component:ç»„ä»¶ï¼ŒSpringå°†ç®¡ç†çš„beanè§†ä½œè‡ªå·±çš„ä¸€ä¸ªç»„ä»¶</li><li>scan:æ‰«æ</li></ul><p>base-packageæŒ‡å®šSpringæ¡†æ¶æ‰«æçš„åŒ…è·¯å¾„ï¼Œå®ƒä¼šæ‰«ææŒ‡å®šåŒ…åŠå…¶å­åŒ…ä¸­çš„æ‰€æœ‰ç±»ä¸Šçš„æ³¨è§£ã€‚</p><ul><li>åŒ…è·¯å¾„è¶Šå¤š[å¦‚ï¼š:com.itheima.dao.impl]ï¼Œæ‰«æçš„èŒƒå›´è¶Šå°é€Ÿåº¦è¶Šå¿«</li><li>åŒ…è·¯å¾„è¶Šå°‘[å¦‚ï¼šcom.itheima]ï¼Œæ‰«æçš„èŒƒå›´è¶Šå¤§é€Ÿåº¦è¶Šæ…¢</li><li>ä¸€èˆ¬æ‰«æåˆ°é¡¹ç›®çš„ç»„ç»‡åç§°å³Mavençš„groupIdä¸‹[å¦‚:com.itheima]å³å¯ã€‚</li></ul><h4 id="æ­¥éª¤4ï¼šè¿è¡Œç¨‹åº"><a href="#æ­¥éª¤4ï¼šè¿è¡Œç¨‹åº" class="headerlink" title="æ­¥éª¤4ï¼šè¿è¡Œç¨‹åº"></a>æ­¥éª¤4ï¼šè¿è¡Œç¨‹åº</h4><p>è¿è¡Œ<code>App</code>ç±»æŸ¥çœ‹æ‰“å°ç»“æœ</p><p><img src="/2022/07/27/Spring_day2/1630027590558.png" alt="1630027590558"></p><h4 id="æ­¥éª¤5-Serviceä¸Šæ·»åŠ æ³¨è§£"><a href="#æ­¥éª¤5-Serviceä¸Šæ·»åŠ æ³¨è§£" class="headerlink" title="æ­¥éª¤5:Serviceä¸Šæ·»åŠ æ³¨è§£"></a>æ­¥éª¤5:Serviceä¸Šæ·»åŠ æ³¨è§£</h4><p>åœ¨BookServiceImplç±»ä¸Šä¹Ÿæ·»åŠ <code>@Component</code>äº¤ç»™Springæ¡†æ¶ç®¡ç†</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">BookService</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> BookDao bookDao;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setBookDao</span><span class="params">(BookDao bookDao)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.bookDao = bookDao;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;book service save ...&quot;</span>);</span><br><span class="line">        bookDao.save();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ­¥éª¤6-è¿è¡Œç¨‹åº"><a href="#æ­¥éª¤6-è¿è¡Œç¨‹åº" class="headerlink" title="æ­¥éª¤6:è¿è¡Œç¨‹åº"></a>æ­¥éª¤6:è¿è¡Œç¨‹åº</h4><p>åœ¨Appç±»ä¸­ï¼Œä»IOCå®¹å™¨ä¸­è·å–BookServiceImplå¯¹åº”çš„beanå¯¹è±¡ï¼Œæ‰“å°</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">App</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">ApplicationContext</span> <span class="variable">ctx</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;applicationContext.xml&quot;</span>);</span><br><span class="line">        <span class="type">BookDao</span> <span class="variable">bookDao</span> <span class="operator">=</span> (BookDao) ctx.getBean(<span class="string">&quot;bookDao&quot;</span>);</span><br><span class="line">        System.out.println(bookDao);</span><br><span class="line">        <span class="comment">//æŒ‰ç±»å‹è·å–bean</span></span><br><span class="line">        <span class="type">BookService</span> <span class="variable">bookService</span> <span class="operator">=</span> ctx.getBean(BookService.class);</span><br><span class="line">        System.out.println(bookService);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ‰“å°è§‚å¯Ÿç»“æœï¼Œä¸¤ä¸ªbeanå¯¹è±¡éƒ½å·²ç»æ‰“å°åˆ°æ§åˆ¶å°</p><p><img src="/2022/07/27/Spring_day2/1630027743910.png" alt="1630027743910"></p><p><strong>è¯´æ˜:</strong></p><ul><li><p>BookServiceImplç±»æ²¡æœ‰èµ·åç§°ï¼Œæ‰€ä»¥åœ¨Appä¸­æ˜¯æŒ‰ç…§ç±»å‹æ¥è·å–beanå¯¹è±¡</p></li><li><p><code>@Component</code>æ³¨è§£å¦‚æœä¸èµ·åç§°ï¼Œä¼šæœ‰ä¸€ä¸ªé»˜è®¤å€¼å°±æ˜¯<code>å½“å‰ç±»åé¦–å­—æ¯å°å†™</code>ï¼Œæ‰€ä»¥ä¹Ÿå¯ä»¥æŒ‰ç…§åç§°è·å–ï¼Œå¦‚</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">BookService</span> <span class="variable">bookService</span> <span class="operator">=</span> (BookService)ctx.getBean(<span class="string">&quot;bookServiceImpl&quot;</span>);</span><br><span class="line">System.out.println(bookService);</span><br></pre></td></tr></table></figure></li></ul><p>å¯¹äº@Componentæ³¨è§£ï¼Œè¿˜è¡ç”Ÿå‡ºäº†å…¶ä»–ä¸‰ä¸ªæ³¨è§£<code>@Controller</code>ã€<code>@Service</code>ã€<code>@Repository</code></p><p>é€šè¿‡æŸ¥çœ‹æºç ä¼šå‘ç°:</p><p><img src="/2022/07/27/Spring_day2/1630028345074.png" alt="1630028345074"></p><p>è¿™ä¸‰ä¸ªæ³¨è§£å’Œ@Componentæ³¨è§£çš„ä½œç”¨æ˜¯ä¸€æ ·çš„ï¼Œä¸ºä»€ä¹ˆè¦è¡ç”Ÿå‡ºè¿™ä¸‰ä¸ªå‘¢?</p><p>æ–¹ä¾¿æˆ‘ä»¬åæœŸåœ¨ç¼–å†™ç±»çš„æ—¶å€™èƒ½å¾ˆå¥½çš„åŒºåˆ†å‡ºè¿™ä¸ªç±»æ˜¯å±äº<code>è¡¨ç°å±‚</code>ã€<code>ä¸šåŠ¡å±‚</code>è¿˜æ˜¯<code>æ•°æ®å±‚</code>çš„ç±»ã€‚</p><h4 id="çŸ¥è¯†ç‚¹1ï¼š-Componentç­‰"><a href="#çŸ¥è¯†ç‚¹1ï¼š-Componentç­‰" class="headerlink" title="çŸ¥è¯†ç‚¹1ï¼š@Componentç­‰"></a>çŸ¥è¯†ç‚¹1ï¼š@Componentç­‰</h4><table><thead><tr><th>åç§°</th><th>@Component&#x2F;@Controller&#x2F;@Service&#x2F;@Repository</th></tr></thead><tbody><tr><td>ç±»å‹</td><td>ç±»æ³¨è§£</td></tr><tr><td>ä½ç½®</td><td>ç±»å®šä¹‰ä¸Šæ–¹</td></tr><tr><td>ä½œç”¨</td><td>è®¾ç½®è¯¥ç±»ä¸ºspringç®¡ç†çš„bean</td></tr><tr><td>å±æ€§</td><td>valueï¼ˆé»˜è®¤ï¼‰ï¼šå®šä¹‰beançš„id</td></tr></tbody></table><h3 id="3-2-çº¯æ³¨è§£å¼€å‘æ¨¡å¼"><a href="#3-2-çº¯æ³¨è§£å¼€å‘æ¨¡å¼" class="headerlink" title="3.2 çº¯æ³¨è§£å¼€å‘æ¨¡å¼"></a>3.2 çº¯æ³¨è§£å¼€å‘æ¨¡å¼</h3><p>ä¸Šé¢å·²ç»å¯ä»¥ä½¿ç”¨æ³¨è§£æ¥é…ç½®bean,ä½†æ˜¯ä¾ç„¶æœ‰ç”¨åˆ°é…ç½®æ–‡ä»¶ï¼Œåœ¨é…ç½®æ–‡ä»¶ä¸­å¯¹åŒ…è¿›è¡Œäº†æ‰«æï¼ŒSpringåœ¨3.0ç‰ˆå·²ç»æ”¯æŒçº¯æ³¨è§£å¼€å‘</p><ul><li>Spring3.0å¼€å¯äº†çº¯æ³¨è§£å¼€å‘æ¨¡å¼ï¼Œä½¿ç”¨Javaç±»æ›¿ä»£é…ç½®æ–‡ä»¶ï¼Œå¼€å¯äº†Springå¿«é€Ÿå¼€å‘èµ›é“</li></ul><p>å…·ä½“å¦‚ä½•å®ç°?</p><h4 id="3-2-1-æ€è·¯åˆ†æ"><a href="#3-2-1-æ€è·¯åˆ†æ" class="headerlink" title="3.2.1 æ€è·¯åˆ†æ"></a>3.2.1 æ€è·¯åˆ†æ</h4><p>å®ç°æ€è·¯ä¸º: </p><ul><li>å°†é…ç½®æ–‡ä»¶applicationContext.xmlåˆ é™¤æ‰ï¼Œä½¿ç”¨ç±»æ¥æ›¿æ¢ã€‚</li></ul><h4 id="3-2-2-å®ç°æ­¥éª¤"><a href="#3-2-2-å®ç°æ­¥éª¤" class="headerlink" title="3.2.2 å®ç°æ­¥éª¤"></a>3.2.2 å®ç°æ­¥éª¤</h4><h5 id="æ­¥éª¤1-åˆ›å»ºé…ç½®ç±»"><a href="#æ­¥éª¤1-åˆ›å»ºé…ç½®ç±»" class="headerlink" title="æ­¥éª¤1:åˆ›å»ºé…ç½®ç±»"></a>æ­¥éª¤1:åˆ›å»ºé…ç½®ç±»</h5><p>åˆ›å»ºä¸€ä¸ªé…ç½®ç±»<code>SpringConfig</code></p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringConfig</span> &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="æ­¥éª¤2-æ ‡è¯†è¯¥ç±»ä¸ºé…ç½®ç±»"><a href="#æ­¥éª¤2-æ ‡è¯†è¯¥ç±»ä¸ºé…ç½®ç±»" class="headerlink" title="æ­¥éª¤2:æ ‡è¯†è¯¥ç±»ä¸ºé…ç½®ç±»"></a>æ­¥éª¤2:æ ‡è¯†è¯¥ç±»ä¸ºé…ç½®ç±»</h5><p>åœ¨é…ç½®ç±»ä¸Šæ·»åŠ <code>@Configuration</code>æ³¨è§£ï¼Œå°†å…¶æ ‡è¯†ä¸ºä¸€ä¸ªé…ç½®ç±»,æ›¿æ¢<code>applicationContext.xml</code></p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringConfig</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="æ­¥éª¤3-ç”¨æ³¨è§£æ›¿æ¢åŒ…æ‰«æé…ç½®"><a href="#æ­¥éª¤3-ç”¨æ³¨è§£æ›¿æ¢åŒ…æ‰«æé…ç½®" class="headerlink" title="æ­¥éª¤3:ç”¨æ³¨è§£æ›¿æ¢åŒ…æ‰«æé…ç½®"></a>æ­¥éª¤3:ç”¨æ³¨è§£æ›¿æ¢åŒ…æ‰«æé…ç½®</h5><p>åœ¨é…ç½®ç±»ä¸Šæ·»åŠ åŒ…æ‰«ææ³¨è§£<code>@ComponentScan</code>æ›¿æ¢<code>&lt;context:component-scan base-package=&quot;&quot;/&gt;</code></p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ComponentScan(&quot;com.itheima&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringConfig</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="æ­¥éª¤4-åˆ›å»ºè¿è¡Œç±»å¹¶æ‰§è¡Œ"><a href="#æ­¥éª¤4-åˆ›å»ºè¿è¡Œç±»å¹¶æ‰§è¡Œ" class="headerlink" title="æ­¥éª¤4:åˆ›å»ºè¿è¡Œç±»å¹¶æ‰§è¡Œ"></a>æ­¥éª¤4:åˆ›å»ºè¿è¡Œç±»å¹¶æ‰§è¡Œ</h5><p>åˆ›å»ºä¸€ä¸ªæ–°çš„è¿è¡Œç±»<code>AppForAnnotation</code></p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AppForAnnotation</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">ApplicationContext</span> <span class="variable">ctx</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AnnotationConfigApplicationContext</span>(SpringConfig.class);</span><br><span class="line">        <span class="type">BookDao</span> <span class="variable">bookDao</span> <span class="operator">=</span> (BookDao) ctx.getBean(<span class="string">&quot;bookDao&quot;</span>);</span><br><span class="line">        System.out.println(bookDao);</span><br><span class="line">        <span class="type">BookService</span> <span class="variable">bookService</span> <span class="operator">=</span> ctx.getBean(BookService.class);</span><br><span class="line">        System.out.println(bookService);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿è¡ŒAppForAnnotation,å¯ä»¥çœ‹åˆ°ä¸¤ä¸ªå¯¹è±¡ä¾ç„¶è¢«è·å–æˆåŠŸ</p><p><img src="/2022/07/27/Spring_day2/1630029110506.png" alt="1630029110506"></p><p>è‡³æ­¤ï¼Œçº¯æ³¨è§£å¼€å‘çš„æ–¹å¼å°±å·²ç»å®Œæˆäº†ï¼Œä¸»è¦å†…å®¹åŒ…æ‹¬:</p><ul><li><p>Javaç±»æ›¿æ¢Springæ ¸å¿ƒé…ç½®æ–‡ä»¶</p><p><img src="/2022/07/27/Spring_day2/1630029254372.png" alt="1630029254372"></p></li><li><p>@Configurationæ³¨è§£ç”¨äºè®¾å®šå½“å‰ç±»ä¸ºé…ç½®ç±»</p></li><li><p>@ComponentScanæ³¨è§£ç”¨äºè®¾å®šæ‰«æè·¯å¾„ï¼Œæ­¤æ³¨è§£åªèƒ½æ·»åŠ ä¸€æ¬¡ï¼Œå¤šä¸ªæ•°æ®è¯·ç”¨æ•°ç»„æ ¼å¼</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">@ComponentScan(&#123;com.itheima.service&quot;,&quot;com.itheima.dao&quot;&#125;)</span><br></pre></td></tr></table></figure></li><li><p>è¯»å–Springæ ¸å¿ƒé…ç½®æ–‡ä»¶åˆå§‹åŒ–å®¹å™¨å¯¹è±¡åˆ‡æ¢ä¸ºè¯»å–Javaé…ç½®ç±»åˆå§‹åŒ–å®¹å™¨å¯¹è±¡</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//åŠ è½½é…ç½®æ–‡ä»¶åˆå§‹åŒ–å®¹å™¨</span></span><br><span class="line"><span class="type">ApplicationContext</span> <span class="variable">ctx</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;applicationContext.xml&quot;</span>);</span><br><span class="line"><span class="comment">//åŠ è½½é…ç½®ç±»åˆå§‹åŒ–å®¹å™¨</span></span><br><span class="line"><span class="type">ApplicationContext</span> <span class="variable">ctx</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AnnotationConfigApplicationContext</span>(SpringConfig.class);</span><br></pre></td></tr></table></figure></li></ul><h4 id="çŸ¥è¯†ç‚¹1ï¼š-Configuration"><a href="#çŸ¥è¯†ç‚¹1ï¼š-Configuration" class="headerlink" title="çŸ¥è¯†ç‚¹1ï¼š@Configuration"></a>çŸ¥è¯†ç‚¹1ï¼š@Configuration</h4><table><thead><tr><th>åç§°</th><th>@Configuration</th></tr></thead><tbody><tr><td>ç±»å‹</td><td>ç±»æ³¨è§£</td></tr><tr><td>ä½ç½®</td><td>ç±»å®šä¹‰ä¸Šæ–¹</td></tr><tr><td>ä½œç”¨</td><td>è®¾ç½®è¯¥ç±»ä¸ºspringé…ç½®ç±»</td></tr><tr><td>å±æ€§</td><td>valueï¼ˆé»˜è®¤ï¼‰ï¼šå®šä¹‰beançš„id</td></tr></tbody></table><h4 id="çŸ¥è¯†ç‚¹2ï¼š-ComponentScan"><a href="#çŸ¥è¯†ç‚¹2ï¼š-ComponentScan" class="headerlink" title="çŸ¥è¯†ç‚¹2ï¼š@ComponentScan"></a>çŸ¥è¯†ç‚¹2ï¼š@ComponentScan</h4><table><thead><tr><th>åç§°</th><th>@ComponentScan</th></tr></thead><tbody><tr><td>ç±»å‹</td><td>ç±»æ³¨è§£</td></tr><tr><td>ä½ç½®</td><td>ç±»å®šä¹‰ä¸Šæ–¹</td></tr><tr><td>ä½œç”¨</td><td>è®¾ç½®springé…ç½®ç±»æ‰«æè·¯å¾„ï¼Œç”¨äºåŠ è½½ä½¿ç”¨æ³¨è§£æ ¼å¼å®šä¹‰çš„bean</td></tr><tr><td>å±æ€§</td><td>valueï¼ˆé»˜è®¤ï¼‰ï¼šæ‰«æè·¯å¾„ï¼Œæ­¤è·¯å¾„å¯ä»¥é€å±‚å‘ä¸‹æ‰«æ</td></tr></tbody></table><p><strong>å°ç»“:</strong></p><p>è¿™ä¸€èŠ‚é‡ç‚¹æŒæ¡çš„æ˜¯ä½¿ç”¨æ³¨è§£å®ŒæˆSpringçš„beanç®¡ç†ï¼Œéœ€è¦æŒæ¡çš„å†…å®¹ä¸º:</p><ul><li>è®°ä½@Componentã€@Controllerã€@Serviceã€@Repositoryè¿™å››ä¸ªæ³¨è§£</li><li>applicationContext.xmlä¸­<code>&lt;context:component-san/&gt;</code>çš„ä½œç”¨æ˜¯æŒ‡å®šæ‰«æåŒ…è·¯å¾„ï¼Œæ³¨è§£ä¸º@ComponentScan</li><li>@Configurationæ ‡è¯†è¯¥ç±»ä¸ºé…ç½®ç±»ï¼Œä½¿ç”¨ç±»æ›¿æ¢applicationContext.xmlæ–‡ä»¶</li><li>ClassPathXmlApplicationContextæ˜¯åŠ è½½XMLé…ç½®æ–‡ä»¶</li><li>AnnotationConfigApplicationContextæ˜¯åŠ è½½é…ç½®ç±»</li></ul><h3 id="3-3-æ³¨è§£å¼€å‘beanä½œç”¨èŒƒå›´ä¸ç”Ÿå‘½å‘¨æœŸç®¡ç†"><a href="#3-3-æ³¨è§£å¼€å‘beanä½œç”¨èŒƒå›´ä¸ç”Ÿå‘½å‘¨æœŸç®¡ç†" class="headerlink" title="3.3 æ³¨è§£å¼€å‘beanä½œç”¨èŒƒå›´ä¸ç”Ÿå‘½å‘¨æœŸç®¡ç†"></a>3.3 æ³¨è§£å¼€å‘beanä½œç”¨èŒƒå›´ä¸ç”Ÿå‘½å‘¨æœŸç®¡ç†</h3><p>ä½¿ç”¨æ³¨è§£å·²ç»å®Œæˆäº†beançš„ç®¡ç†ï¼Œæ¥ä¸‹æ¥æŒ‰ç…§å‰é¢æ‰€å­¦ä¹ çš„å†…å®¹ï¼Œå°†é€šè¿‡é…ç½®å®ç°çš„å†…å®¹éƒ½æ¢æˆå¯¹åº”çš„æ³¨è§£å®ç°ï¼ŒåŒ…å«ä¸¤éƒ¨åˆ†å†…å®¹:<code>beanä½œç”¨èŒƒå›´</code>å’Œ<code>beanç”Ÿå‘½å‘¨æœŸ</code>ã€‚</p><h4 id="3-3-1-ç¯å¢ƒå‡†å¤‡"><a href="#3-3-1-ç¯å¢ƒå‡†å¤‡" class="headerlink" title="3.3.1 ç¯å¢ƒå‡†å¤‡"></a>3.3.1 ç¯å¢ƒå‡†å¤‡</h4><p>è€è§„çŸ©ï¼Œå­¦ä¹ ä¹‹å‰å…ˆæ¥å‡†å¤‡ç¯å¢ƒ:</p><ul><li><p>åˆ›å»ºä¸€ä¸ªMavené¡¹ç›®</p></li><li><p>pom.xmlæ·»åŠ Springçš„ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.10.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>æ·»åŠ ä¸€ä¸ªé…ç½®ç±»<code>SpringConfig</code></p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ComponentScan(&quot;com.itheima&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringConfig</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>æ·»åŠ BookDaoã€BookDaoImplç±»</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">BookDao</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookDaoImpl</span> <span class="keyword">implements</span> <span class="title class_">BookDao</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;book dao save ...&quot;</span> );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>åˆ›å»ºè¿è¡Œç±»App</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">App</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">AnnotationConfigApplicationContext</span> <span class="variable">ctx</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AnnotationConfigApplicationContext</span>(SpringConfig.class);</span><br><span class="line">        <span class="type">BookDao</span> <span class="variable">bookDao1</span> <span class="operator">=</span> ctx.getBean(BookDao.class);</span><br><span class="line">        <span class="type">BookDao</span> <span class="variable">bookDao2</span> <span class="operator">=</span> ctx.getBean(BookDao.class);</span><br><span class="line">        System.out.println(bookDao1);</span><br><span class="line">        System.out.println(bookDao2);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p>æœ€ç»ˆåˆ›å»ºå¥½çš„é¡¹ç›®ç»“æ„å¦‚ä¸‹:</p><p><img src="/2022/07/27/Spring_day2/1630031112993.png" alt="1630031112993"></p><h4 id="3-3-2-Beançš„ä½œç”¨èŒƒå›´"><a href="#3-3-2-Beançš„ä½œç”¨èŒƒå›´" class="headerlink" title="3.3.2 Beançš„ä½œç”¨èŒƒå›´"></a>3.3.2 Beançš„ä½œç”¨èŒƒå›´</h4><p>(1)å…ˆè¿è¡ŒAppç±»,åœ¨æ§åˆ¶å°æ‰“å°ä¸¤ä¸ªä¸€æ‘¸ä¸€æ ·çš„åœ°å€ï¼Œè¯´æ˜é»˜è®¤æƒ…å†µä¸‹beanæ˜¯å•ä¾‹</p><p><img src="/2022/07/27/Spring_day2/1630031192753.png" alt="1630031192753"></p><p>(2)è¦æƒ³å°†BookDaoImplå˜æˆéå•ä¾‹ï¼Œåªéœ€è¦åœ¨å…¶ç±»ä¸Šæ·»åŠ <code>@scope</code>æ³¨è§£</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="comment">//@Scopeè®¾ç½®beançš„ä½œç”¨èŒƒå›´</span></span><br><span class="line"><span class="meta">@Scope(&quot;prototype&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookDaoImpl</span> <span class="keyword">implements</span> <span class="title class_">BookDao</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;book dao save ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å†æ¬¡æ‰§è¡ŒAppç±»ï¼Œæ‰“å°ç»“æœ:</p><p><img src="/2022/07/27/Spring_day2/1630031808947.png" alt="1630031808947"></p><h5 id="çŸ¥è¯†ç‚¹1ï¼š-Scope"><a href="#çŸ¥è¯†ç‚¹1ï¼š-Scope" class="headerlink" title="çŸ¥è¯†ç‚¹1ï¼š@Scope"></a>çŸ¥è¯†ç‚¹1ï¼š@Scope</h5><table><thead><tr><th>åç§°</th><th>@Scope</th></tr></thead><tbody><tr><td>ç±»å‹</td><td>ç±»æ³¨è§£</td></tr><tr><td>ä½ç½®</td><td>ç±»å®šä¹‰ä¸Šæ–¹</td></tr><tr><td>ä½œç”¨</td><td>è®¾ç½®è¯¥ç±»åˆ›å»ºå¯¹è±¡çš„ä½œç”¨èŒƒå›´<br>å¯ç”¨äºè®¾ç½®åˆ›å»ºå‡ºçš„beanæ˜¯å¦ä¸ºå•ä¾‹å¯¹è±¡</td></tr><tr><td>å±æ€§</td><td>valueï¼ˆé»˜è®¤ï¼‰ï¼šå®šä¹‰beanä½œç”¨èŒƒå›´ï¼Œ<br>&#x3D;&#x3D;é»˜è®¤å€¼singletonï¼ˆå•ä¾‹ï¼‰ï¼Œå¯é€‰å€¼prototypeï¼ˆéå•ä¾‹ï¼‰&#x3D;&#x3D;</td></tr></tbody></table><h4 id="3-3-3-Beançš„ç”Ÿå‘½å‘¨æœŸ"><a href="#3-3-3-Beançš„ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="3.3.3 Beançš„ç”Ÿå‘½å‘¨æœŸ"></a>3.3.3 Beançš„ç”Ÿå‘½å‘¨æœŸ</h4><p>(1)åœ¨BookDaoImplä¸­æ·»åŠ ä¸¤ä¸ªæ–¹æ³•ï¼Œ<code>init</code>å’Œ<code>destroy</code>,æ–¹æ³•åå¯ä»¥ä»»æ„</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookDaoImpl</span> <span class="keyword">implements</span> <span class="title class_">BookDao</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;book dao save ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;init ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">destroy</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;destroy ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>(2)å¦‚ä½•å¯¹æ–¹æ³•è¿›è¡Œæ ‡è¯†ï¼Œå“ªä¸ªæ˜¯åˆå§‹åŒ–æ–¹æ³•ï¼Œå“ªä¸ªæ˜¯é”€æ¯æ–¹æ³•?</p><p>åªéœ€è¦åœ¨å¯¹åº”çš„æ–¹æ³•ä¸Šæ·»åŠ <code>@PostConstruct</code>å’Œ<code>@PreDestroy</code>æ³¨è§£å³å¯ã€‚</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookDaoImpl</span> <span class="keyword">implements</span> <span class="title class_">BookDao</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;book dao save ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@PostConstruct</span> <span class="comment">//åœ¨æ„é€ æ–¹æ³•ä¹‹åæ‰§è¡Œï¼Œæ›¿æ¢ init-method</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;init ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@PreDestroy</span> <span class="comment">//åœ¨é”€æ¯æ–¹æ³•ä¹‹å‰æ‰§è¡Œ,æ›¿æ¢ destroy-method</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">destroy</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;destroy ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>(3)è¦æƒ³çœ‹åˆ°ä¸¤ä¸ªæ–¹æ³•æ‰§è¡Œï¼Œéœ€è¦æ³¨æ„çš„æ˜¯<code>destroy</code>åªæœ‰åœ¨å®¹å™¨å…³é—­çš„æ—¶å€™ï¼Œæ‰ä¼šæ‰§è¡Œï¼Œæ‰€ä»¥éœ€è¦ä¿®æ”¹Appçš„ç±»</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">App</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">AnnotationConfigApplicationContext</span> <span class="variable">ctx</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AnnotationConfigApplicationContext</span>(SpringConfig.class);</span><br><span class="line">        <span class="type">BookDao</span> <span class="variable">bookDao1</span> <span class="operator">=</span> ctx.getBean(BookDao.class);</span><br><span class="line">        <span class="type">BookDao</span> <span class="variable">bookDao2</span> <span class="operator">=</span> ctx.getBean(BookDao.class);</span><br><span class="line">        System.out.println(bookDao1);</span><br><span class="line">        System.out.println(bookDao2);</span><br><span class="line">        ctx.close(); <span class="comment">//å…³é—­å®¹å™¨</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>(4)è¿è¡ŒApp,ç±»æŸ¥çœ‹æ‰“å°ç»“æœï¼Œè¯æ˜initå’Œdestroyæ–¹æ³•éƒ½è¢«æ‰§è¡Œäº†ã€‚</p><p><img src="/2022/07/27/Spring_day2/1630032385498.png" alt="1630032385498"></p><p><strong>æ³¨æ„ï¼š</strong>@PostConstructå’Œ@PreDestroyæ³¨è§£å¦‚æœæ‰¾ä¸åˆ°ï¼Œéœ€è¦å¯¼å…¥ä¸‹é¢çš„jaråŒ…</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">  &lt;groupId&gt;javax.annotation&lt;/groupId&gt;</span><br><span class="line">  &lt;artifactId&gt;javax.annotation-api&lt;/artifactId&gt;</span><br><span class="line">  &lt;version&gt;<span class="number">1.3</span><span class="number">.2</span>&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure><p>æ‰¾ä¸åˆ°çš„åŸå› æ˜¯ï¼Œä»JDK9ä»¥åjdkä¸­çš„javax.annotationåŒ…è¢«ç§»é™¤äº†ï¼Œè¿™ä¸¤ä¸ªæ³¨è§£åˆšå¥½å°±åœ¨è¿™ä¸ªåŒ…ä¸­ã€‚</p><h5 id="çŸ¥è¯†ç‚¹1ï¼š-PostConstruct"><a href="#çŸ¥è¯†ç‚¹1ï¼š-PostConstruct" class="headerlink" title="çŸ¥è¯†ç‚¹1ï¼š@PostConstruct"></a>çŸ¥è¯†ç‚¹1ï¼š@PostConstruct</h5><table><thead><tr><th>åç§°</th><th>@PostConstruct</th></tr></thead><tbody><tr><td>ç±»å‹</td><td>æ–¹æ³•æ³¨è§£</td></tr><tr><td>ä½ç½®</td><td>æ–¹æ³•ä¸Š</td></tr><tr><td>ä½œç”¨</td><td>è®¾ç½®è¯¥æ–¹æ³•ä¸ºåˆå§‹åŒ–æ–¹æ³•</td></tr><tr><td>å±æ€§</td><td>æ— </td></tr></tbody></table><h5 id="çŸ¥è¯†ç‚¹2ï¼š-PreDestroy"><a href="#çŸ¥è¯†ç‚¹2ï¼š-PreDestroy" class="headerlink" title="çŸ¥è¯†ç‚¹2ï¼š@PreDestroy"></a>çŸ¥è¯†ç‚¹2ï¼š@PreDestroy</h5><table><thead><tr><th>åç§°</th><th>@PreDestroy</th></tr></thead><tbody><tr><td>ç±»å‹</td><td>æ–¹æ³•æ³¨è§£</td></tr><tr><td>ä½ç½®</td><td>æ–¹æ³•ä¸Š</td></tr><tr><td>ä½œç”¨</td><td>è®¾ç½®è¯¥æ–¹æ³•ä¸ºé”€æ¯æ–¹æ³•</td></tr><tr><td>å±æ€§</td><td>æ— </td></tr></tbody></table><p><strong>å°ç»“</strong></p><p><img src="/2022/07/27/Spring_day2/1630033039358.png" alt="1630033039358"></p><h3 id="3-4-æ³¨è§£å¼€å‘ä¾èµ–æ³¨å…¥"><a href="#3-4-æ³¨è§£å¼€å‘ä¾èµ–æ³¨å…¥" class="headerlink" title="3.4 æ³¨è§£å¼€å‘ä¾èµ–æ³¨å…¥"></a>3.4 æ³¨è§£å¼€å‘ä¾èµ–æ³¨å…¥</h3><p>Springä¸ºäº†ä½¿ç”¨æ³¨è§£ç®€åŒ–å¼€å‘ï¼Œå¹¶æ²¡æœ‰æä¾›<code>æ„é€ å‡½æ•°æ³¨å…¥</code>ã€<code>setteræ³¨å…¥</code>å¯¹åº”çš„æ³¨è§£ï¼Œåªæä¾›äº†è‡ªåŠ¨è£…é…çš„æ³¨è§£å®ç°ã€‚</p><h4 id="3-4-1-ç¯å¢ƒå‡†å¤‡"><a href="#3-4-1-ç¯å¢ƒå‡†å¤‡" class="headerlink" title="3.4.1 ç¯å¢ƒå‡†å¤‡"></a>3.4.1 ç¯å¢ƒå‡†å¤‡</h4><p>åœ¨å­¦ä¹ ä¹‹å‰ï¼ŒæŠŠæ¡ˆä¾‹ç¯å¢ƒä»‹ç»ä¸‹:</p><ul><li><p>åˆ›å»ºä¸€ä¸ªMavené¡¹ç›®</p></li><li><p>pom.xmlæ·»åŠ Springçš„ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.10.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>æ·»åŠ ä¸€ä¸ªé…ç½®ç±»<code>SpringConfig</code></p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ComponentScan(&quot;com.itheima&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringConfig</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>æ·»åŠ BookDaoã€BookDaoImplã€BookServiceã€BookServiceImplç±»</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">BookDao</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookDaoImpl</span> <span class="keyword">implements</span> <span class="title class_">BookDao</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;book dao save ...&quot;</span> );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">BookService</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">BookService</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> BookDao bookDao;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setBookDao</span><span class="params">(BookDao bookDao)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.bookDao = bookDao;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;book service save ...&quot;</span>);</span><br><span class="line">        bookDao.save();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>åˆ›å»ºè¿è¡Œç±»App</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">App</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">AnnotationConfigApplicationContext</span> <span class="variable">ctx</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AnnotationConfigApplicationContext</span>(SpringConfig.class);</span><br><span class="line">        <span class="type">BookService</span> <span class="variable">bookService</span> <span class="operator">=</span> ctx.getBean(BookService.class);</span><br><span class="line">        bookService.save();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p>æœ€ç»ˆåˆ›å»ºå¥½çš„é¡¹ç›®ç»“æ„å¦‚ä¸‹:</p><p><img src="/2022/07/27/Spring_day2/1630033604129.png" alt="1630033604129"></p><p>ç¯å¢ƒå‡†å¤‡å¥½åï¼Œè¿è¡Œåä¼šå‘ç°æœ‰é—®é¢˜</p><p><img src="/2022/07/27/Spring_day2/1630033710052.png" alt="1630033710052"></p><p>å‡ºç°é—®é¢˜çš„åŸå› æ˜¯ï¼Œåœ¨BookServiceImplç±»ä¸­æ·»åŠ äº†BookDaoçš„å±æ€§ï¼Œå¹¶æä¾›äº†setteræ–¹æ³•ï¼Œä½†æ˜¯ç›®å‰æ˜¯æ²¡æœ‰æä¾›é…ç½®æ³¨å…¥BookDaoçš„ï¼Œæ‰€ä»¥bookDaoå¯¹è±¡ä¸ºNull,è°ƒç”¨å…¶saveæ–¹æ³•å°±ä¼šæŠ¥<code>æ§æŒ‡é’ˆå¼‚å¸¸</code>ã€‚</p><h4 id="3-4-2-æ³¨è§£å®ç°æŒ‰ç…§ç±»å‹æ³¨å…¥"><a href="#3-4-2-æ³¨è§£å®ç°æŒ‰ç…§ç±»å‹æ³¨å…¥" class="headerlink" title="3.4.2 æ³¨è§£å®ç°æŒ‰ç…§ç±»å‹æ³¨å…¥"></a>3.4.2 æ³¨è§£å®ç°æŒ‰ç…§ç±»å‹æ³¨å…¥</h4><p>å¯¹äºè¿™ä¸ªé—®é¢˜ä½¿ç”¨æ³¨è§£è¯¥å¦‚ä½•è§£å†³?</p><p>(1) åœ¨BookServiceImplç±»çš„bookDaoå±æ€§ä¸Šæ·»åŠ <code>@Autowired</code>æ³¨è§£</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">BookService</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> BookDao bookDao;</span><br><span class="line">    </span><br><span class="line"><span class="comment">//  public void setBookDao(BookDao bookDao) &#123;</span></span><br><span class="line"><span class="comment">//        this.bookDao = bookDao;</span></span><br><span class="line"><span class="comment">//    &#125;</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;book service save ...&quot;</span>);</span><br><span class="line">        bookDao.save();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„:</strong></p><ul><li>@Autowiredå¯ä»¥å†™åœ¨å±æ€§ä¸Šï¼Œä¹Ÿå¯ä¹Ÿå†™åœ¨setteræ–¹æ³•ä¸Šï¼Œæœ€ç®€å•çš„å¤„ç†æ–¹å¼æ˜¯<code>å†™åœ¨å±æ€§ä¸Šå¹¶å°†setteræ–¹æ³•åˆ é™¤æ‰</code></li><li>ä¸ºä»€ä¹ˆsetteræ–¹æ³•å¯ä»¥åˆ é™¤å‘¢?<ul><li>è‡ªåŠ¨è£…é…åŸºäºåå°„è®¾è®¡åˆ›å»ºå¯¹è±¡å¹¶é€šè¿‡æš´åŠ›åå°„ä¸ºç§æœ‰å±æ€§è¿›è¡Œè®¾å€¼</li><li>æ™®é€šåå°„åªèƒ½è·å–publicä¿®é¥°çš„å†…å®¹</li><li>æš´åŠ›åå°„é™¤äº†è·å–publicä¿®é¥°çš„å†…å®¹è¿˜å¯ä»¥è·å–privateä¿®æ”¹çš„å†…å®¹</li><li>æ‰€ä»¥æ­¤å¤„æ— éœ€æä¾›setteræ–¹æ³•</li></ul></li></ul><p>(2)@Autowiredæ˜¯æŒ‰ç…§ç±»å‹æ³¨å…¥ï¼Œé‚£ä¹ˆå¯¹åº”BookDaoæ¥å£å¦‚æœæœ‰å¤šä¸ªå®ç°ç±»ï¼Œæ¯”å¦‚æ·»åŠ BookDaoImpl2</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookDaoImpl2</span> <span class="keyword">implements</span> <span class="title class_">BookDao</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;book dao save ...2&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªæ—¶å€™å†æ¬¡è¿è¡ŒAppï¼Œå°±ä¼šæŠ¥é”™</p><p><img src="/2022/07/27/Spring_day2/1630034272959.png" alt="1630034272959"></p><p>æ­¤æ—¶ï¼ŒæŒ‰ç…§ç±»å‹æ³¨å…¥å°±æ— æ³•åŒºåˆ†åˆ°åº•æ³¨å…¥å“ªä¸ªå¯¹è±¡ï¼Œè§£å†³æ–¹æ¡ˆ:<code>æŒ‰ç…§åç§°æ³¨å…¥</code></p><ul><li><p>å…ˆç»™ä¸¤ä¸ªDaoç±»åˆ†åˆ«èµ·ä¸ªåç§°</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Repository(&quot;bookDao&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookDaoImpl</span> <span class="keyword">implements</span> <span class="title class_">BookDao</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;book dao save ...&quot;</span> );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Repository(&quot;bookDao2&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookDaoImpl2</span> <span class="keyword">implements</span> <span class="title class_">BookDao</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;book dao save ...2&quot;</span> );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶å°±å¯ä»¥æ³¨å…¥æˆåŠŸï¼Œä½†æ˜¯å¾—æ€è€ƒä¸ªé—®é¢˜: </p><ul><li><p>@Autowiredæ˜¯<strong>æŒ‰ç…§ç±»å‹æ³¨å…¥</strong>çš„ï¼Œç»™BookDaoçš„ä¸¤ä¸ªå®ç°èµ·äº†åç§°ï¼Œå®ƒè¿˜æ˜¯æœ‰ä¸¤ä¸ªbeanå¯¹è±¡ï¼Œä¸ºä»€ä¹ˆä¸æŠ¥é”™?</p></li><li><p>@Autowiredé»˜è®¤æŒ‰ç…§ç±»å‹è‡ªåŠ¨è£…é…ï¼Œå¦‚æœIOCå®¹å™¨ä¸­åŒç±»çš„Beanæ‰¾åˆ°å¤šä¸ªï¼Œå°±æŒ‰ç…§å˜é‡åå’ŒBeançš„åç§°åŒ¹é…ã€‚å› ä¸ºå˜é‡åå«<code>bookDao</code>è€Œå®¹å™¨ä¸­ä¹Ÿæœ‰ä¸€ä¸ª<code>booDao</code>ï¼Œæ‰€ä»¥å¯ä»¥æˆåŠŸæ³¨å…¥ã€‚</p></li><li><p>åˆ†æä¸‹é¢è¿™ç§æƒ…å†µæ˜¯å¦èƒ½å®Œæˆæ³¨å…¥å‘¢?</p><p><img src="/2022/07/27/Spring_day2/1630036236150.png" alt="1630036236150"></p></li><li><p>ä¸è¡Œï¼Œå› ä¸ºæŒ‰ç…§ç±»å‹ä¼šæ‰¾åˆ°å¤šä¸ªbeanå¯¹è±¡ï¼Œæ­¤æ—¶ä¼šæŒ‰ç…§<code>bookDao</code>åç§°å»æ‰¾ï¼Œå› ä¸ºIOCå®¹å™¨åªæœ‰åç§°å«<code>bookDao1</code>å’Œ<code>bookDao2</code>,æ‰€ä»¥æ‰¾ä¸åˆ°ï¼Œä¼šæŠ¥<code>NoUniqueBeanDefinitionException</code></p></li></ul></li></ul><h4 id="3-4-3-æ³¨è§£å®ç°æŒ‰ç…§åç§°æ³¨å…¥"><a href="#3-4-3-æ³¨è§£å®ç°æŒ‰ç…§åç§°æ³¨å…¥" class="headerlink" title="3.4.3 æ³¨è§£å®ç°æŒ‰ç…§åç§°æ³¨å…¥"></a>3.4.3 æ³¨è§£å®ç°æŒ‰ç…§åç§°æ³¨å…¥</h4><p>å½“æ ¹æ®ç±»å‹åœ¨å®¹å™¨ä¸­æ‰¾åˆ°å¤šä¸ªbean,æ³¨å…¥å‚æ•°çš„å±æ€§ååˆå’Œå®¹å™¨ä¸­beançš„åç§°ä¸ä¸€è‡´ï¼Œè¿™ä¸ªæ—¶å€™è¯¥å¦‚ä½•è§£å†³ï¼Œå°±éœ€è¦ä½¿ç”¨åˆ°<code>@Qualifier</code>æ¥æŒ‡å®šæ³¨å…¥å“ªä¸ªåç§°çš„beanå¯¹è±¡ã€‚</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">BookService</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="meta">@Qualifier(&quot;bookDao1&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> BookDao bookDao;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;book service save ...&quot;</span>);</span><br><span class="line">        bookDao.save();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>@Qualifier</code>æ³¨è§£åçš„å€¼å°±æ˜¯éœ€è¦æ³¨å…¥çš„beançš„åç§°ã€‚</p><p>æ³¨æ„ï¼š@Qualifierä¸èƒ½ç‹¬ç«‹ä½¿ç”¨ï¼Œå¿…é¡»å’Œ@Autowiredä¸€èµ·ä½¿ç”¨</p><h4 id="3-4-4-ç®€å•æ•°æ®ç±»å‹æ³¨å…¥"><a href="#3-4-4-ç®€å•æ•°æ®ç±»å‹æ³¨å…¥" class="headerlink" title="3.4.4 ç®€å•æ•°æ®ç±»å‹æ³¨å…¥"></a>3.4.4 ç®€å•æ•°æ®ç±»å‹æ³¨å…¥</h4><p>å¼•ç”¨ç±»å‹çœ‹å®Œï¼Œç®€å•ç±»å‹æ³¨å…¥å°±æ¯”è¾ƒå®¹æ˜“æ‡‚äº†ã€‚ç®€å•ç±»å‹æ³¨å…¥çš„æ˜¯åŸºæœ¬æ•°æ®ç±»å‹æˆ–è€…å­—ç¬¦ä¸²ç±»å‹ï¼Œä¸‹é¢åœ¨<code>BookDaoImpl</code>ç±»ä¸­æ·»åŠ ä¸€ä¸ª<code>name</code>å±æ€§ï¼Œç”¨å…¶è¿›è¡Œç®€å•ç±»å‹æ³¨å…¥</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Repository(&quot;bookDao&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookDaoImpl</span> <span class="keyword">implements</span> <span class="title class_">BookDao</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;book dao save ...&quot;</span> + name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ•°æ®ç±»å‹æ¢äº†ï¼Œå¯¹åº”çš„æ³¨è§£ä¹Ÿè¦è·Ÿç€æ¢ï¼Œè¿™æ¬¡ä½¿ç”¨<code>@Value</code>æ³¨è§£ï¼Œå°†å€¼å†™å…¥æ³¨è§£çš„å‚æ•°ä¸­å°±è¡Œäº†</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Repository(&quot;bookDao&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookDaoImpl</span> <span class="keyword">implements</span> <span class="title class_">BookDao</span> &#123;</span><br><span class="line">    <span class="meta">@Value(&quot;itheima&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;book dao save ...&quot;</span> + name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ³¨æ„æ•°æ®æ ¼å¼è¦åŒ¹é…ï¼Œå¦‚å°†â€abcâ€æ³¨å…¥ç»™intå€¼ï¼Œè¿™æ ·ç¨‹åºå°±ä¼šæŠ¥é”™ã€‚</p><p>ä»‹ç»å®Œåï¼Œä¼šæœ‰ä¸€ç§æ„Ÿè§‰å°±æ˜¯è¿™ä¸ªæ³¨è§£å¥½åƒæ²¡ä»€ä¹ˆç”¨ï¼Œè·Ÿç›´æ¥èµ‹å€¼æ˜¯ä¸€ä¸ªæ•ˆæœï¼Œè¿˜æ²¡æœ‰ç›´æ¥èµ‹å€¼ç®€å•ï¼Œæ‰€ä»¥è¿™ä¸ªæ³¨è§£å­˜åœ¨çš„æ„ä¹‰æ˜¯ä»€ä¹ˆ?</p><h4 id="3-4-5-æ³¨è§£è¯»å–propertiesé…ç½®æ–‡ä»¶"><a href="#3-4-5-æ³¨è§£è¯»å–propertiesé…ç½®æ–‡ä»¶" class="headerlink" title="3.4.5 æ³¨è§£è¯»å–propertiesé…ç½®æ–‡ä»¶"></a>3.4.5 æ³¨è§£è¯»å–propertiesé…ç½®æ–‡ä»¶</h4><p><code>@Value</code>ä¸€èˆ¬ä¼šè¢«ç”¨åœ¨ä»propertiesé…ç½®æ–‡ä»¶ä¸­è¯»å–å†…å®¹è¿›è¡Œä½¿ç”¨ï¼Œå…·ä½“å¦‚ä½•å®ç°?</p><h5 id="æ­¥éª¤1ï¼šresourceä¸‹å‡†å¤‡propertiesæ–‡ä»¶"><a href="#æ­¥éª¤1ï¼šresourceä¸‹å‡†å¤‡propertiesæ–‡ä»¶" class="headerlink" title="æ­¥éª¤1ï¼šresourceä¸‹å‡†å¤‡propertiesæ–‡ä»¶"></a>æ­¥éª¤1ï¼šresourceä¸‹å‡†å¤‡propertiesæ–‡ä»¶</h5><p>jdbc.properties</p><figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">name</span>=<span class="string">itheima888</span></span><br></pre></td></tr></table></figure><h5 id="æ­¥éª¤2-ä½¿ç”¨æ³¨è§£åŠ è½½propertiesé…ç½®æ–‡ä»¶"><a href="#æ­¥éª¤2-ä½¿ç”¨æ³¨è§£åŠ è½½propertiesé…ç½®æ–‡ä»¶" class="headerlink" title="æ­¥éª¤2: ä½¿ç”¨æ³¨è§£åŠ è½½propertiesé…ç½®æ–‡ä»¶"></a>æ­¥éª¤2: ä½¿ç”¨æ³¨è§£åŠ è½½propertiesé…ç½®æ–‡ä»¶</h5><p>åœ¨é…ç½®ç±»ä¸Šæ·»åŠ <code>@PropertySource</code>æ³¨è§£</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ComponentScan(&quot;com.itheima&quot;)</span></span><br><span class="line"><span class="meta">@PropertySource(&quot;jdbc.properties&quot;)</span> <span class="comment">//ä¸æ”¯æŒä½¿ç”¨é€šé…ç¬¦ &quot;*.properties&quot;</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringConfig</span> &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="æ­¥éª¤3ï¼šä½¿ç”¨-Valueè¯»å–é…ç½®æ–‡ä»¶ä¸­çš„å†…å®¹"><a href="#æ­¥éª¤3ï¼šä½¿ç”¨-Valueè¯»å–é…ç½®æ–‡ä»¶ä¸­çš„å†…å®¹" class="headerlink" title="æ­¥éª¤3ï¼šä½¿ç”¨@Valueè¯»å–é…ç½®æ–‡ä»¶ä¸­çš„å†…å®¹"></a>æ­¥éª¤3ï¼šä½¿ç”¨@Valueè¯»å–é…ç½®æ–‡ä»¶ä¸­çš„å†…å®¹</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Repository(&quot;bookDao&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookDaoImpl</span> <span class="keyword">implements</span> <span class="title class_">BookDao</span> &#123;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;name&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;book dao save ...&quot;</span> + name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ­¥éª¤4:è¿è¡Œç¨‹åº</p><p>è¿è¡ŒAppç±»ï¼ŒæŸ¥çœ‹è¿è¡Œç»“æœï¼Œè¯´æ˜é…ç½®æ–‡ä»¶ä¸­çš„å†…å®¹å·²ç»è¢«åŠ è½½åˆ°</p><p><img src="/2022/07/27/Spring_day2/1630084683663.png" alt="1630084683663"></p><p><strong>æ³¨æ„:</strong></p><ul><li><p>å¦‚æœè¯»å–çš„propertiesé…ç½®æ–‡ä»¶æœ‰å¤šä¸ªï¼Œå¯ä»¥ä½¿ç”¨<code>@PropertySource</code>çš„å±æ€§æ¥æŒ‡å®šå¤šä¸ª</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@PropertySource(&#123;&quot;jdbc.properties&quot;,&quot;xxx.properties&quot;&#125;)</span></span><br></pre></td></tr></table></figure></li><li><p><code>@PropertySource</code>æ³¨è§£å±æ€§ä¸­ä¸æ”¯æŒä½¿ç”¨é€šé…ç¬¦<code>*</code>,è¿è¡Œä¼šæŠ¥é”™</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@PropertySource(&#123;&quot;*.properties&quot;&#125;)</span></span><br></pre></td></tr></table></figure></li><li><p><code>@PropertySource</code>æ³¨è§£å±æ€§ä¸­å¯ä»¥æŠŠ<code>classpath:</code>åŠ ä¸Š,ä»£è¡¨ä»å½“å‰é¡¹ç›®çš„æ ¹è·¯å¾„æ‰¾æ–‡ä»¶</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@PropertySource(&#123;&quot;classpath:jdbc.properties&quot;&#125;)</span></span><br></pre></td></tr></table></figure></li></ul><h4 id="çŸ¥è¯†ç‚¹1ï¼š-Autowired"><a href="#çŸ¥è¯†ç‚¹1ï¼š-Autowired" class="headerlink" title="çŸ¥è¯†ç‚¹1ï¼š@Autowired"></a>çŸ¥è¯†ç‚¹1ï¼š@Autowired</h4><table><thead><tr><th>åç§°</th><th>@Autowired</th></tr></thead><tbody><tr><td>ç±»å‹</td><td>å±æ€§æ³¨è§£  æˆ–  æ–¹æ³•æ³¨è§£ï¼ˆäº†è§£ï¼‰  æˆ–  æ–¹æ³•å½¢å‚æ³¨è§£ï¼ˆäº†è§£ï¼‰</td></tr><tr><td>ä½ç½®</td><td>å±æ€§å®šä¹‰ä¸Šæ–¹  æˆ–  æ ‡å‡†setæ–¹æ³•ä¸Šæ–¹  æˆ–  ç±»setæ–¹æ³•ä¸Šæ–¹  æˆ–  æ–¹æ³•å½¢å‚å‰é¢</td></tr><tr><td>ä½œç”¨</td><td>ä¸ºå¼•ç”¨ç±»å‹å±æ€§è®¾ç½®å€¼</td></tr><tr><td>å±æ€§</td><td>requiredï¼štrue&#x2F;falseï¼Œå®šä¹‰è¯¥å±æ€§æ˜¯å¦å…è®¸ä¸ºnull</td></tr></tbody></table><h4 id="çŸ¥è¯†ç‚¹2ï¼š-Qualifier"><a href="#çŸ¥è¯†ç‚¹2ï¼š-Qualifier" class="headerlink" title="çŸ¥è¯†ç‚¹2ï¼š@Qualifier"></a>çŸ¥è¯†ç‚¹2ï¼š@Qualifier</h4><table><thead><tr><th>åç§°</th><th>@Qualifier</th></tr></thead><tbody><tr><td>ç±»å‹</td><td>å±æ€§æ³¨è§£  æˆ–  æ–¹æ³•æ³¨è§£ï¼ˆäº†è§£ï¼‰</td></tr><tr><td>ä½ç½®</td><td>å±æ€§å®šä¹‰ä¸Šæ–¹  æˆ–  æ ‡å‡†setæ–¹æ³•ä¸Šæ–¹  æˆ–  ç±»setæ–¹æ³•ä¸Šæ–¹</td></tr><tr><td>ä½œç”¨</td><td>ä¸ºå¼•ç”¨ç±»å‹å±æ€§æŒ‡å®šæ³¨å…¥çš„beanId</td></tr><tr><td>å±æ€§</td><td>valueï¼ˆé»˜è®¤ï¼‰ï¼šè®¾ç½®æ³¨å…¥çš„beanId</td></tr></tbody></table><h4 id="çŸ¥è¯†ç‚¹3ï¼š-Value"><a href="#çŸ¥è¯†ç‚¹3ï¼š-Value" class="headerlink" title="çŸ¥è¯†ç‚¹3ï¼š@Value"></a>çŸ¥è¯†ç‚¹3ï¼š@Value</h4><table><thead><tr><th>åç§°</th><th>@Value</th></tr></thead><tbody><tr><td>ç±»å‹</td><td>å±æ€§æ³¨è§£  æˆ–  æ–¹æ³•æ³¨è§£ï¼ˆäº†è§£ï¼‰</td></tr><tr><td>ä½ç½®</td><td>å±æ€§å®šä¹‰ä¸Šæ–¹  æˆ–  æ ‡å‡†setæ–¹æ³•ä¸Šæ–¹  æˆ–  ç±»setæ–¹æ³•ä¸Šæ–¹</td></tr><tr><td>ä½œç”¨</td><td>ä¸º  åŸºæœ¬æ•°æ®ç±»å‹  æˆ–  å­—ç¬¦ä¸²ç±»å‹  å±æ€§è®¾ç½®å€¼</td></tr><tr><td>å±æ€§</td><td>valueï¼ˆé»˜è®¤ï¼‰ï¼šè¦æ³¨å…¥çš„å±æ€§å€¼</td></tr></tbody></table><h4 id="çŸ¥è¯†ç‚¹4ï¼š-PropertySource"><a href="#çŸ¥è¯†ç‚¹4ï¼š-PropertySource" class="headerlink" title="çŸ¥è¯†ç‚¹4ï¼š@PropertySource"></a>çŸ¥è¯†ç‚¹4ï¼š@PropertySource</h4><table><thead><tr><th>åç§°</th><th>@PropertySourceï¼ˆä¸æ”¯æŒä½¿ç”¨é€šé…ç¬¦ ï¼ˆâ€*.propertiesâ€ï¼‰ï¼‰</th></tr></thead><tbody><tr><td>ç±»å‹</td><td>ç±»æ³¨è§£</td></tr><tr><td>ä½ç½®</td><td>ç±»å®šä¹‰ä¸Šæ–¹</td></tr><tr><td>ä½œç”¨</td><td>åŠ è½½propertiesæ–‡ä»¶ä¸­çš„å±æ€§å€¼</td></tr><tr><td>å±æ€§</td><td>valueï¼ˆé»˜è®¤ï¼‰ï¼šè®¾ç½®åŠ è½½çš„propertiesæ–‡ä»¶å¯¹åº”çš„æ–‡ä»¶åæˆ–æ–‡ä»¶åç»„æˆçš„æ•°ç»„</td></tr></tbody></table><h2 id="4ï¼ŒIOC-x2F-DIæ³¨è§£å¼€å‘ç®¡ç†ç¬¬ä¸‰æ–¹bean"><a href="#4ï¼ŒIOC-x2F-DIæ³¨è§£å¼€å‘ç®¡ç†ç¬¬ä¸‰æ–¹bean" class="headerlink" title="4ï¼ŒIOC&#x2F;DIæ³¨è§£å¼€å‘ç®¡ç†ç¬¬ä¸‰æ–¹bean"></a>4ï¼ŒIOC&#x2F;DIæ³¨è§£å¼€å‘ç®¡ç†ç¬¬ä¸‰æ–¹bean</h2><p>å‰é¢å®šä¹‰beançš„æ—¶å€™éƒ½æ˜¯åœ¨è‡ªå·±å¼€å‘çš„ç±»ä¸Šé¢å†™ä¸ªæ³¨è§£å°±å®Œæˆäº†ï¼Œä½†å¦‚æœæ˜¯ç¬¬ä¸‰æ–¹çš„ç±»ï¼Œè¿™äº›ç±»éƒ½æ˜¯åœ¨jaråŒ…ä¸­ï¼Œæˆ‘ä»¬æ²¡æœ‰åŠæ³•åœ¨ç±»ä¸Šé¢æ·»åŠ æ³¨è§£ï¼Œè¿™ä¸ªæ—¶å€™è¯¥æ€ä¹ˆåŠ?</p><p>é‡åˆ°ä¸Šè¿°é—®é¢˜ï¼Œæˆ‘ä»¬å°±éœ€è¦æœ‰ä¸€ç§æ›´åŠ çµæ´»çš„æ–¹å¼æ¥å®šä¹‰bean,è¿™ç§æ–¹å¼ä¸èƒ½åœ¨åŸå§‹ä»£ç ä¸Šé¢ä¹¦å†™æ³¨è§£ï¼Œä¸€æ ·èƒ½å®šä¹‰bean,è¿™å°±ç”¨åˆ°äº†ä¸€ä¸ªå…¨æ–°çš„æ³¨è§£<code>@Bean</code>ã€‚</p><p>è¿™ä¸ªæ³¨è§£è¯¥å¦‚ä½•ä½¿ç”¨å‘¢?</p><p>å’±ä»¬æŠŠä¹‹å‰ä½¿ç”¨é…ç½®æ–¹å¼ç®¡ç†çš„æ•°æ®æºä½¿ç”¨æ³¨è§£å†æ¥ä¸€éï¼Œé€šè¿‡è¿™ä¸ªæ¡ˆä¾‹æ¥å­¦ä¹ ä¸‹@Beançš„ä½¿ç”¨ã€‚</p><h3 id="4-1-ç¯å¢ƒå‡†å¤‡"><a href="#4-1-ç¯å¢ƒå‡†å¤‡" class="headerlink" title="4.1 ç¯å¢ƒå‡†å¤‡"></a>4.1 ç¯å¢ƒå‡†å¤‡</h3><p>å­¦ä¹ @Beanæ³¨è§£ä¹‹å‰å…ˆæ¥å‡†å¤‡ç¯å¢ƒ:</p><ul><li><p>åˆ›å»ºä¸€ä¸ªMavené¡¹ç›®</p></li><li><p>pom.xmlæ·»åŠ Springçš„ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.10.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>æ·»åŠ ä¸€ä¸ªé…ç½®ç±»<code>SpringConfig</code></p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringConfig</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>æ·»åŠ BookDaoã€BookDaoImplç±»</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">BookDao</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookDaoImpl</span> <span class="keyword">implements</span> <span class="title class_">BookDao</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;book dao save ...&quot;</span> );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>åˆ›å»ºè¿è¡Œç±»App</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">App</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">AnnotationConfigApplicationContext</span> <span class="variable">ctx</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AnnotationConfigApplicationContext</span>(SpringConfig.class);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p>æœ€ç»ˆåˆ›å»ºå¥½çš„é¡¹ç›®ç»“æ„å¦‚ä¸‹:</p><p><img src="/2022/07/27/Spring_day2/1630122466404.png" alt="1630122466404"></p><h3 id="4-2-æ³¨è§£å¼€å‘ç®¡ç†ç¬¬ä¸‰æ–¹bean"><a href="#4-2-æ³¨è§£å¼€å‘ç®¡ç†ç¬¬ä¸‰æ–¹bean" class="headerlink" title="4.2 æ³¨è§£å¼€å‘ç®¡ç†ç¬¬ä¸‰æ–¹bean"></a>4.2 æ³¨è§£å¼€å‘ç®¡ç†ç¬¬ä¸‰æ–¹bean</h3><p>åœ¨ä¸Šè¿°ç¯å¢ƒä¸­å®Œæˆå¯¹<code>Druid</code>æ•°æ®æºçš„ç®¡ç†ï¼Œå…·ä½“çš„å®ç°æ­¥éª¤ä¸º:</p><h4 id="æ­¥éª¤1-å¯¼å…¥å¯¹åº”çš„jaråŒ…"><a href="#æ­¥éª¤1-å¯¼å…¥å¯¹åº”çš„jaråŒ…" class="headerlink" title="æ­¥éª¤1:å¯¼å…¥å¯¹åº”çš„jaråŒ…"></a>æ­¥éª¤1:å¯¼å…¥å¯¹åº”çš„jaråŒ…</h4><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.16<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="æ­¥éª¤2-åœ¨é…ç½®ç±»ä¸­æ·»åŠ ä¸€ä¸ªæ–¹æ³•"><a href="#æ­¥éª¤2-åœ¨é…ç½®ç±»ä¸­æ·»åŠ ä¸€ä¸ªæ–¹æ³•" class="headerlink" title="æ­¥éª¤2:åœ¨é…ç½®ç±»ä¸­æ·»åŠ ä¸€ä¸ªæ–¹æ³•"></a>æ­¥éª¤2:åœ¨é…ç½®ç±»ä¸­æ·»åŠ ä¸€ä¸ªæ–¹æ³•</h4><p>æ³¨æ„è¯¥æ–¹æ³•çš„è¿”å›å€¼å°±æ˜¯è¦åˆ›å»ºçš„Beanå¯¹è±¡ç±»å‹</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringConfig</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> DataSource <span class="title function_">dataSource</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">DruidDataSource</span> <span class="variable">ds</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DruidDataSource</span>();</span><br><span class="line">        ds.setDriverClassName(<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>);</span><br><span class="line">        ds.setUrl(<span class="string">&quot;jdbc:mysql://localhost:3306/spring_db&quot;</span>);</span><br><span class="line">        ds.setUsername(<span class="string">&quot;root&quot;</span>);</span><br><span class="line">        ds.setPassword(<span class="string">&quot;root&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> ds;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ­¥éª¤3-åœ¨æ–¹æ³•ä¸Šæ·»åŠ -Beanæ³¨è§£"><a href="#æ­¥éª¤3-åœ¨æ–¹æ³•ä¸Šæ·»åŠ -Beanæ³¨è§£" class="headerlink" title="æ­¥éª¤3:åœ¨æ–¹æ³•ä¸Šæ·»åŠ @Beanæ³¨è§£"></a>æ­¥éª¤3:åœ¨æ–¹æ³•ä¸Šæ·»åŠ <code>@Bean</code>æ³¨è§£</h4><p><code>@Bean</code>æ³¨è§£çš„ä½œç”¨æ˜¯å°†æ–¹æ³•çš„è¿”å›å€¼åˆ¶ä½œä¸ºSpringç®¡ç†çš„ä¸€ä¸ªbeanå¯¹è±¡</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringConfig</span> &#123;</span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> DataSource <span class="title function_">dataSource</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">DruidDataSource</span> <span class="variable">ds</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DruidDataSource</span>();</span><br><span class="line">        ds.setDriverClassName(<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>);</span><br><span class="line">        ds.setUrl(<span class="string">&quot;jdbc:mysql://localhost:3306/spring_db&quot;</span>);</span><br><span class="line">        ds.setUsername(<span class="string">&quot;root&quot;</span>);</span><br><span class="line">        ds.setPassword(<span class="string">&quot;root&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> ds;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„:ä¸èƒ½ä½¿ç”¨<code>DataSource ds = new DruidDataSource()</code></strong></p><p>å› ä¸ºDataSourceæ¥å£ä¸­æ²¡æœ‰å¯¹åº”çš„setteræ–¹æ³•æ¥è®¾ç½®å±æ€§ã€‚</p><h4 id="æ­¥éª¤4-ä»IOCå®¹å™¨ä¸­è·å–å¯¹è±¡å¹¶æ‰“å°"><a href="#æ­¥éª¤4-ä»IOCå®¹å™¨ä¸­è·å–å¯¹è±¡å¹¶æ‰“å°" class="headerlink" title="æ­¥éª¤4:ä»IOCå®¹å™¨ä¸­è·å–å¯¹è±¡å¹¶æ‰“å°"></a>æ­¥éª¤4:ä»IOCå®¹å™¨ä¸­è·å–å¯¹è±¡å¹¶æ‰“å°</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">App</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">AnnotationConfigApplicationContext</span> <span class="variable">ctx</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AnnotationConfigApplicationContext</span>(SpringConfig.class);</span><br><span class="line">        <span class="type">DataSource</span> <span class="variable">dataSource</span> <span class="operator">=</span> ctx.getBean(DataSource.class);</span><br><span class="line">        System.out.println(dataSource);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è‡³æ­¤ä½¿ç”¨@Beanæ¥ç®¡ç†ç¬¬ä¸‰æ–¹beançš„æ¡ˆä¾‹å°±å·²ç»å®Œæˆã€‚</p><p>å¦‚æœæœ‰å¤šä¸ªbeanè¦è¢«Springç®¡ç†ï¼Œç›´æ¥åœ¨é…ç½®ç±»ä¸­å¤šäº›å‡ ä¸ªæ–¹æ³•ï¼Œæ–¹æ³•ä¸Šæ·»åŠ @Beanæ³¨è§£å³å¯ã€‚</p><h3 id="4-3-å¼•å…¥å¤–éƒ¨é…ç½®ç±»"><a href="#4-3-å¼•å…¥å¤–éƒ¨é…ç½®ç±»" class="headerlink" title="4.3 å¼•å…¥å¤–éƒ¨é…ç½®ç±»"></a>4.3 å¼•å…¥å¤–éƒ¨é…ç½®ç±»</h3><p>å¦‚æœæŠŠæ‰€æœ‰çš„ç¬¬ä¸‰æ–¹beanéƒ½é…ç½®åˆ°Springçš„é…ç½®ç±»<code>SpringConfig</code>ä¸­ï¼Œè™½ç„¶å¯ä»¥ï¼Œä½†æ˜¯ä¸åˆ©äºä»£ç é˜…è¯»å’Œåˆ†ç±»ç®¡ç†ï¼Œæ‰€æœ‰æˆ‘ä»¬å°±æƒ³èƒ½ä¸èƒ½æŒ‰ç…§ç±»åˆ«å°†è¿™äº›beané…ç½®åˆ°ä¸åŒçš„é…ç½®ç±»ä¸­?</p><p>å¯¹äºæ•°æ®æºçš„bean,æˆ‘ä»¬æ–°å»ºä¸€ä¸ª<code>JdbcConfig</code>é…ç½®ç±»ï¼Œå¹¶æŠŠæ•°æ®æºé…ç½®åˆ°è¯¥ç±»ä¸‹ã€‚</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JdbcConfig</span> &#123;</span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> DataSource <span class="title function_">dataSource</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">DruidDataSource</span> <span class="variable">ds</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DruidDataSource</span>();</span><br><span class="line">        ds.setDriverClassName(<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>);</span><br><span class="line">        ds.setUrl(<span class="string">&quot;jdbc:mysql://localhost:3306/spring_db&quot;</span>);</span><br><span class="line">        ds.setUsername(<span class="string">&quot;root&quot;</span>);</span><br><span class="line">        ds.setPassword(<span class="string">&quot;root&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> ds;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç°åœ¨çš„é—®é¢˜æ˜¯ï¼Œè¿™ä¸ªé…ç½®ç±»å¦‚ä½•èƒ½è¢«Springé…ç½®ç±»åŠ è½½åˆ°ï¼Œå¹¶åˆ›å»ºDataSourceå¯¹è±¡åœ¨IOCå®¹å™¨ä¸­?</p><p>é’ˆå¯¹è¿™ä¸ªé—®é¢˜ï¼Œæœ‰ä¸¤ä¸ªè§£å†³æ–¹æ¡ˆ:</p><h4 id="4-3-1-ä½¿ç”¨åŒ…æ‰«æå¼•å…¥"><a href="#4-3-1-ä½¿ç”¨åŒ…æ‰«æå¼•å…¥" class="headerlink" title="4.3.1 ä½¿ç”¨åŒ…æ‰«æå¼•å…¥"></a>4.3.1 ä½¿ç”¨åŒ…æ‰«æå¼•å…¥</h4><h5 id="æ­¥éª¤1-åœ¨Springçš„é…ç½®ç±»ä¸Šæ·»åŠ åŒ…æ‰«æ"><a href="#æ­¥éª¤1-åœ¨Springçš„é…ç½®ç±»ä¸Šæ·»åŠ åŒ…æ‰«æ" class="headerlink" title="æ­¥éª¤1:åœ¨Springçš„é…ç½®ç±»ä¸Šæ·»åŠ åŒ…æ‰«æ"></a>æ­¥éª¤1:åœ¨Springçš„é…ç½®ç±»ä¸Šæ·»åŠ åŒ…æ‰«æ</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ComponentScan(&quot;com.itheima.config&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringConfig</span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="æ­¥éª¤2-åœ¨JdbcConfigä¸Šæ·»åŠ é…ç½®æ³¨è§£"><a href="#æ­¥éª¤2-åœ¨JdbcConfigä¸Šæ·»åŠ é…ç½®æ³¨è§£" class="headerlink" title="æ­¥éª¤2:åœ¨JdbcConfigä¸Šæ·»åŠ é…ç½®æ³¨è§£"></a>æ­¥éª¤2:åœ¨JdbcConfigä¸Šæ·»åŠ é…ç½®æ³¨è§£</h5><p>JdbcConfigç±»è¦æ”¾å…¥åˆ°<code>com.itheima.config</code>åŒ…ä¸‹ï¼Œéœ€è¦è¢«Springçš„é…ç½®ç±»æ‰«æåˆ°å³å¯</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JdbcConfig</span> &#123;</span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> DataSource <span class="title function_">dataSource</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">DruidDataSource</span> <span class="variable">ds</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DruidDataSource</span>();</span><br><span class="line">        ds.setDriverClassName(<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>);</span><br><span class="line">        ds.setUrl(<span class="string">&quot;jdbc:mysql://localhost:3306/spring_db&quot;</span>);</span><br><span class="line">        ds.setUsername(<span class="string">&quot;root&quot;</span>);</span><br><span class="line">        ds.setPassword(<span class="string">&quot;root&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> ds;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="æ­¥éª¤3-è¿è¡Œç¨‹åº-2"><a href="#æ­¥éª¤3-è¿è¡Œç¨‹åº-2" class="headerlink" title="æ­¥éª¤3:è¿è¡Œç¨‹åº"></a>æ­¥éª¤3:è¿è¡Œç¨‹åº</h5><p>ä¾ç„¶èƒ½è·å–åˆ°beanå¯¹è±¡å¹¶æ‰“å°æ§åˆ¶å°ã€‚</p><p>è¿™ç§æ–¹å¼è™½ç„¶èƒ½å¤Ÿæ‰«æåˆ°ï¼Œä½†æ˜¯ä¸èƒ½å¾ˆå¿«çš„çŸ¥æ™“éƒ½å¼•å…¥äº†å“ªäº›é…ç½®ç±»ï¼Œæ‰€æœ‰è¿™ç§æ–¹å¼ä¸æ¨èä½¿ç”¨ã€‚</p><h4 id="4-3-2-ä½¿ç”¨-Importå¼•å…¥"><a href="#4-3-2-ä½¿ç”¨-Importå¼•å…¥" class="headerlink" title="4.3.2 ä½¿ç”¨@Importå¼•å…¥"></a>4.3.2 ä½¿ç”¨<code>@Import</code>å¼•å…¥</h4><p>æ–¹æ¡ˆä¸€å®ç°èµ·æ¥æœ‰ç‚¹å°å¤æ‚ï¼ŒSpringæ—©å°±æƒ³åˆ°äº†è¿™ä¸€ç‚¹ï¼Œäºæ˜¯åˆç»™æˆ‘ä»¬æä¾›äº†ç¬¬äºŒç§æ–¹æ¡ˆã€‚</p><p>è¿™ç§æ–¹æ¡ˆå¯ä»¥ä¸ç”¨åŠ <code>@Configuration</code>æ³¨è§£ï¼Œä½†æ˜¯å¿…é¡»åœ¨Springé…ç½®ç±»ä¸Šä½¿ç”¨<code>@Import</code>æ³¨è§£æ‰‹åŠ¨å¼•å…¥éœ€è¦åŠ è½½çš„é…ç½®ç±»</p><h5 id="æ­¥éª¤1-å»é™¤JdbcConfigç±»ä¸Šçš„æ³¨è§£"><a href="#æ­¥éª¤1-å»é™¤JdbcConfigç±»ä¸Šçš„æ³¨è§£" class="headerlink" title="æ­¥éª¤1:å»é™¤JdbcConfigç±»ä¸Šçš„æ³¨è§£"></a>æ­¥éª¤1:å»é™¤JdbcConfigç±»ä¸Šçš„æ³¨è§£</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JdbcConfig</span> &#123;</span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> DataSource <span class="title function_">dataSource</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">DruidDataSource</span> <span class="variable">ds</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DruidDataSource</span>();</span><br><span class="line">        ds.setDriverClassName(<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>);</span><br><span class="line">        ds.setUrl(<span class="string">&quot;jdbc:mysql://localhost:3306/spring_db&quot;</span>);</span><br><span class="line">        ds.setUsername(<span class="string">&quot;root&quot;</span>);</span><br><span class="line">        ds.setPassword(<span class="string">&quot;root&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> ds;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="æ­¥éª¤2-åœ¨Springé…ç½®ç±»ä¸­å¼•å…¥"><a href="#æ­¥éª¤2-åœ¨Springé…ç½®ç±»ä¸­å¼•å…¥" class="headerlink" title="æ­¥éª¤2:åœ¨Springé…ç½®ç±»ä¸­å¼•å…¥"></a>æ­¥éª¤2:åœ¨Springé…ç½®ç±»ä¸­å¼•å…¥</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="comment">//@ComponentScan(&quot;com.itheima.config&quot;)</span></span><br><span class="line"><span class="meta">@Import(&#123;JdbcConfig.class&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringConfig</span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„:</strong></p><ul><li><p>æ‰«ææ³¨è§£å¯ä»¥ç§»é™¤</p></li><li><p>@Importå‚æ•°éœ€è¦çš„æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œå¯ä»¥å¼•å…¥å¤šä¸ªé…ç½®ç±»ã€‚</p></li><li><p>@Importæ³¨è§£åœ¨é…ç½®ç±»ä¸­åªèƒ½å†™ä¸€æ¬¡ï¼Œä¸‹é¢çš„æ–¹å¼æ˜¯&#x3D;&#x3D;ä¸å…è®¸çš„&#x3D;&#x3D;</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="comment">//@ComponentScan(&quot;com.itheima.config&quot;)</span></span><br><span class="line"><span class="meta">@Import(JdbcConfig.class)</span></span><br><span class="line"><span class="meta">@Import(Xxx.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringConfig</span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h5 id="æ­¥éª¤3-è¿è¡Œç¨‹åº-3"><a href="#æ­¥éª¤3-è¿è¡Œç¨‹åº-3" class="headerlink" title="æ­¥éª¤3:è¿è¡Œç¨‹åº"></a>æ­¥éª¤3:è¿è¡Œç¨‹åº</h5><p>ä¾ç„¶èƒ½è·å–åˆ°beanå¯¹è±¡å¹¶æ‰“å°æ§åˆ¶å°</p><h3 id="çŸ¥è¯†ç‚¹1ï¼š-Bean"><a href="#çŸ¥è¯†ç‚¹1ï¼š-Bean" class="headerlink" title="çŸ¥è¯†ç‚¹1ï¼š@Bean"></a>çŸ¥è¯†ç‚¹1ï¼š@Bean</h3><table><thead><tr><th>åç§°</th><th>@Bean</th></tr></thead><tbody><tr><td>ç±»å‹</td><td>æ–¹æ³•æ³¨è§£</td></tr><tr><td>ä½ç½®</td><td>æ–¹æ³•å®šä¹‰ä¸Šæ–¹</td></tr><tr><td>ä½œç”¨</td><td>è®¾ç½®è¯¥æ–¹æ³•çš„è¿”å›å€¼ä½œä¸ºspringç®¡ç†çš„bean</td></tr><tr><td>å±æ€§</td><td>valueï¼ˆé»˜è®¤ï¼‰ï¼šå®šä¹‰beançš„id</td></tr></tbody></table><h3 id="çŸ¥è¯†ç‚¹2ï¼š-Import"><a href="#çŸ¥è¯†ç‚¹2ï¼š-Import" class="headerlink" title="çŸ¥è¯†ç‚¹2ï¼š@Import"></a>çŸ¥è¯†ç‚¹2ï¼š@Import</h3><table><thead><tr><th>åç§°</th><th>@Import</th></tr></thead><tbody><tr><td>ç±»å‹</td><td>ç±»æ³¨è§£</td></tr><tr><td>ä½ç½®</td><td>ç±»å®šä¹‰ä¸Šæ–¹</td></tr><tr><td>ä½œç”¨</td><td>å¯¼å…¥é…ç½®ç±»</td></tr><tr><td>å±æ€§</td><td>valueï¼ˆé»˜è®¤ï¼‰ï¼šå®šä¹‰å¯¼å…¥çš„é…ç½®ç±»ç±»åï¼Œ<br>å½“é…ç½®ç±»æœ‰å¤šä¸ªæ—¶ä½¿ç”¨æ•°ç»„æ ¼å¼ä¸€æ¬¡æ€§å¯¼å…¥å¤šä¸ªé…ç½®ç±»</td></tr></tbody></table><h3 id="4-4-æ³¨è§£å¼€å‘å®ç°ä¸ºç¬¬ä¸‰æ–¹beanæ³¨å…¥èµ„æº"><a href="#4-4-æ³¨è§£å¼€å‘å®ç°ä¸ºç¬¬ä¸‰æ–¹beanæ³¨å…¥èµ„æº" class="headerlink" title="4.4 æ³¨è§£å¼€å‘å®ç°ä¸ºç¬¬ä¸‰æ–¹beanæ³¨å…¥èµ„æº"></a>4.4 æ³¨è§£å¼€å‘å®ç°ä¸ºç¬¬ä¸‰æ–¹beanæ³¨å…¥èµ„æº</h3><p>åœ¨ä½¿ç”¨@Beanåˆ›å»ºbeanå¯¹è±¡çš„æ—¶å€™ï¼Œå¦‚æœæ–¹æ³•åœ¨åˆ›å»ºçš„è¿‡ç¨‹ä¸­éœ€è¦å…¶ä»–èµ„æºè¯¥æ€ä¹ˆåŠ?</p><p>è¿™äº›èµ„æºä¼šæœ‰ä¸¤å¤§ç±»ï¼Œåˆ†åˆ«æ˜¯<code>ç®€å•æ•°æ®ç±»å‹</code> å’Œ<code>å¼•ç”¨æ•°æ®ç±»å‹</code>ã€‚</p><h4 id="4-4-1-ç®€å•æ•°æ®ç±»å‹"><a href="#4-4-1-ç®€å•æ•°æ®ç±»å‹" class="headerlink" title="4.4.1 ç®€å•æ•°æ®ç±»å‹"></a>4.4.1 ç®€å•æ•°æ®ç±»å‹</h4><h5 id="4-4-1-1-éœ€æ±‚åˆ†æ"><a href="#4-4-1-1-éœ€æ±‚åˆ†æ" class="headerlink" title="4.4.1.1 éœ€æ±‚åˆ†æ"></a>4.4.1.1 éœ€æ±‚åˆ†æ</h5><p>å¯¹äºä¸‹é¢ä»£ç å…³äºæ•°æ®åº“çš„å››è¦ç´ ä¸åº”è¯¥å†™æ­»åœ¨ä»£ç ä¸­ï¼Œåº”è¯¥æ˜¯ä»propertiesé…ç½®æ–‡ä»¶ä¸­è¯»å–ã€‚å¦‚ä½•æ¥ä¼˜åŒ–ä¸‹é¢çš„ä»£ç ?</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JdbcConfig</span> &#123;</span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> DataSource <span class="title function_">dataSource</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">DruidDataSource</span> <span class="variable">ds</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DruidDataSource</span>();</span><br><span class="line">        ds.setDriverClassName(<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>);</span><br><span class="line">        ds.setUrl(<span class="string">&quot;jdbc:mysql://localhost:3306/spring_db&quot;</span>);</span><br><span class="line">        ds.setUsername(<span class="string">&quot;root&quot;</span>);</span><br><span class="line">        ds.setPassword(<span class="string">&quot;root&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> ds;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="4-4-1-2-æ³¨å…¥ç®€å•æ•°æ®ç±»å‹æ­¥éª¤"><a href="#4-4-1-2-æ³¨å…¥ç®€å•æ•°æ®ç±»å‹æ­¥éª¤" class="headerlink" title="4.4.1.2 æ³¨å…¥ç®€å•æ•°æ®ç±»å‹æ­¥éª¤"></a>4.4.1.2 æ³¨å…¥ç®€å•æ•°æ®ç±»å‹æ­¥éª¤</h5><h6 id="æ­¥éª¤1-ç±»ä¸­æä¾›å››ä¸ªå±æ€§"><a href="#æ­¥éª¤1-ç±»ä¸­æä¾›å››ä¸ªå±æ€§" class="headerlink" title="æ­¥éª¤1:ç±»ä¸­æä¾›å››ä¸ªå±æ€§"></a>æ­¥éª¤1:ç±»ä¸­æä¾›å››ä¸ªå±æ€§</h6><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JdbcConfig</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String driver;</span><br><span class="line">    <span class="keyword">private</span> String url;</span><br><span class="line">    <span class="keyword">private</span> String userName;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> DataSource <span class="title function_">dataSource</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">DruidDataSource</span> <span class="variable">ds</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DruidDataSource</span>();</span><br><span class="line">        ds.setDriverClassName(<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>);</span><br><span class="line">        ds.setUrl(<span class="string">&quot;jdbc:mysql://localhost:3306/spring_db&quot;</span>);</span><br><span class="line">        ds.setUsername(<span class="string">&quot;root&quot;</span>);</span><br><span class="line">        ds.setPassword(<span class="string">&quot;root&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> ds;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h6 id="æ­¥éª¤2-ä½¿ç”¨-Valueæ³¨è§£å¼•å…¥å€¼"><a href="#æ­¥éª¤2-ä½¿ç”¨-Valueæ³¨è§£å¼•å…¥å€¼" class="headerlink" title="æ­¥éª¤2:ä½¿ç”¨@Valueæ³¨è§£å¼•å…¥å€¼"></a>æ­¥éª¤2:ä½¿ç”¨<code>@Value</code>æ³¨è§£å¼•å…¥å€¼</h6><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JdbcConfig</span> &#123;</span><br><span class="line">    <span class="meta">@Value(&quot;com.mysql.jdbc.Driver&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String driver;</span><br><span class="line">    <span class="meta">@Value(&quot;jdbc:mysql://localhost:3306/spring_db&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String url;</span><br><span class="line">    <span class="meta">@Value(&quot;root&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String userName;</span><br><span class="line">    <span class="meta">@Value(&quot;password&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> DataSource <span class="title function_">dataSource</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">DruidDataSource</span> <span class="variable">ds</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DruidDataSource</span>();</span><br><span class="line">        ds.setDriverClassName(driver);</span><br><span class="line">        ds.setUrl(url);</span><br><span class="line">        ds.setUsername(userName);</span><br><span class="line">        ds.setPassword(password);</span><br><span class="line">        <span class="keyword">return</span> ds;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h6 id="æ‰©å±•"><a href="#æ‰©å±•" class="headerlink" title="æ‰©å±•"></a><strong>æ‰©å±•</strong></h6><p>ç°åœ¨çš„æ•°æ®åº“è¿æ¥å››è¦ç´ è¿˜æ˜¯å†™åœ¨ä»£ç ä¸­ï¼Œéœ€è¦åšçš„æ˜¯å°†è¿™äº›å†…å®¹æ</p><p>å–åˆ°jdbc.propertiesé…ç½®æ–‡ä»¶ï¼Œå¤§å®¶æ€è€ƒä¸‹è¯¥å¦‚ä½•å®ç°?</p><blockquote><p>1.resourcesç›®å½•ä¸‹æ·»åŠ jdbc.properties</p><p>2.é…ç½®æ–‡ä»¶ä¸­æä¾›å››ä¸ªé”®å€¼å¯¹åˆ†åˆ«æ˜¯æ•°æ®åº“çš„å››è¦ç´ </p><p>3.ä½¿ç”¨@PropertySourceåŠ è½½jdbc.propertiesé…ç½®æ–‡ä»¶</p><p>4.ä¿®æ”¹@Valueæ³¨è§£å±æ€§çš„å€¼ï¼Œå°†å…¶ä¿®æ”¹ä¸º<code>$&#123;key&#125;</code>ï¼Œkeyå°±æ˜¯é”®å€¼å¯¹ä¸­çš„é”®çš„å€¼</p></blockquote><p>å…·ä½“çš„å®ç°å°±äº¤ç”±å¤§å®¶è‡ªè¡Œå®ç°ä¸‹ã€‚</p><h4 id="4-4-2-å¼•ç”¨æ•°æ®ç±»å‹"><a href="#4-4-2-å¼•ç”¨æ•°æ®ç±»å‹" class="headerlink" title="4.4.2 å¼•ç”¨æ•°æ®ç±»å‹"></a>4.4.2 å¼•ç”¨æ•°æ®ç±»å‹</h4><h5 id="4-4-2-1-éœ€æ±‚åˆ†æ"><a href="#4-4-2-1-éœ€æ±‚åˆ†æ" class="headerlink" title="4.4.2.1 éœ€æ±‚åˆ†æ"></a>4.4.2.1 éœ€æ±‚åˆ†æ</h5><p>å‡è®¾åœ¨æ„å»ºDataSourceå¯¹è±¡çš„æ—¶å€™ï¼Œéœ€è¦ç”¨åˆ°BookDaoå¯¹è±¡ï¼Œè¯¥å¦‚ä½•æŠŠBookDaoå¯¹è±¡æ³¨å…¥è¿›æ–¹æ³•å†…è®©å…¶ä½¿ç”¨å‘¢?</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JdbcConfig</span> &#123;</span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> DataSource <span class="title function_">dataSource</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">DruidDataSource</span> <span class="variable">ds</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DruidDataSource</span>();</span><br><span class="line">        ds.setDriverClassName(<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>);</span><br><span class="line">        ds.setUrl(<span class="string">&quot;jdbc:mysql://localhost:3306/spring_db&quot;</span>);</span><br><span class="line">        ds.setUsername(<span class="string">&quot;root&quot;</span>);</span><br><span class="line">        ds.setPassword(<span class="string">&quot;root&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> ds;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="4-4-2-2-æ³¨å…¥å¼•ç”¨æ•°æ®ç±»å‹æ­¥éª¤"><a href="#4-4-2-2-æ³¨å…¥å¼•ç”¨æ•°æ®ç±»å‹æ­¥éª¤" class="headerlink" title="4.4.2.2 æ³¨å…¥å¼•ç”¨æ•°æ®ç±»å‹æ­¥éª¤"></a>4.4.2.2 æ³¨å…¥å¼•ç”¨æ•°æ®ç±»å‹æ­¥éª¤</h5><h6 id="æ­¥éª¤1-åœ¨SpringConfigä¸­æ‰«æBookDao"><a href="#æ­¥éª¤1-åœ¨SpringConfigä¸­æ‰«æBookDao" class="headerlink" title="æ­¥éª¤1:åœ¨SpringConfigä¸­æ‰«æBookDao"></a>æ­¥éª¤1:åœ¨SpringConfigä¸­æ‰«æBookDao</h6><p>æ‰«æçš„ç›®çš„æ˜¯è®©Springèƒ½ç®¡ç†åˆ°BookDao,ä¹Ÿå°±æ˜¯è¯´è¦è®©IOCå®¹å™¨ä¸­æœ‰ä¸€ä¸ªbookDaoå¯¹è±¡</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ComponentScan(&quot;com.itheima.dao&quot;)</span></span><br><span class="line"><span class="meta">@Import(&#123;JdbcConfig.class&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringConfig</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h6 id="æ­¥éª¤2-åœ¨JdbcConfigç±»çš„æ–¹æ³•ä¸Šæ·»åŠ å‚æ•°"><a href="#æ­¥éª¤2-åœ¨JdbcConfigç±»çš„æ–¹æ³•ä¸Šæ·»åŠ å‚æ•°" class="headerlink" title="æ­¥éª¤2:åœ¨JdbcConfigç±»çš„æ–¹æ³•ä¸Šæ·»åŠ å‚æ•°"></a>æ­¥éª¤2:åœ¨JdbcConfigç±»çš„æ–¹æ³•ä¸Šæ·»åŠ å‚æ•°</h6><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> DataSource <span class="title function_">dataSource</span><span class="params">(BookDao bookDao)</span>&#123;</span><br><span class="line">    System.out.println(bookDao);</span><br><span class="line">    <span class="type">DruidDataSource</span> <span class="variable">ds</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DruidDataSource</span>();</span><br><span class="line">    ds.setDriverClassName(driver);</span><br><span class="line">    ds.setUrl(url);</span><br><span class="line">    ds.setUsername(userName);</span><br><span class="line">    ds.setPassword(password);</span><br><span class="line">    <span class="keyword">return</span> ds;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><em>å¼•ç”¨ç±»å‹æ³¨å…¥åªéœ€è¦ä¸ºbeanå®šä¹‰æ–¹æ³•è®¾ç½®å½¢å‚å³å¯ï¼Œå®¹å™¨ä¼šæ ¹æ®ç±»å‹è‡ªåŠ¨è£…é…å¯¹è±¡ã€‚</em></p><h6 id="æ­¥éª¤3-è¿è¡Œç¨‹åº-4"><a href="#æ­¥éª¤3-è¿è¡Œç¨‹åº-4" class="headerlink" title="æ­¥éª¤3:è¿è¡Œç¨‹åº"></a>æ­¥éª¤3:è¿è¡Œç¨‹åº</h6><p><img src="/2022/07/27/Spring_day2/1630125475609.png" alt="1630125475609"></p><h2 id="5ï¼Œæ³¨è§£å¼€å‘æ€»ç»“"><a href="#5ï¼Œæ³¨è§£å¼€å‘æ€»ç»“" class="headerlink" title="5ï¼Œæ³¨è§£å¼€å‘æ€»ç»“"></a>5ï¼Œæ³¨è§£å¼€å‘æ€»ç»“</h2><p>å‰é¢å·²ç»å®Œæˆäº†XMLé…ç½®å’Œæ³¨è§£çš„å¼€å‘å®ç°ï¼Œè‡³äºä¸¤è€…ä¹‹é—´çš„å·®å¼‚ï¼Œæˆ‘ä»¬æ”¾åœ¨ä¸€å—å»å¯¹æ¯”å›é¡¾ä¸‹:</p><p><img src="/2022/07/27/Spring_day2/1630134786448.png" alt="1630134786448"></p><h2 id="6ï¼ŒSpringæ•´åˆ"><a href="#6ï¼ŒSpringæ•´åˆ" class="headerlink" title="6ï¼ŒSpringæ•´åˆ"></a>6ï¼ŒSpringæ•´åˆ</h2><p>è¯¾ç¨‹å­¦ä¹ åˆ°è¿™é‡Œï¼Œå·²ç»å¯¹Springæœ‰ä¸€ä¸ªç®€å•çš„è®¤è¯†äº†ï¼ŒSpringæœ‰ä¸€ä¸ªå®¹å™¨ï¼Œå«åšIoCå®¹å™¨ï¼Œé‡Œé¢ä¿å­˜beanã€‚åœ¨è¿›è¡Œä¼ä¸šçº§å¼€å‘çš„æ—¶å€™ï¼Œå…¶å®é™¤äº†å°†è‡ªå·±å†™çš„ç±»è®©Springç®¡ç†ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€éƒ¨åˆ†é‡è¦çš„å·¥ä½œå°±æ˜¯ä½¿ç”¨ç¬¬ä¸‰æ–¹çš„æŠ€æœ¯ã€‚å‰é¢å·²ç»è®²äº†å¦‚ä½•ç®¡ç†ç¬¬ä¸‰æ–¹beanäº†ï¼Œä¸‹é¢ç»“åˆIoCå’ŒDIï¼Œæ•´åˆ2ä¸ªå¸¸ç”¨æŠ€æœ¯ï¼Œè¿›ä¸€æ­¥åŠ æ·±å¯¹Springçš„ä½¿ç”¨ç†è§£ã€‚</p><h3 id="6-1-Springæ•´åˆMybatisæ€è·¯åˆ†æ"><a href="#6-1-Springæ•´åˆMybatisæ€è·¯åˆ†æ" class="headerlink" title="6.1 Springæ•´åˆMybatisæ€è·¯åˆ†æ"></a>6.1 Springæ•´åˆMybatisæ€è·¯åˆ†æ</h3><h4 id="6-1-1-ç¯å¢ƒå‡†å¤‡"><a href="#6-1-1-ç¯å¢ƒå‡†å¤‡" class="headerlink" title="6.1.1 ç¯å¢ƒå‡†å¤‡"></a>6.1.1 ç¯å¢ƒå‡†å¤‡</h4><p>åœ¨å‡†å¤‡ç¯å¢ƒçš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä¹Ÿæ¥å›é¡¾ä¸‹Mybatiså¼€å‘çš„ç›¸å…³å†…å®¹:</p><h5 id="æ­¥éª¤1-å‡†å¤‡æ•°æ®åº“è¡¨"><a href="#æ­¥éª¤1-å‡†å¤‡æ•°æ®åº“è¡¨" class="headerlink" title="æ­¥éª¤1:å‡†å¤‡æ•°æ®åº“è¡¨"></a>æ­¥éª¤1:å‡†å¤‡æ•°æ®åº“è¡¨</h5><p>Mybatisæ˜¯æ¥æ“ä½œæ•°æ®åº“è¡¨ï¼Œæ‰€ä»¥å…ˆåˆ›å»ºä¸€ä¸ªæ•°æ®åº“åŠè¡¨</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> database spring_db <span class="type">character</span> <span class="keyword">set</span> utf8;</span><br><span class="line">use spring_db;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> tbl_account(</span><br><span class="line">    id <span class="type">int</span> <span class="keyword">primary</span> key auto_increment,</span><br><span class="line">    name <span class="type">varchar</span>(<span class="number">35</span>),</span><br><span class="line">    money <span class="keyword">double</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure><h5 id="æ­¥éª¤2-åˆ›å»ºé¡¹ç›®å¯¼å…¥jaråŒ…"><a href="#æ­¥éª¤2-åˆ›å»ºé¡¹ç›®å¯¼å…¥jaråŒ…" class="headerlink" title="æ­¥éª¤2:åˆ›å»ºé¡¹ç›®å¯¼å…¥jaråŒ…"></a>æ­¥éª¤2:åˆ›å»ºé¡¹ç›®å¯¼å…¥jaråŒ…</h5><p>é¡¹ç›®çš„pom.xmlæ·»åŠ ç›¸å…³ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.10.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.16<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.47<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="æ­¥éª¤3-æ ¹æ®è¡¨åˆ›å»ºæ¨¡å‹ç±»"><a href="#æ­¥éª¤3-æ ¹æ®è¡¨åˆ›å»ºæ¨¡å‹ç±»" class="headerlink" title="æ­¥éª¤3:æ ¹æ®è¡¨åˆ›å»ºæ¨¡å‹ç±»"></a>æ­¥éª¤3:æ ¹æ®è¡¨åˆ›å»ºæ¨¡å‹ç±»</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Account</span> <span class="keyword">implements</span> <span class="title class_">Serializable</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Double money;</span><br><span class="line"><span class="comment">//setter...getter...toString...æ–¹æ³•ç•¥    </span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="æ­¥éª¤4-åˆ›å»ºDaoæ¥å£"><a href="#æ­¥éª¤4-åˆ›å»ºDaoæ¥å£" class="headerlink" title="æ­¥éª¤4:åˆ›å»ºDaoæ¥å£"></a>æ­¥éª¤4:åˆ›å»ºDaoæ¥å£</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">AccountDao</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Insert(&quot;insert into tbl_account(name,money)values(#&#123;name&#125;,#&#123;money&#125;)&quot;)</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">save</span><span class="params">(Account account)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Delete(&quot;delete from tbl_account where id = #&#123;id&#125; &quot;)</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">delete</span><span class="params">(Integer id)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Update(&quot;update tbl_account set name = #&#123;name&#125; , money = #&#123;money&#125; where id = #&#123;id&#125; &quot;)</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">update</span><span class="params">(Account account)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Select(&quot;select * from tbl_account&quot;)</span></span><br><span class="line">    List&lt;Account&gt; <span class="title function_">findAll</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Select(&quot;select * from tbl_account where id = #&#123;id&#125; &quot;)</span></span><br><span class="line">    Account <span class="title function_">findById</span><span class="params">(Integer id)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="æ­¥éª¤5-åˆ›å»ºServiceæ¥å£å’Œå®ç°ç±»"><a href="#æ­¥éª¤5-åˆ›å»ºServiceæ¥å£å’Œå®ç°ç±»" class="headerlink" title="æ­¥éª¤5:åˆ›å»ºServiceæ¥å£å’Œå®ç°ç±»"></a>æ­¥éª¤5:åˆ›å»ºServiceæ¥å£å’Œå®ç°ç±»</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">AccountService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">save</span><span class="params">(Account account)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">delete</span><span class="params">(Integer id)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">update</span><span class="params">(Account account)</span>;</span><br><span class="line"></span><br><span class="line">    List&lt;Account&gt; <span class="title function_">findAll</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    Account <span class="title function_">findById</span><span class="params">(Integer id)</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AccountServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">AccountService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> AccountDao accountDao;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">(Account account)</span> &#123;</span><br><span class="line">        accountDao.save(account);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">(Account account)</span>&#123;</span><br><span class="line">        accountDao.update(account);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">delete</span><span class="params">(Integer id)</span> &#123;</span><br><span class="line">        accountDao.delete(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Account <span class="title function_">findById</span><span class="params">(Integer id)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> accountDao.findById(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> List&lt;Account&gt; <span class="title function_">findAll</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> accountDao.findAll();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="æ­¥éª¤6-æ·»åŠ jdbc-propertiesæ–‡ä»¶"><a href="#æ­¥éª¤6-æ·»åŠ jdbc-propertiesæ–‡ä»¶" class="headerlink" title="æ­¥éª¤6:æ·»åŠ jdbc.propertiesæ–‡ä»¶"></a>æ­¥éª¤6:æ·»åŠ jdbc.propertiesæ–‡ä»¶</h5><p>resourcesç›®å½•ä¸‹æ·»åŠ ï¼Œç”¨äºé…ç½®æ•°æ®åº“è¿æ¥å››è¦ç´ </p><figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">jdbc.driver</span>=<span class="string">com.mysql.jdbc.Driver</span></span><br><span class="line"><span class="attr">jdbc.url</span>=<span class="string">jdbc:mysql://localhost:3306/spring_db?useSSL=false</span></span><br><span class="line"><span class="attr">jdbc.username</span>=<span class="string">root</span></span><br><span class="line"><span class="attr">jdbc.password</span>=<span class="string">root</span></span><br></pre></td></tr></table></figure><p>useSSL:å…³é—­MySQLçš„SSLè¿æ¥</p><h5 id="æ­¥éª¤7-æ·»åŠ Mybatisæ ¸å¿ƒé…ç½®æ–‡ä»¶"><a href="#æ­¥éª¤7-æ·»åŠ Mybatisæ ¸å¿ƒé…ç½®æ–‡ä»¶" class="headerlink" title="æ­¥éª¤7:æ·»åŠ Mybatisæ ¸å¿ƒé…ç½®æ–‡ä»¶"></a>æ­¥éª¤7:æ·»åŠ Mybatisæ ¸å¿ƒé…ç½®æ–‡ä»¶</h5><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">configuration</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--è¯»å–å¤–éƒ¨propertiesé…ç½®æ–‡ä»¶--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span> <span class="attr">resource</span>=<span class="string">&quot;jdbc.properties&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--åˆ«åæ‰«æçš„åŒ…è·¯å¾„--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">&quot;com.itheima.domain&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--æ•°æ®æº--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;mysql&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;mysql&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">transactionManager</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.driver&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.url&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.username&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.password&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--æ˜ å°„æ–‡ä»¶æ‰«æåŒ…è·¯å¾„--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">&quot;com.itheima.dao&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">package</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="æ­¥éª¤8-ç¼–å†™åº”ç”¨ç¨‹åº"><a href="#æ­¥éª¤8-ç¼–å†™åº”ç”¨ç¨‹åº" class="headerlink" title="æ­¥éª¤8:ç¼–å†™åº”ç”¨ç¨‹åº"></a>æ­¥éª¤8:ç¼–å†™åº”ç”¨ç¨‹åº</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">App</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">// 1. åˆ›å»ºSqlSessionFactoryBuilderå¯¹è±¡</span></span><br><span class="line">        <span class="type">SqlSessionFactoryBuilder</span> <span class="variable">sqlSessionFactoryBuilder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>();</span><br><span class="line">        <span class="comment">// 2. åŠ è½½SqlMapConfig.xmlé…ç½®æ–‡ä»¶</span></span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">inputStream</span> <span class="operator">=</span> Resources.getResourceAsStream(<span class="string">&quot;SqlMapConfig.xml.bak&quot;</span>);</span><br><span class="line">        <span class="comment">// 3. åˆ›å»ºSqlSessionFactoryå¯¹è±¡</span></span><br><span class="line">        <span class="type">SqlSessionFactory</span> <span class="variable">sqlSessionFactory</span> <span class="operator">=</span> sqlSessionFactoryBuilder.build(inputStream);</span><br><span class="line">        <span class="comment">// 4. è·å–SqlSession</span></span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> sqlSessionFactory.openSession();</span><br><span class="line">        <span class="comment">// 5. æ‰§è¡ŒSqlSessionå¯¹è±¡æ‰§è¡ŒæŸ¥è¯¢ï¼Œè·å–ç»“æœUser</span></span><br><span class="line">        <span class="type">AccountDao</span> <span class="variable">accountDao</span> <span class="operator">=</span> sqlSession.getMapper(AccountDao.class);</span><br><span class="line"></span><br><span class="line">        <span class="type">Account</span> <span class="variable">ac</span> <span class="operator">=</span> accountDao.findById(<span class="number">1</span>);</span><br><span class="line">        System.out.println(ac);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 6. é‡Šæ”¾èµ„æº</span></span><br><span class="line">        sqlSession.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="æ­¥éª¤9-è¿è¡Œç¨‹åº"><a href="#æ­¥éª¤9-è¿è¡Œç¨‹åº" class="headerlink" title="æ­¥éª¤9:è¿è¡Œç¨‹åº"></a>æ­¥éª¤9:è¿è¡Œç¨‹åº</h5><p><img src="/2022/07/27/Spring_day2/1630136904087.png" alt="1630136904087"></p><h4 id="6-1-2-æ•´åˆæ€è·¯åˆ†æ"><a href="#6-1-2-æ•´åˆæ€è·¯åˆ†æ" class="headerlink" title="6.1.2 æ•´åˆæ€è·¯åˆ†æ"></a>6.1.2 æ•´åˆæ€è·¯åˆ†æ</h4><p>Mybatisçš„åŸºç¡€ç¯å¢ƒæˆ‘ä»¬å·²ç»å‡†å¤‡å¥½äº†ï¼Œæ¥ä¸‹æ¥å°±å¾—åˆ†æä¸‹åœ¨ä¸Šè¿°çš„å†…å®¹ä¸­ï¼Œå“ªäº›å¯¹è±¡å¯ä»¥äº¤ç»™Springæ¥ç®¡ç†?</p><ul><li><p>Mybatisç¨‹åºæ ¸å¿ƒå¯¹è±¡åˆ†æ</p><p><img src="/2022/07/27/Spring_day2/1630137189480.png" alt="1630137189480"></p><p>ä»å›¾ä¸­å¯ä»¥è·å–åˆ°ï¼ŒçœŸæ­£éœ€è¦äº¤ç»™Springç®¡ç†çš„æ˜¯&#x3D;&#x3D;SqlSessionFactory&#x3D;&#x3D;</p></li><li><p>æ•´åˆMybatisï¼Œå°±æ˜¯å°†Mybatisç”¨åˆ°çš„å†…å®¹äº¤ç»™Springç®¡ç†ï¼Œåˆ†æä¸‹é…ç½®æ–‡ä»¶</p><p><img src="/2022/07/27/Spring_day2/1630137388717.png" alt="1630137388717"></p><p><strong>è¯´æ˜:</strong></p><ul><li>ç¬¬ä¸€è¡Œè¯»å–å¤–éƒ¨propertiesé…ç½®æ–‡ä»¶ï¼ŒSpringæœ‰æä¾›å…·ä½“çš„è§£å†³æ–¹æ¡ˆ<code>@PropertySource</code>,éœ€è¦äº¤ç»™Spring</li><li>ç¬¬äºŒè¡Œèµ·åˆ«ååŒ…æ‰«æï¼Œä¸ºSqlSessionFactoryæœåŠ¡çš„ï¼Œéœ€è¦äº¤ç»™Spring</li><li>ç¬¬ä¸‰è¡Œä¸»è¦ç”¨äºåšè¿æ¥æ± ï¼ŒSpringä¹‹å‰æˆ‘ä»¬å·²ç»æ•´åˆäº†Druidè¿æ¥æ± ï¼Œè¿™å—ä¹Ÿéœ€è¦äº¤ç»™Spring</li><li>å‰é¢ä¸‰è¡Œä¸€èµ·éƒ½æ˜¯ä¸ºäº†åˆ›å»ºSqlSessionå¯¹è±¡ç”¨çš„ï¼Œé‚£ä¹ˆç”¨Springç®¡ç†SqlSessionå¯¹è±¡å—?å›å¿†ä¸‹SqlSessionæ˜¯ç”±SqlSessionFactoryåˆ›å»ºå‡ºæ¥çš„ï¼Œæ‰€ä»¥åªéœ€è¦å°†SqlSessionFactoryäº¤ç»™Springç®¡ç†å³å¯ã€‚</li><li>ç¬¬å››è¡Œæ˜¯Mapperæ¥å£å’Œæ˜ å°„æ–‡ä»¶[å¦‚æœä½¿ç”¨æ³¨è§£å°±æ²¡æœ‰è¯¥æ˜ å°„æ–‡ä»¶]ï¼Œè¿™ä¸ªæ˜¯åœ¨è·å–åˆ°SqlSessionä»¥åæ‰§è¡Œå…·ä½“æ“ä½œçš„æ—¶å€™ç”¨ï¼Œæ‰€ä»¥å®ƒå’ŒSqlSessionFactoryåˆ›å»ºçš„æ—¶æœºéƒ½ä¸åœ¨åŒä¸€ä¸ªæ—¶é—´ï¼Œå¯èƒ½éœ€è¦å•ç‹¬ç®¡ç†ã€‚</li></ul></li></ul><h3 id="6-2-Springæ•´åˆMybatis"><a href="#6-2-Springæ•´åˆMybatis" class="headerlink" title="6.2 Springæ•´åˆMybatis"></a>6.2 Springæ•´åˆMybatis</h3><p>å‰é¢æˆ‘ä»¬å·²ç»åˆ†æäº†Springä¸Mybatisçš„æ•´åˆï¼Œå¤§ä½“éœ€è¦åšä¸¤ä»¶äº‹ï¼Œ</p><p>ç¬¬ä¸€ä»¶äº‹æ˜¯ï¼šSpringè¦ç®¡ç†MyBatisä¸­çš„SqlSessionFactory</p><p>ç¬¬äºŒä»¶äº‹æ˜¯ï¼šSpringè¦ç®¡ç†Mapperæ¥å£çš„æ‰«æ</p><p>å…·ä½“è¯¥å¦‚ä½•å®ç°ï¼Œå…·ä½“çš„æ­¥éª¤ä¸º:</p><h4 id="æ­¥éª¤1-é¡¹ç›®ä¸­å¯¼å…¥æ•´åˆéœ€è¦çš„jaråŒ…"><a href="#æ­¥éª¤1-é¡¹ç›®ä¸­å¯¼å…¥æ•´åˆéœ€è¦çš„jaråŒ…" class="headerlink" title="æ­¥éª¤1:é¡¹ç›®ä¸­å¯¼å…¥æ•´åˆéœ€è¦çš„jaråŒ…"></a>æ­¥éª¤1:é¡¹ç›®ä¸­å¯¼å…¥æ•´åˆéœ€è¦çš„jaråŒ…</h4><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--Springæ“ä½œæ•°æ®åº“éœ€è¦è¯¥jaråŒ…--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.10.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">Springä¸Mybatisæ•´åˆçš„jaråŒ…</span></span><br><span class="line"><span class="comment">è¿™ä¸ªjaråŒ…mybatisåœ¨å‰é¢ï¼Œæ˜¯Mybatisæä¾›çš„</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="æ­¥éª¤2-åˆ›å»ºSpringçš„ä¸»é…ç½®ç±»"><a href="#æ­¥éª¤2-åˆ›å»ºSpringçš„ä¸»é…ç½®ç±»" class="headerlink" title="æ­¥éª¤2:åˆ›å»ºSpringçš„ä¸»é…ç½®ç±»"></a>æ­¥éª¤2:åˆ›å»ºSpringçš„ä¸»é…ç½®ç±»</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//é…ç½®ç±»æ³¨è§£</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="comment">//åŒ…æ‰«æï¼Œä¸»è¦æ‰«æçš„æ˜¯é¡¹ç›®ä¸­çš„AccountServiceImplç±»</span></span><br><span class="line"><span class="meta">@ComponentScan(&quot;com.itheima&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringConfig</span> &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="æ­¥éª¤3-åˆ›å»ºæ•°æ®æºçš„é…ç½®ç±»"><a href="#æ­¥éª¤3-åˆ›å»ºæ•°æ®æºçš„é…ç½®ç±»" class="headerlink" title="æ­¥éª¤3:åˆ›å»ºæ•°æ®æºçš„é…ç½®ç±»"></a>æ­¥éª¤3:åˆ›å»ºæ•°æ®æºçš„é…ç½®ç±»</h4><p>åœ¨é…ç½®ç±»ä¸­å®Œæˆæ•°æ®æºçš„åˆ›å»º</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JdbcConfig</span> &#123;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;jdbc.driver&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String driver;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;jdbc.url&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String url;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;jdbc.username&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String userName;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;jdbc.password&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> DataSource <span class="title function_">dataSource</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">DruidDataSource</span> <span class="variable">ds</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DruidDataSource</span>();</span><br><span class="line">        ds.setDriverClassName(driver);</span><br><span class="line">        ds.setUrl(url);</span><br><span class="line">        ds.setUsername(userName);</span><br><span class="line">        ds.setPassword(password);</span><br><span class="line">        <span class="keyword">return</span> ds;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ­¥éª¤4-ä¸»é…ç½®ç±»ä¸­è¯»propertieså¹¶å¼•å…¥æ•°æ®æºé…ç½®ç±»"><a href="#æ­¥éª¤4-ä¸»é…ç½®ç±»ä¸­è¯»propertieså¹¶å¼•å…¥æ•°æ®æºé…ç½®ç±»" class="headerlink" title="æ­¥éª¤4:ä¸»é…ç½®ç±»ä¸­è¯»propertieså¹¶å¼•å…¥æ•°æ®æºé…ç½®ç±»"></a>æ­¥éª¤4:ä¸»é…ç½®ç±»ä¸­è¯»propertieså¹¶å¼•å…¥æ•°æ®æºé…ç½®ç±»</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ComponentScan(&quot;com.itheima&quot;)</span></span><br><span class="line"><span class="meta">@PropertySource(&quot;classpath:jdbc.properties&quot;)</span></span><br><span class="line"><span class="meta">@Import(JdbcConfig.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringConfig</span> &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="æ­¥éª¤5-åˆ›å»ºMybatisé…ç½®ç±»å¹¶é…ç½®SqlSessionFactory"><a href="#æ­¥éª¤5-åˆ›å»ºMybatisé…ç½®ç±»å¹¶é…ç½®SqlSessionFactory" class="headerlink" title="æ­¥éª¤5:åˆ›å»ºMybatisé…ç½®ç±»å¹¶é…ç½®SqlSessionFactory"></a>æ­¥éª¤5:åˆ›å»ºMybatisé…ç½®ç±»å¹¶é…ç½®SqlSessionFactory</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MybatisConfig</span> &#123;</span><br><span class="line">    <span class="comment">//å®šä¹‰beanï¼ŒSqlSessionFactoryBeanï¼Œç”¨äºäº§ç”ŸSqlSessionFactoryå¯¹è±¡</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> SqlSessionFactoryBean <span class="title function_">sqlSessionFactory</span><span class="params">(DataSource dataSource)</span>&#123;</span><br><span class="line">        <span class="type">SqlSessionFactoryBean</span> <span class="variable">ssfb</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBean</span>();</span><br><span class="line">        <span class="comment">//è®¾ç½®æ¨¡å‹ç±»çš„åˆ«åæ‰«æ</span></span><br><span class="line">        ssfb.setTypeAliasesPackage(<span class="string">&quot;com.itheima.domain&quot;</span>);</span><br><span class="line">        <span class="comment">//è®¾ç½®æ•°æ®æº</span></span><br><span class="line">        ssfb.setDataSource(dataSource);</span><br><span class="line">        <span class="keyword">return</span> ssfb;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//å®šä¹‰beanï¼Œè¿”å›MapperScannerConfigurerå¯¹è±¡</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> MapperScannerConfigurer <span class="title function_">mapperScannerConfigurer</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">MapperScannerConfigurer</span> <span class="variable">msc</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MapperScannerConfigurer</span>();</span><br><span class="line">        msc.setBasePackage(<span class="string">&quot;com.itheima.dao&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> msc;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>è¯´æ˜:</strong></p><ul><li><p>ä½¿ç”¨SqlSessionFactoryBeanå°è£…SqlSessionFactoryéœ€è¦çš„ç¯å¢ƒä¿¡æ¯</p><p><img src="/2022/07/27/Spring_day2/1630138835057.png" alt="1630138835057"></p><ul><li>SqlSessionFactoryBeanæ˜¯å‰é¢æˆ‘ä»¬è®²è§£FactoryBeançš„ä¸€ä¸ªå­ç±»ï¼Œåœ¨è¯¥ç±»ä¸­å°†SqlSessionFactoryçš„åˆ›å»ºè¿›è¡Œäº†å°è£…ï¼Œç®€åŒ–å¯¹è±¡çš„åˆ›å»ºï¼Œæˆ‘ä»¬åªéœ€è¦å°†å…¶éœ€è¦çš„å†…å®¹è®¾ç½®å³å¯ã€‚</li><li>æ–¹æ³•ä¸­æœ‰ä¸€ä¸ªå‚æ•°ä¸ºdataSource,å½“å‰Springå®¹å™¨ä¸­å·²ç»åˆ›å»ºäº†Druidæ•°æ®æºï¼Œç±»å‹åˆšå¥½æ˜¯DataSourceç±»å‹ï¼Œæ­¤æ—¶åœ¨åˆå§‹åŒ–SqlSessionFactoryBeanè¿™ä¸ªå¯¹è±¡çš„æ—¶å€™ï¼Œå‘ç°éœ€è¦ä½¿ç”¨DataSourceå¯¹è±¡ï¼Œè€Œå®¹å™¨ä¸­åˆšå¥½æœ‰è¿™ä¹ˆä¸€ä¸ªå¯¹è±¡ï¼Œå°±è‡ªåŠ¨åŠ è½½äº†DruidDataSourceå¯¹è±¡ã€‚</li></ul></li><li><p>ä½¿ç”¨MapperScannerConfigureråŠ è½½Daoæ¥å£ï¼Œåˆ›å»ºä»£ç†å¯¹è±¡ä¿å­˜åˆ°IOCå®¹å™¨ä¸­</p><p><img src="/2022/07/27/Spring_day2/1630138916939.png" alt="1630138916939"></p><ul><li>è¿™ä¸ªMapperScannerConfigurerå¯¹è±¡ä¹Ÿæ˜¯MyBatisæä¾›çš„ä¸“ç”¨äºæ•´åˆçš„jaråŒ…ä¸­çš„ç±»ï¼Œç”¨æ¥å¤„ç†åŸå§‹é…ç½®æ–‡ä»¶ä¸­çš„mappersç›¸å…³é…ç½®ï¼ŒåŠ è½½æ•°æ®å±‚çš„Mapperæ¥å£ç±»</li><li>MapperScannerConfigureræœ‰ä¸€ä¸ªæ ¸å¿ƒå±æ€§basePackageï¼Œå°±æ˜¯ç”¨æ¥è®¾ç½®æ‰€æ‰«æçš„åŒ…è·¯å¾„</li></ul></li></ul><h4 id="æ­¥éª¤6-ä¸»é…ç½®ç±»ä¸­å¼•å…¥Mybatisé…ç½®ç±»"><a href="#æ­¥éª¤6-ä¸»é…ç½®ç±»ä¸­å¼•å…¥Mybatisé…ç½®ç±»" class="headerlink" title="æ­¥éª¤6:ä¸»é…ç½®ç±»ä¸­å¼•å…¥Mybatisé…ç½®ç±»"></a>æ­¥éª¤6:ä¸»é…ç½®ç±»ä¸­å¼•å…¥Mybatisé…ç½®ç±»</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ComponentScan(&quot;com.itheima&quot;)</span></span><br><span class="line"><span class="meta">@PropertySource(&quot;classpath:jdbc.properties&quot;)</span></span><br><span class="line"><span class="meta">@Import(&#123;JdbcConfig.class,MybatisConfig.class&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringConfig</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ­¥éª¤7-ç¼–å†™è¿è¡Œç±»"><a href="#æ­¥éª¤7-ç¼–å†™è¿è¡Œç±»" class="headerlink" title="æ­¥éª¤7:ç¼–å†™è¿è¡Œç±»"></a>æ­¥éª¤7:ç¼–å†™è¿è¡Œç±»</h4><p>åœ¨è¿è¡Œç±»ä¸­ï¼Œä»IOCå®¹å™¨ä¸­è·å–Serviceå¯¹è±¡ï¼Œè°ƒç”¨æ–¹æ³•è·å–ç»“æœ</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">App2</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">ApplicationContext</span> <span class="variable">ctx</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AnnotationConfigApplicationContext</span>(SpringConfig.class);</span><br><span class="line"></span><br><span class="line">        <span class="type">AccountService</span> <span class="variable">accountService</span> <span class="operator">=</span> ctx.getBean(AccountService.class);</span><br><span class="line"></span><br><span class="line">        <span class="type">Account</span> <span class="variable">ac</span> <span class="operator">=</span> accountService.findById(<span class="number">1</span>);</span><br><span class="line">        System.out.println(ac);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="æ­¥éª¤8-è¿è¡Œç¨‹åº"><a href="#æ­¥éª¤8-è¿è¡Œç¨‹åº" class="headerlink" title="æ­¥éª¤8:è¿è¡Œç¨‹åº"></a>æ­¥éª¤8:è¿è¡Œç¨‹åº</h4><p><img src="/2022/07/27/Spring_day2/1630139036627.png" alt="1630139036627"></p><p>æ”¯æŒSpringä¸Mybatisçš„æ•´åˆå°±å·²ç»å®Œæˆäº†ï¼Œå…¶ä¸­ä¸»è¦ç”¨åˆ°çš„ä¸¤ä¸ªç±»åˆ†åˆ«æ˜¯:</p><ul><li>SqlSessionFactoryBean</li><li>MapperScannerConfigurer</li></ul><h3 id="6-3-Springæ•´åˆJunit"><a href="#6-3-Springæ•´åˆJunit" class="headerlink" title="6.3 Springæ•´åˆJunit"></a>6.3 Springæ•´åˆJunit</h3><p>æ•´åˆJunitä¸æ•´åˆDruidå’ŒMyBatiså·®å¼‚æ¯”è¾ƒå¤§ï¼Œä¸ºä»€ä¹ˆå‘¢ï¼ŸJunitæ˜¯ä¸€ä¸ªæå•å…ƒæµ‹è¯•ç”¨çš„å·¥å…·ï¼Œå®ƒä¸æ˜¯æˆ‘ä»¬ç¨‹åºçš„ä¸»ä½“ï¼Œä¹Ÿä¸ä¼šå‚åŠ æœ€ç»ˆç¨‹åºçš„è¿è¡Œï¼Œä»ä½œç”¨ä¸Šæ¥è¯´å°±å’Œä¹‹å‰çš„ä¸œè¥¿ä¸ä¸€æ ·ï¼Œå®ƒä¸æ˜¯åšåŠŸèƒ½çš„ï¼Œçœ‹åšæ˜¯ä¸€ä¸ªè¾…åŠ©å·¥å…·å°±å¯ä»¥äº†ã€‚</p><h4 id="6-3-1-ç¯å¢ƒå‡†å¤‡"><a href="#6-3-1-ç¯å¢ƒå‡†å¤‡" class="headerlink" title="6.3.1 ç¯å¢ƒå‡†å¤‡"></a>6.3.1 ç¯å¢ƒå‡†å¤‡</h4><p>è¿™å—ç¯å¢ƒï¼Œå¤§å®¶å¯ä»¥ç›´æ¥ä½¿ç”¨Springä¸Mybatisæ•´åˆçš„ç¯å¢ƒå³å¯ã€‚å½“ç„¶ä¹Ÿå¯ä»¥é‡æ–°åˆ›å»ºä¸€ä¸ªï¼Œå› ä¸ºå†…å®¹æ˜¯ä¸€æ¨¡ä¸€æ ·ï¼Œæ‰€ä»¥æˆ‘ä»¬ç›´æ¥æ¥çœ‹ä¸‹é¡¹ç›®ç»“æ„å³å¯:</p><p><img src="/2022/07/27/Spring_day2/1630139720273.png" alt="1630139720273"></p><h4 id="6-3-2-æ•´åˆJunitæ­¥éª¤"><a href="#6-3-2-æ•´åˆJunitæ­¥éª¤" class="headerlink" title="6.3.2 æ•´åˆJunitæ­¥éª¤"></a>6.3.2 æ•´åˆJunitæ­¥éª¤</h4><p>åœ¨ä¸Šè¿°ç¯å¢ƒçš„åŸºç¡€ä¸Šï¼Œæˆ‘ä»¬æ¥å¯¹Junitè¿›è¡Œæ•´åˆã€‚</p><h5 id="æ­¥éª¤1-å¼•å…¥ä¾èµ–"><a href="#æ­¥éª¤1-å¼•å…¥ä¾èµ–" class="headerlink" title="æ­¥éª¤1:å¼•å…¥ä¾èµ–"></a>æ­¥éª¤1:å¼•å…¥ä¾èµ–</h5><p>pom.xml</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.10.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="æ­¥éª¤2-ç¼–å†™æµ‹è¯•ç±»"><a href="#æ­¥éª¤2-ç¼–å†™æµ‹è¯•ç±»" class="headerlink" title="æ­¥éª¤2:ç¼–å†™æµ‹è¯•ç±»"></a>æ­¥éª¤2:ç¼–å†™æµ‹è¯•ç±»</h5><p>åœ¨test\javaä¸‹åˆ›å»ºä¸€ä¸ªAccountServiceTest,è¿™ä¸ªåå­—ä»»æ„</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//è®¾ç½®ç±»è¿è¡Œå™¨</span></span><br><span class="line"><span class="meta">@RunWith(SpringJUnit4ClassRunner.class)</span></span><br><span class="line"><span class="comment">//è®¾ç½®Springç¯å¢ƒå¯¹åº”çš„é…ç½®ç±»</span></span><br><span class="line"><span class="meta">@ContextConfiguration(classes = &#123;SpringConfiguration.class&#125;)</span> <span class="comment">//åŠ è½½é…ç½®ç±»</span></span><br><span class="line"><span class="comment">//@ContextConfiguration(locations=&#123;&quot;classpath:applicationContext.xml&quot;&#125;)//åŠ è½½é…ç½®æ–‡ä»¶</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AccountServiceTest</span> &#123;</span><br><span class="line">    <span class="comment">//æ”¯æŒè‡ªåŠ¨è£…é…æ³¨å…¥bean</span></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> AccountService accountService;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testFindById</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(accountService.findById(<span class="number">1</span>));</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testFindAll</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(accountService.findAll());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„:</strong></p><ul><li>å•å…ƒæµ‹è¯•ï¼Œå¦‚æœæµ‹è¯•çš„æ˜¯æ³¨è§£é…ç½®ç±»ï¼Œåˆ™ä½¿ç”¨<code>@ContextConfiguration(classes = é…ç½®ç±».class)</code></li><li>å•å…ƒæµ‹è¯•ï¼Œå¦‚æœæµ‹è¯•çš„æ˜¯é…ç½®æ–‡ä»¶ï¼Œåˆ™ä½¿ç”¨<code>@ContextConfiguration(locations=&#123;é…ç½®æ–‡ä»¶å,...&#125;)</code></li><li>Junitè¿è¡Œåæ˜¯åŸºäºSpringç¯å¢ƒè¿è¡Œçš„ï¼Œæ‰€ä»¥Springæä¾›äº†ä¸€ä¸ªä¸“ç”¨çš„ç±»è¿è¡Œå™¨ï¼Œè¿™ä¸ªåŠ¡å¿…è¦è®¾ç½®ï¼Œè¿™ä¸ªç±»è¿è¡Œå™¨å°±åœ¨Springçš„æµ‹è¯•ä¸“ç”¨åŒ…ä¸­æä¾›çš„ï¼Œå¯¼å…¥çš„åæ ‡å°±æ˜¯è¿™ä¸ªä¸œè¥¿<code>SpringJUnit4ClassRunner</code></li><li>ä¸Šé¢ä¸¤ä¸ªé…ç½®éƒ½æ˜¯å›ºå®šæ ¼å¼ï¼Œå½“éœ€è¦æµ‹è¯•å“ªä¸ªbeanæ—¶ï¼Œä½¿ç”¨è‡ªåŠ¨è£…é…åŠ è½½å¯¹åº”çš„å¯¹è±¡ï¼Œä¸‹é¢çš„å·¥ä½œå°±å’Œä»¥å‰åšJunitå•å…ƒæµ‹è¯•å®Œå…¨ä¸€æ ·äº†</li></ul><h4 id="çŸ¥è¯†ç‚¹1ï¼š-RunWith"><a href="#çŸ¥è¯†ç‚¹1ï¼š-RunWith" class="headerlink" title="çŸ¥è¯†ç‚¹1ï¼š@RunWith"></a>çŸ¥è¯†ç‚¹1ï¼š@RunWith</h4><table><thead><tr><th>åç§°</th><th>@RunWith</th></tr></thead><tbody><tr><td>ç±»å‹</td><td>æµ‹è¯•ç±»æ³¨è§£</td></tr><tr><td>ä½ç½®</td><td>æµ‹è¯•ç±»å®šä¹‰ä¸Šæ–¹</td></tr><tr><td>ä½œç”¨</td><td>è®¾ç½®JUnitè¿è¡Œå™¨</td></tr><tr><td>å±æ€§</td><td>valueï¼ˆé»˜è®¤ï¼‰ï¼šè¿è¡Œæ‰€ä½¿ç”¨çš„è¿è¡ŒæœŸ</td></tr></tbody></table><h4 id="çŸ¥è¯†ç‚¹2ï¼š-ContextConfiguration"><a href="#çŸ¥è¯†ç‚¹2ï¼š-ContextConfiguration" class="headerlink" title="çŸ¥è¯†ç‚¹2ï¼š@ContextConfiguration"></a>çŸ¥è¯†ç‚¹2ï¼š@ContextConfiguration</h4><table><thead><tr><th>åç§°</th><th>@ContextConfiguration</th></tr></thead><tbody><tr><td>ç±»å‹</td><td>æµ‹è¯•ç±»æ³¨è§£</td></tr><tr><td>ä½ç½®</td><td>æµ‹è¯•ç±»å®šä¹‰ä¸Šæ–¹</td></tr><tr><td>ä½œç”¨</td><td>è®¾ç½®JUnitåŠ è½½çš„Springæ ¸å¿ƒé…ç½®</td></tr><tr><td>å±æ€§</td><td>classesï¼šæ ¸å¿ƒé…ç½®ç±»ï¼Œå¯ä»¥ä½¿ç”¨æ•°ç»„çš„æ ¼å¼è®¾å®šåŠ è½½å¤šä¸ªé…ç½®ç±»<br>locationsï¼šé…ç½®æ–‡ä»¶ï¼Œå¯ä»¥ä½¿ç”¨æ•°ç»„çš„æ ¼å¼è®¾å®šåŠ è½½å¤šä¸ªé…ç½®æ–‡ä»¶åç§°</td></tr></tbody></table>]]></content>
      
      
      
        <tags>
            
            <tag> Javaå¼€å‘æ¡†æ¶ </tag>
            
            <tag> Spring </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Spring--day01</title>
      <link href="/2022/07/26/Spring_day1/"/>
      <url>/2022/07/26/Spring_day1/</url>
      
        <content type="html"><![CDATA[<p><strong>ä»Šæ—¥ç›®æ ‡</strong></p><blockquote><ul><li>æŒæ¡Springç›¸å…³æ¦‚å¿µ</li><li>å®ŒæˆIOC&#x2F;DIçš„å…¥é—¨æ¡ˆä¾‹ç¼–å†™</li><li>æŒæ¡IOCçš„ç›¸å…³é…ç½®ä¸ä½¿ç”¨</li><li>æŒæ¡DIçš„ç›¸å…³é…ç½®ä¸ä½¿ç”¨</li></ul></blockquote><h2 id="1ï¼Œè¯¾ç¨‹ä»‹ç»"><a href="#1ï¼Œè¯¾ç¨‹ä»‹ç»" class="headerlink" title="1ï¼Œè¯¾ç¨‹ä»‹ç»"></a>1ï¼Œè¯¾ç¨‹ä»‹ç»</h2><p>å¯¹äºä¸€é—¨æ–°æŠ€æœ¯ï¼Œæˆ‘ä»¬éœ€è¦ä»<code>ä¸ºä»€ä¹ˆè¦å­¦</code>ã€<code>å­¦ä»€ä¹ˆ</code>ä»¥åŠ<code>æ€ä¹ˆå­¦</code>è¿™ä¸‰ä¸ªæ–¹å‘å…¥æ‰‹æ¥å­¦ä¹ ã€‚é‚£å¯¹äºSpringæ¥è¯´:</p><h3 id="1-1-ä¸ºä»€ä¹ˆè¦å­¦"><a href="#1-1-ä¸ºä»€ä¹ˆè¦å­¦" class="headerlink" title="1.1 ä¸ºä»€ä¹ˆè¦å­¦?"></a>1.1 ä¸ºä»€ä¹ˆè¦å­¦?</h3><ul><li><p>ä»ä½¿ç”¨å’Œå æœ‰ç‡çœ‹</p><ul><li><p>Springåœ¨å¸‚åœºçš„å æœ‰ç‡ä¸ä½¿ç”¨ç‡é«˜</p></li><li><p>Springåœ¨ä¼ä¸šçš„æŠ€æœ¯é€‰å‹å‘½ä¸­ç‡é«˜</p></li><li><p>æ‰€ä»¥è¯´,SpringæŠ€æœ¯æ˜¯JavaEEå¼€å‘å¿…å¤‡æŠ€èƒ½ï¼Œä¼ä¸šå¼€å‘æŠ€æœ¯é€‰å‹å‘½ä¸­ç‡&gt;90%</p><p><img src="/2022/07/26/Spring_day1/image-20210729171139088.png" alt="image-20210729171139088"></p><p><strong>è¯´æ˜</strong>:å¯¹äºæœªä½¿ç”¨Springçš„é¡¹ç›®ä¸€èˆ¬éƒ½æ˜¯äº›æ¯”è¾ƒè€çš„é¡¹ç›®ï¼Œå¤§å¤šéƒ½å¤„äºç»´æŠ¤é˜¶æ®µã€‚</p></li></ul></li><li><p>ä»ä¸“ä¸šè§’åº¦çœ‹</p><ul><li>éšç€æ—¶ä»£å‘å±•ï¼Œè½¯ä»¶è§„æ¨¡ä¸åŠŸèƒ½éƒ½å‘ˆå‡ ä½•å¼å¢é•¿ï¼Œå¼€å‘éš¾åº¦ä¹Ÿåœ¨ä¸æ–­é€’å¢ï¼Œè¯¥å¦‚ä½•è§£å†³?<ul><li>Springå¯ä»¥<code>ç®€åŒ–å¼€å‘</code>ï¼Œé™ä½ä¼ä¸šçº§å¼€å‘çš„å¤æ‚æ€§ï¼Œä½¿å¼€å‘å˜å¾—æ›´ç®€å•å¿«æ·</li></ul></li><li>éšç€é¡¹ç›®è§„æ¨¡ä¸åŠŸèƒ½çš„å¢é•¿,é‡åˆ°çš„é—®é¢˜å°±ä¼šå¢å¤šï¼Œä¸ºäº†è§£å†³é—®é¢˜ä¼šå¼•å…¥æ›´å¤šçš„æ¡†æ¶ï¼Œè¿™äº›æ¡†æ¶å¦‚ä½•åè°ƒå·¥ä½œ?<ul><li>Springå¯ä»¥<code>æ¡†æ¶æ•´åˆ</code>ï¼Œé«˜æ•ˆæ•´åˆå…¶ä»–æŠ€æœ¯ï¼Œæé«˜ä¼ä¸šçº§åº”ç”¨å¼€å‘ä¸è¿è¡Œæ•ˆç‡</li></ul></li></ul><p>ç»¼ä¸Šæ‰€è¿°ï¼ŒSpringæ˜¯ä¸€æ¬¾éå¸¸ä¼˜ç§€è€Œä¸”åŠŸèƒ½å¼ºå¤§çš„æ¡†æ¶ï¼Œä¸ä»…è¦å­¦ï¼Œè€Œä¸”è¿˜è¦å­¦å¥½ã€‚</p></li></ul><h3 id="1-2-å­¦ä»€ä¹ˆ"><a href="#1-2-å­¦ä»€ä¹ˆ" class="headerlink" title="1.2 å­¦ä»€ä¹ˆ?"></a>1.2 å­¦ä»€ä¹ˆ?</h3><p>ä»ä¸Šé¢çš„ä»‹ç»ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°Springæ¡†æ¶ä¸»è¦çš„ä¼˜åŠ¿æ˜¯åœ¨<code>ç®€åŒ–å¼€å‘</code>å’Œ<code>æ¡†æ¶æ•´åˆ</code>ä¸Šï¼Œè‡³äºå¦‚ä½•å®ç°å°±æ˜¯å’±ä»¬è¦å­¦ä¹ Springæ¡†æ¶çš„ä¸»è¦å†…å®¹:</p><ul><li><p>ç®€åŒ–å¼€å‘: Springæ¡†æ¶ä¸­æä¾›äº†ä¸¤ä¸ªå¤§çš„æ ¸å¿ƒæŠ€æœ¯ï¼Œåˆ†åˆ«æ˜¯:</p><ul><li>IO</li><li>AOP<ul><li>äº‹åŠ¡å¤„ç†</li></ul></li></ul><p> 1.Springçš„ç®€åŒ–æ“ä½œéƒ½æ˜¯åŸºäºè¿™ä¸¤å—å†…å®¹,æ‰€ä»¥è¿™ä¹Ÿæ˜¯Springå­¦ä¹ ä¸­æœ€ä¸ºé‡è¦çš„ä¸¤ä¸ªçŸ¥è¯†ç‚¹ã€‚</p><p> 2.äº‹åŠ¡å¤„ç†å±äºSpringä¸­AOPçš„å…·ä½“åº”ç”¨ï¼Œå¯ä»¥ç®€åŒ–é¡¹ç›®ä¸­çš„äº‹åŠ¡ç®¡ç†ï¼Œä¹Ÿæ˜¯SpringæŠ€æœ¯ä¸­çš„ä¸€å¤§äº®ç‚¹ã€‚</p></li><li><p>æ¡†æ¶æ•´åˆ: Springåœ¨æ¡†æ¶æ•´åˆè¿™å—å·²ç»åšåˆ°äº†æè‡´ï¼Œå®ƒå¯ä»¥æ•´åˆå¸‚é¢ä¸Šå‡ ä¹æ‰€æœ‰ä¸»æµæ¡†æ¶ï¼Œæ¯”å¦‚:</p><ul><li>MyBatis</li><li>MyBatis-plus</li><li>Struts</li><li>Struts2</li><li>Hibernate</li><li>â€¦â€¦</li></ul><p>è¿™äº›æ¡†æ¶ä¸­ï¼Œæˆ‘ä»¬ç›®å‰åªå­¦ä¹ äº†MyBatisï¼Œæ‰€ä»¥åœ¨Springæ¡†æ¶çš„å­¦ä¹ ä¸­ï¼Œä¸»è¦æ˜¯å­¦ä¹ å¦‚ä½•æ•´åˆMyBatisã€‚</p><p>ç»¼ä¸Šæ‰€è¿°ï¼Œå¯¹äºSpringçš„å­¦ä¹ ï¼Œä¸»è¦å­¦ä¹ å››å—å†…å®¹:</p><p>(1)IOCï¼Œ(2)æ•´åˆMybatis(IOCçš„å…·ä½“åº”ç”¨)ï¼Œ(3)AOPï¼Œ(4)å£°æ˜å¼äº‹åŠ¡(AOPçš„å…·ä½“åº”ç”¨)</p></li></ul><h3 id="1-3-æ€ä¹ˆå­¦"><a href="#1-3-æ€ä¹ˆå­¦" class="headerlink" title="1.3 æ€ä¹ˆå­¦?"></a>1.3 æ€ä¹ˆå­¦?</h3><ul><li>å­¦ä¹ Springæ¡†æ¶è®¾è®¡æ€æƒ³<ul><li>å¯¹äºSpringæ¥è¯´ï¼Œå®ƒèƒ½è¿…é€Ÿå é¢†å…¨çƒå¸‚åœºï¼Œä¸åªæ˜¯è¯´å®ƒçš„æŸä¸ªåŠŸèƒ½æ¯”è¾ƒå¼ºå¤§ï¼Œæ›´é‡è¦æ˜¯åœ¨å®ƒçš„<code>æ€æƒ³</code>ä¸Šã€‚</li></ul></li><li>å­¦ä¹ åŸºç¡€æ“ä½œï¼Œæ€è€ƒæ“ä½œä¸æ€æƒ³é—´çš„è”ç³»<ul><li>æŒæ¡äº†Springçš„è®¾è®¡æ€æƒ³ï¼Œç„¶åå°±éœ€è¦é€šè¿‡ä¸€äº›åŸºç¡€æ“ä½œæ¥æ€è€ƒæ“ä½œä¸æ€æƒ³ä¹‹é—´çš„å…³è”å…³ç³»</li></ul></li><li>å­¦ä¹ æ¡ˆä¾‹ï¼Œç†Ÿç»ƒåº”ç”¨æ“ä½œçš„åŒæ—¶ï¼Œä½“ä¼šæ€æƒ³<ul><li>ä¼šäº†åŸºç¡€æ“ä½œåï¼Œå°±éœ€è¦é€šè¿‡å¤§é‡æ¡ˆä¾‹æ¥ç†Ÿç»ƒæŒæ¡æ¡†æ¶çš„å…·ä½“åº”ç”¨ï¼ŒåŠ æ·±å¯¹è®¾è®¡æ€æƒ³çš„ç†è§£ã€‚</li></ul></li></ul><p>ä»‹ç»å®Œ<code>ä¸ºä»€ä¹ˆè¦å­¦</code>ã€<code>å­¦ä»€ä¹ˆ</code>å’Œ<code>æ€ä¹ˆå­¦</code>Springæ¡†æ¶åï¼Œå¤§å®¶éœ€è¦é‡ç‚¹æŒæ¡çš„æ˜¯:</p><ul><li>Springå¾ˆä¼˜ç§€ï¼Œéœ€è¦è®¤çœŸé‡ç‚¹çš„å­¦ä¹ </li><li>Springçš„å­¦ä¹ ä¸»çº¿æ˜¯IOCã€AOPã€å£°æ˜å¼äº‹åŠ¡å’Œæ•´åˆMyBais</li></ul><p>æ¥ä¸‹æ¥ï¼Œå’±ä»¬å°±å¼€å§‹è¿›å…¥Springæ¡†æ¶çš„å­¦ä¹ ã€‚</p><h2 id="2ï¼ŒSpringç›¸å…³æ¦‚å¿µ"><a href="#2ï¼ŒSpringç›¸å…³æ¦‚å¿µ" class="headerlink" title="2ï¼ŒSpringç›¸å…³æ¦‚å¿µ"></a>2ï¼ŒSpringç›¸å…³æ¦‚å¿µ</h2><h3 id="2-1-åˆè¯†Spring"><a href="#2-1-åˆè¯†Spring" class="headerlink" title="2.1 åˆè¯†Spring"></a>2.1 åˆè¯†Spring</h3><p>åœ¨è¿™ä¸€èŠ‚ï¼Œä¸»è¦é€šè¿‡ä»¥ä¸‹ä¸¤ä¸ªç‚¹æ¥äº†è§£ä¸‹Spring:</p><h4 id="2-1-1-Springå®¶æ—"><a href="#2-1-1-Springå®¶æ—" class="headerlink" title="2.1.1 Springå®¶æ—"></a>2.1.1 Springå®¶æ—</h4><ul><li><p>å®˜ç½‘ï¼š<a href="https://spring.ioï¼Œä»å®˜ç½‘æˆ‘ä»¬å¯ä»¥å¤§æ¦‚äº†è§£åˆ°ï¼š">https://spring.ioï¼Œä»å®˜ç½‘æˆ‘ä»¬å¯ä»¥å¤§æ¦‚äº†è§£åˆ°ï¼š</a></p><ul><li>Springèƒ½åšä»€ä¹ˆ:ç”¨ä»¥å¼€å‘webã€å¾®æœåŠ¡ä»¥åŠåˆ†å¸ƒå¼ç³»ç»Ÿç­‰,å…‰è¿™ä¸‰å—å°±å·²ç»å äº†JavaEEå¼€å‘çš„ä¹æˆå¤šã€‚</li><li>Springå¹¶ä¸æ˜¯å•ä¸€çš„ä¸€ä¸ªæŠ€æœ¯ï¼Œè€Œæ˜¯ä¸€ä¸ªå¤§å®¶æ—ï¼Œå¯ä»¥ä»å®˜ç½‘çš„<code>Projects</code>ä¸­æŸ¥çœ‹å…¶åŒ…å«çš„æ‰€æœ‰æŠ€æœ¯ã€‚</li></ul></li><li><p>Springå‘å±•åˆ°ä»Šå¤©å·²ç»å½¢æˆäº†ä¸€ç§å¼€å‘çš„ç”Ÿæ€åœˆ,Springæä¾›äº†è‹¥å¹²ä¸ªé¡¹ç›®,æ¯ä¸ªé¡¹ç›®ç”¨äºå®Œæˆç‰¹å®šçš„åŠŸèƒ½ã€‚</p><ul><li><p>Springå·²å½¢æˆäº†å®Œæ•´çš„ç”Ÿæ€åœˆï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬å¯ä»¥å®Œå…¨ä½¿ç”¨SpringæŠ€æœ¯å®Œæˆæ•´ä¸ªé¡¹ç›®çš„æ„å»ºã€è®¾è®¡ä¸å¼€å‘ã€‚</p></li><li><p>Springæœ‰è‹¥å¹²ä¸ªé¡¹ç›®ï¼Œå¯ä»¥æ ¹æ®éœ€è¦è‡ªè¡Œé€‰æ‹©ï¼ŒæŠŠè¿™äº›ä¸ªé¡¹ç›®ç»„åˆèµ·æ¥ï¼Œèµ·äº†ä¸€ä¸ªåç§°å«&#x3D;&#x3D;å…¨å®¶æ¡¶&#x3D;&#x3D;ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º</p><p><img src="/2022/07/26/Spring_day1/image-20210729171850181.png" alt="image-20210729171850181"></p><p><strong>è¯´æ˜:</strong></p><p>å›¾ä¸­çš„å›¾æ ‡éƒ½ä»£è¡¨ä»€ä¹ˆå«ä¹‰ï¼Œå¯ä»¥è¿›å…¥<code>https://spring.io/projects</code>ç½‘ç«™è¿›è¡Œå¯¹æ¯”æŸ¥çœ‹ã€‚</p><p>è¿™äº›æŠ€æœ¯å¹¶ä¸æ˜¯æ‰€æœ‰çš„éƒ½éœ€è¦å­¦ä¹ ï¼Œé¢å¤–éœ€è¦é‡ç‚¹å…³æ³¨<code>Spring Framework</code>ã€<code>SpringBoot</code>å’Œ<code>SpringCloud</code>:</p><p><img src="/2022/07/26/Spring_day1/1629714811435.png" alt="1629714811435"></p><ul><li>Spring Framework:Springæ¡†æ¶ï¼Œæ˜¯Springä¸­æœ€æ—©æœ€æ ¸å¿ƒçš„æŠ€æœ¯ï¼Œä¹Ÿæ˜¯æ‰€æœ‰å…¶ä»–æŠ€æœ¯çš„åŸºç¡€ã€‚</li><li>SpringBoot:Springæ˜¯æ¥ç®€åŒ–å¼€å‘ï¼Œè€ŒSpringBootæ˜¯æ¥å¸®åŠ©Springåœ¨ç®€åŒ–çš„åŸºç¡€ä¸Šèƒ½æ›´å¿«é€Ÿè¿›è¡Œå¼€å‘ã€‚</li><li>SpringCloud:è¿™ä¸ªæ˜¯ç”¨æ¥åšåˆ†å¸ƒå¼ä¹‹å¾®æœåŠ¡æ¶æ„çš„ç›¸å…³å¼€å‘ã€‚</li></ul><p>é™¤äº†ä¸Šé¢çš„è¿™ä¸‰ä¸ªæŠ€æœ¯å¤–ï¼Œè¿˜æœ‰å¾ˆå¤šå…¶ä»–çš„æŠ€æœ¯ï¼Œä¹Ÿæ¯”è¾ƒæµè¡Œï¼Œå¦‚SpringData,SpringSecurityç­‰ï¼Œè¿™äº›éƒ½å¯ä»¥è¢«åº”ç”¨åœ¨æˆ‘ä»¬çš„é¡¹ç›®ä¸­ã€‚æˆ‘ä»¬ä»Šå¤©æ‰€å­¦ä¹ çš„Springå…¶å®æŒ‡çš„æ˜¯<code>Spring Framework</code>ã€‚</p></li></ul></li></ul><h4 id="2-1-2-äº†è§£Springå‘å±•å²"><a href="#2-1-2-äº†è§£Springå‘å±•å²" class="headerlink" title="2.1.2 äº†è§£Springå‘å±•å²"></a>2.1.2 äº†è§£Springå‘å±•å²</h4><p> æ¥ä¸‹æ¥æˆ‘ä»¬ä»‹ç»ä¸‹Spring Frameworkè¿™ä¸ªæŠ€æœ¯æ˜¯å¦‚ä½•æ¥çš„å‘¢?</p><p><img src="/2022/07/26/Spring_day1/image-20210729171926576.png" alt="image-20210729171926576"></p><p>Springå‘å±•å²</p><ul><li>IBM(ITå…¬å¸-å›½é™…å•†ä¸šæœºå™¨å…¬å¸)åœ¨1997å¹´æå‡ºäº†EJBæ€æƒ³,æ—©æœŸçš„JAVAEEå¼€å‘å¤§éƒ½åŸºäºè¯¥æ€æƒ³ã€‚</li><li>Rod Johnson(Javaå’ŒJ2EEå¼€å‘é¢†åŸŸçš„ä¸“å®¶)åœ¨2002å¹´å‡ºç‰ˆçš„<code>Expert One-on-One J2EE Design and Development</code>,ä¹¦ä¸­æœ‰é˜è¿°åœ¨å¼€å‘ä¸­ä½¿ç”¨EJBè¯¥å¦‚ä½•åšã€‚</li><li>Rod Johnsonåœ¨2004å¹´å‡ºç‰ˆçš„<code>Expert One-on-One J2EE Development without EJB</code>,ä¹¦ä¸­æå‡ºäº†æ¯”EJBæ€æƒ³æ›´é«˜æ•ˆçš„å®ç°æ–¹æ¡ˆï¼Œå¹¶ä¸”åœ¨åŒå¹´å°†æ–¹æ¡ˆè¿›è¡Œäº†å…·ä½“çš„è½åœ°å®ç°ï¼Œè¿™ä¸ªå®ç°å°±æ˜¯Spring1.0ã€‚</li><li>éšç€æ—¶é—´æ¨ç§»ï¼Œç‰ˆæœ¬ä¸æ–­æ›´æ–°ç»´æŠ¤ï¼Œç›®å‰æœ€æ–°çš„æ˜¯Spring5<ul><li>Spring1.0æ˜¯çº¯é…ç½®æ–‡ä»¶å¼€å‘</li><li>Spring2.0ä¸ºäº†ç®€åŒ–å¼€å‘å¼•å…¥äº†æ³¨è§£å¼€å‘ï¼Œæ­¤æ—¶æ˜¯é…ç½®æ–‡ä»¶åŠ æ³¨è§£çš„å¼€å‘æ–¹å¼</li><li>Spring3.0å·²ç»å¯ä»¥è¿›è¡Œçº¯æ³¨è§£å¼€å‘ï¼Œä½¿å¼€å‘æ•ˆç‡å¤§å¹…æå‡ï¼Œæˆ‘ä»¬çš„è¯¾ç¨‹ä¼šä»¥æ³¨è§£å¼€å‘ä¸ºä¸»</li><li>Spring4.0æ ¹æ®JDKçš„ç‰ˆæœ¬å‡çº§å¯¹ä¸ªåˆ«APIè¿›è¡Œäº†è°ƒæ•´</li><li>Spring5.0å·²ç»å…¨é¢æ”¯æŒJDK8ï¼Œç°åœ¨Springæœ€æ–°çš„æ˜¯5ç³»åˆ—æ‰€ä»¥å»ºè®®å¤§å®¶æŠŠJDKå®‰è£…æˆ1.8ç‰ˆ</li></ul></li></ul><p>æœ¬èŠ‚ä»‹ç»äº†Springå®¶æ—ä¸Springçš„å‘å±•å²ï¼Œéœ€è¦å¤§å®¶é‡ç‚¹æŒæ¡çš„æ˜¯:</p><ul><li>ä»Šå¤©æ‰€å­¦çš„Springå…¶å®æ˜¯Springå®¶æ—ä¸­çš„Spring Framework</li><li>Spring Frameworkæ˜¯Springå®¶æ—ä¸­å…¶ä»–æ¡†æ¶çš„åº•å±‚åŸºç¡€ï¼Œå­¦å¥½Springå¯ä»¥ä¸ºå…¶ä»–Springæ¡†æ¶çš„å­¦ä¹ æ‰“å¥½åŸºç¡€</li></ul><h3 id="2-2-Springç³»ç»Ÿæ¶æ„"><a href="#2-2-Springç³»ç»Ÿæ¶æ„" class="headerlink" title="2.2 Springç³»ç»Ÿæ¶æ„"></a>2.2 Springç³»ç»Ÿæ¶æ„</h3><p>å‰é¢æˆ‘ä»¬è¯´springæŒ‡çš„æ˜¯Spring Framework,é‚£ä¹ˆå®ƒå…¶ä¸­éƒ½åŒ…å«å“ªäº›å†…å®¹ä»¥åŠæˆ‘ä»¬è¯¥å¦‚ä½•å­¦ä¹ è¿™ä¸ªæ¡†æ¶?</p><p>é’ˆå¯¹è¿™äº›é—®é¢˜ï¼Œæˆ‘ä»¬å°†ä»<code>ç³»ç»Ÿæ¶æ„å›¾</code>å’Œ<code>è¯¾ç¨‹å­¦ä¹ è·¯çº¿</code>æ¥è¿›è¡Œè¯´æ˜:</p><h4 id="2-2-1-ç³»ç»Ÿæ¶æ„å›¾"><a href="#2-2-1-ç³»ç»Ÿæ¶æ„å›¾" class="headerlink" title="2.2.1 ç³»ç»Ÿæ¶æ„å›¾"></a>2.2.1 ç³»ç»Ÿæ¶æ„å›¾</h4><ul><li><p>Spring Frameworkæ˜¯Springç”Ÿæ€åœˆä¸­æœ€åŸºç¡€çš„é¡¹ç›®ï¼Œæ˜¯å…¶ä»–é¡¹ç›®çš„æ ¹åŸºã€‚</p></li><li><p>Spring Frameworkçš„å‘å±•ä¹Ÿç»å†äº†å¾ˆå¤šç‰ˆæœ¬çš„å˜æ›´ï¼Œæ¯ä¸ªç‰ˆæœ¬éƒ½æœ‰ç›¸åº”çš„è°ƒæ•´</p><p><img src="/2022/07/26/Spring_day1/image-20210729172153796.png" alt="image-20210729172153796"></p></li><li><p>Spring Frameworkçš„5ç‰ˆæœ¬ç›®å‰æ²¡æœ‰æœ€æ–°çš„æ¶æ„å›¾ï¼Œè€Œæœ€æ–°çš„æ˜¯4ç‰ˆæœ¬ï¼Œæ‰€ä»¥æ¥ä¸‹æ¥ä¸»è¦ç ”ç©¶çš„æ˜¯4çš„æ¶æ„å›¾</p><p><img src="/2022/07/26/Spring_day1/1629720945720.png" alt="1629720945720"></p><p>(1)æ ¸å¿ƒå±‚</p><ul><li>Core Container:æ ¸å¿ƒå®¹å™¨ï¼Œè¿™ä¸ªæ¨¡å—æ˜¯Springæœ€æ ¸å¿ƒçš„æ¨¡å—ï¼Œå…¶ä»–çš„éƒ½éœ€è¦ä¾èµ–è¯¥æ¨¡å—</li></ul><p>(2)AOPå±‚</p><ul><li>AOP:é¢å‘åˆ‡é¢ç¼–ç¨‹ï¼Œå®ƒä¾èµ–æ ¸å¿ƒå±‚å®¹å™¨ï¼Œç›®çš„æ˜¯&#x3D;&#x3D;åœ¨ä¸æ”¹å˜åŸæœ‰ä»£ç çš„å‰æä¸‹å¯¹å…¶è¿›è¡ŒåŠŸèƒ½å¢å¼º&#x3D;&#x3D;</li><li>Aspects:AOPæ˜¯æ€æƒ³,Aspectsæ˜¯å¯¹AOPæ€æƒ³çš„å…·ä½“å®ç°</li></ul><p>(3)æ•°æ®å±‚</p><ul><li>Data Access:æ•°æ®è®¿é—®ï¼ŒSpringå…¨å®¶æ¡¶ä¸­æœ‰å¯¹æ•°æ®è®¿é—®çš„å…·ä½“å®ç°æŠ€æœ¯</li><li>Data Integration:æ•°æ®é›†æˆï¼ŒSpringæ”¯æŒæ•´åˆå…¶ä»–çš„æ•°æ®å±‚è§£å†³æ–¹æ¡ˆï¼Œæ¯”å¦‚Mybatis</li><li>Transactions:äº‹åŠ¡ï¼ŒSpringä¸­äº‹åŠ¡ç®¡ç†æ˜¯Spring AOPçš„ä¸€ä¸ªå…·ä½“å®ç°ï¼Œä¹Ÿæ˜¯åæœŸå­¦ä¹ çš„é‡ç‚¹å†…å®¹</li></ul><p>(4)Webå±‚</p><ul><li>è¿™ä¸€å±‚çš„å†…å®¹å°†åœ¨SpringMVCæ¡†æ¶å…·ä½“å­¦ä¹ </li></ul><p>(5)Testå±‚</p><ul><li>Springä¸»è¦æ•´åˆäº†Junitæ¥å®Œæˆå•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•</li></ul></li></ul><h4 id="2-2-2-è¯¾ç¨‹å­¦ä¹ è·¯çº¿"><a href="#2-2-2-è¯¾ç¨‹å­¦ä¹ è·¯çº¿" class="headerlink" title="2.2.2 è¯¾ç¨‹å­¦ä¹ è·¯çº¿"></a>2.2.2 è¯¾ç¨‹å­¦ä¹ è·¯çº¿</h4><p>ä»‹ç»å®ŒSpringçš„ä½“ç³»ç»“æ„åï¼Œä»ä¸­æˆ‘ä»¬å¯ä»¥å¾—å‡ºå¯¹äºSpringçš„å­¦ä¹ ä¸»è¦åŒ…å«å››éƒ¨åˆ†å†…å®¹ï¼Œåˆ†åˆ«æ˜¯:</p><ul><li>Springçš„IOC&#x2F;DI</li><li>Springçš„AOP</li><li>AOPçš„å…·ä½“åº”ç”¨,äº‹åŠ¡ç®¡ç†</li><li>IOC&#x2F;DIçš„å…·ä½“åº”ç”¨,æ•´åˆMybatis</li></ul><p><img src="/2022/07/26/Spring_day1/1629722300996.png" alt="1629722300996"></p><p>å¯¹äºè¿™èŠ‚çš„å†…å®¹ï¼Œå¤§å®¶é‡ç‚¹è¦è®°ä½çš„æ˜¯Springéœ€è¦å­¦ä¹ çš„å››éƒ¨åˆ†å†…å®¹ã€‚æ¥ä¸‹æ¥å°±ä»ç¬¬ä¸€éƒ¨åˆ†å¼€å§‹å­¦èµ·ã€‚</p><h3 id="2-3-Springæ ¸å¿ƒæ¦‚å¿µ"><a href="#2-3-Springæ ¸å¿ƒæ¦‚å¿µ" class="headerlink" title="2.3 Springæ ¸å¿ƒæ¦‚å¿µ"></a>2.3 Springæ ¸å¿ƒæ¦‚å¿µ</h3><p>åœ¨Springæ ¸å¿ƒæ¦‚å¿µè¿™éƒ¨åˆ†å†…å®¹ä¸­ä¸»è¦åŒ…å«<code>IOC/DI</code>ã€<code>IOCå®¹å™¨</code>å’Œ<code>Bean</code>,é‚£ä¹ˆé—®é¢˜å°±æ¥äº†ï¼Œè¿™äº›éƒ½æ˜¯ä»€ä¹ˆå‘¢?</p><h4 id="2-3-1-ç›®å‰é¡¹ç›®ä¸­çš„é—®é¢˜"><a href="#2-3-1-ç›®å‰é¡¹ç›®ä¸­çš„é—®é¢˜" class="headerlink" title="2.3.1 ç›®å‰é¡¹ç›®ä¸­çš„é—®é¢˜"></a>2.3.1 ç›®å‰é¡¹ç›®ä¸­çš„é—®é¢˜</h4><p>è¦æƒ³è§£ç­”è¿™ä¸ªé—®é¢˜ï¼Œå°±éœ€è¦å…ˆåˆ†æä¸‹ç›®å‰å’±ä»¬ä»£ç åœ¨ç¼–å†™è¿‡ç¨‹ä¸­é‡åˆ°çš„é—®é¢˜:</p><p><img src="/2022/07/26/Spring_day1/1629723232339.png" alt="1629723232339"></p><p>(1)ä¸šåŠ¡å±‚éœ€è¦è°ƒç”¨æ•°æ®å±‚çš„æ–¹æ³•ï¼Œå°±éœ€è¦åœ¨ä¸šåŠ¡å±‚newæ•°æ®å±‚çš„å¯¹è±¡</p><p>(2)å¦‚æœæ•°æ®å±‚çš„å®ç°ç±»å‘ç”Ÿå˜åŒ–ï¼Œé‚£ä¹ˆä¸šåŠ¡å±‚çš„ä»£ç ä¹Ÿéœ€è¦è·Ÿç€æ”¹å˜ï¼Œå‘ç”Ÿå˜æ›´åï¼Œéƒ½éœ€è¦è¿›è¡Œç¼–è¯‘æ‰“åŒ…å’Œé‡éƒ¨ç½²</p><p>(3)æ‰€ä»¥ï¼Œç°åœ¨ä»£ç åœ¨ç¼–å†™çš„è¿‡ç¨‹ä¸­å­˜åœ¨çš„é—®é¢˜æ˜¯ï¼šè€¦åˆåº¦åé«˜</p><p>é’ˆå¯¹è¿™ä¸ªé—®é¢˜ï¼Œè¯¥å¦‚ä½•è§£å†³å‘¢?</p><p><img src="/2022/07/26/Spring_day1/1629724206002.png" alt="1629724206002"></p><p>æˆ‘ä»¬å°±æƒ³ï¼Œå¦‚æœèƒ½æŠŠæ¡†ä¸­çš„å†…å®¹ç»™å»æ‰ï¼Œä¸å°±å¯ä»¥é™ä½ä¾èµ–äº†ä¹ˆï¼Œä½†æ˜¯åˆä¼šå¼•å…¥æ–°çš„é—®é¢˜ï¼Œå»æ‰ä»¥åç¨‹åºèƒ½è¿è¡Œä¹ˆ?</p><p>ç­”æ¡ˆè‚¯å®šæ˜¯ä¸è¡Œï¼Œå› ä¸ºbookDaoæ²¡æœ‰èµ‹å€¼ä¸ºNullï¼Œå¼ºè¡Œè¿è¡Œå°±ä¼šå‡º<code>ç©ºæŒ‡é’ˆå¼‚å¸¸</code>ã€‚</p><p>æ‰€ä»¥ç°åœ¨çš„é—®é¢˜å°±æ˜¯ï¼Œä¸šåŠ¡å±‚ä¸æƒ³newå¯¹è±¡ï¼Œè¿è¡Œçš„æ—¶å€™åˆéœ€è¦è¿™ä¸ªå¯¹è±¡ï¼Œè¯¥å’‹åŠå‘¢?</p><p>é’ˆå¯¹è¿™ä¸ªé—®é¢˜ï¼ŒSpringå°±æå‡ºäº†ä¸€ä¸ªè§£å†³æ–¹æ¡ˆ:</p><ul><li>ä½¿ç”¨å¯¹è±¡æ—¶ï¼Œåœ¨ç¨‹åºä¸­ä¸è¦ä¸»åŠ¨ä½¿ç”¨newäº§ç”Ÿå¯¹è±¡ï¼Œè½¬æ¢ä¸ºç”±<code>å¤–éƒ¨</code>æä¾›å¯¹è±¡</li></ul><p>è¿™ç§å®ç°æ€å°±æ˜¯Springçš„ä¸€ä¸ªæ ¸å¿ƒæ¦‚å¿µ</p><h4 id="2-3-2-IOCã€IOCå®¹å™¨ã€Beanã€DI"><a href="#2-3-2-IOCã€IOCå®¹å™¨ã€Beanã€DI" class="headerlink" title="2.3.2 IOCã€IOCå®¹å™¨ã€Beanã€DI"></a>2.3.2 IOCã€IOCå®¹å™¨ã€Beanã€DI</h4><ol><li>IOCï¼ˆInversion of Controlï¼‰æ§åˆ¶åè½¬</li></ol><p>(1)ä»€ä¹ˆæ˜¯æ§åˆ¶åè½¬å‘¢ï¼Ÿ</p><ul><li>ä½¿ç”¨å¯¹è±¡æ—¶ï¼Œç”±ä¸»åŠ¨newäº§ç”Ÿå¯¹è±¡è½¬æ¢ä¸ºç”±å¤–éƒ¨æä¾›å¯¹è±¡ï¼Œæ­¤è¿‡ç¨‹ä¸­å¯¹è±¡åˆ›å»ºæ§åˆ¶æƒç”±ç¨‹åºè½¬ç§»åˆ°å¤–éƒ¨ï¼Œæ­¤æ€æƒ³ç§°ä¸ºæ§åˆ¶åè½¬ã€‚<ul><li>ä¸šåŠ¡å±‚è¦ç”¨æ•°æ®å±‚çš„ç±»å¯¹è±¡ï¼Œä»¥å‰æ˜¯è‡ªå·±<code>new</code>çš„</li><li>ç°åœ¨è‡ªå·±ä¸newäº†ï¼Œäº¤ç»™<code>åˆ«äºº[å¤–éƒ¨]</code>æ¥åˆ›å»ºå¯¹è±¡</li><li><code>åˆ«äºº[å¤–éƒ¨]</code>å°±åè½¬æ§åˆ¶äº†æ•°æ®å±‚å¯¹è±¡çš„åˆ›å»ºæƒ</li><li>è¿™ç§æ€æƒ³å°±æ˜¯æ§åˆ¶åè½¬</li><li>åˆ«äºº[å¤–éƒ¨]æŒ‡å®šæ˜¯ä»€ä¹ˆå‘¢?ç»§ç»­å¾€ä¸‹å­¦</li></ul></li></ul><p>(2)Springå’ŒIOCä¹‹é—´çš„å…³ç³»æ˜¯ä»€ä¹ˆå‘¢?</p><ul><li>SpringæŠ€æœ¯å¯¹IOCæ€æƒ³è¿›è¡Œäº†å®ç°</li><li>Springæä¾›äº†ä¸€ä¸ªå®¹å™¨ï¼Œç§°ä¸º<code>IOCå®¹å™¨</code>ï¼Œç”¨æ¥å……å½“IOCæ€æƒ³ä¸­çš„â€å¤–éƒ¨â€</li><li>IOCæ€æƒ³ä¸­çš„<code>åˆ«äºº[å¤–éƒ¨]</code>æŒ‡çš„å°±æ˜¯Springçš„IOCå®¹å™¨</li></ul><p>(3)IOCå®¹å™¨çš„ä½œç”¨ä»¥åŠå†…éƒ¨å­˜æ”¾çš„æ˜¯ä»€ä¹ˆ?</p><ul><li>IOCå®¹å™¨è´Ÿè´£å¯¹è±¡çš„åˆ›å»ºã€åˆå§‹åŒ–ç­‰ä¸€ç³»åˆ—å·¥ä½œï¼Œå…¶ä¸­åŒ…å«äº†æ•°æ®å±‚å’Œä¸šåŠ¡å±‚çš„ç±»å¯¹è±¡</li><li>è¢«åˆ›å»ºæˆ–è¢«ç®¡ç†çš„å¯¹è±¡åœ¨IOCå®¹å™¨ä¸­ç»Ÿç§°ä¸ºBean</li><li>IOCå®¹å™¨ä¸­æ”¾çš„å°±æ˜¯ä¸€ä¸ªä¸ªçš„Beanå¯¹è±¡</li></ul><p>(4)å½“IOCå®¹å™¨ä¸­åˆ›å»ºå¥½serviceå’Œdaoå¯¹è±¡åï¼Œç¨‹åºèƒ½æ­£ç¡®æ‰§è¡Œä¹ˆ?</p><ul><li>ä¸è¡Œï¼Œå› ä¸ºserviceè¿è¡Œéœ€è¦ä¾èµ–daoå¯¹è±¡</li><li>IOCå®¹å™¨ä¸­è™½ç„¶æœ‰serviceå’Œdaoå¯¹è±¡</li><li>ä½†æ˜¯serviceå¯¹è±¡å’Œdaoå¯¹è±¡æ²¡æœ‰ä»»ä½•å…³ç³»</li><li>éœ€è¦æŠŠdaoå¯¹è±¡äº¤ç»™service,ä¹Ÿå°±æ˜¯è¯´è¦ç»‘å®šserviceå’Œdaoå¯¹è±¡ä¹‹é—´çš„å…³ç³»</li></ul><p>åƒè¿™ç§åœ¨å®¹å™¨ä¸­å»ºç«‹å¯¹è±¡ä¸å¯¹è±¡ä¹‹é—´çš„ç»‘å®šå…³ç³»å°±è¦ç”¨åˆ°DI:</p><ol start="2"><li>DIï¼ˆDependency Injectionï¼‰ä¾èµ–æ³¨å…¥</li></ol><p><img src="/2022/07/26/Spring_day1/1629735078619.png" alt="1629735078619"></p><p>(1)ä»€ä¹ˆæ˜¯ä¾èµ–æ³¨å…¥å‘¢?</p><ul><li>åœ¨å®¹å™¨ä¸­å»ºç«‹beanä¸beanä¹‹é—´çš„ä¾èµ–å…³ç³»çš„æ•´ä¸ªè¿‡ç¨‹ï¼Œç§°ä¸ºä¾èµ–æ³¨å…¥<ul><li>ä¸šåŠ¡å±‚è¦ç”¨æ•°æ®å±‚çš„ç±»å¯¹è±¡ï¼Œä»¥å‰æ˜¯è‡ªå·±<code>new</code>çš„</li><li>ç°åœ¨è‡ªå·±ä¸newäº†ï¼Œé <code>åˆ«äºº[å¤–éƒ¨å…¶å®æŒ‡çš„å°±æ˜¯IOCå®¹å™¨]</code>æ¥ç»™æ³¨å…¥è¿›æ¥</li><li>è¿™ç§æ€æƒ³å°±æ˜¯ä¾èµ–æ³¨å…¥</li></ul></li></ul><p>(2)IOCå®¹å™¨ä¸­å“ªäº›beanä¹‹é—´è¦å»ºç«‹ä¾èµ–å…³ç³»å‘¢?</p><ul><li>è¿™ä¸ªéœ€è¦ç¨‹åºå‘˜æ ¹æ®ä¸šåŠ¡éœ€æ±‚æå‰å»ºç«‹å¥½å…³ç³»ï¼Œå¦‚ä¸šåŠ¡å±‚éœ€è¦ä¾èµ–æ•°æ®å±‚ï¼Œserviceå°±è¦å’Œdaoå»ºç«‹ä¾èµ–å…³ç³»</li></ul><p>ä»‹ç»å®ŒSpringçš„IOCå’ŒDIçš„æ¦‚å¿µåï¼Œæˆ‘ä»¬ä¼šå‘ç°è¿™ä¸¤ä¸ªæ¦‚å¿µçš„æœ€ç»ˆç›®æ ‡å°±æ˜¯ï¼š<code>å……åˆ†è§£è€¦</code>ï¼Œå…·ä½“å®ç°é :</p><ul><li>ä½¿ç”¨IOCå®¹å™¨ç®¡ç†beanï¼ˆIOC)</li><li>åœ¨IOCå®¹å™¨å†…å°†æœ‰ä¾èµ–å…³ç³»çš„beanè¿›è¡Œå…³ç³»ç»‘å®šï¼ˆDIï¼‰</li><li>æœ€ç»ˆç»“æœä¸º:ä½¿ç”¨å¯¹è±¡æ—¶ä¸ä»…å¯ä»¥ç›´æ¥ä»IOCå®¹å™¨ä¸­è·å–ï¼Œå¹¶ä¸”è·å–åˆ°çš„beanå·²ç»ç»‘å®šäº†æ‰€æœ‰çš„ä¾èµ–å…³ç³».</li></ul><h4 id="2-3-3-æ ¸å¿ƒæ¦‚å¿µå°ç»“"><a href="#2-3-3-æ ¸å¿ƒæ¦‚å¿µå°ç»“" class="headerlink" title="2.3.3 æ ¸å¿ƒæ¦‚å¿µå°ç»“"></a>2.3.3 æ ¸å¿ƒæ¦‚å¿µå°ç»“</h4><p>è¿™èŠ‚æ¯”è¾ƒé‡è¦ï¼Œé‡ç‚¹è¦ç†è§£<code>ä»€ä¹ˆæ˜¯IOC/DIæ€æƒ³</code>ã€<code>ä»€ä¹ˆæ˜¯IOCå®¹å™¨</code>å’Œ<code>ä»€ä¹ˆæ˜¯Bean</code>ï¼š</p><p>(1)ä»€ä¹ˆIOC&#x2F;DIæ€æƒ³?</p><ul><li>IOC:æ§åˆ¶åè½¬ï¼Œæ§åˆ¶åè½¬çš„æ˜¯å¯¹è±¡çš„åˆ›å»ºæƒ</li><li>DI:ä¾èµ–æ³¨å…¥ï¼Œç»‘å®šå¯¹è±¡ä¸å¯¹è±¡ä¹‹é—´çš„ä¾èµ–å…³ç³»</li></ul><p>(2)ä»€ä¹ˆæ˜¯IOCå®¹å™¨?</p><p>Springåˆ›å»ºäº†ä¸€ä¸ªå®¹å™¨ç”¨æ¥å­˜æ”¾æ‰€åˆ›å»ºçš„å¯¹è±¡ï¼Œè¿™ä¸ªå®¹å™¨å°±å«IOCå®¹å™¨</p><p>(3)ä»€ä¹ˆæ˜¯Bean?</p><p>å®¹å™¨ä¸­æ‰€å­˜æ”¾çš„ä¸€ä¸ªä¸ªå¯¹è±¡å°±å«Beanæˆ–Beanå¯¹è±¡</p><h2 id="3ï¼Œå…¥é—¨æ¡ˆä¾‹"><a href="#3ï¼Œå…¥é—¨æ¡ˆä¾‹" class="headerlink" title="3ï¼Œå…¥é—¨æ¡ˆä¾‹"></a>3ï¼Œå…¥é—¨æ¡ˆä¾‹</h2><p>ä»‹ç»å®ŒSpringçš„æ ¸å¿ƒæ¦‚å¿µåï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å¾—æ€è€ƒä¸€ä¸ªé—®é¢˜å°±æ˜¯ï¼ŒSpringåˆ°åº•æ˜¯å¦‚ä½•æ¥å®ç°IOCå’ŒDIçš„ï¼Œé‚£æ¥ä¸‹æ¥å°±é€šè¿‡ä¸€äº›ç®€å•çš„å…¥é—¨æ¡ˆä¾‹ï¼Œæ¥æ¼”ç¤ºä¸‹å…·ä½“å®ç°è¿‡ç¨‹:</p><h3 id="3-1-IOCå…¥é—¨æ¡ˆä¾‹"><a href="#3-1-IOCå…¥é—¨æ¡ˆä¾‹" class="headerlink" title="3.1 IOCå…¥é—¨æ¡ˆä¾‹"></a>3.1 IOCå…¥é—¨æ¡ˆä¾‹</h3><p>å¯¹äºå…¥é—¨æ¡ˆä¾‹ï¼Œæˆ‘ä»¬å¾—å…ˆ<code>åˆ†ææ€è·¯</code>ç„¶åå†<code>ä»£ç å®ç°</code>ï¼Œ</p><h4 id="3-1-1-å…¥é—¨æ¡ˆä¾‹æ€è·¯åˆ†æ"><a href="#3-1-1-å…¥é—¨æ¡ˆä¾‹æ€è·¯åˆ†æ" class="headerlink" title="3.1.1 å…¥é—¨æ¡ˆä¾‹æ€è·¯åˆ†æ"></a>3.1.1 å…¥é—¨æ¡ˆä¾‹æ€è·¯åˆ†æ</h4><p>(1)Springæ˜¯ä½¿ç”¨å®¹å™¨æ¥ç®¡ç†beanå¯¹è±¡çš„ï¼Œé‚£ä¹ˆç®¡ä»€ä¹ˆ? </p><ul><li>ä¸»è¦ç®¡ç†é¡¹ç›®ä¸­æ‰€ä½¿ç”¨åˆ°çš„ç±»å¯¹è±¡ï¼Œæ¯”å¦‚(Serviceå’ŒDao)</li></ul><p>(2)å¦‚ä½•å°†è¢«ç®¡ç†çš„å¯¹è±¡å‘ŠçŸ¥IOCå®¹å™¨?</p><ul><li>ä½¿ç”¨é…ç½®æ–‡ä»¶</li></ul><p>(3)è¢«ç®¡ç†çš„å¯¹è±¡äº¤ç»™IOCå®¹å™¨ï¼Œè¦æƒ³ä»å®¹å™¨ä¸­è·å–å¯¹è±¡ï¼Œå°±å…ˆå¾—æ€è€ƒå¦‚ä½•è·å–åˆ°IOCå®¹å™¨?</p><ul><li>Springæ¡†æ¶æä¾›ç›¸åº”çš„æ¥å£</li></ul><p>(4)IOCå®¹å™¨å¾—åˆ°åï¼Œå¦‚ä½•ä»å®¹å™¨ä¸­è·å–bean?</p><ul><li>è°ƒç”¨Springæ¡†æ¶æä¾›å¯¹åº”æ¥å£ä¸­çš„æ–¹æ³•</li></ul><p>(5)ä½¿ç”¨Springå¯¼å…¥å“ªäº›åæ ‡?</p><ul><li>ç”¨åˆ«äººçš„ä¸œè¥¿ï¼Œå°±éœ€è¦åœ¨pom.xmlæ·»åŠ å¯¹åº”çš„ä¾èµ–</li></ul><h4 id="3-1-2-å…¥é—¨æ¡ˆä¾‹ä»£ç å®ç°"><a href="#3-1-2-å…¥é—¨æ¡ˆä¾‹ä»£ç å®ç°" class="headerlink" title="3.1.2 å…¥é—¨æ¡ˆä¾‹ä»£ç å®ç°"></a>3.1.2 å…¥é—¨æ¡ˆä¾‹ä»£ç å®ç°</h4><blockquote><p>éœ€æ±‚åˆ†æ:å°†BookServiceImplå’ŒBookDaoImpläº¤ç»™Springç®¡ç†ï¼Œå¹¶ä»å®¹å™¨ä¸­è·å–å¯¹åº”çš„beanå¯¹è±¡è¿›è¡Œæ–¹æ³•è°ƒç”¨ã€‚</p><p>1.åˆ›å»ºMavençš„javaé¡¹ç›®</p><p>2.pom.xmlæ·»åŠ Springçš„ä¾èµ–jaråŒ…</p><p>3.åˆ›å»ºBookService,BookServiceImplï¼ŒBookDaoå’ŒBookDaoImplå››ä¸ªç±»</p><p>4.resourcesä¸‹æ·»åŠ springé…ç½®æ–‡ä»¶ï¼Œå¹¶å®Œæˆbeançš„é…ç½®</p><p>5.ä½¿ç”¨Springæä¾›çš„æ¥å£å®ŒæˆIOCå®¹å™¨çš„åˆ›å»º</p><p>6.ä»å®¹å™¨ä¸­è·å–å¯¹è±¡è¿›è¡Œæ–¹æ³•è°ƒç”¨</p></blockquote><h5 id="æ­¥éª¤1-åˆ›å»ºMavené¡¹ç›®"><a href="#æ­¥éª¤1-åˆ›å»ºMavené¡¹ç›®" class="headerlink" title="æ­¥éª¤1:åˆ›å»ºMavené¡¹ç›®"></a>æ­¥éª¤1:åˆ›å»ºMavené¡¹ç›®</h5><p><img src="/2022/07/26/Spring_day1/1629734010072.png" alt="1629734010072"></p><h5 id="æ­¥éª¤2-æ·»åŠ Springçš„ä¾èµ–jaråŒ…"><a href="#æ­¥éª¤2-æ·»åŠ Springçš„ä¾èµ–jaråŒ…" class="headerlink" title="æ­¥éª¤2:æ·»åŠ Springçš„ä¾èµ–jaråŒ…"></a>æ­¥éª¤2:æ·»åŠ Springçš„ä¾èµ–jaråŒ…</h5><p>pom.xml</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.10.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!--junit--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="æ­¥éª¤3-æ·»åŠ æ¡ˆä¾‹ä¸­éœ€è¦çš„ç±»"><a href="#æ­¥éª¤3-æ·»åŠ æ¡ˆä¾‹ä¸­éœ€è¦çš„ç±»" class="headerlink" title="æ­¥éª¤3:æ·»åŠ æ¡ˆä¾‹ä¸­éœ€è¦çš„ç±»"></a>æ­¥éª¤3:æ·»åŠ æ¡ˆä¾‹ä¸­éœ€è¦çš„ç±»</h5><p>åˆ›å»ºBookServiceï¼ŒBookServiceImplï¼ŒBookDaoå’ŒBookDaoImplå››ä¸ªç±»</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">BookDao</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookDaoImpl</span> <span class="keyword">implements</span> <span class="title class_">BookDao</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;book dao save ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">BookService</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">BookService</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">BookDao</span> <span class="variable">bookDao</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BookDaoImpl</span>();</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;book service save ...&quot;</span>);</span><br><span class="line">        bookDao.save();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="æ­¥éª¤4-æ·»åŠ springé…ç½®æ–‡ä»¶"><a href="#æ­¥éª¤4-æ·»åŠ springé…ç½®æ–‡ä»¶" class="headerlink" title="æ­¥éª¤4:æ·»åŠ springé…ç½®æ–‡ä»¶"></a>æ­¥éª¤4:æ·»åŠ springé…ç½®æ–‡ä»¶</h5><p>resourcesä¸‹æ·»åŠ springé…ç½®æ–‡ä»¶applicationContext.xmlï¼Œå¹¶å®Œæˆbeançš„é…ç½®</p><p><img src="/2022/07/26/Spring_day1/1629734336440.png" alt="1629734336440"></p><h5 id="æ­¥éª¤5-åœ¨é…ç½®æ–‡ä»¶ä¸­å®Œæˆbeançš„é…ç½®"><a href="#æ­¥éª¤5-åœ¨é…ç½®æ–‡ä»¶ä¸­å®Œæˆbeançš„é…ç½®" class="headerlink" title="æ­¥éª¤5:åœ¨é…ç½®æ–‡ä»¶ä¸­å®Œæˆbeançš„é…ç½®"></a>æ­¥éª¤5:åœ¨é…ç½®æ–‡ä»¶ä¸­å®Œæˆbeançš„é…ç½®</h5><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line"> </span><br><span class="line">    <span class="comment">&lt;!--beanæ ‡ç­¾æ ‡ç¤ºé…ç½®bean</span></span><br><span class="line"><span class="comment">    idå±æ€§æ ‡ç¤ºç»™beanèµ·åå­—</span></span><br><span class="line"><span class="comment">    classå±æ€§è¡¨ç¤ºç»™beanå®šä¹‰ç±»å‹</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;bookDao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.dao.impl.BookDaoImpl&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;bookService&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.service.impl.BookServiceImpl&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„äº‹é¡¹ï¼šbeanå®šä¹‰æ—¶idå±æ€§åœ¨åŒä¸€ä¸ªä¸Šä¸‹æ–‡ä¸­(é…ç½®æ–‡ä»¶)ä¸èƒ½é‡å¤&#x3D;&#x3D;</strong></p><h5 id="æ­¥éª¤6-è·å–IOCå®¹å™¨"><a href="#æ­¥éª¤6-è·å–IOCå®¹å™¨" class="headerlink" title="æ­¥éª¤6:è·å–IOCå®¹å™¨"></a>æ­¥éª¤6:è·å–IOCå®¹å™¨</h5><p>ä½¿ç”¨Springæä¾›çš„æ¥å£å®ŒæˆIOCå®¹å™¨çš„åˆ›å»ºï¼Œåˆ›å»ºAppç±»ï¼Œç¼–å†™mainæ–¹æ³•</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">App</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//è·å–IOCå®¹å™¨</span></span><br><span class="line"><span class="type">ApplicationContext</span> <span class="variable">ctx</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;applicationContext.xml&quot;</span>); </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="æ­¥éª¤7-ä»å®¹å™¨ä¸­è·å–å¯¹è±¡è¿›è¡Œæ–¹æ³•è°ƒç”¨"><a href="#æ­¥éª¤7-ä»å®¹å™¨ä¸­è·å–å¯¹è±¡è¿›è¡Œæ–¹æ³•è°ƒç”¨" class="headerlink" title="æ­¥éª¤7:ä»å®¹å™¨ä¸­è·å–å¯¹è±¡è¿›è¡Œæ–¹æ³•è°ƒç”¨"></a>æ­¥éª¤7:ä»å®¹å™¨ä¸­è·å–å¯¹è±¡è¿›è¡Œæ–¹æ³•è°ƒç”¨</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">App</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//è·å–IOCå®¹å™¨</span></span><br><span class="line"><span class="type">ApplicationContext</span> <span class="variable">ctx</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;applicationContext.xml&quot;</span>); </span><br><span class="line"><span class="comment">//        BookDao bookDao = (BookDao) ctx.getBean(&quot;bookDao&quot;);</span></span><br><span class="line"><span class="comment">//        bookDao.save();</span></span><br><span class="line">        <span class="type">BookService</span> <span class="variable">bookService</span> <span class="operator">=</span> (BookService) ctx.getBean(<span class="string">&quot;bookService&quot;</span>);</span><br><span class="line">        bookService.save();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="æ­¥éª¤8-è¿è¡Œç¨‹åº"><a href="#æ­¥éª¤8-è¿è¡Œç¨‹åº" class="headerlink" title="æ­¥éª¤8:è¿è¡Œç¨‹åº"></a>æ­¥éª¤8:è¿è¡Œç¨‹åº</h5><p>æµ‹è¯•ç»“æœä¸ºï¼š</p><p><img src="/2022/07/26/Spring_day1/image-20210729184337603.png" alt="image-20210729184337603"></p><p>Springçš„IOCå…¥é—¨æ¡ˆä¾‹å·²ç»å®Œæˆï¼Œä½†æ˜¯åœ¨<code>BookServiceImpl</code>çš„ç±»ä¸­ä¾ç„¶å­˜åœ¨<code>BookDaoImpl</code>å¯¹è±¡çš„newæ“ä½œï¼Œå®ƒä»¬ä¹‹é—´çš„è€¦åˆåº¦è¿˜æ˜¯æ¯”è¾ƒé«˜ï¼Œè¿™å—è¯¥å¦‚ä½•è§£å†³ï¼Œå°±éœ€è¦ç”¨åˆ°ä¸‹é¢çš„<code>DI:ä¾èµ–æ³¨å…¥</code>ã€‚</p><h3 id="3-2-DIå…¥é—¨æ¡ˆä¾‹"><a href="#3-2-DIå…¥é—¨æ¡ˆä¾‹" class="headerlink" title="3.2 DIå…¥é—¨æ¡ˆä¾‹"></a>3.2 DIå…¥é—¨æ¡ˆä¾‹</h3><p>å¯¹äºDIçš„å…¥é—¨æ¡ˆä¾‹ï¼Œæˆ‘ä»¬ä¾ç„¶å…ˆ<code>åˆ†ææ€è·¯</code>ç„¶åå†<code>ä»£ç å®ç°</code>ï¼Œ</p><h4 id="3-2-1-å…¥é—¨æ¡ˆä¾‹æ€è·¯åˆ†æ"><a href="#3-2-1-å…¥é—¨æ¡ˆä¾‹æ€è·¯åˆ†æ" class="headerlink" title="3.2.1 å…¥é—¨æ¡ˆä¾‹æ€è·¯åˆ†æ"></a>3.2.1 å…¥é—¨æ¡ˆä¾‹æ€è·¯åˆ†æ</h4><p>(1)è¦æƒ³å®ç°ä¾èµ–æ³¨å…¥ï¼Œå¿…é¡»è¦åŸºäºIOCç®¡ç†Bean</p><ul><li>DIçš„å…¥é—¨æ¡ˆä¾‹è¦ä¾èµ–äºå‰é¢IOCçš„å…¥é—¨æ¡ˆä¾‹</li></ul><p>(2)Serviceä¸­ä½¿ç”¨newå½¢å¼åˆ›å»ºçš„Daoå¯¹è±¡æ˜¯å¦ä¿ç•™?</p><ul><li>éœ€è¦åˆ é™¤æ‰ï¼Œæœ€ç»ˆè¦ä½¿ç”¨IOCå®¹å™¨ä¸­çš„beanå¯¹è±¡</li></ul><p>(3)Serviceä¸­éœ€è¦çš„Daoå¯¹è±¡å¦‚ä½•è¿›å…¥åˆ°Serviceä¸­?</p><ul><li>åœ¨Serviceä¸­æä¾›æ–¹æ³•ï¼Œè®©Springçš„IOCå®¹å™¨å¯ä»¥é€šè¿‡è¯¥æ–¹æ³•ä¼ å…¥beanå¯¹è±¡</li></ul><p>(4)Serviceä¸Daoé—´çš„å…³ç³»å¦‚ä½•æè¿°?</p><ul><li>ä½¿ç”¨é…ç½®æ–‡ä»¶</li></ul><h4 id="3-2-2-å…¥é—¨æ¡ˆä¾‹ä»£ç å®ç°"><a href="#3-2-2-å…¥é—¨æ¡ˆä¾‹ä»£ç å®ç°" class="headerlink" title="3.2.2 å…¥é—¨æ¡ˆä¾‹ä»£ç å®ç°"></a>3.2.2 å…¥é—¨æ¡ˆä¾‹ä»£ç å®ç°</h4><blockquote><p>éœ€æ±‚:åŸºäºIOCå…¥é—¨æ¡ˆä¾‹ï¼Œåœ¨BookServiceImplç±»ä¸­åˆ é™¤newå¯¹è±¡çš„æ–¹å¼ï¼Œä½¿ç”¨Springçš„DIå®ŒæˆDaoå±‚çš„æ³¨å…¥</p><p>1.åˆ é™¤ä¸šåŠ¡å±‚ä¸­ä½¿ç”¨newçš„æ–¹å¼åˆ›å»ºçš„daoå¯¹è±¡</p><p>2.åœ¨ä¸šåŠ¡å±‚æä¾›BookDaoçš„setteræ–¹æ³•</p><p>3.åœ¨é…ç½®æ–‡ä»¶ä¸­æ·»åŠ ä¾èµ–æ³¨å…¥çš„é…ç½®</p><p>4.è¿è¡Œç¨‹åºè°ƒç”¨æ–¹æ³•</p></blockquote><h5 id="æ­¥éª¤1-å»é™¤ä»£ç ä¸­çš„new"><a href="#æ­¥éª¤1-å»é™¤ä»£ç ä¸­çš„new" class="headerlink" title="æ­¥éª¤1: å»é™¤ä»£ç ä¸­çš„new"></a>æ­¥éª¤1: å»é™¤ä»£ç ä¸­çš„new</h5><p>åœ¨BookServiceImplç±»ä¸­ï¼Œåˆ é™¤ä¸šåŠ¡å±‚ä¸­ä½¿ç”¨newçš„æ–¹å¼åˆ›å»ºçš„daoå¯¹è±¡</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">BookService</span> &#123;</span><br><span class="line">    <span class="comment">//åˆ é™¤ä¸šåŠ¡å±‚ä¸­ä½¿ç”¨newçš„æ–¹å¼åˆ›å»ºçš„daoå¯¹è±¡</span></span><br><span class="line">    <span class="keyword">private</span> BookDao bookDao;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;book service save ...&quot;</span>);</span><br><span class="line">        bookDao.save();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="æ­¥éª¤2-ä¸ºå±æ€§æä¾›setteræ–¹æ³•"><a href="#æ­¥éª¤2-ä¸ºå±æ€§æä¾›setteræ–¹æ³•" class="headerlink" title="æ­¥éª¤2:ä¸ºå±æ€§æä¾›setteræ–¹æ³•"></a>æ­¥éª¤2:ä¸ºå±æ€§æä¾›setteræ–¹æ³•</h5><p>åœ¨BookServiceImplç±»ä¸­,ä¸ºBookDaoæä¾›setteræ–¹æ³•</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">BookService</span> &#123;</span><br><span class="line">    <span class="comment">//åˆ é™¤ä¸šåŠ¡å±‚ä¸­ä½¿ç”¨newçš„æ–¹å¼åˆ›å»ºçš„daoå¯¹è±¡</span></span><br><span class="line">    <span class="keyword">private</span> BookDao bookDao;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;book service save ...&quot;</span>);</span><br><span class="line">        bookDao.save();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//æä¾›å¯¹åº”çš„setæ–¹æ³•</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setBookDao</span><span class="params">(BookDao bookDao)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.bookDao = bookDao;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="æ­¥éª¤3-ä¿®æ”¹é…ç½®å®Œæˆæ³¨å…¥"><a href="#æ­¥éª¤3-ä¿®æ”¹é…ç½®å®Œæˆæ³¨å…¥" class="headerlink" title="æ­¥éª¤3:ä¿®æ”¹é…ç½®å®Œæˆæ³¨å…¥"></a>æ­¥éª¤3:ä¿®æ”¹é…ç½®å®Œæˆæ³¨å…¥</h5><p>åœ¨é…ç½®æ–‡ä»¶ä¸­æ·»åŠ ä¾èµ–æ³¨å…¥çš„é…ç½®</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--beanæ ‡ç­¾æ ‡ç¤ºé…ç½®bean</span></span><br><span class="line"><span class="comment">    idå±æ€§æ ‡ç¤ºç»™beanèµ·åå­—</span></span><br><span class="line"><span class="comment">    classå±æ€§è¡¨ç¤ºç»™beanå®šä¹‰ç±»å‹</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;bookDao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.dao.impl.BookDaoImpl&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;bookService&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.service.impl.BookServiceImpl&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--é…ç½®serverä¸daoçš„å…³ç³»--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--propertyæ ‡ç­¾è¡¨ç¤ºé…ç½®å½“å‰beançš„å±æ€§</span></span><br><span class="line"><span class="comment">        nameå±æ€§è¡¨ç¤ºé…ç½®å“ªä¸€ä¸ªå…·ä½“çš„å±æ€§</span></span><br><span class="line"><span class="comment">        refå±æ€§è¡¨ç¤ºå‚ç…§å“ªä¸€ä¸ªbean</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;bookDao&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;bookDao&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ³¨æ„:é…ç½®ä¸­çš„ä¸¤ä¸ªbookDaoçš„å«ä¹‰æ˜¯ä¸ä¸€æ ·çš„</p><ul><li>name&#x3D;â€bookDaoâ€ä¸­<code>bookDao</code>çš„ä½œç”¨æ˜¯è®©Springçš„IOCå®¹å™¨åœ¨è·å–åˆ°åç§°åï¼Œå°†é¦–å­—æ¯å¤§å†™ï¼Œå‰é¢åŠ setæ‰¾å¯¹åº”çš„<code>setBookDao()</code>æ–¹æ³•è¿›è¡Œå¯¹è±¡æ³¨å…¥</li><li>ref&#x3D;â€bookDaoâ€ä¸­<code>bookDao</code>çš„ä½œç”¨æ˜¯è®©Springèƒ½åœ¨IOCå®¹å™¨ä¸­æ‰¾åˆ°idä¸º<code>bookDao</code>çš„Beanå¯¹è±¡ç»™<code>bookService</code>è¿›è¡Œæ³¨å…¥</li><li>ç»¼ä¸Šæ‰€è¿°ï¼Œå¯¹åº”å…³ç³»å¦‚ä¸‹:</li></ul><p><img src="/2022/07/26/Spring_day1/1629736314989.png" alt="1629736314989"></p><h5 id="æ­¥éª¤4-è¿è¡Œç¨‹åº"><a href="#æ­¥éª¤4-è¿è¡Œç¨‹åº" class="headerlink" title="æ­¥éª¤4:è¿è¡Œç¨‹åº"></a>æ­¥éª¤4:è¿è¡Œç¨‹åº</h5><p>è¿è¡Œï¼Œæµ‹è¯•ç»“æœä¸ºï¼š</p><p><img src="/2022/07/26/Spring_day1/image-20210729184337603.png" alt="image-20210729184337603"></p><h2 id="4ï¼ŒIOCç›¸å…³å†…å®¹"><a href="#4ï¼ŒIOCç›¸å…³å†…å®¹" class="headerlink" title="4ï¼ŒIOCç›¸å…³å†…å®¹"></a>4ï¼ŒIOCç›¸å…³å†…å®¹</h2><p>é€šè¿‡å‰é¢ä¸¤ä¸ªæ¡ˆä¾‹ï¼Œæˆ‘ä»¬å·²ç»å­¦ä¹ äº†<code>beanå¦‚ä½•å®šä¹‰é…ç½®</code>ï¼Œ<code>DIå¦‚ä½•å®šä¹‰é…ç½®</code>ä»¥åŠ<code>å®¹å™¨å¯¹è±¡å¦‚ä½•è·å–</code>çš„å†…å®¹ï¼Œæ¥ä¸‹æ¥ä¸»è¦æ˜¯æŠŠè¿™ä¸‰å—å†…å®¹å±•å¼€è¿›è¡Œè¯¦ç»†çš„è®²è§£ï¼Œæ·±å…¥çš„å­¦ä¹ ä¸‹è¿™ä¸‰éƒ¨åˆ†çš„å†…å®¹ï¼Œé¦–å…ˆæ˜¯beanåŸºç¡€é…ç½®ã€‚</p><h3 id="4-1-beanåŸºç¡€é…ç½®"><a href="#4-1-beanåŸºç¡€é…ç½®" class="headerlink" title="4.1 beanåŸºç¡€é…ç½®"></a>4.1 beanåŸºç¡€é…ç½®</h3><p>å¯¹äºbeançš„é…ç½®ä¸­ï¼Œä¸»è¦ä¼šè®²è§£<code>beanåŸºç¡€é…ç½®</code>,<code>beançš„åˆ«åé…ç½®</code>,<code>beançš„ä½œç”¨èŒƒå›´é…ç½®</code>&#x3D;&#x3D;(é‡ç‚¹)&#x3D;&#x3D;,è¿™ä¸‰éƒ¨åˆ†å†…å®¹ï¼š</p><h4 id="4-1-1-beanåŸºç¡€é…ç½®-idä¸class"><a href="#4-1-1-beanåŸºç¡€é…ç½®-idä¸class" class="headerlink" title="4.1.1 beanåŸºç¡€é…ç½®(idä¸class)"></a>4.1.1 beanåŸºç¡€é…ç½®(idä¸class)</h4><p>å¯¹äºbeançš„åŸºç¡€é…ç½®ï¼Œåœ¨å‰é¢çš„æ¡ˆä¾‹ä¸­å·²ç»ä½¿ç”¨è¿‡:</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;bean id=&quot;&quot; class=&quot;&quot;/&gt;</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œbeanæ ‡ç­¾çš„åŠŸèƒ½ã€ä½¿ç”¨æ–¹å¼ä»¥åŠidå’Œclasså±æ€§çš„ä½œç”¨ï¼Œæˆ‘ä»¬é€šè¿‡ä¸€å¼ å›¾æ¥æè¿°ä¸‹</p><p><img src="/2022/07/26/Spring_day1/image-20210729183500978.png" alt="image-20210729183500978"></p><p>è¿™å…¶ä¸­éœ€è¦å¤§å®¶é‡ç‚¹æŒæ¡çš„æ˜¯:&#x3D;&#x3D;beanæ ‡ç­¾çš„idå’Œclasså±æ€§çš„ä½¿ç”¨&#x3D;&#x3D;ã€‚</p><p><strong>æ€è€ƒï¼š</strong></p><ul><li>classå±æ€§èƒ½ä¸èƒ½å†™æ¥å£å¦‚<code>BookDao</code>çš„ç±»å…¨åå‘¢?</li></ul><p>ç­”æ¡ˆè‚¯å®šæ˜¯ä¸è¡Œï¼Œå› ä¸ºæ¥å£æ˜¯æ²¡åŠæ³•åˆ›å»ºå¯¹è±¡çš„ã€‚</p><ul><li>å‰é¢æè¿‡ä¸ºbeanè®¾ç½®idæ—¶ï¼Œidå¿…é¡»å”¯ä¸€ï¼Œä½†æ˜¯å¦‚æœç”±äºå‘½åä¹ æƒ¯è€Œäº§ç”Ÿäº†åˆ†æ­§åï¼Œè¯¥å¦‚ä½•è§£å†³?</li></ul><p>åœ¨è§£å†³è¿™ä¸ªé—®é¢˜ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å‡†å¤‡ä¸‹å¼€å‘ç¯å¢ƒï¼Œå¯¹äºå¼€å‘ç¯å¢ƒæˆ‘ä»¬å¯ä»¥æœ‰ä¸¤ç§è§£å†³æ–¹æ¡ˆ:</p><ul><li><p>ä½¿ç”¨å‰é¢IOCå’ŒDIçš„æ¡ˆä¾‹</p></li><li><p>é‡æ–°æ­å»ºä¸€ä¸ªæ–°çš„æ¡ˆä¾‹ç¯å¢ƒ,ç›®çš„æ˜¯æ–¹ä¾¿å¤§å®¶æŸ¥é˜…ä»£ç </p><ul><li><p>æ­å»ºçš„å†…å®¹å’Œå‰é¢çš„æ¡ˆä¾‹æ˜¯ä¸€æ ·çš„ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p><p><img src="/2022/07/26/Spring_day1/1629769227068.png" alt="1629769227068"></p></li></ul></li></ul><h4 id="4-1-2-beançš„nameå±æ€§"><a href="#4-1-2-beançš„nameå±æ€§" class="headerlink" title="4.1.2 beançš„nameå±æ€§"></a>4.1.2 beançš„nameå±æ€§</h4><p>ç¯å¢ƒå‡†å¤‡å¥½åï¼Œæ¥ä¸‹æ¥å°±å¯ä»¥åœ¨è¿™ä¸ªç¯å¢ƒçš„åŸºç¡€ä¸Šæ¥å­¦ä¹ ä¸‹beançš„åˆ«åé…ç½®ï¼Œ</p><p>é¦–å…ˆæ¥çœ‹ä¸‹åˆ«åçš„é…ç½®è¯´æ˜:</p><p><img src="/2022/07/26/Spring_day1/image-20210729183558051.png" alt="image-20210729183558051"></p><h5 id="æ­¥éª¤1ï¼šé…ç½®åˆ«å"><a href="#æ­¥éª¤1ï¼šé…ç½®åˆ«å" class="headerlink" title="æ­¥éª¤1ï¼šé…ç½®åˆ«å"></a>æ­¥éª¤1ï¼šé…ç½®åˆ«å</h5><p>æ‰“å¼€springçš„é…ç½®æ–‡ä»¶applicationContext.xml</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--name:ä¸ºbeanæŒ‡å®šåˆ«åï¼Œåˆ«åå¯ä»¥æœ‰å¤šä¸ªï¼Œä½¿ç”¨é€—å·ï¼Œåˆ†å·ï¼Œç©ºæ ¼è¿›è¡Œåˆ†éš”--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;bookService&quot;</span> <span class="attr">name</span>=<span class="string">&quot;service service4 bookEbi&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.service.impl.BookServiceImpl&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;bookDao&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;bookDao&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--scopeï¼šä¸ºbeanè®¾ç½®ä½œç”¨èŒƒå›´ï¼Œå¯é€‰å€¼ä¸ºå•ä¾‹singlotonï¼Œéå•ä¾‹prototype--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;bookDao&quot;</span> <span class="attr">name</span>=<span class="string">&quot;dao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.dao.impl.BookDaoImpl&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>è¯´æ˜:Ebiå…¨ç§°Enterprise Business Interfaceï¼Œç¿»è¯‘ä¸ºä¼ä¸šä¸šåŠ¡æ¥å£</strong></p><h5 id="æ­¥éª¤2-æ ¹æ®åç§°å®¹å™¨ä¸­è·å–beanå¯¹è±¡"><a href="#æ­¥éª¤2-æ ¹æ®åç§°å®¹å™¨ä¸­è·å–beanå¯¹è±¡" class="headerlink" title="æ­¥éª¤2:æ ¹æ®åç§°å®¹å™¨ä¸­è·å–beanå¯¹è±¡"></a>æ­¥éª¤2:æ ¹æ®åç§°å®¹å™¨ä¸­è·å–beanå¯¹è±¡</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AppForName</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">ApplicationContext</span> <span class="variable">ctx</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;applicationContext.xml&quot;</span>);</span><br><span class="line">        <span class="comment">//æ­¤å¤„æ ¹æ®beanæ ‡ç­¾çš„idå±æ€§å’Œnameå±æ€§çš„ä»»æ„ä¸€ä¸ªå€¼æ¥è·å–beanå¯¹è±¡</span></span><br><span class="line">        <span class="type">BookService</span> <span class="variable">bookService</span> <span class="operator">=</span> (BookService) ctx.getBean(<span class="string">&quot;service4&quot;</span>);</span><br><span class="line">        bookService.save();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="æ­¥éª¤3-è¿è¡Œç¨‹åº"><a href="#æ­¥éª¤3-è¿è¡Œç¨‹åº" class="headerlink" title="æ­¥éª¤3:è¿è¡Œç¨‹åº"></a>æ­¥éª¤3:è¿è¡Œç¨‹åº</h5><p>æµ‹è¯•ç»“æœä¸ºï¼š</p><p><img src="/2022/07/26/Spring_day1/image-20210729184337603.png" alt="image-20210729184337603"></p><p>æ³¨æ„äº‹é¡¹ï¼š</p><ul><li><p>beanä¾èµ–æ³¨å…¥çš„refå±æ€§æŒ‡å®šbeanï¼Œå¿…é¡»åœ¨å®¹å™¨ä¸­å­˜åœ¨</p><p><img src="/2022/07/26/Spring_day1/1629771744003.png" alt="1629771744003"></p></li><li><p>å¦‚æœä¸å­˜åœ¨,åˆ™ä¼šæŠ¥é”™ï¼Œå¦‚ä¸‹:</p><p><img src="/2022/07/26/Spring_day1/1629771880920.png" alt="1629771880920"></p><p>è¿™ä¸ªé”™è¯¯å¤§å®¶éœ€è¦ç‰¹åˆ«å…³æ³¨ä¸‹:</p><p><img src="/2022/07/26/Spring_day1/1629771972886.png" alt="1629771972886"></p><p>è·å–beanæ— è®ºæ˜¯é€šè¿‡idè¿˜æ˜¯nameè·å–ï¼Œå¦‚æœæ— æ³•è·å–åˆ°ï¼Œå°†æŠ›å‡ºå¼‚å¸¸&#x3D;&#x3D;NoSuchBeanDefinitionException&#x3D;&#x3D;</p></li></ul><h4 id="4-1-3-beanä½œç”¨èŒƒå›´scopeé…ç½®"><a href="#4-1-3-beanä½œç”¨èŒƒå›´scopeé…ç½®" class="headerlink" title="4.1.3 beanä½œç”¨èŒƒå›´scopeé…ç½®"></a>4.1.3 beanä½œç”¨èŒƒå›´scopeé…ç½®</h4><p>å…³äºbeançš„ä½œç”¨èŒƒå›´æ˜¯beanå±æ€§é…ç½®çš„ä¸€ä¸ªé‡ç‚¹å†…å®¹ã€‚</p><p>çœ‹åˆ°è¿™ä¸ªä½œç”¨èŒƒå›´ï¼Œæˆ‘ä»¬å°±å¾—æ€è€ƒbeançš„ä½œç”¨èŒƒå›´æ˜¯æ¥æ§åˆ¶beanå“ªå—å†…å®¹çš„?</p><p>æˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹<code>beanä½œç”¨èŒƒå›´çš„é…ç½®å±æ€§</code>:</p><p><img src="/2022/07/26/Spring_day1/image-20210729183628138.png" alt="image-20210729183628138"></p><h5 id="4-1-3-1-éªŒè¯IOCå®¹å™¨ä¸­å¯¹è±¡æ˜¯å¦ä¸ºå•ä¾‹"><a href="#4-1-3-1-éªŒè¯IOCå®¹å™¨ä¸­å¯¹è±¡æ˜¯å¦ä¸ºå•ä¾‹" class="headerlink" title="4.1.3.1 éªŒè¯IOCå®¹å™¨ä¸­å¯¹è±¡æ˜¯å¦ä¸ºå•ä¾‹"></a>4.1.3.1 éªŒè¯IOCå®¹å™¨ä¸­å¯¹è±¡æ˜¯å¦ä¸ºå•ä¾‹</h5><h6 id="éªŒè¯æ€è·¯"><a href="#éªŒè¯æ€è·¯" class="headerlink" title="éªŒè¯æ€è·¯"></a>éªŒè¯æ€è·¯</h6><p>â€‹åŒä¸€ä¸ªbeanè·å–ä¸¤æ¬¡ï¼Œå°†å¯¹è±¡æ‰“å°åˆ°æ§åˆ¶å°ï¼Œçœ‹æ‰“å°å‡ºçš„åœ°å€å€¼æ˜¯å¦ä¸€è‡´ã€‚</p><h6 id="å…·ä½“å®ç°"><a href="#å…·ä½“å®ç°" class="headerlink" title="å…·ä½“å®ç°"></a>å…·ä½“å®ç°</h6><ul><li><p>åˆ›å»ºä¸€ä¸ªAppForScopeçš„ç±»ï¼Œåœ¨å…¶mainæ–¹æ³•ä¸­æ¥éªŒè¯</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AppForScope</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">ApplicationContext</span> <span class="variable">ctx</span> <span class="operator">=</span> <span class="keyword">new</span> </span><br><span class="line">            <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;applicationContext.xml&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">BookDao</span> <span class="variable">bookDao1</span> <span class="operator">=</span> (BookDao) ctx.getBean(<span class="string">&quot;bookDao&quot;</span>);</span><br><span class="line">        <span class="type">BookDao</span> <span class="variable">bookDao2</span> <span class="operator">=</span> (BookDao) ctx.getBean(<span class="string">&quot;bookDao&quot;</span>);</span><br><span class="line">        System.out.println(bookDao1);</span><br><span class="line">        System.out.println(bookDao2);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>æ‰“å°ï¼Œè§‚å¯Ÿæ§åˆ¶å°çš„æ‰“å°ç»“æœ</p><p><img src="/2022/07/26/Spring_day1/1629772538893.png" alt="1629772538893"></p></li><li><p>ç»“è®º:é»˜è®¤æƒ…å†µä¸‹ï¼ŒSpringåˆ›å»ºçš„beanå¯¹è±¡éƒ½æ˜¯å•ä¾‹çš„</p></li></ul><p>è·å–åˆ°ç»“è®ºåï¼Œé—®é¢˜å°±æ¥äº†ï¼Œé‚£å¦‚æœæˆ‘æƒ³åˆ›å»ºå‡ºæ¥éå•ä¾‹çš„beanå¯¹è±¡ï¼Œè¯¥å¦‚ä½•å®ç°å‘¢?</p><h5 id="4-1-3-2-é…ç½®beanä¸ºéå•ä¾‹"><a href="#4-1-3-2-é…ç½®beanä¸ºéå•ä¾‹" class="headerlink" title="4.1.3.2 é…ç½®beanä¸ºéå•ä¾‹"></a>4.1.3.2 é…ç½®beanä¸ºéå•ä¾‹</h5><p>åœ¨Springé…ç½®æ–‡ä»¶ä¸­ï¼Œé…ç½®scopeå±æ€§æ¥å®ç°beançš„éå•ä¾‹åˆ›å»º</p><ul><li><p>åœ¨Springçš„é…ç½®æ–‡ä»¶ä¸­ï¼Œä¿®æ”¹<code>&lt;bean&gt;</code>çš„scopeå±æ€§</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;bookDao&quot;</span> <span class="attr">name</span>=<span class="string">&quot;dao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.dao.impl.BookDaoImpl&quot;</span> <span class="attr">scope</span>=<span class="string">&quot;&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>å°†scopeè®¾ç½®ä¸º<code>singleton</code></p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;bookDao&quot;</span> <span class="attr">name</span>=<span class="string">&quot;dao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.dao.impl.BookDaoImpl&quot;</span> <span class="attr">scope</span>=<span class="string">&quot;singleton&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure><p>è¿è¡ŒAppForScopeï¼Œæ‰“å°çœ‹ç»“æœ</p><p><img src="/2022/07/26/Spring_day1/1629772538893.png" alt="1629772538893"></p></li><li><p>å°†scopeè®¾ç½®ä¸º<code>prototype</code></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;bean id=&quot;bookDao&quot; name=&quot;dao&quot; class=&quot;com.itheima.dao.impl.BookDaoImpl&quot; scope=&quot;prototype&quot;/&gt;</span><br></pre></td></tr></table></figure><p>è¿è¡ŒAppForScopeï¼Œæ‰“å°çœ‹ç»“æœ</p><p><img src="/2022/07/26/Spring_day1/1629772928714.png" alt="1629772928714"></p></li><li><p>ç»“è®ºï¼Œä½¿ç”¨beançš„<code>scope</code>å±æ€§å¯ä»¥æ§åˆ¶beançš„åˆ›å»ºæ˜¯å¦ä¸ºå•ä¾‹ï¼š</p><ul><li><code>singleton</code>é»˜è®¤ä¸ºå•ä¾‹</li><li><code>prototype</code>ä¸ºéå•ä¾‹</li></ul></li></ul><h5 id="4-1-3-3-scopeä½¿ç”¨åç»­æ€è€ƒ"><a href="#4-1-3-3-scopeä½¿ç”¨åç»­æ€è€ƒ" class="headerlink" title="4.1.3.3 scopeä½¿ç”¨åç»­æ€è€ƒ"></a>4.1.3.3 scopeä½¿ç”¨åç»­æ€è€ƒ</h5><p>ä»‹ç»å®Œ<code>scope</code>å±æ€§ä»¥åï¼Œæˆ‘ä»¬æ¥æ€è€ƒå‡ ä¸ªé—®é¢˜:</p><ul><li>ä¸ºä»€ä¹ˆbeané»˜è®¤ä¸ºå•ä¾‹?<ul><li>beanä¸ºå•ä¾‹çš„æ„æ€æ˜¯åœ¨Springçš„IOCå®¹å™¨ä¸­åªä¼šæœ‰è¯¥ç±»çš„ä¸€ä¸ªå¯¹è±¡</li><li>beanå¯¹è±¡åªæœ‰ä¸€ä¸ªå°±é¿å…äº†å¯¹è±¡çš„é¢‘ç¹åˆ›å»ºä¸é”€æ¯ï¼Œè¾¾åˆ°äº†beanå¯¹è±¡çš„å¤ç”¨ï¼Œæ€§èƒ½é«˜</li></ul></li><li>beanåœ¨å®¹å™¨ä¸­æ˜¯å•ä¾‹çš„ï¼Œä¼šä¸ä¼šäº§ç”Ÿçº¿ç¨‹å®‰å…¨é—®é¢˜?<ul><li>å¦‚æœå¯¹è±¡æ˜¯æœ‰çŠ¶æ€å¯¹è±¡ï¼Œå³è¯¥å¯¹è±¡æœ‰æˆå‘˜å˜é‡å¯ä»¥ç”¨æ¥å­˜å‚¨æ•°æ®çš„ï¼Œ</li><li>å› ä¸ºæ‰€æœ‰è¯·æ±‚çº¿ç¨‹å…±ç”¨ä¸€ä¸ªbeanå¯¹è±¡ï¼Œæ‰€ä»¥ä¼šå­˜åœ¨çº¿ç¨‹å®‰å…¨é—®é¢˜ã€‚</li><li>å¦‚æœå¯¹è±¡æ˜¯æ— çŠ¶æ€å¯¹è±¡ï¼Œå³è¯¥å¯¹è±¡æ²¡æœ‰æˆå‘˜å˜é‡æ²¡æœ‰è¿›è¡Œæ•°æ®å­˜å‚¨çš„ï¼Œ</li><li>å› æ–¹æ³•ä¸­çš„å±€éƒ¨å˜é‡åœ¨æ–¹æ³•è°ƒç”¨å®Œæˆåä¼šè¢«é”€æ¯ï¼Œæ‰€ä»¥ä¸ä¼šå­˜åœ¨çº¿ç¨‹å®‰å…¨é—®é¢˜ã€‚</li></ul></li><li>å“ªäº›beanå¯¹è±¡é€‚åˆäº¤ç»™å®¹å™¨è¿›è¡Œç®¡ç†?<ul><li>è¡¨ç°å±‚å¯¹è±¡</li><li>ä¸šåŠ¡å±‚å¯¹è±¡</li><li>æ•°æ®å±‚å¯¹è±¡</li><li>å·¥å…·å¯¹è±¡</li></ul></li><li>å“ªäº›beanå¯¹è±¡ä¸é€‚åˆäº¤ç»™å®¹å™¨è¿›è¡Œç®¡ç†?<ul><li>å°è£…å®ä¾‹çš„åŸŸå¯¹è±¡ï¼Œå› ä¸ºä¼šå¼•å‘çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Œæ‰€ä»¥ä¸é€‚åˆã€‚</li></ul></li></ul><h4 id="4-14-beanåŸºç¡€é…ç½®å°ç»“"><a href="#4-14-beanåŸºç¡€é…ç½®å°ç»“" class="headerlink" title="4.14 beanåŸºç¡€é…ç½®å°ç»“"></a>4.14 beanåŸºç¡€é…ç½®å°ç»“</h4><p>å…³äºbeançš„åŸºç¡€é…ç½®ä¸­ï¼Œéœ€è¦å¤§å®¶æŒæ¡ä»¥ä¸‹å±æ€§:</p><p><img src="/2022/07/26/Spring_day1/1631529887695.png" alt="1631529887695"></p><h3 id="4-2-beanå®ä¾‹åŒ–"><a href="#4-2-beanå®ä¾‹åŒ–" class="headerlink" title="4.2 beanå®ä¾‹åŒ–"></a>4.2 beanå®ä¾‹åŒ–</h3><p>å¯¹è±¡å·²ç»èƒ½äº¤ç»™Springçš„IOCå®¹å™¨æ¥åˆ›å»ºäº†ï¼Œä½†æ˜¯å®¹å™¨æ˜¯å¦‚ä½•æ¥åˆ›å»ºå¯¹è±¡çš„å‘¢?</p><p>å°±éœ€è¦ç ”ç©¶ä¸‹<code>beançš„å®ä¾‹åŒ–è¿‡ç¨‹</code>ï¼Œåœ¨è¿™å—å†…å®¹ä¸­ä¸»è¦è§£å†³ä¸¤éƒ¨åˆ†å†…å®¹ï¼Œåˆ†åˆ«æ˜¯</p><ul><li>beanæ˜¯å¦‚ä½•åˆ›å»ºçš„</li><li>å®ä¾‹åŒ–beançš„ä¸‰ç§æ–¹å¼ï¼Œ<code>æ„é€ æ–¹æ³•</code>,<code>é™æ€å·¥å‚</code>å’Œ<code>å®ä¾‹å·¥å‚</code></li></ul><p>åœ¨è®²è§£è¿™ä¸‰ç§åˆ›å»ºæ–¹å¼ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆç¡®è®¤ä¸€ä»¶äº‹:</p><p>beanæœ¬è´¨ä¸Šå°±æ˜¯å¯¹è±¡ï¼Œå¯¹è±¡åœ¨newçš„æ—¶å€™ä¼šä½¿ç”¨æ„é€ æ–¹æ³•å®Œæˆï¼Œé‚£åˆ›å»ºbeanä¹Ÿæ˜¯ä½¿ç”¨æ„é€ æ–¹æ³•å®Œæˆçš„ã€‚</p><p>åŸºäºè¿™ä¸ªçŸ¥è¯†ç‚¹å‡ºå‘ï¼Œæˆ‘ä»¬æ¥éªŒè¯springä¸­beançš„ä¸‰ç§åˆ›å»ºæ–¹å¼ï¼Œ</p><h4 id="4-2-1-ç¯å¢ƒå‡†å¤‡"><a href="#4-2-1-ç¯å¢ƒå‡†å¤‡" class="headerlink" title="4.2.1 ç¯å¢ƒå‡†å¤‡"></a>4.2.1 ç¯å¢ƒå‡†å¤‡</h4><p>ä¸ºäº†æ–¹ä¾¿å¤§å®¶é˜…è¯»ä»£ç ï¼Œé‡æ–°å‡†å¤‡ä¸ªå¼€å‘ç¯å¢ƒï¼Œ</p><ul><li>åˆ›å»ºä¸€ä¸ªMavené¡¹ç›®</li><li>pom.xmlæ·»åŠ ä¾èµ–</li><li>resourcesä¸‹æ·»åŠ springçš„é…ç½®æ–‡ä»¶applicationContext.xml</li></ul><p>è¿™äº›æ­¥éª¤å’Œå‰é¢çš„éƒ½ä¸€è‡´ï¼Œå¤§å®¶å¯ä»¥å¿«é€Ÿçš„æ‹·è´å³å¯ï¼Œæœ€ç»ˆé¡¹ç›®çš„ç»“æ„å¦‚ä¸‹:</p><p><img src="/2022/07/26/Spring_day1/1629775585694.png" alt="1629775585694"></p><h4 id="4-2-2-æ„é€ æ–¹æ³•å®ä¾‹åŒ–"><a href="#4-2-2-æ„é€ æ–¹æ³•å®ä¾‹åŒ–" class="headerlink" title="4.2.2 æ„é€ æ–¹æ³•å®ä¾‹åŒ–"></a>4.2.2 æ„é€ æ–¹æ³•å®ä¾‹åŒ–</h4><p>åœ¨ä¸Šè¿°çš„ç¯å¢ƒä¸‹ï¼Œæˆ‘ä»¬æ¥ç ”ç©¶ä¸‹Springä¸­çš„ç¬¬ä¸€ç§beançš„åˆ›å»ºæ–¹å¼<code>æ„é€ æ–¹æ³•å®ä¾‹åŒ–</code>:</p><h5 id="æ­¥éª¤1-å‡†å¤‡éœ€è¦è¢«åˆ›å»ºçš„ç±»"><a href="#æ­¥éª¤1-å‡†å¤‡éœ€è¦è¢«åˆ›å»ºçš„ç±»" class="headerlink" title="æ­¥éª¤1:å‡†å¤‡éœ€è¦è¢«åˆ›å»ºçš„ç±»"></a>æ­¥éª¤1:å‡†å¤‡éœ€è¦è¢«åˆ›å»ºçš„ç±»</h5><p>å‡†å¤‡ä¸€ä¸ªBookDaoå’ŒBookDaoImplç±»</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">BookDao</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookDaoImpl</span> <span class="keyword">implements</span> <span class="title class_">BookDao</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;book dao save ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="æ­¥éª¤2-å°†ç±»é…ç½®åˆ°Springå®¹å™¨"><a href="#æ­¥éª¤2-å°†ç±»é…ç½®åˆ°Springå®¹å™¨" class="headerlink" title="æ­¥éª¤2:å°†ç±»é…ç½®åˆ°Springå®¹å™¨"></a>æ­¥éª¤2:å°†ç±»é…ç½®åˆ°Springå®¹å™¨</h5><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;bookDao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.dao.impl.BookDaoImpl&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="æ­¥éª¤3-ç¼–å†™è¿è¡Œç¨‹åº"><a href="#æ­¥éª¤3-ç¼–å†™è¿è¡Œç¨‹åº" class="headerlink" title="æ­¥éª¤3:ç¼–å†™è¿è¡Œç¨‹åº"></a>æ­¥éª¤3:ç¼–å†™è¿è¡Œç¨‹åº</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AppForInstanceBook</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">ApplicationContext</span> <span class="variable">ctx</span> <span class="operator">=</span> <span class="keyword">new</span> </span><br><span class="line">            <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;applicationContext.xml&quot;</span>);</span><br><span class="line">        <span class="type">BookDao</span> <span class="variable">bookDao</span> <span class="operator">=</span> (BookDao) ctx.getBean(<span class="string">&quot;bookDao&quot;</span>);</span><br><span class="line">        bookDao.save();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="æ­¥éª¤4-ç±»ä¸­æä¾›æ„é€ å‡½æ•°æµ‹è¯•"><a href="#æ­¥éª¤4-ç±»ä¸­æä¾›æ„é€ å‡½æ•°æµ‹è¯•" class="headerlink" title="æ­¥éª¤4:ç±»ä¸­æä¾›æ„é€ å‡½æ•°æµ‹è¯•"></a>æ­¥éª¤4:ç±»ä¸­æä¾›æ„é€ å‡½æ•°æµ‹è¯•</h5><p>åœ¨BookDaoImplç±»ä¸­æ·»åŠ ä¸€ä¸ªæ— å‚æ„é€ å‡½æ•°ï¼Œå¹¶æ‰“å°ä¸€å¥è¯ï¼Œæ–¹ä¾¿è§‚å¯Ÿç»“æœã€‚</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookDaoImpl</span> <span class="keyword">implements</span> <span class="title class_">BookDao</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">BookDaoImpl</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;book dao constructor is running ....&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;book dao save ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿è¡Œç¨‹åºï¼Œå¦‚æœæ§åˆ¶å°æœ‰æ‰“å°æ„é€ å‡½æ•°ä¸­çš„è¾“å‡ºï¼Œè¯´æ˜Springå®¹å™¨åœ¨åˆ›å»ºå¯¹è±¡çš„æ—¶å€™ä¹Ÿèµ°çš„æ˜¯æ„é€ å‡½æ•°</p><p><img src="/2022/07/26/Spring_day1/1629775972507.png" alt="1629775972507"></p><h5 id="æ­¥éª¤5-å°†æ„é€ å‡½æ•°æ”¹æˆprivateæµ‹è¯•"><a href="#æ­¥éª¤5-å°†æ„é€ å‡½æ•°æ”¹æˆprivateæµ‹è¯•" class="headerlink" title="æ­¥éª¤5:å°†æ„é€ å‡½æ•°æ”¹æˆprivateæµ‹è¯•"></a>æ­¥éª¤5:å°†æ„é€ å‡½æ•°æ”¹æˆprivateæµ‹è¯•</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookDaoImpl</span> <span class="keyword">implements</span> <span class="title class_">BookDao</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">BookDaoImpl</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;book dao constructor is running ....&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;book dao save ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿è¡Œç¨‹åºï¼Œèƒ½æ‰§è¡ŒæˆåŠŸ,è¯´æ˜å†…éƒ¨èµ°çš„ä¾ç„¶æ˜¯æ„é€ å‡½æ•°,èƒ½è®¿é—®åˆ°ç±»ä¸­çš„ç§æœ‰æ„é€ æ–¹æ³•,æ˜¾è€Œæ˜“è§Springåº•å±‚ç”¨çš„æ˜¯åå°„</p><p><img src="/2022/07/26/Spring_day1/1629775972507.png" alt="1629775972507"></p><h5 id="æ­¥éª¤6-æ„é€ å‡½æ•°ä¸­æ·»åŠ ä¸€ä¸ªå‚æ•°æµ‹è¯•"><a href="#æ­¥éª¤6-æ„é€ å‡½æ•°ä¸­æ·»åŠ ä¸€ä¸ªå‚æ•°æµ‹è¯•" class="headerlink" title="æ­¥éª¤6:æ„é€ å‡½æ•°ä¸­æ·»åŠ ä¸€ä¸ªå‚æ•°æµ‹è¯•"></a>æ­¥éª¤6:æ„é€ å‡½æ•°ä¸­æ·»åŠ ä¸€ä¸ªå‚æ•°æµ‹è¯•</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookDaoImpl</span> <span class="keyword">implements</span> <span class="title class_">BookDao</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">BookDaoImpl</span><span class="params">(<span class="type">int</span> i)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;book dao constructor is running ....&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;book dao save ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿è¡Œç¨‹åºï¼Œ</p><p>ç¨‹åºä¼šæŠ¥é”™ï¼Œè¯´æ˜Springåº•å±‚ä½¿ç”¨çš„æ˜¯ç±»çš„æ— å‚æ„é€ æ–¹æ³•ã€‚</p><p><img src="/2022/07/26/Spring_day1/1629776331499.png" alt="1629776331499"></p><h4 id="4-2-3-åˆ†æSpringçš„é”™è¯¯ä¿¡æ¯"><a href="#4-2-3-åˆ†æSpringçš„é”™è¯¯ä¿¡æ¯" class="headerlink" title="4.2.3 åˆ†æSpringçš„é”™è¯¯ä¿¡æ¯"></a>4.2.3 åˆ†æSpringçš„é”™è¯¯ä¿¡æ¯</h4><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä¸»è¦ç ”ç©¶ä¸‹Springçš„æŠ¥é”™ä¿¡æ¯æ¥å­¦ä¸€å­¦å¦‚é˜…è¯»ã€‚</p><ul><li>é”™è¯¯ä¿¡æ¯ä»ä¸‹å¾€ä¸Šä¾æ¬¡æŸ¥çœ‹ï¼Œå› ä¸ºä¸Šé¢çš„é”™è¯¯å¤§éƒ½æ˜¯å¯¹ä¸‹é¢é”™è¯¯çš„ä¸€ä¸ªåŒ…è£…ï¼Œæœ€æ ¸å¿ƒé”™è¯¯æ˜¯åœ¨æœ€ä¸‹é¢</li><li>Caused by: java.lang.NoSuchMethodException: com.itheima.dao.impl.BookDaoImpl.<code>&lt;init&gt;</code>()<ul><li>Caused by ç¿»è¯‘ä¸º<code>å¼•èµ·</code>ï¼Œå³å‡ºç°é”™è¯¯çš„åŸå› </li><li>java.lang.NoSuchMethodException:æŠ›å‡ºçš„å¼‚å¸¸ä¸º<code>æ²¡æœ‰è¿™æ ·çš„æ–¹æ³•å¼‚å¸¸</code></li><li>com.itheima.dao.impl.BookDaoImpl.<code>&lt;init&gt;</code>():å“ªä¸ªç±»çš„å“ªä¸ªæ–¹æ³•æ²¡æœ‰è¢«æ‰¾åˆ°å¯¼è‡´çš„å¼‚å¸¸ï¼Œ<code>&lt;init&gt;</code>()æŒ‡å®šæ˜¯ç±»çš„æ„é€ æ–¹æ³•ï¼Œå³è¯¥ç±»çš„æ— å‚æ„é€ æ–¹æ³•</li></ul></li></ul><p>å¦‚æœæœ€åä¸€è¡Œé”™è¯¯è·å–ä¸åˆ°é”™è¯¯ä¿¡æ¯ï¼Œæ¥ä¸‹æ¥æŸ¥çœ‹ç¬¬äºŒå±‚:</p><p>Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.itheima.dao.impl.BookDaoImpl]: No default constructor found; nested exception is java.lang.NoSuchMethodException: com.itheima.dao.impl.BookDaoImpl.<code>&lt;init&gt;</code>()</p><ul><li>nested:åµŒå¥—çš„æ„æ€ï¼Œåé¢çš„å¼‚å¸¸å†…å®¹å’Œæœ€åº•å±‚çš„å¼‚å¸¸æ˜¯ä¸€è‡´çš„</li><li>Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.itheima.dao.impl.BookDaoImpl]: No default constructor found; <ul><li>Caused by: <code>å¼•å‘</code></li><li>BeanInstantiationException:ç¿»è¯‘ä¸º<code>beanå®ä¾‹åŒ–å¼‚å¸¸</code></li><li>No default constructor found:æ²¡æœ‰ä¸€ä¸ªé»˜è®¤çš„æ„é€ å‡½æ•°è¢«å‘ç°</li></ul></li></ul><p>çœ‹åˆ°è¿™å…¶å®é”™è¯¯å·²ç»æ¯”è¾ƒæ˜æ˜¾ï¼Œç»™å¤§å®¶ä¸ªç»ƒä¹ ï¼ŒæŠŠå€’æ•°ç¬¬ä¸‰å±‚çš„é”™è¯¯åˆ†æä¸‹å§:</p><p>Exception in thread â€œmainâ€ org.springframework.beans.factory.BeanCreationException: Error creating bean with name â€˜bookDaoâ€™ defined in class path resource [applicationContext.xml]: Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.itheima.dao.impl.BookDaoImpl]: No default constructor found; nested exception is java.lang.NoSuchMethodException: com.itheima.dao.impl.BookDaoImpl.<code>&lt;init&gt;</code>()ã€‚</p><p>è‡³æ­¤ï¼Œå…³äºSpringçš„æ„é€ æ–¹æ³•å®ä¾‹åŒ–å°±å·²ç»å­¦ä¹ å®Œäº†ï¼Œå› ä¸ºæ¯ä¸€ä¸ªç±»é»˜è®¤éƒ½ä¼šæä¾›ä¸€ä¸ªæ— å‚æ„é€ å‡½æ•°ï¼Œæ‰€ä»¥å…¶å®çœŸæ­£åœ¨ä½¿ç”¨è¿™ç§æ–¹å¼çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä»€ä¹ˆä¹Ÿä¸éœ€è¦åšã€‚è¿™ä¹Ÿæ˜¯æˆ‘ä»¬ä»¥åæ¯”è¾ƒå¸¸ç”¨çš„ä¸€ç§æ–¹å¼ã€‚</p><h4 id="4-2-4-é™æ€å·¥å‚å®ä¾‹åŒ–"><a href="#4-2-4-é™æ€å·¥å‚å®ä¾‹åŒ–" class="headerlink" title="4.2.4 é™æ€å·¥å‚å®ä¾‹åŒ–"></a>4.2.4 é™æ€å·¥å‚å®ä¾‹åŒ–</h4><p>æ¥ä¸‹æ¥ç ”ç©¶Springä¸­çš„ç¬¬äºŒç§beançš„åˆ›å»ºæ–¹å¼<code>é™æ€å·¥å‚å®ä¾‹åŒ–</code>:</p><h5 id="4-2-4-1-å·¥å‚æ–¹å¼åˆ›å»ºbean"><a href="#4-2-4-1-å·¥å‚æ–¹å¼åˆ›å»ºbean" class="headerlink" title="4.2.4.1 å·¥å‚æ–¹å¼åˆ›å»ºbean"></a>4.2.4.1 å·¥å‚æ–¹å¼åˆ›å»ºbean</h5><p>åœ¨è®²è¿™ç§æ–¹å¼ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆå›é¡¾ä¸€ä¸ªçŸ¥è¯†ç‚¹æ˜¯ä½¿ç”¨å·¥å‚æ¥åˆ›å»ºå¯¹è±¡çš„æ–¹å¼:</p><p>(1)å‡†å¤‡ä¸€ä¸ªOrderDaoå’ŒOrderDaoImplç±»</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">OrderDao</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OrderDaoImpl</span> <span class="keyword">implements</span> <span class="title class_">OrderDao</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;order dao save ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>(2)åˆ›å»ºä¸€ä¸ªå·¥å‚ç±»OrderDaoFactoryå¹¶æä¾›ä¸€ä¸ª&#x3D;&#x3D;é™æ€æ–¹æ³•&#x3D;&#x3D;</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//é™æ€å·¥å‚åˆ›å»ºå¯¹è±¡</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OrderDaoFactory</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> OrderDao <span class="title function_">getOrderDao</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">OrderDaoImpl</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>(3)ç¼–å†™AppForInstanceOrderè¿è¡Œç±»ï¼Œåœ¨ç±»ä¸­é€šè¿‡å·¥å‚è·å–å¯¹è±¡</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AppForInstanceOrder</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//é€šè¿‡é™æ€å·¥å‚åˆ›å»ºå¯¹è±¡</span></span><br><span class="line">        <span class="type">OrderDao</span> <span class="variable">orderDao</span> <span class="operator">=</span> OrderDaoFactory.getOrderDao();</span><br><span class="line">        orderDao.save();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>(4)è¿è¡Œåï¼Œå¯ä»¥æŸ¥çœ‹åˆ°ç»“æœ</p><p><img src="/2022/07/26/Spring_day1/1629786862329.png" alt="1629786862329"></p><p>å¦‚æœä»£ç ä¸­å¯¹è±¡æ˜¯é€šè¿‡ä¸Šé¢çš„è¿™ç§æ–¹å¼æ¥åˆ›å»ºçš„ï¼Œå¦‚ä½•å°†å…¶äº¤ç»™Springæ¥ç®¡ç†å‘¢?</p><h5 id="4-2-4-2-é™æ€å·¥å‚å®ä¾‹åŒ–"><a href="#4-2-4-2-é™æ€å·¥å‚å®ä¾‹åŒ–" class="headerlink" title="4.2.4.2 é™æ€å·¥å‚å®ä¾‹åŒ–"></a>4.2.4.2 é™æ€å·¥å‚å®ä¾‹åŒ–</h5><p>è¿™å°±è¦ç”¨åˆ°Springä¸­çš„é™æ€å·¥å‚å®ä¾‹åŒ–çš„çŸ¥è¯†äº†ï¼Œå…·ä½“å®ç°æ­¥éª¤ä¸º:</p><p>(1)åœ¨springçš„é…ç½®æ–‡ä»¶application.propertiesä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹:</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;orderDao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.factory.OrderDaoFactory&quot;</span> <span class="attr">factory-method</span>=<span class="string">&quot;getOrderDao&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure><p>class:å·¥å‚ç±»çš„ç±»å…¨å</p><p>factory-mehodï¼šå…·ä½“å·¥å‚ç±»ä¸­åˆ›å»ºå¯¹è±¡çš„æ–¹æ³•å</p><p>å¯¹åº”å…³ç³»å¦‚ä¸‹å›¾:</p><p><img src="/2022/07/26/Spring_day1/image-20210729195248948.png" alt="image-20210729195248948"></p><p>(2)åœ¨AppForInstanceOrderè¿è¡Œç±»ï¼Œä½¿ç”¨ä»IOCå®¹å™¨ä¸­è·å–beançš„æ–¹æ³•è¿›è¡Œè¿è¡Œæµ‹è¯•</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AppForInstanceOrder</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">ApplicationContext</span> <span class="variable">ctx</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;applicationContext.xml&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">OrderDao</span> <span class="variable">orderDao</span> <span class="operator">=</span> (OrderDao) ctx.getBean(<span class="string">&quot;orderDao&quot;</span>);</span><br><span class="line"></span><br><span class="line">        orderDao.save();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>(3)è¿è¡Œåï¼Œå¯ä»¥æŸ¥çœ‹åˆ°ç»“æœ</p><p><img src="/2022/07/26/Spring_day1/1629786862329.png" alt="1629786862329"></p><p>çœ‹åˆ°è¿™ï¼Œå¯èƒ½æœ‰äººä¼šé—®äº†ï¼Œä½ è¿™ç§æ–¹å¼åœ¨å·¥å‚ç±»ä¸­ä¸ä¹Ÿæ˜¯ç›´æ¥newå¯¹è±¡çš„ï¼Œå’Œæˆ‘è‡ªå·±ç›´æ¥newæ²¡ä»€ä¹ˆå¤ªå¤§çš„åŒºåˆ«ï¼Œè€Œä¸”é™æ€å·¥å‚çš„æ–¹å¼åè€Œæ›´å¤æ‚ï¼Œè¿™ç§æ–¹å¼çš„æ„ä¹‰æ˜¯ä»€ä¹ˆ?</p><p>ä¸»è¦çš„åŸå› æ˜¯:</p><ul><li>åœ¨å·¥å‚çš„é™æ€æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬é™¤äº†newå¯¹è±¡è¿˜å¯ä»¥åšå…¶ä»–çš„ä¸€äº›ä¸šåŠ¡æ“ä½œï¼Œè¿™äº›æ“ä½œå¿…ä¸å¯å°‘,å¦‚:</li></ul><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OrderDaoFactory</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> OrderDao <span class="title function_">getOrderDao</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;factory setup....&quot;</span>);<span class="comment">//æ¨¡æ‹Ÿå¿…è¦çš„ä¸šåŠ¡æ“ä½œ</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">OrderDaoImpl</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¹‹å‰newå¯¹è±¡çš„æ–¹å¼å°±æ— æ³•æ·»åŠ å…¶ä»–çš„ä¸šåŠ¡å†…å®¹ï¼Œé‡æ–°è¿è¡Œï¼ŒæŸ¥çœ‹ç»“æœ:</p><p><img src="/2022/07/26/Spring_day1/1629788036885.png" alt="1629788036885"></p><p>ä»‹ç»å®Œé™æ€å·¥å‚å®ä¾‹åŒ–åï¼Œè¿™ç§æ–¹å¼ä¸€èˆ¬æ˜¯ç”¨æ¥å…¼å®¹æ—©æœŸçš„ä¸€äº›è€ç³»ç»Ÿï¼Œæ‰€ä»¥&#x3D;&#x3D;äº†è§£ä¸ºä¸»&#x3D;&#x3D;ã€‚</p><h4 id="4-2-5-å®ä¾‹å·¥å‚ä¸FactoryBean"><a href="#4-2-5-å®ä¾‹å·¥å‚ä¸FactoryBean" class="headerlink" title="4.2.5 å®ä¾‹å·¥å‚ä¸FactoryBean"></a>4.2.5 å®ä¾‹å·¥å‚ä¸FactoryBean</h4><p>æ¥ä¸‹æ¥ç»§ç»­æ¥ç ”ç©¶Springçš„ç¬¬ä¸‰ç§beançš„åˆ›å»ºæ–¹å¼<code>å®ä¾‹å·¥å‚å®ä¾‹åŒ–</code>:</p><h5 id="4-2-3-1-ç¯å¢ƒå‡†å¤‡"><a href="#4-2-3-1-ç¯å¢ƒå‡†å¤‡" class="headerlink" title="4.2.3.1 ç¯å¢ƒå‡†å¤‡"></a>4.2.3.1 ç¯å¢ƒå‡†å¤‡</h5><p>(1)å‡†å¤‡ä¸€ä¸ªUserDaoå’ŒUserDaoImplç±»</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserDao</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserDaoImpl</span> <span class="keyword">implements</span> <span class="title class_">UserDao</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;user dao save ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>(2)åˆ›å»ºä¸€ä¸ªå·¥å‚ç±»OrderDaoFactoryå¹¶æä¾›ä¸€ä¸ªæ™®é€šæ–¹æ³•ï¼Œæ³¨æ„æ­¤å¤„å’Œé™æ€å·¥å‚çš„å·¥å‚ç±»ä¸ä¸€æ ·çš„åœ°æ–¹æ˜¯æ–¹æ³•ä¸æ˜¯é™æ€æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserDaoFactory</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> UserDao <span class="title function_">getUserDao</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">UserDaoImpl</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>(3)ç¼–å†™AppForInstanceUserè¿è¡Œç±»ï¼Œåœ¨ç±»ä¸­é€šè¿‡å·¥å‚è·å–å¯¹è±¡</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AppForInstanceUser</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//åˆ›å»ºå®ä¾‹å·¥å‚å¯¹è±¡</span></span><br><span class="line">        <span class="type">UserDaoFactory</span> <span class="variable">userDaoFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserDaoFactory</span>();</span><br><span class="line">        <span class="comment">//é€šè¿‡å®ä¾‹å·¥å‚å¯¹è±¡åˆ›å»ºå¯¹è±¡</span></span><br><span class="line">        <span class="type">UserDao</span> <span class="variable">userDao</span> <span class="operator">=</span> userDaoFactory.getUserDao();</span><br><span class="line">        userDao.save();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>(4)è¿è¡Œåï¼Œå¯ä»¥æŸ¥çœ‹åˆ°ç»“æœ</p><p><img src="/2022/07/26/Spring_day1/1629788769436.png" alt="1629788769436"></p><p>å¯¹äºä¸Šé¢è¿™ç§å®ä¾‹å·¥å‚çš„æ–¹å¼å¦‚ä½•äº¤ç»™Springç®¡ç†å‘¢?</p><h5 id="4-2-3-2-å®ä¾‹å·¥å‚å®ä¾‹åŒ–"><a href="#4-2-3-2-å®ä¾‹å·¥å‚å®ä¾‹åŒ–" class="headerlink" title="4.2.3.2 å®ä¾‹å·¥å‚å®ä¾‹åŒ–"></a>4.2.3.2 å®ä¾‹å·¥å‚å®ä¾‹åŒ–</h5><p>å…·ä½“å®ç°æ­¥éª¤ä¸º:</p><p>(1)åœ¨springçš„é…ç½®æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹:</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userFactory&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.factory.UserDaoFactory&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userDao&quot;</span> <span class="attr">factory-method</span>=<span class="string">&quot;getUserDao&quot;</span> <span class="attr">factory-bean</span>=<span class="string">&quot;userFactory&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure><p>å®ä¾‹åŒ–å·¥å‚è¿è¡Œçš„é¡ºåºæ˜¯:</p><ul><li><p>åˆ›å»ºå®ä¾‹åŒ–å·¥å‚å¯¹è±¡,å¯¹åº”çš„æ˜¯ç¬¬ä¸€è¡Œé…ç½®</p></li><li><p>è°ƒç”¨å¯¹è±¡ä¸­çš„æ–¹æ³•æ¥åˆ›å»ºbeanï¼Œå¯¹åº”çš„æ˜¯ç¬¬äºŒè¡Œé…ç½®</p><ul><li><p>factory-bean:å·¥å‚çš„å®ä¾‹å¯¹è±¡</p></li><li><p>factory-method:å·¥å‚å¯¹è±¡ä¸­çš„å…·ä½“åˆ›å»ºå¯¹è±¡çš„æ–¹æ³•å,å¯¹åº”å…³ç³»å¦‚ä¸‹:</p><p><img src="/2022/07/26/Spring_day1/image-20210729200203249.png" alt="image-20210729200203249"></p></li></ul></li></ul><p>factory-mehod:å…·ä½“å·¥å‚ç±»ä¸­åˆ›å»ºå¯¹è±¡çš„æ–¹æ³•å</p><p>(2)åœ¨AppForInstanceUserè¿è¡Œç±»ï¼Œä½¿ç”¨ä»IOCå®¹å™¨ä¸­è·å–beançš„æ–¹æ³•è¿›è¡Œè¿è¡Œæµ‹è¯•</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AppForInstanceUser</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">ApplicationContext</span> <span class="variable">ctx</span> <span class="operator">=</span> <span class="keyword">new</span> </span><br><span class="line">            <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;applicationContext.xml&quot;</span>);</span><br><span class="line">        <span class="type">UserDao</span> <span class="variable">userDao</span> <span class="operator">=</span> (UserDao) ctx.getBean(<span class="string">&quot;userDao&quot;</span>);</span><br><span class="line">        userDao.save();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>(3)è¿è¡Œåï¼Œå¯ä»¥æŸ¥çœ‹åˆ°ç»“æœ</p><p><img src="/2022/07/26/Spring_day1/1629788769436.png" alt="1629788769436"></p><p>å®ä¾‹å·¥å‚å®ä¾‹åŒ–çš„æ–¹å¼å°±å·²ç»ä»‹ç»å®Œäº†ï¼Œé…ç½®çš„è¿‡ç¨‹è¿˜æ˜¯æ¯”è¾ƒå¤æ‚ï¼Œæ‰€ä»¥Springä¸ºäº†ç®€åŒ–è¿™ç§é…ç½®æ–¹å¼å°±æä¾›äº†ä¸€ç§å«<code>FactoryBean</code>çš„æ–¹å¼æ¥ç®€åŒ–å¼€å‘ã€‚</p><h5 id="4-2-3-3-FactoryBeançš„ä½¿ç”¨"><a href="#4-2-3-3-FactoryBeançš„ä½¿ç”¨" class="headerlink" title="4.2.3.3 FactoryBeançš„ä½¿ç”¨"></a>4.2.3.3 FactoryBeançš„ä½¿ç”¨</h5><p>å…·ä½“çš„ä½¿ç”¨æ­¥éª¤ä¸º:</p><p>(1)åˆ›å»ºä¸€ä¸ªUserDaoFactoryBeançš„ç±»ï¼Œå®ç°FactoryBeanæ¥å£ï¼Œé‡å†™æ¥å£çš„æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserDaoFactoryBean</span> <span class="keyword">implements</span> <span class="title class_">FactoryBean</span>&lt;UserDao&gt; &#123;</span><br><span class="line">    <span class="comment">//ä»£æ›¿åŸå§‹å®ä¾‹å·¥å‚ä¸­åˆ›å»ºå¯¹è±¡çš„æ–¹æ³•</span></span><br><span class="line">    <span class="keyword">public</span> UserDao <span class="title function_">getObject</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">UserDaoImpl</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//è¿”å›æ‰€åˆ›å»ºç±»çš„Classå¯¹è±¡</span></span><br><span class="line">    <span class="keyword">public</span> Class&lt;?&gt; getObjectType() &#123;</span><br><span class="line">        <span class="keyword">return</span> UserDao.class;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>(2)åœ¨Springçš„é…ç½®æ–‡ä»¶ä¸­è¿›è¡Œé…ç½®</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userDao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.factory.UserDaoFactoryBean&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure><p>(3)AppForInstanceUserè¿è¡Œç±»ä¸ç”¨åšä»»ä½•ä¿®æ”¹ï¼Œç›´æ¥è¿è¡Œ</p><p><img src="/2022/07/26/Spring_day1/1629788769436.png" alt="1629788769436"></p><p>è¿™ç§æ–¹å¼åœ¨Springå»æ•´åˆå…¶ä»–æ¡†æ¶çš„æ—¶å€™ä¼šè¢«ç”¨åˆ°ï¼Œæ‰€ä»¥è¿™ç§æ–¹å¼éœ€è¦å¤§å®¶ç†è§£æŒæ¡ã€‚</p><p>æŸ¥çœ‹æºç ä¼šå‘ç°ï¼ŒFactoryBeanæ¥å£å…¶å®ä¼šæœ‰ä¸‰ä¸ªæ–¹æ³•ï¼Œåˆ†åˆ«æ˜¯:</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">T <span class="title function_">getObject</span><span class="params">()</span> <span class="keyword">throws</span> Exception;</span><br><span class="line"></span><br><span class="line">Class&lt;?&gt; getObjectType();</span><br><span class="line"></span><br><span class="line"><span class="keyword">default</span> <span class="type">boolean</span> <span class="title function_">isSingleton</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ–¹æ³•ä¸€</strong>ï¼šgetObject()ï¼Œè¢«é‡å†™åï¼Œåœ¨æ–¹æ³•ä¸­è¿›è¡Œå¯¹è±¡çš„åˆ›å»ºå¹¶è¿”å›</p><p><strong>æ–¹æ³•äºŒ</strong>ï¼šgetObjectType(),è¢«é‡å†™åï¼Œä¸»è¦è¿”å›çš„æ˜¯è¢«åˆ›å»ºç±»çš„Classå¯¹è±¡</p><p><strong>æ–¹æ³•ä¸‰</strong>ï¼šæ²¡æœ‰è¢«é‡å†™ï¼Œå› ä¸ºå®ƒå·²ç»ç»™äº†é»˜è®¤å€¼ï¼Œä»æ–¹æ³•åä¸­å¯ä»¥çœ‹å‡ºå…¶ä½œç”¨æ˜¯è®¾ç½®å¯¹è±¡æ˜¯å¦ä¸ºå•ä¾‹ï¼Œé»˜è®¤trueï¼Œä»æ„æ€ä¸Šæ¥çœ‹ï¼Œæˆ‘ä»¬çŒœæƒ³é»˜è®¤åº”è¯¥æ˜¯å•ä¾‹ï¼Œå¦‚ä½•æ¥éªŒè¯å‘¢?</p><p>æ€è·¯å¾ˆç®€å•ï¼Œå°±æ˜¯ä»å®¹å™¨ä¸­è·å–è¯¥å¯¹è±¡çš„å¤šä¸ªå€¼ï¼Œæ‰“å°åˆ°æ§åˆ¶å°ï¼ŒæŸ¥çœ‹æ˜¯å¦ä¸ºåŒä¸€ä¸ªå¯¹è±¡ã€‚</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AppForInstanceUser</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">ApplicationContext</span> <span class="variable">ctx</span> <span class="operator">=</span> <span class="keyword">new</span> </span><br><span class="line">            <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;applicationContext.xml&quot;</span>);</span><br><span class="line">        <span class="type">UserDao</span> <span class="variable">userDao1</span> <span class="operator">=</span> (UserDao) ctx.getBean(<span class="string">&quot;userDao&quot;</span>);</span><br><span class="line">        <span class="type">UserDao</span> <span class="variable">userDao2</span> <span class="operator">=</span> (UserDao) ctx.getBean(<span class="string">&quot;userDao&quot;</span>);</span><br><span class="line">        System.out.println(userDao1);</span><br><span class="line">        System.out.println(userDao2);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ‰“å°ç»“æœï¼Œå¦‚ä¸‹:</p><p><img src="/2022/07/26/Spring_day1/1629790070607.png" alt="1629790070607"></p><p>é€šè¿‡éªŒè¯ï¼Œä¼šå‘ç°é»˜è®¤æ˜¯å•ä¾‹ï¼Œé‚£å¦‚æœæƒ³æ”¹æˆå•ä¾‹å…·ä½“å¦‚ä½•å®ç°?</p><p>åªéœ€è¦å°†isSingleton()æ–¹æ³•è¿›è¡Œé‡å†™ï¼Œä¿®æ”¹è¿”å›ä¸ºfalseï¼Œå³å¯</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//FactoryBeanåˆ›å»ºå¯¹è±¡</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserDaoFactoryBean</span> <span class="keyword">implements</span> <span class="title class_">FactoryBean</span>&lt;UserDao&gt; &#123;</span><br><span class="line">    <span class="comment">//ä»£æ›¿åŸå§‹å®ä¾‹å·¥å‚ä¸­åˆ›å»ºå¯¹è±¡çš„æ–¹æ³•</span></span><br><span class="line">    <span class="keyword">public</span> UserDao <span class="title function_">getObject</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">UserDaoImpl</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Class&lt;?&gt; getObjectType() &#123;</span><br><span class="line">        <span class="keyword">return</span> UserDao.class;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isSingleton</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é‡æ–°è¿è¡ŒAppForInstanceUserï¼ŒæŸ¥çœ‹ç»“æœ</p><p><img src="/2022/07/26/Spring_day1/1629790197860.png" alt="1629790197860"></p><p>ä»ç»“æœä¸­å¯ä»¥çœ‹å‡ºç°åœ¨å·²ç»æ˜¯éå•ä¾‹äº†ï¼Œä½†æ˜¯ä¸€èˆ¬æƒ…å†µä¸‹æˆ‘ä»¬éƒ½ä¼šé‡‡ç”¨å•ä¾‹ï¼Œä¹Ÿå°±æ˜¯é‡‡ç”¨é»˜è®¤å³å¯ã€‚æ‰€ä»¥isSingleton()æ–¹æ³•ä¸€èˆ¬ä¸éœ€è¦è¿›è¡Œé‡å†™ã€‚</p><h4 id="4-2-6-beanå®ä¾‹åŒ–å°ç»“"><a href="#4-2-6-beanå®ä¾‹åŒ–å°ç»“" class="headerlink" title="4.2.6 beanå®ä¾‹åŒ–å°ç»“"></a>4.2.6 beanå®ä¾‹åŒ–å°ç»“</h4><p>é€šè¿‡è¿™ä¸€èŠ‚çš„å­¦ä¹ ï¼Œéœ€è¦æŒæ¡:</p><p>(1)beanæ˜¯å¦‚ä½•åˆ›å»ºçš„å‘¢?</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">æ„é€ æ–¹æ³•</span><br></pre></td></tr></table></figure><p>(2)Springçš„IOCå®ä¾‹åŒ–å¯¹è±¡çš„ä¸‰ç§æ–¹å¼åˆ†åˆ«æ˜¯:</p><ul><li>æ„é€ æ–¹æ³•(å¸¸ç”¨)</li><li>é™æ€å·¥å‚(äº†è§£)</li><li>å®ä¾‹å·¥å‚(äº†è§£)<ul><li>FactoryBean(å®ç”¨)</li></ul></li></ul><p>è¿™äº›æ–¹å¼ä¸­ï¼Œé‡ç‚¹æŒæ¡<code>æ„é€ æ–¹æ³•</code>å’Œ<code>FactoryBean</code>å³å¯ã€‚</p><p>éœ€è¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯ï¼Œæ„é€ æ–¹æ³•åœ¨ç±»ä¸­é»˜è®¤ä¼šæä¾›ï¼Œä½†æ˜¯å¦‚æœé‡å†™äº†æ„é€ æ–¹æ³•ï¼Œé»˜è®¤çš„å°±ä¼šæ¶ˆå¤±ï¼Œåœ¨ä½¿ç”¨çš„è¿‡ç¨‹ä¸­éœ€è¦æ³¨æ„ï¼Œå¦‚æœéœ€è¦é‡å†™æ„é€ æ–¹æ³•ï¼Œæœ€å¥½æŠŠé»˜è®¤çš„æ„é€ æ–¹æ³•ä¹Ÿé‡å†™ä¸‹ã€‚</p><h3 id="4-3-beançš„ç”Ÿå‘½å‘¨æœŸ"><a href="#4-3-beançš„ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="4.3 beançš„ç”Ÿå‘½å‘¨æœŸ"></a>4.3 beançš„ç”Ÿå‘½å‘¨æœŸ</h3><p>å…³äºbeançš„ç›¸å…³çŸ¥è¯†è¿˜æœ‰æœ€åä¸€ä¸ªæ˜¯<code>beançš„ç”Ÿå‘½å‘¨æœŸ</code>,å¯¹äºç”Ÿå‘½å‘¨æœŸï¼Œæˆ‘ä»¬ä¸»è¦å›´ç»•ç€<code>beanç”Ÿå‘½å‘¨æœŸæ§åˆ¶</code>æ¥è®²è§£:</p><ul><li>é¦–å…ˆç†è§£ä¸‹ä»€ä¹ˆæ˜¯ç”Ÿå‘½å‘¨æœŸ?<ul><li>ä»åˆ›å»ºåˆ°æ¶ˆäº¡çš„å®Œæ•´è¿‡ç¨‹,ä¾‹å¦‚äººä»å‡ºç”Ÿåˆ°æ­»äº¡çš„æ•´ä¸ªè¿‡ç¨‹å°±æ˜¯ä¸€ä¸ªç”Ÿå‘½å‘¨æœŸã€‚</li></ul></li><li>beanç”Ÿå‘½å‘¨æœŸæ˜¯ä»€ä¹ˆ?<ul><li>beanå¯¹è±¡ä»åˆ›å»ºåˆ°é”€æ¯çš„æ•´ä½“è¿‡ç¨‹ã€‚</li></ul></li><li>beanç”Ÿå‘½å‘¨æœŸæ§åˆ¶æ˜¯ä»€ä¹ˆ?<ul><li>åœ¨beanåˆ›å»ºååˆ°é”€æ¯å‰åšä¸€äº›äº‹æƒ…ã€‚</li></ul></li></ul><p>ç°åœ¨æˆ‘ä»¬é¢ä¸´çš„é—®é¢˜æ˜¯å¦‚ä½•åœ¨beançš„åˆ›å»ºä¹‹åå’Œé”€æ¯ä¹‹å‰æŠŠæˆ‘ä»¬éœ€è¦æ·»åŠ çš„å†…å®¹æ·»åŠ è¿›å»ã€‚</p><h4 id="4-3-1-ç¯å¢ƒå‡†å¤‡"><a href="#4-3-1-ç¯å¢ƒå‡†å¤‡" class="headerlink" title="4.3.1 ç¯å¢ƒå‡†å¤‡"></a>4.3.1 ç¯å¢ƒå‡†å¤‡</h4><p>è¿˜æ˜¯è€è§„çŸ©ï¼Œä¸ºäº†æ–¹ä¾¿å¤§å®¶åæœŸä»£ç çš„é˜…è¯»ï¼Œæˆ‘ä»¬é‡æ–°æ­å»ºä¸‹ç¯å¢ƒ:</p><ul><li>åˆ›å»ºä¸€ä¸ªMavené¡¹ç›®</li><li>pom.xmlæ·»åŠ ä¾èµ–</li><li>resourcesä¸‹æ·»åŠ springçš„é…ç½®æ–‡ä»¶applicationContext.xml</li></ul><p>è¿™äº›æ­¥éª¤å’Œå‰é¢çš„éƒ½ä¸€è‡´ï¼Œå¤§å®¶å¯ä»¥å¿«é€Ÿçš„æ‹·è´å³å¯ï¼Œæœ€ç»ˆé¡¹ç›®çš„ç»“æ„å¦‚ä¸‹:</p><p><img src="/2022/07/26/Spring_day1/1629791473409.png" alt="1629791473409"></p><p>(1)é¡¹ç›®ä¸­æ·»åŠ BookDaoã€BookDaoImplã€BookServiceå’ŒBookServiceImplç±»</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">BookDao</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookDaoImpl</span> <span class="keyword">implements</span> <span class="title class_">BookDao</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;book dao save ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">BookService</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">BookService</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> BookDao bookDao;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setBookDao</span><span class="params">(BookDao bookDao)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.bookDao = bookDao;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;book service save ...&quot;</span>);</span><br><span class="line">        bookDao.save();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>(2)resourcesä¸‹æä¾›springçš„é…ç½®æ–‡ä»¶</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;bookDao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.dao.impl.BookDaoImpl&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><p>(3)ç¼–å†™AppForLifeCycleè¿è¡Œç±»ï¼ŒåŠ è½½Springçš„IOCå®¹å™¨ï¼Œå¹¶ä»ä¸­è·å–å¯¹åº”çš„beanå¯¹è±¡</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AppForLifeCycle</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">( String[] args )</span> &#123;</span><br><span class="line">        <span class="type">ApplicationContext</span> <span class="variable">ctx</span> <span class="operator">=</span> <span class="keyword">new</span> </span><br><span class="line">        <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;applicationContext.xml&quot;</span>);</span><br><span class="line">        <span class="type">BookDao</span> <span class="variable">bookDao</span> <span class="operator">=</span> (BookDao) ctx.getBean(<span class="string">&quot;bookDao&quot;</span>);</span><br><span class="line">        bookDao.save();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="4-3-2-ç”Ÿå‘½å‘¨æœŸè®¾ç½®"><a href="#4-3-2-ç”Ÿå‘½å‘¨æœŸè®¾ç½®" class="headerlink" title="4.3.2 ç”Ÿå‘½å‘¨æœŸè®¾ç½®"></a>4.3.2 ç”Ÿå‘½å‘¨æœŸè®¾ç½®</h4><p>æ¥ä¸‹æ¥ï¼Œåœ¨ä¸Šé¢è¿™ä¸ªç¯å¢ƒä¸­æ¥ä¸ºBookDaoæ·»åŠ ç”Ÿå‘½å‘¨æœŸçš„æ§åˆ¶æ–¹æ³•ï¼Œå…·ä½“çš„æ§åˆ¶æœ‰ä¸¤ä¸ªé˜¶æ®µ:</p><ul><li>beanåˆ›å»ºä¹‹åï¼Œæƒ³è¦æ·»åŠ å†…å®¹ï¼Œæ¯”å¦‚ç”¨æ¥åˆå§‹åŒ–éœ€è¦ç”¨åˆ°èµ„æº</li><li>beané”€æ¯ä¹‹å‰ï¼Œæƒ³è¦æ·»åŠ å†…å®¹ï¼Œæ¯”å¦‚ç”¨æ¥é‡Šæ”¾ç”¨åˆ°çš„èµ„æº</li></ul><h5 id="æ­¥éª¤1-æ·»åŠ åˆå§‹åŒ–å’Œé”€æ¯æ–¹æ³•"><a href="#æ­¥éª¤1-æ·»åŠ åˆå§‹åŒ–å’Œé”€æ¯æ–¹æ³•" class="headerlink" title="æ­¥éª¤1:æ·»åŠ åˆå§‹åŒ–å’Œé”€æ¯æ–¹æ³•"></a>æ­¥éª¤1:æ·»åŠ åˆå§‹åŒ–å’Œé”€æ¯æ–¹æ³•</h5><p>é’ˆå¯¹è¿™ä¸¤ä¸ªé˜¶æ®µï¼Œæˆ‘ä»¬åœ¨BooDaoImplç±»ä¸­åˆ†åˆ«æ·»åŠ ä¸¤ä¸ªæ–¹æ³•ï¼Œ&#x3D;&#x3D;æ–¹æ³•åä»»æ„&#x3D;&#x3D;</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookDaoImpl</span> <span class="keyword">implements</span> <span class="title class_">BookDao</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;book dao save ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//è¡¨ç¤ºbeanåˆå§‹åŒ–å¯¹åº”çš„æ“ä½œ</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;init...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//è¡¨ç¤ºbeané”€æ¯å‰å¯¹åº”çš„æ“ä½œ</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">destory</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;destory...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="æ­¥éª¤2-é…ç½®ç”Ÿå‘½å‘¨æœŸ"><a href="#æ­¥éª¤2-é…ç½®ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="æ­¥éª¤2:é…ç½®ç”Ÿå‘½å‘¨æœŸ"></a>æ­¥éª¤2:é…ç½®ç”Ÿå‘½å‘¨æœŸ</h5><p>åœ¨é…ç½®æ–‡ä»¶æ·»åŠ é…ç½®ï¼Œå¦‚ä¸‹:</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;bookDao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.dao.impl.BookDaoImpl&quot;</span> <span class="attr">init-method</span>=<span class="string">&quot;init&quot;</span> <span class="attr">destroy-method</span>=<span class="string">&quot;destory&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure><h5 id="æ­¥éª¤3-è¿è¡Œç¨‹åº-1"><a href="#æ­¥éª¤3-è¿è¡Œç¨‹åº-1" class="headerlink" title="æ­¥éª¤3:è¿è¡Œç¨‹åº"></a>æ­¥éª¤3:è¿è¡Œç¨‹åº</h5><p>è¿è¡ŒAppForLifeCycleæ‰“å°ç»“æœä¸º:</p><p><img src="/2022/07/26/Spring_day1/1629792339889.png" alt="1629792339889"></p><p>ä»ç»“æœä¸­å¯ä»¥çœ‹å‡ºï¼Œinitæ–¹æ³•æ‰§è¡Œäº†ï¼Œä½†æ˜¯destroyæ–¹æ³•å´æœªæ‰§è¡Œï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢?</p><ul><li>Springçš„IOCå®¹å™¨æ˜¯è¿è¡Œåœ¨JVMä¸­</li><li>è¿è¡Œmainæ–¹æ³•å,JVMå¯åŠ¨,SpringåŠ è½½é…ç½®æ–‡ä»¶ç”ŸæˆIOCå®¹å™¨,ä»å®¹å™¨è·å–beanå¯¹è±¡ï¼Œç„¶åè°ƒæ–¹æ³•æ‰§è¡Œ</li><li>mainæ–¹æ³•æ‰§è¡Œå®Œåï¼ŒJVMé€€å‡ºï¼Œè¿™ä¸ªæ—¶å€™IOCå®¹å™¨ä¸­çš„beanè¿˜æ²¡æœ‰æ¥å¾—åŠé”€æ¯å°±å·²ç»ç»“æŸäº†</li><li>æ‰€ä»¥æ²¡æœ‰è°ƒç”¨å¯¹åº”çš„destroyæ–¹æ³•</li></ul><p>çŸ¥é“äº†å‡ºç°é—®é¢˜çš„åŸå› ï¼Œå…·ä½“è¯¥å¦‚ä½•è§£å†³å‘¢?</p><h4 id="4-3-3-closeå…³é—­å®¹å™¨"><a href="#4-3-3-closeå…³é—­å®¹å™¨" class="headerlink" title="4.3.3 closeå…³é—­å®¹å™¨"></a>4.3.3 closeå…³é—­å®¹å™¨</h4><ul><li><p>ApplicationContextä¸­æ²¡æœ‰closeæ–¹æ³•</p></li><li><p>éœ€è¦å°†ApplicationContextæ›´æ¢æˆClassPathXmlApplicationContext</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">ClassPathXmlApplicationContext</span> <span class="variable">ctx</span> <span class="operator">=</span> <span class="keyword">new</span> </span><br><span class="line">    <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;applicationContext.xml&quot;</span>);</span><br></pre></td></tr></table></figure></li><li><p>è°ƒç”¨ctxçš„close()æ–¹æ³•</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ctx.close();</span><br></pre></td></tr></table></figure></li><li><p>è¿è¡Œç¨‹åºï¼Œå°±èƒ½æ‰§è¡Œdestroyæ–¹æ³•çš„å†…å®¹</p><p><img src="/2022/07/26/Spring_day1/1629792857608.png" alt="1629792857608"></p></li></ul><h4 id="4-3-4-æ³¨å†Œé’©å­å…³é—­å®¹å™¨"><a href="#4-3-4-æ³¨å†Œé’©å­å…³é—­å®¹å™¨" class="headerlink" title="4.3.4 æ³¨å†Œé’©å­å…³é—­å®¹å™¨"></a>4.3.4 æ³¨å†Œé’©å­å…³é—­å®¹å™¨</h4><ul><li><p>åœ¨å®¹å™¨æœªå…³é—­ä¹‹å‰ï¼Œæå‰è®¾ç½®å¥½å›è°ƒå‡½æ•°ï¼Œè®©JVMåœ¨é€€å‡ºä¹‹å‰å›è°ƒæ­¤å‡½æ•°æ¥å…³é—­å®¹å™¨</p></li><li><p>è°ƒç”¨ctxçš„<code>registerShutdownHook()</code>æ–¹æ³•</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ctx.registerShutdownHook();</span><br></pre></td></tr></table></figure><p>**æ³¨æ„:**registerShutdownHookåœ¨ApplicationContextä¸­ä¹Ÿæ²¡æœ‰</p></li><li><p>è¿è¡Œåï¼ŒæŸ¥è¯¢æ‰“å°ç»“æœ</p><p><img src="/2022/07/26/Spring_day1/1629792857608.png" alt="1629792857608"></p></li></ul><p>ä¸¤ç§æ–¹å¼ä»‹ç»å®Œåï¼Œcloseå’ŒregisterShutdownHooké€‰å“ªä¸ª?</p><p>ç›¸åŒç‚¹ï¼šè¿™ä¸¤ç§éƒ½èƒ½ç”¨æ¥å…³é—­å®¹å™¨</p><p>ä¸åŒç‚¹ï¼šclose()æ˜¯åœ¨è°ƒç”¨çš„æ—¶å€™å…³é—­ï¼ŒregisterShutdownHook()æ˜¯åœ¨JVMé€€å‡ºå‰è°ƒç”¨å…³é—­ã€‚</p><p>åˆ†æä¸Šé¢çš„å®ç°è¿‡ç¨‹ï¼Œä¼šå‘ç°æ·»åŠ åˆå§‹åŒ–å’Œé”€æ¯æ–¹æ³•ï¼Œå³éœ€è¦ç¼–ç ä¹Ÿéœ€è¦é…ç½®ï¼Œå®ç°èµ·æ¥æ­¥éª¤æ¯”è¾ƒå¤šä¹Ÿæ¯”è¾ƒä¹±ã€‚</p><p>Springæä¾›äº†ä¸¤ä¸ªæ¥å£æ¥å®Œæˆç”Ÿå‘½å‘¨æœŸçš„æ§åˆ¶ï¼Œå¥½å¤„æ˜¯å¯ä»¥ä¸ç”¨å†è¿›è¡Œé…ç½®<code>init-method</code>å’Œ<code>destroy-method</code></p><p>æ¥ä¸‹æ¥åœ¨BookServiceImplå®Œæˆè¿™ä¸¤ä¸ªæ¥å£çš„ä½¿ç”¨:</p><p>ä¿®æ”¹BookServiceImplç±»ï¼Œæ·»åŠ ä¸¤ä¸ªæ¥å£<code>InitializingBean</code>ï¼Œ <code>DisposableBean</code>å¹¶å®ç°æ¥å£ä¸­çš„ä¸¤ä¸ªæ–¹æ³•<code>afterPropertiesSet</code>å’Œ<code>destroy</code></p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">BookService</span>, InitializingBean, DisposableBean &#123;</span><br><span class="line">    <span class="keyword">private</span> BookDao bookDao;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setBookDao</span><span class="params">(BookDao bookDao)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.bookDao = bookDao;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;book service save ...&quot;</span>);</span><br><span class="line">        bookDao.save(); </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">destroy</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;service destroy&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterPropertiesSet</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;service init&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é‡æ–°è¿è¡ŒAppForLifeCycleç±»ï¼Œ</p><p><img src="/2022/07/26/Spring_day1/1629794527419.png" alt="1629794527419"></p><p>é‚£ç¬¬äºŒç§æ–¹å¼çš„å®ç°ï¼Œæˆ‘ä»¬ä¹Ÿä»‹ç»å®Œäº†ã€‚</p><p><strong>å°ç»†èŠ‚</strong></p><ul><li><p>å¯¹äºInitializingBeanæ¥å£ä¸­çš„afterPropertiesSetæ–¹æ³•ï¼Œç¿»è¯‘è¿‡æ¥ä¸º<code>å±æ€§è®¾ç½®ä¹‹å</code>ã€‚</p></li><li><p>å¯¹äºBookServiceImplæ¥è¯´ï¼ŒbookDaoæ˜¯å®ƒçš„ä¸€ä¸ªå±æ€§</p></li><li><p>setBookDaoæ–¹æ³•æ˜¯Springçš„IOCå®¹å™¨ä¸ºå…¶æ³¨å…¥å±æ€§çš„æ–¹æ³•</p></li><li><p>æ€è€ƒ:afterPropertiesSetå’ŒsetBookDaoè°å…ˆæ‰§è¡Œ?</p><ul><li><p>ä»æ–¹æ³•ååˆ†æï¼ŒçŒœæƒ³åº”è¯¥æ˜¯setBookDaoæ–¹æ³•å…ˆæ‰§è¡Œ</p></li><li><p>éªŒè¯æ€è·¯ï¼Œåœ¨setBookDaoæ–¹æ³•ä¸­æ·»åŠ ä¸€å¥è¯</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setBookDao</span><span class="params">(BookDao bookDao)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;set .....&quot;</span>);</span><br><span class="line">        <span class="built_in">this</span>.bookDao = bookDao;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>é‡æ–°è¿è¡ŒAppForLifeCycleï¼Œæ‰“å°ç»“æœå¦‚ä¸‹:</p><p><img src="/2022/07/26/Spring_day1/1629794928636.png" alt="1629794928636"></p><p>éªŒè¯çš„ç»“æœå’Œæˆ‘ä»¬çŒœæƒ³çš„ç»“æœæ˜¯ä¸€è‡´çš„ï¼Œæ‰€ä»¥åˆå§‹åŒ–æ–¹æ³•ä¼šåœ¨ç±»ä¸­å±æ€§è®¾ç½®ä¹‹åæ‰§è¡Œã€‚</p></li></ul></li></ul><h4 id="4-3-5-beanç”Ÿå‘½å‘¨æœŸå°ç»“"><a href="#4-3-5-beanç”Ÿå‘½å‘¨æœŸå°ç»“" class="headerlink" title="4.3.5 beanç”Ÿå‘½å‘¨æœŸå°ç»“"></a>4.3.5 beanç”Ÿå‘½å‘¨æœŸå°ç»“</h4><p>(1)å…³äºSpringä¸­å¯¹beanç”Ÿå‘½å‘¨æœŸæ§åˆ¶æä¾›äº†ä¸¤ç§æ–¹å¼:</p><ul><li>åœ¨é…ç½®æ–‡ä»¶ä¸­çš„beanæ ‡ç­¾ä¸­æ·»åŠ <code>init-method</code>å’Œ<code>destroy-method</code>å±æ€§</li><li>ç±»å®ç°<code>InitializingBean</code>ä¸<code>DisposableBean</code>æ¥å£ï¼Œè¿™ç§æ–¹å¼äº†è§£ä¸‹å³å¯ã€‚</li></ul><p>(2)å¯¹äºbeançš„ç”Ÿå‘½å‘¨æœŸæ§åˆ¶åœ¨beançš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸä¸­æ‰€å¤„çš„ä½ç½®å¦‚ä¸‹:</p><ul><li>åˆå§‹åŒ–å®¹å™¨<ul><li>1.åˆ›å»ºå¯¹è±¡(å†…å­˜åˆ†é…)</li><li>2.æ‰§è¡Œæ„é€ æ–¹æ³•</li><li>3.æ‰§è¡Œå±æ€§æ³¨å…¥(setæ“ä½œ)</li><li>4.æ‰§è¡Œbeanåˆå§‹åŒ–æ–¹æ³•</li></ul></li><li>ä½¿ç”¨bean<ul><li>1.æ‰§è¡Œä¸šåŠ¡æ“ä½œ</li></ul></li><li>å…³é—­&#x2F;é”€æ¯å®¹å™¨<ul><li>1.æ‰§è¡Œbeané”€æ¯æ–¹æ³•</li></ul></li></ul><p>(3)å…³é—­å®¹å™¨çš„ä¸¤ç§æ–¹å¼:</p><ul><li>ConfigurableApplicationContextæ˜¯ApplicationContextçš„å­ç±»<ul><li>close()æ–¹æ³•</li><li>registerShutdownHook()æ–¹æ³•</li></ul></li></ul><h2 id="5ï¼ŒDIç›¸å…³å†…å®¹"><a href="#5ï¼ŒDIç›¸å…³å†…å®¹" class="headerlink" title="5ï¼ŒDIç›¸å…³å†…å®¹"></a>5ï¼ŒDIç›¸å…³å†…å®¹</h2><p>å‰é¢æˆ‘ä»¬å·²ç»å®Œæˆäº†beanç›¸å…³æ“ä½œçš„è®²è§£ï¼Œæ¥ä¸‹æ¥å°±è¿›å…¥ç¬¬äºŒä¸ªå¤§çš„æ¨¡å—<code>DIä¾èµ–æ³¨å…¥</code>ï¼Œé¦–å…ˆæ¥ä»‹ç»ä¸‹Springä¸­æœ‰å“ªäº›æ³¨å…¥æ–¹å¼?</p><p>æˆ‘ä»¬å…ˆæ¥æ€è€ƒ</p><ul><li>å‘ä¸€ä¸ªç±»ä¸­ä¼ é€’æ•°æ®çš„æ–¹å¼æœ‰å‡ ç§?<ul><li>æ™®é€šæ–¹æ³•(setæ–¹æ³•)</li><li>æ„é€ æ–¹æ³•</li></ul></li><li>ä¾èµ–æ³¨å…¥æè¿°äº†åœ¨å®¹å™¨ä¸­å»ºç«‹beanä¸beanä¹‹é—´çš„ä¾èµ–å…³ç³»çš„è¿‡ç¨‹ï¼Œå¦‚æœbeanè¿è¡Œéœ€è¦çš„æ˜¯æ•°å­—æˆ–å­—ç¬¦ä¸²å‘¢?<ul><li>å¼•ç”¨ç±»å‹</li><li>ç®€å•ç±»å‹(åŸºæœ¬æ•°æ®ç±»å‹ä¸String)</li></ul></li></ul><p>Springå°±æ˜¯åŸºäºä¸Šé¢è¿™äº›çŸ¥è¯†ç‚¹ï¼Œä¸ºæˆ‘ä»¬æä¾›äº†ä¸¤ç§æ³¨å…¥æ–¹å¼ï¼Œåˆ†åˆ«æ˜¯:</p><ul><li>setteræ³¨å…¥<ul><li>ç®€å•ç±»å‹</li><li>å¼•ç”¨ç±»å‹</li></ul></li><li>æ„é€ å™¨æ³¨å…¥<ul><li>ç®€å•ç±»å‹</li><li>å¼•ç”¨ç±»å‹</li></ul></li></ul><h3 id="5-1-setteræ³¨å…¥"><a href="#5-1-setteræ³¨å…¥" class="headerlink" title="5.1 setteræ³¨å…¥"></a>5.1 setteræ³¨å…¥</h3><ol><li>å¯¹äºsetteræ–¹å¼æ³¨å…¥å¼•ç”¨ç±»å‹çš„æ–¹å¼ä¹‹å‰å·²ç»å­¦ä¹ è¿‡ï¼Œå¿«é€Ÿå›é¡¾ä¸‹:</li></ol><ul><li>åœ¨beanä¸­å®šä¹‰å¼•ç”¨ç±»å‹å±æ€§ï¼Œå¹¶æä¾›<code>å¯è®¿é—®çš„setæ–¹æ³•</code></li></ul><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">BookService</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> BookDao bookDao;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setBookDao</span><span class="params">(BookDao bookDao)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.bookDao = bookDao;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>é…ç½®ä¸­ä½¿ç”¨<code>propertyæ ‡ç­¾refå±æ€§</code>æ³¨å…¥å¼•ç”¨ç±»å‹å¯¹è±¡</li></ul><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;bookService&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.service.impl.BookServiceImpl&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;bookDao&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;bookDao&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;bookDao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.dao.imipl.BookDaoImpl&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure><h4 id="5-1-1-ç¯å¢ƒå‡†å¤‡"><a href="#5-1-1-ç¯å¢ƒå‡†å¤‡" class="headerlink" title="5.1.1 ç¯å¢ƒå‡†å¤‡"></a>5.1.1 ç¯å¢ƒå‡†å¤‡</h4><p>ä¸ºäº†æ›´å¥½çš„å­¦ä¹ ä¸‹é¢å†…å®¹ï¼Œæˆ‘ä»¬ä¾æ—§å‡†å¤‡ä¸€ä¸ªæ–°ç¯å¢ƒ:</p><ul><li>åˆ›å»ºä¸€ä¸ªMavené¡¹ç›®</li><li>pom.xmlæ·»åŠ ä¾èµ–</li><li>resourcesä¸‹æ·»åŠ springçš„é…ç½®æ–‡ä»¶</li></ul><p>è¿™äº›æ­¥éª¤å’Œå‰é¢çš„éƒ½ä¸€è‡´ï¼Œå¤§å®¶å¯ä»¥å¿«é€Ÿçš„æ‹·è´å³å¯ï¼Œæœ€ç»ˆé¡¹ç›®çš„ç»“æ„å¦‚ä¸‹:</p><p><img src="/2022/07/26/Spring_day1/1629799214191.png" alt="1629799214191"></p><p>(1)é¡¹ç›®ä¸­æ·»åŠ BookDaoã€BookDaoImplã€UserDaoã€UserDaoImplã€BookServiceå’ŒBookServiceImplç±»</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">BookDao</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookDaoImpl</span> <span class="keyword">implements</span> <span class="title class_">BookDao</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;book dao save ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserDao</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserDaoImpl</span> <span class="keyword">implements</span> <span class="title class_">UserDao</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;user dao save ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">BookService</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">BookService</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> BookDao bookDao;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setBookDao</span><span class="params">(BookDao bookDao)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.bookDao = bookDao;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;book service save ...&quot;</span>);</span><br><span class="line">        bookDao.save();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>(2)resourcesä¸‹æä¾›springçš„é…ç½®æ–‡ä»¶</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;bookDao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.dao.impl.BookDaoImpl&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;bookService&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.service.impl.BookServiceImpl&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;bookDao&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;bookDao&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><p>(3)ç¼–å†™AppForDISetè¿è¡Œç±»ï¼ŒåŠ è½½Springçš„IOCå®¹å™¨ï¼Œå¹¶ä»ä¸­è·å–å¯¹åº”çš„beanå¯¹è±¡</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AppForDISet</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">( String[] args )</span> &#123;</span><br><span class="line">        <span class="type">ApplicationContext</span> <span class="variable">ctx</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;applicationContext.xml&quot;</span>);</span><br><span class="line">        <span class="type">BookService</span> <span class="variable">bookService</span> <span class="operator">=</span> (BookService) ctx.getBean(<span class="string">&quot;bookService&quot;</span>);</span><br><span class="line">        bookService.save();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥ï¼Œåœ¨ä¸Šé¢è¿™ä¸ªç¯å¢ƒä¸­æ¥å®Œæˆsetteræ³¨å…¥çš„å­¦ä¹ :</p><h4 id="5-1-2-æ³¨å…¥å¼•ç”¨æ•°æ®ç±»å‹"><a href="#5-1-2-æ³¨å…¥å¼•ç”¨æ•°æ®ç±»å‹" class="headerlink" title="5.1.2 æ³¨å…¥å¼•ç”¨æ•°æ®ç±»å‹"></a>5.1.2 æ³¨å…¥å¼•ç”¨æ•°æ®ç±»å‹</h4><blockquote><p>éœ€æ±‚:åœ¨bookServiceImplå¯¹è±¡ä¸­æ³¨å…¥userDao</p><p>1.åœ¨BookServiceImplä¸­å£°æ˜userDaoå±æ€§</p><p>2.ä¸ºuserDaoå±æ€§æä¾›setteræ–¹æ³•</p><p>3.åœ¨é…ç½®æ–‡ä»¶ä¸­ä½¿ç”¨propertyæ ‡ç­¾æ³¨å…¥</p></blockquote><h5 id="æ­¥éª¤1-å£°æ˜å±æ€§å¹¶æä¾›setteræ–¹æ³•"><a href="#æ­¥éª¤1-å£°æ˜å±æ€§å¹¶æä¾›setteræ–¹æ³•" class="headerlink" title="æ­¥éª¤1:å£°æ˜å±æ€§å¹¶æä¾›setteræ–¹æ³•"></a>æ­¥éª¤1:å£°æ˜å±æ€§å¹¶æä¾›setteræ–¹æ³•</h5><p>åœ¨BookServiceImplä¸­å£°æ˜userDaoå±æ€§ï¼Œå¹¶æä¾›setteræ–¹æ³•</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">BookService</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> BookDao bookDao;</span><br><span class="line">    <span class="keyword">private</span> UserDao userDao;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setUserDao</span><span class="params">(UserDao userDao)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.userDao = userDao;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setBookDao</span><span class="params">(BookDao bookDao)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.bookDao = bookDao;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;book service save ...&quot;</span>);</span><br><span class="line">        bookDao.save();</span><br><span class="line">        userDao.save();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="æ­¥éª¤2-é…ç½®æ–‡ä»¶ä¸­è¿›è¡Œæ³¨å…¥é…ç½®"><a href="#æ­¥éª¤2-é…ç½®æ–‡ä»¶ä¸­è¿›è¡Œæ³¨å…¥é…ç½®" class="headerlink" title="æ­¥éª¤2:é…ç½®æ–‡ä»¶ä¸­è¿›è¡Œæ³¨å…¥é…ç½®"></a>æ­¥éª¤2:é…ç½®æ–‡ä»¶ä¸­è¿›è¡Œæ³¨å…¥é…ç½®</h5><p>åœ¨applicationContext.xmlé…ç½®æ–‡ä»¶ä¸­ä½¿ç”¨propertyæ ‡ç­¾æ³¨å…¥</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;bookDao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.dao.impl.BookDaoImpl&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userDao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.dao.impl.UserDaoImpl&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;bookService&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.service.impl.BookServiceImpl&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;bookDao&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;bookDao&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;userDao&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;userDao&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="æ­¥éª¤3-è¿è¡Œç¨‹åº-2"><a href="#æ­¥éª¤3-è¿è¡Œç¨‹åº-2" class="headerlink" title="æ­¥éª¤3:è¿è¡Œç¨‹åº"></a>æ­¥éª¤3:è¿è¡Œç¨‹åº</h5><p>è¿è¡ŒAppForDISetç±»ï¼ŒæŸ¥çœ‹ç»“æœï¼Œè¯´æ˜userDaoå·²ç»æˆåŠŸæ³¨å…¥ã€‚</p><p><img src="/2022/07/26/Spring_day1/1629799873386.png" alt="1629799873386"></p><h4 id="5-1-3-æ³¨å…¥ç®€å•æ•°æ®ç±»å‹"><a href="#5-1-3-æ³¨å…¥ç®€å•æ•°æ®ç±»å‹" class="headerlink" title="5.1.3 æ³¨å…¥ç®€å•æ•°æ®ç±»å‹"></a>5.1.3 æ³¨å…¥ç®€å•æ•°æ®ç±»å‹</h4><blockquote><p>éœ€æ±‚ï¼šç»™BookDaoImplæ³¨å…¥ä¸€äº›ç®€å•æ•°æ®ç±»å‹çš„æ•°æ®</p><p>å‚è€ƒå¼•ç”¨æ•°æ®ç±»å‹çš„æ³¨å…¥ï¼Œæˆ‘ä»¬å¯ä»¥æ¨å‡ºå…·ä½“çš„æ­¥éª¤ä¸º:</p><p>1.åœ¨BookDaoImplç±»ä¸­å£°æ˜å¯¹åº”çš„ç®€å•æ•°æ®ç±»å‹çš„å±æ€§</p><p>2.ä¸ºè¿™äº›å±æ€§æä¾›å¯¹åº”çš„setteræ–¹æ³•</p><p>3.åœ¨applicationContext.xmlä¸­é…ç½®</p></blockquote><p><strong>æ€è€ƒ:</strong></p><p>å¼•ç”¨ç±»å‹ä½¿ç”¨çš„æ˜¯<code>&lt;property name=&quot;&quot; ref=&quot;&quot;/&gt;</code>,ç®€å•æ•°æ®ç±»å‹è¿˜æ˜¯ä½¿ç”¨refä¹ˆ?</p><p>refæ˜¯æŒ‡å‘Springçš„IOCå®¹å™¨ä¸­çš„å¦ä¸€ä¸ªbeanå¯¹è±¡çš„ï¼Œå¯¹äºç®€å•æ•°æ®ç±»å‹ï¼Œæ²¡æœ‰å¯¹åº”çš„beanå¯¹è±¡ï¼Œè¯¥å¦‚ä½•é…ç½®?</p><h5 id="æ­¥éª¤1-å£°æ˜å±æ€§å¹¶æä¾›setteræ–¹æ³•-1"><a href="#æ­¥éª¤1-å£°æ˜å±æ€§å¹¶æä¾›setteræ–¹æ³•-1" class="headerlink" title="æ­¥éª¤1:å£°æ˜å±æ€§å¹¶æä¾›setteræ–¹æ³•"></a>æ­¥éª¤1:å£°æ˜å±æ€§å¹¶æä¾›setteræ–¹æ³•</h5><p>åœ¨BookDaoImplç±»ä¸­å£°æ˜å¯¹åº”çš„ç®€å•æ•°æ®ç±»å‹çš„å±æ€§,å¹¶æä¾›å¯¹åº”çš„setteræ–¹æ³•</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookDaoImpl</span> <span class="keyword">implements</span> <span class="title class_">BookDao</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String databaseName;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> connectionNum;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setConnectionNum</span><span class="params">(<span class="type">int</span> connectionNum)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.connectionNum = connectionNum;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setDatabaseName</span><span class="params">(String databaseName)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.databaseName = databaseName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;book dao save ...&quot;</span>+databaseName+<span class="string">&quot;,&quot;</span>+connectionNum);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="æ­¥éª¤2-é…ç½®æ–‡ä»¶ä¸­è¿›è¡Œæ³¨å…¥é…ç½®-1"><a href="#æ­¥éª¤2-é…ç½®æ–‡ä»¶ä¸­è¿›è¡Œæ³¨å…¥é…ç½®-1" class="headerlink" title="æ­¥éª¤2:é…ç½®æ–‡ä»¶ä¸­è¿›è¡Œæ³¨å…¥é…ç½®"></a>æ­¥éª¤2:é…ç½®æ–‡ä»¶ä¸­è¿›è¡Œæ³¨å…¥é…ç½®</h5><p>åœ¨applicationContext.xmlé…ç½®æ–‡ä»¶ä¸­ä½¿ç”¨propertyæ ‡ç­¾æ³¨å…¥</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;bookDao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.dao.impl.BookDaoImpl&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;databaseName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;mysql&quot;</span>/&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;connectionNum&quot;</span> <span class="attr">value</span>=<span class="string">&quot;10&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userDao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.dao.impl.UserDaoImpl&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;bookService&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.service.impl.BookServiceImpl&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;bookDao&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;bookDao&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;userDao&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;userDao&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>è¯´æ˜:</strong></p><p>valueï¼šåé¢è·Ÿçš„æ˜¯ç®€å•æ•°æ®ç±»å‹ï¼Œå¯¹äºå‚æ•°ç±»å‹ï¼ŒSpringåœ¨æ³¨å…¥çš„æ—¶å€™ä¼šè‡ªåŠ¨è½¬æ¢ï¼Œä½†æ˜¯ä¸èƒ½å†™æˆ</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;connectionNum&quot;</span> <span class="attr">value</span>=<span class="string">&quot;abc&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure><p>è¿™æ ·çš„è¯ï¼Œspringåœ¨å°†<code>abc</code>è½¬æ¢æˆintç±»å‹çš„æ—¶å€™å°±ä¼šæŠ¥é”™ã€‚</p><h5 id="æ­¥éª¤3-è¿è¡Œç¨‹åº-3"><a href="#æ­¥éª¤3-è¿è¡Œç¨‹åº-3" class="headerlink" title="æ­¥éª¤3:è¿è¡Œç¨‹åº"></a>æ­¥éª¤3:è¿è¡Œç¨‹åº</h5><p>è¿è¡ŒAppForDISetç±»ï¼ŒæŸ¥çœ‹ç»“æœï¼Œè¯´æ˜userDaoå·²ç»æˆåŠŸæ³¨å…¥ã€‚</p><p><img src="/2022/07/26/Spring_day1/1629800324721.png" alt="1629800324721"></p><p>**æ³¨æ„:**ä¸¤ä¸ªpropertyæ³¨å…¥æ ‡ç­¾çš„é¡ºåºå¯ä»¥<code>ä»»æ„</code>ã€‚</p><p>å¯¹äºsetteræ³¨å…¥æ–¹å¼çš„åŸºæœ¬ä½¿ç”¨å°±å·²ç»ä»‹ç»å®Œäº†ï¼Œ</p><ul><li>å¯¹äº<strong>å¼•ç”¨æ•°æ®ç±»å‹</strong>ä½¿ç”¨çš„æ˜¯<code>&lt;property name=&quot;&quot; ref=&quot;&quot;/&gt;</code></li><li>å¯¹äº<strong>ç®€å•æ•°æ®ç±»å‹</strong>ä½¿ç”¨çš„æ˜¯<code>&lt;property name=&quot;&quot; value=&quot;&quot;/&gt;</code></li></ul><h3 id="5-2-æ„é€ å™¨æ³¨å…¥"><a href="#5-2-æ„é€ å™¨æ³¨å…¥" class="headerlink" title="5.2 æ„é€ å™¨æ³¨å…¥"></a>5.2 æ„é€ å™¨æ³¨å…¥</h3><h4 id="5-2-1-ç¯å¢ƒå‡†å¤‡"><a href="#5-2-1-ç¯å¢ƒå‡†å¤‡" class="headerlink" title="5.2.1 ç¯å¢ƒå‡†å¤‡"></a>5.2.1 ç¯å¢ƒå‡†å¤‡</h4><p>æ„é€ å™¨æ³¨å…¥ä¹Ÿå°±æ˜¯æ„é€ æ–¹æ³•æ³¨å…¥ï¼Œå­¦ä¹ ä¹‹å‰ï¼Œè¿˜æ˜¯å…ˆå‡†å¤‡ä¸‹ç¯å¢ƒ:</p><ul><li>åˆ›å»ºä¸€ä¸ªMavené¡¹ç›®</li><li>pom.xmlæ·»åŠ ä¾èµ–</li><li>resourcesä¸‹æ·»åŠ springçš„é…ç½®æ–‡ä»¶</li></ul><p>è¿™äº›æ­¥éª¤å’Œå‰é¢çš„éƒ½ä¸€è‡´ï¼Œå¤§å®¶å¯ä»¥å¿«é€Ÿçš„æ‹·è´å³å¯ï¼Œæœ€ç»ˆé¡¹ç›®çš„ç»“æ„å¦‚ä¸‹:</p><p><img src="/2022/07/26/Spring_day1/1629800748639.png" alt="1629800748639"></p><p>(1)é¡¹ç›®ä¸­æ·»åŠ BookDaoã€BookDaoImplã€UserDaoã€UserDaoImplã€BookServiceå’ŒBookServiceImplç±»</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">BookDao</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookDaoImpl</span> <span class="keyword">implements</span> <span class="title class_">BookDao</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> String databaseName;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> connectionNum;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;book dao save ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserDao</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserDaoImpl</span> <span class="keyword">implements</span> <span class="title class_">UserDao</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;user dao save ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">BookService</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">BookService</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> BookDao bookDao;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setBookDao</span><span class="params">(BookDao bookDao)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.bookDao = bookDao;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;book service save ...&quot;</span>);</span><br><span class="line">        bookDao.save();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>(2)resourcesä¸‹æä¾›springçš„é…ç½®æ–‡ä»¶</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;bookDao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.dao.impl.BookDaoImpl&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;bookService&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.service.impl.BookServiceImpl&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;bookDao&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;bookDao&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><p>(3)ç¼–å†™AppForDIConstructorè¿è¡Œç±»ï¼ŒåŠ è½½Springçš„IOCå®¹å™¨ï¼Œå¹¶ä»ä¸­è·å–å¯¹åº”çš„beanå¯¹è±¡</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AppForDIConstructor</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">( String[] args )</span> &#123;</span><br><span class="line">        <span class="type">ApplicationContext</span> <span class="variable">ctx</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;applicationContext.xml&quot;</span>);</span><br><span class="line">        <span class="type">BookService</span> <span class="variable">bookService</span> <span class="operator">=</span> (BookService) ctx.getBean(<span class="string">&quot;bookService&quot;</span>);</span><br><span class="line">        bookService.save();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="5-2-2-æ„é€ å™¨æ³¨å…¥å¼•ç”¨æ•°æ®ç±»å‹"><a href="#5-2-2-æ„é€ å™¨æ³¨å…¥å¼•ç”¨æ•°æ®ç±»å‹" class="headerlink" title="5.2.2 æ„é€ å™¨æ³¨å…¥å¼•ç”¨æ•°æ®ç±»å‹"></a>5.2.2 æ„é€ å™¨æ³¨å…¥å¼•ç”¨æ•°æ®ç±»å‹</h4><p>æ¥ä¸‹æ¥ï¼Œåœ¨ä¸Šé¢è¿™ä¸ªç¯å¢ƒä¸­æ¥å®Œæˆæ„é€ å™¨æ³¨å…¥çš„å­¦ä¹ :</p><blockquote><p>éœ€æ±‚ï¼šå°†BookServiceImplç±»ä¸­çš„bookDaoä¿®æ”¹æˆä½¿ç”¨æ„é€ å™¨çš„æ–¹å¼æ³¨å…¥ã€‚</p><p>1.å°†bookDaoçš„setteræ–¹æ³•åˆ é™¤æ‰</p><p>2.æ·»åŠ å¸¦æœ‰bookDaoå‚æ•°çš„æ„é€ æ–¹æ³•</p><p>3.åœ¨applicationContext.xmlä¸­é…ç½®</p></blockquote><h5 id="æ­¥éª¤1-åˆ é™¤setteræ–¹æ³•å¹¶æä¾›æ„é€ æ–¹æ³•"><a href="#æ­¥éª¤1-åˆ é™¤setteræ–¹æ³•å¹¶æä¾›æ„é€ æ–¹æ³•" class="headerlink" title="æ­¥éª¤1:åˆ é™¤setteræ–¹æ³•å¹¶æä¾›æ„é€ æ–¹æ³•"></a>æ­¥éª¤1:åˆ é™¤setteræ–¹æ³•å¹¶æä¾›æ„é€ æ–¹æ³•</h5><p>åœ¨BookServiceImplç±»ä¸­å°†bookDaoçš„setteræ–¹æ³•åˆ é™¤æ‰,å¹¶æ·»åŠ å¸¦æœ‰bookDaoå‚æ•°çš„æ„é€ æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">BookService</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> BookDao bookDao;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">BookServiceImpl</span><span class="params">(BookDao bookDao)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.bookDao = bookDao;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;book service save ...&quot;</span>);</span><br><span class="line">        bookDao.save();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="æ­¥éª¤2-é…ç½®æ–‡ä»¶ä¸­è¿›è¡Œé…ç½®æ„é€ æ–¹å¼æ³¨å…¥"><a href="#æ­¥éª¤2-é…ç½®æ–‡ä»¶ä¸­è¿›è¡Œé…ç½®æ„é€ æ–¹å¼æ³¨å…¥" class="headerlink" title="æ­¥éª¤2:é…ç½®æ–‡ä»¶ä¸­è¿›è¡Œé…ç½®æ„é€ æ–¹å¼æ³¨å…¥"></a>æ­¥éª¤2:é…ç½®æ–‡ä»¶ä¸­è¿›è¡Œé…ç½®æ„é€ æ–¹å¼æ³¨å…¥</h5><p>åœ¨applicationContext.xmlä¸­é…ç½®</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;bookDao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.dao.impl.BookDaoImpl&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;bookService&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.service.impl.BookServiceImpl&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;bookDao&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;bookDao&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>è¯´æ˜:</strong></p><p>æ ‡ç­¾<constructor-arg>ä¸­</constructor-arg></p><ul><li><p>nameå±æ€§å¯¹åº”çš„å€¼ä¸ºæ„é€ å‡½æ•°ä¸­æ–¹æ³•å½¢å‚çš„å‚æ•°åï¼Œå¿…é¡»è¦ä¿æŒä¸€è‡´ã€‚</p></li><li><p>refå±æ€§æŒ‡å‘çš„æ˜¯springçš„IOCå®¹å™¨ä¸­å…¶ä»–beanå¯¹è±¡ã€‚</p></li></ul><h5 id="æ­¥éª¤3ï¼šè¿è¡Œç¨‹åº"><a href="#æ­¥éª¤3ï¼šè¿è¡Œç¨‹åº" class="headerlink" title="æ­¥éª¤3ï¼šè¿è¡Œç¨‹åº"></a>æ­¥éª¤3ï¼šè¿è¡Œç¨‹åº</h5><p>è¿è¡ŒAppForDIConstructorç±»ï¼ŒæŸ¥çœ‹ç»“æœï¼Œè¯´æ˜bookDaoå·²ç»æˆåŠŸæ³¨å…¥ã€‚</p><p><img src="/2022/07/26/Spring_day1/1629802656916.png" alt="1629802656916"></p><h4 id="5-2-3-æ„é€ å™¨æ³¨å…¥å¤šä¸ªå¼•ç”¨æ•°æ®ç±»å‹"><a href="#5-2-3-æ„é€ å™¨æ³¨å…¥å¤šä¸ªå¼•ç”¨æ•°æ®ç±»å‹" class="headerlink" title="5.2.3 æ„é€ å™¨æ³¨å…¥å¤šä¸ªå¼•ç”¨æ•°æ®ç±»å‹"></a>5.2.3 æ„é€ å™¨æ³¨å…¥å¤šä¸ªå¼•ç”¨æ•°æ®ç±»å‹</h4><blockquote><p>éœ€æ±‚:åœ¨BookServiceImplä½¿ç”¨æ„é€ å‡½æ•°æ³¨å…¥å¤šä¸ªå¼•ç”¨æ•°æ®ç±»å‹ï¼Œæ¯”å¦‚userDao</p><p>1.å£°æ˜userDaoå±æ€§</p><p>2.ç”Ÿæˆä¸€ä¸ªå¸¦æœ‰bookDaoå’ŒuserDaoå‚æ•°çš„æ„é€ å‡½æ•°</p><p>3.åœ¨applicationContext.xmlä¸­é…ç½®æ³¨å…¥</p></blockquote><h5 id="æ­¥éª¤1-æä¾›å¤šä¸ªå±æ€§çš„æ„é€ å‡½æ•°"><a href="#æ­¥éª¤1-æä¾›å¤šä¸ªå±æ€§çš„æ„é€ å‡½æ•°" class="headerlink" title="æ­¥éª¤1:æä¾›å¤šä¸ªå±æ€§çš„æ„é€ å‡½æ•°"></a>æ­¥éª¤1:æä¾›å¤šä¸ªå±æ€§çš„æ„é€ å‡½æ•°</h5><p>åœ¨BookServiceImplå£°æ˜userDaoå¹¶æä¾›å¤šä¸ªå‚æ•°çš„æ„é€ å‡½æ•°</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">BookService</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> BookDao bookDao;</span><br><span class="line">    <span class="keyword">private</span> UserDao userDao;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">BookServiceImpl</span><span class="params">(BookDao bookDao,UserDao userDao)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.bookDao = bookDao;</span><br><span class="line">        <span class="built_in">this</span>.userDao = userDao;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;book service save ...&quot;</span>);</span><br><span class="line">        bookDao.save();</span><br><span class="line">        userDao.save();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ­¥éª¤2:é…ç½®æ–‡ä»¶ä¸­é…ç½®å¤šå‚æ•°æ³¨å…¥</p><p>åœ¨applicationContext.xmlä¸­é…ç½®æ³¨å…¥</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;bookDao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.dao.impl.BookDaoImpl&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userDao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.dao.impl.UserDaoImpl&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;bookService&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.service.impl.BookServiceImpl&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;bookDao&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;bookDao&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;userDao&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;userDao&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><p>**è¯´æ˜:**è¿™ä¸¤ä¸ª<code>&lt;contructor-arg&gt;</code>çš„é…ç½®é¡ºåºå¯ä»¥ä»»æ„</p><h5 id="æ­¥éª¤3-è¿è¡Œç¨‹åº-4"><a href="#æ­¥éª¤3-è¿è¡Œç¨‹åº-4" class="headerlink" title="æ­¥éª¤3:è¿è¡Œç¨‹åº"></a>æ­¥éª¤3:è¿è¡Œç¨‹åº</h5><p>è¿è¡ŒAppForDIConstructorç±»ï¼ŒæŸ¥çœ‹ç»“æœï¼Œè¯´æ˜userDaoå·²ç»æˆåŠŸæ³¨å…¥ã€‚</p><p><img src="/2022/07/26/Spring_day1/1629802697318.png" alt="1629802697318"></p><h4 id="5-2-4-æ„é€ å™¨æ³¨å…¥å¤šä¸ªç®€å•æ•°æ®ç±»å‹"><a href="#5-2-4-æ„é€ å™¨æ³¨å…¥å¤šä¸ªç®€å•æ•°æ®ç±»å‹" class="headerlink" title="5.2.4 æ„é€ å™¨æ³¨å…¥å¤šä¸ªç®€å•æ•°æ®ç±»å‹"></a>5.2.4 æ„é€ å™¨æ³¨å…¥å¤šä¸ªç®€å•æ•°æ®ç±»å‹</h4><blockquote><p>éœ€æ±‚:åœ¨BookDaoImplä¸­ï¼Œä½¿ç”¨æ„é€ å‡½æ•°æ³¨å…¥databaseNameå’ŒconnectionNumä¸¤ä¸ªå‚æ•°ã€‚</p><p>å‚è€ƒå¼•ç”¨æ•°æ®ç±»å‹çš„æ³¨å…¥ï¼Œæˆ‘ä»¬å¯ä»¥æ¨å‡ºå…·ä½“çš„æ­¥éª¤ä¸º:</p><p>1.æä¾›ä¸€ä¸ªåŒ…å«è¿™ä¸¤ä¸ªå‚æ•°çš„æ„é€ æ–¹æ³•</p><p>2.åœ¨applicationContext.xmlä¸­è¿›è¡Œæ³¨å…¥é…ç½®</p></blockquote><h5 id="æ­¥éª¤1-æ·»åŠ å¤šä¸ªç®€å•å±æ€§å¹¶æä¾›æ„é€ æ–¹æ³•"><a href="#æ­¥éª¤1-æ·»åŠ å¤šä¸ªç®€å•å±æ€§å¹¶æä¾›æ„é€ æ–¹æ³•" class="headerlink" title="æ­¥éª¤1:æ·»åŠ å¤šä¸ªç®€å•å±æ€§å¹¶æä¾›æ„é€ æ–¹æ³•"></a>æ­¥éª¤1:æ·»åŠ å¤šä¸ªç®€å•å±æ€§å¹¶æä¾›æ„é€ æ–¹æ³•</h5><p>ä¿®æ”¹BookDaoImplç±»ï¼Œæ·»åŠ æ„é€ æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookDaoImpl</span> <span class="keyword">implements</span> <span class="title class_">BookDao</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String databaseName;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> connectionNum;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">BookDaoImpl</span><span class="params">(String databaseName, <span class="type">int</span> connectionNum)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.databaseName = databaseName;</span><br><span class="line">        <span class="built_in">this</span>.connectionNum = connectionNum;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;book dao save ...&quot;</span>+databaseName+<span class="string">&quot;,&quot;</span>+connectionNum);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="æ­¥éª¤2-é…ç½®å®Œæˆå¤šä¸ªå±æ€§æ„é€ å™¨æ³¨å…¥"><a href="#æ­¥éª¤2-é…ç½®å®Œæˆå¤šä¸ªå±æ€§æ„é€ å™¨æ³¨å…¥" class="headerlink" title="æ­¥éª¤2:é…ç½®å®Œæˆå¤šä¸ªå±æ€§æ„é€ å™¨æ³¨å…¥"></a>æ­¥éª¤2:é…ç½®å®Œæˆå¤šä¸ªå±æ€§æ„é€ å™¨æ³¨å…¥</h5><p>åœ¨applicationContext.xmlä¸­è¿›è¡Œæ³¨å…¥é…ç½®</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;bookDao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.dao.impl.BookDaoImpl&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;databaseName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;mysql&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;connectionNum&quot;</span> <span class="attr">value</span>=<span class="string">&quot;666&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userDao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.dao.impl.UserDaoImpl&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;bookService&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.service.impl.BookServiceImpl&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;bookDao&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;bookDao&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;userDao&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;userDao&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><p>**è¯´æ˜:**è¿™ä¸¤ä¸ª<code>&lt;contructor-arg&gt;</code>çš„é…ç½®é¡ºåºå¯ä»¥ä»»æ„</p><h5 id="æ­¥éª¤3-è¿è¡Œç¨‹åº-5"><a href="#æ­¥éª¤3-è¿è¡Œç¨‹åº-5" class="headerlink" title="æ­¥éª¤3:è¿è¡Œç¨‹åº"></a>æ­¥éª¤3:è¿è¡Œç¨‹åº</h5><p>è¿è¡ŒAppForDIConstructorç±»ï¼ŒæŸ¥çœ‹ç»“æœ</p><p><img src="/2022/07/26/Spring_day1/1629803111769.png" alt="1629803111769"></p><p>ä¸Šé¢å·²ç»å®Œæˆäº†æ„é€ å‡½æ•°æ³¨å…¥çš„åŸºæœ¬ä½¿ç”¨ï¼Œä½†æ˜¯ä¼šå­˜åœ¨ä¸€äº›é—®é¢˜:</p><p><img src="/2022/07/26/Spring_day1/1629803529598.png" alt="1629803529598"></p><ul><li>å½“æ„é€ å‡½æ•°ä¸­æ–¹æ³•çš„å‚æ•°åå‘ç”Ÿå˜åŒ–åï¼Œé…ç½®æ–‡ä»¶ä¸­çš„nameå±æ€§ä¹Ÿéœ€è¦è·Ÿç€å˜</li><li>è¿™ä¸¤å—å­˜åœ¨ç´§è€¦åˆï¼Œå…·ä½“è¯¥å¦‚ä½•è§£å†³?</li></ul><p>åœ¨è§£å†³è¿™ä¸ªé—®é¢˜ä¹‹å‰ï¼Œéœ€è¦æå‰è¯´æ˜çš„æ˜¯ï¼Œè¿™ä¸ªå‚æ•°åå‘ç”Ÿå˜åŒ–çš„æƒ…å†µå¹¶ä¸å¤šï¼Œæ‰€ä»¥ä¸Šé¢çš„è¿˜æ˜¯æ¯”è¾ƒä¸»æµçš„é…ç½®æ–¹å¼ï¼Œä¸‹é¢ä»‹ç»çš„ï¼Œå¤§å®¶éƒ½ä»¥äº†è§£ä¸ºä¸»ã€‚</p><p>æ–¹å¼ä¸€:åˆ é™¤nameå±æ€§ï¼Œæ·»åŠ typeå±æ€§ï¼ŒæŒ‰ç…§ç±»å‹æ³¨å…¥</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;bookDao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.dao.impl.BookDaoImpl&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">type</span>=<span class="string">&quot;int&quot;</span> <span class="attr">value</span>=<span class="string">&quot;10&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">type</span>=<span class="string">&quot;java.lang.String&quot;</span> <span class="attr">value</span>=<span class="string">&quot;mysql&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>è¿™ç§æ–¹å¼å¯ä»¥è§£å†³æ„é€ å‡½æ•°å½¢å‚åå‘ç”Ÿå˜åŒ–å¸¦æ¥çš„è€¦åˆé—®é¢˜</li><li>ä½†æ˜¯å¦‚æœæ„é€ æ–¹æ³•å‚æ•°ä¸­æœ‰ç±»å‹ç›¸åŒçš„å‚æ•°ï¼Œè¿™ç§æ–¹å¼å°±ä¸å¤ªå¥½å®ç°äº†</li></ul><p>æ–¹å¼äºŒ:åˆ é™¤typeå±æ€§ï¼Œæ·»åŠ indexå±æ€§ï¼ŒæŒ‰ç…§ç´¢å¼•ä¸‹æ ‡æ³¨å…¥ï¼Œä¸‹æ ‡ä»0å¼€å§‹</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;bookDao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.dao.impl.BookDaoImpl&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">index</span>=<span class="string">&quot;1&quot;</span> <span class="attr">value</span>=<span class="string">&quot;100&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">index</span>=<span class="string">&quot;0&quot;</span> <span class="attr">value</span>=<span class="string">&quot;mysql&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>è¿™ç§æ–¹å¼å¯ä»¥è§£å†³å‚æ•°ç±»å‹é‡å¤é—®é¢˜</li><li>ä½†æ˜¯å¦‚æœæ„é€ æ–¹æ³•å‚æ•°é¡ºåºå‘ç”Ÿå˜åŒ–åï¼Œè¿™ç§æ–¹å¼åˆå¸¦æ¥äº†è€¦åˆé—®é¢˜</li></ul><p><strong>ä¸¤ç§å‚æ•°çš„æ³¨å…¥æ–¹å¼ï¼Œå…·ä½“æˆ‘ä»¬è¯¥å¦‚ä½•é€‰æ‹©å‘¢?</strong></p><ol><li>å¼ºåˆ¶ä¾èµ–ä½¿ç”¨æ„é€ å™¨è¿›è¡Œï¼Œä½¿ç”¨setteræ³¨å…¥æœ‰æ¦‚ç‡ä¸è¿›è¡Œæ³¨å…¥å¯¼è‡´nullå¯¹è±¡å‡ºç°<ul><li>å¼ºåˆ¶ä¾èµ–æŒ‡å¯¹è±¡åœ¨åˆ›å»ºçš„è¿‡ç¨‹ä¸­å¿…é¡»è¦æ³¨å…¥æŒ‡å®šçš„å‚æ•°</li></ul></li><li>å¯é€‰ä¾èµ–ä½¿ç”¨setteræ³¨å…¥è¿›è¡Œï¼Œçµæ´»æ€§å¼º<ul><li>å¯é€‰ä¾èµ–æŒ‡å¯¹è±¡åœ¨åˆ›å»ºè¿‡ç¨‹ä¸­æ³¨å…¥çš„å‚æ•°å¯æœ‰å¯æ— </li></ul></li><li>Springæ¡†æ¶å€¡å¯¼ä½¿ç”¨æ„é€ å™¨ï¼Œç¬¬ä¸‰æ–¹æ¡†æ¶å†…éƒ¨å¤§å¤šæ•°é‡‡ç”¨æ„é€ å™¨æ³¨å…¥çš„å½¢å¼è¿›è¡Œæ•°æ®åˆå§‹åŒ–ï¼Œç›¸å¯¹ä¸¥è°¨</li><li>å¦‚æœæœ‰å¿…è¦å¯ä»¥ä¸¤è€…åŒæ—¶ä½¿ç”¨ï¼Œä½¿ç”¨æ„é€ å™¨æ³¨å…¥å®Œæˆå¼ºåˆ¶ä¾èµ–çš„æ³¨å…¥ï¼Œä½¿ç”¨setteræ³¨å…¥å®Œæˆå¯é€‰ä¾èµ–çš„æ³¨å…¥</li><li>å®é™…å¼€å‘è¿‡ç¨‹ä¸­è¿˜è¦æ ¹æ®å®é™…æƒ…å†µåˆ†æï¼Œå¦‚æœå—æ§å¯¹è±¡æ²¡æœ‰æä¾›setteræ–¹æ³•å°±å¿…é¡»ä½¿ç”¨æ„é€ å™¨æ³¨å…¥</li><li><em><strong>è‡ªå·±å¼€å‘çš„æ¨¡å—æ¨èä½¿ç”¨setteræ³¨å…¥</strong></em></li></ol><p><strong>è¿™èŠ‚ä¸­ä¸»è¦è®²è§£çš„æ˜¯Springçš„ä¾èµ–æ³¨å…¥çš„å®ç°æ–¹å¼:</strong></p><ul><li><p>setteræ³¨å…¥</p><ul><li><p>ç®€å•æ•°æ®ç±»å‹</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">...</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;&quot;</span> <span class="attr">value</span>=<span class="string">&quot;&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>å¼•ç”¨æ•°æ®ç±»å‹</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">...</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul></li><li><p>æ„é€ å™¨æ³¨å…¥</p><ul><li><p>ç®€å•æ•°æ®ç±»å‹</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">...</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;&quot;</span> <span class="attr">index</span>=<span class="string">&quot;&quot;</span> <span class="attr">type</span>=<span class="string">&quot;&quot;</span> <span class="attr">value</span>=<span class="string">&quot;&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>å¼•ç”¨æ•°æ®ç±»å‹</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">...</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;&quot;</span> <span class="attr">index</span>=<span class="string">&quot;&quot;</span> <span class="attr">type</span>=<span class="string">&quot;&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul></li><li><p>ä¾èµ–æ³¨å…¥çš„æ–¹å¼é€‰æ‹©ä¸Š</p><ul><li>å»ºè®®ä½¿ç”¨setteræ³¨å…¥</li><li>ç¬¬ä¸‰æ–¹æŠ€æœ¯æ ¹æ®æƒ…å†µé€‰æ‹©</li></ul></li></ul><h3 id="5-3-è‡ªåŠ¨é…ç½®"><a href="#5-3-è‡ªåŠ¨é…ç½®" class="headerlink" title="5.3 è‡ªåŠ¨é…ç½®"></a>5.3 è‡ªåŠ¨é…ç½®</h3><p>å‰é¢èŠ±äº†å¤§é‡çš„æ—¶é—´æŠŠSpringçš„æ³¨å…¥å»å­¦ä¹ äº†ä¸‹ï¼Œæ€»ç»“èµ·æ¥å°±ä¸€ä¸ªå­—&#x3D;&#x3D;éº»çƒ¦&#x3D;&#x3D;ã€‚</p><p>é—®ï¼šéº»çƒ¦åœ¨å“ª?</p><p>ç­”ï¼šé…ç½®æ–‡ä»¶çš„ç¼–å†™é…ç½®ä¸Šã€‚</p><p>é—®ï¼šæœ‰æ›´ç®€å•æ–¹å¼ä¹ˆ?</p><p>ç­”ï¼šæœ‰ï¼Œè‡ªåŠ¨é…ç½®</p><h4 id="5-3-1-ä»€ä¹ˆæ˜¯ä¾èµ–è‡ªåŠ¨è£…é…"><a href="#5-3-1-ä»€ä¹ˆæ˜¯ä¾èµ–è‡ªåŠ¨è£…é…" class="headerlink" title="5.3.1 ä»€ä¹ˆæ˜¯ä¾èµ–è‡ªåŠ¨è£…é…?"></a>5.3.1 ä»€ä¹ˆæ˜¯ä¾èµ–è‡ªåŠ¨è£…é…?</h4><ul><li>IoCå®¹å™¨æ ¹æ®beanæ‰€ä¾èµ–çš„èµ„æºåœ¨å®¹å™¨ä¸­è‡ªåŠ¨æŸ¥æ‰¾å¹¶æ³¨å…¥åˆ°beanä¸­çš„è¿‡ç¨‹ç§°ä¸ºè‡ªåŠ¨è£…é…</li></ul><h4 id="5-3-2-è‡ªåŠ¨è£…é…æ–¹å¼æœ‰å“ªäº›"><a href="#5-3-2-è‡ªåŠ¨è£…é…æ–¹å¼æœ‰å“ªäº›" class="headerlink" title="5.3.2 è‡ªåŠ¨è£…é…æ–¹å¼æœ‰å“ªäº›?"></a>5.3.2 è‡ªåŠ¨è£…é…æ–¹å¼æœ‰å“ªäº›?</h4><ul><li>æŒ‰ç±»å‹ï¼ˆå¸¸ç”¨ï¼‰</li><li>æŒ‰åç§°</li><li>æŒ‰æ„é€ æ–¹æ³•</li><li>ä¸å¯ç”¨è‡ªåŠ¨è£…é…</li></ul><h4 id="5-3-3-å‡†å¤‡ä¸‹æ¡ˆä¾‹ç¯å¢ƒ"><a href="#5-3-3-å‡†å¤‡ä¸‹æ¡ˆä¾‹ç¯å¢ƒ" class="headerlink" title="5.3.3 å‡†å¤‡ä¸‹æ¡ˆä¾‹ç¯å¢ƒ"></a>5.3.3 å‡†å¤‡ä¸‹æ¡ˆä¾‹ç¯å¢ƒ</h4><ul><li>åˆ›å»ºä¸€ä¸ªMavené¡¹ç›®</li><li>pom.xmlæ·»åŠ ä¾èµ–</li><li>resourcesä¸‹æ·»åŠ springçš„é…ç½®æ–‡ä»¶</li></ul><p>è¿™äº›æ­¥éª¤å’Œå‰é¢çš„éƒ½ä¸€è‡´ï¼Œå¤§å®¶å¯ä»¥å¿«é€Ÿçš„æ‹·è´å³å¯ï¼Œæœ€ç»ˆé¡¹ç›®çš„ç»“æ„å¦‚ä¸‹:</p><p><img src="/2022/07/26/Spring_day1/1629805387647.png" alt="1629805387647"></p><p>(1)é¡¹ç›®ä¸­æ·»åŠ BookDaoã€BookDaoImplã€BookServiceå’ŒBookServiceImplç±»</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">BookDao</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookDaoImpl</span> <span class="keyword">implements</span> <span class="title class_">BookDao</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> String databaseName;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> connectionNum;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;book dao save ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">BookService</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">BookService</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> BookDao bookDao;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setBookDao</span><span class="params">(BookDao bookDao)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.bookDao = bookDao;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;book service save ...&quot;</span>);</span><br><span class="line">        bookDao.save();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>(2)resourcesä¸‹æä¾›springçš„é…ç½®æ–‡ä»¶</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;bookDao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.dao.impl.BookDaoImpl&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;bookService&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.service.impl.BookServiceImpl&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;bookDao&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;bookDao&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><p>(3)ç¼–å†™AppForAutowareè¿è¡Œç±»ï¼ŒåŠ è½½Springçš„IOCå®¹å™¨ï¼Œå¹¶ä»ä¸­è·å–å¯¹åº”çš„beanå¯¹è±¡</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AppForAutoware</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">( String[] args )</span> &#123;</span><br><span class="line">        <span class="type">ApplicationContext</span> <span class="variable">ctx</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;applicationContext.xml&quot;</span>);</span><br><span class="line">        <span class="type">BookService</span> <span class="variable">bookService</span> <span class="operator">=</span> (BookService) ctx.getBean(<span class="string">&quot;bookService&quot;</span>);</span><br><span class="line">        bookService.save();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="5-3-4-å®Œæˆè‡ªåŠ¨è£…é…çš„é…ç½®"><a href="#5-3-4-å®Œæˆè‡ªåŠ¨è£…é…çš„é…ç½®" class="headerlink" title="5.3.4 å®Œæˆè‡ªåŠ¨è£…é…çš„é…ç½®"></a>5.3.4 å®Œæˆè‡ªåŠ¨è£…é…çš„é…ç½®</h4><p>æ¥ä¸‹æ¥ï¼Œåœ¨ä¸Šé¢è¿™ä¸ªç¯å¢ƒä¸­æ¥å®Œæˆ<code>è‡ªåŠ¨è£…é…</code>çš„å­¦ä¹ :</p><p>è‡ªåŠ¨è£…é…åªéœ€è¦ä¿®æ”¹applicationContext.xmlé…ç½®æ–‡ä»¶å³å¯:</p><p>(1)å°†<code>&lt;property&gt;</code>æ ‡ç­¾åˆ é™¤</p><p>(2)åœ¨<code>&lt;bean&gt;</code>æ ‡ç­¾ä¸­æ·»åŠ autowireå±æ€§</p><p>é¦–å…ˆæ¥å®ç°æŒ‰ç…§ç±»å‹æ³¨å…¥çš„é…ç½®</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.dao.impl.BookDaoImpl&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--autowireå±æ€§ï¼šå¼€å¯è‡ªåŠ¨è£…é…ï¼Œé€šå¸¸ä½¿ç”¨æŒ‰ç±»å‹è£…é…--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;bookService&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.service.impl.BookServiceImpl&quot;</span> <span class="attr">autowire</span>=<span class="string">&quot;byType&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„äº‹é¡¹</strong>ï¼š</p><ul><li>éœ€è¦æ³¨å…¥å±æ€§çš„ç±»ä¸­å¯¹åº”å±æ€§çš„setteræ–¹æ³•ä¸èƒ½çœç•¥</li><li>è¢«æ³¨å…¥çš„å¯¹è±¡å¿…é¡»è¦è¢«Springçš„IOCå®¹å™¨ç®¡ç†</li><li>æŒ‰ç…§ç±»å‹åœ¨Springçš„IOCå®¹å™¨ä¸­å¦‚æœæ‰¾åˆ°å¤šä¸ªå¯¹è±¡ï¼Œä¼šæŠ¥<code>NoUniqueBeanDefinitionException</code></li></ul><p>ä¸€ä¸ªç±»å‹åœ¨IOCä¸­æœ‰å¤šä¸ªå¯¹è±¡ï¼Œè¿˜æƒ³è¦æ³¨å…¥æˆåŠŸï¼Œè¿™ä¸ªæ—¶å€™å°±éœ€è¦æŒ‰ç…§åç§°æ³¨å…¥ï¼Œé…ç½®æ–¹å¼ä¸º:</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.dao.impl.BookDaoImpl&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--autowireå±æ€§ï¼šå¼€å¯è‡ªåŠ¨è£…é…ï¼Œé€šå¸¸ä½¿ç”¨æŒ‰ç±»å‹è£…é…--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;bookService&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.service.impl.BookServiceImpl&quot;</span> <span class="attr">autowire</span>=<span class="string">&quot;byName&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„äº‹é¡¹</strong>:</p><ul><li><p>æŒ‰ç…§åç§°æ³¨å…¥ä¸­çš„åç§°æŒ‡çš„æ˜¯ä»€ä¹ˆ?</p><p><img src="/2022/07/26/Spring_day1/1629806856156.png" alt="1629806856156"></p><ul><li>bookDaoæ˜¯privateä¿®é¥°çš„ï¼Œå¤–éƒ¨ç±»æ— æ³•ç›´æ¥æ–¹æ³•</li><li>å¤–éƒ¨ç±»åªèƒ½é€šè¿‡å±æ€§çš„setæ–¹æ³•è¿›è¡Œè®¿é—®</li><li>å¯¹å¤–éƒ¨ç±»æ¥è¯´ï¼ŒsetBookDaoæ–¹æ³•åï¼Œå»æ‰setåé¦–å­—æ¯å°å†™æ˜¯å…¶å±æ€§å<ul><li>ä¸ºä»€ä¹ˆæ˜¯å»æ‰seté¦–å­—æ¯å°å†™?</li><li>è¿™ä¸ªè§„åˆ™æ˜¯setæ–¹æ³•ç”Ÿæˆçš„é»˜è®¤è§„åˆ™ï¼Œsetæ–¹æ³•çš„ç”Ÿæˆæ˜¯æŠŠå±æ€§åé¦–å­—æ¯å¤§å†™å‰é¢åŠ setå½¢æˆçš„æ–¹æ³•å</li></ul></li><li>æ‰€ä»¥æŒ‰ç…§åç§°æ³¨å…¥ï¼Œå…¶å®æ˜¯å’Œå¯¹åº”çš„setæ–¹æ³•æœ‰å…³ï¼Œä½†æ˜¯å¦‚æœæŒ‰ç…§æ ‡å‡†èµ·åç§°ï¼Œå±æ€§åå’Œsetå¯¹åº”çš„åæ˜¯ä¸€è‡´çš„</li></ul></li><li><p>å¦‚æœæŒ‰ç…§åç§°å»æ‰¾å¯¹åº”çš„beanå¯¹è±¡ï¼Œæ‰¾ä¸åˆ°åˆ™æ³¨å…¥Null</p></li><li><p>å½“æŸä¸€ä¸ªç±»å‹åœ¨IOCå®¹å™¨ä¸­æœ‰å¤šä¸ªå¯¹è±¡ï¼ŒæŒ‰ç…§åç§°æ³¨å…¥åªæ‰¾å…¶æŒ‡å®šåç§°å¯¹åº”çš„beanå¯¹è±¡ï¼Œä¸ä¼šæŠ¥é”™</p></li></ul><p><em><strong>ç”¨çš„æ›´å¤šçš„æ˜¯æŒ‰ç…§ç±»å‹æ³¨å…¥</strong></em></p><p>æœ€åå¯¹äºä¾èµ–æ³¨å…¥ï¼Œéœ€è¦æ³¨æ„ä¸€äº›å…¶ä»–çš„é…ç½®ç‰¹å¾:</p><ol><li>è‡ªåŠ¨è£…é…ç”¨äºå¼•ç”¨ç±»å‹ä¾èµ–æ³¨å…¥ï¼Œä¸èƒ½å¯¹ç®€å•ç±»å‹è¿›è¡Œæ“ä½œ</li><li>ä½¿ç”¨æŒ‰ç±»å‹è£…é…æ—¶ï¼ˆbyTypeï¼‰å¿…é¡»ä¿éšœå®¹å™¨ä¸­ç›¸åŒç±»å‹çš„beanå”¯ä¸€ï¼Œæ¨èä½¿ç”¨</li><li>ä½¿ç”¨æŒ‰åç§°è£…é…æ—¶ï¼ˆbyNameï¼‰å¿…é¡»ä¿éšœå®¹å™¨ä¸­å…·æœ‰æŒ‡å®šåç§°çš„beanï¼Œå› å˜é‡åä¸é…ç½®è€¦åˆï¼Œ<em>ä¸æ¨èä½¿ç”¨</em></li><li>è‡ªåŠ¨è£…é…ä¼˜å…ˆçº§ä½äºsetteræ³¨å…¥ä¸æ„é€ å™¨æ³¨å…¥ï¼ŒåŒæ—¶å‡ºç°æ—¶è‡ªåŠ¨è£…é…é…ç½®å¤±æ•ˆ</li></ol><h3 id="5-4-é›†åˆæ³¨å…¥"><a href="#5-4-é›†åˆæ³¨å…¥" class="headerlink" title="5.4 é›†åˆæ³¨å…¥"></a>5.4 é›†åˆæ³¨å…¥</h3><p>å‰é¢æˆ‘ä»¬å·²ç»èƒ½å®Œæˆå¼•å…¥æ•°æ®ç±»å‹å’Œç®€å•æ•°æ®ç±»å‹çš„æ³¨å…¥ï¼Œä½†æ˜¯è¿˜æœ‰ä¸€ç§æ•°æ®ç±»å‹é›†åˆï¼Œé›†åˆä¸­æ—¢å¯ä»¥è£…ç®€å•æ•°æ®ç±»å‹ä¹Ÿå¯ä»¥è£…å¼•ç”¨æ•°æ®ç±»å‹ï¼Œå¯¹äºé›†åˆï¼Œåœ¨Springä¸­è¯¥å¦‚ä½•æ³¨å…¥å‘¢?</p><p>å…ˆæ¥å›é¡¾ä¸‹ï¼Œå¸¸è§çš„é›†åˆç±»å‹æœ‰å“ªäº›?</p><ul><li>æ•°ç»„</li><li>List</li><li>Set</li><li>Map</li><li>Properties</li></ul><p>é’ˆå¯¹ä¸åŒçš„é›†åˆç±»å‹ï¼Œè¯¥å¦‚ä½•å®ç°æ³¨å…¥å‘¢?</p><h4 id="5-4-1-ç¯å¢ƒå‡†å¤‡"><a href="#5-4-1-ç¯å¢ƒå‡†å¤‡" class="headerlink" title="5.4.1 ç¯å¢ƒå‡†å¤‡"></a>5.4.1 ç¯å¢ƒå‡†å¤‡</h4><ul><li>åˆ›å»ºä¸€ä¸ªMavené¡¹ç›®</li><li>pom.xmlæ·»åŠ ä¾èµ–</li><li>resourcesä¸‹æ·»åŠ springçš„é…ç½®æ–‡ä»¶applicationContext.xml</li></ul><p>è¿™äº›æ­¥éª¤å’Œå‰é¢çš„éƒ½ä¸€è‡´ï¼Œå¤§å®¶å¯ä»¥å¿«é€Ÿçš„æ‹·è´å³å¯ï¼Œæœ€ç»ˆé¡¹ç›®çš„ç»“æ„å¦‚ä¸‹:</p><p><img src="/2022/07/26/Spring_day1/1629807579330.png" alt="1629807579330"></p><p>(1)é¡¹ç›®ä¸­æ·»åŠ æ·»åŠ BookDaoã€BookDaoImplç±»</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">BookDao</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookDaoImpl</span> <span class="keyword">implements</span> <span class="title class_">BookDao</span> &#123;</span><br><span class="line">    </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookDaoImpl</span> <span class="keyword">implements</span> <span class="title class_">BookDao</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span>[] array;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> List&lt;String&gt; list;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Set&lt;String&gt; set;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Map&lt;String,String&gt; map;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Properties properties;</span><br><span class="line"></span><br><span class="line">     <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;book dao save ...&quot;</span>);</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;éå†æ•°ç»„:&quot;</span> + Arrays.toString(array));</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;éå†List&quot;</span> + list);</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;éå†Set&quot;</span> + set);</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;éå†Map&quot;</span> + map);</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;éå†Properties&quot;</span> + properties);</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">//setter....æ–¹æ³•çœç•¥ï¼Œè‡ªå·±ä½¿ç”¨å·¥å…·ç”Ÿæˆ</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>(2)resourcesä¸‹æä¾›springçš„é…ç½®æ–‡ä»¶ï¼ŒapplicationContext.xml</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;bookDao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.dao.impl.BookDaoImpl&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><p>(3)ç¼–å†™AppForDICollectionè¿è¡Œç±»ï¼ŒåŠ è½½Springçš„IOCå®¹å™¨ï¼Œå¹¶ä»ä¸­è·å–å¯¹åº”çš„beanå¯¹è±¡</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AppForDICollection</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">( String[] args )</span> &#123;</span><br><span class="line">        <span class="type">ApplicationContext</span> <span class="variable">ctx</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;applicationContext.xml&quot;</span>);</span><br><span class="line">        <span class="type">BookDao</span> <span class="variable">bookDao</span> <span class="operator">=</span> (BookDao) ctx.getBean(<span class="string">&quot;bookDao&quot;</span>);</span><br><span class="line">        bookDao.save();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥ï¼Œåœ¨ä¸Šé¢è¿™ä¸ªç¯å¢ƒä¸­æ¥å®Œæˆ<code>é›†åˆæ³¨å…¥</code>çš„å­¦ä¹ :</p><p>ä¸‹é¢çš„æ‰€ä»¥é…ç½®æ–¹å¼ï¼Œéƒ½æ˜¯åœ¨bookDaoçš„beanæ ‡ç­¾ä¸­ä½¿ç”¨<property>è¿›è¡Œæ³¨å…¥</property></p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;bookDao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.dao.impl.BookDaoImpl&quot;</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="5-4-2-æ³¨å…¥æ•°ç»„ç±»å‹æ•°æ®"><a href="#5-4-2-æ³¨å…¥æ•°ç»„ç±»å‹æ•°æ®" class="headerlink" title="5.4.2 æ³¨å…¥æ•°ç»„ç±»å‹æ•°æ®"></a>5.4.2 æ³¨å…¥æ•°ç»„ç±»å‹æ•°æ®</h4><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;array&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">array</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>100<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>200<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>300<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">array</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="5-4-3-æ³¨å…¥Listç±»å‹æ•°æ®"><a href="#5-4-3-æ³¨å…¥Listç±»å‹æ•°æ®" class="headerlink" title="5.4.3 æ³¨å…¥Listç±»å‹æ•°æ®"></a>5.4.3 æ³¨å…¥Listç±»å‹æ•°æ®</h4><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;list&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>itcast<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>itheima<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>boxuegu<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>chuanzhihui<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="5-4-4-æ³¨å…¥Setç±»å‹æ•°æ®"><a href="#5-4-4-æ³¨å…¥Setç±»å‹æ•°æ®" class="headerlink" title="5.4.4 æ³¨å…¥Setç±»å‹æ•°æ®"></a>5.4.4 æ³¨å…¥Setç±»å‹æ•°æ®</h4><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;set&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">set</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>itcast<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>itheima<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>boxuegu<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>boxuegu<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="5-4-5-æ³¨å…¥Mapç±»å‹æ•°æ®"><a href="#5-4-5-æ³¨å…¥Mapç±»å‹æ•°æ®" class="headerlink" title="5.4.5 æ³¨å…¥Mapç±»å‹æ•°æ®"></a>5.4.5 æ³¨å…¥Mapç±»å‹æ•°æ®</h4><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;map&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">map</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">&quot;country&quot;</span> <span class="attr">value</span>=<span class="string">&quot;china&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">&quot;province&quot;</span> <span class="attr">value</span>=<span class="string">&quot;henan&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">&quot;city&quot;</span> <span class="attr">value</span>=<span class="string">&quot;kaifeng&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">map</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="5-4-6-æ³¨å…¥Propertiesç±»å‹æ•°æ®"><a href="#5-4-6-æ³¨å…¥Propertiesç±»å‹æ•°æ®" class="headerlink" title="5.4.6 æ³¨å…¥Propertiesç±»å‹æ•°æ®"></a>5.4.6 æ³¨å…¥Propertiesç±»å‹æ•°æ®</h4><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;properties&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">props</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">&quot;country&quot;</span>&gt;</span>china<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">&quot;province&quot;</span>&gt;</span>henan<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">&quot;city&quot;</span>&gt;</span>kaifeng<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">props</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure><p>é…ç½®å®Œæˆåï¼Œè¿è¡Œä¸‹çœ‹ç»“æœ:</p><p><img src="/2022/07/26/Spring_day1/1629808046783.png" alt="1629808046783"></p><p><strong>è¯´æ˜ï¼š</strong></p><ul><li>propertyæ ‡ç­¾è¡¨ç¤ºsetteræ–¹å¼æ³¨å…¥ï¼Œæ„é€ æ–¹å¼æ³¨å…¥constructor-argæ ‡ç­¾å†…éƒ¨ä¹Ÿå¯ä»¥å†™<code>&lt;array&gt;</code>ã€<code>&lt;list&gt;</code>ã€<code>&lt;set&gt;</code>ã€<code>&lt;map&gt;</code>ã€<code>&lt;props&gt;</code>æ ‡ç­¾</li><li>Listçš„åº•å±‚ä¹Ÿæ˜¯é€šè¿‡æ•°ç»„å®ç°çš„ï¼Œæ‰€ä»¥<code>&lt;list&gt;</code>å’Œ<code>&lt;array&gt;</code>æ ‡ç­¾æ˜¯å¯ä»¥æ··ç”¨</li><li>é›†åˆä¸­è¦æ·»åŠ å¼•ç”¨ç±»å‹ï¼Œåªéœ€è¦æŠŠ<code>&lt;value&gt;</code>æ ‡ç­¾æ”¹æˆ<code>&lt;ref&gt;</code>æ ‡ç­¾ï¼Œè¿™ç§æ–¹å¼ç”¨çš„æ¯”è¾ƒå°‘</li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> Javaå¼€å‘æ¡†æ¶ </tag>
            
            <tag> Spring </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MyBatis-Plus</title>
      <link href="/2022/07/25/MyBatisPlus/"/>
      <url>/2022/07/25/MyBatisPlus/</url>
      
        <content type="html"><![CDATA[<p><strong>ä»Šæ—¥ç›®æ ‡</strong></p><blockquote><p>åŸºäºMyBatisPluså®Œæˆæ ‡å‡†Daoçš„å¢åˆ æ”¹æŸ¥åŠŸèƒ½</p><p>æŒæ¡MyBatisPlusä¸­çš„åˆ†é¡µåŠæ¡ä»¶æŸ¥è¯¢æ„å»º</p><p>æŒæ¡ä¸»é”®IDçš„ç”Ÿæˆç­–ç•¥ </p><p>äº†è§£MyBatisPlusçš„ä»£ç ç”Ÿæˆå™¨</p></blockquote><h2 id="1ï¼ŒMyBatisPluså…¥é—¨æ¡ˆä¾‹ä¸ç®€ä»‹"><a href="#1ï¼ŒMyBatisPluså…¥é—¨æ¡ˆä¾‹ä¸ç®€ä»‹" class="headerlink" title="1ï¼ŒMyBatisPluså…¥é—¨æ¡ˆä¾‹ä¸ç®€ä»‹"></a>1ï¼ŒMyBatisPluså…¥é—¨æ¡ˆä¾‹ä¸ç®€ä»‹</h2><p>è¿™ä¸€èŠ‚æˆ‘ä»¬æ¥å­¦ä¹ ä¸‹MyBatisPlusçš„å…¥é—¨æ¡ˆä¾‹ä¸ç®€ä»‹ï¼Œè¿™ä¸ªå’Œå…¶ä»–è¯¾ç¨‹éƒ½ä¸å¤ªä¸€æ ·ï¼Œå…¶ä»–çš„è¯¾ç¨‹éƒ½æ˜¯å…ˆä»‹ç»æ¦‚å¿µï¼Œç„¶åå†å†™å…¥é—¨æ¡ˆä¾‹ã€‚è€Œå¯¹äºMyBatisPlusçš„å­¦ä¹ ï¼Œæˆ‘ä»¬å°†é¡ºåºåšäº†è°ƒæ•´ï¼Œä¸»è¦çš„åŸå› MyBatisPlusä¸»è¦æ˜¯å¯¹MyBatisçš„ç®€åŒ–ï¼Œæ‰€æœ‰æˆ‘ä»¬å…ˆä½“ä¼šä¸‹å®ƒç®€åŒ–åœ¨å“ªï¼Œç„¶åå†å­¦ä¹ å®ƒæ˜¯ä»€ä¹ˆï¼Œä»¥åŠå®ƒå¸®æˆ‘ä»¬éƒ½åšå“ªäº›äº‹ã€‚</p><h3 id="1-1-å…¥é—¨æ¡ˆä¾‹"><a href="#1-1-å…¥é—¨æ¡ˆä¾‹" class="headerlink" title="1.1 å…¥é—¨æ¡ˆä¾‹"></a>1.1 å…¥é—¨æ¡ˆä¾‹</h3><ul><li><p>MybatisPlus(ç®€ç§°MP)æ˜¯åŸºäºMyBatisæ¡†æ¶åŸºç¡€ä¸Šå¼€å‘çš„å¢å¼ºå‹å·¥å…·ï¼Œæ—¨åœ¨ç®€åŒ–å¼€å‘ã€æä¾›æ•ˆç‡ã€‚</p></li><li><p>å¼€å‘æ–¹å¼</p><ul><li>åŸºäºMyBatisä½¿ç”¨MyBatisPlus</li><li>åŸºäºSpringä½¿ç”¨MyBatisPlus</li><li>åŸºäºSpringBootä½¿ç”¨MyBatisPlus</li></ul></li></ul><p>SpringBootåˆšåˆšæˆ‘ä»¬å­¦ä¹ å®Œæˆï¼Œå®ƒèƒ½å¿«é€Ÿæ„å»ºSpringå¼€å‘ç¯å¢ƒç”¨ä»¥æ•´åˆå…¶ä»–æŠ€æœ¯ï¼Œä½¿ç”¨èµ·æ¥æ˜¯éå¸¸ç®€å•ï¼Œå¯¹äºMPçš„å­¦ä¹ ï¼Œæˆ‘ä»¬ä¹ŸåŸºäºSpringBootæ¥æ„å»ºå­¦ä¹ ã€‚</p><p>å­¦ä¹ ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥å›é¡¾ä¸‹ï¼ŒSpringBootæ•´åˆMybatisçš„å¼€å‘è¿‡ç¨‹:</p><ul><li><p>åˆ›å»ºSpringBootå·¥ç¨‹</p><p><img src="/2022/07/25/MyBatisPlus/1630997819698.png" alt="1630997819698"></p></li><li><p>å‹¾é€‰é…ç½®ä½¿ç”¨çš„æŠ€æœ¯ï¼Œèƒ½å¤Ÿå®ç°è‡ªåŠ¨æ·»åŠ èµ·æ­¥ä¾èµ–åŒ…</p><p><img src="/2022/07/25/MyBatisPlus/1630997860020.png" alt="1630997860020"></p></li><li><p>è®¾ç½®dataSourceç›¸å…³å±æ€§(JDBCå‚æ•°)</p><p><img src="/2022/07/25/MyBatisPlus/1630997901479.png" alt="1630997901479"></p></li><li><p>å®šä¹‰æ•°æ®å±‚æ¥å£æ˜ å°„é…ç½®</p><p><img src="/2022/07/25/MyBatisPlus/1630997929891.png" alt="1630997929891"></p></li></ul><p>æˆ‘ä»¬å¯ä»¥å‚è€ƒç€ä¸Šé¢çš„è¿™ä¸ªå®ç°æ­¥éª¤æŠŠSpringBootæ•´åˆMyBatisPlusæ¥å¿«é€Ÿå®ç°ä¸‹ï¼Œå…·ä½“çš„å®ç°æ­¥éª¤ä¸º:</p><h4 id="æ­¥éª¤1ï¼šåˆ›å»ºæ•°æ®åº“åŠè¡¨"><a href="#æ­¥éª¤1ï¼šåˆ›å»ºæ•°æ®åº“åŠè¡¨" class="headerlink" title="æ­¥éª¤1ï¼šåˆ›å»ºæ•°æ®åº“åŠè¡¨"></a>æ­¥éª¤1ï¼šåˆ›å»ºæ•°æ®åº“åŠè¡¨</h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> database if <span class="keyword">not</span> <span class="keyword">exists</span> mybatisplus_db <span class="type">character</span> <span class="keyword">set</span> utf8;</span><br><span class="line">use mybatisplus_db;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="keyword">user</span> (</span><br><span class="line">    id <span class="type">bigint</span>(<span class="number">20</span>) <span class="keyword">primary</span> key auto_increment,</span><br><span class="line">    name <span class="type">varchar</span>(<span class="number">32</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    password  <span class="type">varchar</span>(<span class="number">32</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    age <span class="type">int</span>(<span class="number">3</span>) <span class="keyword">not</span> <span class="keyword">null</span> ,</span><br><span class="line">    tel <span class="type">varchar</span>(<span class="number">32</span>) <span class="keyword">not</span> <span class="keyword">null</span></span><br><span class="line">);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> <span class="keyword">user</span> <span class="keyword">values</span>(<span class="number">1</span>,<span class="string">&#x27;Tom&#x27;</span>,<span class="string">&#x27;tom&#x27;</span>,<span class="number">3</span>,<span class="string">&#x27;18866668888&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> <span class="keyword">user</span> <span class="keyword">values</span>(<span class="number">2</span>,<span class="string">&#x27;Jerry&#x27;</span>,<span class="string">&#x27;jerry&#x27;</span>,<span class="number">4</span>,<span class="string">&#x27;16688886666&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> <span class="keyword">user</span> <span class="keyword">values</span>(<span class="number">3</span>,<span class="string">&#x27;Jock&#x27;</span>,<span class="string">&#x27;123456&#x27;</span>,<span class="number">41</span>,<span class="string">&#x27;18812345678&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> <span class="keyword">user</span> <span class="keyword">values</span>(<span class="number">4</span>,<span class="string">&#x27;ä¼ æ™ºæ’­å®¢&#x27;</span>,<span class="string">&#x27;itcast&#x27;</span>,<span class="number">15</span>,<span class="string">&#x27;4006184000&#x27;</span>);</span><br></pre></td></tr></table></figure><h4 id="æ­¥éª¤2ï¼šåˆ›å»ºSpringBootå·¥ç¨‹"><a href="#æ­¥éª¤2ï¼šåˆ›å»ºSpringBootå·¥ç¨‹" class="headerlink" title="æ­¥éª¤2ï¼šåˆ›å»ºSpringBootå·¥ç¨‹"></a>æ­¥éª¤2ï¼šåˆ›å»ºSpringBootå·¥ç¨‹</h4><p><img src="/2022/07/25/MyBatisPlus/1630998241426.png" alt="1630998241426"></p><h4 id="æ­¥éª¤3ï¼šå‹¾é€‰é…ç½®ä½¿ç”¨æŠ€æœ¯"><a href="#æ­¥éª¤3ï¼šå‹¾é€‰é…ç½®ä½¿ç”¨æŠ€æœ¯" class="headerlink" title="æ­¥éª¤3ï¼šå‹¾é€‰é…ç½®ä½¿ç”¨æŠ€æœ¯"></a>æ­¥éª¤3ï¼šå‹¾é€‰é…ç½®ä½¿ç”¨æŠ€æœ¯</h4><p><img src="/2022/07/25/MyBatisPlus/1630998321660.png" alt="1630998321660"></p><p><strong>è¯´æ˜ï¼š</strong></p><ul><li>ç”±äºMPå¹¶æœªè¢«æ”¶å½•åˆ°ideaçš„ç³»ç»Ÿå†…ç½®é…ç½®ï¼Œæ— æ³•ç›´æ¥é€‰æ‹©åŠ å…¥ï¼Œéœ€è¦æ‰‹åŠ¨åœ¨pom.xmlä¸­é…ç½®æ·»åŠ </li></ul><h4 id="æ­¥éª¤4ï¼špom-xmlè¡¥å…¨ä¾èµ–"><a href="#æ­¥éª¤4ï¼špom-xmlè¡¥å…¨ä¾èµ–" class="headerlink" title="æ­¥éª¤4ï¼špom.xmlè¡¥å…¨ä¾èµ–"></a>æ­¥éª¤4ï¼špom.xmlè¡¥å…¨ä¾èµ–</h4><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.4.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.16<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>è¯´æ˜ï¼š</strong></p><ul><li><p>druidæ•°æ®æºå¯ä»¥åŠ ä¹Ÿå¯ä»¥ä¸åŠ ï¼ŒSpringBootæœ‰å†…ç½®çš„æ•°æ®æºï¼Œå¯ä»¥é…ç½®æˆä½¿ç”¨Druidæ•°æ®æº</p></li><li><p>ä»MPçš„ä¾èµ–å…³ç³»å¯ä»¥çœ‹å‡ºï¼Œé€šè¿‡ä¾èµ–ä¼ é€’å·²ç»å°†MyBatisä¸MyBatisæ•´åˆSpringçš„jaråŒ…å¯¼å…¥ï¼Œæˆ‘ä»¬ä¸éœ€è¦é¢å¤–åœ¨æ·»åŠ MyBatisçš„ç›¸å…³jaråŒ…</p><p><img src="/2022/07/25/MyBatisPlus/1631206757758.png" alt="1631206757758"></p></li></ul><h4 id="æ­¥éª¤5ï¼šæ·»åŠ MPçš„ç›¸å…³é…ç½®ä¿¡æ¯"><a href="#æ­¥éª¤5ï¼šæ·»åŠ MPçš„ç›¸å…³é…ç½®ä¿¡æ¯" class="headerlink" title="æ­¥éª¤5ï¼šæ·»åŠ MPçš„ç›¸å…³é…ç½®ä¿¡æ¯"></a>æ­¥éª¤5ï¼šæ·»åŠ MPçš„ç›¸å…³é…ç½®ä¿¡æ¯</h4><p>resourcesé»˜è®¤ç”Ÿæˆçš„æ˜¯propertiesé…ç½®æ–‡ä»¶ï¼Œå¯ä»¥å°†å…¶æ›¿æ¢æˆymlæ–‡ä»¶ï¼Œå¹¶åœ¨æ–‡ä»¶ä¸­é…ç½®æ•°æ®åº“è¿æ¥çš„ç›¸å…³ä¿¡æ¯:<code>application.yml</code></p><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">com.alibaba.druid.pool.DruidDataSource</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/mybatisplus_db?serverTimezone=UTC</span> </span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">root</span></span><br></pre></td></tr></table></figure><p><strong>è¯´æ˜ï¼š</strong>serverTimezoneæ˜¯ç”¨æ¥è®¾ç½®æ—¶åŒºï¼ŒUTCæ˜¯æ ‡å‡†æ—¶åŒºï¼Œå’Œå’±ä»¬çš„æ—¶é—´å·®8å°æ—¶ï¼Œæ‰€ä»¥å¯ä»¥å°†å…¶ä¿®æ”¹ä¸º<code>Asia/Shanghai</code></p><h4 id="æ­¥éª¤6ï¼šæ ¹æ®æ•°æ®åº“è¡¨åˆ›å»ºå®ä½“ç±»"><a href="#æ­¥éª¤6ï¼šæ ¹æ®æ•°æ®åº“è¡¨åˆ›å»ºå®ä½“ç±»" class="headerlink" title="æ­¥éª¤6ï¼šæ ¹æ®æ•°æ®åº“è¡¨åˆ›å»ºå®ä½“ç±»"></a>æ­¥éª¤6ï¼šæ ¹æ®æ•°æ®åº“è¡¨åˆ›å»ºå®ä½“ç±»</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;   </span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> String tel;</span><br><span class="line">    <span class="comment">//setter...getter...toStringæ–¹æ³•ç•¥</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ­¥éª¤7ï¼šåˆ›å»ºDaoæ¥å£"><a href="#æ­¥éª¤7ï¼šåˆ›å»ºDaoæ¥å£" class="headerlink" title="æ­¥éª¤7ï¼šåˆ›å»ºDaoæ¥å£"></a>æ­¥éª¤7ï¼šåˆ›å»ºDaoæ¥å£</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserDao</span> <span class="keyword">extends</span> <span class="title class_">BaseMapper</span>&lt;User&gt;&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ­¥éª¤8ï¼šç¼–å†™å¼•å¯¼ç±»"><a href="#æ­¥éª¤8ï¼šç¼–å†™å¼•å¯¼ç±»" class="headerlink" title="æ­¥éª¤8ï¼šç¼–å†™å¼•å¯¼ç±»"></a>æ­¥éª¤8ï¼šç¼–å†™å¼•å¯¼ç±»</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="comment">//@MapperScan(&quot;com.itheima.dao&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Mybatisplus01QuickstartApplication</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(Mybatisplus01QuickstartApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>è¯´æ˜ï¼š</strong>Daoæ¥å£è¦æƒ³è¢«å®¹å™¨æ‰«æåˆ°ï¼Œæœ‰ä¸¤ç§è§£å†³æ–¹æ¡ˆ:</p><ul><li>æ–¹æ¡ˆä¸€:åœ¨Daoæ¥å£ä¸Šæ·»åŠ <code>@Mapper</code>æ³¨è§£ï¼Œå¹¶ä¸”ç¡®ä¿Daoå¤„åœ¨å¼•å¯¼ç±»æ‰€åœ¨åŒ…æˆ–å…¶å­åŒ…ä¸­<ul><li>è¯¥æ–¹æ¡ˆçš„ç¼ºç‚¹æ˜¯éœ€è¦åœ¨æ¯ä¸€Daoæ¥å£ä¸­æ·»åŠ æ³¨è§£</li></ul></li><li>æ–¹æ¡ˆäºŒ:åœ¨å¼•å¯¼ç±»ä¸Šæ·»åŠ <code>@MapperScan</code>æ³¨è§£ï¼Œå…¶å±æ€§ä¸ºæ‰€è¦æ‰«æçš„Daoæ‰€åœ¨åŒ…<ul><li>è¯¥æ–¹æ¡ˆçš„å¥½å¤„æ˜¯åªéœ€è¦å†™ä¸€æ¬¡ï¼Œåˆ™æŒ‡å®šåŒ…ä¸‹çš„æ‰€æœ‰Daoæ¥å£éƒ½èƒ½è¢«æ‰«æåˆ°ï¼Œ<code>@Mapper</code>å°±å¯ä»¥ä¸å†™ã€‚</li></ul></li></ul><h4 id="æ­¥éª¤9ï¼šç¼–å†™æµ‹è¯•ç±»"><a href="#æ­¥éª¤9ï¼šç¼–å†™æµ‹è¯•ç±»" class="headerlink" title="æ­¥éª¤9ï¼šç¼–å†™æµ‹è¯•ç±»"></a>æ­¥éª¤9ï¼šç¼–å†™æµ‹è¯•ç±»</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MpDemoApplicationTests</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> UserDao userDao;</span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testGetAll</span><span class="params">()</span> &#123;</span><br><span class="line">List&lt;User&gt; userList = userDao.selectList(<span class="literal">null</span>);</span><br><span class="line">System.out.println(userList);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>è¯´æ˜ï¼š</strong></p><p>userDaoæ³¨å…¥çš„æ—¶å€™ä¸‹é¢æœ‰çº¢çº¿æç¤ºçš„åŸå› æ˜¯ä»€ä¹ˆ?</p><ul><li><p>UserDaoæ˜¯ä¸€ä¸ªæ¥å£ï¼Œä¸èƒ½å®ä¾‹åŒ–å¯¹è±¡</p></li><li><p>åªæœ‰åœ¨æœåŠ¡å™¨å¯åŠ¨IOCå®¹å™¨åˆå§‹åŒ–åï¼Œç”±æ¡†æ¶åˆ›å»ºDAOæ¥å£çš„ä»£ç†å¯¹è±¡æ¥æ³¨å…¥</p></li><li><p>ç°åœ¨æœåŠ¡å™¨å¹¶æœªå¯åŠ¨ï¼Œæ‰€ä»¥ä»£ç†å¯¹è±¡ä¹Ÿæœªåˆ›å»ºï¼ŒIDEAæŸ¥æ‰¾ä¸åˆ°å¯¹åº”çš„å¯¹è±¡æ³¨å…¥ï¼Œæ‰€ä»¥æç¤ºæŠ¥çº¢</p></li><li><p>ä¸€æ—¦æœåŠ¡å¯åŠ¨ï¼Œå°±èƒ½æ³¨å…¥å…¶ä»£ç†å¯¹è±¡ï¼Œæ‰€ä»¥è¯¥é”™è¯¯æç¤ºä¸å½±å“æ­£å¸¸è¿è¡Œã€‚</p></li></ul><p>æŸ¥çœ‹è¿è¡Œç»“æœ:</p><p><img src="/2022/07/25/MyBatisPlus/1630999646096.png" alt="1630999646096"></p><p>è·Ÿä¹‹å‰æ•´åˆMyBatisç›¸æ¯”ï¼Œä½ ä¼šå‘ç°æˆ‘ä»¬ä¸éœ€è¦åœ¨DAOæ¥å£ä¸­ç¼–å†™æ–¹æ³•å’ŒSQLè¯­å¥äº†ï¼Œåªéœ€è¦ç»§æ‰¿<code>BaseMapper</code>æ¥å£å³å¯ã€‚æ•´ä½“æ¥è¯´ç®€åŒ–å¾ˆå¤šã€‚</p><h3 id="1-2-MybatisPlusç®€ä»‹"><a href="#1-2-MybatisPlusç®€ä»‹" class="headerlink" title="1.2 MybatisPlusç®€ä»‹"></a>1.2 MybatisPlusç®€ä»‹</h3><p>MyBatisPlusï¼ˆç®€ç§°MPï¼‰æ˜¯åŸºäºMyBatisæ¡†æ¶åŸºç¡€ä¸Šå¼€å‘çš„å¢å¼ºå‹å·¥å…·ï¼Œæ—¨åœ¨&#x3D;&#x3D;ç®€åŒ–å¼€å‘ã€æé«˜æ•ˆç‡&#x3D;&#x3D;</p><p>é€šè¿‡åˆšæ‰çš„æ¡ˆä¾‹ï¼Œç›¸ä¿¡å¤§å®¶èƒ½å¤Ÿä½“ä¼šç®€åŒ–å¼€å‘å’Œæé«˜æ•ˆç‡è¿™ä¸¤ä¸ªæ–¹é¢çš„ä¼˜ç‚¹ã€‚</p><p>MyBatisPlusçš„å®˜ç½‘ä¸º:<code>https://mp.baomidou.com/</code></p><p><strong>è¯´æ˜:</strong></p><p><img src="/2022/07/25/MyBatisPlus/1631011942323.png" alt="1631011942323"></p><p>ç°åœ¨çš„é¡µé¢ä¸­ï¼Œè¿™ä¸€è¡Œå·²ç»è¢«åˆ é™¤ï¼Œç°åœ¨å†å»è®¿é—®<code>https://mybatis.plus</code>ä¼šå‘ç°è®¿é—®ä¸åˆ°ï¼Œè¿™ä¸ªå°±æœ‰å¾ˆå¤šå¯èƒ½æ€§ä¾›æˆ‘ä»¬çŒœæƒ³äº†ï¼Œæ‰€ä»¥å¤§å®¶ä½¿ç”¨baomidouçš„ç½‘å€è¿›è¡Œè®¿é—®å³å¯ã€‚</p><p>å®˜æ–¹æ–‡æ¡£ä¸­æœ‰ä¸€å¼ å¾ˆå¤šå°ä¼™ä¼´æ¯”è¾ƒç†Ÿæ‚‰çš„å›¾ç‰‡:</p><p><img src="/2022/07/25/MyBatisPlus/1631012174092.png" alt="1631012174092"></p><p>ä»è¿™å¼ å›¾ä¸­æˆ‘ä»¬å¯ä»¥çœ‹å‡ºMPæ—¨åœ¨æˆä¸ºMyBatisçš„æœ€å¥½æ­æ¡£ï¼Œè€Œä¸æ˜¯æ›¿æ¢MyBatis,æ‰€ä»¥å¯ä»¥ç†è§£ä¸ºMPæ˜¯MyBatisçš„ä¸€å¥—å¢å¼ºå·¥å…·ï¼Œå®ƒæ˜¯åœ¨MyBatisçš„åŸºç¡€ä¸Šè¿›è¡Œå¼€å‘çš„ï¼Œæˆ‘ä»¬è™½ç„¶ä½¿ç”¨MPä½†æ˜¯åº•å±‚ä¾ç„¶æ˜¯MyBatisçš„ä¸œè¥¿ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨MPä¸­å†™MyBatisçš„å†…å®¹ã€‚</p><p>å¯¹äºMPçš„å­¦ä¹ ï¼Œå¤§å®¶å¯ä»¥å‚è€ƒç€å®˜æ–¹æ–‡æ¡£æ¥è¿›è¡Œå­¦ä¹ ï¼Œé‡Œé¢éƒ½æœ‰è¯¦ç»†çš„ä»£ç æ¡ˆä¾‹ã€‚</p><p>MPçš„ç‰¹æ€§:</p><ul><li>æ— ä¾µå…¥ï¼šåªåšå¢å¼ºä¸åšæ”¹å˜ï¼Œä¸ä¼šå¯¹ç°æœ‰å·¥ç¨‹äº§ç”Ÿå½±å“</li><li>å¼ºå¤§çš„ CRUD æ“ä½œï¼šå†…ç½®é€šç”¨ Mapperï¼Œå°‘é‡é…ç½®å³å¯å®ç°å•è¡¨CRUD æ“ä½œ</li><li>æ”¯æŒ Lambdaï¼šç¼–å†™æŸ¥è¯¢æ¡ä»¶æ— éœ€æ‹…å¿ƒå­—æ®µå†™é”™</li><li>æ”¯æŒä¸»é”®è‡ªåŠ¨ç”Ÿæˆ</li><li>å†…ç½®åˆ†é¡µæ’ä»¶</li><li>â€¦â€¦</li></ul><h2 id="2ï¼Œæ ‡å‡†æ•°æ®å±‚å¼€å‘"><a href="#2ï¼Œæ ‡å‡†æ•°æ®å±‚å¼€å‘" class="headerlink" title="2ï¼Œæ ‡å‡†æ•°æ®å±‚å¼€å‘"></a>2ï¼Œæ ‡å‡†æ•°æ®å±‚å¼€å‘</h2><p>åœ¨è¿™ä¸€èŠ‚ä¸­æˆ‘ä»¬é‡ç‚¹å­¦ä¹ çš„æ˜¯æ•°æ®å±‚æ ‡å‡†çš„CRUD(å¢åˆ æ”¹æŸ¥)çš„å®ç°ä¸åˆ†é¡µåŠŸèƒ½ã€‚ä»£ç æ¯”è¾ƒå¤šï¼Œæˆ‘ä»¬ä¸€ä¸ªä¸ªæ¥å­¦ä¹ ã€‚</p><h3 id="2-1-æ ‡å‡†CRUDä½¿ç”¨"><a href="#2-1-æ ‡å‡†CRUDä½¿ç”¨" class="headerlink" title="2.1 æ ‡å‡†CRUDä½¿ç”¨"></a>2.1 æ ‡å‡†CRUDä½¿ç”¨</h3><p>å¯¹äºæ ‡å‡†çš„CRUDåŠŸèƒ½éƒ½æœ‰å“ªäº›ä»¥åŠMPéƒ½æä¾›äº†å“ªäº›æ–¹æ³•å¯ä»¥ä½¿ç”¨å‘¢?</p><p>æˆ‘ä»¬å…ˆæ¥çœ‹å¼ å›¾:</p><p><img src="/2022/07/25/MyBatisPlus/1631018877517.png" alt="1631018877517"></p><p>å¯¹äºè¿™å¼ å›¾çš„æ–¹æ³•ï¼Œæˆ‘ä»¬æŒ¨ä¸ªæ¥æ¼”ç¤ºä¸‹:</p><p>é¦–å…ˆè¯´ä¸‹ï¼Œæ¡ˆä¾‹ä¸­çš„ç¯å¢ƒå°±æ˜¯å’±ä»¬å…¥é—¨æ¡ˆä¾‹çš„å†…å®¹ï¼Œç¬¬ä¸€ä¸ªå…ˆæ¥å®Œæˆ<code>æ–°å¢</code>åŠŸèƒ½</p><h3 id="2-2-æ–°å¢"><a href="#2-2-æ–°å¢" class="headerlink" title="2.2 æ–°å¢"></a>2.2 æ–°å¢</h3><p>åœ¨è¿›è¡Œæ–°å¢ä¹‹å‰ï¼Œæˆ‘ä»¬å¯ä»¥åˆ†æä¸‹æ–°å¢çš„æ–¹æ³•:</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">insert</span> <span class="params">(T t)</span></span><br></pre></td></tr></table></figure><ul><li><p>T:æ³›å‹ï¼Œæ–°å¢ç”¨æ¥ä¿å­˜æ–°å¢æ•°æ®</p></li><li><p>int:è¿”å›å€¼ï¼Œæ–°å¢æˆåŠŸåè¿”å›1ï¼Œæ²¡æœ‰æ–°å¢æˆåŠŸè¿”å›çš„æ˜¯0</p></li></ul><p>åœ¨æµ‹è¯•ç±»ä¸­è¿›è¡Œæ–°å¢æ“ä½œ:</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Mybatisplus01QuickstartApplicationTests</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserDao userDao;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">testSave</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">        user.setName(<span class="string">&quot;é»‘é©¬ç¨‹åºå‘˜&quot;</span>);</span><br><span class="line">        user.setPassword(<span class="string">&quot;itheima&quot;</span>);</span><br><span class="line">        user.setAge(<span class="number">12</span>);</span><br><span class="line">        user.setTel(<span class="string">&quot;4006184000&quot;</span>);</span><br><span class="line">        userDao.insert(user);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œæµ‹è¯•åï¼Œæ•°æ®åº“è¡¨ä¸­å°±ä¼šæ·»åŠ ä¸€æ¡æ•°æ®ã€‚</p><p><img src="/2022/07/25/MyBatisPlus/1631013124310.png" alt="1631013124310"></p><p>ä½†æ˜¯æ•°æ®ä¸­çš„ä¸»é”®IDï¼Œæœ‰ç‚¹é•¿ï¼Œé‚£è¿™ä¸ªä¸»é”®IDæ˜¯å¦‚ä½•æ¥çš„?æˆ‘ä»¬æ›´æƒ³è¦çš„æ˜¯ä¸»é”®è‡ªå¢ï¼Œåº”è¯¥æ˜¯5æ‰å¯¹ï¼Œè¿™ä¸ªæ˜¯æˆ‘ä»¬åé¢è¦å­¦ä¹ çš„ä¸»é”®IDç”Ÿæˆç­–ç•¥ï¼Œè¿™å—çš„è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬æš‚æ—¶å…ˆæ”¾æ”¾ã€‚</p><h3 id="2-3-åˆ é™¤"><a href="#2-3-åˆ é™¤" class="headerlink" title="2.3 åˆ é™¤"></a>2.3 åˆ é™¤</h3><p>åœ¨è¿›è¡Œåˆ é™¤ä¹‹å‰ï¼Œæˆ‘ä»¬å¯ä»¥åˆ†æä¸‹åˆ é™¤çš„æ–¹æ³•:</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">deleteById</span> <span class="params">(Serializable id)</span></span><br></pre></td></tr></table></figure><ul><li><p>Serializableï¼šå‚æ•°ç±»å‹</p><ul><li><p>æ€è€ƒ:å‚æ•°ç±»å‹ä¸ºä»€ä¹ˆæ˜¯ä¸€ä¸ªåºåˆ—åŒ–ç±»?</p><p><img src="/2022/07/25/MyBatisPlus/1631013655771.png" alt="1631013655771"></p><p>ä»è¿™å¼ å›¾å¯ä»¥çœ‹å‡ºï¼Œ</p><ul><li>Stringå’ŒNumberæ˜¯Serializableçš„å­ç±»ï¼Œ</li><li>Numberåˆæ˜¯Float,Double,Integerç­‰ç±»çš„çˆ¶ç±»ï¼Œ</li><li>èƒ½ä½œä¸ºä¸»é”®çš„æ•°æ®ç±»å‹éƒ½å·²ç»æ˜¯Serializableçš„å­ç±»ï¼Œ</li><li>MPä½¿ç”¨Serializableä½œä¸ºå‚æ•°ç±»å‹ï¼Œå°±å¥½æ¯”æˆ‘ä»¬å¯ä»¥ç”¨Objectæ¥æ”¶ä»»ä½•æ•°æ®ç±»å‹ä¸€æ ·ã€‚</li></ul></li></ul></li><li><p>int:è¿”å›å€¼ç±»å‹ï¼Œæ•°æ®åˆ é™¤æˆåŠŸè¿”å›1ï¼Œæœªåˆ é™¤æ•°æ®è¿”å›0ã€‚</p></li></ul><p>åœ¨æµ‹è¯•ç±»ä¸­è¿›è¡Œæ–°å¢æ“ä½œ:</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"> <span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Mybatisplus01QuickstartApplicationTests</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserDao userDao;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">testDelete</span><span class="params">()</span> &#123;</span><br><span class="line">        userDao.deleteById(<span class="number">1401856123725713409L</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="2-4-ä¿®æ”¹"><a href="#2-4-ä¿®æ”¹" class="headerlink" title="2.4 ä¿®æ”¹"></a>2.4 ä¿®æ”¹</h3><p>åœ¨è¿›è¡Œä¿®æ”¹ä¹‹å‰ï¼Œæˆ‘ä»¬å¯ä»¥åˆ†æä¸‹ä¿®æ”¹çš„æ–¹æ³•:</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">updateById</span><span class="params">(T t)</span>;</span><br></pre></td></tr></table></figure><ul><li><p>T:æ³›å‹ï¼Œéœ€è¦ä¿®æ”¹çš„æ•°æ®å†…å®¹ï¼Œæ³¨æ„å› ä¸ºæ˜¯æ ¹æ®IDè¿›è¡Œä¿®æ”¹ï¼Œæ‰€ä»¥ä¼ å…¥çš„å¯¹è±¡ä¸­éœ€è¦æœ‰IDå±æ€§å€¼</p></li><li><p>int:è¿”å›å€¼ï¼Œä¿®æ”¹æˆåŠŸåè¿”å›1ï¼Œæœªä¿®æ”¹æ•°æ®è¿”å›0</p></li></ul><p>åœ¨æµ‹è¯•ç±»ä¸­è¿›è¡Œæ–°å¢æ“ä½œ:</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Mybatisplus01QuickstartApplicationTests</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserDao userDao;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">testUpdate</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">        user.setId(<span class="number">1L</span>);</span><br><span class="line">        user.setName(<span class="string">&quot;Tom888&quot;</span>);</span><br><span class="line">        user.setPassword(<span class="string">&quot;tom888&quot;</span>);</span><br><span class="line">        userDao.updateById(user);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>**è¯´æ˜:**ä¿®æ”¹çš„æ—¶å€™ï¼Œåªä¿®æ”¹å®ä½“å¯¹è±¡ä¸­æœ‰å€¼çš„å­—æ®µã€‚</p><h3 id="2-5-æ ¹æ®IDæŸ¥è¯¢"><a href="#2-5-æ ¹æ®IDæŸ¥è¯¢" class="headerlink" title="2.5 æ ¹æ®IDæŸ¥è¯¢"></a>2.5 æ ¹æ®IDæŸ¥è¯¢</h3><p>åœ¨è¿›è¡Œæ ¹æ®IDæŸ¥è¯¢ä¹‹å‰ï¼Œæˆ‘ä»¬å¯ä»¥åˆ†æä¸‹æ ¹æ®IDæŸ¥è¯¢çš„æ–¹æ³•:</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">T <span class="title function_">selectById</span> <span class="params">(Serializable id)</span></span><br></pre></td></tr></table></figure><ul><li>Serializableï¼šå‚æ•°ç±»å‹,ä¸»é”®IDçš„å€¼</li><li>T:æ ¹æ®IDæŸ¥è¯¢åªä¼šè¿”å›ä¸€æ¡æ•°æ®</li></ul><p>åœ¨æµ‹è¯•ç±»ä¸­è¿›è¡Œæ–°å¢æ“ä½œ:</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Mybatisplus01QuickstartApplicationTests</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserDao userDao;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">testGetById</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userDao.selectById(<span class="number">2L</span>);</span><br><span class="line">        System.out.println(user);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-6-æŸ¥è¯¢æ‰€æœ‰"><a href="#2-6-æŸ¥è¯¢æ‰€æœ‰" class="headerlink" title="2.6 æŸ¥è¯¢æ‰€æœ‰"></a>2.6 æŸ¥è¯¢æ‰€æœ‰</h3><p>åœ¨è¿›è¡ŒæŸ¥è¯¢æ‰€æœ‰ä¹‹å‰ï¼Œæˆ‘ä»¬å¯ä»¥åˆ†æä¸‹æŸ¥è¯¢æ‰€æœ‰çš„æ–¹æ³•:</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">List&lt;T&gt; <span class="title function_">selectList</span><span class="params">(Wrapper&lt;T&gt; queryWrapper)</span></span><br></pre></td></tr></table></figure><ul><li>Wrapperï¼šç”¨æ¥æ„å»ºæ¡ä»¶æŸ¥è¯¢çš„æ¡ä»¶ï¼Œç›®å‰æˆ‘ä»¬æ²¡æœ‰å¯ç›´æ¥ä¼ ä¸ºNull</li><li>List<T>:å› ä¸ºæŸ¥è¯¢çš„æ˜¯æ‰€æœ‰ï¼Œæ‰€ä»¥è¿”å›çš„æ•°æ®æ˜¯ä¸€ä¸ªé›†åˆ</T></li></ul><p>åœ¨æµ‹è¯•ç±»ä¸­è¿›è¡Œæ–°å¢æ“ä½œ:</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Mybatisplus01QuickstartApplicationTests</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserDao userDao;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">testGetAll</span><span class="params">()</span> &#123;</span><br><span class="line">        List&lt;User&gt; userList = userDao.selectList(<span class="literal">null</span>);</span><br><span class="line">        System.out.println(userList);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬æ‰€è°ƒç”¨çš„æ–¹æ³•éƒ½æ˜¯æ¥è‡ªäºDAOæ¥å£ç»§æ‰¿çš„BaseMapperç±»ä¸­ã€‚é‡Œé¢çš„æ–¹æ³•æœ‰å¾ˆå¤šï¼Œæˆ‘ä»¬åé¢ä¼šæ…¢æ…¢å»å­¦ä¹ é‡Œé¢çš„å†…å®¹ã€‚</p><h3 id="2-7-Lombok"><a href="#2-7-Lombok" class="headerlink" title="2.7 Lombok"></a>2.7 Lombok</h3><p>ä»£ç å†™åˆ°è¿™ï¼Œæˆ‘ä»¬ä¼šå‘ç°DAOæ¥å£ç±»çš„ç¼–å†™ç°åœ¨å˜æˆæœ€ç®€å•çš„äº†ï¼Œé‡Œé¢ä»€ä¹ˆéƒ½ä¸ç”¨å†™ã€‚åè¿‡æ¥çœ‹çœ‹æ¨¡å‹ç±»çš„ç¼–å†™éƒ½éœ€è¦å“ªäº›å†…å®¹:</p><ul><li>ç§æœ‰å±æ€§</li><li>setterâ€¦getterâ€¦æ–¹æ³•</li><li>toStringæ–¹æ³•</li><li>æ„é€ å‡½æ•°</li></ul><p>è™½ç„¶è¿™äº›å†…å®¹ä¸éš¾ï¼ŒåŒæ—¶ä¹Ÿéƒ½æ˜¯é€šè¿‡IDEAå·¥å…·ç”Ÿæˆçš„ï¼Œä½†æ˜¯è¿‡ç¨‹è¿˜æ˜¯å¿…é¡»å¾—èµ°ä¸€éï¼Œé‚£ä¹ˆå¯¹äºæ¨¡å‹ç±»çš„ç¼–å†™æœ‰æ²¡æœ‰ä»€ä¹ˆä¼˜åŒ–æ–¹æ³•?å°±æ˜¯æˆ‘ä»¬æ¥ä¸‹æ¥è¦å­¦ä¹ çš„Lombokã€‚</p><h4 id="æ¦‚å¿µ"><a href="#æ¦‚å¿µ" class="headerlink" title="æ¦‚å¿µ"></a>æ¦‚å¿µ</h4><ul><li>Lombokï¼Œä¸€ä¸ªJavaç±»åº“ï¼Œæä¾›äº†ä¸€ç»„æ³¨è§£ï¼Œç®€åŒ–POJOå®ä½“ç±»å¼€å‘ã€‚</li></ul><h4 id="ä½¿ç”¨æ­¥éª¤"><a href="#ä½¿ç”¨æ­¥éª¤" class="headerlink" title="ä½¿ç”¨æ­¥éª¤"></a>ä½¿ç”¨æ­¥éª¤</h4><h5 id="æ­¥éª¤1ï¼šæ·»åŠ lombokä¾èµ–"><a href="#æ­¥éª¤1ï¼šæ·»åŠ lombokä¾èµ–" class="headerlink" title="æ­¥éª¤1ï¼šæ·»åŠ lombokä¾èµ–"></a>æ­¥éª¤1ï¼šæ·»åŠ lombokä¾èµ–</h5><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--&lt;version&gt;1.18.12&lt;/version&gt;--&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„ï¼š</strong>ç‰ˆæœ¬å¯ä»¥ä¸ç”¨å†™ï¼Œå› ä¸ºSpringBootä¸­å·²ç»ç®¡ç†äº†lombokçš„ç‰ˆæœ¬ã€‚</p><h5 id="æ­¥éª¤2ï¼šå®‰è£…Lombokçš„æ’ä»¶"><a href="#æ­¥éª¤2ï¼šå®‰è£…Lombokçš„æ’ä»¶" class="headerlink" title="æ­¥éª¤2ï¼šå®‰è£…Lombokçš„æ’ä»¶"></a>æ­¥éª¤2ï¼šå®‰è£…Lombokçš„æ’ä»¶</h5><p>æ–°ç‰ˆæœ¬IDEAå·²ç»å†…ç½®äº†è¯¥æ’ä»¶ï¼Œå¦‚æœåˆ é™¤setterå’Œgetteræ–¹æ³•ç¨‹åºæœ‰æŠ¥çº¢ï¼Œåˆ™éœ€è¦å®‰è£…æ’ä»¶</p><p><img src="/2022/07/25/MyBatisPlus/1631016543648.png" alt="1631016543648"></p><p>å¦‚æœåœ¨IDEAä¸­æ‰¾ä¸åˆ°lombokæ’ä»¶ï¼Œå¯ä»¥è®¿é—®å¦‚ä¸‹ç½‘ç«™</p><p><code>https://plugins.jetbrains.com/plugin/6317-lombok/versions</code></p><p>æ ¹æ®è‡ªå·±IDEAçš„ç‰ˆæœ¬ä¸‹è½½å¯¹åº”çš„lombokæ’ä»¶ï¼Œä¸‹è½½æˆåŠŸåï¼Œåœ¨IDEAä¸­é‡‡ç”¨ç¦»çº¿å®‰è£…çš„æ–¹å¼è¿›è¡Œå®‰è£…ã€‚</p><p><img src="/2022/07/25/MyBatisPlus/1631016876641.png" alt="1631016876641"></p><h5 id="æ­¥éª¤3ï¼šæ¨¡å‹ç±»ä¸Šæ·»åŠ æ³¨è§£"><a href="#æ­¥éª¤3ï¼šæ¨¡å‹ç±»ä¸Šæ·»åŠ æ³¨è§£" class="headerlink" title="æ­¥éª¤3ï¼šæ¨¡å‹ç±»ä¸Šæ·»åŠ æ³¨è§£"></a>æ­¥éª¤3ï¼šæ¨¡å‹ç±»ä¸Šæ·»åŠ æ³¨è§£</h5><p>Lombokå¸¸è§çš„æ³¨è§£æœ‰ï¼š</p><ul><li>@Setterï¼šä¸ºæ¨¡å‹ç±»çš„å±æ€§æä¾›setteræ–¹æ³•</li><li>@Getterï¼šä¸ºæ¨¡å‹ç±»çš„å±æ€§æä¾›getteræ–¹æ³•</li><li>@ToStringï¼šä¸ºæ¨¡å‹ç±»çš„å±æ€§æä¾›toStringæ–¹æ³•</li><li>@EqualsAndHashCodeï¼šä¸ºæ¨¡å‹ç±»çš„å±æ€§æä¾›equalså’Œhashcodeæ–¹æ³•</li><li><strong>@Dataï¼šæ˜¯ä¸ªç»„åˆæ³¨è§£ï¼ŒåŒ…å«ä¸Šé¢çš„æ³¨è§£çš„åŠŸèƒ½ï¼Œä¸åŒ…å«ä¸‹é¢ä¿©ä¸ª</strong></li><li>@NoArgsConstructorï¼šæä¾›ä¸€ä¸ªæ— å‚æ„é€ å‡½æ•°</li><li>@AllArgsConstructorï¼šæä¾›ä¸€ä¸ªåŒ…å«æ‰€æœ‰å‚æ•°çš„æ„é€ å‡½æ•°</li></ul><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> String tel;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>è¯´æ˜:</strong></p><p>Lombokåªæ˜¯ç®€åŒ–æ¨¡å‹ç±»çš„ç¼–å†™ï¼Œæˆ‘ä»¬ä¹‹å‰çš„æ–¹æ³•ä¹Ÿèƒ½ç”¨ï¼Œæ¯”å¦‚æœ‰äººä¼šé—®:æˆ‘å¦‚æœåªæƒ³è¦æœ‰nameå’Œpasswordçš„æ„é€ å‡½æ•°ï¼Œè¯¥å¦‚ä½•ç¼–å†™?</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> String tel;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">User</span><span class="params">(String name, String password)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.password = password;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ç§æ–¹å¼æ˜¯è¢«å…è®¸çš„ã€‚</p><h3 id="2-8-åˆ†é¡µåŠŸèƒ½"><a href="#2-8-åˆ†é¡µåŠŸèƒ½" class="headerlink" title="2.8 åˆ†é¡µåŠŸèƒ½"></a>2.8 åˆ†é¡µåŠŸèƒ½</h3><p>åŸºç¡€çš„å¢åˆ æ”¹æŸ¥å°±å·²ç»å­¦ä¹ å®Œäº†ï¼Œåˆšæ‰æˆ‘ä»¬åœ¨åˆ†æåŸºç¡€å¼€å‘çš„æ—¶å€™ï¼Œæœ‰ä¸€ä¸ªåˆ†é¡µåŠŸèƒ½è¿˜æ²¡æœ‰å®ç°ï¼Œåœ¨MPä¸­å¦‚ä½•å®ç°åˆ†é¡µåŠŸèƒ½ï¼Œå°±æ˜¯å’±ä»¬æ¥ä¸‹æ¥è¦å­¦ä¹ çš„å†…å®¹ã€‚</p><p>åˆ†é¡µæŸ¥è¯¢ä½¿ç”¨çš„æ–¹æ³•æ˜¯:</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">IPage&lt;T&gt; <span class="title function_">selectPage</span><span class="params">(IPage&lt;T&gt; page, Wrapper&lt;T&gt; queryWrapper)</span></span><br></pre></td></tr></table></figure><ul><li>IPage:ç”¨æ¥æ„å»ºåˆ†é¡µæŸ¥è¯¢æ¡ä»¶</li><li>Wrapperï¼šç”¨æ¥æ„å»ºæ¡ä»¶æŸ¥è¯¢çš„æ¡ä»¶ï¼Œç›®å‰æˆ‘ä»¬æ²¡æœ‰å¯ç›´æ¥ä¼ ä¸ºNull</li><li>IPage:è¿”å›å€¼ï¼Œä½ ä¼šå‘ç°æ„å»ºåˆ†é¡µæ¡ä»¶å’Œæ–¹æ³•çš„è¿”å›å€¼éƒ½æ˜¯IPage</li></ul><p>IPageæ˜¯ä¸€ä¸ªæ¥å£ï¼Œæˆ‘ä»¬éœ€è¦æ‰¾åˆ°å®ƒçš„å®ç°ç±»æ¥æ„å»ºå®ƒï¼Œå…·ä½“çš„å®ç°ç±»ï¼Œå¯ä»¥è¿›å…¥åˆ°IPageç±»ä¸­æŒ‰ctrl+h,ä¼šæ‰¾åˆ°å…¶æœ‰ä¸€ä¸ªå®ç°ç±»ä¸º<code>Page</code>ã€‚</p><h4 id="æ­¥éª¤1ï¼šè°ƒç”¨æ–¹æ³•ä¼ å…¥å‚æ•°è·å–è¿”å›å€¼"><a href="#æ­¥éª¤1ï¼šè°ƒç”¨æ–¹æ³•ä¼ å…¥å‚æ•°è·å–è¿”å›å€¼" class="headerlink" title="æ­¥éª¤1ï¼šè°ƒç”¨æ–¹æ³•ä¼ å…¥å‚æ•°è·å–è¿”å›å€¼"></a>æ­¥éª¤1ï¼šè°ƒç”¨æ–¹æ³•ä¼ å…¥å‚æ•°è·å–è¿”å›å€¼</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Mybatisplus01QuickstartApplicationTests</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserDao userDao;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//åˆ†é¡µæŸ¥è¯¢</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">testSelectPage</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">//1 åˆ›å»ºIPageåˆ†é¡µå¯¹è±¡,è®¾ç½®åˆ†é¡µå‚æ•°,1ä¸ºå½“å‰é¡µç ï¼Œ3ä¸ºæ¯é¡µæ˜¾ç¤ºçš„è®°å½•æ•°</span></span><br><span class="line">        IPage&lt;User&gt; page=<span class="keyword">new</span> <span class="title class_">Page</span>&lt;&gt;(<span class="number">1</span>,<span class="number">3</span>);</span><br><span class="line">        <span class="comment">//2 æ‰§è¡Œåˆ†é¡µæŸ¥è¯¢</span></span><br><span class="line">        userDao.selectPage(page,<span class="literal">null</span>);</span><br><span class="line">        <span class="comment">//3 è·å–åˆ†é¡µç»“æœ</span></span><br><span class="line">        System.out.println(<span class="string">&quot;å½“å‰é¡µç å€¼ï¼š&quot;</span>+page.getCurrent());</span><br><span class="line">        System.out.println(<span class="string">&quot;æ¯é¡µæ˜¾ç¤ºæ•°ï¼š&quot;</span>+page.getSize());</span><br><span class="line">        System.out.println(<span class="string">&quot;ä¸€å…±å¤šå°‘é¡µï¼š&quot;</span>+page.getPages());</span><br><span class="line">        System.out.println(<span class="string">&quot;ä¸€å…±å¤šå°‘æ¡æ•°æ®ï¼š&quot;</span>+page.getTotal());</span><br><span class="line">        System.out.println(<span class="string">&quot;æ•°æ®ï¼š&quot;</span>+page.getRecords());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ­¥éª¤2ï¼šè®¾ç½®åˆ†é¡µæ‹¦æˆªå™¨"><a href="#æ­¥éª¤2ï¼šè®¾ç½®åˆ†é¡µæ‹¦æˆªå™¨" class="headerlink" title="æ­¥éª¤2ï¼šè®¾ç½®åˆ†é¡µæ‹¦æˆªå™¨"></a>æ­¥éª¤2ï¼šè®¾ç½®åˆ†é¡µæ‹¦æˆªå™¨</h4><p>è¿™ä¸ªæ‹¦æˆªå™¨MPå·²ç»ä¸ºæˆ‘ä»¬æä¾›å¥½äº†ï¼Œæˆ‘ä»¬åªéœ€è¦å°†å…¶é…ç½®æˆSpringç®¡ç†çš„beanå¯¹è±¡å³å¯ã€‚</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MybatisPlusConfig</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> MybatisPlusInterceptor <span class="title function_">mybatisPlusInterceptor</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">//1 åˆ›å»ºMybatisPlusInterceptoræ‹¦æˆªå™¨å¯¹è±¡</span></span><br><span class="line">        MybatisPlusInterceptor mpInterceptor=<span class="keyword">new</span> <span class="title class_">MybatisPlusInterceptor</span>();</span><br><span class="line">        <span class="comment">//2 æ·»åŠ åˆ†é¡µæ‹¦æˆªå™¨</span></span><br><span class="line">        mpInterceptor.addInnerInterceptor(<span class="keyword">new</span> <span class="title class_">PaginationInnerInterceptor</span>());</span><br><span class="line">        <span class="keyword">return</span> mpInterceptor;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>è¯´æ˜ï¼š</strong>ä¸Šé¢çš„ä»£ç è®°ä¸ä½å’‹åŠå‘¢?</p><p>è¿™äº›å†…å®¹åœ¨MPçš„å®˜æ–¹æ–‡æ¡£ä¸­æœ‰è¯¦ç»†çš„è¯´æ˜ï¼Œæˆ‘ä»¬å¯ä»¥æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£ç±»é…ç½®</p><p><img src="/2022/07/25/MyBatisPlus/1631208030131.png" alt="1631208030131"></p><h4 id="æ­¥éª¤3ï¼šè¿è¡Œæµ‹è¯•ç¨‹åº"><a href="#æ­¥éª¤3ï¼šè¿è¡Œæµ‹è¯•ç¨‹åº" class="headerlink" title="æ­¥éª¤3ï¼šè¿è¡Œæµ‹è¯•ç¨‹åº"></a>æ­¥éª¤3ï¼šè¿è¡Œæµ‹è¯•ç¨‹åº</h4><p><img src="/2022/07/25/MyBatisPlus/1631019660480.png" alt="1631019660480"></p><p>å¦‚æœæƒ³æŸ¥çœ‹MPæ‰§è¡Œçš„SQLè¯­å¥ï¼Œå¯ä»¥ä¿®æ”¹application.ymlé…ç½®æ–‡ä»¶ï¼Œ</p><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="attr">configuration:</span></span><br><span class="line">    <span class="attr">log-impl:</span> <span class="string">org.apache.ibatis.logging.stdout.StdOutImpl</span> <span class="comment">#æ‰“å°SQLæ—¥å¿—åˆ°æ§åˆ¶å°</span></span><br></pre></td></tr></table></figure><p>æ‰“å¼€æ—¥å¿—åï¼Œå°±å¯ä»¥åœ¨æ§åˆ¶å°æ‰“å°å‡ºå¯¹åº”çš„SQLè¯­å¥ï¼Œå¼€å¯æ—¥å¿—åŠŸèƒ½æ€§èƒ½å°±ä¼šå—åˆ°å½±å“ï¼Œè°ƒè¯•å®Œåè®°å¾—å…³é—­ã€‚</p><p><img src="/2022/07/25/MyBatisPlus/1631019896688.png" alt="1631019896688"></p><h2 id="3ï¼ŒDQLç¼–ç¨‹æ§åˆ¶"><a href="#3ï¼ŒDQLç¼–ç¨‹æ§åˆ¶" class="headerlink" title="3ï¼ŒDQLç¼–ç¨‹æ§åˆ¶"></a>3ï¼ŒDQLç¼–ç¨‹æ§åˆ¶</h2><p>å¢åˆ æ”¹æŸ¥å››ä¸ªæ“ä½œä¸­ï¼ŒæŸ¥è¯¢æ˜¯éå¸¸é‡è¦çš„ä¹Ÿæ˜¯éå¸¸å¤æ‚çš„æ“ä½œï¼Œè¿™å—éœ€è¦æˆ‘ä»¬é‡ç‚¹å­¦ä¹ ä¸‹ï¼Œè¿™èŠ‚æˆ‘ä»¬ä¸»è¦å­¦ä¹ çš„å†…å®¹æœ‰:</p><ul><li>æ¡ä»¶æŸ¥è¯¢æ–¹å¼</li><li>æŸ¥è¯¢æŠ•å½±</li><li>æŸ¥è¯¢æ¡ä»¶è®¾å®š</li><li>å­—æ®µæ˜ å°„ä¸è¡¨åæ˜ å°„</li></ul><h3 id="3-1-æ¡ä»¶æŸ¥è¯¢"><a href="#3-1-æ¡ä»¶æŸ¥è¯¢" class="headerlink" title="3.1 æ¡ä»¶æŸ¥è¯¢"></a>3.1 æ¡ä»¶æŸ¥è¯¢</h3><h4 id="3-1-1-æ¡ä»¶æŸ¥è¯¢çš„ç±»"><a href="#3-1-1-æ¡ä»¶æŸ¥è¯¢çš„ç±»" class="headerlink" title="3.1.1 æ¡ä»¶æŸ¥è¯¢çš„ç±»"></a>3.1.1 æ¡ä»¶æŸ¥è¯¢çš„ç±»</h4><ul><li>MyBatisPluså°†ä¹¦å†™å¤æ‚çš„SQLæŸ¥è¯¢æ¡ä»¶è¿›è¡Œäº†å°è£…ï¼Œä½¿ç”¨ç¼–ç¨‹çš„å½¢å¼å®ŒæˆæŸ¥è¯¢æ¡ä»¶çš„ç»„åˆã€‚</li></ul><p>è¿™ä¸ªæˆ‘ä»¬åœ¨å‰é¢éƒ½æœ‰è§è¿‡ï¼Œæ¯”å¦‚æŸ¥è¯¢æ‰€æœ‰å’Œåˆ†é¡µæŸ¥è¯¢çš„æ—¶å€™ï¼Œéƒ½æœ‰çœ‹åˆ°è¿‡ä¸€ä¸ª<code>Wrapper</code>ç±»ï¼Œè¿™ä¸ªç±»å°±æ˜¯ç”¨æ¥æ„å»ºæŸ¥è¯¢æ¡ä»¶çš„ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º:</p><p><img src="/2022/07/25/MyBatisPlus/1631020283701.png" alt="1631020283701"></p><p>é‚£ä¹ˆæ¡ä»¶æŸ¥è¯¢å¦‚ä½•ä½¿ç”¨Wrapperæ¥æ„å»ºå‘¢?</p><h4 id="3-1-2-ç¯å¢ƒæ„å»º"><a href="#3-1-2-ç¯å¢ƒæ„å»º" class="headerlink" title="3.1.2 ç¯å¢ƒæ„å»º"></a>3.1.2 ç¯å¢ƒæ„å»º</h4><p>åœ¨æ„å»ºæ¡ä»¶æŸ¥è¯¢ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥å‡†å¤‡ä¸‹ç¯å¢ƒ</p><ul><li><p>åˆ›å»ºä¸€ä¸ªSpringBooté¡¹ç›®</p></li><li><p>pom.xmlä¸­æ·»åŠ å¯¹åº”çš„ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.5.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.itheima<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatisplus_02_dql<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">java.version</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">java.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.4.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.16<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>runtime<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>ç¼–å†™UserDaoæ¥å£</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserDao</span> <span class="keyword">extends</span> <span class="title class_">BaseMapper</span>&lt;User&gt; &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>ç¼–å†™æ¨¡å‹ç±»</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> String tel;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>ç¼–å†™å¼•å¯¼ç±»</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Mybatisplus02DqlApplication</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(Mybatisplus02DqlApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>ç¼–å†™é…ç½®æ–‡ä»¶</p><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># dataSource</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">com.alibaba.druid.pool.DruidDataSource</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/mybatisplus_db?serverTimezone=UTC</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">root</span></span><br><span class="line"><span class="comment"># mpæ—¥å¿—</span></span><br><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="attr">configuration:</span></span><br><span class="line">    <span class="attr">log-impl:</span> <span class="string">org.apache.ibatis.logging.stdout.StdOutImpl</span></span><br></pre></td></tr></table></figure></li><li><p>ç¼–å†™æµ‹è¯•ç±»</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Mybatisplus02DqlApplicationTests</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserDao userDao;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">testGetAll</span><span class="params">()</span>&#123;</span><br><span class="line">        List&lt;User&gt; userList = userDao.selectList(<span class="literal">null</span>);</span><br><span class="line">        System.out.println(userList);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æœ€ç»ˆåˆ›å»ºçš„é¡¹ç›®ç»“æ„ä¸º:</p><p><img src="/2022/07/25/MyBatisPlus/1631033477792.png" alt="1631033477792"></p></li><li><p>æµ‹è¯•çš„æ—¶å€™ï¼Œæ§åˆ¶å°æ‰“å°çš„æ—¥å¿—æ¯”è¾ƒå¤šï¼Œé€Ÿåº¦æœ‰ç‚¹æ…¢è€Œä¸”ä¸åˆ©äºæŸ¥çœ‹è¿è¡Œç»“æœï¼Œæ‰€ä»¥æ¥ä¸‹æ¥æˆ‘ä»¬æŠŠè¿™ä¸ªæ—¥å¿—å¤„ç†ä¸‹:</p><ul><li><p>å–æ¶ˆåˆå§‹åŒ–springæ—¥å¿—æ‰“å°ï¼Œresourcesç›®å½•ä¸‹æ·»åŠ logback.xmlï¼Œåç§°å›ºå®šï¼Œå†…å®¹å¦‚ä¸‹:</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>è¯´æ˜ï¼š</strong>logback.xmlçš„é…ç½®å†…å®¹ï¼Œä¸æ˜¯æˆ‘ä»¬å­¦ä¹ çš„é‡ç‚¹ï¼Œå¦‚æœæœ‰å…´è¶£å¯ä»¥è‡ªè¡Œç™¾åº¦æŸ¥è¯¢ã€‚</p></li><li><p>å–æ¶ˆMybatisPluså¯åŠ¨bannerå›¾æ ‡</p><p><img src="/2022/07/25/MyBatisPlus/1631021315906.png" alt="1631021315906"></p><p>application.ymlæ·»åŠ å¦‚ä¸‹å†…å®¹:</p><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># mybatis-plusæ—¥å¿—æ§åˆ¶å°è¾“å‡º</span></span><br><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="attr">configuration:</span></span><br><span class="line">    <span class="attr">log-impl:</span> <span class="string">org.apache.ibatis.logging.stdout.StdOutImpl</span></span><br><span class="line">  <span class="attr">global-config:</span></span><br><span class="line">    <span class="attr">banner:</span> <span class="string">off</span> <span class="comment"># å…³é—­mybatispluså¯åŠ¨å›¾æ ‡</span></span><br></pre></td></tr></table></figure></li><li><p>å–æ¶ˆSpringBootçš„logæ‰“å°</p><p><img src="/2022/07/25/MyBatisPlus/1631021269422.png" alt="1631021269422"></p><p>application.ymlæ·»åŠ å¦‚ä¸‹å†…å®¹:</p><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">main:</span></span><br><span class="line">    <span class="attr">banner-mode:</span> <span class="string">off</span> <span class="comment"># å…³é—­SpringBootå¯åŠ¨å›¾æ ‡(banner)</span></span><br></pre></td></tr></table></figure></li></ul></li></ul><p>è§£å†³æ§åˆ¶å°æ‰“å°æ—¥å¿—è¿‡å¤šçš„ç›¸å…³æ“ä½œå¯ä»¥ä¸ç”¨å»åšï¼Œä¸€èˆ¬ä¼šè¢«ç”¨æ¥æ–¹ä¾¿æˆ‘ä»¬æŸ¥çœ‹ç¨‹åºè¿è¡Œçš„ç»“æœã€‚</p><h4 id="3-1-3-æ„å»ºæ¡ä»¶æŸ¥è¯¢"><a href="#3-1-3-æ„å»ºæ¡ä»¶æŸ¥è¯¢" class="headerlink" title="3.1.3 æ„å»ºæ¡ä»¶æŸ¥è¯¢"></a>3.1.3 æ„å»ºæ¡ä»¶æŸ¥è¯¢</h4><p>åœ¨è¿›è¡ŒæŸ¥è¯¢çš„æ—¶å€™ï¼Œæˆ‘ä»¬çš„å…¥å£æ˜¯åœ¨Wrapperè¿™ä¸ªç±»ä¸Šï¼Œå› ä¸ºå®ƒæ˜¯ä¸€ä¸ªæ¥å£ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å»æ‰¾å®ƒå¯¹åº”çš„å®ç°ç±»ï¼Œå…³äºå®ç°ç±»ä¹Ÿæœ‰å¾ˆå¤šï¼Œè¯´æ˜æˆ‘ä»¬æœ‰å¤šç§æ„å»ºæŸ¥è¯¢æ¡ä»¶å¯¹è±¡çš„æ–¹å¼ï¼Œ</p><p><img src="/2022/07/25/MyBatisPlus/1631021942869.png" alt="1631021942869"></p><ol><li>å…ˆæ¥çœ‹ç¬¬ä¸€ç§ï¼šQueryWrapper</li></ol><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Mybatisplus02DqlApplicationTests</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserDao userDao;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">testGetAll</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">QueryWrapper</span> <span class="variable">qw</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>();</span><br><span class="line">        qw.lt(<span class="string">&quot;age&quot;</span>,<span class="number">18</span>);</span><br><span class="line">        List&lt;User&gt; userList = userDao.selectList(qw);</span><br><span class="line">        System.out.println(userList);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p>lt: å°äº(&lt;) ,æœ€ç»ˆçš„sqlè¯­å¥ä¸º</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> id,name,password,age,tel <span class="keyword">FROM</span> <span class="keyword">user</span> <span class="keyword">WHERE</span> (age <span class="operator">&lt;</span> ?)</span><br></pre></td></tr></table></figure></li></ul><p>ç¬¬ä¸€ç§æ–¹å¼ä»‹ç»å®Œåï¼Œæœ‰ä¸ªå°é—®é¢˜å°±æ˜¯åœ¨å†™æ¡ä»¶çš„æ—¶å€™ï¼Œå®¹æ˜“å‡ºé”™ï¼Œæ¯”å¦‚ageå†™é”™ï¼Œå°±ä¼šå¯¼è‡´æŸ¥è¯¢ä¸æˆåŠŸ</p><ol start="2"><li>æ¥ç€æ¥çœ‹ç¬¬äºŒç§ï¼šQueryWrapperçš„åŸºç¡€ä¸Šä½¿ç”¨lambda</li></ol><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Mybatisplus02DqlApplicationTests</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserDao userDao;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">testGetAll</span><span class="params">()</span>&#123;</span><br><span class="line">        QueryWrapper&lt;User&gt; qw = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;User&gt;();</span><br><span class="line">        qw.lambda().lt(User::getAge, <span class="number">10</span>);<span class="comment">//æ·»åŠ æ¡ä»¶</span></span><br><span class="line">        List&lt;User&gt; userList = userDao.selectList(qw);</span><br><span class="line">        System.out.println(userList);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><code>User::getAget</code>ï¼Œä¸ºlambdaè¡¨è¾¾å¼ä¸­çš„ï¼Œç±»å::æ–¹æ³•åï¼Œæœ€ç»ˆçš„sqlè¯­å¥ä¸º:</li></ul><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> id,name,password,age,tel <span class="keyword">FROM</span> <span class="keyword">user</span> <span class="keyword">WHERE</span> (age <span class="operator">&lt;</span> ?)</span><br></pre></td></tr></table></figure><p>**æ³¨æ„:**æ„å»ºLambdaQueryWrapperçš„æ—¶å€™æ³›å‹ä¸èƒ½çœã€‚</p><p>æ­¤æ—¶æˆ‘ä»¬å†æ¬¡ç¼–å†™æ¡ä»¶çš„æ—¶å€™ï¼Œå°±ä¸ä¼šå­˜åœ¨å†™é”™åç§°çš„æƒ…å†µï¼Œä½†æ˜¯qwåé¢å¤šäº†ä¸€å±‚lambda()è°ƒç”¨</p><ol start="3"><li>æ¥ç€æ¥çœ‹ç¬¬ä¸‰ç§ï¼šLambdaQueryWrapper</li></ol><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Mybatisplus02DqlApplicationTests</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserDao userDao;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">testGetAll</span><span class="params">()</span>&#123;</span><br><span class="line">        LambdaQueryWrapper&lt;User&gt; lqw = <span class="keyword">new</span> <span class="title class_">LambdaQueryWrapper</span>&lt;User&gt;();</span><br><span class="line">        lqw.lt(User::getAge, <span class="number">10</span>);</span><br><span class="line">        List&lt;User&gt; userList = userDao.selectList(lqw);</span><br><span class="line">        System.out.println(userList);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ç§æ–¹å¼å°±è§£å†³äº†ä¸Šä¸€ç§æ–¹å¼æ‰€å­˜åœ¨çš„é—®é¢˜ã€‚</p><h4 id="3-1-4-å¤šæ¡ä»¶æ„å»º"><a href="#3-1-4-å¤šæ¡ä»¶æ„å»º" class="headerlink" title="3.1.4 å¤šæ¡ä»¶æ„å»º"></a>3.1.4 å¤šæ¡ä»¶æ„å»º</h4><p>å­¦å®Œäº†ä¸‰ç§æ„å»ºæŸ¥è¯¢å¯¹è±¡çš„æ–¹å¼ï¼Œæ¯ä¸€ç§éƒ½æœ‰è‡ªå·±çš„ç‰¹ç‚¹ï¼Œæ‰€ä»¥ç”¨å“ªä¸€ç§éƒ½è¡Œï¼Œåˆšæ‰éƒ½æ˜¯ä¸€ä¸ªæ¡ä»¶ï¼Œé‚£å¦‚æœæœ‰å¤šä¸ªæ¡ä»¶è¯¥å¦‚ä½•æ„å»ºå‘¢?</p><blockquote><p>éœ€æ±‚:æŸ¥è¯¢æ•°æ®åº“è¡¨ä¸­ï¼Œå¹´é¾„åœ¨10å²åˆ°30å²ä¹‹é—´çš„ç”¨æˆ·ä¿¡æ¯</p></blockquote><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Mybatisplus02DqlApplicationTests</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserDao userDao;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">testGetAll</span><span class="params">()</span>&#123;</span><br><span class="line">        LambdaQueryWrapper&lt;User&gt; lqw = <span class="keyword">new</span> <span class="title class_">LambdaQueryWrapper</span>&lt;User&gt;();</span><br><span class="line">        lqw.lt(User::getAge, <span class="number">30</span>);</span><br><span class="line">        lqw.gt(User::getAge, <span class="number">10</span>);</span><br><span class="line">        List&lt;User&gt; userList = userDao.selectList(lqw);</span><br><span class="line">        System.out.println(userList);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p>gtï¼šå¤§äº(&gt;),æœ€ç»ˆçš„SQLè¯­å¥ä¸º</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> id,name,password,age,tel <span class="keyword">FROM</span> <span class="keyword">user</span> <span class="keyword">WHERE</span> (age <span class="operator">&lt;</span> ? <span class="keyword">AND</span> age <span class="operator">&gt;</span> ?)</span><br></pre></td></tr></table></figure></li><li><p>æ„å»ºå¤šæ¡ä»¶çš„æ—¶å€™ï¼Œå¯ä»¥æ”¯æŒé“¾å¼ç¼–ç¨‹</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">LambdaQueryWrapper&lt;User&gt; lqw = <span class="keyword">new</span> <span class="title class_">LambdaQueryWrapper</span>&lt;User&gt;();</span><br><span class="line">lqw.lt(User::getAge, <span class="number">30</span>).gt(User::getAge, <span class="number">10</span>);</span><br><span class="line">List&lt;User&gt; userList = userDao.selectList(lqw);</span><br><span class="line">System.out.println(userList);</span><br></pre></td></tr></table></figure></li></ul><blockquote><p>éœ€æ±‚:æŸ¥è¯¢æ•°æ®åº“è¡¨ä¸­ï¼Œå¹´é¾„å°äº10æˆ–å¹´é¾„å¤§äº30çš„æ•°æ®</p></blockquote><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Mybatisplus02DqlApplicationTests</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserDao userDao;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">testGetAll</span><span class="params">()</span>&#123;</span><br><span class="line">        LambdaQueryWrapper&lt;User&gt; lqw = <span class="keyword">new</span> <span class="title class_">LambdaQueryWrapper</span>&lt;User&gt;();</span><br><span class="line">        lqw.lt(User::getAge, <span class="number">10</span>).or().gt(User::getAge, <span class="number">30</span>);</span><br><span class="line">        List&lt;User&gt; userList = userDao.selectList(lqw);</span><br><span class="line">        System.out.println(userList);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p>or()å°±ç›¸å½“äºæˆ‘ä»¬sqlè¯­å¥ä¸­çš„<code>or</code>å…³é”®å­—,ä¸åŠ é»˜è®¤æ˜¯<code>and</code>ï¼Œæœ€ç»ˆçš„sqlè¯­å¥ä¸º:</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> id,name,password,age,tel <span class="keyword">FROM</span> <span class="keyword">user</span> <span class="keyword">WHERE</span> (age <span class="operator">&lt;</span> ? <span class="keyword">OR</span> age <span class="operator">&gt;</span> ?)</span><br></pre></td></tr></table></figure></li></ul><h4 id="3-1-5-nullåˆ¤å®š"><a href="#3-1-5-nullåˆ¤å®š" class="headerlink" title="3.1.5 nullåˆ¤å®š"></a>3.1.5 nullåˆ¤å®š</h4><p>å…ˆæ¥çœ‹ä¸€å¼ å›¾ï¼Œ</p><p><img src="/2022/07/25/MyBatisPlus/1631023641992.png" alt="1631023641992"></p><ul><li>æˆ‘ä»¬åœ¨åšæ¡ä»¶æŸ¥è¯¢çš„æ—¶å€™ï¼Œä¸€èˆ¬ä¼šæœ‰å¾ˆå¤šæ¡ä»¶å¯ä»¥ä¾›ç”¨æˆ·è¿›è¡Œé€‰æ‹©æŸ¥è¯¢ã€‚</li><li>è¿™äº›æ¡ä»¶ç”¨æˆ·å¯ä»¥é€‰æ‹©ä½¿ç”¨ä¹Ÿå¯ä»¥é€‰æ‹©ä¸ä½¿ç”¨ï¼Œæ¯”å¦‚æˆ‘è¦æŸ¥è¯¢ä»·æ ¼åœ¨8000ä»¥ä¸Šçš„æ‰‹æœº</li><li>åœ¨è¾“å…¥æ¡ä»¶çš„æ—¶å€™ï¼Œä»·æ ¼æœ‰ä¸€ä¸ªåŒºé—´èŒƒå›´ï¼ŒæŒ‰ç…§éœ€æ±‚åªéœ€è¦åœ¨ç¬¬ä¸€ä¸ªä»·æ ¼è¾“å…¥æ¡†ä¸­è¾“å…¥8000</li><li>åå°åœ¨åšä»·æ ¼æŸ¥è¯¢çš„æ—¶å€™ï¼Œä¸€èˆ¬ä¼šè®© price&gt;å€¼1 and price &lt;å€¼2</li><li>å› ä¸ºå‰ç«¯æ²¡æœ‰è¾“å…¥å€¼2ï¼Œæ‰€ä»¥å¦‚æœä¸å¤„ç†çš„è¯ï¼Œå°±ä¼šå‡ºç° price&gt;8000 and price &lt; nullé—®é¢˜</li><li>è¿™ä¸ªæ—¶å€™æŸ¥è¯¢çš„ç»“æœå°±ä¼šå‡ºé—®é¢˜ï¼Œå…·ä½“è¯¥å¦‚ä½•è§£å†³?</li></ul><p><img src="/2022/07/25/MyBatisPlus/1631024145264.png" alt="1631024145264"></p><blockquote><p>éœ€æ±‚:æŸ¥è¯¢æ•°æ®åº“è¡¨ä¸­ï¼Œæ ¹æ®è¾“å…¥å¹´é¾„èŒƒå›´æ¥æŸ¥è¯¢ç¬¦åˆæ¡ä»¶çš„è®°å½•</p><p>ç”¨æˆ·åœ¨è¾“å…¥å€¼çš„æ—¶å€™ï¼Œ</p><p>â€‹å¦‚æœåªè¾“å…¥ç¬¬ä¸€ä¸ªæ¡†ï¼Œè¯´æ˜è¦æŸ¥è¯¢å¤§äºè¯¥å¹´é¾„çš„ç”¨æˆ·</p><p>â€‹å¦‚æœåªè¾“å…¥ç¬¬äºŒä¸ªæ¡†ï¼Œè¯´æ˜è¦æŸ¥è¯¢å°äºè¯¥å¹´é¾„çš„ç”¨æˆ·</p><p>â€‹    å¦‚æœä¸¤ä¸ªæ¡†éƒ½è¾“å…¥äº†ï¼Œè¯´æ˜è¦æŸ¥è¯¢å¹´é¾„åœ¨ä¸¤ä¸ªèŒƒå›´ä¹‹é—´çš„ç”¨æˆ·</p></blockquote><p>æ€è€ƒç¬¬ä¸€ä¸ªé—®é¢˜ï¼šåå°å¦‚æœæƒ³æ¥æ”¶å‰ç«¯çš„ä¸¤ä¸ªæ•°æ®ï¼Œè¯¥å¦‚ä½•æ¥æ”¶?</p><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸¤ä¸ªç®€å•æ•°æ®ç±»å‹ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ä¸€ä¸ªæ¨¡å‹ç±»ï¼Œä½†æ˜¯Userç±»ä¸­ç›®å‰åªæœ‰ä¸€ä¸ªageå±æ€§,å¦‚:</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> String tel;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ä¸€ä¸ªageå±æ€§ï¼Œå¦‚ä½•å»æ¥æ”¶é¡µé¢ä¸Šçš„ä¸¤ä¸ªå€¼å‘¢?è¿™ä¸ªæ—¶å€™æˆ‘ä»¬æœ‰ä¸¤ä¸ªè§£å†³æ–¹æ¡ˆ</p><p>æ–¹æ¡ˆä¸€ï¼šæ·»åŠ å±æ€§age2,è¿™ç§åšæ³•å¯ä»¥ä½†æ˜¯ä¼šå½±å“åˆ°åŸæ¨¡å‹ç±»çš„å±æ€§å†…å®¹</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> String tel;</span><br><span class="line">    <span class="keyword">private</span> Integer age2;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ–¹æ¡ˆäºŒï¼šæ–°å»ºä¸€ä¸ªæ¨¡å‹ç±»,è®©å…¶ç»§æ‰¿Userç±»ï¼Œå¹¶åœ¨å…¶ä¸­æ·»åŠ age2å±æ€§ï¼ŒUserQueryåœ¨æ‹¥æœ‰Userå±æ€§ååŒæ—¶æ·»åŠ äº†age2å±æ€§ã€‚</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> String tel;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserQuery</span> <span class="keyword">extends</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Integer age2;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç¯å¢ƒå‡†å¤‡å¥½åï¼Œæˆ‘ä»¬æ¥å®ç°ä¸‹åˆšæ‰çš„éœ€æ±‚ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Mybatisplus02DqlApplicationTests</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserDao userDao;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">testGetAll</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">//æ¨¡æ‹Ÿé¡µé¢ä¼ é€’è¿‡æ¥çš„æŸ¥è¯¢æ•°æ®</span></span><br><span class="line">        <span class="type">UserQuery</span> <span class="variable">uq</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserQuery</span>();</span><br><span class="line">        uq.setAge(<span class="number">10</span>);</span><br><span class="line">        uq.setAge2(<span class="number">30</span>);</span><br><span class="line">        LambdaQueryWrapper&lt;User&gt; lqw = <span class="keyword">new</span> <span class="title class_">LambdaQueryWrapper</span>&lt;User&gt;();</span><br><span class="line">        <span class="keyword">if</span>(<span class="literal">null</span> != uq.getAge2())&#123;</span><br><span class="line">            lqw.lt(User::getAge, uq.getAge2());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>( <span class="literal">null</span> != uq.getAge()) &#123;</span><br><span class="line">            lqw.gt(User::getAge, uq.getAge());</span><br><span class="line">        &#125;</span><br><span class="line">        List&lt;User&gt; userList = userDao.selectList(lqw);</span><br><span class="line">        System.out.println(userList);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„å†™æ³•å¯ä»¥å®Œæˆæ¡ä»¶ä¸ºéç©ºçš„åˆ¤æ–­ï¼Œä½†æ˜¯é—®é¢˜å¾ˆæ˜æ˜¾ï¼Œå¦‚æœæ¡ä»¶å¤šçš„è¯ï¼Œæ¯ä¸ªæ¡ä»¶éƒ½éœ€è¦åˆ¤æ–­ï¼Œä»£ç é‡å°±æ¯”è¾ƒå¤§ï¼Œæ¥çœ‹MPç»™æˆ‘ä»¬æä¾›çš„ç®€åŒ–æ–¹å¼ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Mybatisplus02DqlApplicationTests</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserDao userDao;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">testGetAll</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">//æ¨¡æ‹Ÿé¡µé¢ä¼ é€’è¿‡æ¥çš„æŸ¥è¯¢æ•°æ®</span></span><br><span class="line">        <span class="type">UserQuery</span> <span class="variable">uq</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserQuery</span>();</span><br><span class="line">        uq.setAge(<span class="number">10</span>);</span><br><span class="line">        uq.setAge2(<span class="number">30</span>);</span><br><span class="line">        LambdaQueryWrapper&lt;User&gt; lqw = <span class="keyword">new</span> <span class="title class_">LambdaQueryWrapper</span>&lt;User&gt;();</span><br><span class="line">        lqw.lt(<span class="literal">null</span>!=uq.getAge2(),User::getAge, uq.getAge2());</span><br><span class="line">        lqw.gt(<span class="literal">null</span>!=uq.getAge(),User::getAge, uq.getAge());</span><br><span class="line">        List&lt;User&gt; userList = userDao.selectList(lqw);</span><br><span class="line">        System.out.println(userList);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p>lt()æ–¹æ³•</p><p><img src="/2022/07/25/MyBatisPlus/1631025068317.png" alt="1631025068317"></p><p>conditionä¸ºbooleanç±»å‹ï¼Œè¿”å›trueï¼Œåˆ™æ·»åŠ æ¡ä»¶ï¼Œè¿”å›falseåˆ™ä¸æ·»åŠ æ¡ä»¶</p></li></ul><h3 id="3-2-æŸ¥è¯¢æŠ•å½±"><a href="#3-2-æŸ¥è¯¢æŠ•å½±" class="headerlink" title="3.2 æŸ¥è¯¢æŠ•å½±"></a>3.2 æŸ¥è¯¢æŠ•å½±</h3><h4 id="3-2-1-æŸ¥è¯¢æŒ‡å®šå­—æ®µ"><a href="#3-2-1-æŸ¥è¯¢æŒ‡å®šå­—æ®µ" class="headerlink" title="3.2.1 æŸ¥è¯¢æŒ‡å®šå­—æ®µ"></a>3.2.1 æŸ¥è¯¢æŒ‡å®šå­—æ®µ</h4><p>ç›®å‰æˆ‘ä»¬åœ¨æŸ¥è¯¢æ•°æ®çš„æ—¶å€™ï¼Œä»€ä¹ˆéƒ½æ²¡æœ‰åšé»˜è®¤å°±æ˜¯æŸ¥è¯¢è¡¨ä¸­æ‰€æœ‰å­—æ®µçš„å†…å®¹ï¼Œæˆ‘ä»¬æ‰€è¯´çš„æŸ¥è¯¢æŠ•å½±å³ä¸æŸ¥è¯¢æ‰€æœ‰å­—æ®µï¼ŒåªæŸ¥è¯¢å‡ºæŒ‡å®šå†…å®¹çš„æ•°æ®ã€‚</p><p>å…·ä½“å¦‚ä½•æ¥å®ç°?</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Mybatisplus02DqlApplicationTests</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserDao userDao;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">testGetAll</span><span class="params">()</span>&#123;</span><br><span class="line">        LambdaQueryWrapper&lt;User&gt; lqw = <span class="keyword">new</span> <span class="title class_">LambdaQueryWrapper</span>&lt;User&gt;();</span><br><span class="line">        lqw.select(User::getId,User::getName,User::getAge);</span><br><span class="line">        List&lt;User&gt; userList = userDao.selectList(lqw);</span><br><span class="line">        System.out.println(userList);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p>select(â€¦)æ–¹æ³•ç”¨æ¥è®¾ç½®æŸ¥è¯¢çš„å­—æ®µåˆ—ï¼Œå¯ä»¥è®¾ç½®å¤šä¸ªï¼Œæœ€ç»ˆçš„sqlè¯­å¥ä¸º:</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> id,name,age <span class="keyword">FROM</span> <span class="keyword">user</span></span><br></pre></td></tr></table></figure></li><li><p>å¦‚æœä½¿ç”¨çš„ä¸æ˜¯lambdaï¼Œå°±éœ€è¦æ‰‹åŠ¨æŒ‡å®šå­—æ®µ</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Mybatisplus02DqlApplicationTests</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserDao userDao;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">testGetAll</span><span class="params">()</span>&#123;</span><br><span class="line">        QueryWrapper&lt;User&gt; lqw = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;User&gt;();</span><br><span class="line">        lqw.select(<span class="string">&quot;id&quot;</span>,<span class="string">&quot;name&quot;</span>,<span class="string">&quot;age&quot;</span>,<span class="string">&quot;tel&quot;</span>);</span><br><span class="line">        List&lt;User&gt; userList = userDao.selectList(lqw);</span><br><span class="line">        System.out.println(userList);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>æœ€ç»ˆçš„sqlè¯­å¥ä¸º:SELECT id,name,age,tel FROM user</li></ul></li></ul><h4 id="3-2-2-èšåˆæŸ¥è¯¢"><a href="#3-2-2-èšåˆæŸ¥è¯¢" class="headerlink" title="3.2.2 èšåˆæŸ¥è¯¢"></a>3.2.2 èšåˆæŸ¥è¯¢</h4><blockquote><p>éœ€æ±‚:èšåˆå‡½æ•°æŸ¥è¯¢ï¼Œå®Œæˆcountã€maxã€minã€avgã€sumçš„ä½¿ç”¨</p><p>countï¼šæ€»è®°å½•æ•°</p><p>maxï¼šæœ€å¤§å€¼</p><p>minï¼šæœ€å°å€¼</p><p>avgï¼šå¹³å‡å€¼</p><p>sumï¼šæ±‚å’Œ</p></blockquote><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Mybatisplus02DqlApplicationTests</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserDao userDao;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">testGetAll</span><span class="params">()</span>&#123;</span><br><span class="line">        QueryWrapper&lt;User&gt; lqw = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;User&gt;();</span><br><span class="line">        <span class="comment">//lqw.select(&quot;count(*) as count&quot;);</span></span><br><span class="line">        <span class="comment">//SELECT count(*) as count FROM user</span></span><br><span class="line">        <span class="comment">//lqw.select(&quot;max(age) as maxAge&quot;);</span></span><br><span class="line">        <span class="comment">//SELECT max(age) as maxAge FROM user</span></span><br><span class="line">        <span class="comment">//lqw.select(&quot;min(age) as minAge&quot;);</span></span><br><span class="line">        <span class="comment">//SELECT min(age) as minAge FROM user</span></span><br><span class="line">        <span class="comment">//lqw.select(&quot;sum(age) as sumAge&quot;);</span></span><br><span class="line">        <span class="comment">//SELECT sum(age) as sumAge FROM user</span></span><br><span class="line">        lqw.select(<span class="string">&quot;avg(age) as avgAge&quot;</span>);</span><br><span class="line">        <span class="comment">//SELECT avg(age) as avgAge FROM user</span></span><br><span class="line">        List&lt;Map&lt;String, Object&gt;&gt; userList = userDao.selectMaps(lqw);</span><br><span class="line">        System.out.println(userList);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸ºäº†åœ¨åšç»“æœå°è£…çš„æ—¶å€™èƒ½å¤Ÿæ›´ç®€å•ï¼Œæˆ‘ä»¬å°†ä¸Šé¢çš„èšåˆå‡½æ•°éƒ½èµ·äº†ä¸ªåç§°ï¼Œæ–¹é¢åæœŸæ¥è·å–è¿™äº›æ•°æ®</p><h4 id="3-2-3-åˆ†ç»„æŸ¥è¯¢"><a href="#3-2-3-åˆ†ç»„æŸ¥è¯¢" class="headerlink" title="3.2.3 åˆ†ç»„æŸ¥è¯¢"></a>3.2.3 åˆ†ç»„æŸ¥è¯¢</h4><blockquote><p>éœ€æ±‚:åˆ†ç»„æŸ¥è¯¢ï¼Œå®Œæˆ group byçš„æŸ¥è¯¢ä½¿ç”¨</p></blockquote><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Mybatisplus02DqlApplicationTests</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserDao userDao;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">testGetAll</span><span class="params">()</span>&#123;</span><br><span class="line">        QueryWrapper&lt;User&gt; lqw = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;User&gt;();</span><br><span class="line">        lqw.select(<span class="string">&quot;count(*) as count,tel&quot;</span>);</span><br><span class="line">        lqw.groupBy(<span class="string">&quot;tel&quot;</span>);</span><br><span class="line">        List&lt;Map&lt;String, Object&gt;&gt; list = userDao.selectMaps(lqw);</span><br><span class="line">        System.out.println(list);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p>groupByä¸ºåˆ†ç»„ï¼Œæœ€ç»ˆçš„sqlè¯­å¥ä¸º</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">as</span> count,tel <span class="keyword">FROM</span> <span class="keyword">user</span> <span class="keyword">GROUP</span> <span class="keyword">BY</span> tel</span><br></pre></td></tr></table></figure></li></ul><p><strong>æ³¨æ„:</strong></p><ul><li>èšåˆä¸åˆ†ç»„æŸ¥è¯¢ï¼Œæ— æ³•ä½¿ç”¨lambdaè¡¨è¾¾å¼æ¥å®Œæˆ</li><li>MPåªæ˜¯å¯¹MyBatisçš„å¢å¼ºï¼Œå¦‚æœMPå®ç°ä¸äº†ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨DAOæ¥å£ä¸­ä½¿ç”¨MyBatisçš„æ–¹å¼å®ç°</li></ul><h3 id="3-3-æŸ¥è¯¢æ¡ä»¶"><a href="#3-3-æŸ¥è¯¢æ¡ä»¶" class="headerlink" title="3.3 æŸ¥è¯¢æ¡ä»¶"></a>3.3 æŸ¥è¯¢æ¡ä»¶</h3><p>å‰é¢æˆ‘ä»¬åªä½¿ç”¨äº†lt()å’Œgt(),é™¤äº†è¿™ä¸¤ä¸ªæ–¹æ³•å¤–ï¼ŒMPè¿˜å°è£…äº†å¾ˆå¤šæ¡ä»¶å¯¹åº”çš„æ–¹æ³•ï¼Œè¿™ä¸€èŠ‚æˆ‘ä»¬é‡ç‚¹æŠŠMPæä¾›çš„æŸ¥è¯¢æ¡ä»¶æ–¹æ³•è¿›è¡Œå­¦ä¹ ä¸‹ã€‚</p><p>MPçš„æŸ¥è¯¢æ¡ä»¶æœ‰å¾ˆå¤š:</p><ul><li>èŒƒå›´åŒ¹é…ï¼ˆ&gt; ã€ &#x3D; ã€betweenï¼‰</li><li>æ¨¡ç³ŠåŒ¹é…ï¼ˆlikeï¼‰</li><li>ç©ºåˆ¤å®šï¼ˆnullï¼‰</li><li>åŒ…å«æ€§åŒ¹é…ï¼ˆinï¼‰</li><li>åˆ†ç»„ï¼ˆgroupï¼‰</li><li>æ’åºï¼ˆorderï¼‰</li><li>â€¦â€¦</li></ul><h4 id="3-3-1-ç­‰å€¼æŸ¥è¯¢"><a href="#3-3-1-ç­‰å€¼æŸ¥è¯¢" class="headerlink" title="3.3.1 ç­‰å€¼æŸ¥è¯¢"></a>3.3.1 ç­‰å€¼æŸ¥è¯¢</h4><blockquote><p>éœ€æ±‚:æ ¹æ®ç”¨æˆ·åå’Œå¯†ç æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯</p></blockquote><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Mybatisplus02DqlApplicationTests</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserDao userDao;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">testGetAll</span><span class="params">()</span>&#123;</span><br><span class="line">        LambdaQueryWrapper&lt;User&gt; lqw = <span class="keyword">new</span> <span class="title class_">LambdaQueryWrapper</span>&lt;User&gt;();</span><br><span class="line">        lqw.eq(User::getName, <span class="string">&quot;Jerry&quot;</span>).eq(User::getPassword, <span class="string">&quot;jerry&quot;</span>);</span><br><span class="line">        <span class="type">User</span> <span class="variable">loginUser</span> <span class="operator">=</span> userDao.selectOne(lqw);</span><br><span class="line">        System.out.println(loginUser);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p>eq()ï¼š ç›¸å½“äº <code>=</code>,å¯¹åº”çš„sqlè¯­å¥ä¸º</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> id,name,password,age,tel <span class="keyword">FROM</span> <span class="keyword">user</span> <span class="keyword">WHERE</span> (name <span class="operator">=</span> ? <span class="keyword">AND</span> password <span class="operator">=</span> ?)</span><br></pre></td></tr></table></figure></li><li><p>selectListï¼šæŸ¥è¯¢ç»“æœä¸ºå¤šä¸ªæˆ–è€…å•ä¸ª</p></li><li><p>selectOne:æŸ¥è¯¢ç»“æœä¸ºå•ä¸ª</p></li></ul><h4 id="3-3-2-èŒƒå›´æŸ¥è¯¢"><a href="#3-3-2-èŒƒå›´æŸ¥è¯¢" class="headerlink" title="3.3.2 èŒƒå›´æŸ¥è¯¢"></a>3.3.2 èŒƒå›´æŸ¥è¯¢</h4><blockquote><p>éœ€æ±‚:å¯¹å¹´é¾„è¿›è¡ŒèŒƒå›´æŸ¥è¯¢ï¼Œä½¿ç”¨lt()ã€le()ã€gt()ã€ge()ã€between()è¿›è¡ŒèŒƒå›´æŸ¥è¯¢</p></blockquote><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Mybatisplus02DqlApplicationTests</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserDao userDao;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">testGetAll</span><span class="params">()</span>&#123;</span><br><span class="line">        LambdaQueryWrapper&lt;User&gt; lqw = <span class="keyword">new</span> <span class="title class_">LambdaQueryWrapper</span>&lt;User&gt;();</span><br><span class="line">        lqw.between(User::getAge, <span class="number">10</span>, <span class="number">30</span>);</span><br><span class="line">        <span class="comment">//SELECT id,name,password,age,tel FROM user WHERE (age BETWEEN ? AND ?)</span></span><br><span class="line">        List&lt;User&gt; userList = userDao.selectList(lqw);</span><br><span class="line">        System.out.println(userList);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>gt()ï¼šå¤§äº(&gt;)</li><li>ge()ï¼šå¤§äºç­‰äº(&gt;&#x3D;)</li><li>lt()ï¼šå°äº(&lt;)</li><li>lte()ï¼šå°äºç­‰äº(&lt;&#x3D;)</li><li>between()ï¼šbetween ? and ?</li></ul><h4 id="3-3-3-æ¨¡ç³ŠæŸ¥è¯¢"><a href="#3-3-3-æ¨¡ç³ŠæŸ¥è¯¢" class="headerlink" title="3.3.3 æ¨¡ç³ŠæŸ¥è¯¢"></a>3.3.3 æ¨¡ç³ŠæŸ¥è¯¢</h4><blockquote><p>éœ€æ±‚:æŸ¥è¯¢è¡¨ä¸­nameå±æ€§çš„å€¼ä»¥<code>J</code>å¼€å¤´çš„ç”¨æˆ·ä¿¡æ¯,ä½¿ç”¨likeè¿›è¡Œæ¨¡ç³ŠæŸ¥è¯¢</p></blockquote><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Mybatisplus02DqlApplicationTests</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserDao userDao;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">testGetAll</span><span class="params">()</span>&#123;</span><br><span class="line">        LambdaQueryWrapper&lt;User&gt; lqw = <span class="keyword">new</span> <span class="title class_">LambdaQueryWrapper</span>&lt;User&gt;();</span><br><span class="line">        lqw.likeLeft(User::getName, <span class="string">&quot;J&quot;</span>);</span><br><span class="line">        <span class="comment">//SELECT id,name,password,age,tel FROM user WHERE (name LIKE ?)</span></span><br><span class="line">        List&lt;User&gt; userList = userDao.selectList(lqw);</span><br><span class="line">        System.out.println(userList);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>like()ï¼šå‰ååŠ ç™¾åˆ†å·,å¦‚ %J%</li><li>likeLeft()ï¼šå‰é¢åŠ ç™¾åˆ†å·,å¦‚ %J</li><li>likeRight()ï¼šåé¢åŠ ç™¾åˆ†å·,å¦‚ J%</li></ul><h4 id="3-3-4-æ’åºæŸ¥è¯¢"><a href="#3-3-4-æ’åºæŸ¥è¯¢" class="headerlink" title="3.3.4 æ’åºæŸ¥è¯¢"></a>3.3.4 æ’åºæŸ¥è¯¢</h4><blockquote><p>éœ€æ±‚:æŸ¥è¯¢æ‰€æœ‰æ•°æ®ï¼Œç„¶åæŒ‰ç…§idé™åº</p></blockquote><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Mybatisplus02DqlApplicationTests</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserDao userDao;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">testGetAll</span><span class="params">()</span>&#123;</span><br><span class="line">        LambdaQueryWrapper&lt;User&gt; lwq = <span class="keyword">new</span> <span class="title class_">LambdaQueryWrapper</span>&lt;&gt;();</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * condition ï¼šæ¡ä»¶ï¼Œè¿”å›booleanï¼Œ</span></span><br><span class="line"><span class="comment">         å½“conditionä¸ºtrueï¼Œè¿›è¡Œæ’åºï¼Œå¦‚æœä¸ºfalseï¼Œåˆ™ä¸æ’åº</span></span><br><span class="line"><span class="comment">         * isAsc:æ˜¯å¦ä¸ºå‡åºï¼Œtrueä¸ºå‡åºï¼Œfalseä¸ºé™åº</span></span><br><span class="line"><span class="comment">         * columnsï¼šéœ€è¦æ“ä½œçš„åˆ—</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        lwq.orderBy(<span class="literal">true</span>,<span class="literal">false</span>, User::getId);</span><br><span class="line"></span><br><span class="line">        userDao.selectList(lw</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é™¤äº†ä¸Šé¢æ¼”ç¤ºçš„è¿™ç§å®ç°æ–¹å¼ï¼Œè¿˜æœ‰å¾ˆå¤šå…¶ä»–çš„æ’åºæ–¹æ³•å¯ä»¥è¢«è°ƒç”¨ï¼Œå¦‚å›¾:</p><p><img src="/2022/07/25/MyBatisPlus/1631209838333.png" alt="1631209838333"></p><ul><li>orderByæ’åº<ul><li>condition:æ¡ä»¶ï¼Œtrueåˆ™æ·»åŠ æ’åºï¼Œfalseåˆ™ä¸æ·»åŠ æ’åº</li><li>isAsc:æ˜¯å¦ä¸ºå‡åºï¼Œtrueå‡åºï¼Œfalseé™åº</li><li>columns:æ’åºå­—æ®µï¼Œå¯ä»¥æœ‰å¤šä¸ª</li></ul></li><li>orderByAsc&#x2F;Desc(å•ä¸ªcolumn):æŒ‰ç…§æŒ‡å®šå­—æ®µè¿›è¡Œå‡åº&#x2F;é™åº</li><li>orderByAsc&#x2F;Desc(å¤šä¸ªcolumn):æŒ‰ç…§å¤šä¸ªå­—æ®µè¿›è¡Œå‡åº&#x2F;é™åº</li><li>orderByAsc&#x2F;Desc<ul><li>condition:æ¡ä»¶ï¼Œtrueæ·»åŠ æ’åºï¼Œfalseä¸æ·»åŠ æ’åº</li><li>å¤šä¸ªcolumnsï¼šæŒ‰ç…§å¤šä¸ªå­—æ®µè¿›è¡Œæ’åº</li></ul></li></ul><p>é™¤äº†ä¸Šé¢çš„å‡ ç§æŸ¥è¯¢æ¡ä»¶æ„å»ºæ–¹æ³•ä»¥å¤–è¿˜æœ‰å¾ˆå¤šå…¶ä»–çš„æ–¹æ³•ï¼Œæ¯”å¦‚<code>isNull</code>,<code>isNotNull</code>,<code>in</code>,<code>notIn</code>ç­‰æ–¹æ³•å¯ä¾›é€‰æ‹©ï¼Œå…·ä½“å‚è€ƒ<a href="%60https://mp.baomidou.com/guide/wrapper.html#abstractwrapper%60">å®˜æ–¹æ–‡æ¡£</a>çš„æ¡ä»¶æ„é€ å™¨æ¥å­¦ä¹ ä½¿ç”¨ï¼Œå…·ä½“çš„ç½‘å€ä¸º:</p><p><code>https://mp.baomidou.com/guide/wrapper.html#abstractwrapper</code></p><h3 id="3-4-æ˜ å°„åŒ¹é…å…¼å®¹æ€§"><a href="#3-4-æ˜ å°„åŒ¹é…å…¼å®¹æ€§" class="headerlink" title="3.4 æ˜ å°„åŒ¹é…å…¼å®¹æ€§"></a>3.4 æ˜ å°„åŒ¹é…å…¼å®¹æ€§</h3><p>å‰é¢æˆ‘ä»¬å·²ç»èƒ½ä»è¡¨ä¸­æŸ¥è¯¢å‡ºæ•°æ®ï¼Œå¹¶å°†æ•°æ®å°è£…åˆ°æ¨¡å‹ç±»ä¸­ï¼Œè¿™æ•´ä¸ªè¿‡ç¨‹æ¶‰åŠåˆ°ä¸€å¼ è¡¨å’Œä¸€ä¸ªæ¨¡å‹ç±»:</p><p><img src="/2022/07/25/MyBatisPlus/1631030296965.png" alt="1631030296965"></p><p>ä¹‹æ‰€ä»¥æ•°æ®èƒ½å¤ŸæˆåŠŸçš„ä»è¡¨ä¸­è·å–å¹¶å°è£…åˆ°æ¨¡å‹å¯¹è±¡ä¸­ï¼ŒåŸå› æ˜¯è¡¨çš„å­—æ®µåˆ—åå’Œæ¨¡å‹ç±»çš„å±æ€§åä¸€æ ·ã€‚</p><p>é‚£ä¹ˆé—®é¢˜å°±æ¥äº†:</p><h4 id="é—®é¢˜1ï¼šè¡¨å­—æ®µä¸ç¼–ç å±æ€§è®¾è®¡ä¸åŒæ­¥"><a href="#é—®é¢˜1ï¼šè¡¨å­—æ®µä¸ç¼–ç å±æ€§è®¾è®¡ä¸åŒæ­¥" class="headerlink" title="é—®é¢˜1ï¼šè¡¨å­—æ®µä¸ç¼–ç å±æ€§è®¾è®¡ä¸åŒæ­¥"></a>é—®é¢˜1ï¼šè¡¨å­—æ®µä¸ç¼–ç å±æ€§è®¾è®¡ä¸åŒæ­¥</h4><p>å½“è¡¨çš„åˆ—åå’Œæ¨¡å‹ç±»çš„å±æ€§åå‘ç”Ÿä¸ä¸€è‡´ï¼Œå°±ä¼šå¯¼è‡´æ•°æ®å°è£…ä¸åˆ°æ¨¡å‹å¯¹è±¡ï¼Œè¿™ä¸ªæ—¶å€™å°±éœ€è¦å…¶ä¸­ä¸€æ–¹åšå‡ºä¿®æ”¹ï¼Œé‚£å¦‚æœå‰ææ˜¯ä¸¤è¾¹éƒ½ä¸èƒ½æ”¹åˆè¯¥å¦‚ä½•è§£å†³?</p><p>MPç»™æˆ‘ä»¬æä¾›äº†ä¸€ä¸ªæ³¨è§£<code>@TableField</code>,ä½¿ç”¨è¯¥æ³¨è§£å¯ä»¥å®ç°æ¨¡å‹ç±»å±æ€§åå’Œè¡¨çš„åˆ—åä¹‹é—´çš„æ˜ å°„å…³ç³»</p><p><img src="/2022/07/25/MyBatisPlus/1631030550100.png" alt="1631030550100"></p><h4 id="é—®é¢˜2ï¼šç¼–ç ä¸­æ·»åŠ äº†æ•°æ®åº“ä¸­æœªå®šä¹‰çš„å±æ€§"><a href="#é—®é¢˜2ï¼šç¼–ç ä¸­æ·»åŠ äº†æ•°æ®åº“ä¸­æœªå®šä¹‰çš„å±æ€§" class="headerlink" title="é—®é¢˜2ï¼šç¼–ç ä¸­æ·»åŠ äº†æ•°æ®åº“ä¸­æœªå®šä¹‰çš„å±æ€§"></a>é—®é¢˜2ï¼šç¼–ç ä¸­æ·»åŠ äº†æ•°æ®åº“ä¸­æœªå®šä¹‰çš„å±æ€§</h4><p>å½“æ¨¡å‹ç±»ä¸­å¤šäº†ä¸€ä¸ªæ•°æ®åº“è¡¨ä¸å­˜åœ¨çš„å­—æ®µï¼Œå°±ä¼šå¯¼è‡´ç”Ÿæˆçš„sqlè¯­å¥ä¸­åœ¨selectçš„æ—¶å€™æŸ¥è¯¢äº†æ•°æ®åº“ä¸å­˜åœ¨çš„å­—æ®µï¼Œç¨‹åºè¿è¡Œå°±ä¼šæŠ¥é”™ï¼Œé”™è¯¯ä¿¡æ¯ä¸º:</p><p><code>Unknown column &#39;å¤šå‡ºæ¥çš„å­—æ®µåç§°&#39; in &#39;field list&#39;</code></p><p>å…·ä½“çš„è§£å†³æ–¹æ¡ˆç”¨åˆ°çš„è¿˜æ˜¯<code>@TableField</code>æ³¨è§£ï¼Œå®ƒæœ‰ä¸€ä¸ªå±æ€§å«<code>exist</code>ï¼Œè®¾ç½®è¯¥å­—æ®µæ˜¯å¦åœ¨æ•°æ®åº“è¡¨ä¸­å­˜åœ¨ï¼Œå¦‚æœè®¾ç½®ä¸ºfalseåˆ™ä¸å­˜åœ¨ï¼Œç”Ÿæˆsqlè¯­å¥æŸ¥è¯¢çš„æ—¶å€™ï¼Œå°±ä¸ä¼šå†æŸ¥è¯¢è¯¥å­—æ®µäº†ã€‚</p><p><img src="/2022/07/25/MyBatisPlus/1631031054206.png" alt="1631031054206"></p><h4 id="é—®é¢˜3ï¼šé‡‡ç”¨é»˜è®¤æŸ¥è¯¢å¼€æ”¾äº†æ›´å¤šçš„å­—æ®µæŸ¥çœ‹æƒé™"><a href="#é—®é¢˜3ï¼šé‡‡ç”¨é»˜è®¤æŸ¥è¯¢å¼€æ”¾äº†æ›´å¤šçš„å­—æ®µæŸ¥çœ‹æƒé™" class="headerlink" title="é—®é¢˜3ï¼šé‡‡ç”¨é»˜è®¤æŸ¥è¯¢å¼€æ”¾äº†æ›´å¤šçš„å­—æ®µæŸ¥çœ‹æƒé™"></a>é—®é¢˜3ï¼šé‡‡ç”¨é»˜è®¤æŸ¥è¯¢å¼€æ”¾äº†æ›´å¤šçš„å­—æ®µæŸ¥çœ‹æƒé™</h4><p>æŸ¥è¯¢è¡¨ä¸­æ‰€æœ‰çš„åˆ—çš„æ•°æ®ï¼Œå°±å¯èƒ½æŠŠä¸€äº›æ•æ„Ÿæ•°æ®æŸ¥è¯¢åˆ°è¿”å›ç»™å‰ç«¯ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±éœ€è¦é™åˆ¶å“ªäº›å­—æ®µé»˜è®¤ä¸è¦è¿›è¡ŒæŸ¥è¯¢ã€‚è§£å†³æ–¹æ¡ˆæ˜¯<code>@TableField</code>æ³¨è§£çš„ä¸€ä¸ªå±æ€§å«<code>select</code>ï¼Œè¯¥å±æ€§è®¾ç½®é»˜è®¤æ˜¯å¦éœ€è¦æŸ¥è¯¢è¯¥å­—æ®µçš„å€¼ï¼Œtrue(é»˜è®¤å€¼)è¡¨ç¤ºé»˜è®¤æŸ¥è¯¢è¯¥å­—æ®µï¼Œfalseè¡¨ç¤ºé»˜è®¤ä¸æŸ¥è¯¢è¯¥å­—æ®µã€‚</p><p><img src="/2022/07/25/MyBatisPlus/1631031270558.png" alt="1631031270558"></p><h4 id="çŸ¥è¯†ç‚¹1ï¼š-TableField"><a href="#çŸ¥è¯†ç‚¹1ï¼š-TableField" class="headerlink" title="çŸ¥è¯†ç‚¹1ï¼š@TableField"></a>çŸ¥è¯†ç‚¹1ï¼š@TableField</h4><table><thead><tr><th>åç§°</th><th>@TableField</th></tr></thead><tbody><tr><td>ç±»å‹</td><td>å±æ€§æ³¨è§£</td></tr><tr><td>ä½ç½®</td><td>æ¨¡å‹ç±»å±æ€§å®šä¹‰ä¸Šæ–¹</td></tr><tr><td>ä½œç”¨</td><td>è®¾ç½®å½“å‰å±æ€§å¯¹åº”çš„æ•°æ®åº“è¡¨ä¸­çš„å­—æ®µå…³ç³»</td></tr><tr><td>ç›¸å…³å±æ€§</td><td>value(é»˜è®¤)ï¼šè®¾ç½®æ•°æ®åº“è¡¨å­—æ®µåç§°<br>existï¼šè®¾ç½®å±æ€§åœ¨æ•°æ®åº“è¡¨å­—æ®µä¸­æ˜¯å¦å­˜åœ¨ï¼Œé»˜è®¤ä¸ºtrueï¼Œæ­¤å±æ€§ä¸èƒ½ä¸valueåˆå¹¶ä½¿ç”¨<br>selectï¼šè®¾ç½®å±æ€§æ˜¯å¦å‚ä¸æŸ¥è¯¢ï¼Œæ­¤å±æ€§ä¸select()æ˜ å°„é…ç½®ä¸å†²çª</td></tr></tbody></table><h4 id="é—®é¢˜4ï¼šè¡¨åä¸ç¼–ç å¼€å‘è®¾è®¡ä¸åŒæ­¥"><a href="#é—®é¢˜4ï¼šè¡¨åä¸ç¼–ç å¼€å‘è®¾è®¡ä¸åŒæ­¥" class="headerlink" title="é—®é¢˜4ï¼šè¡¨åä¸ç¼–ç å¼€å‘è®¾è®¡ä¸åŒæ­¥"></a>é—®é¢˜4ï¼šè¡¨åä¸ç¼–ç å¼€å‘è®¾è®¡ä¸åŒæ­¥</h4><p>è¯¥é—®é¢˜ä¸»è¦æ˜¯è¡¨çš„åç§°å’Œæ¨¡å‹ç±»çš„åç§°ä¸ä¸€è‡´ï¼Œå¯¼è‡´æŸ¥è¯¢å¤±è´¥ï¼Œè¿™ä¸ªæ—¶å€™é€šå¸¸ä¼šæŠ¥å¦‚ä¸‹é”™è¯¯ä¿¡æ¯:</p><p>Table â€˜databaseName.tableNaemâ€™ doesnâ€™t existï¼Œç¿»è¯‘è¿‡æ¥å°±æ˜¯æ•°æ®åº“ä¸­çš„è¡¨ä¸å­˜åœ¨ã€‚</p><p><img src="/2022/07/25/MyBatisPlus/1631031828378.png" alt="1631031828378"></p><p>è§£å†³æ–¹æ¡ˆæ˜¯ä½¿ç”¨MPæä¾›çš„å¦å¤–ä¸€ä¸ªæ³¨è§£<code>@TableName</code>æ¥è®¾ç½®è¡¨ä¸æ¨¡å‹ç±»ä¹‹é—´çš„å¯¹åº”å…³ç³»ã€‚</p><p><img src="/2022/07/25/MyBatisPlus/1631031915632.png" alt="1631031915632"></p><h4 id="çŸ¥è¯†ç‚¹2ï¼š-TableName"><a href="#çŸ¥è¯†ç‚¹2ï¼š-TableName" class="headerlink" title="çŸ¥è¯†ç‚¹2ï¼š@TableName"></a>çŸ¥è¯†ç‚¹2ï¼š@TableName</h4><table><thead><tr><th>åç§°</th><th>@TableName</th></tr></thead><tbody><tr><td>ç±»å‹</td><td>ç±»æ³¨è§£</td></tr><tr><td>ä½ç½®</td><td>æ¨¡å‹ç±»å®šä¹‰ä¸Šæ–¹</td></tr><tr><td>ä½œç”¨</td><td>è®¾ç½®å½“å‰ç±»å¯¹åº”äºæ•°æ®åº“è¡¨å…³ç³»</td></tr><tr><td>ç›¸å…³å±æ€§</td><td>value(é»˜è®¤)ï¼šè®¾ç½®æ•°æ®åº“è¡¨åç§°</td></tr></tbody></table><h4 id="ä»£ç æ¼”ç¤º"><a href="#ä»£ç æ¼”ç¤º" class="headerlink" title="ä»£ç æ¼”ç¤º"></a>ä»£ç æ¼”ç¤º</h4><p>æ¥ä¸‹æ¥æˆ‘ä»¬ä½¿ç”¨æ¡ˆä¾‹çš„æ–¹å¼æŠŠåˆšæ‰çš„çŸ¥è¯†æ¼”ç¤ºä¸‹:</p><h5 id="æ­¥éª¤1ï¼šä¿®æ”¹æ•°æ®åº“è¡¨userä¸ºtbl-user"><a href="#æ­¥éª¤1ï¼šä¿®æ”¹æ•°æ®åº“è¡¨userä¸ºtbl-user" class="headerlink" title="æ­¥éª¤1ï¼šä¿®æ”¹æ•°æ®åº“è¡¨userä¸ºtbl_user"></a>æ­¥éª¤1ï¼šä¿®æ”¹æ•°æ®åº“è¡¨userä¸ºtbl_user</h5><p>ç›´æ¥æŸ¥è¯¢ä¼šæŠ¥é”™ï¼ŒåŸå› æ˜¯MPé»˜è®¤æƒ…å†µä¸‹ä¼šä½¿ç”¨æ¨¡å‹ç±»çš„ç±»åé¦–å­—æ¯å°å†™å½“è¡¨åä½¿ç”¨ã€‚</p><p><img src="/2022/07/25/MyBatisPlus/1631032123894.png" alt="1631032123894"></p><h5 id="æ­¥éª¤2ï¼šæ¨¡å‹ç±»æ·»åŠ -TableNameæ³¨è§£"><a href="#æ­¥éª¤2ï¼šæ¨¡å‹ç±»æ·»åŠ -TableNameæ³¨è§£" class="headerlink" title="æ­¥éª¤2ï¼šæ¨¡å‹ç±»æ·»åŠ @TableNameæ³¨è§£"></a>æ­¥éª¤2ï¼šæ¨¡å‹ç±»æ·»åŠ @TableNameæ³¨è§£</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@TableName(&quot;tbl_user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> String tel;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="æ­¥éª¤3ï¼šå°†å­—æ®µpasswordä¿®æ”¹æˆpwd"><a href="#æ­¥éª¤3ï¼šå°†å­—æ®µpasswordä¿®æ”¹æˆpwd" class="headerlink" title="æ­¥éª¤3ï¼šå°†å­—æ®µpasswordä¿®æ”¹æˆpwd"></a>æ­¥éª¤3ï¼šå°†å­—æ®µpasswordä¿®æ”¹æˆpwd</h5><p>ç›´æ¥æŸ¥è¯¢ä¼šæŠ¥é”™ï¼ŒåŸå› æ˜¯MPé»˜è®¤æƒ…å†µä¸‹ä¼šä½¿ç”¨æ¨¡å‹ç±»çš„å±æ€§åå½“åšè¡¨çš„åˆ—åä½¿ç”¨</p><p><img src="/2022/07/25/MyBatisPlus/1631032283147.png" alt="1631032283147"></p><h5 id="æ­¥éª¤4ï¼šä½¿ç”¨-TableFieldæ˜ å°„å…³ç³»"><a href="#æ­¥éª¤4ï¼šä½¿ç”¨-TableFieldæ˜ å°„å…³ç³»" class="headerlink" title="æ­¥éª¤4ï¼šä½¿ç”¨@TableFieldæ˜ å°„å…³ç³»"></a>æ­¥éª¤4ï¼šä½¿ç”¨@TableFieldæ˜ å°„å…³ç³»</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@TableName(&quot;tbl_user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="meta">@TableField(value=&quot;pwd&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> String tel;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="æ­¥éª¤5ï¼šæ·»åŠ ä¸€ä¸ªæ•°æ®åº“è¡¨ä¸å­˜åœ¨çš„å­—æ®µ"><a href="#æ­¥éª¤5ï¼šæ·»åŠ ä¸€ä¸ªæ•°æ®åº“è¡¨ä¸å­˜åœ¨çš„å­—æ®µ" class="headerlink" title="æ­¥éª¤5ï¼šæ·»åŠ ä¸€ä¸ªæ•°æ®åº“è¡¨ä¸å­˜åœ¨çš„å­—æ®µ"></a>æ­¥éª¤5ï¼šæ·»åŠ ä¸€ä¸ªæ•°æ®åº“è¡¨ä¸å­˜åœ¨çš„å­—æ®µ</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@TableName(&quot;tbl_user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="meta">@TableField(value=&quot;pwd&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> String tel;</span><br><span class="line">    <span class="keyword">private</span> Integer online;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç›´æ¥æŸ¥è¯¢ä¼šæŠ¥é”™ï¼ŒåŸå› æ˜¯MPé»˜è®¤æƒ…å†µä¸‹ä¼šæŸ¥è¯¢æ¨¡å‹ç±»çš„æ‰€æœ‰å±æ€§å¯¹åº”çš„æ•°æ®åº“è¡¨çš„åˆ—ï¼Œè€Œonlineä¸å­˜åœ¨</p><p><img src="/2022/07/25/MyBatisPlus/1631032450558.png" alt="1631032450558"></p><h5 id="æ­¥éª¤6ï¼šä½¿ç”¨-TableFieldæ’é™¤å­—æ®µ"><a href="#æ­¥éª¤6ï¼šä½¿ç”¨-TableFieldæ’é™¤å­—æ®µ" class="headerlink" title="æ­¥éª¤6ï¼šä½¿ç”¨@TableFieldæ’é™¤å­—æ®µ"></a>æ­¥éª¤6ï¼šä½¿ç”¨@TableFieldæ’é™¤å­—æ®µ</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@TableName(&quot;tbl_user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="meta">@TableField(value=&quot;pwd&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> String tel;</span><br><span class="line">    <span class="meta">@TableField(exist=false)</span></span><br><span class="line">    <span class="keyword">private</span> Integer online;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="æ­¥éª¤7ï¼šæŸ¥è¯¢æ—¶å°†pwdéšè—"><a href="#æ­¥éª¤7ï¼šæŸ¥è¯¢æ—¶å°†pwdéšè—" class="headerlink" title="æ­¥éª¤7ï¼šæŸ¥è¯¢æ—¶å°†pwdéšè—"></a>æ­¥éª¤7ï¼šæŸ¥è¯¢æ—¶å°†pwdéšè—</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@TableName(&quot;tbl_user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="meta">@TableField(value=&quot;pwd&quot;,select=false)</span></span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> String tel;</span><br><span class="line">    <span class="meta">@TableField(exist=false)</span></span><br><span class="line">    <span class="keyword">private</span> Integer online;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="4ï¼ŒDMLç¼–ç¨‹æ§åˆ¶"><a href="#4ï¼ŒDMLç¼–ç¨‹æ§åˆ¶" class="headerlink" title="4ï¼ŒDMLç¼–ç¨‹æ§åˆ¶"></a>4ï¼ŒDMLç¼–ç¨‹æ§åˆ¶</h2><p>æŸ¥è¯¢ç›¸å…³çš„æ“ä½œæˆ‘ä»¬å·²ç»ä»‹ç»å®Œäº†ï¼Œç´§æ¥ç€æˆ‘ä»¬éœ€è¦å¯¹å¦å¤–ä¸‰ä¸ªï¼Œå¢åˆ æ”¹è¿›è¡Œå†…å®¹çš„è®²è§£ã€‚æŒ¨ä¸ªæ¥è¯´æ˜ä¸‹ï¼Œé¦–å…ˆæ˜¯æ–°å¢(insert)ä¸­çš„å†…å®¹ã€‚</p><h3 id="4-1-idç”Ÿæˆç­–ç•¥æ§åˆ¶"><a href="#4-1-idç”Ÿæˆç­–ç•¥æ§åˆ¶" class="headerlink" title="4.1 idç”Ÿæˆç­–ç•¥æ§åˆ¶"></a>4.1 idç”Ÿæˆç­–ç•¥æ§åˆ¶</h3><p>å‰é¢æˆ‘ä»¬åœ¨æ–°å¢çš„æ—¶å€™ç•™äº†ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯æ–°å¢æˆåŠŸåï¼Œä¸»é”®IDæ˜¯ä¸€ä¸ªå¾ˆé•¿ä¸²çš„å†…å®¹ï¼Œæˆ‘ä»¬æ›´æƒ³è¦çš„æ˜¯æŒ‰ç…§æ•°æ®åº“è¡¨å­—æ®µè¿›è¡Œè‡ªå¢é•¿ï¼Œåœ¨è§£å†³è¿™ä¸ªé—®é¢˜ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥åˆ†æä¸‹IDè¯¥å¦‚ä½•é€‰æ‹©:</p><ul><li>ä¸åŒçš„è¡¨åº”ç”¨ä¸åŒçš„idç”Ÿæˆç­–ç•¥<ul><li>æ—¥å¿—ï¼šè‡ªå¢ï¼ˆ1,2,3,4ï¼Œâ€¦â€¦ï¼‰</li><li>è´­ç‰©è®¢å•ï¼šç‰¹æ®Šè§„åˆ™ï¼ˆFQ23948AK3843ï¼‰</li><li>å¤–å–å•ï¼šå…³è”åœ°åŒºæ—¥æœŸç­‰ä¿¡æ¯ï¼ˆ10 04 20200314 34 91ï¼‰</li><li>å…³ç³»è¡¨ï¼šå¯çœç•¥id</li><li>â€¦â€¦</li></ul></li></ul><p>ä¸åŒçš„ä¸šåŠ¡é‡‡ç”¨çš„IDç”Ÿæˆæ–¹å¼åº”è¯¥æ˜¯ä¸ä¸€æ ·çš„ï¼Œé‚£ä¹ˆåœ¨MPä¸­éƒ½æä¾›äº†å“ªäº›ä¸»é”®ç”Ÿæˆç­–ç•¥ï¼Œä»¥åŠæˆ‘ä»¬è¯¥å¦‚ä½•è¿›è¡Œé€‰æ‹©?</p><p>åœ¨è¿™é‡Œæˆ‘ä»¬åˆéœ€è¦ç”¨åˆ°MPçš„ä¸€ä¸ªæ³¨è§£å«<code>@TableId</code></p><h4 id="çŸ¥è¯†ç‚¹1ï¼š-TableId"><a href="#çŸ¥è¯†ç‚¹1ï¼š-TableId" class="headerlink" title="çŸ¥è¯†ç‚¹1ï¼š@TableId"></a>çŸ¥è¯†ç‚¹1ï¼š@TableId</h4><table><thead><tr><th>åç§°</th><th>@TableId</th></tr></thead><tbody><tr><td>ç±»å‹</td><td>å±æ€§æ³¨è§£</td></tr><tr><td>ä½ç½®</td><td>æ¨¡å‹ç±»ä¸­ç”¨äºè¡¨ç¤ºä¸»é”®çš„å±æ€§å®šä¹‰ä¸Šæ–¹</td></tr><tr><td>ä½œç”¨</td><td>è®¾ç½®å½“å‰ç±»ä¸­ä¸»é”®å±æ€§çš„ç”Ÿæˆç­–ç•¥</td></tr><tr><td>ç›¸å…³å±æ€§</td><td>value(é»˜è®¤)ï¼šè®¾ç½®æ•°æ®åº“è¡¨ä¸»é”®åç§°<br>typeï¼šè®¾ç½®ä¸»é”®å±æ€§çš„ç”Ÿæˆç­–ç•¥ï¼Œå€¼æŸ¥ç…§IdTypeçš„æšä¸¾å€¼</td></tr></tbody></table><h4 id="4-1-1-ç¯å¢ƒæ„å»º"><a href="#4-1-1-ç¯å¢ƒæ„å»º" class="headerlink" title="4.1.1 ç¯å¢ƒæ„å»º"></a>4.1.1 ç¯å¢ƒæ„å»º</h4><p>åœ¨æ„å»ºæ¡ä»¶æŸ¥è¯¢ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥å‡†å¤‡ä¸‹ç¯å¢ƒ</p><ul><li><p>åˆ›å»ºä¸€ä¸ªSpringBooté¡¹ç›®</p></li><li><p>pom.xmlä¸­æ·»åŠ å¯¹åº”çš„ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.5.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">relativePath</span>/&gt;</span> <span class="comment">&lt;!-- lookup parent from repository --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.itheima<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatisplus_03_dml<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">java.version</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">java.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.4.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.16<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>runtime<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.18.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>ç¼–å†™UserDaoæ¥å£</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserDao</span> <span class="keyword">extends</span> <span class="title class_">BaseMapper</span>&lt;User&gt; &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>ç¼–å†™æ¨¡å‹ç±»</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@TableName(&quot;tbl_user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="meta">@TableField(value=&quot;pwd&quot;,select=false)</span></span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> String tel;</span><br><span class="line">    <span class="meta">@TableField(exist=false)</span></span><br><span class="line">    <span class="keyword">private</span> Integer online;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>ç¼–å†™å¼•å¯¼ç±»</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Mybatisplus03DqlApplication</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(Mybatisplus03DqlApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>ç¼–å†™é…ç½®æ–‡ä»¶</p><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># dataSource</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">com.alibaba.druid.pool.DruidDataSource</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/mybatisplus_db?serverTimezone=UTC</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">root</span></span><br><span class="line"><span class="comment"># mpæ—¥å¿—</span></span><br><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="attr">configuration:</span></span><br><span class="line">    <span class="attr">log-impl:</span> <span class="string">org.apache.ibatis.logging.stdout.StdOutImpl</span></span><br></pre></td></tr></table></figure></li><li><p>ç¼–å†™æµ‹è¯•ç±»</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Mybatisplus02DqlApplicationTests</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserDao userDao;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">testGetAll</span><span class="params">()</span>&#123;</span><br><span class="line">        List&lt;User&gt; userList = userDao.selectList(<span class="literal">null</span>);</span><br><span class="line">        System.out.println(userList);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>æµ‹è¯•</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Mybatisplus03DqlApplicationTests</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserDao userDao;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">testSave</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">        user.setName(<span class="string">&quot;é»‘é©¬ç¨‹åºå‘˜&quot;</span>);</span><br><span class="line">        user.setPassword(<span class="string">&quot;itheima&quot;</span>);</span><br><span class="line">        user.setAge(<span class="number">12</span>);</span><br><span class="line">        user.setTel(<span class="string">&quot;4006184000&quot;</span>);</span><br><span class="line">        userDao.insert(user);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">testDelete</span><span class="params">()</span>&#123;</span><br><span class="line">        userDao.deleteById(<span class="number">1401856123925713409L</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">testUpdate</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">        user.setId(<span class="number">3L</span>);</span><br><span class="line">        user.setName(<span class="string">&quot;Jock666&quot;</span>);</span><br><span class="line">        user.setVersion(<span class="number">1</span>);</span><br><span class="line">        userDao.updateById(user);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>æœ€ç»ˆåˆ›å»ºçš„é¡¹ç›®ç»“æ„ä¸º:</p><p><img src="/2022/07/25/MyBatisPlus/1631033634879.png" alt="1631033634879"></p></li></ul><h4 id="4-1-2-ä»£ç æ¼”ç¤º"><a href="#4-1-2-ä»£ç æ¼”ç¤º" class="headerlink" title="4.1.2 ä»£ç æ¼”ç¤º"></a>4.1.2 ä»£ç æ¼”ç¤º</h4><h5 id="AUTOç­–ç•¥"><a href="#AUTOç­–ç•¥" class="headerlink" title="AUTOç­–ç•¥"></a>AUTOç­–ç•¥</h5><h6 id="æ­¥éª¤1ï¼šè®¾ç½®ç”Ÿæˆç­–ç•¥ä¸ºAUTO"><a href="#æ­¥éª¤1ï¼šè®¾ç½®ç”Ÿæˆç­–ç•¥ä¸ºAUTO" class="headerlink" title="æ­¥éª¤1ï¼šè®¾ç½®ç”Ÿæˆç­–ç•¥ä¸ºAUTO"></a>æ­¥éª¤1ï¼šè®¾ç½®ç”Ÿæˆç­–ç•¥ä¸ºAUTO</h6><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@TableName(&quot;tbl_user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="meta">@TableId(type = IdType.AUTO)</span></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="meta">@TableField(value=&quot;pwd&quot;,select=false)</span></span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> String tel;</span><br><span class="line">    <span class="meta">@TableField(exist=false)</span></span><br><span class="line">    <span class="keyword">private</span> Integer online;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h6 id="æ­¥éª¤2ï¼šåˆ é™¤æµ‹è¯•æ•°æ®å¹¶ä¿®æ”¹è‡ªå¢å€¼"><a href="#æ­¥éª¤2ï¼šåˆ é™¤æµ‹è¯•æ•°æ®å¹¶ä¿®æ”¹è‡ªå¢å€¼" class="headerlink" title="æ­¥éª¤2ï¼šåˆ é™¤æµ‹è¯•æ•°æ®å¹¶ä¿®æ”¹è‡ªå¢å€¼"></a>æ­¥éª¤2ï¼šåˆ é™¤æµ‹è¯•æ•°æ®å¹¶ä¿®æ”¹è‡ªå¢å€¼</h6><ul><li><p>åˆ é™¤æµ‹è¯•æ•°æ®</p><p><img src="/2022/07/25/MyBatisPlus/1631211291677.png" alt="1631211291677"></p></li><li><p>å› ä¸ºä¹‹å‰ç”Ÿæˆä¸»é”®IDçš„å€¼æ¯”è¾ƒé•¿ï¼Œä¼šæŠŠMySQLçš„è‡ªåŠ¨å¢é•¿çš„å€¼å˜çš„å¾ˆå¤§ï¼Œæ‰€ä»¥éœ€è¦å°†å…¶è°ƒæ•´ä¸ºç›®å‰æœ€æ–°çš„idå€¼ã€‚</p></li></ul><p><img src="/2022/07/25/MyBatisPlus/1631211080703.png" alt="1631211080703"></p><h6 id="æ­¥éª¤3ï¼šè¿è¡Œæ–°å¢æ–¹æ³•"><a href="#æ­¥éª¤3ï¼šè¿è¡Œæ–°å¢æ–¹æ³•" class="headerlink" title="æ­¥éª¤3ï¼šè¿è¡Œæ–°å¢æ–¹æ³•"></a>æ­¥éª¤3ï¼šè¿è¡Œæ–°å¢æ–¹æ³•</h6><p>ä¼šå‘ç°ï¼Œæ–°å¢æˆåŠŸï¼Œå¹¶ä¸”ä¸»é”®idä¹Ÿæ˜¯ä»5å¼€å§‹</p><p><img src="/2022/07/25/MyBatisPlus/1631211383421.png" alt="1631211383421"></p><p>ç»è¿‡è¿™ä¸‰æ­¥çš„æ¼”ç¤ºï¼Œä¼šå‘ç°<code>AUTO</code>çš„ä½œç”¨æ˜¯&#x3D;&#x3D;ä½¿ç”¨æ•°æ®åº“IDè‡ªå¢&#x3D;&#x3D;ï¼Œåœ¨ä½¿ç”¨è¯¥ç­–ç•¥çš„æ—¶å€™ä¸€å®šè¦ç¡®ä¿å¯¹åº”çš„æ•°æ®åº“è¡¨è®¾ç½®äº†IDä¸»é”®è‡ªå¢ï¼Œå¦åˆ™æ— æ•ˆã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å¯ä»¥è¿›å…¥æºç æŸ¥çœ‹ä¸‹IDçš„ç”Ÿæˆç­–ç•¥æœ‰å“ªäº›?</p><p>æ‰“å¼€æºç åï¼Œä½ ä¼šå‘ç°å¹¶æ²¡æœ‰çœ‹åˆ°ä¸­æ–‡æ³¨é‡Šï¼Œè¿™å°±éœ€è¦æˆ‘ä»¬ç‚¹å‡»å³ä¸Šè§’çš„<code>Download Sources</code>,ä¼šè‡ªåŠ¨å¸®ä½ æŠŠè¿™ä¸ªç±»çš„javaæ–‡ä»¶ä¸‹è½½ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±èƒ½çœ‹åˆ°å…·ä½“çš„æ³¨é‡Šå†…å®¹ã€‚å› ä¸ºè¿™ä¸ªæŠ€æœ¯æ˜¯å›½äººåˆ¶ä½œçš„ï¼Œæ‰€ä»¥ä»–ä»£ç ä¸­çš„æ³¨é‡Šè¿˜æ˜¯æ¯”è¾ƒå®¹æ˜“çœ‹æ‡‚çš„ã€‚</p><p><img src="/2022/07/25/MyBatisPlus/1631211697712.png" alt="1631211697712"></p><p>å½“æŠŠæºç ä¸‹è½½å®Œåï¼Œå°±å¯ä»¥çœ‹åˆ°å¦‚ä¸‹å†…å®¹:</p><p><img src="/2022/07/25/MyBatisPlus/1631211902833.png" alt="1631211902833"></p><p>ä»æºç ä¸­å¯ä»¥çœ‹åˆ°ï¼Œé™¤äº†AUTOè¿™ä¸ªç­–ç•¥ä»¥å¤–ï¼Œè¿˜æœ‰å¦‚ä¸‹å‡ ç§ç”Ÿæˆç­–ç•¥:</p><ul><li>NONEï¼šä¸è®¾ç½®idç”Ÿæˆç­–ç•¥</li><li>INPUTï¼šç”¨æˆ·æ‰‹å·¥è¾“å…¥id</li><li>ASSIGN_IDï¼šé›ªèŠ±ç®—æ³•ç”Ÿæˆid(å¯å…¼å®¹æ•°å€¼å‹ä¸å­—ç¬¦ä¸²å‹)</li><li>ASSIGN_UUIDï¼šä»¥UUIDç”Ÿæˆç®—æ³•ä½œä¸ºidç”Ÿæˆç­–ç•¥</li><li>å…¶ä»–çš„å‡ ä¸ªç­–ç•¥å‡å·²è¿‡æ—¶ï¼Œéƒ½å°†è¢«ASSIGN_IDå’ŒASSIGN_UUIDä»£æ›¿æ‰ã€‚</li></ul><p><strong>æ‹“å±•:</strong></p><p>åˆ†å¸ƒå¼IDæ˜¯ä»€ä¹ˆ?</p><ul><li>å½“æ•°æ®é‡è¶³å¤Ÿå¤§çš„æ—¶å€™ï¼Œä¸€å°æ•°æ®åº“æœåŠ¡å™¨å­˜å‚¨ä¸ä¸‹ï¼Œè¿™ä¸ªæ—¶å€™å°±éœ€è¦å¤šå°æ•°æ®åº“æœåŠ¡å™¨è¿›è¡Œå­˜å‚¨</li><li>æ¯”å¦‚è®¢å•è¡¨å°±æœ‰å¯èƒ½è¢«å­˜å‚¨åœ¨ä¸åŒçš„æœåŠ¡å™¨ä¸Š</li><li>å¦‚æœç”¨æ•°æ®åº“è¡¨çš„è‡ªå¢ä¸»é”®ï¼Œå› ä¸ºåœ¨ä¸¤å°æœåŠ¡å™¨ä¸Šæ‰€ä»¥ä¼šå‡ºç°å†²çª</li><li>è¿™ä¸ªæ—¶å€™å°±éœ€è¦ä¸€ä¸ªå…¨å±€å”¯ä¸€ID,è¿™ä¸ªIDå°±æ˜¯åˆ†å¸ƒå¼IDã€‚</li></ul><h5 id="INPUTç­–ç•¥"><a href="#INPUTç­–ç•¥" class="headerlink" title="INPUTç­–ç•¥"></a>INPUTç­–ç•¥</h5><h6 id="æ­¥éª¤1ï¼šè®¾ç½®ç”Ÿæˆç­–ç•¥ä¸ºINPUT"><a href="#æ­¥éª¤1ï¼šè®¾ç½®ç”Ÿæˆç­–ç•¥ä¸ºINPUT" class="headerlink" title="æ­¥éª¤1ï¼šè®¾ç½®ç”Ÿæˆç­–ç•¥ä¸ºINPUT"></a>æ­¥éª¤1ï¼šè®¾ç½®ç”Ÿæˆç­–ç•¥ä¸ºINPUT</h6><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@TableName(&quot;tbl_user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="meta">@TableId(type = IdType.INPUT)</span></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="meta">@TableField(value=&quot;pwd&quot;,select=false)</span></span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> String tel;</span><br><span class="line">    <span class="meta">@TableField(exist=false)</span></span><br><span class="line">    <span class="keyword">private</span> Integer online;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„ï¼š</strong>è¿™ç§IDç”Ÿæˆç­–ç•¥ï¼Œéœ€è¦å°†è¡¨çš„è‡ªå¢ç­–ç•¥åˆ é™¤æ‰</p><p><img src="/2022/07/25/MyBatisPlus/1631212246124.png" alt="1631212246124"></p><h6 id="æ­¥éª¤2ï¼šæ·»åŠ æ•°æ®æ‰‹åŠ¨è®¾ç½®ID"><a href="#æ­¥éª¤2ï¼šæ·»åŠ æ•°æ®æ‰‹åŠ¨è®¾ç½®ID" class="headerlink" title="æ­¥éª¤2ï¼šæ·»åŠ æ•°æ®æ‰‹åŠ¨è®¾ç½®ID"></a>æ­¥éª¤2ï¼šæ·»åŠ æ•°æ®æ‰‹åŠ¨è®¾ç½®ID</h6><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Mybatisplus03DqlApplicationTests</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserDao userDao;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">testSave</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">        <span class="comment">//è®¾ç½®ä¸»é”®IDçš„å€¼</span></span><br><span class="line">        user.setId(<span class="number">666L</span>);</span><br><span class="line">        user.setName(<span class="string">&quot;é»‘é©¬ç¨‹åºå‘˜&quot;</span>);</span><br><span class="line">        user.setPassword(<span class="string">&quot;itheima&quot;</span>);</span><br><span class="line">        user.setAge(<span class="number">12</span>);</span><br><span class="line">        user.setTel(<span class="string">&quot;4006184000&quot;</span>);</span><br><span class="line">        userDao.insert(user);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h6 id="æ­¥éª¤3ï¼šè¿è¡Œæ–°å¢æ–¹æ³•-1"><a href="#æ­¥éª¤3ï¼šè¿è¡Œæ–°å¢æ–¹æ³•-1" class="headerlink" title="æ­¥éª¤3ï¼šè¿è¡Œæ–°å¢æ–¹æ³•"></a>æ­¥éª¤3ï¼šè¿è¡Œæ–°å¢æ–¹æ³•</h6><p>å¦‚æœæ²¡æœ‰è®¾ç½®ä¸»é”®IDçš„å€¼ï¼Œåˆ™ä¼šæŠ¥é”™ï¼Œé”™è¯¯æç¤ºå°±æ˜¯ä¸»é”®IDæ²¡æœ‰ç»™å€¼:</p><p><img src="/2022/07/25/MyBatisPlus/1631212469974.png" alt="1631212469974"></p><p>å¦‚æœè®¾ç½®äº†ä¸»é”®ID,åˆ™æ•°æ®æ·»åŠ æˆåŠŸï¼Œå¦‚ä¸‹:</p><p><img src="/2022/07/25/MyBatisPlus/1631212421137.png" alt="1631212421137"></p><h5 id="ASSIGN-IDç­–ç•¥"><a href="#ASSIGN-IDç­–ç•¥" class="headerlink" title="ASSIGN_IDç­–ç•¥"></a>ASSIGN_IDç­–ç•¥</h5><h6 id="æ­¥éª¤1ï¼šè®¾ç½®ç”Ÿæˆç­–ç•¥ä¸ºASSIGN-ID"><a href="#æ­¥éª¤1ï¼šè®¾ç½®ç”Ÿæˆç­–ç•¥ä¸ºASSIGN-ID" class="headerlink" title="æ­¥éª¤1ï¼šè®¾ç½®ç”Ÿæˆç­–ç•¥ä¸ºASSIGN_ID"></a>æ­¥éª¤1ï¼šè®¾ç½®ç”Ÿæˆç­–ç•¥ä¸ºASSIGN_ID</h6><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@TableName(&quot;tbl_user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="meta">@TableId(type = IdType.ASSIGN_ID)</span></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="meta">@TableField(value=&quot;pwd&quot;,select=false)</span></span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> String tel;</span><br><span class="line">    <span class="meta">@TableField(exist=false)</span></span><br><span class="line">    <span class="keyword">private</span> Integer online;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h6 id="æ­¥éª¤2ï¼šæ·»åŠ æ•°æ®ä¸è®¾ç½®ID"><a href="#æ­¥éª¤2ï¼šæ·»åŠ æ•°æ®ä¸è®¾ç½®ID" class="headerlink" title="æ­¥éª¤2ï¼šæ·»åŠ æ•°æ®ä¸è®¾ç½®ID"></a>æ­¥éª¤2ï¼šæ·»åŠ æ•°æ®ä¸è®¾ç½®ID</h6><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Mybatisplus03DqlApplicationTests</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserDao userDao;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">testSave</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">        user.setName(<span class="string">&quot;é»‘é©¬ç¨‹åºå‘˜&quot;</span>);</span><br><span class="line">        user.setPassword(<span class="string">&quot;itheima&quot;</span>);</span><br><span class="line">        user.setAge(<span class="number">12</span>);</span><br><span class="line">        user.setTel(<span class="string">&quot;4006184000&quot;</span>);</span><br><span class="line">        userDao.insert(user);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>**æ³¨æ„:**è¿™ç§ç”Ÿæˆç­–ç•¥ï¼Œä¸éœ€è¦æ‰‹åŠ¨è®¾ç½®IDï¼Œå¦‚æœæ‰‹åŠ¨è®¾ç½®IDï¼Œåˆ™ä¼šä½¿ç”¨è‡ªå·±è®¾ç½®çš„å€¼ã€‚</p><h6 id="æ­¥éª¤3-è¿è¡Œæ–°å¢æ–¹æ³•"><a href="#æ­¥éª¤3-è¿è¡Œæ–°å¢æ–¹æ³•" class="headerlink" title="æ­¥éª¤3:è¿è¡Œæ–°å¢æ–¹æ³•"></a>æ­¥éª¤3:è¿è¡Œæ–°å¢æ–¹æ³•</h6><p><img src="/2022/07/25/MyBatisPlus/1631242753467.png" alt="1631242753467"></p><p>ç”Ÿæˆçš„IDå°±æ˜¯ä¸€ä¸ªLongç±»å‹çš„æ•°æ®ã€‚</p><h5 id="ASSIGN-UUIDç­–ç•¥"><a href="#ASSIGN-UUIDç­–ç•¥" class="headerlink" title="ASSIGN_UUIDç­–ç•¥"></a>ASSIGN_UUIDç­–ç•¥</h5><h6 id="æ­¥éª¤1ï¼šè®¾ç½®ç”Ÿæˆç­–ç•¥ä¸ºASSIGN-UUID"><a href="#æ­¥éª¤1ï¼šè®¾ç½®ç”Ÿæˆç­–ç•¥ä¸ºASSIGN-UUID" class="headerlink" title="æ­¥éª¤1ï¼šè®¾ç½®ç”Ÿæˆç­–ç•¥ä¸ºASSIGN_UUID"></a>æ­¥éª¤1ï¼šè®¾ç½®ç”Ÿæˆç­–ç•¥ä¸ºASSIGN_UUID</h6><p>ä½¿ç”¨uuidéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸»é”®çš„ç±»å‹ä¸èƒ½æ˜¯Longï¼Œè€Œåº”è¯¥æ”¹æˆStringç±»å‹</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@TableName(&quot;tbl_user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="meta">@TableId(type = IdType.ASSIGN_UUID)</span></span><br><span class="line">    <span class="keyword">private</span> String id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="meta">@TableField(value=&quot;pwd&quot;,select=false)</span></span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> String tel;</span><br><span class="line">    <span class="meta">@TableField(exist=false)</span></span><br><span class="line">    <span class="keyword">private</span> Integer online;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h6 id="æ­¥éª¤2ï¼šä¿®æ”¹è¡¨çš„ä¸»é”®ç±»å‹"><a href="#æ­¥éª¤2ï¼šä¿®æ”¹è¡¨çš„ä¸»é”®ç±»å‹" class="headerlink" title="æ­¥éª¤2ï¼šä¿®æ”¹è¡¨çš„ä¸»é”®ç±»å‹"></a>æ­¥éª¤2ï¼šä¿®æ”¹è¡¨çš„ä¸»é”®ç±»å‹</h6><p><img src="/2022/07/25/MyBatisPlus/1631243694870.png" alt="1631243694870"></p><p>ä¸»é”®ç±»å‹è®¾ç½®ä¸ºvarcharï¼Œé•¿åº¦è¦å¤§äº32ï¼Œå› ä¸ºUUIDç”Ÿæˆçš„ä¸»é”®ä¸º32ä½ï¼Œå¦‚æœé•¿åº¦å°çš„è¯å°±ä¼šå¯¼è‡´æ’å…¥å¤±è´¥ã€‚</p><h6 id="æ­¥éª¤3ï¼šæ·»åŠ æ•°æ®ä¸è®¾ç½®ID"><a href="#æ­¥éª¤3ï¼šæ·»åŠ æ•°æ®ä¸è®¾ç½®ID" class="headerlink" title="æ­¥éª¤3ï¼šæ·»åŠ æ•°æ®ä¸è®¾ç½®ID"></a>æ­¥éª¤3ï¼šæ·»åŠ æ•°æ®ä¸è®¾ç½®ID</h6><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Mybatisplus03DqlApplicationTests</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserDao userDao;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">testSave</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">        user.setName(<span class="string">&quot;é»‘é©¬ç¨‹åºå‘˜&quot;</span>);</span><br><span class="line">        user.setPassword(<span class="string">&quot;itheima&quot;</span>);</span><br><span class="line">        user.setAge(<span class="number">12</span>);</span><br><span class="line">        user.setTel(<span class="string">&quot;4006184000&quot;</span>);</span><br><span class="line">        userDao.insert(user);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h6 id="æ­¥éª¤4ï¼šè¿è¡Œæ–°å¢æ–¹æ³•"><a href="#æ­¥éª¤4ï¼šè¿è¡Œæ–°å¢æ–¹æ³•" class="headerlink" title="æ­¥éª¤4ï¼šè¿è¡Œæ–°å¢æ–¹æ³•"></a>æ­¥éª¤4ï¼šè¿è¡Œæ–°å¢æ–¹æ³•</h6><p><img src="/2022/07/25/MyBatisPlus/1631243810974.png" alt="1631243810974"></p><p>æ¥ä¸‹æ¥æˆ‘ä»¬æ¥èŠä¸€èŠé›ªèŠ±ç®—æ³•:</p><p>é›ªèŠ±ç®—æ³•(SnowFlake),æ˜¯Twitterå®˜æ–¹ç»™å‡ºçš„ç®—æ³•å®ç° æ˜¯ç”¨Scalaå†™çš„ã€‚å…¶ç”Ÿæˆçš„ç»“æœæ˜¯ä¸€ä¸ª64bitå¤§å°æ•´æ•°ï¼Œå®ƒçš„ç»“æ„å¦‚ä¸‹å›¾:</p><p><img src="/2022/07/25/MyBatisPlus/1631243987800.png" alt="1631243987800"></p><ol><li>1bit,ä¸ç”¨,å› ä¸ºäºŒè¿›åˆ¶ä¸­æœ€é«˜ä½æ˜¯ç¬¦å·ä½ï¼Œ1è¡¨ç¤ºè´Ÿæ•°ï¼Œ0è¡¨ç¤ºæ­£æ•°ã€‚ç”Ÿæˆçš„idä¸€èˆ¬éƒ½æ˜¯ç”¨æ•´æ•°ï¼Œæ‰€ä»¥æœ€é«˜ä½å›ºå®šä¸º0ã€‚</li><li>41bit-æ—¶é—´æˆ³ï¼Œç”¨æ¥è®°å½•æ—¶é—´æˆ³ï¼Œæ¯«ç§’çº§</li><li>10bit-å·¥ä½œæœºå™¨idï¼Œç”¨æ¥è®°å½•å·¥ä½œæœºå™¨id,å…¶ä¸­é«˜ä½5bitæ˜¯æ•°æ®ä¸­å¿ƒIDå…¶å–å€¼èŒƒå›´0-31ï¼Œä½ä½5bitæ˜¯å·¥ä½œèŠ‚ç‚¹IDå…¶å–å€¼èŒƒå›´0-31ï¼Œä¸¤ä¸ªç»„åˆèµ·æ¥æœ€å¤šå¯ä»¥å®¹çº³1024ä¸ªèŠ‚ç‚¹</li><li>åºåˆ—å·å ç”¨12bitï¼Œæ¯ä¸ªèŠ‚ç‚¹æ¯æ¯«ç§’0å¼€å§‹ä¸æ–­ç´¯åŠ ï¼Œæœ€å¤šå¯ä»¥ç´¯åŠ åˆ°4095ï¼Œä¸€å…±å¯ä»¥äº§ç”Ÿ4096ä¸ªID</li></ol><h4 id="4-1-3-IDç”Ÿæˆç­–ç•¥å¯¹æ¯”"><a href="#4-1-3-IDç”Ÿæˆç­–ç•¥å¯¹æ¯”" class="headerlink" title="4.1.3 IDç”Ÿæˆç­–ç•¥å¯¹æ¯”"></a>4.1.3 IDç”Ÿæˆç­–ç•¥å¯¹æ¯”</h4><p>ä»‹ç»äº†è¿™äº›ä¸»é”®IDçš„ç”Ÿæˆç­–ç•¥ï¼Œæˆ‘ä»¬ä»¥åè¯¥ç”¨å“ªä¸ªå‘¢?</p><ul><li>NONE: ä¸è®¾ç½®idç”Ÿæˆç­–ç•¥ï¼ŒMPä¸è‡ªåŠ¨ç”Ÿæˆï¼Œçº¦ç­‰äºINPUT,æ‰€ä»¥è¿™ä¸¤ç§æ–¹å¼éƒ½éœ€è¦ç”¨æˆ·æ‰‹åŠ¨è®¾ç½®ï¼Œä½†æ˜¯æ‰‹åŠ¨è®¾ç½®ç¬¬ä¸€ä¸ªé—®é¢˜æ˜¯å®¹æ˜“å‡ºç°ç›¸åŒçš„IDé€ æˆä¸»é”®å†²çªï¼Œä¸ºäº†ä¿è¯ä¸»é”®ä¸å†²çªå°±éœ€è¦åšå¾ˆå¤šåˆ¤å®šï¼Œå®ç°èµ·æ¥æ¯”è¾ƒå¤æ‚</li><li>AUTO:æ•°æ®åº“IDè‡ªå¢,è¿™ç§ç­–ç•¥é€‚åˆåœ¨æ•°æ®åº“æœåŠ¡å™¨åªæœ‰1å°çš„æƒ…å†µä¸‹ä½¿ç”¨,ä¸å¯ä½œä¸ºåˆ†å¸ƒå¼IDä½¿ç”¨</li><li>ASSIGN_UUID:å¯ä»¥åœ¨åˆ†å¸ƒå¼çš„æƒ…å†µä¸‹ä½¿ç”¨ï¼Œè€Œä¸”èƒ½å¤Ÿä¿è¯å”¯ä¸€ï¼Œä½†æ˜¯ç”Ÿæˆçš„ä¸»é”®æ˜¯32ä½çš„å­—ç¬¦ä¸²ï¼Œé•¿åº¦è¿‡é•¿å ç”¨ç©ºé—´è€Œä¸”è¿˜ä¸èƒ½æ’åºï¼ŒæŸ¥è¯¢æ€§èƒ½ä¹Ÿæ…¢</li><li>ASSIGN_ID:å¯ä»¥åœ¨åˆ†å¸ƒå¼çš„æƒ…å†µä¸‹ä½¿ç”¨ï¼Œç”Ÿæˆçš„æ˜¯Longç±»å‹çš„æ•°å­—ï¼Œå¯ä»¥æ’åºæ€§èƒ½ä¹Ÿé«˜ï¼Œä½†æ˜¯ç”Ÿæˆçš„ç­–ç•¥å’ŒæœåŠ¡å™¨æ—¶é—´æœ‰å…³ï¼Œå¦‚æœä¿®æ”¹äº†ç³»ç»Ÿæ—¶é—´å°±æœ‰å¯èƒ½å¯¼è‡´å‡ºç°é‡å¤ä¸»é”®</li><li>ç»¼ä¸Šæ‰€è¿°ï¼Œæ¯ä¸€ç§ä¸»é”®ç­–ç•¥éƒ½æœ‰è‡ªå·±çš„ä¼˜ç¼ºç‚¹ï¼Œæ ¹æ®è‡ªå·±é¡¹ç›®ä¸šåŠ¡çš„å®é™…æƒ…å†µæ¥é€‰æ‹©ä½¿ç”¨æ‰æ˜¯æœ€æ˜æ™ºçš„é€‰æ‹©ã€‚</li></ul><h4 id="4-1-4-ç®€åŒ–é…ç½®"><a href="#4-1-4-ç®€åŒ–é…ç½®" class="headerlink" title="4.1.4 ç®€åŒ–é…ç½®"></a>4.1.4 ç®€åŒ–é…ç½®</h4><p>å‰é¢æˆ‘ä»¬å·²ç»å®Œæˆäº†è¡¨å…³ç³»æ˜ å°„ã€æ•°æ®åº“ä¸»é”®ç­–ç•¥çš„è®¾ç½®ï¼Œæ¥ä¸‹æ¥å¯¹äºè¿™ä¸¤ä¸ªå†…å®¹çš„ä½¿ç”¨ï¼Œæˆ‘ä»¬å†è®²ä¸‹ä»–ä»¬çš„ç®€åŒ–é…ç½®:</p><h5 id="æ¨¡å‹ç±»ä¸»é”®ç­–ç•¥è®¾ç½®"><a href="#æ¨¡å‹ç±»ä¸»é”®ç­–ç•¥è®¾ç½®" class="headerlink" title="æ¨¡å‹ç±»ä¸»é”®ç­–ç•¥è®¾ç½®"></a>æ¨¡å‹ç±»ä¸»é”®ç­–ç•¥è®¾ç½®</h5><p>å¯¹äºä¸»é”®IDçš„ç­–ç•¥å·²ç»ä»‹ç»å®Œï¼Œä½†æ˜¯å¦‚æœè¦åœ¨é¡¹ç›®ä¸­çš„æ¯ä¸€ä¸ªæ¨¡å‹ç±»ä¸Šéƒ½éœ€è¦ä½¿ç”¨ç›¸åŒçš„ç”Ÿæˆç­–ç•¥ï¼Œå¦‚:<img src="/2022/07/25/MyBatisPlus/1631245676125.png" alt="1631245676125"></p><p>ç¡®å®æ˜¯ç¨å¾®æœ‰ç‚¹ç¹çï¼Œæˆ‘ä»¬èƒ½ä¸èƒ½åœ¨æŸä¸€å¤„è¿›è¡Œé…ç½®ï¼Œå°±èƒ½è®©æ‰€æœ‰çš„æ¨¡å‹ç±»éƒ½å¯ä»¥ä½¿ç”¨è¯¥ä¸»é”®IDç­–ç•¥å‘¢?</p><p>ç­”æ¡ˆæ˜¯è‚¯å®šæœ‰ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨é…ç½®æ–‡ä»¶ä¸­æ·»åŠ å¦‚ä¸‹å†…å®¹:</p><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="attr">global-config:</span></span><br><span class="line">    <span class="attr">db-config:</span></span><br><span class="line">    <span class="attr">id-type:</span> <span class="string">assign_id</span></span><br></pre></td></tr></table></figure><p>é…ç½®å®Œæˆåï¼Œæ¯ä¸ªæ¨¡å‹ç±»çš„ä¸»é”®IDç­–ç•¥éƒ½å°†æˆä¸ºassign_id.</p><h5 id="æ•°æ®åº“è¡¨ä¸æ¨¡å‹ç±»çš„æ˜ å°„å…³ç³»"><a href="#æ•°æ®åº“è¡¨ä¸æ¨¡å‹ç±»çš„æ˜ å°„å…³ç³»" class="headerlink" title="æ•°æ®åº“è¡¨ä¸æ¨¡å‹ç±»çš„æ˜ å°„å…³ç³»"></a>æ•°æ®åº“è¡¨ä¸æ¨¡å‹ç±»çš„æ˜ å°„å…³ç³»</h5><p>MPä¼šé»˜è®¤å°†æ¨¡å‹ç±»çš„ç±»ååé¦–å­—æ¯å°å†™ä½œä¸ºè¡¨åä½¿ç”¨ï¼Œå‡å¦‚æ•°æ®åº“è¡¨çš„åç§°éƒ½ä»¥<code>tbl_</code>å¼€å¤´ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±éœ€è¦å°†æ‰€æœ‰çš„æ¨¡å‹ç±»ä¸Šæ·»åŠ <code>@TableName</code>ï¼Œå¦‚:</p><p><img src="/2022/07/25/MyBatisPlus/1631245757169.png" alt="1631245757169"></p><p>é…ç½®èµ·æ¥è¿˜æ˜¯æ¯”è¾ƒç¹çï¼Œç®€åŒ–æ–¹å¼ä¸ºåœ¨é…ç½®æ–‡ä»¶ä¸­é…ç½®å¦‚ä¸‹å†…å®¹ï¼š</p><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="attr">global-config:</span></span><br><span class="line">    <span class="attr">db-config:</span></span><br><span class="line">    <span class="attr">table-prefix:</span> <span class="string">tbl_</span></span><br></pre></td></tr></table></figure><p>è®¾ç½®è¡¨çš„å‰ç¼€å†…å®¹ï¼Œè¿™æ ·MPå°±ä¼šæ‹¿ <code>tbl_</code>åŠ ä¸Šæ¨¡å‹ç±»çš„é¦–å­—æ¯å°å†™ï¼Œå°±åˆšå¥½ç»„è£…æˆæ•°æ®åº“çš„è¡¨åã€‚</p><h3 id="4-2-å¤šè®°å½•æ“ä½œ"><a href="#4-2-å¤šè®°å½•æ“ä½œ" class="headerlink" title="4.2 å¤šè®°å½•æ“ä½œ"></a>4.2 å¤šè®°å½•æ“ä½œ</h3><p>å…ˆæ¥çœ‹ä¸‹é—®é¢˜:</p><p><img src="/2022/07/25/MyBatisPlus/1631246166514.png" alt="1631246166514"></p><p>ä¹‹å‰æ·»åŠ äº†å¾ˆå¤šå•†å“åˆ°è´­ç‰©è½¦ï¼Œè¿‡äº†å‡ å¤©å‘ç°è¿™äº›ä¸œè¥¿åˆä¸æƒ³è¦äº†ï¼Œè¯¥æ€ä¹ˆåŠå‘¢?</p><p>å¾ˆç®€å•åˆ é™¤æ‰ï¼Œä½†æ˜¯ä¸€ä¸ªä¸ªåˆ é™¤çš„è¯è¿˜æ˜¯æ¯”è¾ƒæ…¢å’Œè´¹äº‹çš„ï¼Œæ‰€ä»¥ä¸€èˆ¬ä¼šç»™ç”¨æˆ·ä¸€ä¸ªæ‰¹é‡æ“ä½œï¼Œä¹Ÿå°±æ˜¯å‰é¢æœ‰ä¸€ä¸ªå¤é€‰æ¡†ï¼Œç”¨æˆ·ä¸€æ¬¡å¯ä»¥å‹¾é€‰å¤šä¸ªä¹Ÿå¯ä»¥è¿›è¡Œå…¨é€‰ï¼Œç„¶ååˆ ä¸€æ¬¡å°±å¯ä»¥å°†è´­ç‰©è½¦æ¸…ç©ºï¼Œè¿™ä¸ªå°±éœ€è¦ç”¨åˆ°<code>æ‰¹é‡åˆ é™¤</code>çš„æ“ä½œäº†ã€‚</p><p>å…·ä½“è¯¥å¦‚ä½•å®ç°å¤šæ¡åˆ é™¤ï¼Œæˆ‘ä»¬æ‰¾æ‰¾å¯¹åº”çš„APIæ–¹æ³•</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">deleteBatchIds</span><span class="params">(<span class="meta">@Param(Constants.COLLECTION)</span> Collection&lt;? extends Serializable&gt; idList)</span>;</span><br></pre></td></tr></table></figure><p>ç¿»è¯‘æ–¹æ³•çš„å­—é¢æ„æ€ä¸ºï¼šåˆ é™¤ï¼ˆæ ¹æ®ID æ‰¹é‡åˆ é™¤ï¼‰,å‚æ•°æ˜¯ä¸€ä¸ªé›†åˆï¼Œå¯ä»¥å­˜æ”¾å¤šä¸ªidå€¼ã€‚</p><blockquote><p>éœ€æ±‚:æ ¹æ®ä¼ å…¥çš„idé›†åˆå°†æ•°æ®åº“è¡¨ä¸­çš„æ•°æ®åˆ é™¤æ‰ã€‚</p></blockquote><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Mybatisplus03DqlApplicationTests</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserDao userDao;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">testDelete</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">//åˆ é™¤æŒ‡å®šå¤šæ¡æ•°æ®</span></span><br><span class="line">        List&lt;Long&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        list.add(<span class="number">1402551342481838081L</span>);</span><br><span class="line">        list.add(<span class="number">1402553134049501186L</span>);</span><br><span class="line">        list.add(<span class="number">1402553619611430913L</span>);</span><br><span class="line">        userDao.deleteBatchIds(list);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ‰§è¡ŒæˆåŠŸåï¼Œæ•°æ®åº“è¡¨ä¸­çš„æ•°æ®å°±ä¼šæŒ‰ç…§æŒ‡å®šçš„idè¿›è¡Œåˆ é™¤ã€‚</p><p>é™¤äº†æŒ‰ç…§idé›†åˆè¿›è¡Œæ‰¹é‡åˆ é™¤ï¼Œä¹Ÿå¯ä»¥æŒ‰ç…§idé›†åˆè¿›è¡Œæ‰¹é‡æŸ¥è¯¢ï¼Œè¿˜æ˜¯å…ˆæ¥çœ‹ä¸‹API</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">List&lt;T&gt; <span class="title function_">selectBatchIds</span><span class="params">(<span class="meta">@Param(Constants.COLLECTION)</span> Collection&lt;? extends Serializable&gt; idList)</span>;</span><br></pre></td></tr></table></figure><p>æ–¹æ³•åç§°ç¿»è¯‘ä¸º:æŸ¥è¯¢ï¼ˆæ ¹æ®ID æ‰¹é‡æŸ¥è¯¢ï¼‰ï¼Œå‚æ•°æ˜¯ä¸€ä¸ªé›†åˆï¼Œå¯ä»¥å­˜æ”¾å¤šä¸ªidå€¼ã€‚</p><blockquote><p>éœ€æ±‚ï¼šæ ¹æ®ä¼ å…¥çš„IDé›†åˆæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯</p></blockquote><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Mybatisplus03DqlApplicationTests</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserDao userDao;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">testGetByIds</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">//æŸ¥è¯¢æŒ‡å®šå¤šæ¡æ•°æ®</span></span><br><span class="line">        List&lt;Long&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        list.add(<span class="number">1L</span>);</span><br><span class="line">        list.add(<span class="number">3L</span>);</span><br><span class="line">        list.add(<span class="number">4L</span>);</span><br><span class="line">        userDao.selectBatchIds(list);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æŸ¥è¯¢ç»“æœå°±ä¼šæŒ‰ç…§æŒ‡å®šä¼ å…¥çš„idå€¼è¿›è¡ŒæŸ¥è¯¢</p><p><img src="/2022/07/25/MyBatisPlus/1631246688218.png" alt="1631246688218"></p><h3 id="4-3-é€»è¾‘åˆ é™¤"><a href="#4-3-é€»è¾‘åˆ é™¤" class="headerlink" title="4.3 é€»è¾‘åˆ é™¤"></a>4.3 é€»è¾‘åˆ é™¤</h3><p>æ¥ä¸‹æ¥è¦è®²è§£æ˜¯åˆ é™¤ä¸­æ¯”è¾ƒé‡è¦çš„ä¸€ä¸ªæ“ä½œï¼Œé€»è¾‘åˆ é™¤ï¼Œå…ˆæ¥åˆ†æä¸‹é—®é¢˜:</p><p><img src="/2022/07/25/MyBatisPlus/1631246806130.png" alt="1631246806130"></p><ul><li><p>è¿™æ˜¯ä¸€ä¸ªå‘˜å·¥å’Œå…¶æ‰€ç­¾çš„åˆåŒè¡¨ï¼Œå…³ç³»æ˜¯ä¸€ä¸ªå‘˜å·¥å¯ä»¥ç­¾å¤šä¸ªåˆåŒï¼Œæ˜¯ä¸€ä¸ªä¸€(å‘˜å·¥)å¯¹å¤š(åˆåŒ)çš„è¡¨</p></li><li><p>å‘˜å·¥IDä¸º1çš„å¼ ä¸šç»©ï¼Œæ€»å…±ç­¾äº†ä¸‰ä¸ªåˆåŒï¼Œå¦‚æœæ­¤æ—¶ä»–ç¦»èŒäº†ï¼Œæˆ‘ä»¬éœ€è¦å°†å‘˜å·¥è¡¨ä¸­çš„æ•°æ®è¿›è¡Œåˆ é™¤ï¼Œä¼šæ‰§è¡Œdeleteæ“ä½œ</p></li><li><p>å¦‚æœè¡¨åœ¨è®¾è®¡çš„æ—¶å€™æœ‰ä¸»å¤–é”®å…³ç³»ï¼Œé‚£ä¹ˆåŒæ—¶ä¹Ÿå¾—å°†åˆåŒè¡¨ä¸­çš„å‰ä¸‰æ¡æ•°æ®ä¹Ÿåˆ é™¤æ‰</p><p><img src="/2022/07/25/MyBatisPlus/1631246997190.png" alt="1631246997190"></p></li><li><p>åæœŸè¦ç»Ÿè®¡æ‰€ç­¾åˆåŒçš„æ€»é‡‘é¢ï¼Œå°±ä¼šå‘ç°å¯¹ä¸ä¸Šï¼ŒåŸå› æ˜¯å·²ç»å°†å‘˜å·¥1ç­¾çš„åˆåŒä¿¡æ¯åˆ é™¤æ‰äº†</p></li><li><p>å¦‚æœåªåˆ é™¤å‘˜å·¥ä¸åˆ é™¤åˆåŒè¡¨æ•°æ®ï¼Œé‚£ä¹ˆåˆåŒçš„å‘˜å·¥ç¼–å·å¯¹åº”çš„å‘˜å·¥ä¿¡æ¯ä¸å­˜åœ¨ï¼Œé‚£ä¹ˆå°±ä¼šå‡ºç°åƒåœ¾æ•°æ®ï¼Œå°±ä¼šå‡ºç°æ— ä¸»åˆåŒï¼Œæ ¹æœ¬ä¸çŸ¥é“æœ‰å¼ ä¸šç»©è¿™ä¸ªäººçš„å­˜åœ¨</p></li><li><p>æ‰€ä»¥ç»è¿‡åˆ†æï¼Œæˆ‘ä»¬ä¸åº”è¯¥å°†è¡¨ä¸­çš„æ•°æ®åˆ é™¤æ‰ï¼Œè€Œæ˜¯éœ€è¦è¿›è¡Œä¿ç•™ï¼Œä½†æ˜¯åˆå¾—æŠŠç¦»èŒçš„äººå’Œåœ¨èŒçš„äººè¿›è¡ŒåŒºåˆ†ï¼Œè¿™æ ·å°±è§£å†³äº†ä¸Šè¿°é—®é¢˜ï¼Œå¦‚:</p><p><img src="/2022/07/25/MyBatisPlus/1631247188218.png" alt="1631247188218"></p></li><li><p>åŒºåˆ†çš„æ–¹å¼ï¼Œå°±æ˜¯åœ¨å‘˜å·¥è¡¨ä¸­æ·»åŠ ä¸€åˆ—æ•°æ®<code>deleted</code>ï¼Œå¦‚æœä¸º0è¯´æ˜åœ¨èŒå‘˜å·¥ï¼Œå¦‚æœç¦»èŒåˆ™å°†å…¶æ”¹å®Œ1ï¼Œï¼ˆ0å’Œ1æ‰€ä»£è¡¨çš„å«ä¹‰æ˜¯å¯ä»¥è‡ªå®šä¹‰çš„ï¼‰</p></li></ul><p>æ‰€ä»¥å¯¹äºåˆ é™¤æ“ä½œä¸šåŠ¡é—®é¢˜æ¥è¯´æœ‰ï¼š</p><ul><li>ç‰©ç†åˆ é™¤ï¼šä¸šåŠ¡æ•°æ®ä»æ•°æ®åº“ä¸­ä¸¢å¼ƒï¼Œæ‰§è¡Œçš„æ˜¯deleteæ“ä½œ</li><li>é€»è¾‘åˆ é™¤ï¼šä¸ºæ•°æ®è®¾ç½®æ˜¯å¦å¯ç”¨çŠ¶æ€å­—æ®µï¼Œåˆ é™¤æ—¶è®¾ç½®çŠ¶æ€å­—æ®µä¸ºä¸å¯ç”¨çŠ¶æ€ï¼Œæ•°æ®ä¿ç•™åœ¨æ•°æ®åº“ä¸­ï¼Œæ‰§è¡Œçš„æ˜¯updateæ“ä½œ</li></ul><p>MPä¸­é€»è¾‘åˆ é™¤å…·ä½“è¯¥å¦‚ä½•å®ç°?</p><h4 id="æ­¥éª¤1ï¼šä¿®æ”¹æ•°æ®åº“è¡¨æ·»åŠ deletedåˆ—"><a href="#æ­¥éª¤1ï¼šä¿®æ”¹æ•°æ®åº“è¡¨æ·»åŠ deletedåˆ—" class="headerlink" title="æ­¥éª¤1ï¼šä¿®æ”¹æ•°æ®åº“è¡¨æ·»åŠ deletedåˆ—"></a>æ­¥éª¤1ï¼šä¿®æ”¹æ•°æ®åº“è¡¨æ·»åŠ <code>deleted</code>åˆ—</h4><p>å­—æ®µåå¯ä»¥ä»»æ„ï¼Œå†…å®¹ä¹Ÿå¯ä»¥è‡ªå®šä¹‰ï¼Œæ¯”å¦‚<code>0</code>ä»£è¡¨æ­£å¸¸ï¼Œ<code>1</code>ä»£è¡¨åˆ é™¤ï¼Œå¯ä»¥åœ¨æ·»åŠ åˆ—çš„åŒæ—¶è®¾ç½®å…¶é»˜è®¤å€¼ä¸º<code>0</code>æ­£å¸¸ã€‚</p><p><img src="/2022/07/25/MyBatisPlus/1631247439168.png" alt="1631247439168"></p><h4 id="æ­¥éª¤2ï¼šå®ä½“ç±»æ·»åŠ å±æ€§"><a href="#æ­¥éª¤2ï¼šå®ä½“ç±»æ·»åŠ å±æ€§" class="headerlink" title="æ­¥éª¤2ï¼šå®ä½“ç±»æ·»åŠ å±æ€§"></a>æ­¥éª¤2ï¼šå®ä½“ç±»æ·»åŠ å±æ€§</h4><p>(1)æ·»åŠ ä¸æ•°æ®åº“è¡¨çš„åˆ—å¯¹åº”çš„ä¸€ä¸ªå±æ€§åï¼Œåç§°å¯ä»¥ä»»æ„ï¼Œå¦‚æœå’Œæ•°æ®è¡¨åˆ—åå¯¹ä¸ä¸Šï¼Œå¯ä»¥ä½¿ç”¨@TableFieldè¿›è¡Œå…³ç³»æ˜ å°„ï¼Œå¦‚æœä¸€è‡´ï¼Œåˆ™ä¼šè‡ªåŠ¨å¯¹åº”ã€‚</p><p>(2)æ ‡è¯†æ–°å¢çš„å­—æ®µä¸ºé€»è¾‘åˆ é™¤å­—æ®µï¼Œä½¿ç”¨<code>@TableLogic</code></p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="comment">//@TableName(&quot;tbl_user&quot;) å¯ä»¥ä¸å†™æ˜¯å› ä¸ºé…ç½®äº†å…¨å±€é…ç½®</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="meta">@TableId(type = IdType.ASSIGN_UUID)</span></span><br><span class="line">    <span class="keyword">private</span> String id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="meta">@TableField(value=&quot;pwd&quot;,select=false)</span></span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> String tel;</span><br><span class="line">    <span class="meta">@TableField(exist=false)</span></span><br><span class="line">    <span class="keyword">private</span> Integer online;</span><br><span class="line">    <span class="meta">@TableLogic(value=&quot;0&quot;,delval=&quot;1&quot;)</span></span><br><span class="line">    <span class="comment">//valueä¸ºæ­£å¸¸æ•°æ®çš„å€¼ï¼Œdelvalä¸ºåˆ é™¤æ•°æ®çš„å€¼</span></span><br><span class="line">    <span class="keyword">private</span> Integer deleted;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ­¥éª¤3ï¼šè¿è¡Œåˆ é™¤æ–¹æ³•"><a href="#æ­¥éª¤3ï¼šè¿è¡Œåˆ é™¤æ–¹æ³•" class="headerlink" title="æ­¥éª¤3ï¼šè¿è¡Œåˆ é™¤æ–¹æ³•"></a>æ­¥éª¤3ï¼šè¿è¡Œåˆ é™¤æ–¹æ³•</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Mybatisplus03DqlApplicationTests</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserDao userDao;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">testDelete</span><span class="params">()</span>&#123;</span><br><span class="line">       userDao.deleteById(<span class="number">1L</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/2022/07/25/MyBatisPlus/1631247818327.png" alt="1631247818327"></p><p>ä»æµ‹è¯•ç»“æœæ¥çœ‹ï¼Œé€»è¾‘åˆ é™¤æœ€åèµ°çš„æ˜¯updateæ“ä½œï¼Œä¼šå°†æŒ‡å®šçš„å­—æ®µä¿®æ”¹æˆåˆ é™¤çŠ¶æ€å¯¹åº”çš„å€¼ã€‚</p><p><strong>æ€è€ƒï¼š</strong></p><p>é€»è¾‘åˆ é™¤ï¼Œå¯¹æŸ¥è¯¢æœ‰æ²¡æœ‰å½±å“å‘¢?</p><ul><li><p>æ‰§è¡ŒæŸ¥è¯¢æ“ä½œ</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Mybatisplus03DqlApplicationTests</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserDao userDao;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">testFind</span><span class="params">()</span>&#123;</span><br><span class="line">       System.out.println(userDao.selectList(<span class="literal">null</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿è¡Œæµ‹è¯•ï¼Œä¼šå‘ç°æ‰“å°å‡ºæ¥çš„sqlè¯­å¥ä¸­ä¼šå¤šä¸€ä¸ªæŸ¥è¯¢æ¡ä»¶ï¼Œå¦‚ï¼š</p><p><img src="/2022/07/25/MyBatisPlus/1631248019999.png" alt="1631248019999"></p><p>å¯æƒ³è€ŒçŸ¥ï¼ŒMPçš„é€»è¾‘åˆ é™¤ä¼šå°†æ‰€æœ‰çš„æŸ¥è¯¢éƒ½æ·»åŠ ä¸€ä¸ªæœªè¢«åˆ é™¤çš„æ¡ä»¶ï¼Œä¹Ÿå°±æ˜¯å·²ç»è¢«åˆ é™¤çš„æ•°æ®æ˜¯ä¸åº”è¯¥è¢«æŸ¥è¯¢å‡ºæ¥çš„ã€‚</p></li><li><p>å¦‚æœè¿˜æ˜¯æƒ³æŠŠå·²ç»åˆ é™¤çš„æ•°æ®éƒ½æŸ¥è¯¢å‡ºæ¥è¯¥å¦‚ä½•å®ç°å‘¢?</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserDao</span> <span class="keyword">extends</span> <span class="title class_">BaseMapper</span>&lt;User&gt; &#123;</span><br><span class="line">    <span class="comment">//æŸ¥è¯¢æ‰€æœ‰æ•°æ®åŒ…å«å·²ç»è¢«åˆ é™¤çš„æ•°æ®</span></span><br><span class="line">    <span class="meta">@Select(&quot;select * from tbl_user&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;User&gt; <span class="title function_">selectAll</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>å¦‚æœæ¯ä¸ªè¡¨éƒ½è¦æœ‰é€»è¾‘åˆ é™¤ï¼Œé‚£ä¹ˆå°±éœ€è¦åœ¨æ¯ä¸ªæ¨¡å‹ç±»çš„å±æ€§ä¸Šæ·»åŠ <code>@TableLogic</code>æ³¨è§£ï¼Œå¦‚ä½•ä¼˜åŒ–?</p><p>åœ¨é…ç½®æ–‡ä»¶ä¸­æ·»åŠ å…¨å±€é…ç½®ï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="attr">global-config:</span></span><br><span class="line">    <span class="attr">db-config:</span></span><br><span class="line">      <span class="comment"># é€»è¾‘åˆ é™¤å­—æ®µå</span></span><br><span class="line">      <span class="attr">logic-delete-field:</span> <span class="string">deleted</span></span><br><span class="line">      <span class="comment"># é€»è¾‘åˆ é™¤å­—é¢å€¼ï¼šæœªåˆ é™¤ä¸º0</span></span><br><span class="line">      <span class="attr">logic-not-delete-value:</span> <span class="number">0</span></span><br><span class="line">      <span class="comment"># é€»è¾‘åˆ é™¤å­—é¢å€¼ï¼šåˆ é™¤ä¸º1</span></span><br><span class="line">      <span class="attr">logic-delete-value:</span> <span class="number">1</span></span><br></pre></td></tr></table></figure></li></ul><p>ä»‹ç»å®Œé€»è¾‘åˆ é™¤ï¼Œé€»è¾‘åˆ é™¤çš„æœ¬è´¨ä¸ºï¼š</p><p><strong>é€»è¾‘åˆ é™¤çš„æœ¬è´¨å…¶å®æ˜¯ä¿®æ”¹æ“ä½œã€‚å¦‚æœåŠ äº†é€»è¾‘åˆ é™¤å­—æ®µï¼ŒæŸ¥è¯¢æ•°æ®æ—¶ä¹Ÿä¼šè‡ªåŠ¨å¸¦ä¸Šé€»è¾‘åˆ é™¤å­—æ®µã€‚</strong></p><p>æ‰§è¡Œçš„SQLè¯­å¥ä¸º:</p><p><code>UPDATE tbl_user SET  deleted = 1 where id = ? AND  deleted = 0</code></p><p>æ‰§è¡Œæ•°æ®ç»“æœä¸ºï¼š</p><p><img src="/2022/07/25/MyBatisPlus/1631248494929.png" alt="1631248494929"></p><h4 id="çŸ¥è¯†ç‚¹1ï¼š-TableLogic"><a href="#çŸ¥è¯†ç‚¹1ï¼š-TableLogic" class="headerlink" title="çŸ¥è¯†ç‚¹1ï¼š@TableLogic"></a>çŸ¥è¯†ç‚¹1ï¼š@TableLogic</h4><table><thead><tr><th>åç§°</th><th>@TableLogic</th></tr></thead><tbody><tr><td>ç±»å‹</td><td>å±æ€§æ³¨è§£</td></tr><tr><td>ä½ç½®</td><td>æ¨¡å‹ç±»ä¸­ç”¨äºè¡¨ç¤ºåˆ é™¤å­—æ®µçš„å±æ€§å®šä¹‰ä¸Šæ–¹</td></tr><tr><td>ä½œç”¨</td><td>æ ‡è¯†è¯¥å­—æ®µä¸ºè¿›è¡Œé€»è¾‘åˆ é™¤çš„å­—æ®µ</td></tr><tr><td>ç›¸å…³å±æ€§</td><td>valueï¼šé€»è¾‘æœªåˆ é™¤å€¼<br>delval:é€»è¾‘åˆ é™¤å€¼</td></tr></tbody></table><h3 id="4-4-ä¹è§‚é”"><a href="#4-4-ä¹è§‚é”" class="headerlink" title="4.4 ä¹è§‚é”"></a>4.4 ä¹è§‚é”</h3><h4 id="4-4-1-æ¦‚å¿µ"><a href="#4-4-1-æ¦‚å¿µ" class="headerlink" title="4.4.1 æ¦‚å¿µ"></a>4.4.1 æ¦‚å¿µ</h4><p>åœ¨è®²è§£ä¹è§‚é”ä¹‹å‰ï¼Œæˆ‘ä»¬è¿˜æ˜¯å…ˆæ¥åˆ†æä¸‹é—®é¢˜ï¼š</p><p>ä¸šåŠ¡å¹¶å‘ç°è±¡å¸¦æ¥çš„é—®é¢˜ï¼šç§’æ€</p><ul><li>å‡å¦‚æœ‰100ä¸ªå•†å“æˆ–è€…ç¥¨åœ¨å‡ºå”®ï¼Œä¸ºäº†èƒ½ä¿è¯æ¯ä¸ªå•†å“æˆ–è€…ç¥¨åªèƒ½è¢«ä¸€ä¸ªäººè´­ä¹°ï¼Œå¦‚ä½•ä¿è¯ä¸ä¼šå‡ºç°è¶…ä¹°æˆ–è€…é‡å¤å–</li><li>å¯¹äºè¿™ä¸€ç±»é—®é¢˜ï¼Œå…¶å®æœ‰å¾ˆå¤šçš„è§£å†³æ–¹æ¡ˆå¯ä»¥ä½¿ç”¨</li><li>ç¬¬ä¸€ä¸ªæœ€å…ˆæƒ³åˆ°çš„å°±æ˜¯é”ï¼Œé”åœ¨ä¸€å°æœåŠ¡å™¨ä¸­æ˜¯å¯ä»¥è§£å†³çš„ï¼Œä½†æ˜¯å¦‚æœåœ¨å¤šå°æœåŠ¡å™¨ä¸‹é”å°±æ²¡æœ‰åŠæ³•æ§åˆ¶ï¼Œæ¯”å¦‚12306æœ‰ä¸¤å°æœåŠ¡å™¨åœ¨è¿›è¡Œå–ç¥¨ï¼Œåœ¨ä¸¤å°æœåŠ¡å™¨ä¸Šéƒ½æ·»åŠ é”çš„è¯ï¼Œé‚£ä¹Ÿæœ‰å¯èƒ½ä¼šå¯¼è‡´åœ¨åŒä¸€æ—¶åˆ»æœ‰ä¸¤ä¸ªçº¿ç¨‹åœ¨è¿›è¡Œå–ç¥¨ï¼Œè¿˜æ˜¯ä¼šå‡ºç°å¹¶å‘é—®é¢˜</li><li>æˆ‘ä»¬æ¥ä¸‹æ¥ä»‹ç»çš„è¿™ç§æ–¹å¼æ˜¯é’ˆå¯¹äºå°å‹ä¼ä¸šçš„è§£å†³æ–¹æ¡ˆï¼Œå› ä¸ºæ•°æ®åº“æœ¬èº«çš„æ€§èƒ½å°±æ˜¯ä¸ªç“¶é¢ˆï¼Œå¦‚æœå¯¹å…¶å¹¶å‘é‡è¶…è¿‡2000ä»¥ä¸Šçš„å°±éœ€è¦è€ƒè™‘å…¶ä»–çš„è§£å†³æ–¹æ¡ˆäº†ã€‚</li></ul><p>ç®€å•æ¥è¯´ï¼Œä¹è§‚é”ä¸»è¦è§£å†³çš„é—®é¢˜æ˜¯å½“è¦æ›´æ–°ä¸€æ¡è®°å½•çš„æ—¶å€™ï¼Œå¸Œæœ›è¿™æ¡è®°å½•æ²¡æœ‰è¢«åˆ«äººæ›´æ–°ã€‚</p><h4 id="4-4-2-å®ç°æ€è·¯"><a href="#4-4-2-å®ç°æ€è·¯" class="headerlink" title="4.4.2 å®ç°æ€è·¯"></a>4.4.2 å®ç°æ€è·¯</h4><p>ä¹è§‚é”çš„å®ç°æ–¹å¼:</p><blockquote><ul><li>æ•°æ®åº“è¡¨ä¸­æ·»åŠ versionåˆ—ï¼Œæ¯”å¦‚é»˜è®¤å€¼ç»™1</li><li>ç¬¬ä¸€ä¸ªçº¿ç¨‹è¦ä¿®æ”¹æ•°æ®ä¹‹å‰ï¼Œå–å‡ºè®°å½•æ—¶ï¼Œè·å–å½“å‰æ•°æ®åº“ä¸­çš„version&#x3D;1</li><li>ç¬¬äºŒä¸ªçº¿ç¨‹è¦ä¿®æ”¹æ•°æ®ä¹‹å‰ï¼Œå–å‡ºè®°å½•æ—¶ï¼Œè·å–å½“å‰æ•°æ®åº“ä¸­çš„version&#x3D;1</li><li>ç¬¬ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œæ›´æ–°æ—¶ï¼Œset version &#x3D; newVersion where version &#x3D; oldVersion<ul><li>newVersion &#x3D; version+1  [2]</li><li>oldVersion &#x3D; version  [1]</li></ul></li><li>ç¬¬äºŒä¸ªçº¿ç¨‹æ‰§è¡Œæ›´æ–°æ—¶ï¼Œset version &#x3D; newVersion where version &#x3D; oldVersion<ul><li>newVersion &#x3D; version+1  [2]</li><li>oldVersion &#x3D; version  [1]</li></ul></li><li>å‡å¦‚è¿™ä¸¤ä¸ªçº¿ç¨‹éƒ½æ¥æ›´æ–°æ•°æ®ï¼Œç¬¬ä¸€ä¸ªå’Œç¬¬äºŒä¸ªçº¿ç¨‹éƒ½å¯èƒ½å…ˆæ‰§è¡Œ<ul><li>å‡å¦‚ç¬¬ä¸€ä¸ªçº¿ç¨‹å…ˆæ‰§è¡Œæ›´æ–°ï¼Œä¼šæŠŠversionæ”¹ä¸º2ï¼Œ</li><li>ç¬¬äºŒä¸ªçº¿ç¨‹å†æ›´æ–°çš„æ—¶å€™ï¼Œset version &#x3D; 2 where version &#x3D; 1,æ­¤æ—¶æ•°æ®åº“è¡¨çš„æ•°æ®versionå·²ç»ä¸º2ï¼Œæ‰€ä»¥ç¬¬äºŒä¸ªçº¿ç¨‹ä¼šä¿®æ”¹å¤±è´¥</li><li>å‡å¦‚ç¬¬äºŒä¸ªçº¿ç¨‹å…ˆæ‰§è¡Œæ›´æ–°ï¼Œä¼šæŠŠversionæ”¹ä¸º2ï¼Œ</li><li>ç¬¬ä¸€ä¸ªçº¿ç¨‹å†æ›´æ–°çš„æ—¶å€™ï¼Œset version &#x3D; 2 where version &#x3D; 1,æ­¤æ—¶æ•°æ®åº“è¡¨çš„æ•°æ®versionå·²ç»ä¸º2ï¼Œæ‰€ä»¥ç¬¬ä¸€ä¸ªçº¿ç¨‹ä¼šä¿®æ”¹å¤±è´¥</li><li>ä¸ç®¡è°å…ˆæ‰§è¡Œéƒ½ä¼šç¡®ä¿åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹æ›´æ–°æ•°æ®ï¼Œè¿™å°±æ˜¯MPæä¾›çš„ä¹è§‚é”çš„å®ç°åŸç†åˆ†æã€‚</li></ul></li></ul></blockquote><p>ä¸Šé¢æ‰€è¯´çš„æ­¥éª¤å…·ä½“è¯¥å¦‚ä½•å®ç°å‘¢?</p><h4 id="4-4-3-å®ç°æ­¥éª¤"><a href="#4-4-3-å®ç°æ­¥éª¤" class="headerlink" title="4.4.3 å®ç°æ­¥éª¤"></a>4.4.3 å®ç°æ­¥éª¤</h4><p>åˆ†æå®Œæ­¥éª¤åï¼Œå…·ä½“çš„å®ç°æ­¥éª¤å¦‚ä¸‹ï¼š</p><h5 id="æ­¥éª¤1ï¼šæ•°æ®åº“è¡¨æ·»åŠ åˆ—"><a href="#æ­¥éª¤1ï¼šæ•°æ®åº“è¡¨æ·»åŠ åˆ—" class="headerlink" title="æ­¥éª¤1ï¼šæ•°æ®åº“è¡¨æ·»åŠ åˆ—"></a>æ­¥éª¤1ï¼šæ•°æ®åº“è¡¨æ·»åŠ åˆ—</h5><p>åˆ—åå¯ä»¥ä»»æ„ï¼Œæ¯”å¦‚ä½¿ç”¨<code>version</code>,ç»™åˆ—è®¾ç½®é»˜è®¤å€¼ä¸º<code>1</code></p><p><img src="/2022/07/25/MyBatisPlus/1631249913103.png" alt="1631249913103"></p><h5 id="æ­¥éª¤2ï¼šåœ¨æ¨¡å‹ç±»ä¸­æ·»åŠ å¯¹åº”çš„å±æ€§"><a href="#æ­¥éª¤2ï¼šåœ¨æ¨¡å‹ç±»ä¸­æ·»åŠ å¯¹åº”çš„å±æ€§" class="headerlink" title="æ­¥éª¤2ï¼šåœ¨æ¨¡å‹ç±»ä¸­æ·»åŠ å¯¹åº”çš„å±æ€§"></a>æ­¥éª¤2ï¼šåœ¨æ¨¡å‹ç±»ä¸­æ·»åŠ å¯¹åº”çš„å±æ€§</h5><p>æ ¹æ®æ·»åŠ çš„å­—æ®µåˆ—åï¼Œåœ¨æ¨¡å‹ç±»ä¸­æ·»åŠ å¯¹åº”çš„å±æ€§å€¼</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="comment">//@TableName(&quot;tbl_user&quot;) å¯ä»¥ä¸å†™æ˜¯å› ä¸ºé…ç½®äº†å…¨å±€é…ç½®</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="meta">@TableId(type = IdType.ASSIGN_UUID)</span></span><br><span class="line">    <span class="keyword">private</span> String id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="meta">@TableField(value=&quot;pwd&quot;,select=false)</span></span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> String tel;</span><br><span class="line">    <span class="meta">@TableField(exist=false)</span></span><br><span class="line">    <span class="keyword">private</span> Integer online;</span><br><span class="line">    <span class="keyword">private</span> Integer deleted;</span><br><span class="line">    <span class="meta">@Version</span></span><br><span class="line">    <span class="keyword">private</span> Integer version;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="æ­¥éª¤3ï¼šæ·»åŠ ä¹è§‚é”çš„æ‹¦æˆªå™¨"><a href="#æ­¥éª¤3ï¼šæ·»åŠ ä¹è§‚é”çš„æ‹¦æˆªå™¨" class="headerlink" title="æ­¥éª¤3ï¼šæ·»åŠ ä¹è§‚é”çš„æ‹¦æˆªå™¨"></a>æ­¥éª¤3ï¼šæ·»åŠ ä¹è§‚é”çš„æ‹¦æˆªå™¨</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MpConfig</span> &#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> MybatisPlusInterceptor <span class="title function_">mpInterceptor</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//1.å®šä¹‰Mpæ‹¦æˆªå™¨</span></span><br><span class="line">        <span class="type">MybatisPlusInterceptor</span> <span class="variable">mpInterceptor</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MybatisPlusInterceptor</span>();</span><br><span class="line">        <span class="comment">//2.æ·»åŠ ä¹è§‚é”æ‹¦æˆªå™¨</span></span><br><span class="line">        mpInterceptor.addInnerInterceptor(<span class="keyword">new</span> <span class="title class_">OptimisticLockerInnerInterceptor</span>());</span><br><span class="line">        <span class="keyword">return</span> mpInterceptor;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="æ­¥éª¤4ï¼šæ‰§è¡Œæ›´æ–°æ“ä½œ"><a href="#æ­¥éª¤4ï¼šæ‰§è¡Œæ›´æ–°æ“ä½œ" class="headerlink" title="æ­¥éª¤4ï¼šæ‰§è¡Œæ›´æ–°æ“ä½œ"></a>æ­¥éª¤4ï¼šæ‰§è¡Œæ›´æ–°æ“ä½œ</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Mybatisplus03DqlApplicationTests</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserDao userDao;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">testUpdate</span><span class="params">()</span>&#123;</span><br><span class="line">       <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">        user.setId(<span class="number">3L</span>);</span><br><span class="line">        user.setName(<span class="string">&quot;Jock666&quot;</span>);</span><br><span class="line">        userDao.updateById(user);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/2022/07/25/MyBatisPlus/1631252305080.png" alt="1631252305080"></p><p>ä½ ä¼šå‘ç°ï¼Œè¿™æ¬¡ä¿®æ”¹å¹¶æ²¡æœ‰æ›´æ–°versionå­—æ®µï¼ŒåŸå› æ˜¯æ²¡æœ‰æºå¸¦versionæ•°æ®ã€‚</p><p>æ·»åŠ versionæ•°æ®</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Mybatisplus03DqlApplicationTests</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserDao userDao;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">testUpdate</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">        user.setId(<span class="number">3L</span>);</span><br><span class="line">        user.setName(<span class="string">&quot;Jock666&quot;</span>);</span><br><span class="line">        user.setVersion(<span class="number">1</span>);</span><br><span class="line">        userDao.updateById(user);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/2022/07/25/MyBatisPlus/1631252393659.png" alt="1631252393659"></p><p>ä½ ä¼šå‘ç°ï¼Œæˆ‘ä»¬ä¼ é€’çš„æ˜¯1ï¼ŒMPä¼šå°†1è¿›è¡ŒåŠ 1ï¼Œç„¶åï¼Œæ›´æ–°å›åˆ°æ•°æ®åº“è¡¨ä¸­ã€‚</p><p>æ‰€ä»¥è¦æƒ³å®ç°ä¹è§‚é”ï¼Œé¦–å…ˆç¬¬ä¸€æ­¥åº”è¯¥æ˜¯æ‹¿åˆ°è¡¨ä¸­çš„versionï¼Œç„¶åæ‹¿versionå½“æ¡ä»¶åœ¨å°†versionåŠ 1æ›´æ–°å›åˆ°æ•°æ®åº“è¡¨ä¸­ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨æŸ¥è¯¢çš„æ—¶å€™ï¼Œéœ€è¦å¯¹å…¶è¿›è¡ŒæŸ¥è¯¢</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Mybatisplus03DqlApplicationTests</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserDao userDao;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">testUpdate</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">//1.å…ˆé€šè¿‡è¦ä¿®æ”¹çš„æ•°æ®idå°†å½“å‰æ•°æ®æŸ¥è¯¢å‡ºæ¥</span></span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userDao.selectById(<span class="number">3L</span>);</span><br><span class="line">        <span class="comment">//2.å°†è¦ä¿®æ”¹çš„å±æ€§é€ä¸€è®¾ç½®è¿›å»</span></span><br><span class="line">        user.setName(<span class="string">&quot;Jock888&quot;</span>);</span><br><span class="line">        userDao.updateById(user);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/2022/07/25/MyBatisPlus/1631252667865.png" alt="1631252667865"></p><p>å¤§æ¦‚åˆ†æå®Œä¹è§‚é”çš„å®ç°æ­¥éª¤ä»¥åï¼Œæˆ‘ä»¬æ¥æ¨¡æ‹Ÿä¸€ç§åŠ é”çš„æƒ…å†µï¼Œçœ‹çœ‹èƒ½ä¸èƒ½å®ç°å¤šä¸ªäººä¿®æ”¹åŒä¸€ä¸ªæ•°æ®çš„æ—¶å€™ï¼Œåªèƒ½æœ‰ä¸€ä¸ªäººä¿®æ”¹æˆåŠŸã€‚</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Mybatisplus03DqlApplicationTests</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserDao userDao;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">testUpdate</span><span class="params">()</span>&#123;</span><br><span class="line">       <span class="comment">//1.å…ˆé€šè¿‡è¦ä¿®æ”¹çš„æ•°æ®idå°†å½“å‰æ•°æ®æŸ¥è¯¢å‡ºæ¥</span></span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userDao.selectById(<span class="number">3L</span>);     <span class="comment">//version=3</span></span><br><span class="line">        <span class="type">User</span> <span class="variable">user2</span> <span class="operator">=</span> userDao.selectById(<span class="number">3L</span>);    <span class="comment">//version=3</span></span><br><span class="line">        user2.setName(<span class="string">&quot;Jock aaa&quot;</span>);</span><br><span class="line">        userDao.updateById(user2);              <span class="comment">//version=&gt;4</span></span><br><span class="line">        user.setName(<span class="string">&quot;Jock bbb&quot;</span>);</span><br><span class="line">        userDao.updateById(user);               <span class="comment">//verion=3?æ¡ä»¶è¿˜æˆç«‹å—ï¼Ÿ</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿è¡Œç¨‹åºï¼Œåˆ†æç»“æœï¼š</p><p><img src="/2022/07/25/MyBatisPlus/1631253302587.png" alt="1631253302587"></p><p>ä¹è§‚é”å°±å·²ç»å®ç°å®Œæˆäº†ï¼Œå¦‚æœå¯¹äºä¸Šé¢çš„è¿™äº›æ­¥éª¤è®°ä¸ä½å’‹åŠå‘¢?</p><p>å‚è€ƒå®˜æ–¹æ–‡æ¡£æ¥å®ç°ï¼š</p><p><code>https://mp.baomidou.com/guide/interceptor-optimistic-locker.html#optimisticlockerinnerinterceptor</code></p><p><img src="/2022/07/25/MyBatisPlus/1631253387845.png" alt="1631253387845"></p><h2 id="5ï¼Œå¿«é€Ÿå¼€å‘"><a href="#5ï¼Œå¿«é€Ÿå¼€å‘" class="headerlink" title="5ï¼Œå¿«é€Ÿå¼€å‘"></a>5ï¼Œå¿«é€Ÿå¼€å‘</h2><h3 id="5-1-ä»£ç ç”Ÿæˆå™¨åŸç†åˆ†æ"><a href="#5-1-ä»£ç ç”Ÿæˆå™¨åŸç†åˆ†æ" class="headerlink" title="5.1 ä»£ç ç”Ÿæˆå™¨åŸç†åˆ†æ"></a>5.1 ä»£ç ç”Ÿæˆå™¨åŸç†åˆ†æ</h3><p>é€ å¥:<img src="/2022/07/25/MyBatisPlus/1631253928893.png" alt="1631253928893"></p><p>æˆ‘ä»¬å¯ä»¥å¾€ç©ºç™½å†…å®¹è¿›è¡Œå¡«è¯é€ å¥ï¼Œæ¯”å¦‚:<img src="/2022/07/25/MyBatisPlus/1631253971409.png" alt="1631253971409"></p><p>åœ¨æ¯”å¦‚:<img src="/2022/07/25/MyBatisPlus/1631253994782.png" alt="1631253994782"></p><p>è§‚å¯Ÿæˆ‘ä»¬ä¹‹å‰å†™çš„ä»£ç ï¼Œä¼šå‘ç°å…¶ä¸­ä¹Ÿä¼šæœ‰å¾ˆå¤šé‡å¤å†…å®¹ï¼Œæ¯”å¦‚:</p><p><img src="/2022/07/25/MyBatisPlus/1631254075651.png" alt="1631254075651"></p><p>é‚£æˆ‘ä»¬å°±æƒ³ï¼Œå¦‚æœæˆ‘æƒ³åšä¸€ä¸ªBookæ¨¡å—çš„å¼€å‘ï¼Œæ˜¯ä¸æ˜¯åªéœ€è¦å°†çº¢è‰²éƒ¨åˆ†çš„å†…å®¹å…¨éƒ¨æ›´æ¢æˆ<code>Book</code>å³å¯ï¼Œå¦‚ï¼š</p><p><img src="/2022/07/25/MyBatisPlus/1631254119948.png" alt="1631254119948"></p><p>æ‰€ä»¥æˆ‘ä»¬ä¼šå‘ç°ï¼Œåšä»»ä½•æ¨¡å—çš„å¼€å‘ï¼Œå¯¹äºè¿™æ®µä»£ç ï¼ŒåŸºæœ¬ä¸Šéƒ½æ˜¯å¯¹çº¢è‰²éƒ¨åˆ†çš„è°ƒæ•´ï¼Œæ‰€ä»¥æˆ‘ä»¬æŠŠå»æ‰çº¢è‰²å†…å®¹çš„ä¸œè¥¿ç§°ä¹‹ä¸º<code>æ¨¡æ¿</code>ï¼Œçº¢è‰²éƒ¨åˆ†ç§°ä¹‹ä¸º<code>å‚æ•°</code>ï¼Œä»¥ååªéœ€è¦ä¼ å…¥ä¸åŒçš„å‚æ•°ï¼Œå°±å¯ä»¥æ ¹æ®æ¨¡æ¿åˆ›å»ºå‡ºä¸åŒæ¨¡å—çš„daoä»£ç ã€‚</p><p>é™¤äº†Daoå¯ä»¥æŠ½å–æ¨¡å—ï¼Œå…¶å®æˆ‘ä»¬å¸¸è§çš„ç±»éƒ½å¯ä»¥è¿›è¡ŒæŠ½å–ï¼Œåªè¦ä»–ä»¬æœ‰å…¬å…±éƒ¨åˆ†å³å¯ã€‚å†æ¥çœ‹ä¸‹æ¨¡å‹ç±»çš„æ¨¡æ¿ï¼š</p><p><img src="/2022/07/25/MyBatisPlus/1631254344180.png" alt="1631254344180"></p><ul><li>â‘  å¯ä»¥æ ¹æ®æ•°æ®åº“è¡¨çš„è¡¨åæ¥å¡«å……</li><li>â‘¡ å¯ä»¥æ ¹æ®ç”¨æˆ·çš„é…ç½®æ¥ç”ŸæˆIDç”Ÿæˆç­–ç•¥</li><li>â‘¢åˆ°â‘¨å¯ä»¥æ ¹æ®æ•°æ®åº“è¡¨å­—æ®µåç§°æ¥å¡«å……</li></ul><p>æ‰€ä»¥åªè¦æˆ‘ä»¬çŸ¥é“æ˜¯å¯¹å“ªå¼ è¡¨è¿›è¡Œä»£ç ç”Ÿæˆï¼Œè¿™äº›å†…å®¹æˆ‘ä»¬éƒ½å¯ä»¥è¿›è¡Œå¡«å……ã€‚</p><p>åˆ†æå®Œåï¼Œæˆ‘ä»¬ä¼šå‘ç°ï¼Œè¦æƒ³å®Œæˆä»£ç è‡ªåŠ¨ç”Ÿæˆï¼Œæˆ‘ä»¬éœ€è¦æœ‰ä»¥ä¸‹å†…å®¹:</p><ul><li>æ¨¡æ¿: MyBatisPlusæä¾›ï¼Œå¯ä»¥è‡ªå·±æä¾›ï¼Œä½†æ˜¯éº»çƒ¦ï¼Œä¸å»ºè®®</li><li>æ•°æ®åº“ç›¸å…³é…ç½®ï¼šè¯»å–æ•°æ®åº“è·å–è¡¨å’Œå­—æ®µä¿¡æ¯</li><li>å¼€å‘è€…è‡ªå®šä¹‰é…ç½®ï¼šæ‰‹å·¥é…ç½®ï¼Œæ¯”å¦‚IDç”Ÿæˆç­–ç•¥</li></ul><h3 id="5-2-ä»£ç ç”Ÿæˆå™¨å®ç°"><a href="#5-2-ä»£ç ç”Ÿæˆå™¨å®ç°" class="headerlink" title="5.2 ä»£ç ç”Ÿæˆå™¨å®ç°"></a>5.2 ä»£ç ç”Ÿæˆå™¨å®ç°</h3><h4 id="æ­¥éª¤1ï¼šåˆ›å»ºä¸€ä¸ªMavené¡¹ç›®"><a href="#æ­¥éª¤1ï¼šåˆ›å»ºä¸€ä¸ªMavené¡¹ç›®" class="headerlink" title="æ­¥éª¤1ï¼šåˆ›å»ºä¸€ä¸ªMavené¡¹ç›®"></a>æ­¥éª¤1ï¼šåˆ›å»ºä¸€ä¸ªMavené¡¹ç›®</h4><h4 id="ä»£ç 2ï¼šå¯¼å…¥å¯¹åº”çš„jaråŒ…"><a href="#ä»£ç 2ï¼šå¯¼å…¥å¯¹åº”çš„jaråŒ…" class="headerlink" title="ä»£ç 2ï¼šå¯¼å…¥å¯¹åº”çš„jaråŒ…"></a>ä»£ç 2ï¼šå¯¼å…¥å¯¹åº”çš„jaråŒ…</h4><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.5.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.itheima<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatisplus_04_generator<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">java.version</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">java.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--spring webmvc--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--mybatisplus--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.4.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--druid--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.16<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--mysql--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>runtime<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--test--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--lombok--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.18.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--ä»£ç ç”Ÿæˆå™¨--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-generator<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.4.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--velocityæ¨¡æ¿å¼•æ“--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.velocity<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>velocity-engine-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="æ­¥éª¤3ï¼šç¼–å†™å¼•å¯¼ç±»"><a href="#æ­¥éª¤3ï¼šç¼–å†™å¼•å¯¼ç±»" class="headerlink" title="æ­¥éª¤3ï¼šç¼–å†™å¼•å¯¼ç±»"></a>æ­¥éª¤3ï¼šç¼–å†™å¼•å¯¼ç±»</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Mybatisplus04GeneratorApplication</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(Mybatisplus04GeneratorApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ­¥éª¤4ï¼šåˆ›å»ºä»£ç ç”Ÿæˆç±»"><a href="#æ­¥éª¤4ï¼šåˆ›å»ºä»£ç ç”Ÿæˆç±»" class="headerlink" title="æ­¥éª¤4ï¼šåˆ›å»ºä»£ç ç”Ÿæˆç±»"></a>æ­¥éª¤4ï¼šåˆ›å»ºä»£ç ç”Ÿæˆç±»</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CodeGenerator</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//1.è·å–ä»£ç ç”Ÿæˆå™¨çš„å¯¹è±¡</span></span><br><span class="line">        <span class="type">AutoGenerator</span> <span class="variable">autoGenerator</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AutoGenerator</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//è®¾ç½®æ•°æ®åº“ç›¸å…³é…ç½®</span></span><br><span class="line">        <span class="type">DataSourceConfig</span> <span class="variable">dataSource</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DataSourceConfig</span>();</span><br><span class="line">        dataSource.setDriverName(<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>);</span><br><span class="line">        dataSource.setUrl(<span class="string">&quot;jdbc:mysql://localhost:3306/mybatisplus_db?serverTimezone=UTC&quot;</span>);</span><br><span class="line">        dataSource.setUsername(<span class="string">&quot;root&quot;</span>);</span><br><span class="line">        dataSource.setPassword(<span class="string">&quot;root&quot;</span>);</span><br><span class="line">        autoGenerator.setDataSource(dataSource);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//è®¾ç½®å…¨å±€é…ç½®</span></span><br><span class="line">        <span class="type">GlobalConfig</span> <span class="variable">globalConfig</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">GlobalConfig</span>();</span><br><span class="line">        globalConfig.setOutputDir(System.getProperty(<span class="string">&quot;user.dir&quot;</span>)+<span class="string">&quot;/mybatisplus_04_generator/src/main/java&quot;</span>);    <span class="comment">//è®¾ç½®ä»£ç ç”Ÿæˆä½ç½®</span></span><br><span class="line">        globalConfig.setOpen(<span class="literal">false</span>);    <span class="comment">//è®¾ç½®ç”Ÿæˆå®Œæ¯•åæ˜¯å¦æ‰“å¼€ç”Ÿæˆä»£ç æ‰€åœ¨çš„ç›®å½•</span></span><br><span class="line">        globalConfig.setAuthor(<span class="string">&quot;é»‘é©¬ç¨‹åºå‘˜&quot;</span>);    <span class="comment">//è®¾ç½®ä½œè€…</span></span><br><span class="line">        globalConfig.setFileOverride(<span class="literal">true</span>);     <span class="comment">//è®¾ç½®æ˜¯å¦è¦†ç›–åŸå§‹ç”Ÿæˆçš„æ–‡ä»¶</span></span><br><span class="line">        globalConfig.setMapperName(<span class="string">&quot;%sDao&quot;</span>);    <span class="comment">//è®¾ç½®æ•°æ®å±‚æ¥å£åï¼Œ%sä¸ºå ä½ç¬¦ï¼ŒæŒ‡ä»£æ¨¡å—åç§°</span></span><br><span class="line">        globalConfig.setIdType(IdType.ASSIGN_ID);   <span class="comment">//è®¾ç½®Idç”Ÿæˆç­–ç•¥</span></span><br><span class="line">        autoGenerator.setGlobalConfig(globalConfig);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//è®¾ç½®åŒ…åç›¸å…³é…ç½®</span></span><br><span class="line">        <span class="type">PackageConfig</span> <span class="variable">packageInfo</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">PackageConfig</span>();</span><br><span class="line">        packageInfo.setParent(<span class="string">&quot;com.aaa&quot;</span>);   <span class="comment">//è®¾ç½®ç”Ÿæˆçš„åŒ…åï¼Œä¸ä»£ç æ‰€åœ¨ä½ç½®ä¸å†²çªï¼ŒäºŒè€…å åŠ ç»„æˆå®Œæ•´è·¯å¾„</span></span><br><span class="line">        packageInfo.setEntity(<span class="string">&quot;domain&quot;</span>);    <span class="comment">//è®¾ç½®å®ä½“ç±»åŒ…å</span></span><br><span class="line">        packageInfo.setMapper(<span class="string">&quot;dao&quot;</span>);   <span class="comment">//è®¾ç½®æ•°æ®å±‚åŒ…å</span></span><br><span class="line">        autoGenerator.setPackageInfo(packageInfo);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//ç­–ç•¥è®¾ç½®</span></span><br><span class="line">        <span class="type">StrategyConfig</span> <span class="variable">strategyConfig</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StrategyConfig</span>();</span><br><span class="line">        strategyConfig.setInclude(<span class="string">&quot;tbl_user&quot;</span>);  <span class="comment">//è®¾ç½®å½“å‰å‚ä¸ç”Ÿæˆçš„è¡¨åï¼Œå‚æ•°ä¸ºå¯å˜å‚æ•°</span></span><br><span class="line">        <span class="comment">//è®¾ç½®æ•°æ®åº“è¡¨çš„å‰ç¼€åç§°ï¼Œæ¨¡å—å = æ•°æ®åº“è¡¨å - å‰ç¼€å  ä¾‹å¦‚ï¼š User = tbl_user - tbl_</span></span><br><span class="line">        strategyConfig.setTablePrefix(<span class="string">&quot;tbl_&quot;</span>);  </span><br><span class="line">        strategyConfig.setRestControllerStyle(<span class="literal">true</span>);    <span class="comment">//è®¾ç½®æ˜¯å¦å¯ç”¨Resté£æ ¼</span></span><br><span class="line">        strategyConfig.setVersionFieldName(<span class="string">&quot;version&quot;</span>);  <span class="comment">//è®¾ç½®ä¹è§‚é”å­—æ®µå</span></span><br><span class="line">        strategyConfig.setLogicDeleteFieldName(<span class="string">&quot;deleted&quot;</span>);  <span class="comment">//è®¾ç½®é€»è¾‘åˆ é™¤å­—æ®µå</span></span><br><span class="line">        strategyConfig.setEntityLombokModel(<span class="literal">true</span>);  <span class="comment">//è®¾ç½®æ˜¯å¦å¯ç”¨lombok</span></span><br><span class="line">        autoGenerator.setStrategy(strategyConfig);</span><br><span class="line">        <span class="comment">//2.æ‰§è¡Œç”Ÿæˆæ“ä½œ</span></span><br><span class="line">        autoGenerator.execute();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯¹äºä»£ç ç”Ÿæˆå™¨ä¸­çš„ä»£ç å†…å®¹ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ä»<a href="https://mp.baomidou.com/guide/generator.html">å®˜æ–¹æ–‡æ¡£</a>ä¸­è·å–ä»£ç è¿›è¡Œä¿®æ”¹ï¼Œ</p><p><code>https://mp.baomidou.com/guide/generator.html</code></p><h4 id="æ­¥éª¤5ï¼šè¿è¡Œç¨‹åº"><a href="#æ­¥éª¤5ï¼šè¿è¡Œç¨‹åº" class="headerlink" title="æ­¥éª¤5ï¼šè¿è¡Œç¨‹åº"></a>æ­¥éª¤5ï¼šè¿è¡Œç¨‹åº</h4><p>è¿è¡ŒæˆåŠŸåï¼Œä¼šåœ¨å½“å‰é¡¹ç›®ä¸­ç”Ÿæˆå¾ˆå¤šä»£ç ï¼Œä»£ç åŒ…å«<code>controller</code>,<code>service</code>ï¼Œ<code>mapper</code>å’Œ<code>entity</code></p><p><img src="/2022/07/25/MyBatisPlus/1631255110375.png" alt="1631255110375"></p><p>è‡³æ­¤ä»£ç ç”Ÿæˆå™¨å°±å·²ç»å®Œæˆå·¥ä½œï¼Œæˆ‘ä»¬èƒ½å¿«é€Ÿæ ¹æ®æ•°æ®åº“è¡¨æ¥åˆ›å»ºå¯¹åº”çš„ç±»ï¼Œç®€åŒ–æˆ‘ä»¬çš„ä»£ç å¼€å‘ã€‚</p><h3 id="5-3-MPä¸­Serviceçš„CRUD"><a href="#5-3-MPä¸­Serviceçš„CRUD" class="headerlink" title="5.3 MPä¸­Serviceçš„CRUD"></a>5.3 MPä¸­Serviceçš„CRUD</h3><p>å›é¡¾æˆ‘ä»¬ä¹‹å‰ä¸šåŠ¡å±‚ä»£ç çš„ç¼–å†™ï¼Œç¼–å†™æ¥å£å’Œå¯¹åº”çš„å®ç°ç±»ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserService</span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">UserService</span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¥å£å’Œå®ç°ç±»æœ‰äº†ä»¥åï¼Œéœ€è¦åœ¨æ¥å£å’Œå®ç°ç±»ä¸­å£°æ˜æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserService</span>&#123;</span><br><span class="line"><span class="keyword">public</span> List&lt;User&gt; <span class="title function_">findAll</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">UserService</span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserDao userDao;</span><br><span class="line">    </span><br><span class="line"><span class="keyword">public</span> List&lt;User&gt; <span class="title function_">findAll</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> userDao.selectList(<span class="literal">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>MPçœ‹åˆ°ä¸Šé¢çš„ä»£ç ä»¥åå°±è¯´è¿™äº›æ–¹æ³•ä¹Ÿæ˜¯æ¯”è¾ƒå›ºå®šå’Œé€šç”¨çš„ï¼Œé‚£æˆ‘æ¥å¸®ä½ æŠ½å–ä¸‹ï¼Œæ‰€ä»¥MPæä¾›äº†ä¸€ä¸ªServiceæ¥å£å’Œå®ç°ç±»ï¼Œåˆ†åˆ«æ˜¯:<code>IService</code>å’Œ<code>ServiceImpl</code>,åè€…æ˜¯å¯¹å‰è€…çš„ä¸€ä¸ªå…·ä½“å®ç°ã€‚</p><p>ä»¥åæˆ‘ä»¬è‡ªå·±å†™çš„Serviceå°±å¯ä»¥è¿›è¡Œå¦‚ä¸‹ä¿®æ”¹:</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserService</span> <span class="keyword">extends</span> <span class="title class_">IService</span>&lt;User&gt;&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserServiceImpl</span> <span class="keyword">extends</span> <span class="title class_">ServiceImpl</span>&lt;UserDao, User&gt; <span class="keyword">implements</span> <span class="title class_">UserService</span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹ä»¥åçš„å¥½å¤„æ˜¯ï¼ŒMPå·²ç»å¸®æˆ‘ä»¬æŠŠä¸šåŠ¡å±‚çš„ä¸€äº›åŸºç¡€çš„å¢åˆ æ”¹æŸ¥éƒ½å·²ç»å®ç°äº†ï¼Œå¯ä»¥ç›´æ¥è¿›è¡Œä½¿ç”¨ã€‚</p><p>ç¼–å†™æµ‹è¯•ç±»è¿›è¡Œæµ‹è¯•ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Mybatisplus04GeneratorApplicationTests</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> IUserService userService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">testFindAll</span><span class="params">()</span> &#123;</span><br><span class="line">        List&lt;User&gt; list = userService.list();</span><br><span class="line">        System.out.println(list);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„ï¼š</strong>mybatisplus_04_generatoré¡¹ç›®ä¸­å¯¹äºMyBatisçš„ç¯å¢ƒæ˜¯æ²¡æœ‰è¿›è¡Œé…ç½®ï¼Œå¦‚æœæƒ³è¦è¿è¡Œï¼Œéœ€è¦æå–å°†é…ç½®æ–‡ä»¶ä¸­çš„å†…å®¹è¿›è¡Œå®Œå–„ååœ¨è¿è¡Œã€‚</p><p>æ€è€ƒï¼šåœ¨MPå°è£…çš„Serviceå±‚éƒ½æœ‰å“ªäº›æ–¹æ³•å¯ä»¥ç”¨?</p><p>æŸ¥çœ‹<a href="https://mp.baomidou.com/guide/crud-interface.html">å®˜æ–¹æ–‡æ¡£</a>ï¼š<code>https://mp.baomidou.com/guide/crud-interface.html</code>,è¿™äº›æä¾›çš„æ–¹æ³•å¤§å®¶å¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£è¿›è¡Œå­¦ä¹ ä½¿ç”¨ï¼Œæ–¹æ³•çš„åç§°å¯èƒ½æœ‰äº›å˜åŒ–ï¼Œä½†æ˜¯æ–¹æ³•å¯¹åº”çš„å‚æ•°å’Œè¿”å›å€¼åŸºæœ¬ç±»ä¼¼ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> æ¡†æ¶ </tag>
            
            <tag> MyBatisPlus </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
